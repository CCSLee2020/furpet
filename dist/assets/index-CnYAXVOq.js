function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/status-tap-BY523Opi.js","assets/index8-Vy7iDaNU.js","assets/input-shims-CTTgUvhO.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}
function Lce(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Ef(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var K2={exports:{}},wv={},Y2={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var If=Symbol.for("react.element"),DU=Symbol.for("react.portal"),OU=Symbol.for("react.fragment"),LU=Symbol.for("react.strict_mode"),MU=Symbol.for("react.profiler"),VU=Symbol.for("react.provider"),FU=Symbol.for("react.context"),$U=Symbol.for("react.forward_ref"),BU=Symbol.for("react.suspense"),jU=Symbol.for("react.memo"),UU=Symbol.for("react.lazy"),jk=Symbol.iterator;function zU(t){return t===null||typeof t!="object"?null:(t=jk&&t[jk]||t["@@iterator"],typeof t=="function"?t:null)}var X2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q2=Object.assign,J2={};function kc(t,e,n){this.props=t,this.context=e,this.refs=J2,this.updater=n||X2}kc.prototype.isReactComponent={};kc.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};kc.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Z2(){}Z2.prototype=kc.prototype;function r1(t,e,n){this.props=t,this.context=e,this.refs=J2,this.updater=n||X2}var i1=r1.prototype=new Z2;i1.constructor=r1;Q2(i1,kc.prototype);i1.isPureReactComponent=!0;var Uk=Array.isArray,eP=Object.prototype.hasOwnProperty,o1={current:null},tP={key:!0,ref:!0,__self:!0,__source:!0};function nP(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)eP.call(e,r)&&!tP.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:If,type:t,key:o,ref:s,props:i,_owner:o1.current}}function WU(t,e){return{$$typeof:If,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function s1(t){return typeof t=="object"&&t!==null&&t.$$typeof===If}function qU(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var zk=/\/+/g;function B0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?qU(""+t.key):e.toString(36)}function pm(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case If:case DU:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+B0(s,0):r,Uk(i)?(n="",t!=null&&(n=t.replace(zk,"$&/")+"/"),pm(i,e,n,"",function(l){return l})):i!=null&&(s1(i)&&(i=WU(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(zk,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",Uk(t))for(var a=0;a<t.length;a++){o=t[a];var u=r+B0(o,a);s+=pm(o,e,n,u,i)}else if(u=zU(t),typeof u=="function")for(t=u.call(t),a=0;!(o=t.next()).done;)o=o.value,u=r+B0(o,a++),s+=pm(o,e,n,u,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function xp(t,e,n){if(t==null)return t;var r=[],i=0;return pm(t,r,"","",function(o){return e.call(n,o,i++)}),r}function HU(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var nr={current:null},mm={transition:null},GU={ReactCurrentDispatcher:nr,ReactCurrentBatchConfig:mm,ReactCurrentOwner:o1};Me.Children={map:xp,forEach:function(t,e,n){xp(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return xp(t,function(){e++}),e},toArray:function(t){return xp(t,function(e){return e})||[]},only:function(t){if(!s1(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Me.Component=kc;Me.Fragment=OU;Me.Profiler=MU;Me.PureComponent=r1;Me.StrictMode=LU;Me.Suspense=BU;Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GU;Me.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Q2({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=o1.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)eP.call(e,u)&&!tP.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:If,type:t.type,key:i,ref:o,props:r,_owner:s}};Me.createContext=function(t){return t={$$typeof:FU,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:VU,_context:t},t.Consumer=t};Me.createElement=nP;Me.createFactory=function(t){var e=nP.bind(null,t);return e.type=t,e};Me.createRef=function(){return{current:null}};Me.forwardRef=function(t){return{$$typeof:$U,render:t}};Me.isValidElement=s1;Me.lazy=function(t){return{$$typeof:UU,_payload:{_status:-1,_result:t},_init:HU}};Me.memo=function(t,e){return{$$typeof:jU,type:t,compare:e===void 0?null:e}};Me.startTransition=function(t){var e=mm.transition;mm.transition={};try{t()}finally{mm.transition=e}};Me.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Me.useCallback=function(t,e){return nr.current.useCallback(t,e)};Me.useContext=function(t){return nr.current.useContext(t)};Me.useDebugValue=function(){};Me.useDeferredValue=function(t){return nr.current.useDeferredValue(t)};Me.useEffect=function(t,e){return nr.current.useEffect(t,e)};Me.useId=function(){return nr.current.useId()};Me.useImperativeHandle=function(t,e,n){return nr.current.useImperativeHandle(t,e,n)};Me.useInsertionEffect=function(t,e){return nr.current.useInsertionEffect(t,e)};Me.useLayoutEffect=function(t,e){return nr.current.useLayoutEffect(t,e)};Me.useMemo=function(t,e){return nr.current.useMemo(t,e)};Me.useReducer=function(t,e,n){return nr.current.useReducer(t,e,n)};Me.useRef=function(t){return nr.current.useRef(t)};Me.useState=function(t){return nr.current.useState(t)};Me.useSyncExternalStore=function(t,e,n){return nr.current.useSyncExternalStore(t,e,n)};Me.useTransition=function(){return nr.current.useTransition()};Me.version="18.2.0";Y2.exports=Me;var Q=Y2.exports;const H=Ef(Q);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KU=Q,YU=Symbol.for("react.element"),XU=Symbol.for("react.fragment"),QU=Object.prototype.hasOwnProperty,JU=KU.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,ZU={key:!0,ref:!0,__self:!0,__source:!0};function rP(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)QU.call(e,r)&&!ZU.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:YU,type:t,key:o,ref:s,props:i,_owner:JU.current}}wv.Fragment=XU;wv.jsx=rP;wv.jsxs=rP;K2.exports=wv;var p=K2.exports,iP={exports:{}},Fr={},oP={exports:{}},sP={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(L,V){var M=L.length;L.push(V);e:for(;0<M;){var Y=M-1>>>1,X=L[Y];if(0<i(X,V))L[Y]=V,L[M]=X,M=Y;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var V=L[0],M=L.pop();if(M!==V){L[0]=M;e:for(var Y=0,X=L.length,se=X>>>1;Y<se;){var re=2*(Y+1)-1,xe=L[re],ce=re+1,_e=L[ce];if(0>i(xe,M))ce<X&&0>i(_e,xe)?(L[Y]=_e,L[ce]=M,Y=ce):(L[Y]=xe,L[re]=M,Y=re);else if(ce<X&&0>i(_e,M))L[Y]=_e,L[ce]=M,Y=ce;else break e}}return V}function i(L,V){var M=L.sortIndex-V.sortIndex;return M!==0?M:L.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,a=s.now();t.unstable_now=function(){return s.now()-a}}var u=[],l=[],c=1,d=null,h=3,f=!1,m=!1,v=!1,y=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(L){for(var V=n(l);V!==null;){if(V.callback===null)r(l);else if(V.startTime<=L)r(l),V.sortIndex=V.expirationTime,e(u,V);else break;V=n(l)}}function x(L){if(v=!1,b(L),!m)if(n(u)!==null)m=!0,K(_);else{var V=n(l);V!==null&&j(x,V.startTime-L)}}function _(L,V){m=!1,v&&(v=!1,g(C),C=-1),f=!0;var M=h;try{for(b(V),d=n(u);d!==null&&(!(d.expirationTime>V)||L&&!R());){var Y=d.callback;if(typeof Y=="function"){d.callback=null,h=d.priorityLevel;var X=Y(d.expirationTime<=V);V=t.unstable_now(),typeof X=="function"?d.callback=X:d===n(u)&&r(u),b(V)}else r(u);d=n(u)}if(d!==null)var se=!0;else{var re=n(l);re!==null&&j(x,re.startTime-V),se=!1}return se}finally{d=null,h=M,f=!1}}var E=!1,I=null,C=-1,S=5,N=-1;function R(){return!(t.unstable_now()-N<S)}function D(){if(I!==null){var L=t.unstable_now();N=L;var V=!0;try{V=I(!0,L)}finally{V?W():(E=!1,I=null)}}else E=!1}var W;if(typeof w=="function")W=function(){w(D)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,G=F.port2;F.port1.onmessage=D,W=function(){G.postMessage(null)}}else W=function(){y(D,0)};function K(L){I=L,E||(E=!0,W())}function j(L,V){C=y(function(){L(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(L){L.callback=null},t.unstable_continueExecution=function(){m||f||(m=!0,K(_))},t.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<L?Math.floor(1e3/L):5},t.unstable_getCurrentPriorityLevel=function(){return h},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(L){switch(h){case 1:case 2:case 3:var V=3;break;default:V=h}var M=h;h=V;try{return L()}finally{h=M}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(L,V){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var M=h;h=L;try{return V()}finally{h=M}},t.unstable_scheduleCallback=function(L,V,M){var Y=t.unstable_now();switch(typeof M=="object"&&M!==null?(M=M.delay,M=typeof M=="number"&&0<M?Y+M:Y):M=Y,L){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=M+X,L={id:c++,callback:V,priorityLevel:L,startTime:M,expirationTime:X,sortIndex:-1},M>Y?(L.sortIndex=M,e(l,L),n(u)===null&&L===n(l)&&(v?(g(C),C=-1):v=!0,j(x,M-Y))):(L.sortIndex=X,e(u,L),m||f||(m=!0,K(_))),L},t.unstable_shouldYield=R,t.unstable_wrapCallback=function(L){var V=h;return function(){var M=h;h=V;try{return L.apply(this,arguments)}finally{h=M}}}})(sP);oP.exports=sP;var ez=oP.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aP=Q,Dr=ez;function ee(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uP=new Set,fh={};function Au(t,e){Yl(t,e),Yl(t+"Capture",e)}function Yl(t,e){for(fh[t]=e,t=0;t<e.length;t++)uP.add(e[t])}var ko=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xb=Object.prototype.hasOwnProperty,tz=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Wk={},qk={};function nz(t){return xb.call(qk,t)?!0:xb.call(Wk,t)?!1:tz.test(t)?qk[t]=!0:(Wk[t]=!0,!1)}function rz(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function iz(t,e,n,r){if(e===null||typeof e>"u"||rz(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function rr(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var kn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){kn[t]=new rr(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];kn[e]=new rr(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){kn[t]=new rr(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){kn[t]=new rr(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){kn[t]=new rr(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){kn[t]=new rr(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){kn[t]=new rr(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){kn[t]=new rr(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){kn[t]=new rr(t,5,!1,t.toLowerCase(),null,!1,!1)});var a1=/[\-:]([a-z])/g;function u1(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(a1,u1);kn[e]=new rr(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(a1,u1);kn[e]=new rr(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(a1,u1);kn[e]=new rr(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){kn[t]=new rr(t,1,!1,t.toLowerCase(),null,!1,!1)});kn.xlinkHref=new rr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){kn[t]=new rr(t,1,!1,t.toLowerCase(),null,!0,!0)});function l1(t,e,n,r){var i=kn.hasOwnProperty(e)?kn[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(iz(e,n,i,r)&&(n=null),r||i===null?nz(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Fo=aP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,_p=Symbol.for("react.element"),gl=Symbol.for("react.portal"),vl=Symbol.for("react.fragment"),c1=Symbol.for("react.strict_mode"),_b=Symbol.for("react.profiler"),lP=Symbol.for("react.provider"),cP=Symbol.for("react.context"),d1=Symbol.for("react.forward_ref"),Eb=Symbol.for("react.suspense"),Ib=Symbol.for("react.suspense_list"),h1=Symbol.for("react.memo"),as=Symbol.for("react.lazy"),dP=Symbol.for("react.offscreen"),Hk=Symbol.iterator;function od(t){return t===null||typeof t!="object"?null:(t=Hk&&t[Hk]||t["@@iterator"],typeof t=="function"?t:null)}var It=Object.assign,j0;function Ad(t){if(j0===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);j0=e&&e[1]||""}return"\n"+j0+t}var U0=!1;function z0(t,e){if(!t||U0)return"";U0=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(l){var r=l}Reflect.construct(t,[],e)}else{try{e.call()}catch(l){r=l}t.call(e.prototype)}else{try{throw Error()}catch(l){r=l}t()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split("\n"),o=r.stack.split("\n"),s=i.length-1,a=o.length-1;1<=s&&0<=a&&i[s]!==o[a];)a--;for(;1<=s&&0<=a;s--,a--)if(i[s]!==o[a]){if(s!==1||a!==1)do if(s--,a--,0>a||i[s]!==o[a]){var u="\n"+i[s].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=s&&0<=a);break}}}finally{U0=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Ad(t):""}function oz(t){switch(t.tag){case 5:return Ad(t.type);case 16:return Ad("Lazy");case 13:return Ad("Suspense");case 19:return Ad("SuspenseList");case 0:case 2:case 15:return t=z0(t.type,!1),t;case 11:return t=z0(t.type.render,!1),t;case 1:return t=z0(t.type,!0),t;default:return""}}function Tb(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case vl:return"Fragment";case gl:return"Portal";case _b:return"Profiler";case c1:return"StrictMode";case Eb:return"Suspense";case Ib:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case cP:return(t.displayName||"Context")+".Consumer";case lP:return(t._context.displayName||"Context")+".Provider";case d1:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case h1:return e=t.displayName||null,e!==null?e:Tb(t.type)||"Memo";case as:e=t._payload,t=t._init;try{return Tb(t(e))}catch(n){}}return null}function sz(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Tb(e);case 8:return e===c1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ls(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function hP(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function az(t){var e=hP(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Ep(t){t._valueTracker||(t._valueTracker=az(t))}function fP(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=hP(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ym(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch(e){return t.body}}function Cb(t,e){var n=e.checked;return It({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n!=null?n:t._wrapperState.initialChecked})}function Gk(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ls(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function pP(t,e){e=e.checked,e!=null&&l1(t,"checked",e,!1)}function kb(t,e){pP(t,e);var n=Ls(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Sb(t,e.type,n):e.hasOwnProperty("defaultValue")&&Sb(t,e.type,Ls(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Kk(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Sb(t,e,n){(e!=="number"||Ym(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Rd=Array.isArray;function Rl(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ls(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Ab(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ee(91));return It({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Yk(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(ee(92));if(Rd(n)){if(1<n.length)throw Error(ee(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ls(n)}}function mP(t,e){var n=Ls(e.value),r=Ls(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Xk(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function gP(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Rb(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?gP(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Ip,vP=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Ip=Ip||document.createElement("div"),Ip.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Ip.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ph(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},uz=["Webkit","ms","Moz","O"];Object.keys(Wd).forEach(function(t){uz.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wd[e]=Wd[t]})});function yP(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wd.hasOwnProperty(t)&&Wd[t]?(""+e).trim():e+"px"}function wP(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=yP(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var lz=It({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nb(t,e){if(e){if(lz[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ee(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ee(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ee(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ee(62))}}function Pb(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Db=null;function f1(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ob=null,Nl=null,Pl=null;function Qk(t){if(t=kf(t)){if(typeof Ob!="function")throw Error(ee(280));var e=t.stateNode;e&&(e=Iv(e),Ob(t.stateNode,t.type,e))}}function bP(t){Nl?Pl?Pl.push(t):Pl=[t]:Nl=t}function xP(){if(Nl){var t=Nl,e=Pl;if(Pl=Nl=null,Qk(t),e)for(t=0;t<e.length;t++)Qk(e[t])}}function _P(t,e){return t(e)}function EP(){}var W0=!1;function IP(t,e,n){if(W0)return t(e,n);W0=!0;try{return _P(t,e,n)}finally{W0=!1,(Nl!==null||Pl!==null)&&(EP(),xP())}}function mh(t,e){var n=t.stateNode;if(n===null)return null;var r=Iv(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(ee(231,e,typeof n));return n}var Lb=!1;if(ko)try{var sd={};Object.defineProperty(sd,"passive",{get:function(){Lb=!0}}),window.addEventListener("test",sd,sd),window.removeEventListener("test",sd,sd)}catch(t){Lb=!1}function cz(t,e,n,r,i,o,s,a,u){var l=Array.prototype.slice.call(arguments,3);try{e.apply(n,l)}catch(c){this.onError(c)}}var qd=!1,Xm=null,Qm=!1,Mb=null,dz={onError:function(t){qd=!0,Xm=t}};function hz(t,e,n,r,i,o,s,a,u){qd=!1,Xm=null,cz.apply(dz,arguments)}function fz(t,e,n,r,i,o,s,a,u){if(hz.apply(this,arguments),qd){if(qd){var l=Xm;qd=!1,Xm=null}else throw Error(ee(198));Qm||(Qm=!0,Mb=l)}}function Ru(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function TP(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Jk(t){if(Ru(t)!==t)throw Error(ee(188))}function pz(t){var e=t.alternate;if(!e){if(e=Ru(t),e===null)throw Error(ee(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Jk(i),t;if(o===r)return Jk(i),e;o=o.sibling}throw Error(ee(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,a=i.child;a;){if(a===n){s=!0,n=i,r=o;break}if(a===r){s=!0,r=i,n=o;break}a=a.sibling}if(!s){for(a=o.child;a;){if(a===n){s=!0,n=o,r=i;break}if(a===r){s=!0,r=o,n=i;break}a=a.sibling}if(!s)throw Error(ee(189))}}if(n.alternate!==r)throw Error(ee(190))}if(n.tag!==3)throw Error(ee(188));return n.stateNode.current===n?t:e}function CP(t){return t=pz(t),t!==null?kP(t):null}function kP(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=kP(t);if(e!==null)return e;t=t.sibling}return null}var SP=Dr.unstable_scheduleCallback,Zk=Dr.unstable_cancelCallback,mz=Dr.unstable_shouldYield,gz=Dr.unstable_requestPaint,Ft=Dr.unstable_now,vz=Dr.unstable_getCurrentPriorityLevel,p1=Dr.unstable_ImmediatePriority,AP=Dr.unstable_UserBlockingPriority,Jm=Dr.unstable_NormalPriority,yz=Dr.unstable_LowPriority,RP=Dr.unstable_IdlePriority,bv=null,Yi=null;function wz(t){if(Yi&&typeof Yi.onCommitFiberRoot=="function")try{Yi.onCommitFiberRoot(bv,t,void 0,(t.current.flags&128)===128)}catch(e){}}var yi=Math.clz32?Math.clz32:_z,bz=Math.log,xz=Math.LN2;function _z(t){return t>>>=0,t===0?32:31-(bz(t)/xz|0)|0}var Tp=64,Cp=4194304;function Nd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zm(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var a=s&~i;a!==0?r=Nd(a):(o&=s,o!==0&&(r=Nd(o)))}else s=n&~i,s!==0?r=Nd(s):o!==0&&(r=Nd(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-yi(e),i=1<<n,r|=t[n],e&=~i;return r}function Ez(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Iz(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-yi(o),a=1<<s,u=i[s];u===-1?(!(a&n)||a&r)&&(i[s]=Ez(a,e)):u<=e&&(t.expiredLanes|=a),o&=~a}}function Vb(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function NP(){var t=Tp;return Tp<<=1,!(Tp&4194240)&&(Tp=64),t}function q0(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Tf(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-yi(e),t[e]=n}function Tz(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-yi(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function m1(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-yi(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var qe=0;function PP(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var DP,g1,OP,LP,MP,Fb=!1,kp=[],Is=null,Ts=null,Cs=null,gh=new Map,vh=new Map,ds=[],Cz="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function eS(t,e){switch(t){case"focusin":case"focusout":Is=null;break;case"dragenter":case"dragleave":Ts=null;break;case"mouseover":case"mouseout":Cs=null;break;case"pointerover":case"pointerout":gh.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vh.delete(e.pointerId)}}function ad(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=kf(e),e!==null&&g1(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function kz(t,e,n,r,i){switch(e){case"focusin":return Is=ad(Is,t,e,n,r,i),!0;case"dragenter":return Ts=ad(Ts,t,e,n,r,i),!0;case"mouseover":return Cs=ad(Cs,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return gh.set(o,ad(gh.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,vh.set(o,ad(vh.get(o)||null,t,e,n,r,i)),!0}return!1}function VP(t){var e=Pa(t.target);if(e!==null){var n=Ru(e);if(n!==null){if(e=n.tag,e===13){if(e=TP(n),e!==null){t.blockedOn=e,MP(t.priority,function(){OP(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gm(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$b(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Db=r,n.target.dispatchEvent(r),Db=null}else return e=kf(n),e!==null&&g1(e),t.blockedOn=n,!1;e.shift()}return!0}function tS(t,e,n){gm(t)&&n.delete(e)}function Sz(){Fb=!1,Is!==null&&gm(Is)&&(Is=null),Ts!==null&&gm(Ts)&&(Ts=null),Cs!==null&&gm(Cs)&&(Cs=null),gh.forEach(tS),vh.forEach(tS)}function ud(t,e){t.blockedOn===e&&(t.blockedOn=null,Fb||(Fb=!0,Dr.unstable_scheduleCallback(Dr.unstable_NormalPriority,Sz)))}function yh(t){function e(i){return ud(i,t)}if(0<kp.length){ud(kp[0],t);for(var n=1;n<kp.length;n++){var r=kp[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Is!==null&&ud(Is,t),Ts!==null&&ud(Ts,t),Cs!==null&&ud(Cs,t),gh.forEach(e),vh.forEach(e),n=0;n<ds.length;n++)r=ds[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ds.length&&(n=ds[0],n.blockedOn===null);)VP(n),n.blockedOn===null&&ds.shift()}var Dl=Fo.ReactCurrentBatchConfig,eg=!0;function Az(t,e,n,r){var i=qe,o=Dl.transition;Dl.transition=null;try{qe=1,v1(t,e,n,r)}finally{qe=i,Dl.transition=o}}function Rz(t,e,n,r){var i=qe,o=Dl.transition;Dl.transition=null;try{qe=4,v1(t,e,n,r)}finally{qe=i,Dl.transition=o}}function v1(t,e,n,r){if(eg){var i=$b(t,e,n,r);if(i===null)tw(t,e,r,tg,n),eS(t,r);else if(kz(i,t,e,n,r))r.stopPropagation();else if(eS(t,r),e&4&&-1<Cz.indexOf(t)){for(;i!==null;){var o=kf(i);if(o!==null&&DP(o),o=$b(t,e,n,r),o===null&&tw(t,e,r,tg,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else tw(t,e,r,null,n)}}var tg=null;function $b(t,e,n,r){if(tg=null,t=f1(r),t=Pa(t),t!==null)if(e=Ru(t),e===null)t=null;else if(n=e.tag,n===13){if(t=TP(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return tg=t,null}function FP(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(vz()){case p1:return 1;case AP:return 4;case Jm:case yz:return 16;case RP:return 536870912;default:return 16}default:return 16}}var vs=null,y1=null,vm=null;function $P(){if(vm)return vm;var t,e=y1,n=e.length,r,i="value"in vs?vs.value:vs.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return vm=i.slice(t,1<r?1-r:void 0)}function ym(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sp(){return!0}function nS(){return!1}function $r(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(o):o[a]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Sp:nS,this.isPropagationStopped=nS,this}return It(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sp)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sp)},persist:function(){},isPersistent:Sp}),e}var Sc={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},w1=$r(Sc),Cf=It({},Sc,{view:0,detail:0}),Nz=$r(Cf),H0,G0,ld,xv=It({},Cf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:b1,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ld&&(ld&&t.type==="mousemove"?(H0=t.screenX-ld.screenX,G0=t.screenY-ld.screenY):G0=H0=0,ld=t),H0)},movementY:function(t){return"movementY"in t?t.movementY:G0}}),rS=$r(xv),Pz=It({},xv,{dataTransfer:0}),Dz=$r(Pz),Oz=It({},Cf,{relatedTarget:0}),K0=$r(Oz),Lz=It({},Sc,{animationName:0,elapsedTime:0,pseudoElement:0}),Mz=$r(Lz),Vz=It({},Sc,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fz=$r(Vz),$z=It({},Sc,{data:0}),iS=$r($z),Bz={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jz={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Uz={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function zz(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Uz[t])?!!e[t]:!1}function b1(){return zz}var Wz=It({},Cf,{key:function(t){if(t.key){var e=Bz[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ym(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?jz[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:b1,charCode:function(t){return t.type==="keypress"?ym(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ym(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),qz=$r(Wz),Hz=It({},xv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),oS=$r(Hz),Gz=It({},Cf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:b1}),Kz=$r(Gz),Yz=It({},Sc,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xz=$r(Yz),Qz=It({},xv,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Jz=$r(Qz),Zz=[9,13,27,32],x1=ko&&"CompositionEvent"in window,Hd=null;ko&&"documentMode"in document&&(Hd=document.documentMode);var e6=ko&&"TextEvent"in window&&!Hd,BP=ko&&(!x1||Hd&&8<Hd&&11>=Hd),sS=" ",aS=!1;function jP(t,e){switch(t){case"keyup":return Zz.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function UP(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yl=!1;function t6(t,e){switch(t){case"compositionend":return UP(e);case"keypress":return e.which!==32?null:(aS=!0,sS);case"textInput":return t=e.data,t===sS&&aS?null:t;default:return null}}function n6(t,e){if(yl)return t==="compositionend"||!x1&&jP(t,e)?(t=$P(),vm=y1=vs=null,yl=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return BP&&e.locale!=="ko"?null:e.data;default:return null}}var r6={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function uS(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!r6[t.type]:e==="textarea"}function zP(t,e,n,r){bP(r),e=ng(e,"onChange"),0<e.length&&(n=new w1("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Gd=null,wh=null;function i6(t){eD(t,0)}function _v(t){var e=xl(t);if(fP(e))return t}function o6(t,e){if(t==="change")return e}var WP=!1;if(ko){var Y0;if(ko){var X0="oninput"in document;if(!X0){var lS=document.createElement("div");lS.setAttribute("oninput","return;"),X0=typeof lS.oninput=="function"}Y0=X0}else Y0=!1;WP=Y0&&(!document.documentMode||9<document.documentMode)}function cS(){Gd&&(Gd.detachEvent("onpropertychange",qP),wh=Gd=null)}function qP(t){if(t.propertyName==="value"&&_v(wh)){var e=[];zP(e,wh,t,f1(t)),IP(i6,e)}}function s6(t,e,n){t==="focusin"?(cS(),Gd=e,wh=n,Gd.attachEvent("onpropertychange",qP)):t==="focusout"&&cS()}function a6(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return _v(wh)}function u6(t,e){if(t==="click")return _v(e)}function l6(t,e){if(t==="input"||t==="change")return _v(e)}function c6(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xi=typeof Object.is=="function"?Object.is:c6;function bh(t,e){if(xi(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xb.call(e,i)||!xi(t[i],e[i]))return!1}return!0}function dS(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function hS(t,e){var n=dS(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=dS(n)}}function HP(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?HP(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function GP(){for(var t=window,e=Ym();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch(r){n=!1}if(n)t=e.contentWindow;else break;e=Ym(t.document)}return e}function _1(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function d6(t){var e=GP(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&HP(n.ownerDocument.documentElement,n)){if(r!==null&&_1(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=hS(n,o);var s=hS(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var h6=ko&&"documentMode"in document&&11>=document.documentMode,wl=null,Bb=null,Kd=null,jb=!1;function fS(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jb||wl==null||wl!==Ym(r)||(r=wl,"selectionStart"in r&&_1(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Kd&&bh(Kd,r)||(Kd=r,r=ng(Bb,"onSelect"),0<r.length&&(e=new w1("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=wl)))}function Ap(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var bl={animationend:Ap("Animation","AnimationEnd"),animationiteration:Ap("Animation","AnimationIteration"),animationstart:Ap("Animation","AnimationStart"),transitionend:Ap("Transition","TransitionEnd")},Q0={},KP={};ko&&(KP=document.createElement("div").style,"AnimationEvent"in window||(delete bl.animationend.animation,delete bl.animationiteration.animation,delete bl.animationstart.animation),"TransitionEvent"in window||delete bl.transitionend.transition);function Ev(t){if(Q0[t])return Q0[t];if(!bl[t])return t;var e=bl[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in KP)return Q0[t]=e[n];return t}var YP=Ev("animationend"),XP=Ev("animationiteration"),QP=Ev("animationstart"),JP=Ev("transitionend"),ZP=new Map,pS="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Xs(t,e){ZP.set(t,e),Au(e,[t])}for(var J0=0;J0<pS.length;J0++){var Z0=pS[J0],f6=Z0.toLowerCase(),p6=Z0[0].toUpperCase()+Z0.slice(1);Xs(f6,"on"+p6)}Xs(YP,"onAnimationEnd");Xs(XP,"onAnimationIteration");Xs(QP,"onAnimationStart");Xs("dblclick","onDoubleClick");Xs("focusin","onFocus");Xs("focusout","onBlur");Xs(JP,"onTransitionEnd");Yl("onMouseEnter",["mouseout","mouseover"]);Yl("onMouseLeave",["mouseout","mouseover"]);Yl("onPointerEnter",["pointerout","pointerover"]);Yl("onPointerLeave",["pointerout","pointerover"]);Au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Au("onBeforeInput",["compositionend","keypress","textInput","paste"]);Au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Pd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m6=new Set("cancel close invalid load scroll toggle".split(" ").concat(Pd));function mS(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,fz(r,e,void 0,t),t.currentTarget=null}function eD(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==o&&i.isPropagationStopped())break e;mS(i,a,l),o=u}else for(s=0;s<r.length;s++){if(a=r[s],u=a.instance,l=a.currentTarget,a=a.listener,u!==o&&i.isPropagationStopped())break e;mS(i,a,l),o=u}}}if(Qm)throw t=Mb,Qm=!1,Mb=null,t}function st(t,e){var n=e[Hb];n===void 0&&(n=e[Hb]=new Set);var r=t+"__bubble";n.has(r)||(tD(e,t,2,!1),n.add(r))}function ew(t,e,n){var r=0;e&&(r|=4),tD(n,t,r,e)}var Rp="_reactListening"+Math.random().toString(36).slice(2);function xh(t){if(!t[Rp]){t[Rp]=!0,uP.forEach(function(n){n!=="selectionchange"&&(m6.has(n)||ew(n,!1,t),ew(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Rp]||(e[Rp]=!0,ew("selectionchange",!1,e))}}function tD(t,e,n,r){switch(FP(e)){case 1:var i=Az;break;case 4:i=Rz;break;default:i=v1}n=i.bind(null,e,n,t),i=void 0,!Lb||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function tw(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var u=s.tag;if((u===3||u===4)&&(u=s.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;s=s.return}for(;a!==null;){if(s=Pa(a),s===null)return;if(u=s.tag,u===5||u===6){r=o=s;continue e}a=a.parentNode}}r=r.return}IP(function(){var l=o,c=f1(n),d=[];e:{var h=ZP.get(t);if(h!==void 0){var f=w1,m=t;switch(t){case"keypress":if(ym(n)===0)break e;case"keydown":case"keyup":f=qz;break;case"focusin":m="focus",f=K0;break;case"focusout":m="blur",f=K0;break;case"beforeblur":case"afterblur":f=K0;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=rS;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=Dz;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Kz;break;case YP:case XP:case QP:f=Mz;break;case JP:f=Xz;break;case"scroll":f=Nz;break;case"wheel":f=Jz;break;case"copy":case"cut":case"paste":f=Fz;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=oS}var v=(e&4)!==0,y=!v&&t==="scroll",g=v?h!==null?h+"Capture":null:h;v=[];for(var w=l,b;w!==null;){b=w;var x=b.stateNode;if(b.tag===5&&x!==null&&(b=x,g!==null&&(x=mh(w,g),x!=null&&v.push(_h(w,x,b)))),y)break;w=w.return}0<v.length&&(h=new f(h,m,null,n,c),d.push({event:h,listeners:v}))}}if(!(e&7)){e:{if(h=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",h&&n!==Db&&(m=n.relatedTarget||n.fromElement)&&(Pa(m)||m[So]))break e;if((f||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,f?(m=n.relatedTarget||n.toElement,f=l,m=m?Pa(m):null,m!==null&&(y=Ru(m),m!==y||m.tag!==5&&m.tag!==6)&&(m=null)):(f=null,m=l),f!==m)){if(v=rS,x="onMouseLeave",g="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(v=oS,x="onPointerLeave",g="onPointerEnter",w="pointer"),y=f==null?h:xl(f),b=m==null?h:xl(m),h=new v(x,w+"leave",f,n,c),h.target=y,h.relatedTarget=b,x=null,Pa(c)===l&&(v=new v(g,w+"enter",m,n,c),v.target=b,v.relatedTarget=y,x=v),y=x,f&&m)t:{for(v=f,g=m,w=0,b=v;b;b=Ku(b))w++;for(b=0,x=g;x;x=Ku(x))b++;for(;0<w-b;)v=Ku(v),w--;for(;0<b-w;)g=Ku(g),b--;for(;w--;){if(v===g||g!==null&&v===g.alternate)break t;v=Ku(v),g=Ku(g)}v=null}else v=null;f!==null&&gS(d,h,f,v,!1),m!==null&&y!==null&&gS(d,y,m,v,!0)}}e:{if(h=l?xl(l):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var _=o6;else if(uS(h))if(WP)_=l6;else{_=a6;var E=s6}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(_=u6);if(_&&(_=_(t,l))){zP(d,_,n,c);break e}E&&E(t,h,l),t==="focusout"&&(E=h._wrapperState)&&E.controlled&&h.type==="number"&&Sb(h,"number",h.value)}switch(E=l?xl(l):window,t){case"focusin":(uS(E)||E.contentEditable==="true")&&(wl=E,Bb=l,Kd=null);break;case"focusout":Kd=Bb=wl=null;break;case"mousedown":jb=!0;break;case"contextmenu":case"mouseup":case"dragend":jb=!1,fS(d,n,c);break;case"selectionchange":if(h6)break;case"keydown":case"keyup":fS(d,n,c)}var I;if(x1)e:{switch(t){case"compositionstart":var C="onCompositionStart";break e;case"compositionend":C="onCompositionEnd";break e;case"compositionupdate":C="onCompositionUpdate";break e}C=void 0}else yl?jP(t,n)&&(C="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(C="onCompositionStart");C&&(BP&&n.locale!=="ko"&&(yl||C!=="onCompositionStart"?C==="onCompositionEnd"&&yl&&(I=$P()):(vs=c,y1="value"in vs?vs.value:vs.textContent,yl=!0)),E=ng(l,C),0<E.length&&(C=new iS(C,t,null,n,c),d.push({event:C,listeners:E}),I?C.data=I:(I=UP(n),I!==null&&(C.data=I)))),(I=e6?t6(t,n):n6(t,n))&&(l=ng(l,"onBeforeInput"),0<l.length&&(c=new iS("onBeforeInput","beforeinput",null,n,c),d.push({event:c,listeners:l}),c.data=I))}eD(d,e)})}function _h(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ng(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=mh(t,n),o!=null&&r.unshift(_h(t,o,i)),o=mh(t,e),o!=null&&r.push(_h(t,o,i))),t=t.return}return r}function Ku(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function gS(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=mh(n,o),u!=null&&s.unshift(_h(n,u,a))):i||(u=mh(n,o),u!=null&&s.push(_h(n,u,a)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var g6=/\r\n?/g,v6=/\u0000|\uFFFD/g;function vS(t){return(typeof t=="string"?t:""+t).replace(g6,"\n").replace(v6,"")}function Np(t,e,n){if(e=vS(e),vS(t)!==e&&n)throw Error(ee(425))}function rg(){}var Ub=null,zb=null;function Wb(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var qb=typeof setTimeout=="function"?setTimeout:void 0,y6=typeof clearTimeout=="function"?clearTimeout:void 0,yS=typeof Promise=="function"?Promise:void 0,w6=typeof queueMicrotask=="function"?queueMicrotask:typeof yS<"u"?function(t){return yS.resolve(null).then(t).catch(b6)}:qb;function b6(t){setTimeout(function(){throw t})}function nw(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),yh(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);yh(e)}function ks(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function wS(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ac=Math.random().toString(36).slice(2),Li="__reactFiber$"+Ac,Eh="__reactProps$"+Ac,So="__reactContainer$"+Ac,Hb="__reactEvents$"+Ac,x6="__reactListeners$"+Ac,_6="__reactHandles$"+Ac;function Pa(t){var e=t[Li];if(e)return e;for(var n=t.parentNode;n;){if(e=n[So]||n[Li]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=wS(t);t!==null;){if(n=t[Li])return n;t=wS(t)}return e}t=n,n=t.parentNode}return null}function kf(t){return t=t[Li]||t[So],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function xl(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(ee(33))}function Iv(t){return t[Eh]||null}var Gb=[],_l=-1;function Qs(t){return{current:t}}function lt(t){0>_l||(t.current=Gb[_l],Gb[_l]=null,_l--)}function rt(t,e){_l++,Gb[_l]=t.current,t.current=e}var Ms={},$n=Qs(Ms),wr=Qs(!1),nu=Ms;function Xl(t,e){var n=t.type.contextTypes;if(!n)return Ms;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function br(t){return t=t.childContextTypes,t!=null}function ig(){lt(wr),lt($n)}function bS(t,e,n){if($n.current!==Ms)throw Error(ee(168));rt($n,e),rt(wr,n)}function nD(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(ee(108,sz(t)||"Unknown",i));return It({},n,r)}function og(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ms,nu=$n.current,rt($n,t),rt(wr,wr.current),!0}function xS(t,e,n){var r=t.stateNode;if(!r)throw Error(ee(169));n?(t=nD(t,e,nu),r.__reactInternalMemoizedMergedChildContext=t,lt(wr),lt($n),rt($n,t)):lt(wr),rt(wr,n)}var ho=null,Tv=!1,rw=!1;function rD(t){ho===null?ho=[t]:ho.push(t)}function E6(t){Tv=!0,rD(t)}function Js(){if(!rw&&ho!==null){rw=!0;var t=0,e=qe;try{var n=ho;for(qe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}ho=null,Tv=!1}catch(i){throw ho!==null&&(ho=ho.slice(t+1)),SP(p1,Js),i}finally{qe=e,rw=!1}}return null}var El=[],Il=0,sg=null,ag=0,Gr=[],Kr=0,ru=null,vo=1,yo="";function xa(t,e){El[Il++]=ag,El[Il++]=sg,sg=t,ag=e}function iD(t,e,n){Gr[Kr++]=vo,Gr[Kr++]=yo,Gr[Kr++]=ru,ru=t;var r=vo;t=yo;var i=32-yi(r)-1;r&=~(1<<i),n+=1;var o=32-yi(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,vo=1<<32-yi(e)+i|n<<i|r,yo=o+t}else vo=1<<o|n<<i|r,yo=t}function E1(t){t.return!==null&&(xa(t,1),iD(t,1,0))}function I1(t){for(;t===sg;)sg=El[--Il],El[Il]=null,ag=El[--Il],El[Il]=null;for(;t===ru;)ru=Gr[--Kr],Gr[Kr]=null,yo=Gr[--Kr],Gr[Kr]=null,vo=Gr[--Kr],Gr[Kr]=null}var Pr=null,Ar=null,pt=!1,pi=null;function oD(t,e){var n=Qr(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function _S(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Pr=t,Ar=ks(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Pr=t,Ar=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ru!==null?{id:vo,overflow:yo}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Qr(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Pr=t,Ar=null,!0):!1;default:return!1}}function Kb(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yb(t){if(pt){var e=Ar;if(e){var n=e;if(!_S(t,e)){if(Kb(t))throw Error(ee(418));e=ks(n.nextSibling);var r=Pr;e&&_S(t,e)?oD(r,n):(t.flags=t.flags&-4097|2,pt=!1,Pr=t)}}else{if(Kb(t))throw Error(ee(418));t.flags=t.flags&-4097|2,pt=!1,Pr=t}}}function ES(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Pr=t}function Pp(t){if(t!==Pr)return!1;if(!pt)return ES(t),pt=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wb(t.type,t.memoizedProps)),e&&(e=Ar)){if(Kb(t))throw sD(),Error(ee(418));for(;e;)oD(t,e),e=ks(e.nextSibling)}if(ES(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(ee(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ar=ks(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ar=null}}else Ar=Pr?ks(t.stateNode.nextSibling):null;return!0}function sD(){for(var t=Ar;t;)t=ks(t.nextSibling)}function Ql(){Ar=Pr=null,pt=!1}function T1(t){pi===null?pi=[t]:pi.push(t)}var I6=Fo.ReactCurrentBatchConfig;function hi(t,e){if(t&&t.defaultProps){e=It({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var ug=Qs(null),lg=null,Tl=null,C1=null;function k1(){C1=Tl=lg=null}function S1(t){var e=ug.current;lt(ug),t._currentValue=e}function Xb(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ol(t,e){lg=t,C1=Tl=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mr=!0),t.firstContext=null)}function ri(t){var e=t._currentValue;if(C1!==t)if(t={context:t,memoizedValue:e,next:null},Tl===null){if(lg===null)throw Error(ee(308));Tl=t,lg.dependencies={lanes:0,firstContext:t}}else Tl=Tl.next=t;return e}var Da=null;function A1(t){Da===null?Da=[t]:Da.push(t)}function aD(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,A1(e)):(n.next=i.next,i.next=n),e.interleaved=n,Ao(t,r)}function Ao(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var us=!1;function R1(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uD(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Eo(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ss(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Be&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Ao(t,n)}return i=r.interleaved,i===null?(e.next=e,A1(r)):(e.next=i.next,i.next=e),r.interleaved=e,Ao(t,n)}function wm(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,m1(t,n)}}function IS(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cg(t,e,n,r){var i=t.updateQueue;us=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,s===null?o=l:s.next=l,s=u;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==s&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(o!==null){var d=i.baseState;s=0,c=l=u=null,a=o;do{var h=a.lane,f=a.eventTime;if((r&h)===h){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var m=t,v=a;switch(h=e,f=n,v.tag){case 1:if(m=v.payload,typeof m=="function"){d=m.call(f,d,h);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=v.payload,h=typeof m=="function"?m.call(f,d,h):m,h==null)break e;d=It({},d,h);break e;case 2:us=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,h=i.effects,h===null?i.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=f,u=d):c=c.next=f,s|=h;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;h=a,a=h.next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}while(!0);if(c===null&&(u=d),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);ou|=s,t.lanes=s,t.memoizedState=d}}function TS(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(ee(191,i));i.call(r)}}}var lD=new aP.Component().refs;function Qb(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:It({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Cv={isMounted:function(t){return(t=t._reactInternals)?Ru(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Yn(),i=Rs(t),o=Eo(r,i);o.payload=e,n!=null&&(o.callback=n),e=Ss(t,o,i),e!==null&&(wi(e,t,i,r),wm(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Yn(),i=Rs(t),o=Eo(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=Ss(t,o,i),e!==null&&(wi(e,t,i,r),wm(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Yn(),r=Rs(t),i=Eo(n,r);i.tag=2,e!=null&&(i.callback=e),e=Ss(t,i,r),e!==null&&(wi(e,t,r,n),wm(e,t,r))}};function CS(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!bh(n,r)||!bh(i,o):!0}function cD(t,e,n){var r=!1,i=Ms,o=e.contextType;return typeof o=="object"&&o!==null?o=ri(o):(i=br(e)?nu:$n.current,r=e.contextTypes,o=(r=r!=null)?Xl(t,i):Ms),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Cv,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function kS(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Cv.enqueueReplaceState(e,e.state,null)}function Jb(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=lD,R1(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=ri(o):(o=br(e)?nu:$n.current,i.context=Xl(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Qb(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Cv.enqueueReplaceState(i,i.state,null),cg(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function cd(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(ee(309));var r=n.stateNode}if(!r)throw Error(ee(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var a=i.refs;a===lD&&(a=i.refs={}),s===null?delete a[o]:a[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(ee(284));if(!n._owner)throw Error(ee(290,t))}return t}function Dp(t,e){throw t=Object.prototype.toString.call(e),Error(ee(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function SS(t){var e=t._init;return e(t._payload)}function dD(t){function e(g,w){if(t){var b=g.deletions;b===null?(g.deletions=[w],g.flags|=16):b.push(w)}}function n(g,w){if(!t)return null;for(;w!==null;)e(g,w),w=w.sibling;return null}function r(g,w){for(g=new Map;w!==null;)w.key!==null?g.set(w.key,w):g.set(w.index,w),w=w.sibling;return g}function i(g,w){return g=Ns(g,w),g.index=0,g.sibling=null,g}function o(g,w,b){return g.index=b,t?(b=g.alternate,b!==null?(b=b.index,b<w?(g.flags|=2,w):b):(g.flags|=2,w)):(g.flags|=1048576,w)}function s(g){return t&&g.alternate===null&&(g.flags|=2),g}function a(g,w,b,x){return w===null||w.tag!==6?(w=cw(b,g.mode,x),w.return=g,w):(w=i(w,b),w.return=g,w)}function u(g,w,b,x){var _=b.type;return _===vl?c(g,w,b.props.children,x,b.key):w!==null&&(w.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===as&&SS(_)===w.type)?(x=i(w,b.props),x.ref=cd(g,w,b),x.return=g,x):(x=Tm(b.type,b.key,b.props,null,g.mode,x),x.ref=cd(g,w,b),x.return=g,x)}function l(g,w,b,x){return w===null||w.tag!==4||w.stateNode.containerInfo!==b.containerInfo||w.stateNode.implementation!==b.implementation?(w=dw(b,g.mode,x),w.return=g,w):(w=i(w,b.children||[]),w.return=g,w)}function c(g,w,b,x,_){return w===null||w.tag!==7?(w=Ha(b,g.mode,x,_),w.return=g,w):(w=i(w,b),w.return=g,w)}function d(g,w,b){if(typeof w=="string"&&w!==""||typeof w=="number")return w=cw(""+w,g.mode,b),w.return=g,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case _p:return b=Tm(w.type,w.key,w.props,null,g.mode,b),b.ref=cd(g,null,w),b.return=g,b;case gl:return w=dw(w,g.mode,b),w.return=g,w;case as:var x=w._init;return d(g,x(w._payload),b)}if(Rd(w)||od(w))return w=Ha(w,g.mode,b,null),w.return=g,w;Dp(g,w)}return null}function h(g,w,b,x){var _=w!==null?w.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:a(g,w,""+b,x);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case _p:return b.key===_?u(g,w,b,x):null;case gl:return b.key===_?l(g,w,b,x):null;case as:return _=b._init,h(g,w,_(b._payload),x)}if(Rd(b)||od(b))return _!==null?null:c(g,w,b,x,null);Dp(g,b)}return null}function f(g,w,b,x,_){if(typeof x=="string"&&x!==""||typeof x=="number")return g=g.get(b)||null,a(w,g,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case _p:return g=g.get(x.key===null?b:x.key)||null,u(w,g,x,_);case gl:return g=g.get(x.key===null?b:x.key)||null,l(w,g,x,_);case as:var E=x._init;return f(g,w,b,E(x._payload),_)}if(Rd(x)||od(x))return g=g.get(b)||null,c(w,g,x,_,null);Dp(w,x)}return null}function m(g,w,b,x){for(var _=null,E=null,I=w,C=w=0,S=null;I!==null&&C<b.length;C++){I.index>C?(S=I,I=null):S=I.sibling;var N=h(g,I,b[C],x);if(N===null){I===null&&(I=S);break}t&&I&&N.alternate===null&&e(g,I),w=o(N,w,C),E===null?_=N:E.sibling=N,E=N,I=S}if(C===b.length)return n(g,I),pt&&xa(g,C),_;if(I===null){for(;C<b.length;C++)I=d(g,b[C],x),I!==null&&(w=o(I,w,C),E===null?_=I:E.sibling=I,E=I);return pt&&xa(g,C),_}for(I=r(g,I);C<b.length;C++)S=f(I,g,C,b[C],x),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?C:S.key),w=o(S,w,C),E===null?_=S:E.sibling=S,E=S);return t&&I.forEach(function(R){return e(g,R)}),pt&&xa(g,C),_}function v(g,w,b,x){var _=od(b);if(typeof _!="function")throw Error(ee(150));if(b=_.call(b),b==null)throw Error(ee(151));for(var E=_=null,I=w,C=w=0,S=null,N=b.next();I!==null&&!N.done;C++,N=b.next()){I.index>C?(S=I,I=null):S=I.sibling;var R=h(g,I,N.value,x);if(R===null){I===null&&(I=S);break}t&&I&&R.alternate===null&&e(g,I),w=o(R,w,C),E===null?_=R:E.sibling=R,E=R,I=S}if(N.done)return n(g,I),pt&&xa(g,C),_;if(I===null){for(;!N.done;C++,N=b.next())N=d(g,N.value,x),N!==null&&(w=o(N,w,C),E===null?_=N:E.sibling=N,E=N);return pt&&xa(g,C),_}for(I=r(g,I);!N.done;C++,N=b.next())N=f(I,g,C,N.value,x),N!==null&&(t&&N.alternate!==null&&I.delete(N.key===null?C:N.key),w=o(N,w,C),E===null?_=N:E.sibling=N,E=N);return t&&I.forEach(function(D){return e(g,D)}),pt&&xa(g,C),_}function y(g,w,b,x){if(typeof b=="object"&&b!==null&&b.type===vl&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case _p:e:{for(var _=b.key,E=w;E!==null;){if(E.key===_){if(_=b.type,_===vl){if(E.tag===7){n(g,E.sibling),w=i(E,b.props.children),w.return=g,g=w;break e}}else if(E.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===as&&SS(_)===E.type){n(g,E.sibling),w=i(E,b.props),w.ref=cd(g,E,b),w.return=g,g=w;break e}n(g,E);break}else e(g,E);E=E.sibling}b.type===vl?(w=Ha(b.props.children,g.mode,x,b.key),w.return=g,g=w):(x=Tm(b.type,b.key,b.props,null,g.mode,x),x.ref=cd(g,w,b),x.return=g,g=x)}return s(g);case gl:e:{for(E=b.key;w!==null;){if(w.key===E)if(w.tag===4&&w.stateNode.containerInfo===b.containerInfo&&w.stateNode.implementation===b.implementation){n(g,w.sibling),w=i(w,b.children||[]),w.return=g,g=w;break e}else{n(g,w);break}else e(g,w);w=w.sibling}w=dw(b,g.mode,x),w.return=g,g=w}return s(g);case as:return E=b._init,y(g,w,E(b._payload),x)}if(Rd(b))return m(g,w,b,x);if(od(b))return v(g,w,b,x);Dp(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,w!==null&&w.tag===6?(n(g,w.sibling),w=i(w,b),w.return=g,g=w):(n(g,w),w=cw(b,g.mode,x),w.return=g,g=w),s(g)):n(g,w)}return y}var Jl=dD(!0),hD=dD(!1),Sf={},Xi=Qs(Sf),Ih=Qs(Sf),Th=Qs(Sf);function Oa(t){if(t===Sf)throw Error(ee(174));return t}function N1(t,e){switch(rt(Th,e),rt(Ih,t),rt(Xi,Sf),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Rb(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Rb(e,t)}lt(Xi),rt(Xi,e)}function Zl(){lt(Xi),lt(Ih),lt(Th)}function fD(t){Oa(Th.current);var e=Oa(Xi.current),n=Rb(e,t.type);e!==n&&(rt(Ih,t),rt(Xi,n))}function P1(t){Ih.current===t&&(lt(Xi),lt(Ih))}var bt=Qs(0);function dg(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var iw=[];function D1(){for(var t=0;t<iw.length;t++)iw[t]._workInProgressVersionPrimary=null;iw.length=0}var bm=Fo.ReactCurrentDispatcher,ow=Fo.ReactCurrentBatchConfig,iu=0,xt=null,Yt=null,tn=null,hg=!1,Yd=!1,Ch=0,T6=0;function Rn(){throw Error(ee(321))}function O1(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xi(t[n],e[n]))return!1;return!0}function L1(t,e,n,r,i,o){if(iu=o,xt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,bm.current=t===null||t.memoizedState===null?A6:R6,t=n(r,i),Yd){o=0;do{if(Yd=!1,Ch=0,25<=o)throw Error(ee(301));o+=1,tn=Yt=null,e.updateQueue=null,bm.current=N6,t=n(r,i)}while(Yd)}if(bm.current=fg,e=Yt!==null&&Yt.next!==null,iu=0,tn=Yt=xt=null,hg=!1,e)throw Error(ee(300));return t}function M1(){var t=Ch!==0;return Ch=0,t}function Ni(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tn===null?xt.memoizedState=tn=t:tn=tn.next=t,tn}function ii(){if(Yt===null){var t=xt.alternate;t=t!==null?t.memoizedState:null}else t=Yt.next;var e=tn===null?xt.memoizedState:tn.next;if(e!==null)tn=e,Yt=t;else{if(t===null)throw Error(ee(310));Yt=t,t={memoizedState:Yt.memoizedState,baseState:Yt.baseState,baseQueue:Yt.baseQueue,queue:Yt.queue,next:null},tn===null?xt.memoizedState=tn=t:tn=tn.next=t}return tn}function kh(t,e){return typeof e=="function"?e(t):e}function sw(t){var e=ii(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=Yt,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var a=s=null,u=null,l=o;do{var c=l.lane;if((iu&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:t(r,l.action);else{var d={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=d,s=r):u=u.next=d,xt.lanes|=c,ou|=c}l=l.next}while(l!==null&&l!==o);u===null?s=r:u.next=a,xi(r,e.memoizedState)||(mr=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,xt.lanes|=o,ou|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function aw(t){var e=ii(),n=e.queue;if(n===null)throw Error(ee(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);xi(o,e.memoizedState)||(mr=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function pD(){}function mD(t,e){var n=xt,r=ii(),i=e(),o=!xi(r.memoizedState,i);if(o&&(r.memoizedState=i,mr=!0),r=r.queue,V1(yD.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||tn!==null&&tn.memoizedState.tag&1){if(n.flags|=2048,Sh(9,vD.bind(null,n,r,i,e),void 0,null),rn===null)throw Error(ee(349));iu&30||gD(n,e,i)}return i}function gD(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function vD(t,e,n,r){e.value=n,e.getSnapshot=r,wD(e)&&bD(t)}function yD(t,e,n){return n(function(){wD(e)&&bD(t)})}function wD(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xi(t,n)}catch(r){return!0}}function bD(t){var e=Ao(t,1);e!==null&&wi(e,t,1,-1)}function AS(t){var e=Ni();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kh,lastRenderedState:t},e.queue=t,t=t.dispatch=S6.bind(null,xt,t),[e.memoizedState,t]}function Sh(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=xt.updateQueue,e===null?(e={lastEffect:null,stores:null},xt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function xD(){return ii().memoizedState}function xm(t,e,n,r){var i=Ni();xt.flags|=t,i.memoizedState=Sh(1|e,n,void 0,r===void 0?null:r)}function kv(t,e,n,r){var i=ii();r=r===void 0?null:r;var o=void 0;if(Yt!==null){var s=Yt.memoizedState;if(o=s.destroy,r!==null&&O1(r,s.deps)){i.memoizedState=Sh(e,n,o,r);return}}xt.flags|=t,i.memoizedState=Sh(1|e,n,o,r)}function RS(t,e){return xm(8390656,8,t,e)}function V1(t,e){return kv(2048,8,t,e)}function _D(t,e){return kv(4,2,t,e)}function ED(t,e){return kv(4,4,t,e)}function ID(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function TD(t,e,n){return n=n!=null?n.concat([t]):null,kv(4,4,ID.bind(null,e,t),n)}function F1(){}function CD(t,e){var n=ii();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&O1(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function kD(t,e){var n=ii();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&O1(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function SD(t,e,n){return iu&21?(xi(n,e)||(n=NP(),xt.lanes|=n,ou|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mr=!0),t.memoizedState=n)}function C6(t,e){var n=qe;qe=n!==0&&4>n?n:4,t(!0);var r=ow.transition;ow.transition={};try{t(!1),e()}finally{qe=n,ow.transition=r}}function AD(){return ii().memoizedState}function k6(t,e,n){var r=Rs(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},RD(t))ND(e,n);else if(n=aD(t,e,n,r),n!==null){var i=Yn();wi(n,t,r,i),PD(n,e,r)}}function S6(t,e,n){var r=Rs(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(RD(t))ND(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,a=o(s,n);if(i.hasEagerState=!0,i.eagerState=a,xi(a,s)){var u=e.interleaved;u===null?(i.next=i,A1(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch(l){}finally{}n=aD(t,e,i,r),n!==null&&(i=Yn(),wi(n,t,r,i),PD(n,e,r))}}function RD(t){var e=t.alternate;return t===xt||e!==null&&e===xt}function ND(t,e){Yd=hg=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function PD(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,m1(t,n)}}var fg={readContext:ri,useCallback:Rn,useContext:Rn,useEffect:Rn,useImperativeHandle:Rn,useInsertionEffect:Rn,useLayoutEffect:Rn,useMemo:Rn,useReducer:Rn,useRef:Rn,useState:Rn,useDebugValue:Rn,useDeferredValue:Rn,useTransition:Rn,useMutableSource:Rn,useSyncExternalStore:Rn,useId:Rn,unstable_isNewReconciler:!1},A6={readContext:ri,useCallback:function(t,e){return Ni().memoizedState=[t,e===void 0?null:e],t},useContext:ri,useEffect:RS,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xm(4194308,4,ID.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xm(4194308,4,t,e)},useInsertionEffect:function(t,e){return xm(4,2,t,e)},useMemo:function(t,e){var n=Ni();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Ni();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=k6.bind(null,xt,t),[r.memoizedState,t]},useRef:function(t){var e=Ni();return t={current:t},e.memoizedState=t},useState:AS,useDebugValue:F1,useDeferredValue:function(t){return Ni().memoizedState=t},useTransition:function(){var t=AS(!1),e=t[0];return t=C6.bind(null,t[1]),Ni().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=xt,i=Ni();if(pt){if(n===void 0)throw Error(ee(407));n=n()}else{if(n=e(),rn===null)throw Error(ee(349));iu&30||gD(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,RS(yD.bind(null,r,o,t),[t]),r.flags|=2048,Sh(9,vD.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=Ni(),e=rn.identifierPrefix;if(pt){var n=yo,r=vo;n=(r&~(1<<32-yi(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ch++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=T6++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},R6={readContext:ri,useCallback:CD,useContext:ri,useEffect:V1,useImperativeHandle:TD,useInsertionEffect:_D,useLayoutEffect:ED,useMemo:kD,useReducer:sw,useRef:xD,useState:function(){return sw(kh)},useDebugValue:F1,useDeferredValue:function(t){var e=ii();return SD(e,Yt.memoizedState,t)},useTransition:function(){var t=sw(kh)[0],e=ii().memoizedState;return[t,e]},useMutableSource:pD,useSyncExternalStore:mD,useId:AD,unstable_isNewReconciler:!1},N6={readContext:ri,useCallback:CD,useContext:ri,useEffect:V1,useImperativeHandle:TD,useInsertionEffect:_D,useLayoutEffect:ED,useMemo:kD,useReducer:aw,useRef:xD,useState:function(){return aw(kh)},useDebugValue:F1,useDeferredValue:function(t){var e=ii();return Yt===null?e.memoizedState=t:SD(e,Yt.memoizedState,t)},useTransition:function(){var t=aw(kh)[0],e=ii().memoizedState;return[t,e]},useMutableSource:pD,useSyncExternalStore:mD,useId:AD,unstable_isNewReconciler:!1};function ec(t,e){try{var n="",r=e;do n+=oz(r),r=r.return;while(r);var i=n}catch(o){i="\nError generating stack: "+o.message+"\n"+o.stack}return{value:t,source:e,stack:i,digest:null}}function uw(t,e,n){return{value:t,source:null,stack:n!=null?n:null,digest:e!=null?e:null}}function Zb(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var P6=typeof WeakMap=="function"?WeakMap:Map;function DD(t,e,n){n=Eo(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){mg||(mg=!0,lx=r),Zb(t,e)},n}function OD(t,e,n){n=Eo(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Zb(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Zb(t,e),typeof r!="function"&&(As===null?As=new Set([this]):As.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function NS(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new P6;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=H6.bind(null,t,e,n),e.then(t,t))}function PS(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function DS(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Eo(-1,1),e.tag=2,Ss(n,e,1))),n.lanes|=1),t)}var D6=Fo.ReactCurrentOwner,mr=!1;function Un(t,e,n,r){e.child=t===null?hD(e,null,n,r):Jl(e,t.child,n,r)}function OS(t,e,n,r,i){n=n.render;var o=e.ref;return Ol(e,i),r=L1(t,e,n,r,o,i),n=M1(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ro(t,e,i)):(pt&&n&&E1(e),e.flags|=1,Un(t,e,r,i),e.child)}function LS(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!H1(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,LD(t,e,o,r,i)):(t=Tm(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:bh,n(s,r)&&t.ref===e.ref)return Ro(t,e,i)}return e.flags|=1,t=Ns(o,r),t.ref=e.ref,t.return=e,e.child=t}function LD(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(bh(o,r)&&t.ref===e.ref)if(mr=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(mr=!0);else return e.lanes=t.lanes,Ro(t,e,i)}return ex(t,e,n,r,i)}function MD(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},rt(kl,Tr),Tr|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,rt(kl,Tr),Tr|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,rt(kl,Tr),Tr|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,rt(kl,Tr),Tr|=r;return Un(t,e,i,n),e.child}function VD(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ex(t,e,n,r,i){var o=br(n)?nu:$n.current;return o=Xl(e,o),Ol(e,i),n=L1(t,e,n,r,o,i),r=M1(),t!==null&&!mr?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ro(t,e,i)):(pt&&r&&E1(e),e.flags|=1,Un(t,e,n,i),e.child)}function MS(t,e,n,r,i){if(br(n)){var o=!0;og(e)}else o=!1;if(Ol(e,i),e.stateNode===null)_m(t,e),cD(e,n,r),Jb(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var u=s.context,l=n.contextType;typeof l=="object"&&l!==null?l=ri(l):(l=br(n)?nu:$n.current,l=Xl(e,l));var c=n.getDerivedStateFromProps,d=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||u!==l)&&kS(e,s,r,l),us=!1;var h=e.memoizedState;s.state=h,cg(e,r,s,i),u=e.memoizedState,a!==r||h!==u||wr.current||us?(typeof c=="function"&&(Qb(e,n,c,r),u=e.memoizedState),(a=us||CS(e,n,a,r,h,u,l))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),s.props=r,s.state=u,s.context=l,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,uD(t,e),a=e.memoizedProps,l=e.type===e.elementType?a:hi(e.type,a),s.props=l,d=e.pendingProps,h=s.context,u=n.contextType,typeof u=="object"&&u!==null?u=ri(u):(u=br(n)?nu:$n.current,u=Xl(e,u));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==u)&&kS(e,s,r,u),us=!1,h=e.memoizedState,s.state=h,cg(e,r,s,i);var m=e.memoizedState;a!==d||h!==m||wr.current||us?(typeof f=="function"&&(Qb(e,n,f,r),m=e.memoizedState),(l=us||CS(e,n,l,r,h,m,u)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,m,u),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,m,u)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),s.props=r,s.state=m,s.context=u,r=l):(typeof s.componentDidUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&h===t.memoizedState||(e.flags|=1024),r=!1)}return tx(t,e,n,r,o,i)}function tx(t,e,n,r,i,o){VD(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&xS(e,n,!1),Ro(t,e,o);r=e.stateNode,D6.current=e;var a=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=Jl(e,t.child,null,o),e.child=Jl(e,null,a,o)):Un(t,e,a,o),e.memoizedState=r.state,i&&xS(e,n,!0),e.child}function FD(t){var e=t.stateNode;e.pendingContext?bS(t,e.pendingContext,e.pendingContext!==e.context):e.context&&bS(t,e.context,!1),N1(t,e.containerInfo)}function VS(t,e,n,r,i){return Ql(),T1(i),e.flags|=256,Un(t,e,n,r),e.child}var nx={dehydrated:null,treeContext:null,retryLane:0};function rx(t){return{baseLanes:t,cachePool:null,transitions:null}}function $D(t,e,n){var r=e.pendingProps,i=bt.current,o=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),rt(bt,i&1),t===null)return Yb(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=Rv(s,r,0,null),t=Ha(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=rx(n),e.memoizedState=nx,t):$1(e,s));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return O6(t,e,s,r,a,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ns(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?o=Ns(a,o):(o=Ha(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?rx(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=nx,r}return o=t.child,t=o.sibling,r=Ns(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function $1(t,e){return e=Rv({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Op(t,e,n,r){return r!==null&&T1(r),Jl(e,t.child,null,n),t=$1(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function O6(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=uw(Error(ee(422))),Op(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=Rv({mode:"visible",children:r.children},i,0,null),o=Ha(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&Jl(e,t.child,null,s),e.child.memoizedState=rx(s),e.memoizedState=nx,o);if(!(e.mode&1))return Op(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,o=Error(ee(419)),r=uw(o,r,void 0),Op(t,e,s,r)}if(a=(s&t.childLanes)!==0,mr||a){if(r=rn,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Ao(t,i),wi(r,t,i,-1))}return q1(),r=uw(Error(ee(421))),Op(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=G6.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Ar=ks(i.nextSibling),Pr=e,pt=!0,pi=null,t!==null&&(Gr[Kr++]=vo,Gr[Kr++]=yo,Gr[Kr++]=ru,vo=t.id,yo=t.overflow,ru=e),e=$1(e,r.children),e.flags|=4096,e)}function FS(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Xb(t.return,e,n)}function lw(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function BD(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(Un(t,e,r.children,n),r=bt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&FS(t,n,e);else if(t.tag===19)FS(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(rt(bt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&dg(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),lw(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&dg(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}lw(e,!0,n,null,o);break;case"together":lw(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _m(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ro(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),ou|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(ee(153));if(e.child!==null){for(t=e.child,n=Ns(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ns(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function L6(t,e,n){switch(e.tag){case 3:FD(e),Ql();break;case 5:fD(e);break;case 1:br(e.type)&&og(e);break;case 4:N1(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;rt(ug,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(rt(bt,bt.current&1),e.flags|=128,null):n&e.child.childLanes?$D(t,e,n):(rt(bt,bt.current&1),t=Ro(t,e,n),t!==null?t.sibling:null);rt(bt,bt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return BD(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),rt(bt,bt.current),r)break;return null;case 22:case 23:return e.lanes=0,MD(t,e,n)}return Ro(t,e,n)}var jD,ix,UD,zD;jD=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ix=function(){};UD=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Oa(Xi.current);var o=null;switch(n){case"input":i=Cb(t,i),r=Cb(t,r),o=[];break;case"select":i=It({},i,{value:void 0}),r=It({},r,{value:void 0}),o=[];break;case"textarea":i=Ab(t,i),r=Ab(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=rg)}Nb(n,r);var s;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(s in a)a.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(fh.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(s in a)!a.hasOwnProperty(s)||u&&u.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in u)u.hasOwnProperty(s)&&a[s]!==u[s]&&(n||(n={}),n[s]=u[s])}else n||(o||(o=[]),o.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(o=o||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(o=o||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(fh.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&st("scroll",t),o||a===u||(o=[])):(o=o||[]).push(l,u))}n&&(o=o||[]).push("style",n);var l=o;(e.updateQueue=l)&&(e.flags|=4)}};zD=function(t,e,n,r){n!==r&&(e.flags|=4)};function dd(t,e){if(!pt)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Nn(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function M6(t,e,n){var r=e.pendingProps;switch(I1(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nn(e),null;case 1:return br(e.type)&&ig(),Nn(e),null;case 3:return r=e.stateNode,Zl(),lt(wr),lt($n),D1(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Pp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pi!==null&&(hx(pi),pi=null))),ix(t,e),Nn(e),null;case 5:P1(e);var i=Oa(Th.current);if(n=e.type,t!==null&&e.stateNode!=null)UD(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(ee(166));return Nn(e),null}if(t=Oa(Xi.current),Pp(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[Li]=e,r[Eh]=o,t=(e.mode&1)!==0,n){case"dialog":st("cancel",r),st("close",r);break;case"iframe":case"object":case"embed":st("load",r);break;case"video":case"audio":for(i=0;i<Pd.length;i++)st(Pd[i],r);break;case"source":st("error",r);break;case"img":case"image":case"link":st("error",r),st("load",r);break;case"details":st("toggle",r);break;case"input":Gk(r,o),st("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},st("invalid",r);break;case"textarea":Yk(r,o),st("invalid",r)}Nb(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var a=o[s];s==="children"?typeof a=="string"?r.textContent!==a&&(o.suppressHydrationWarning!==!0&&Np(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(o.suppressHydrationWarning!==!0&&Np(r.textContent,a,t),i=["children",""+a]):fh.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&st("scroll",r)}switch(n){case"input":Ep(r),Kk(r,o,!0);break;case"textarea":Ep(r),Xk(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=rg)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=gP(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[Li]=e,t[Eh]=r,jD(t,e,!1,!1),e.stateNode=t;e:{switch(s=Pb(n,r),n){case"dialog":st("cancel",t),st("close",t),i=r;break;case"iframe":case"object":case"embed":st("load",t),i=r;break;case"video":case"audio":for(i=0;i<Pd.length;i++)st(Pd[i],t);i=r;break;case"source":st("error",t),i=r;break;case"img":case"image":case"link":st("error",t),st("load",t),i=r;break;case"details":st("toggle",t),i=r;break;case"input":Gk(t,r),i=Cb(t,r),st("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=It({},r,{value:void 0}),st("invalid",t);break;case"textarea":Yk(t,r),i=Ab(t,r),st("invalid",t);break;default:i=r}Nb(n,i),a=i;for(o in a)if(a.hasOwnProperty(o)){var u=a[o];o==="style"?wP(t,u):o==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&vP(t,u)):o==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&ph(t,u):typeof u=="number"&&ph(t,""+u):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(fh.hasOwnProperty(o)?u!=null&&o==="onScroll"&&st("scroll",t):u!=null&&l1(t,o,u,s))}switch(n){case"input":Ep(t),Kk(t,r,!1);break;case"textarea":Ep(t),Xk(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ls(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Rl(t,!!r.multiple,o,!1):r.defaultValue!=null&&Rl(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=rg)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nn(e),null;case 6:if(t&&e.stateNode!=null)zD(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(ee(166));if(n=Oa(Th.current),Oa(Xi.current),Pp(e)){if(r=e.stateNode,n=e.memoizedProps,r[Li]=e,(o=r.nodeValue!==n)&&(t=Pr,t!==null))switch(t.tag){case 3:Np(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Np(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Li]=e,e.stateNode=r}return Nn(e),null;case 13:if(lt(bt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(pt&&Ar!==null&&e.mode&1&&!(e.flags&128))sD(),Ql(),e.flags|=98560,o=!1;else if(o=Pp(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(ee(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(ee(317));o[Li]=e}else Ql(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nn(e),o=!1}else pi!==null&&(hx(pi),pi=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||bt.current&1?Qt===0&&(Qt=3):q1())),e.updateQueue!==null&&(e.flags|=4),Nn(e),null);case 4:return Zl(),ix(t,e),t===null&&xh(e.stateNode.containerInfo),Nn(e),null;case 10:return S1(e.type._context),Nn(e),null;case 17:return br(e.type)&&ig(),Nn(e),null;case 19:if(lt(bt),o=e.memoizedState,o===null)return Nn(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)dd(o,!1);else{if(Qt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=dg(t),s!==null){for(e.flags|=128,dd(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return rt(bt,bt.current&1|2),e.child}t=t.sibling}o.tail!==null&&Ft()>tc&&(e.flags|=128,r=!0,dd(o,!1),e.lanes=4194304)}else{if(!r)if(t=dg(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),dd(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!pt)return Nn(e),null}else 2*Ft()-o.renderingStartTime>tc&&n!==1073741824&&(e.flags|=128,r=!0,dd(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=Ft(),e.sibling=null,n=bt.current,rt(bt,r?n&1|2:n&1),e):(Nn(e),null);case 22:case 23:return W1(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tr&1073741824&&(Nn(e),e.subtreeFlags&6&&(e.flags|=8192)):Nn(e),null;case 24:return null;case 25:return null}throw Error(ee(156,e.tag))}function V6(t,e){switch(I1(e),e.tag){case 1:return br(e.type)&&ig(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Zl(),lt(wr),lt($n),D1(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return P1(e),null;case 13:if(lt(bt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(ee(340));Ql()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return lt(bt),null;case 4:return Zl(),null;case 10:return S1(e.type._context),null;case 22:case 23:return W1(),null;case 24:return null;default:return null}}var Lp=!1,Dn=!1,F6=typeof WeakSet=="function"?WeakSet:Set,he=null;function Cl(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){kt(t,e,r)}else n.current=null}function ox(t,e,n){try{n()}catch(r){kt(t,e,r)}}var $S=!1;function $6(t,e){if(Ub=eg,t=GP(),_1(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(x){n=null;break e}var s=0,a=-1,u=-1,l=0,c=0,d=t,h=null;t:for(;;){for(var f;d!==n||i!==0&&d.nodeType!==3||(a=s+i),d!==o||r!==0&&d.nodeType!==3||(u=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===t)break t;if(h===n&&++l===i&&(a=s),h===o&&++c===r&&(u=s),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(zb={focusedElem:t,selectionRange:n},eg=!1,he=e;he!==null;)if(e=he,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,he=t;else for(;he!==null;){e=he;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var v=m.memoizedProps,y=m.memoizedState,g=e.stateNode,w=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:hi(e.type,v),y);g.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ee(163))}}catch(x){kt(e,e.return,x)}if(t=e.sibling,t!==null){t.return=e.return,he=t;break}he=e.return}return m=$S,$S=!1,m}function Xd(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&ox(e,n,o)}i=i.next}while(i!==r)}}function Sv(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function sx(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WD(t){var e=t.alternate;e!==null&&(t.alternate=null,WD(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Li],delete e[Eh],delete e[Hb],delete e[x6],delete e[_6])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function qD(t){return t.tag===5||t.tag===3||t.tag===4}function BS(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||qD(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ax(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=rg));else if(r!==4&&(t=t.child,t!==null))for(ax(t,e,n),t=t.sibling;t!==null;)ax(t,e,n),t=t.sibling}function ux(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ux(t,e,n),t=t.sibling;t!==null;)ux(t,e,n),t=t.sibling}var vn=null,fi=!1;function ts(t,e,n){for(n=n.child;n!==null;)HD(t,e,n),n=n.sibling}function HD(t,e,n){if(Yi&&typeof Yi.onCommitFiberUnmount=="function")try{Yi.onCommitFiberUnmount(bv,n)}catch(a){}switch(n.tag){case 5:Dn||Cl(n,e);case 6:var r=vn,i=fi;vn=null,ts(t,e,n),vn=r,fi=i,vn!==null&&(fi?(t=vn,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):vn.removeChild(n.stateNode));break;case 18:vn!==null&&(fi?(t=vn,n=n.stateNode,t.nodeType===8?nw(t.parentNode,n):t.nodeType===1&&nw(t,n),yh(t)):nw(vn,n.stateNode));break;case 4:r=vn,i=fi,vn=n.stateNode.containerInfo,fi=!0,ts(t,e,n),vn=r,fi=i;break;case 0:case 11:case 14:case 15:if(!Dn&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&ox(n,e,s),i=i.next}while(i!==r)}ts(t,e,n);break;case 1:if(!Dn&&(Cl(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){kt(n,e,a)}ts(t,e,n);break;case 21:ts(t,e,n);break;case 22:n.mode&1?(Dn=(r=Dn)||n.memoizedState!==null,ts(t,e,n),Dn=r):ts(t,e,n);break;default:ts(t,e,n)}}function jS(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new F6),e.forEach(function(r){var i=K6.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ci(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:vn=a.stateNode,fi=!1;break e;case 3:vn=a.stateNode.containerInfo,fi=!0;break e;case 4:vn=a.stateNode.containerInfo,fi=!0;break e}a=a.return}if(vn===null)throw Error(ee(160));HD(o,s,i),vn=null,fi=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){kt(i,e,l)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)GD(e,t),e=e.sibling}function GD(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ci(e,t),Ri(t),r&4){try{Xd(3,t,t.return),Sv(3,t)}catch(v){kt(t,t.return,v)}try{Xd(5,t,t.return)}catch(v){kt(t,t.return,v)}}break;case 1:ci(e,t),Ri(t),r&512&&n!==null&&Cl(n,n.return);break;case 5:if(ci(e,t),Ri(t),r&512&&n!==null&&Cl(n,n.return),t.flags&32){var i=t.stateNode;try{ph(i,"")}catch(v){kt(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&o.type==="radio"&&o.name!=null&&pP(i,o),Pb(a,s);var l=Pb(a,o);for(s=0;s<u.length;s+=2){var c=u[s],d=u[s+1];c==="style"?wP(i,d):c==="dangerouslySetInnerHTML"?vP(i,d):c==="children"?ph(i,d):l1(i,c,d,l)}switch(a){case"input":kb(i,o);break;case"textarea":mP(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var f=o.value;f!=null?Rl(i,!!o.multiple,f,!1):h!==!!o.multiple&&(o.defaultValue!=null?Rl(i,!!o.multiple,o.defaultValue,!0):Rl(i,!!o.multiple,o.multiple?[]:"",!1))}i[Eh]=o}catch(v){kt(t,t.return,v)}}break;case 6:if(ci(e,t),Ri(t),r&4){if(t.stateNode===null)throw Error(ee(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(v){kt(t,t.return,v)}}break;case 3:if(ci(e,t),Ri(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{yh(e.containerInfo)}catch(v){kt(t,t.return,v)}break;case 4:ci(e,t),Ri(t);break;case 13:ci(e,t),Ri(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(U1=Ft())),r&4&&jS(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(Dn=(l=Dn)||c,ci(e,t),Dn=l):ci(e,t),Ri(t),r&8192){if(l=t.memoizedState!==null,(t.stateNode.isHidden=l)&&!c&&t.mode&1)for(he=t,c=t.child;c!==null;){for(d=he=c;he!==null;){switch(h=he,f=h.child,h.tag){case 0:case 11:case 14:case 15:Xd(4,h,h.return);break;case 1:Cl(h,h.return);var m=h.stateNode;if(typeof m.componentWillUnmount=="function"){r=h,n=h.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(v){kt(r,n,v)}}break;case 5:Cl(h,h.return);break;case 22:if(h.memoizedState!==null){zS(d);continue}}f!==null?(f.return=h,he=f):zS(d)}c=c.sibling}e:for(c=null,d=t;;){if(d.tag===5){if(c===null){c=d;try{i=d.stateNode,l?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(a=d.stateNode,u=d.memoizedProps.style,s=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=yP("display",s))}catch(v){kt(t,t.return,v)}}}else if(d.tag===6){if(c===null)try{d.stateNode.nodeValue=l?"":d.memoizedProps}catch(v){kt(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ci(e,t),Ri(t),r&4&&jS(t);break;case 21:break;default:ci(e,t),Ri(t)}}function Ri(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(qD(n)){var r=n;break e}n=n.return}throw Error(ee(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ph(i,""),r.flags&=-33);var o=BS(t);ux(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,a=BS(t);ax(t,a,s);break;default:throw Error(ee(161))}}catch(u){kt(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function B6(t,e,n){he=t,KD(t)}function KD(t,e,n){for(var r=(t.mode&1)!==0;he!==null;){var i=he,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||Lp;if(!s){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Dn;a=Lp;var l=Dn;if(Lp=s,(Dn=u)&&!l)for(he=i;he!==null;)s=he,u=s.child,s.tag===22&&s.memoizedState!==null?WS(i):u!==null?(u.return=s,he=u):WS(i);for(;o!==null;)he=o,KD(o),o=o.sibling;he=i,Lp=a,Dn=l}US(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,he=o):US(t)}}function US(t){for(;he!==null;){var e=he;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Dn||Sv(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Dn)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:hi(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&TS(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}TS(e,s,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var l=e.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var d=c.dehydrated;d!==null&&yh(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ee(163))}Dn||e.flags&512&&sx(e)}catch(h){kt(e,e.return,h)}}if(e===t){he=null;break}if(n=e.sibling,n!==null){n.return=e.return,he=n;break}he=e.return}}function zS(t){for(;he!==null;){var e=he;if(e===t){he=null;break}var n=e.sibling;if(n!==null){n.return=e.return,he=n;break}he=e.return}}function WS(t){for(;he!==null;){var e=he;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Sv(4,e)}catch(u){kt(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){kt(e,i,u)}}var o=e.return;try{sx(e)}catch(u){kt(e,o,u)}break;case 5:var s=e.return;try{sx(e)}catch(u){kt(e,s,u)}}}catch(u){kt(e,e.return,u)}if(e===t){he=null;break}var a=e.sibling;if(a!==null){a.return=e.return,he=a;break}he=e.return}}var j6=Math.ceil,pg=Fo.ReactCurrentDispatcher,B1=Fo.ReactCurrentOwner,ti=Fo.ReactCurrentBatchConfig,Be=0,rn=null,Wt=null,In=0,Tr=0,kl=Qs(0),Qt=0,Ah=null,ou=0,Av=0,j1=0,Qd=null,hr=null,U1=0,tc=1/0,co=null,mg=!1,lx=null,As=null,Mp=!1,ys=null,gg=0,Jd=0,cx=null,Em=-1,Im=0;function Yn(){return Be&6?Ft():Em!==-1?Em:Em=Ft()}function Rs(t){return t.mode&1?Be&2&&In!==0?In&-In:I6.transition!==null?(Im===0&&(Im=NP()),Im):(t=qe,t!==0||(t=window.event,t=t===void 0?16:FP(t.type)),t):1}function wi(t,e,n,r){if(50<Jd)throw Jd=0,cx=null,Error(ee(185));Tf(t,n,r),(!(Be&2)||t!==rn)&&(t===rn&&(!(Be&2)&&(Av|=n),Qt===4&&hs(t,In)),xr(t,r),n===1&&Be===0&&!(e.mode&1)&&(tc=Ft()+500,Tv&&Js()))}function xr(t,e){var n=t.callbackNode;Iz(t,e);var r=Zm(t,t===rn?In:0);if(r===0)n!==null&&Zk(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Zk(n),e===1)t.tag===0?E6(qS.bind(null,t)):rD(qS.bind(null,t)),w6(function(){!(Be&6)&&Js()}),n=null;else{switch(PP(r)){case 1:n=p1;break;case 4:n=AP;break;case 16:n=Jm;break;case 536870912:n=RP;break;default:n=Jm}n=nO(n,YD.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YD(t,e){if(Em=-1,Im=0,Be&6)throw Error(ee(327));var n=t.callbackNode;if(Ll()&&t.callbackNode!==n)return null;var r=Zm(t,t===rn?In:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vg(t,r);else{e=r;var i=Be;Be|=2;var o=QD();(rn!==t||In!==e)&&(co=null,tc=Ft()+500,qa(t,e));do try{W6();break}catch(a){XD(t,a)}while(!0);k1(),pg.current=o,Be=i,Wt!==null?e=0:(rn=null,In=0,e=Qt)}if(e!==0){if(e===2&&(i=Vb(t),i!==0&&(r=i,e=dx(t,i))),e===1)throw n=Ah,qa(t,0),hs(t,r),xr(t,Ft()),n;if(e===6)hs(t,r);else{if(i=t.current.alternate,!(r&30)&&!U6(i)&&(e=vg(t,r),e===2&&(o=Vb(t),o!==0&&(r=o,e=dx(t,o))),e===1))throw n=Ah,qa(t,0),hs(t,r),xr(t,Ft()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(ee(345));case 2:_a(t,hr,co);break;case 3:if(hs(t,r),(r&130023424)===r&&(e=U1+500-Ft(),10<e)){if(Zm(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Yn(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=qb(_a.bind(null,t,hr,co),e);break}_a(t,hr,co);break;case 4:if(hs(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-yi(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=Ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*j6(r/1960))-r,10<r){t.timeoutHandle=qb(_a.bind(null,t,hr,co),r);break}_a(t,hr,co);break;case 5:_a(t,hr,co);break;default:throw Error(ee(329))}}}return xr(t,Ft()),t.callbackNode===n?YD.bind(null,t):null}function dx(t,e){var n=Qd;return t.current.memoizedState.isDehydrated&&(qa(t,e).flags|=256),t=vg(t,e),t!==2&&(e=hr,hr=n,e!==null&&hx(e)),t}function hx(t){hr===null?hr=t:hr.push.apply(hr,t)}function U6(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!xi(o(),i))return!1}catch(s){return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hs(t,e){for(e&=~j1,e&=~Av,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-yi(e),r=1<<n;t[n]=-1,e&=~r}}function qS(t){if(Be&6)throw Error(ee(327));Ll();var e=Zm(t,0);if(!(e&1))return xr(t,Ft()),null;var n=vg(t,e);if(t.tag!==0&&n===2){var r=Vb(t);r!==0&&(e=r,n=dx(t,r))}if(n===1)throw n=Ah,qa(t,0),hs(t,e),xr(t,Ft()),n;if(n===6)throw Error(ee(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_a(t,hr,co),xr(t,Ft()),null}function z1(t,e){var n=Be;Be|=1;try{return t(e)}finally{Be=n,Be===0&&(tc=Ft()+500,Tv&&Js())}}function su(t){ys!==null&&ys.tag===0&&!(Be&6)&&Ll();var e=Be;Be|=1;var n=ti.transition,r=qe;try{if(ti.transition=null,qe=1,t)return t()}finally{qe=r,ti.transition=n,Be=e,!(Be&6)&&Js()}}function W1(){Tr=kl.current,lt(kl)}function qa(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,y6(n)),Wt!==null)for(n=Wt.return;n!==null;){var r=n;switch(I1(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ig();break;case 3:Zl(),lt(wr),lt($n),D1();break;case 5:P1(r);break;case 4:Zl();break;case 13:lt(bt);break;case 19:lt(bt);break;case 10:S1(r.type._context);break;case 22:case 23:W1()}n=n.return}if(rn=t,Wt=t=Ns(t.current,null),In=Tr=e,Qt=0,Ah=null,j1=Av=ou=0,hr=Qd=null,Da!==null){for(e=0;e<Da.length;e++)if(n=Da[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}Da=null}return t}function XD(t,e){do{var n=Wt;try{if(k1(),bm.current=fg,hg){for(var r=xt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}hg=!1}if(iu=0,tn=Yt=xt=null,Yd=!1,Ch=0,B1.current=null,n===null||n.return===null){Qt=1,Ah=e,Wt=null;break}e:{var o=t,s=n.return,a=n,u=e;if(e=In,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,d=c.tag;if(!(c.mode&1)&&(d===0||d===11||d===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=PS(s);if(f!==null){f.flags&=-257,DS(f,s,a,o,e),f.mode&1&&NS(o,l,e),e=f,u=l;var m=e.updateQueue;if(m===null){var v=new Set;v.add(u),e.updateQueue=v}else m.add(u);break e}else{if(!(e&1)){NS(o,l,e),q1();break e}u=Error(ee(426))}}else if(pt&&a.mode&1){var y=PS(s);if(y!==null){!(y.flags&65536)&&(y.flags|=256),DS(y,s,a,o,e),T1(ec(u,a));break e}}o=u=ec(u,a),Qt!==4&&(Qt=2),Qd===null?Qd=[o]:Qd.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var g=DD(o,u,e);IS(o,g);break e;case 1:a=u;var w=o.type,b=o.stateNode;if(!(o.flags&128)&&(typeof w.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(As===null||!As.has(b)))){o.flags|=65536,e&=-e,o.lanes|=e;var x=OD(o,a,e);IS(o,x);break e}}o=o.return}while(o!==null)}ZD(n)}catch(_){e=_,Wt===n&&n!==null&&(Wt=n=n.return);continue}break}while(!0)}function QD(){var t=pg.current;return pg.current=fg,t===null?fg:t}function q1(){(Qt===0||Qt===3||Qt===2)&&(Qt=4),rn===null||!(ou&268435455)&&!(Av&268435455)||hs(rn,In)}function vg(t,e){var n=Be;Be|=2;var r=QD();(rn!==t||In!==e)&&(co=null,qa(t,e));do try{z6();break}catch(i){XD(t,i)}while(!0);if(k1(),Be=n,pg.current=r,Wt!==null)throw Error(ee(261));return rn=null,In=0,Qt}function z6(){for(;Wt!==null;)JD(Wt)}function W6(){for(;Wt!==null&&!mz();)JD(Wt)}function JD(t){var e=tO(t.alternate,t,Tr);t.memoizedProps=t.pendingProps,e===null?ZD(t):Wt=e,B1.current=null}function ZD(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=V6(n,e),n!==null){n.flags&=32767,Wt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Qt=6,Wt=null;return}}else if(n=M6(n,e,Tr),n!==null){Wt=n;return}if(e=e.sibling,e!==null){Wt=e;return}Wt=e=t}while(e!==null);Qt===0&&(Qt=5)}function _a(t,e,n){var r=qe,i=ti.transition;try{ti.transition=null,qe=1,q6(t,e,n,r)}finally{ti.transition=i,qe=r}return null}function q6(t,e,n,r){do Ll();while(ys!==null);if(Be&6)throw Error(ee(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(ee(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(Tz(t,o),t===rn&&(Wt=rn=null,In=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Mp||(Mp=!0,nO(Jm,function(){return Ll(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=ti.transition,ti.transition=null;var s=qe;qe=1;var a=Be;Be|=4,B1.current=null,$6(t,n),GD(n,t),d6(zb),eg=!!Ub,zb=Ub=null,t.current=n,B6(n),gz(),Be=a,qe=s,ti.transition=o}else t.current=n;if(Mp&&(Mp=!1,ys=t,gg=i),o=t.pendingLanes,o===0&&(As=null),wz(n.stateNode),xr(t,Ft()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(mg)throw mg=!1,t=lx,lx=null,t;return gg&1&&t.tag!==0&&Ll(),o=t.pendingLanes,o&1?t===cx?Jd++:(Jd=0,cx=t):Jd=0,Js(),null}function Ll(){if(ys!==null){var t=PP(gg),e=ti.transition,n=qe;try{if(ti.transition=null,qe=16>t?16:t,ys===null)var r=!1;else{if(t=ys,ys=null,gg=0,Be&6)throw Error(ee(331));var i=Be;for(Be|=4,he=t.current;he!==null;){var o=he,s=o.child;if(he.flags&16){var a=o.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(he=l;he!==null;){var c=he;switch(c.tag){case 0:case 11:case 15:Xd(8,c,o)}var d=c.child;if(d!==null)d.return=c,he=d;else for(;he!==null;){c=he;var h=c.sibling,f=c.return;if(WD(c),c===l){he=null;break}if(h!==null){h.return=f,he=h;break}he=f}}}var m=o.alternate;if(m!==null){var v=m.child;if(v!==null){m.child=null;do{var y=v.sibling;v.sibling=null,v=y}while(v!==null)}}he=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,he=s;else e:for(;he!==null;){if(o=he,o.flags&2048)switch(o.tag){case 0:case 11:case 15:Xd(9,o,o.return)}var g=o.sibling;if(g!==null){g.return=o.return,he=g;break e}he=o.return}}var w=t.current;for(he=w;he!==null;){s=he;var b=s.child;if(s.subtreeFlags&2064&&b!==null)b.return=s,he=b;else e:for(s=w;he!==null;){if(a=he,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Sv(9,a)}}catch(_){kt(a,a.return,_)}if(a===s){he=null;break e}var x=a.sibling;if(x!==null){x.return=a.return,he=x;break e}he=a.return}}if(Be=i,Js(),Yi&&typeof Yi.onPostCommitFiberRoot=="function")try{Yi.onPostCommitFiberRoot(bv,t)}catch(_){}r=!0}return r}finally{qe=n,ti.transition=e}}return!1}function HS(t,e,n){e=ec(n,e),e=DD(t,e,1),t=Ss(t,e,1),e=Yn(),t!==null&&(Tf(t,1,e),xr(t,e))}function kt(t,e,n){if(t.tag===3)HS(t,t,n);else for(;e!==null;){if(e.tag===3){HS(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(As===null||!As.has(r))){t=ec(n,t),t=OD(e,t,1),e=Ss(e,t,1),t=Yn(),e!==null&&(Tf(e,1,t),xr(e,t));break}}e=e.return}}function H6(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Yn(),t.pingedLanes|=t.suspendedLanes&n,rn===t&&(In&n)===n&&(Qt===4||Qt===3&&(In&130023424)===In&&500>Ft()-U1?qa(t,0):j1|=n),xr(t,e)}function eO(t,e){e===0&&(t.mode&1?(e=Cp,Cp<<=1,!(Cp&130023424)&&(Cp=4194304)):e=1);var n=Yn();t=Ao(t,e),t!==null&&(Tf(t,e,n),xr(t,n))}function G6(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),eO(t,n)}function K6(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(ee(314))}r!==null&&r.delete(e),eO(t,n)}var tO;tO=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||wr.current)mr=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mr=!1,L6(t,e,n);mr=!!(t.flags&131072)}else mr=!1,pt&&e.flags&1048576&&iD(e,ag,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_m(t,e),t=e.pendingProps;var i=Xl(e,$n.current);Ol(e,n),i=L1(null,e,r,t,i,n);var o=M1();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,br(r)?(o=!0,og(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,R1(e),i.updater=Cv,e.stateNode=i,i._reactInternals=e,Jb(e,r,t,n),e=tx(null,e,r,!0,o,n)):(e.tag=0,pt&&o&&E1(e),Un(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_m(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=X6(r),t=hi(r,t),i){case 0:e=ex(null,e,r,t,n);break e;case 1:e=MS(null,e,r,t,n);break e;case 11:e=OS(null,e,r,t,n);break e;case 14:e=LS(null,e,r,hi(r.type,t),n);break e}throw Error(ee(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),ex(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),MS(t,e,r,i,n);case 3:e:{if(FD(e),t===null)throw Error(ee(387));r=e.pendingProps,o=e.memoizedState,i=o.element,uD(t,e),cg(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=ec(Error(ee(423)),e),e=VS(t,e,r,n,i);break e}else if(r!==i){i=ec(Error(ee(424)),e),e=VS(t,e,r,n,i);break e}else for(Ar=ks(e.stateNode.containerInfo.firstChild),Pr=e,pt=!0,pi=null,n=hD(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ql(),r===i){e=Ro(t,e,n);break e}Un(t,e,r,n)}e=e.child}return e;case 5:return fD(e),t===null&&Yb(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,Wb(r,i)?s=null:o!==null&&Wb(r,o)&&(e.flags|=32),VD(t,e),Un(t,e,s,n),e.child;case 6:return t===null&&Yb(e),null;case 13:return $D(t,e,n);case 4:return N1(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Jl(e,null,r,n):Un(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),OS(t,e,r,i,n);case 7:return Un(t,e,e.pendingProps,n),e.child;case 8:return Un(t,e,e.pendingProps.children,n),e.child;case 12:return Un(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,rt(ug,r._currentValue),r._currentValue=s,o!==null)if(xi(o.value,s)){if(o.children===i.children&&!wr.current){e=Ro(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){s=o.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(o.tag===1){u=Eo(-1,n&-n),u.tag=2;var l=o.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Xb(o.return,n,e),a.lanes|=n;break}u=u.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(ee(341));s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Xb(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}Un(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ol(e,n),i=ri(i),r=r(i),e.flags|=1,Un(t,e,r,n),e.child;case 14:return r=e.type,i=hi(r,e.pendingProps),i=hi(r.type,i),LS(t,e,r,i,n);case 15:return LD(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:hi(r,i),_m(t,e),e.tag=1,br(r)?(t=!0,og(e)):t=!1,Ol(e,n),cD(e,r,i),Jb(e,r,i,n),tx(null,e,r,!0,t,n);case 19:return BD(t,e,n);case 22:return MD(t,e,n)}throw Error(ee(156,e.tag))};function nO(t,e){return SP(t,e)}function Y6(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qr(t,e,n,r){return new Y6(t,e,n,r)}function H1(t){return t=t.prototype,!(!t||!t.isReactComponent)}function X6(t){if(typeof t=="function")return H1(t)?1:0;if(t!=null){if(t=t.$$typeof,t===d1)return 11;if(t===h1)return 14}return 2}function Ns(t,e){var n=t.alternate;return n===null?(n=Qr(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Tm(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")H1(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case vl:return Ha(n.children,i,o,e);case c1:s=8,i|=8;break;case _b:return t=Qr(12,n,e,i|2),t.elementType=_b,t.lanes=o,t;case Eb:return t=Qr(13,n,e,i),t.elementType=Eb,t.lanes=o,t;case Ib:return t=Qr(19,n,e,i),t.elementType=Ib,t.lanes=o,t;case dP:return Rv(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case lP:s=10;break e;case cP:s=9;break e;case d1:s=11;break e;case h1:s=14;break e;case as:s=16,r=null;break e}throw Error(ee(130,t==null?t:typeof t,""))}return e=Qr(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ha(t,e,n,r){return t=Qr(7,t,r,e),t.lanes=n,t}function Rv(t,e,n,r){return t=Qr(22,t,r,e),t.elementType=dP,t.lanes=n,t.stateNode={isHidden:!1},t}function cw(t,e,n){return t=Qr(6,t,null,e),t.lanes=n,t}function dw(t,e,n){return e=Qr(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Q6(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=q0(0),this.expirationTimes=q0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=q0(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function G1(t,e,n,r,i,o,s,a,u){return t=new Q6(t,e,n,a,u),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Qr(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},R1(o),t}function J6(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gl,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function rO(t){if(!t)return Ms;t=t._reactInternals;e:{if(Ru(t)!==t||t.tag!==1)throw Error(ee(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(br(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ee(171))}if(t.tag===1){var n=t.type;if(br(n))return nD(t,n,e)}return e}function iO(t,e,n,r,i,o,s,a,u){return t=G1(n,r,!0,t,i,o,s,a,u),t.context=rO(null),n=t.current,r=Yn(),i=Rs(n),o=Eo(r,i),o.callback=e!=null?e:null,Ss(n,o,i),t.current.lanes=i,Tf(t,i,r),xr(t,r),t}function Nv(t,e,n,r){var i=e.current,o=Yn(),s=Rs(i);return n=rO(n),e.context===null?e.context=n:e.pendingContext=n,e=Eo(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ss(i,e,s),t!==null&&(wi(t,i,s,o),wm(t,i,s)),s}function yg(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function GS(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function K1(t,e){GS(t,e),(t=t.alternate)&&GS(t,e)}function Z6(){return null}var oO=typeof reportError=="function"?reportError:function(t){console.error(t)};function Y1(t){this._internalRoot=t}Pv.prototype.render=Y1.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(ee(409));Nv(t,e,null,null)};Pv.prototype.unmount=Y1.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;su(function(){Nv(null,t,null,null)}),e[So]=null}};function Pv(t){this._internalRoot=t}Pv.prototype.unstable_scheduleHydration=function(t){if(t){var e=LP();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ds.length&&e!==0&&e<ds[n].priority;n++);ds.splice(n,0,t),n===0&&VP(t)}};function X1(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Dv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function KS(){}function e5(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var l=yg(s);o.call(l)}}var s=iO(e,r,t,0,null,!1,!1,"",KS);return t._reactRootContainer=s,t[So]=s.current,xh(t.nodeType===8?t.parentNode:t),su(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=yg(u);a.call(l)}}var u=G1(t,0,!1,null,null,!1,!1,"",KS);return t._reactRootContainer=u,t[So]=u.current,xh(t.nodeType===8?t.parentNode:t),su(function(){Nv(e,u,n,r)}),u}function Ov(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var a=i;i=function(){var u=yg(s);a.call(u)}}Nv(e,s,t,i)}else s=e5(n,e,t,i,r);return yg(s)}DP=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Nd(e.pendingLanes);n!==0&&(m1(e,n|1),xr(e,Ft()),!(Be&6)&&(tc=Ft()+500,Js()))}break;case 13:su(function(){var r=Ao(t,1);if(r!==null){var i=Yn();wi(r,t,1,i)}}),K1(t,1)}};g1=function(t){if(t.tag===13){var e=Ao(t,134217728);if(e!==null){var n=Yn();wi(e,t,134217728,n)}K1(t,134217728)}};OP=function(t){if(t.tag===13){var e=Rs(t),n=Ao(t,e);if(n!==null){var r=Yn();wi(n,t,e,r)}K1(t,e)}};LP=function(){return qe};MP=function(t,e){var n=qe;try{return qe=t,e()}finally{qe=n}};Ob=function(t,e,n){switch(e){case"input":if(kb(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Iv(r);if(!i)throw Error(ee(90));fP(r),kb(r,i)}}}break;case"textarea":mP(t,n);break;case"select":e=n.value,e!=null&&Rl(t,!!n.multiple,e,!1)}};_P=z1;EP=su;var t5={usingClientEntryPoint:!1,Events:[kf,xl,Iv,bP,xP,z1]},hd={findFiberByHostInstance:Pa,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},n5={bundleType:hd.bundleType,version:hd.version,rendererPackageName:hd.rendererPackageName,rendererConfig:hd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fo.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=CP(t),t===null?null:t.stateNode},findFiberByHostInstance:hd.findFiberByHostInstance||Z6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Vp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Vp.isDisabled&&Vp.supportsFiber)try{bv=Vp.inject(n5),Yi=Vp}catch(t){}}Fr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t5;Fr.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!X1(e))throw Error(ee(200));return J6(t,e,null,n)};Fr.createRoot=function(t,e){if(!X1(t))throw Error(ee(299));var n=!1,r="",i=oO;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=G1(t,1,!1,null,null,n,!1,r,i),t[So]=e.current,xh(t.nodeType===8?t.parentNode:t),new Y1(e)};Fr.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(ee(188)):(t=Object.keys(t).join(","),Error(ee(268,t)));return t=CP(e),t=t===null?null:t.stateNode,t};Fr.flushSync=function(t){return su(t)};Fr.hydrate=function(t,e,n){if(!Dv(e))throw Error(ee(200));return Ov(null,t,e,!0,n)};Fr.hydrateRoot=function(t,e,n){if(!X1(t))throw Error(ee(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=oO;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=iO(e,null,t,1,n!=null?n:null,i,!1,o,s),t[So]=e.current,xh(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Pv(e)};Fr.render=function(t,e,n){if(!Dv(e))throw Error(ee(200));return Ov(null,t,e,!1,n)};Fr.unmountComponentAtNode=function(t){if(!Dv(t))throw Error(ee(40));return t._reactRootContainer?(su(function(){Ov(null,null,t,!1,function(){t._reactRootContainer=null,t[So]=null})}),!0):!1};Fr.unstable_batchedUpdates=z1;Fr.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Dv(n))throw Error(ee(200));if(t==null||t._reactInternals===void 0)throw Error(ee(38));return Ov(t,e,n,!1,r)};Fr.version="18.2.0-next-9e3b772b8-20220608";function sO(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sO)}catch(t){console.error(t)}}sO(),iP.exports=Fr;var Q1=iP.exports;const r5=Ef(Q1);var aO,YS=Q1;aO=YS.createRoot,YS.hydrateRoot;function fx(t,e){return fx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,i){return r.__proto__=i,r},fx(t,e)}function Zi(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,fx(t,e)}var uO={exports:{}},i5="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",o5=i5,s5=o5;function lO(){}function cO(){}cO.resetWarningCache=lO;var a5=function(){function t(r,i,o,s,a,u){if(u!==s5){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:cO,resetWarningCache:lO};return n.PropTypes=n,n};uO.exports=a5();var u5=uO.exports;const XS=Ef(u5);function un(){return un=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},un.apply(this,arguments)}function Fp(t){return t.charAt(0)==="/"}function hw(t,e){for(var n=e,r=n+1,i=t.length;r<i;n+=1,r+=1)t[n]=t[r];t.pop()}function l5(t,e){e===void 0&&(e="");var n=t&&t.split("/")||[],r=e&&e.split("/")||[],i=t&&Fp(t),o=e&&Fp(e),s=i||o;if(t&&Fp(t)?r=n:n.length&&(r.pop(),r=r.concat(n)),!r.length)return"/";var a;if(r.length){var u=r[r.length-1];a=u==="."||u===".."||u===""}else a=!1;for(var l=0,c=r.length;c>=0;c--){var d=r[c];d==="."?hw(r,c):d===".."?(hw(r,c),l++):l&&(hw(r,c),l--)}if(!s)for(;l--;l)r.unshift("..");s&&r[0]!==""&&(!r[0]||!Fp(r[0]))&&r.unshift("");var h=r.join("/");return a&&h.substr(-1)!=="/"&&(h+="/"),h}function QS(t){return t.valueOf?t.valueOf():Object.prototype.valueOf.call(t)}function Cm(t,e){if(t===e)return!0;if(t==null||e==null)return!1;if(Array.isArray(t))return Array.isArray(e)&&t.length===e.length&&t.every(function(i,o){return Cm(i,e[o])});if(typeof t=="object"||typeof e=="object"){var n=QS(t),r=QS(e);return n!==t||r!==e?Cm(n,r):Object.keys(Object.assign({},t,e)).every(function(i){return Cm(t[i],e[i])})}return!1}var c5="Invariant failed";function $o(t,e){if(!t)throw new Error(c5)}function Zd(t){return t.charAt(0)==="/"?t:"/"+t}function JS(t){return t.charAt(0)==="/"?t.substr(1):t}function d5(t,e){return t.toLowerCase().indexOf(e.toLowerCase())===0&&"/?#".indexOf(t.charAt(e.length))!==-1}function dO(t,e){return d5(t,e)?t.substr(e.length):t}function hO(t){return t.charAt(t.length-1)==="/"?t.slice(0,-1):t}function h5(t){var e=t||"/",n="",r="",i=e.indexOf("#");i!==-1&&(r=e.substr(i),e=e.substr(0,i));var o=e.indexOf("?");return o!==-1&&(n=e.substr(o),e=e.substr(0,o)),{pathname:e,search:n==="?"?"":n,hash:r==="#"?"":r}}function ar(t){var e=t.pathname,n=t.search,r=t.hash,i=e||"/";return n&&n!=="?"&&(i+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(i+=r.charAt(0)==="#"?r:"#"+r),i}function Gn(t,e,n,r){var i;typeof t=="string"?(i=h5(t),i.state=e):(i=un({},t),i.pathname===void 0&&(i.pathname=""),i.search?i.search.charAt(0)!=="?"&&(i.search="?"+i.search):i.search="",i.hash?i.hash.charAt(0)!=="#"&&(i.hash="#"+i.hash):i.hash="",e!==void 0&&i.state===void 0&&(i.state=e));try{i.pathname=decodeURI(i.pathname)}catch(o){throw o instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):o}return n&&(i.key=n),r?i.pathname?i.pathname.charAt(0)!=="/"&&(i.pathname=l5(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function f5(t,e){return t.pathname===e.pathname&&t.search===e.search&&t.hash===e.hash&&t.key===e.key&&Cm(t.state,e.state)}function J1(){var t=null;function e(s){return t=s,function(){t===s&&(t=null)}}function n(s,a,u,l){if(t!=null){var c=typeof t=="function"?t(s,a):t;typeof c=="string"?typeof u=="function"?u(c,l):l(!0):l(c!==!1)}else l(!0)}var r=[];function i(s){var a=!0;function u(){a&&s.apply(void 0,arguments)}return r.push(u),function(){a=!1,r=r.filter(function(l){return l!==u})}}function o(){for(var s=arguments.length,a=new Array(s),u=0;u<s;u++)a[u]=arguments[u];r.forEach(function(l){return l.apply(void 0,a)})}return{setPrompt:e,confirmTransitionTo:n,appendListener:i,notifyListeners:o}}var fO=!!(typeof window<"u"&&window.document&&window.document.createElement);function pO(t,e){e(window.confirm(t))}function p5(){var t=window.navigator.userAgent;return(t.indexOf("Android 2.")!==-1||t.indexOf("Android 4.0")!==-1)&&t.indexOf("Mobile Safari")!==-1&&t.indexOf("Chrome")===-1&&t.indexOf("Windows Phone")===-1?!1:window.history&&"pushState"in window.history}function m5(){return window.navigator.userAgent.indexOf("Trident")===-1}function g5(){return window.navigator.userAgent.indexOf("Firefox")===-1}function v5(t){return t.state===void 0&&navigator.userAgent.indexOf("CriOS")===-1}var ZS="popstate",eA="hashchange";function tA(){try{return window.history.state||{}}catch(t){return{}}}function mO(t){t===void 0&&(t={}),fO||$o(!1);var e=window.history,n=p5(),r=!m5(),i=t,o=i.forceRefresh,s=o===void 0?!1:o,a=i.getUserConfirmation,u=a===void 0?pO:a,l=i.keyLength,c=l===void 0?6:l,d=t.basename?hO(Zd(t.basename)):"";function h(V){var M=V||{},Y=M.key,X=M.state,se=window.location,re=se.pathname,xe=se.search,ce=se.hash,_e=re+xe+ce;return d&&(_e=dO(_e,d)),Gn(_e,X,Y)}function f(){return Math.random().toString(36).substr(2,c)}var m=J1();function v(V){un(L,V),L.length=e.length,m.notifyListeners(L.location,L.action)}function y(V){v5(V)||b(h(V.state))}function g(){b(h(tA()))}var w=!1;function b(V){if(w)w=!1,v();else{var M="POP";m.confirmTransitionTo(V,M,u,function(Y){Y?v({action:M,location:V}):x(V)})}}function x(V){var M=L.location,Y=E.indexOf(M.key);Y===-1&&(Y=0);var X=E.indexOf(V.key);X===-1&&(X=0);var se=Y-X;se&&(w=!0,N(se))}var _=h(tA()),E=[_.key];function I(V){return d+ar(V)}function C(V,M){var Y="PUSH",X=Gn(V,M,f(),L.location);m.confirmTransitionTo(X,Y,u,function(se){if(se){var re=I(X),xe=X.key,ce=X.state;if(n)if(e.pushState({key:xe,state:ce},null,re),s)window.location.href=re;else{var _e=E.indexOf(L.location.key),Ce=E.slice(0,_e+1);Ce.push(X.key),E=Ce,v({action:Y,location:X})}else window.location.href=re}})}function S(V,M){var Y="REPLACE",X=Gn(V,M,f(),L.location);m.confirmTransitionTo(X,Y,u,function(se){if(se){var re=I(X),xe=X.key,ce=X.state;if(n)if(e.replaceState({key:xe,state:ce},null,re),s)window.location.replace(re);else{var _e=E.indexOf(L.location.key);_e!==-1&&(E[_e]=X.key),v({action:Y,location:X})}else window.location.replace(re)}})}function N(V){e.go(V)}function R(){N(-1)}function D(){N(1)}var W=0;function F(V){W+=V,W===1&&V===1?(window.addEventListener(ZS,y),r&&window.addEventListener(eA,g)):W===0&&(window.removeEventListener(ZS,y),r&&window.removeEventListener(eA,g))}var G=!1;function K(V){V===void 0&&(V=!1);var M=m.setPrompt(V);return G||(F(1),G=!0),function(){return G&&(G=!1,F(-1)),M()}}function j(V){var M=m.appendListener(V);return F(1),function(){F(-1),M()}}var L={length:e.length,action:"POP",location:_,createHref:I,push:C,replace:S,go:N,goBack:R,goForward:D,block:K,listen:j};return L}var nA="hashchange",y5={hashbang:{encodePath:function(e){return e.charAt(0)==="!"?e:"!/"+JS(e)},decodePath:function(e){return e.charAt(0)==="!"?e.substr(1):e}},noslash:{encodePath:JS,decodePath:Zd},slash:{encodePath:Zd,decodePath:Zd}};function gO(t){var e=t.indexOf("#");return e===-1?t:t.slice(0,e)}function fd(){var t=window.location.href,e=t.indexOf("#");return e===-1?"":t.substring(e+1)}function w5(t){window.location.hash=t}function fw(t){window.location.replace(gO(window.location.href)+"#"+t)}function vO(t){t===void 0&&(t={}),fO||$o(!1);var e=window.history;g5();var n=t,r=n.getUserConfirmation,i=r===void 0?pO:r,o=n.hashType,s=o===void 0?"slash":o,a=t.basename?hO(Zd(t.basename)):"",u=y5[s],l=u.encodePath,c=u.decodePath;function d(){var M=c(fd());return a&&(M=dO(M,a)),Gn(M)}var h=J1();function f(M){un(V,M),V.length=e.length,h.notifyListeners(V.location,V.action)}var m=!1,v=null;function y(M,Y){return M.pathname===Y.pathname&&M.search===Y.search&&M.hash===Y.hash}function g(){var M=fd(),Y=l(M);if(M!==Y)fw(Y);else{var X=d(),se=V.location;if(!m&&y(se,X)||v===ar(X))return;v=null,w(X)}}function w(M){if(m)m=!1,f();else{var Y="POP";h.confirmTransitionTo(M,Y,i,function(X){X?f({action:Y,location:M}):b(M)})}}function b(M){var Y=V.location,X=I.lastIndexOf(ar(Y));X===-1&&(X=0);var se=I.lastIndexOf(ar(M));se===-1&&(se=0);var re=X-se;re&&(m=!0,R(re))}var x=fd(),_=l(x);x!==_&&fw(_);var E=d(),I=[ar(E)];function C(M){var Y=document.querySelector("base"),X="";return Y&&Y.getAttribute("href")&&(X=gO(window.location.href)),X+"#"+l(a+ar(M))}function S(M,Y){var X="PUSH",se=Gn(M,void 0,void 0,V.location);h.confirmTransitionTo(se,X,i,function(re){if(re){var xe=ar(se),ce=l(a+xe),_e=fd()!==ce;if(_e){v=xe,w5(ce);var Ce=I.lastIndexOf(ar(V.location)),tt=I.slice(0,Ce+1);tt.push(xe),I=tt,f({action:X,location:se})}else f()}})}function N(M,Y){var X="REPLACE",se=Gn(M,void 0,void 0,V.location);h.confirmTransitionTo(se,X,i,function(re){if(re){var xe=ar(se),ce=l(a+xe),_e=fd()!==ce;_e&&(v=xe,fw(ce));var Ce=I.indexOf(ar(V.location));Ce!==-1&&(I[Ce]=xe),f({action:X,location:se})}})}function R(M){e.go(M)}function D(){R(-1)}function W(){R(1)}var F=0;function G(M){F+=M,F===1&&M===1?window.addEventListener(nA,g):F===0&&window.removeEventListener(nA,g)}var K=!1;function j(M){M===void 0&&(M=!1);var Y=h.setPrompt(M);return K||(G(1),K=!0),function(){return K&&(K=!1,G(-1)),Y()}}function L(M){var Y=h.appendListener(M);return G(1),function(){G(-1),Y()}}var V={length:e.length,action:"POP",location:E,createHref:C,push:S,replace:N,go:R,goBack:D,goForward:W,block:j,listen:L};return V}function rA(t,e,n){return Math.min(Math.max(t,e),n)}function b5(t){t===void 0&&(t={});var e=t,n=e.getUserConfirmation,r=e.initialEntries,i=r===void 0?["/"]:r,o=e.initialIndex,s=o===void 0?0:o,a=e.keyLength,u=a===void 0?6:a,l=J1();function c(C){un(I,C),I.length=I.entries.length,l.notifyListeners(I.location,I.action)}function d(){return Math.random().toString(36).substr(2,u)}var h=rA(s,0,i.length-1),f=i.map(function(C){return typeof C=="string"?Gn(C,void 0,d()):Gn(C,void 0,C.key||d())}),m=ar;function v(C,S){var N="PUSH",R=Gn(C,S,d(),I.location);l.confirmTransitionTo(R,N,n,function(D){if(D){var W=I.index,F=W+1,G=I.entries.slice(0);G.length>F?G.splice(F,G.length-F,R):G.push(R),c({action:N,location:R,index:F,entries:G})}})}function y(C,S){var N="REPLACE",R=Gn(C,S,d(),I.location);l.confirmTransitionTo(R,N,n,function(D){D&&(I.entries[I.index]=R,c({action:N,location:R}))})}function g(C){var S=rA(I.index+C,0,I.entries.length-1),N="POP",R=I.entries[S];l.confirmTransitionTo(R,N,n,function(D){D?c({action:N,location:R,index:S}):c()})}function w(){g(-1)}function b(){g(1)}function x(C){var S=I.index+C;return S>=0&&S<I.entries.length}function _(C){return C===void 0&&(C=!1),l.setPrompt(C)}function E(C){return l.appendListener(C)}var I={length:f.length,action:"POP",location:f[h],index:h,entries:f,createHref:m,push:v,replace:y,go:g,goBack:w,goForward:b,canGo:x,block:_,listen:E};return I}var Rc={exports:{}},x5=Array.isArray||function(t){return Object.prototype.toString.call(t)=="[object Array]"},wg=x5;Rc.exports=bO;Rc.exports.parse=Z1;Rc.exports.compile=E5;Rc.exports.tokensToFunction=yO;Rc.exports.tokensToRegExp=wO;var _5=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Z1(t,e){for(var n=[],r=0,i=0,o="",s=e&&e.delimiter||"/",a;(a=_5.exec(t))!=null;){var u=a[0],l=a[1],c=a.index;if(o+=t.slice(i,c),i=c+u.length,l){o+=l[1];continue}var d=t[i],h=a[2],f=a[3],m=a[4],v=a[5],y=a[6],g=a[7];o&&(n.push(o),o="");var w=h!=null&&d!=null&&d!==h,b=y==="+"||y==="*",x=y==="?"||y==="*",_=a[2]||s,E=m||v;n.push({name:f||r++,prefix:h||"",delimiter:_,optional:x,repeat:b,partial:w,asterisk:!!g,pattern:E?C5(E):g?".*":"[^"+km(_)+"]+?"})}return i<t.length&&(o+=t.substr(i)),o&&n.push(o),n}function E5(t,e){return yO(Z1(t,e),e)}function I5(t){return encodeURI(t).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function T5(t){return encodeURI(t).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function yO(t,e){for(var n=new Array(t.length),r=0;r<t.length;r++)typeof t[r]=="object"&&(n[r]=new RegExp("^(?:"+t[r].pattern+")$",tE(e)));return function(i,o){for(var s="",a=i||{},u=o||{},l=u.pretty?I5:encodeURIComponent,c=0;c<t.length;c++){var d=t[c];if(typeof d=="string"){s+=d;continue}var h=a[d.name],f;if(h==null)if(d.optional){d.partial&&(s+=d.prefix);continue}else throw new TypeError('Expected "'+d.name+'" to be defined');if(wg(h)){if(!d.repeat)throw new TypeError('Expected "'+d.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(h.length===0){if(d.optional)continue;throw new TypeError('Expected "'+d.name+'" to not be empty')}for(var m=0;m<h.length;m++){if(f=l(h[m]),!n[c].test(f))throw new TypeError('Expected all "'+d.name+'" to match "'+d.pattern+'", but received `'+JSON.stringify(f)+"`");s+=(m===0?d.prefix:d.delimiter)+f}continue}if(f=d.asterisk?T5(h):l(h),!n[c].test(f))throw new TypeError('Expected "'+d.name+'" to match "'+d.pattern+'", but received "'+f+'"');s+=d.prefix+f}return s}}function km(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function C5(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function eE(t,e){return t.keys=e,t}function tE(t){return t&&t.sensitive?"":"i"}function k5(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)e.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return eE(t,e)}function S5(t,e,n){for(var r=[],i=0;i<t.length;i++)r.push(bO(t[i],e,n).source);var o=new RegExp("(?:"+r.join("|")+")",tE(n));return eE(o,e)}function A5(t,e,n){return wO(Z1(t,n),e,n)}function wO(t,e,n){wg(e)||(n=e||n,e=[]),n=n||{};for(var r=n.strict,i=n.end!==!1,o="",s=0;s<t.length;s++){var a=t[s];if(typeof a=="string")o+=km(a);else{var u=km(a.prefix),l="(?:"+a.pattern+")";e.push(a),a.repeat&&(l+="(?:"+u+l+")*"),a.optional?a.partial?l=u+"("+l+")?":l="(?:"+u+"("+l+"))?":l=u+"("+l+")",o+=l}}var c=km(n.delimiter||"/"),d=o.slice(-c.length)===c;return r||(o=(d?o.slice(0,-c.length):o)+"(?:"+c+"(?=$))?"),i?o+="$":o+=r&&d?"":"(?="+c+"|$)",eE(new RegExp("^"+o,tE(n)),e)}function bO(t,e,n){return wg(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?k5(t,e):wg(t)?S5(t,e,n):A5(t,e,n)}var R5=Rc.exports;const xO=Ef(R5);var et={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dn=typeof Symbol=="function"&&Symbol.for,nE=dn?Symbol.for("react.element"):60103,rE=dn?Symbol.for("react.portal"):60106,Lv=dn?Symbol.for("react.fragment"):60107,Mv=dn?Symbol.for("react.strict_mode"):60108,Vv=dn?Symbol.for("react.profiler"):60114,Fv=dn?Symbol.for("react.provider"):60109,$v=dn?Symbol.for("react.context"):60110,iE=dn?Symbol.for("react.async_mode"):60111,Bv=dn?Symbol.for("react.concurrent_mode"):60111,jv=dn?Symbol.for("react.forward_ref"):60112,Uv=dn?Symbol.for("react.suspense"):60113,N5=dn?Symbol.for("react.suspense_list"):60120,zv=dn?Symbol.for("react.memo"):60115,Wv=dn?Symbol.for("react.lazy"):60116,P5=dn?Symbol.for("react.block"):60121,D5=dn?Symbol.for("react.fundamental"):60117,O5=dn?Symbol.for("react.responder"):60118,L5=dn?Symbol.for("react.scope"):60119;function Br(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case nE:switch(t=t.type,t){case iE:case Bv:case Lv:case Vv:case Mv:case Uv:return t;default:switch(t=t&&t.$$typeof,t){case $v:case jv:case Wv:case zv:case Fv:return t;default:return e}}case rE:return e}}}function _O(t){return Br(t)===Bv}et.AsyncMode=iE;et.ConcurrentMode=Bv;et.ContextConsumer=$v;et.ContextProvider=Fv;et.Element=nE;et.ForwardRef=jv;et.Fragment=Lv;et.Lazy=Wv;et.Memo=zv;et.Portal=rE;et.Profiler=Vv;et.StrictMode=Mv;et.Suspense=Uv;et.isAsyncMode=function(t){return _O(t)||Br(t)===iE};et.isConcurrentMode=_O;et.isContextConsumer=function(t){return Br(t)===$v};et.isContextProvider=function(t){return Br(t)===Fv};et.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===nE};et.isForwardRef=function(t){return Br(t)===jv};et.isFragment=function(t){return Br(t)===Lv};et.isLazy=function(t){return Br(t)===Wv};et.isMemo=function(t){return Br(t)===zv};et.isPortal=function(t){return Br(t)===rE};et.isProfiler=function(t){return Br(t)===Vv};et.isStrictMode=function(t){return Br(t)===Mv};et.isSuspense=function(t){return Br(t)===Uv};et.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Lv||t===Bv||t===Vv||t===Mv||t===Uv||t===N5||typeof t=="object"&&t!==null&&(t.$$typeof===Wv||t.$$typeof===zv||t.$$typeof===Fv||t.$$typeof===$v||t.$$typeof===jv||t.$$typeof===D5||t.$$typeof===O5||t.$$typeof===L5||t.$$typeof===P5)};et.typeOf=Br;function Af(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,o;for(o=0;o<r.length;o++)i=r[o],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}var EO={exports:{}},Ge={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hn=typeof Symbol=="function"&&Symbol.for,oE=hn?Symbol.for("react.element"):60103,sE=hn?Symbol.for("react.portal"):60106,qv=hn?Symbol.for("react.fragment"):60107,Hv=hn?Symbol.for("react.strict_mode"):60108,Gv=hn?Symbol.for("react.profiler"):60114,Kv=hn?Symbol.for("react.provider"):60109,Yv=hn?Symbol.for("react.context"):60110,aE=hn?Symbol.for("react.async_mode"):60111,Xv=hn?Symbol.for("react.concurrent_mode"):60111,Qv=hn?Symbol.for("react.forward_ref"):60112,Jv=hn?Symbol.for("react.suspense"):60113,M5=hn?Symbol.for("react.suspense_list"):60120,Zv=hn?Symbol.for("react.memo"):60115,ey=hn?Symbol.for("react.lazy"):60116,V5=hn?Symbol.for("react.block"):60121,F5=hn?Symbol.for("react.fundamental"):60117,$5=hn?Symbol.for("react.responder"):60118,B5=hn?Symbol.for("react.scope"):60119;function jr(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case oE:switch(t=t.type,t){case aE:case Xv:case qv:case Gv:case Hv:case Jv:return t;default:switch(t=t&&t.$$typeof,t){case Yv:case Qv:case ey:case Zv:case Kv:return t;default:return e}}case sE:return e}}}function IO(t){return jr(t)===Xv}Ge.AsyncMode=aE;Ge.ConcurrentMode=Xv;Ge.ContextConsumer=Yv;Ge.ContextProvider=Kv;Ge.Element=oE;Ge.ForwardRef=Qv;Ge.Fragment=qv;Ge.Lazy=ey;Ge.Memo=Zv;Ge.Portal=sE;Ge.Profiler=Gv;Ge.StrictMode=Hv;Ge.Suspense=Jv;Ge.isAsyncMode=function(t){return IO(t)||jr(t)===aE};Ge.isConcurrentMode=IO;Ge.isContextConsumer=function(t){return jr(t)===Yv};Ge.isContextProvider=function(t){return jr(t)===Kv};Ge.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===oE};Ge.isForwardRef=function(t){return jr(t)===Qv};Ge.isFragment=function(t){return jr(t)===qv};Ge.isLazy=function(t){return jr(t)===ey};Ge.isMemo=function(t){return jr(t)===Zv};Ge.isPortal=function(t){return jr(t)===sE};Ge.isProfiler=function(t){return jr(t)===Gv};Ge.isStrictMode=function(t){return jr(t)===Hv};Ge.isSuspense=function(t){return jr(t)===Jv};Ge.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===qv||t===Xv||t===Gv||t===Hv||t===Jv||t===M5||typeof t=="object"&&t!==null&&(t.$$typeof===ey||t.$$typeof===Zv||t.$$typeof===Kv||t.$$typeof===Yv||t.$$typeof===Qv||t.$$typeof===F5||t.$$typeof===$5||t.$$typeof===B5||t.$$typeof===V5)};Ge.typeOf=jr;EO.exports=Ge;var j5=EO.exports,uE=j5,U5={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},z5={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},W5={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},TO={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},lE={};lE[uE.ForwardRef]=W5;lE[uE.Memo]=TO;function iA(t){return uE.isMemo(t)?TO:lE[t.$$typeof]||U5}var q5=Object.defineProperty,H5=Object.getOwnPropertyNames,oA=Object.getOwnPropertySymbols,G5=Object.getOwnPropertyDescriptor,K5=Object.getPrototypeOf,sA=Object.prototype;function CO(t,e,n){if(typeof e!="string"){if(sA){var r=K5(e);r&&r!==sA&&CO(t,r,n)}var i=H5(e);oA&&(i=i.concat(oA(e)));for(var o=iA(t),s=iA(e),a=0;a<i.length;++a){var u=i[a];if(!z5[u]&&!(n&&n[u])&&!(s&&s[u])&&!(o&&o[u])){var l=G5(e,u);try{q5(t,u,l)}catch(c){}}}}return t}var Y5=CO;const X5=Ef(Y5);var pw=1073741823,aA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{};function Q5(){var t="__global_unique_id__";return aA[t]=(aA[t]||0)+1}function J5(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Z5(t){var e=[];return{on:function(r){e.push(r)},off:function(r){e=e.filter(function(i){return i!==r})},get:function(){return t},set:function(r,i){t=r,e.forEach(function(o){return o(t,i)})}}}function eW(t){return Array.isArray(t)?t[0]:t}function tW(t,e){var n,r,i="__create-react-context-"+Q5()+"__",o=function(a){Zi(u,a);function u(){for(var c,d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return c=a.call.apply(a,[this].concat(h))||this,c.emitter=Z5(c.props.value),c}var l=u.prototype;return l.getChildContext=function(){var d;return d={},d[i]=this.emitter,d},l.componentWillReceiveProps=function(d){if(this.props.value!==d.value){var h=this.props.value,f=d.value,m;J5(h,f)?m=0:(m=typeof e=="function"?e(h,f):pw,m|=0,m!==0&&this.emitter.set(d.value,m))}},l.render=function(){return this.props.children},u}(H.Component);o.childContextTypes=(n={},n[i]=XS.object.isRequired,n);var s=function(a){Zi(u,a);function u(){for(var c,d=arguments.length,h=new Array(d),f=0;f<d;f++)h[f]=arguments[f];return c=a.call.apply(a,[this].concat(h))||this,c.observedBits=void 0,c.state={value:c.getValue()},c.onUpdate=function(m,v){var y=c.observedBits|0;y&v&&c.setState({value:c.getValue()})},c}var l=u.prototype;return l.componentWillReceiveProps=function(d){var h=d.observedBits;this.observedBits=h==null?pw:h},l.componentDidMount=function(){this.context[i]&&this.context[i].on(this.onUpdate);var d=this.props.observedBits;this.observedBits=d==null?pw:d},l.componentWillUnmount=function(){this.context[i]&&this.context[i].off(this.onUpdate)},l.getValue=function(){return this.context[i]?this.context[i].get():t},l.render=function(){return eW(this.props.children)(this.state.value)},u}(H.Component);return s.contextTypes=(r={},r[i]=XS.object,r),{Provider:o,Consumer:s}}var nW=H.createContext||tW,kO=function(e){var n=nW();return n.displayName=e,n},SO=kO("Router-History"),No=kO("Router"),Nu=function(t){Zi(e,t),e.computeRootMatch=function(i){return{path:"/",url:"/",params:{},isExact:i==="/"}};function e(r){var i;return i=t.call(this,r)||this,i.state={location:r.history.location},i._isMounted=!1,i._pendingLocation=null,r.staticContext||(i.unlisten=r.history.listen(function(o){i._pendingLocation=o})),i}var n=e.prototype;return n.componentDidMount=function(){var i=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen(function(o){i._isMounted&&i.setState({location:o})})),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return H.createElement(No.Provider,{value:{history:this.props.history,location:this.state.location,match:e.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},H.createElement(SO.Provider,{children:this.props.children||null,value:this.props.history}))},e}(H.Component);H.Component;var rW=function(t){Zi(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(i){this.props.onUpdate&&this.props.onUpdate.call(this,this,i)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},e}(H.Component),mw={},iW=1e4,uA=0;function oW(t){if(mw[t])return mw[t];var e=xO.compile(t);return uA<iW&&(mw[t]=e,uA++),e}function lA(t,e){return t===void 0&&(t="/"),e===void 0&&(e={}),t==="/"?t:oW(t)(e,{pretty:!0})}function sW(t){var e=t.computedMatch,n=t.to,r=t.push,i=r===void 0?!1:r;return H.createElement(No.Consumer,null,function(o){o||$o(!1);var s=o.history,a=o.staticContext,u=i?s.push:s.replace,l=Gn(e?typeof n=="string"?lA(n,e.params):un({},n,{pathname:lA(n.pathname,e.params)}):n);return a?(u(l),null):H.createElement(rW,{onMount:function(){u(l)},onUpdate:function(d,h){var f=Gn(h.to);f5(f,un({},l,{key:f.key}))||u(l)},to:n})})}var cA={},aW=1e4,dA=0;function uW(t,e){var n=""+e.end+e.strict+e.sensitive,r=cA[n]||(cA[n]={});if(r[t])return r[t];var i=[],o=xO(t,i,e),s={regexp:o,keys:i};return dA<aW&&(r[t]=s,dA++),s}function ty(t,e){e===void 0&&(e={}),(typeof e=="string"||Array.isArray(e))&&(e={path:e});var n=e,r=n.path,i=n.exact,o=i===void 0?!1:i,s=n.strict,a=s===void 0?!1:s,u=n.sensitive,l=u===void 0?!1:u,c=[].concat(r);return c.reduce(function(d,h){if(!h&&h!=="")return null;if(d)return d;var f=uW(h,{end:o,strict:a,sensitive:l}),m=f.regexp,v=f.keys,y=m.exec(t);if(!y)return null;var g=y[0],w=y.slice(1),b=t===g;return o&&!b?null:{path:h,url:h==="/"&&g===""?"/":g,isExact:b,params:v.reduce(function(x,_,E){return x[_.name]=w[E],x},{})}},null)}function lW(t){return H.Children.count(t)===0}var wt=function(t){Zi(e,t);function e(){return t.apply(this,arguments)||this}var n=e.prototype;return n.render=function(){var i=this;return H.createElement(No.Consumer,null,function(o){o||$o(!1);var s=i.props.location||o.location,a=i.props.computedMatch?i.props.computedMatch:i.props.path?ty(s.pathname,i.props):o.match,u=un({},o,{location:s,match:a}),l=i.props,c=l.children,d=l.component,h=l.render;return Array.isArray(c)&&lW(c)&&(c=null),H.createElement(No.Provider,{value:u},u.match?c?typeof c=="function"?c(u):c:d?H.createElement(d,u):h?h(u):null:typeof c=="function"?c(u):null)})},e}(H.Component);function cE(t){return t.charAt(0)==="/"?t:"/"+t}function cW(t,e){return t?un({},e,{pathname:cE(t)+e.pathname}):e}function dW(t,e){if(!t)return e;var n=cE(t);return e.pathname.indexOf(n)!==0?e:un({},e,{pathname:e.pathname.substr(n.length)})}function hA(t){return typeof t=="string"?t:ar(t)}function gw(t){return function(){$o(!1)}}function fA(){}H.Component;H.Component;function hW(t){var e="withRouter("+(t.displayName||t.name)+")",n=function(i){var o=i.wrappedComponentRef,s=Af(i,["wrappedComponentRef"]);return H.createElement(No.Consumer,null,function(a){return a||$o(!1),H.createElement(t,un({},s,a,{ref:o}))})};return n.displayName=e,n.WrappedComponent=t,X5(n,t)}var AO=H.useContext;function Pu(){return AO(SO)}function Nc(){var t=AO(No).match;return t?t.params:{}}H.Component;H.Component;var px=function(e,n){return typeof e=="function"?e(n):e},mx=function(e,n){return typeof e=="string"?Gn(e,null,null,n):e},dE=function(e){return e},nc=H.forwardRef;typeof nc>"u"&&(nc=dE);function fW(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}var pW=nc(function(t,e){var n=t.innerRef,r=t.navigate,i=t.onClick,o=Af(t,["innerRef","navigate","onClick"]),s=o.target,a=un({},o,{onClick:function(l){try{i&&i(l)}catch(c){throw l.preventDefault(),c}!l.defaultPrevented&&l.button===0&&(!s||s==="_self")&&!fW(l)&&(l.preventDefault(),r())}});return dE!==nc?a.ref=e||n:a.ref=n,H.createElement("a",a)}),Bo=nc(function(t,e){var n=t.component,r=n===void 0?pW:n,i=t.replace,o=t.to,s=t.innerRef,a=Af(t,["component","replace","to","innerRef"]);return H.createElement(No.Consumer,null,function(u){u||$o(!1);var l=u.history,c=mx(px(o,u.location),u.location),d=c?l.createHref(c):"",h=un({},a,{href:d,navigate:function(){var m=px(o,u.location),v=ar(u.location)===ar(mx(m)),y=i||v?l.replace:l.push;y(m)}});return dE!==nc?h.ref=e||s:h.innerRef=s,H.createElement(r,h)})}),RO=function(e){return e},bg=H.forwardRef;typeof bg>"u"&&(bg=RO);function mW(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.filter(function(r){return r}).join(" ")}bg(function(t,e){var n=t["aria-current"],r=n===void 0?"page":n,i=t.activeClassName,o=i===void 0?"active":i,s=t.activeStyle,a=t.className,u=t.exact,l=t.isActive,c=t.location,d=t.sensitive,h=t.strict,f=t.style,m=t.to,v=t.innerRef,y=Af(t,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return H.createElement(No.Consumer,null,function(g){g||$o(!1);var w=c||g.location,b=mx(px(m,w),w),x=b.pathname,_=x&&x.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),E=_?ty(w.pathname,{path:_,exact:u,sensitive:d,strict:h}):null,I=!!(l?l(E,w):E),C=typeof a=="function"?a(I):a,S=typeof f=="function"?f(I):f;I&&(C=mW(C,o),S=un({},S,s));var N=un({"aria-current":I&&r||null,className:C,style:S,to:b},y);return RO!==bg?N.ref=e||v:N.innerRef=v,H.createElement(Bo,N)})});const gW="modulepreload",vW=function(t){return"/"+t},pA={},Di=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link");i=Promise.all(n.map(s=>{if(s=vW(s),s in pA)return;pA[s]=!0;const a=s.endsWith(".css"),u=a?'[rel="stylesheet"]':"";if(!!r)for(let d=o.length-1;d>=0;d--){const h=o[d];if(h.href===s&&(!a||h.rel==="stylesheet"))return}else if(document.querySelector('link[href="'.concat(s,'"]').concat(u)))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":gW,a||(c.as="script",c.crossOrigin=""),c.href=s,document.head.appendChild(c),a)return new Promise((d,h)=>{c.addEventListener("load",d),c.addEventListener("error",()=>h(new Error("Unable to preload CSS for ".concat(s))))})}))}return i.then(()=>e()).catch(o=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=o,window.dispatchEvent(s),!s.defaultPrevented)throw o})},fs={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1};let rl,gx,Rh,hE=!1,xg=!1,fE=!1,Cr=!1,mA=null,vx=!1;const yW={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1},NO=t=>{const e=new URL(t,ln.$resourcesUrl$);return e.origin!==Nf.location.origin?e.href:e.pathname},au=(t,e="")=>()=>{},wW="slot-fb{display:contents}slot-fb[hidden]{display:none}",gA="http://www.w3.org/1999/xlink",vA={},bW="http://www.w3.org/2000/svg",xW="http://www.w3.org/1999/xhtml",_W=t=>t!=null,pE=t=>(t=typeof t,t==="object"||t==="function");function EW(t){var e,n,r;return(r=(n=(e=t.head)===null||e===void 0?void 0:e.querySelector('meta[name="csp-nonce"]'))===null||n===void 0?void 0:n.getAttribute("content"))!==null&&r!==void 0?r:void 0}const Ee=(t,e,...n)=>{let r=null,i=null,o=null,s=!1,a=!1;const u=[],l=d=>{for(let h=0;h<d.length;h++)r=d[h],Array.isArray(r)?l(r):r!=null&&typeof r!="boolean"&&((s=typeof t!="function"&&!pE(r))&&(r=String(r)),s&&a?u[u.length-1].$text$+=r:u.push(s?_g(null,r):r),a=s)};if(l(n),e){e.key&&(i=e.key),e.name&&(o=e.name);{const d=e.className||e.class;d&&(e.class=typeof d!="object"?d:Object.keys(d).filter(h=>d[h]).join(" "))}}if(typeof t=="function")return t(e===null?{}:e,u,TW);const c=_g(t,null);return c.$attrs$=e,u.length>0&&(c.$children$=u),c.$key$=i,c.$name$=o,c},_g=(t,e)=>{const n={$flags$:0,$tag$:t,$text$:e,$elm$:null,$children$:null};return n.$attrs$=null,n.$key$=null,n.$name$=null,n},Ur={},IW=t=>t&&t.$tag$===Ur,TW={forEach:(t,e)=>t.map(yA).forEach(e),map:(t,e)=>t.map(yA).map(e).map(CW)},yA=t=>({vattrs:t.$attrs$,vchildren:t.$children$,vkey:t.$key$,vname:t.$name$,vtag:t.$tag$,vtext:t.$text$}),CW=t=>{if(typeof t.vtag=="function"){const n=Object.assign({},t.vattrs);return t.vkey&&(n.key=t.vkey),t.vname&&(n.name=t.vname),Ee(t.vtag,n,...t.vchildren||[])}const e=_g(t.vtag,t.vtext);return e.$attrs$=t.vattrs,e.$children$=t.vchildren,e.$key$=t.vkey,e.$name$=t.vname,e},kW=t=>zO.map(e=>e(t)).find(e=>!!e),SW=t=>zO.push(t),AW=t=>Du(t).$modeName$,RW=(t,e)=>t!=null&&!pE(t)?e&4?t==="false"?!1:t===""||!!t:e&2?parseFloat(t):e&1?String(t):t:t,NW=t=>t,St=(t,e,n)=>{const r=NW(t);return{emit:i=>PW(r,e,{bubbles:!!(n&4),composed:!!(n&2),cancelable:!!(n&1),detail:i})}},PW=(t,e,n)=>{const r=ln.ce(e,n);return t.dispatchEvent(r),r},wA=new WeakMap,DW=(t,e,n)=>{let r=Ig.get(t);sq&&n?(r=r||new CSSStyleSheet,typeof r=="string"?r=e:r.replaceSync(e)):r=e,Ig.set(t,r)},OW=(t,e,n)=>{var r;const i=PO(e,n),o=Ig.get(i);if(t=t.nodeType===11?t:bi,o)if(typeof o=="string"){t=t.head||t;let s=wA.get(t),a;if(s||wA.set(t,s=new Set),!s.has(i)){{a=bi.createElement("style"),a.innerHTML=o;const u=(r=ln.$nonce$)!==null&&r!==void 0?r:EW(bi);u!=null&&a.setAttribute("nonce",u),t.insertBefore(a,t.querySelector("link"))}e.$flags$&4&&(a.innerHTML+=wW),s&&s.add(i)}}else t.adoptedStyleSheets.includes(o)||(t.adoptedStyleSheets=[...t.adoptedStyleSheets,o]);return i},LW=t=>{const e=t.$cmpMeta$,n=t.$hostElement$,r=e.$flags$,i=au("attachStyles",e.$tagName$),o=OW(n.shadowRoot?n.shadowRoot:n.getRootNode(),e,t.$modeName$);r&10&&(n["s-sc"]=o,n.classList.add(o+"-h"),r&2&&n.classList.add(o+"-s")),i()},PO=(t,e)=>"sc-"+(e&&t.$flags$&32?t.$tagName$+"-"+e:t.$tagName$),bA=(t,e,n,r,i,o)=>{if(n!==r){let s=CA(t,e),a=e.toLowerCase();if(e==="class"){const u=t.classList,l=xA(n),c=xA(r);u.remove(...l.filter(d=>d&&!c.includes(d))),u.add(...c.filter(d=>d&&!l.includes(d)))}else if(e==="style"){for(const u in n)(!r||r[u]==null)&&(u.includes("-")?t.style.removeProperty(u):t.style[u]="");for(const u in r)(!n||r[u]!==n[u])&&(u.includes("-")?t.style.setProperty(u,r[u]):t.style[u]=r[u])}else if(e!=="key")if(e==="ref")r&&r(t);else if(!t.__lookupSetter__(e)&&e[0]==="o"&&e[1]==="n"){if(e[2]==="-"?e=e.slice(3):CA(Nf,a)?e=a.slice(2):e=a[2]+e.slice(3),n||r){const u=e.endsWith(DO);e=e.replace(VW,""),n&&ln.rel(t,e,n,u),r&&ln.ael(t,e,r,u)}}else{const u=pE(r);if((s||u&&r!==null)&&!i)try{if(t.tagName.includes("-"))t[e]=r;else{const c=r==null?"":r;e==="list"?s=!1:(n==null||t[e]!=c)&&(t[e]=c)}}catch(c){}let l=!1;a!==(a=a.replace(/^xlink\:?/,""))&&(e=a,l=!0),r==null||r===!1?(r!==!1||t.getAttribute(e)==="")&&(l?t.removeAttributeNS(gA,e):t.removeAttribute(e)):(!s||o&4||i)&&!u&&(r=r===!0?"":r,l?t.setAttributeNS(gA,e,r):t.setAttribute(e,r))}}},MW=/\s/,xA=t=>t?t.split(MW):[],DO="Capture",VW=new RegExp(DO+"$"),OO=(t,e,n,r)=>{const i=e.$elm$.nodeType===11&&e.$elm$.host?e.$elm$.host:e.$elm$,o=t&&t.$attrs$||vA,s=e.$attrs$||vA;for(r in o)r in s||bA(i,r,o[r],void 0,n,e.$flags$);for(r in s)bA(i,r,o[r],s[r],n,e.$flags$)},Eg=(t,e,n,r)=>{const i=e.$children$[n];let o=0,s,a,u;if(hE||(fE=!0,i.$tag$==="slot"&&(rl&&r.classList.add(rl+"-s"),i.$flags$|=i.$children$?2:1)),i.$text$!==null)s=i.$elm$=bi.createTextNode(i.$text$);else if(i.$flags$&1)s=i.$elm$=bi.createTextNode("");else{if(Cr||(Cr=i.$tag$==="svg"),s=i.$elm$=bi.createElementNS(Cr?bW:xW,i.$flags$&2?"slot-fb":i.$tag$),Cr&&i.$tag$==="foreignObject"&&(Cr=!1),OO(null,i,Cr),_W(rl)&&s["s-si"]!==rl&&s.classList.add(s["s-si"]=rl),i.$children$)for(o=0;o<i.$children$.length;++o)a=Eg(t,i,o,s),a&&s.appendChild(a);i.$tag$==="svg"?Cr=!1:s.tagName==="foreignObject"&&(Cr=!0)}return s["s-hn"]=Rh,i.$flags$&3&&(s["s-sr"]=!0,s["s-cr"]=gx,s["s-sn"]=i.$name$||"",u=t&&t.$children$&&t.$children$[n],u&&u.$tag$===i.$tag$&&t.$elm$&&Nh(t.$elm$,!1)),s},Nh=(t,e)=>{ln.$flags$|=1;const n=t.childNodes;for(let r=n.length-1;r>=0;r--){const i=n[r];i["s-hn"]!==Rh&&i["s-ol"]&&(VO(i).insertBefore(i,mE(i)),i["s-ol"].remove(),i["s-ol"]=void 0,i["s-sh"]=void 0,fE=!0),e&&Nh(i,e)}ln.$flags$&=-2},LO=(t,e,n,r,i,o)=>{let s=t["s-cr"]&&t["s-cr"].parentNode||t,a;for(s.shadowRoot&&s.tagName===Rh&&(s=s.shadowRoot);i<=o;++i)r[i]&&(a=Eg(null,n,i,t),a&&(r[i].$elm$=a,s.insertBefore(a,mE(e))))},MO=(t,e,n)=>{for(let r=e;r<=n;++r){const i=t[r];if(i){const o=i.$elm$;BO(i),o&&(xg=!0,o["s-ol"]?o["s-ol"].remove():Nh(o,!0),o.remove())}}},FW=(t,e,n,r,i=!1)=>{let o=0,s=0,a=0,u=0,l=e.length-1,c=e[0],d=e[l],h=r.length-1,f=r[0],m=r[h],v,y;for(;o<=l&&s<=h;)if(c==null)c=e[++o];else if(d==null)d=e[--l];else if(f==null)f=r[++s];else if(m==null)m=r[--h];else if($p(c,f,i))il(c,f,i),c=e[++o],f=r[++s];else if($p(d,m,i))il(d,m,i),d=e[--l],m=r[--h];else if($p(c,m,i))(c.$tag$==="slot"||m.$tag$==="slot")&&Nh(c.$elm$.parentNode,!1),il(c,m,i),t.insertBefore(c.$elm$,d.$elm$.nextSibling),c=e[++o],m=r[--h];else if($p(d,f,i))(c.$tag$==="slot"||m.$tag$==="slot")&&Nh(d.$elm$.parentNode,!1),il(d,f,i),t.insertBefore(d.$elm$,c.$elm$),d=e[--l],f=r[++s];else{for(a=-1,u=o;u<=l;++u)if(e[u]&&e[u].$key$!==null&&e[u].$key$===f.$key$){a=u;break}a>=0?(y=e[a],y.$tag$!==f.$tag$?v=Eg(e&&e[s],n,a,t):(il(y,f,i),e[a]=void 0,v=y.$elm$),f=r[++s]):(v=Eg(e&&e[s],n,s,t),f=r[++s]),v&&VO(c.$elm$).insertBefore(v,mE(c.$elm$))}o>l?LO(t,r[h+1]==null?null:r[h+1].$elm$,n,r,s,h):s>h&&MO(e,o,l)},$p=(t,e,n=!1)=>t.$tag$===e.$tag$?t.$tag$==="slot"?t.$name$===e.$name$:n?!0:t.$key$===e.$key$:!1,mE=t=>t&&t["s-ol"]||t,VO=t=>(t["s-ol"]?t["s-ol"]:t).parentNode,il=(t,e,n=!1)=>{const r=e.$elm$=t.$elm$,i=t.$children$,o=e.$children$,s=e.$tag$,a=e.$text$;let u;a===null?(Cr=s==="svg"?!0:s==="foreignObject"?!1:Cr,s==="slot"&&!hE||OO(t,e,Cr),i!==null&&o!==null?FW(r,i,e,o,n):o!==null?(t.$text$!==null&&(r.textContent=""),LO(r,null,e,o,0,o.length-1)):i!==null&&MO(i,0,i.length-1),Cr&&s==="svg"&&(Cr=!1)):(u=r["s-cr"])?u.parentNode.textContent=a:t.$text$!==a&&(r.data=a)},FO=t=>{const e=t.childNodes;for(const n of e)if(n.nodeType===1){if(n["s-sr"]){const r=n["s-sn"];n.hidden=!1;for(const i of e)if(i!==n){if(i["s-hn"]!==n["s-hn"]||r!==""){if(i.nodeType===1&&(r===i.getAttribute("slot")||r===i["s-sn"])){n.hidden=!0;break}}else if(i.nodeType===1||i.nodeType===3&&i.textContent.trim()!==""){n.hidden=!0;break}}}FO(n)}},fo=[],$O=t=>{let e,n,r;for(const i of t.childNodes){if(i["s-sr"]&&(e=i["s-cr"])&&e.parentNode){n=e.parentNode.childNodes;const o=i["s-sn"];for(r=n.length-1;r>=0;r--)if(e=n[r],!e["s-cn"]&&!e["s-nr"]&&e["s-hn"]!==i["s-hn"]&&!fs.experimentalSlotFixes)if(_A(e,o)){let s=fo.find(a=>a.$nodeToRelocate$===e);xg=!0,e["s-sn"]=e["s-sn"]||o,s?(s.$nodeToRelocate$["s-sh"]=i["s-hn"],s.$slotRefNode$=i):(e["s-sh"]=i["s-hn"],fo.push({$slotRefNode$:i,$nodeToRelocate$:e})),e["s-sr"]&&fo.map(a=>{_A(a.$nodeToRelocate$,e["s-sn"])&&(s=fo.find(u=>u.$nodeToRelocate$===e),s&&!a.$slotRefNode$&&(a.$slotRefNode$=s.$slotRefNode$))})}else fo.some(s=>s.$nodeToRelocate$===e)||fo.push({$nodeToRelocate$:e})}i.nodeType===1&&$O(i)}},_A=(t,e)=>t.nodeType===1?t.getAttribute("slot")===null&&e===""||t.getAttribute("slot")===e:t["s-sn"]===e?!0:e==="",BO=t=>{t.$attrs$&&t.$attrs$.ref&&t.$attrs$.ref(null),t.$children$&&t.$children$.map(BO)},$W=(t,e,n=!1)=>{var r,i,o,s,a;const u=t.$hostElement$,l=t.$cmpMeta$,c=t.$vnode$||_g(null,null),d=IW(e)?e:Ee(null,null,e);if(Rh=u.tagName,l.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},l.$attrsToReflect$.map(([h,f])=>d.$attrs$[f]=u[h])),n&&d.$attrs$)for(const h of Object.keys(d.$attrs$))u.hasAttribute(h)&&!["key","ref","style","class"].includes(h)&&(d.$attrs$[h]=u[h]);d.$tag$=null,d.$flags$|=4,t.$vnode$=d,d.$elm$=c.$elm$=u.shadowRoot||u,rl=u["s-sc"],hE=(l.$flags$&1)!==0,gx=u["s-cr"],xg=!1,il(c,d,n);{if(ln.$flags$|=1,fE){$O(d.$elm$);for(const h of fo){const f=h.$nodeToRelocate$;if(!f["s-ol"]){const m=bi.createTextNode("");m["s-nr"]=f,f.parentNode.insertBefore(f["s-ol"]=m,f)}}for(const h of fo){const f=h.$nodeToRelocate$,m=h.$slotRefNode$;if(m){const v=m.parentNode;let y=m.nextSibling;{let g=(r=f["s-ol"])===null||r===void 0?void 0:r.previousSibling;for(;g;){let w=(i=g["s-nr"])!==null&&i!==void 0?i:null;if(w&&w["s-sn"]===f["s-sn"]&&v===w.parentNode&&(w=w.nextSibling,!w||!w["s-nr"])){y=w;break}g=g.previousSibling}}(!y&&v!==f.parentNode||f.nextSibling!==y)&&f!==y&&(!f["s-hn"]&&f["s-ol"]&&(f["s-hn"]=f["s-ol"].parentNode.nodeName),v.insertBefore(f,y),f.nodeType===1&&(f.hidden=(o=f["s-ih"])!==null&&o!==void 0?o:!1))}else f.nodeType===1&&(n&&(f["s-ih"]=(s=f.hidden)!==null&&s!==void 0?s:!1),f.hidden=!0)}}xg&&FO(d.$elm$),ln.$flags$&=-2,fo.length=0}if(fs.experimentalScopedSlotChanges&&l.$flags$&2)for(const h of d.$elm$.childNodes)h["s-hn"]!==Rh&&!h["s-sh"]&&(n&&h["s-ih"]==null&&(h["s-ih"]=(a=h.hidden)!==null&&a!==void 0?a:!1),h.hidden=!0);gx=void 0},BW=(t,e)=>{},gE=(t,e)=>(t.$flags$|=16,BW(t,t.$ancestorComponent$),vE(()=>jW(t,e))),jW=(t,e)=>{const n=t.$hostElement$,r=au("scheduleUpdate",t.$cmpMeta$.$tagName$),i=n;let o;return e?o=Ml(i,"componentWillLoad"):o=Ml(i,"componentWillUpdate"),o=EA(o,()=>Ml(i,"componentWillRender")),r(),EA(o,()=>zW(t,i,e))},EA=(t,e)=>UW(t)?t.then(e):e(),UW=t=>t instanceof Promise||t&&t.then&&typeof t.then=="function",zW=async(t,e,n)=>{const r=t.$hostElement$,i=au("update",t.$cmpMeta$.$tagName$);r["s-rc"],n&&LW(t);const o=au("render",t.$cmpMeta$.$tagName$);WW(t,e,r,n),o(),i(),qW(t)},WW=(t,e,n,r)=>{try{mA=e,e=e.render&&e.render(),t.$flags$&=-17,t.$flags$|=2,(fs.hasRenderFn||fs.reflect)&&(fs.vdomRender||fs.reflect)&&(fs.hydrateServerSide||$W(t,e,r))}catch(u){Rf(u,t.$hostElement$)}return mA=null,null},qW=t=>{const e=t.$cmpMeta$.$tagName$,n=t.$hostElement$,r=au("postUpdate",e),i=n;t.$ancestorComponent$,Ml(i,"componentDidRender"),t.$flags$&64?(Ml(i,"componentDidUpdate"),r()):(t.$flags$|=64,Ml(i,"componentDidLoad"),r())},IA=t=>{{const e=Du(t),n=e.$hostElement$.isConnected;return n&&(e.$flags$&18)===2&&gE(e,!1),n}},Ml=(t,e,n)=>{if(t&&t[e])try{return t[e](n)}catch(r){Rf(r)}},HW=(t,e)=>Du(t).$instanceValues$.get(e),GW=(t,e,n,r)=>{const i=Du(t),o=t,s=i.$instanceValues$.get(e),a=i.$flags$,u=o;n=RW(n,r.$members$[e][0]);const l=Number.isNaN(s)&&Number.isNaN(n);if(n!==s&&!l){i.$instanceValues$.set(e,n);{if(r.$watchers$&&a&128){const d=r.$watchers$[e];d&&d.map(h=>{try{u[h](n,s,e)}catch(f){Rf(f,o)}})}if((a&18)===2){if(u.componentShouldUpdate&&u.componentShouldUpdate(n,s,e)===!1)return;gE(i,!1)}}}},KW=(t,e,n)=>{var r;const i=t.prototype;if(e.$members$){t.watchers&&(e.$watchers$=t.watchers);const o=Object.entries(e.$members$);o.map(([s,[a]])=>{(a&31||a&32)&&Object.defineProperty(i,s,{get(){return HW(this,s)},set(u){GW(this,s,u,e)},configurable:!0,enumerable:!0})});{const s=new Map;i.attributeChangedCallback=function(a,u,l){ln.jmp(()=>{var c;const d=s.get(a);if(this.hasOwnProperty(d))l=this[d],delete this[d];else{if(i.hasOwnProperty(d)&&typeof this[d]=="number"&&this[d]==l)return;if(d==null){const h=Du(this),f=h==null?void 0:h.$flags$;if(f&&!(f&8)&&f&128&&l!==u){const v=this,y=(c=e.$watchers$)===null||c===void 0?void 0:c[a];y==null||y.forEach(g=>{v[g]!=null&&v[g].call(v,l,u,a)})}return}}this[d]=l===null&&typeof this[d]=="boolean"?!1:l})},t.observedAttributes=Array.from(new Set([...Object.keys((r=e.$watchers$)!==null&&r!==void 0?r:{}),...o.filter(([a,u])=>u[0]&15).map(([a,u])=>{var l;const c=u[1]||a;return s.set(c,a),u[0]&512&&((l=e.$attrsToReflect$)===null||l===void 0||l.push([a,c])),c})]))}}return t},YW=async(t,e,n,r)=>{let i;if(!(e.$flags$&32)&&(e.$flags$|=32,n.$lazyBundleId$,i=t.constructor,customElements.whenDefined(n.$tagName$).then(()=>e.$flags$|=128),i.style)){let s=i.style;typeof s!="string"&&(s=s[e.$modeName$=kW(t)]);const a=PO(n,e.$modeName$);if(!Ig.has(a)){const u=au("registerStyles",n.$tagName$);DW(a,s,!!(n.$flags$&1)),u()}}e.$ancestorComponent$,gE(e,!0)},TA=t=>{},XW=t=>{if(!(ln.$flags$&1)){const e=Du(t),n=e.$cmpMeta$,r=au("connectedCallback",n.$tagName$);e.$flags$&1?(jO(t,e,n.$listeners$),e!=null&&e.$lazyInstance$?TA(e.$lazyInstance$):e!=null&&e.$onReadyPromise$&&e.$onReadyPromise$.then(()=>TA(e.$lazyInstance$))):(e.$flags$|=1,n.$flags$&12&&QW(t),n.$members$&&Object.entries(n.$members$).map(([i,[o]])=>{if(o&31&&t.hasOwnProperty(i)){const s=t[i];delete t[i],t[i]=s}}),YW(t,e,n)),r()}},QW=t=>{const e=t["s-cr"]=bi.createComment("");e["s-cn"]=!0,t.insertBefore(e,t.firstChild)},JW=async t=>{if(!(ln.$flags$&1)){const e=Du(t);e.$rmListeners$&&(e.$rmListeners$.map(n=>n()),e.$rmListeners$=void 0)}},_r=(t,e)=>{const n={$flags$:e[0],$tagName$:e[1]};n.$members$=e[2],n.$listeners$=e[3],n.$watchers$=t.$watchers$,n.$attrsToReflect$=[];const r=t.prototype.connectedCallback,i=t.prototype.disconnectedCallback;return Object.assign(t.prototype,{__registerHost(){nq(this,n)},connectedCallback(){XW(this),r&&r.call(this)},disconnectedCallback(){JW(this),i&&i.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(n.$flags$&16)})}}),t.is=n.$tagName$,KW(t,n)},jO=(t,e,n,r)=>{n&&n.map(([i,o,s])=>{const a=eq(t,i),u=ZW(e,s),l=tq(i);ln.ael(a,o,u,l),(e.$rmListeners$=e.$rmListeners$||[]).push(()=>ln.rel(a,o,u,l))})},ZW=(t,e)=>n=>{try{fs.lazyLoad||t.$hostElement$[e](n)}catch(r){Rf(r)}},eq=(t,e)=>e&4?bi:e&8?Nf:e&16?bi.body:t,tq=t=>iq?{passive:(t&1)!==0,capture:(t&2)!==0}:(t&2)!==0,UO=new WeakMap,Du=t=>UO.get(t),nq=(t,e)=>{const n={$flags$:0,$hostElement$:t,$cmpMeta$:e,$instanceValues$:new Map};return jO(t,n,e.$listeners$),UO.set(t,n)},CA=(t,e)=>e in t,Rf=(t,e)=>(0,console.error)(t,e),Ig=new Map,zO=[],Nf=typeof window<"u"?window:{},bi=Nf.document||{head:{}},Zn=Nf.HTMLElement||class{},ln={$flags$:0,$resourcesUrl$:"",jmp:t=>t(),raf:t=>requestAnimationFrame(t),ael:(t,e,n,r)=>t.addEventListener(e,n,r),rel:(t,e,n,r)=>t.removeEventListener(e,n,r),ce:(t,e)=>new CustomEvent(t,e)},rq=t=>{Object.assign(ln,t)},iq=(()=>{let t=!1;try{bi.addEventListener("e",null,Object.defineProperty({},"passive",{get(){t=!0}}))}catch(e){}return t})(),oq=t=>Promise.resolve(t),sq=(()=>{try{return new CSSStyleSheet,typeof new CSSStyleSheet().replaceSync=="function"}catch(t){}return!1})(),yx=[],WO=[],qO=(t,e)=>n=>{t.push(n),vx||(vx=!0,e&&ln.$flags$&4?aq(wx):ln.raf(wx))},kA=t=>{for(let e=0;e<t.length;e++)try{t[e](performance.now())}catch(n){Rf(n)}t.length=0},wx=()=>{kA(yx),kA(WO),(vx=yx.length>0)&&ln.raf(wx)},aq=t=>oq().then(t),bx=qO(yx,!1),vE=qO(WO,!0);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Vt=typeof window<"u"?window:void 0,wo=typeof document<"u"?document:void 0;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const rc=(t,e)=>{t.componentOnReady?t.componentOnReady().then(n=>e(n)):Pi(()=>e(t))},xx=t=>t.componentOnReady!==void 0,yE=(t,e=[])=>{const n={};return e.forEach(r=>{t.hasAttribute(r)&&(t.getAttribute(r)!==null&&(n[r]=t.getAttribute(r)),t.removeAttribute(r))}),n},uq=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],lq=(t,e)=>{let n=uq;return e&&e.length>0&&(n=n.filter(r=>!e.includes(r))),yE(t,n)},cq=(t,e,n,r)=>{var i;if(typeof window<"u"){const o=window,s=(i=o==null?void 0:o.Ionic)===null||i===void 0?void 0:i.config;if(s){const a=s.get("_ael");if(a)return a(t,e,n,r);if(s._ael)return s._ael(t,e,n,r)}}return t.addEventListener(e,n,r)},dq=(t,e,n,r)=>{var i;if(typeof window<"u"){const o=window,s=(i=o==null?void 0:o.Ionic)===null||i===void 0?void 0:i.config;if(s){const a=s.get("_rel");if(a)return a(t,e,n,r);if(s._rel)return s._rel(t,e,n,r)}}return t.removeEventListener(e,n,r)},Pc=(t,e=t)=>t.shadowRoot||e,Pi=t=>typeof __zone_symbol__requestAnimationFrame=="function"?__zone_symbol__requestAnimationFrame(t):typeof requestAnimationFrame=="function"?requestAnimationFrame(t):setTimeout(t),hq=t=>!!t.shadowRoot&&!!t.attachShadow,fq=t=>{if(t.focus(),t.classList.contains("ion-focusable")){const e=t.closest("ion-app");e&&e.setFocus([t])}},Mce=(t,e,n)=>Math.max(t,Math.min(e,n)),sr=(t,e)=>{if(!t){const n="ASSERT: "+e;console.error(n);debugger;throw new Error(n)}},Vce=t=>t.timeStamp||Date.now(),Fce=t=>{if(t){const e=t.changedTouches;if(e&&e.length>0){const n=e[0];return{x:n.clientX,y:n.clientY}}if(t.pageX!==void 0)return{x:t.pageX,y:t.pageY}}return{x:0,y:0}},HO=(t,e)=>{if(t!=null||(t={}),e!=null||(e={}),t===e)return!0;const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(const r of n)if(!(r in e)||t[r]!==e[r])return!1;return!0};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let vw;const pq=t=>(t.forEach(e=>{for(const n in e)if(e.hasOwnProperty(n)){const r=e[n];if(n==="easing"){const i="animation-timing-function";e[i]=r,delete e[n]}else{const i=mq(n);i!==n&&(e[i]=r,delete e[n])}}}),t),mq=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wE=t=>{if(vw===void 0){const e=t.style.animationName!==void 0,n=t.style.webkitAnimationName!==void 0;vw=!e&&n?"-webkit-":""}return vw},ht=(t,e,n)=>{const r=e.startsWith("animation")?wE(t):"";t.style.setProperty(r+e,n)},di=(t,e)=>{const n=e.startsWith("animation")?wE(t):"";t.style.removeProperty(n+e)},gq=(t,e)=>{let n;const r={passive:!0},i=()=>{n&&n()},o=s=>{t===s.target&&(i(),e(s))};return t&&(t.addEventListener("webkitAnimationEnd",o,r),t.addEventListener("animationend",o,r),n=()=>{t.removeEventListener("webkitAnimationEnd",o,r),t.removeEventListener("animationend",o,r)}),i},vq=(t=[])=>t.map(e=>{const n=e.offset,r=[];for(const i in e)e.hasOwnProperty(i)&&i!=="offset"&&r.push("".concat(i,": ").concat(e[i],";"));return"".concat(n*100,"% { ").concat(r.join(" ")," }")}).join(" "),SA=[],yq=t=>{let e=SA.indexOf(t);return e<0&&(e=SA.push(t)-1),"ion-animation-".concat(e)},wq=t=>{const e=t.getRootNode!==void 0?t.getRootNode():t;return e.head||e},bq=(t,e,n)=>{var r;const i=wq(n),o=wE(n),s=i.querySelector("#"+t);if(s)return s;const a=((r=n.ownerDocument)!==null&&r!==void 0?r:document).createElement("style");return a.id=t,a.textContent="@".concat(o,"keyframes ").concat(t," { ").concat(e," } @").concat(o,"keyframes ").concat(t,"-alt { ").concat(e," }"),i.appendChild(a),a},Bp=(t=[],e)=>{if(e!==void 0){const n=Array.isArray(e)?e:[e];return[...t,...n]}return t},eo=t=>{let e,n,r,i,o,s,a=[],u=[],l=[],c=!1,d,h={},f=[],m=[],v={},y=0,g=!1,w=!1,b,x,_,E,I=!0,C=!1,S=!0,N,R,D=!1;const W=t,F=[],G=[],K=[],j=[],L=[],V=[],M=[],Y=[],X=[],se=[],re=[],xe=typeof AnimationEffect=="function"||Vt!==void 0&&typeof Vt.AnimationEffect=="function",ce=typeof Element=="function"&&typeof Element.prototype.animate=="function"&&xe,_e=100,Ce=()=>re,tt=B=>(L.forEach(ne=>{ne.destroy(B)}),Ue(B),j.length=0,L.length=0,a.length=0,An(),c=!1,S=!0,R),Ue=B=>{zr(),B&&ir()},Ke=()=>{g=!1,w=!1,S=!0,x=void 0,_=void 0,E=void 0,y=0,C=!1,I=!0,D=!1},ze=()=>y!==0&&!D,dt=(B,ne)=>{const de=ne.findIndex(nt=>nt.c===B);de>-1&&ne.splice(de,1)},Ye=(B,ne)=>(K.push({c:B,o:ne}),R),Xe=(B,ne)=>((ne!=null&&ne.oneTimeCallback?G:F).push({c:B,o:ne}),R),An=()=>(F.length=0,G.length=0,R),zr=()=>{if(ce)re.forEach(B=>{B.cancel()}),re.length=0;else{const B=j.slice();Pi(()=>{B.forEach(ne=>{di(ne,"animation-name"),di(ne,"animation-duration"),di(ne,"animation-timing-function"),di(ne,"animation-iteration-count"),di(ne,"animation-delay"),di(ne,"animation-play-state"),di(ne,"animation-fill-mode"),di(ne,"animation-direction")})})}},ir=()=>{V.forEach(B=>{B!=null&&B.parentNode&&B.parentNode.removeChild(B)}),V.length=0},ai=B=>(M.push(B),R),Bn=B=>(Y.push(B),R),or=B=>(X.push(B),R),ui=B=>(se.push(B),R),td=B=>(u=Bp(u,B),R),so=B=>(l=Bp(l,B),R),nd=(B={})=>(h=B,R),Zo=(B=[])=>{for(const ne of B)h[ne]="";return R},li=B=>(f=Bp(f,B),R),F0=B=>(m=Bp(m,B),R),Hu=(B={})=>(v=B,R),pa=(B=[])=>{for(const ne of B)v[ne]="";return R},ao=()=>o!==void 0?o:d?d.getFill():"both",es=()=>x!==void 0?x:s!==void 0?s:d?d.getDirection():"normal",ma=()=>g?"linear":r!==void 0?r:d?d.getEasing():"linear",Ir=()=>w?0:_!==void 0?_:n!==void 0?n:d?d.getDuration():0,Wr=()=>i!==void 0?i:d?d.getIterations():1,Ai=()=>E!==void 0?E:e!==void 0?e:d?d.getDelay():0,rd=()=>a,lU=B=>(s=B,qr(!0),R),cU=B=>(o=B,qr(!0),R),dU=B=>(e=B,qr(!0),R),hU=B=>(r=B,qr(!0),R),fU=B=>(!ce&&B===0&&(B=1),n=B,qr(!0),R),pU=B=>(i=B,qr(!0),R),mU=B=>(d=B,R),gU=B=>{if(B!=null)if(B.nodeType===1)j.push(B);else if(B.length>=0)for(let ne=0;ne<B.length;ne++)j.push(B[ne]);else console.error("Invalid addElement value");return R},vU=B=>{if(B!=null)if(Array.isArray(B))for(const ne of B)ne.parent(R),L.push(ne);else B.parent(R),L.push(B);return R},yU=B=>{const ne=a!==B;return a=B,ne&&wU(a),R},wU=B=>{ce?Ce().forEach(ne=>{const de=ne.effect;if(de.setKeyframes)de.setKeyframes(B);else{const nt=new KeyframeEffect(de.target,B,de.getTiming());ne.effect=nt}}):Ok()},bU=()=>{M.forEach(nt=>nt()),Y.forEach(nt=>nt());const B=u,ne=l,de=h;j.forEach(nt=>{const Gt=nt.classList;B.forEach(Hr=>Gt.add(Hr)),ne.forEach(Hr=>Gt.remove(Hr));for(const Hr in de)de.hasOwnProperty(Hr)&&ht(nt,Hr,de[Hr])})},xU=()=>{$0(),X.forEach(Gt=>Gt()),se.forEach(Gt=>Gt());const B=I?1:0,ne=f,de=m,nt=v;j.forEach(Gt=>{const Hr=Gt.classList;ne.forEach(ga=>Hr.add(ga)),de.forEach(ga=>Hr.remove(ga));for(const ga in nt)nt.hasOwnProperty(ga)&&ht(Gt,ga,nt[ga])}),_=void 0,x=void 0,E=void 0,F.forEach(Gt=>Gt.c(B,R)),G.forEach(Gt=>Gt.c(B,R)),G.length=0,S=!0,I&&(C=!0),I=!0},Gu=()=>{y!==0&&(y--,y===0&&(xU(),d&&d.animationFinish()))},Ok=(B=!0)=>{ir();const ne=pq(a);j.forEach(de=>{if(ne.length>0){const nt=vq(ne);N=t!==void 0?t:yq(nt);const Gt=bq(N,nt,de);V.push(Gt),ht(de,"animation-duration","".concat(Ir(),"ms")),ht(de,"animation-timing-function",ma()),ht(de,"animation-delay","".concat(Ai(),"ms")),ht(de,"animation-fill-mode",ao()),ht(de,"animation-direction",es());const Hr=Wr()===1/0?"infinite":Wr().toString();ht(de,"animation-iteration-count",Hr),ht(de,"animation-play-state","paused"),B&&ht(de,"animation-name","".concat(Gt.id,"-alt")),Pi(()=>{ht(de,"animation-name",Gt.id||null)})}})},_U=()=>{j.forEach(B=>{const ne=B.animate(a,{id:W,delay:Ai(),duration:Ir(),easing:ma(),iterations:Wr(),fill:ao(),direction:es()});ne.pause(),re.push(ne)}),re.length>0&&(re[0].onfinish=()=>{Gu()})},Lk=(B=!0)=>{bU(),a.length>0&&(ce?_U():Ok(B)),c=!0},id=B=>{if(B=Math.min(Math.max(B,0),.9999),ce)re.forEach(ne=>{ne.currentTime=ne.effect.getComputedTiming().delay+Ir()*B,ne.pause()});else{const ne="-".concat(Ir()*B,"ms");j.forEach(de=>{a.length>0&&(ht(de,"animation-delay",ne),ht(de,"animation-play-state","paused"))})}},Mk=B=>{re.forEach(ne=>{ne.effect.updateTiming({delay:Ai(),duration:Ir(),easing:ma(),iterations:Wr(),fill:ao(),direction:es()})}),B!==void 0&&id(B)},Vk=(B=!0,ne)=>{Pi(()=>{j.forEach(de=>{ht(de,"animation-name",N||null),ht(de,"animation-duration","".concat(Ir(),"ms")),ht(de,"animation-timing-function",ma()),ht(de,"animation-delay",ne!==void 0?"-".concat(ne*Ir(),"ms"):"".concat(Ai(),"ms")),ht(de,"animation-fill-mode",ao()||null),ht(de,"animation-direction",es()||null);const nt=Wr()===1/0?"infinite":Wr().toString();ht(de,"animation-iteration-count",nt),B&&ht(de,"animation-name","".concat(N,"-alt")),Pi(()=>{ht(de,"animation-name",N||null)})})})},qr=(B=!1,ne=!0,de)=>(B&&L.forEach(nt=>{nt.update(B,ne,de)}),ce?Mk(de):Vk(ne,de),R),EU=(B=!1,ne)=>(L.forEach(de=>{de.progressStart(B,ne)}),Fk(),g=B,c||Lk(),qr(!1,!0,ne),R),IU=B=>(L.forEach(ne=>{ne.progressStep(B)}),id(B),R),TU=(B,ne,de)=>(g=!1,L.forEach(nt=>{nt.progressEnd(B,ne,de)}),de!==void 0&&(_=de),C=!1,I=!0,B===0?(x=es()==="reverse"?"normal":"reverse",x==="reverse"&&(I=!1),ce?(qr(),id(1-ne)):(E=(1-ne)*Ir()*-1,qr(!1,!1))):B===1&&(ce?(qr(),id(ne)):(E=ne*Ir()*-1,qr(!1,!1))),B!==void 0&&!d&&$k(),R),Fk=()=>{c&&(ce?re.forEach(B=>{B.pause()}):j.forEach(B=>{ht(B,"animation-play-state","paused")}),D=!0)},CU=()=>(L.forEach(B=>{B.pause()}),Fk(),R),kU=()=>{b=void 0,Gu()},$0=()=>{b&&clearTimeout(b)},SU=()=>{if($0(),Pi(()=>{j.forEach(B=>{a.length>0&&ht(B,"animation-play-state","running")})}),a.length===0||j.length===0)Gu();else{const B=Ai()||0,ne=Ir()||0,de=Wr()||1;isFinite(de)&&(b=setTimeout(kU,B+ne*de+_e)),gq(j[0],()=>{$0(),Pi(()=>{AU(),Pi(Gu)})})}},AU=()=>{j.forEach(B=>{di(B,"animation-duration"),di(B,"animation-delay"),di(B,"animation-play-state")})},RU=()=>{re.forEach(B=>{B.play()}),(a.length===0||j.length===0)&&Gu()},NU=()=>{ce?(id(0),Mk()):Vk()},$k=B=>new Promise(ne=>{B!=null&&B.sync&&(w=!0,Xe(()=>w=!1,{oneTimeCallback:!0})),c||Lk(),C&&(NU(),C=!1),S&&(y=L.length+1,S=!1);const de=()=>{dt(nt,G),ne()},nt=()=>{dt(de,K),ne()};Xe(nt,{oneTimeCallback:!0}),Ye(de,{oneTimeCallback:!0}),L.forEach(Gt=>{Gt.play()}),ce?RU():SU(),D=!1}),PU=()=>{L.forEach(B=>{B.stop()}),c&&(zr(),c=!1),Ke(),K.forEach(B=>B.c(0,R)),K.length=0},Bk=(B,ne)=>{const de=a[0];return de!==void 0&&(de.offset===void 0||de.offset===0)?de[B]=ne:a=[{offset:0,[B]:ne},...a],R};return R={parentAnimation:d,elements:j,childAnimations:L,id:W,animationFinish:Gu,from:Bk,to:(B,ne)=>{const de=a[a.length-1];return de!==void 0&&(de.offset===void 0||de.offset===1)?de[B]=ne:a=[...a,{offset:1,[B]:ne}],R},fromTo:(B,ne,de)=>Bk(B,ne).to(B,de),parent:mU,play:$k,pause:CU,stop:PU,destroy:tt,keyframes:yU,addAnimation:vU,addElement:gU,update:qr,fill:cU,direction:lU,iterations:pU,duration:fU,easing:hU,delay:dU,getWebAnimations:Ce,getKeyframes:rd,getFill:ao,getDirection:es,getDelay:Ai,getIterations:Wr,getEasing:ma,getDuration:Ir,afterAddRead:or,afterAddWrite:ui,afterClearStyles:pa,afterStyles:Hu,afterRemoveClass:F0,afterAddClass:li,beforeAddRead:ai,beforeAddWrite:Bn,beforeClearStyles:Zo,beforeStyles:nd,beforeRemoveClass:so,beforeAddClass:td,onFinish:Xe,isRunning:ze,progressStart:EU,progressStep:IU,progressEnd:TU}},xq="ionViewWillEnter",_q="ionViewDidEnter",GO="ionViewWillLeave",KO="ionViewDidLeave",yw="ionViewWillUnload",Eq=()=>Di(()=>import("./ios.transition-BMr61T5-.js"),__vite__mapDeps([])),Iq=()=>Di(()=>import("./md.transition-BGN9BHP7.js"),__vite__mapDeps([])),YO=t=>new Promise((e,n)=>{vE(()=>{Tq(t),Cq(t).then(r=>{r.animation&&r.animation.destroy(),AA(t),e(r)},r=>{AA(t),n(r)})})}),Tq=t=>{const e=t.enteringEl,n=t.leavingEl;Pq(e,n,t.direction),t.showGoBack?e.classList.add("can-go-back"):e.classList.remove("can-go-back"),Ex(e,!1),e.style.setProperty("pointer-events","none"),n&&(Ex(n,!1),n.style.setProperty("pointer-events","none"))},Cq=async t=>{const e=await kq(t);return e&&yW.isBrowser?Sq(e,t):Aq(t)},AA=t=>{const e=t.enteringEl,n=t.leavingEl;e.classList.remove("ion-page-invisible"),e.style.removeProperty("pointer-events"),n!==void 0&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events"))},kq=async t=>!t.leavingEl||!t.animated||t.duration===0?void 0:t.animationBuilder?t.animationBuilder:t.mode==="ios"?(await Eq()).iosTransitionAnimation:(await Iq()).mdTransitionAnimation,Sq=async(t,e)=>{await XO(e,!0);const n=t(e.baseEl,e);QO(e.enteringEl,e.leavingEl);const r=await Nq(n,e);return e.progressCallback&&e.progressCallback(void 0),r&&JO(e.enteringEl,e.leavingEl),{hasCompleted:r,animation:n}},Aq=async t=>{const e=t.enteringEl,n=t.leavingEl;return await XO(t,!1),QO(e,n),JO(e,n),{hasCompleted:!0}},XO=async(t,e)=>{(t.deepWait!==void 0?t.deepWait:e)&&await Promise.all([_x(t.enteringEl),_x(t.leavingEl)]),await Rq(t.viewIsReady,t.enteringEl)},Rq=async(t,e)=>{t&&await t(e)},Nq=(t,e)=>{const n=e.progressCallback,r=new Promise(i=>{t.onFinish(o=>i(o===1))});return n?(t.progressStart(!0),n(t)):t.play(),r},QO=(t,e)=>{po(e,GO),po(t,xq)},JO=(t,e)=>{po(t,_q),po(e,KO)},po=(t,e)=>{if(t){const n=new CustomEvent(e,{bubbles:!1,cancelable:!1});t.dispatchEvent(n)}},_x=async t=>{const e=t;if(e){if(e.componentOnReady!=null){if(await e.componentOnReady()!=null)return}else if(e.__registerHost!=null){await new Promise(r=>Pi(r));return}await Promise.all(Array.from(e.children).map(_x))}},Ex=(t,e)=>{e?(t.setAttribute("aria-hidden","true"),t.classList.add("ion-page-hidden")):(t.hidden=!1,t.removeAttribute("aria-hidden"),t.classList.remove("ion-page-hidden"))},Pq=(t,e,n)=>{t!==void 0&&(t.style.zIndex=n==="back"?"99":"101"),e!==void 0&&(e.style.zIndex="100")},$ce=t=>{if(t.classList.contains("ion-page"))return t;const e=t.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return e||t};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Tg=(t,e,n,r,i)=>Oq(t[1],e[1],n[1],r[1],i).map(o=>Dq(t[0],e[0],n[0],r[0],o)),Dq=(t,e,n,r,i)=>{const o=3*e*Math.pow(i-1,2),s=-3*n*i+3*n+r*i,a=t*Math.pow(i-1,3);return i*(o+i*s)-a},Oq=(t,e,n,r,i)=>(t-=i,e-=i,n-=i,r-=i,Mq(r-3*n+3*e-t,3*n-6*e+3*t,3*e-3*t,t).filter(s=>s>=0&&s<=1)),Lq=(t,e,n)=>{const r=e*e-4*t*n;return r<0?[]:[(-e+Math.sqrt(r))/(2*t),(-e-Math.sqrt(r))/(2*t)]},Mq=(t,e,n,r)=>{if(t===0)return Lq(e,n,r);e/=t,n/=t,r/=t;const i=(3*n-e*e)/3,o=(2*e*e*e-9*e*n+27*r)/27;if(i===0)return[Math.pow(-o,1/3)];if(o===0)return[Math.sqrt(-i),-Math.sqrt(-i)];const s=Math.pow(o/2,2)+Math.pow(i/3,3);if(s===0)return[Math.pow(o/2,1/2)-e/3];if(s>0)return[Math.pow(-(o/2)+Math.sqrt(s),1/3)-Math.pow(o/2+Math.sqrt(s),1/3)-e/3];const a=Math.sqrt(Math.pow(-(i/3),3)),u=Math.acos(-(o/(2*Math.sqrt(Math.pow(-(i/3),3))))),l=2*Math.pow(a,1/3);return[l*Math.cos(u/3)-e/3,l*Math.cos((u+2*Math.PI)/3)-e/3,l*Math.cos((u+4*Math.PI)/3)-e/3]};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class Vq{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(e){var n;return new Fq(this,this.newID(),e.name,(n=e.priority)!==null&&n!==void 0?n:0,!!e.disableScroll)}createBlocker(e={}){return new $q(this,this.newID(),e.disable,!!e.disableScroll)}start(e,n,r){return this.canStart(e)?(this.requestedStart.set(n,r),!0):(this.requestedStart.delete(n),!1)}capture(e,n,r){if(!this.start(e,n,r))return!1;const i=this.requestedStart;let o=-1e4;if(i.forEach(s=>{o=Math.max(o,s)}),o===r){this.capturedId=n,i.clear();const s=new CustomEvent("ionGestureCaptured",{detail:{gestureName:e}});return document.dispatchEvent(s),!0}return i.delete(n),!1}release(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)}disableGesture(e,n){let r=this.disabledGestures.get(e);r===void 0&&(r=new Set,this.disabledGestures.set(e,r)),r.add(n)}enableGesture(e,n){const r=this.disabledGestures.get(e);r!==void 0&&r.delete(n)}disableScroll(e){this.disabledScroll.add(e),this.disabledScroll.size===1&&document.body.classList.add(RA)}enableScroll(e){this.disabledScroll.delete(e),this.disabledScroll.size===0&&document.body.classList.remove(RA)}canStart(e){return!(this.capturedId!==void 0||this.isDisabled(e))}isCaptured(){return this.capturedId!==void 0}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(e){const n=this.disabledGestures.get(e);return!!(n&&n.size>0)}newID(){return this.gestureId++,this.gestureId}}class Fq{constructor(e,n,r,i,o){this.id=n,this.name=r,this.disableScroll=o,this.priority=i*1e6+n,this.ctrl=e}canStart(){return this.ctrl?this.ctrl.canStart(this.name):!1}start(){return this.ctrl?this.ctrl.start(this.name,this.id,this.priority):!1}capture(){if(!this.ctrl)return!1;const e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class $q{constructor(e,n,r,i){this.id=n,this.disable=r,this.disableScroll=i,this.ctrl=e}block(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.disableGesture(e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.enableGesture(e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const RA="backdrop-no-scroll",Bq=new Vq;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const va=(t,e,n,r)=>{const i=jq(t)?{capture:!!r.capture,passive:!!r.passive}:!!r.capture;let o,s;return t.__zone_symbol__addEventListener?(o="__zone_symbol__addEventListener",s="__zone_symbol__removeEventListener"):(o="addEventListener",s="removeEventListener"),t[o](e,n,i),()=>{t[s](e,n,i)}},jq=t=>{if(jp===void 0)try{const e=Object.defineProperty({},"passive",{get:()=>{jp=!0}});t.addEventListener("optsTest",()=>{},e)}catch(e){jp=!1}return!!jp};let jp;const Uq=2e3,zq=(t,e,n,r,i)=>{let o,s,a,u,l,c,d,h=0;const f=E=>{h=Date.now()+Uq,e(E)&&(!s&&n&&(s=va(t,"touchmove",n,i)),a||(a=va(E.target,"touchend",v,i)),u||(u=va(E.target,"touchcancel",v,i)))},m=E=>{h>Date.now()||e(E)&&(!c&&n&&(c=va(NA(t),"mousemove",n,i)),d||(d=va(NA(t),"mouseup",y,i)))},v=E=>{g(),r&&r(E)},y=E=>{w(),r&&r(E)},g=()=>{s&&s(),a&&a(),u&&u(),s=a=u=void 0},w=()=>{c&&c(),d&&d(),c=d=void 0},b=()=>{g(),w()},x=(E=!0)=>{E?(o||(o=va(t,"touchstart",f,i)),l||(l=va(t,"mousedown",m,i))):(o&&o(),l&&l(),o=l=void 0,b())};return{enable:x,stop:b,destroy:()=>{x(!1),r=n=e=void 0}}},NA=t=>t instanceof Document?t:t.ownerDocument,Wq=(t,e,n)=>{const r=n*(Math.PI/180),i=t==="x",o=Math.cos(r),s=e*e;let a=0,u=0,l=!1,c=0;return{start(d,h){a=d,u=h,c=0,l=!0},detect(d,h){if(!l)return!1;const f=d-a,m=h-u,v=f*f+m*m;if(v<s)return!1;const y=Math.sqrt(v),g=(i?f:m)/y;return g>o?c=1:g<-o?c=-1:c=0,l=!1,!0},isGesture(){return c!==0},getDirection(){return c}}},qq=t=>{let e=!1,n=!1,r=!0,i=!1;const o=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},t),s=o.canStart,a=o.onWillStart,u=o.onStart,l=o.onEnd,c=o.notCaptured,d=o.onMove,h=o.threshold,f=o.passive,m=o.blurOnStart,v={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},y=Wq(o.direction,o.threshold,o.maxAngle),g=Bq.createGesture({name:t.gestureName,priority:t.gesturePriority,disableScroll:t.disableScroll}),w=D=>{const W=eL(D);return n||!r||(ZO(D,v),v.startX=v.currentX,v.startY=v.currentY,v.startTime=v.currentTime=W,v.velocityX=v.velocityY=v.deltaX=v.deltaY=0,v.event=D,s&&s(v)===!1)||(g.release(),!g.start())?!1:(n=!0,h===0?_():(y.start(v.startX,v.startY),!0))},b=D=>{if(e){!i&&r&&(i=!0,ww(v,D),requestAnimationFrame(x));return}ww(v,D),y.detect(v.currentX,v.currentY)&&(!y.isGesture()||!_())&&R()},x=()=>{e&&(i=!1,d&&d(v))},_=()=>g.capture()?(e=!0,r=!1,v.startX=v.currentX,v.startY=v.currentY,v.startTime=v.currentTime,a?a(v).then(I):I(),!0):!1,E=()=>{if(typeof document<"u"){const D=document.activeElement;D!=null&&D.blur&&D.blur()}},I=()=>{m&&E(),u&&u(v),r=!0},C=()=>{e=!1,n=!1,i=!1,r=!0,g.release()},S=D=>{const W=e,F=r;if(C(),!!F){if(ww(v,D),W){l&&l(v);return}c&&c(v)}},N=zq(o.el,w,b,S,{capture:!1,passive:f}),R=()=>{C(),N.stop(),c&&c(v)};return{enable(D=!0){D||(e&&S(void 0),C()),N.enable(D)},destroy(){g.destroy(),N.destroy()}}},ww=(t,e)=>{if(!e)return;const n=t.currentX,r=t.currentY,i=t.currentTime;ZO(e,t);const o=t.currentX,s=t.currentY,u=(t.currentTime=eL(e))-i;if(u>0&&u<100){const l=(o-n)/u,c=(s-r)/u;t.velocityX=l*.7+t.velocityX*.3,t.velocityY=c*.7+t.velocityY*.3}t.deltaX=o-t.startX,t.deltaY=s-t.startY,t.event=e},ZO=(t,e)=>{let n=0,r=0;if(t){const i=t.changedTouches;if(i&&i.length>0){const o=i[0];n=o.clientX,r=o.clientY}else t.pageX!==void 0&&(n=t.pageX,r=t.pageY)}e.currentX=n,e.currentY=r},eL=t=>t.timeStamp||Date.now();/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */class Hq{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,n){const r=this.m.get(e);return r!==void 0?r:n}getBoolean(e,n=!1){const r=this.m.get(e);return r===void 0?n:typeof r=="string"?r==="true":!!r}getNumber(e,n){const r=parseFloat(this.m.get(e));return isNaN(r)?n!==void 0?n:NaN:r}set(e,n){this.m.set(e,n)}}const Qe=new Hq,Gq=t=>{try{const e=t.sessionStorage.getItem(tL);return e!==null?JSON.parse(e):{}}catch(e){return{}}},Kq=(t,e)=>{try{t.sessionStorage.setItem(tL,JSON.stringify(e))}catch(n){return}},Yq=t=>{const e={};return t.location.search.slice(1).split("&").map(n=>n.split("=")).map(([n,r])=>[decodeURIComponent(n),decodeURIComponent(r)]).filter(([n])=>Xq(n,PA)).map(([n,r])=>[n.slice(PA.length),r]).forEach(([n,r])=>{e[n]=r}),e},Xq=(t,e)=>t.substr(0,e.length)===e,PA="ionic:",tL="ionic-persist-config",Qq=t=>nL(t),ws=(t,e)=>(typeof t=="string"&&(e=t,t=void 0),Qq(t).includes(e)),nL=(t=window)=>{if(typeof t>"u")return[];t.Ionic=t.Ionic||{};let e=t.Ionic.platforms;return e==null&&(e=t.Ionic.platforms=Jq(t),e.forEach(n=>t.document.documentElement.classList.add("plt-".concat(n)))),e},Jq=t=>{const e=Qe.get("platform");return Object.keys(DA).filter(n=>{const r=e==null?void 0:e[n];return typeof r=="function"?r(t):DA[n](t)})},Zq=t=>ny(t)&&!iL(t),bE=t=>!!(uu(t,/iPad/i)||uu(t,/Macintosh/i)&&ny(t)),eH=t=>uu(t,/iPhone/i),tH=t=>uu(t,/iPhone|iPod/i)||bE(t),rL=t=>uu(t,/android|sink/i),nH=t=>rL(t)&&!uu(t,/mobile/i),rH=t=>{const e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return r>390&&r<520&&i>620&&i<800},iH=t=>{const e=t.innerWidth,n=t.innerHeight,r=Math.min(e,n),i=Math.max(e,n);return bE(t)||nH(t)||r>460&&r<820&&i>780&&i<1400},ny=t=>uH(t,"(any-pointer:coarse)"),oH=t=>!ny(t),iL=t=>oL(t)||sL(t),oL=t=>!!(t.cordova||t.phonegap||t.PhoneGap),sL=t=>{const e=t.Capacitor;return!!(e!=null&&e.isNative)},sH=t=>uu(t,/electron/i),aH=t=>{var e;return!!(!((e=t.matchMedia)===null||e===void 0)&&e.call(t,"(display-mode: standalone)").matches||t.navigator.standalone)},uu=(t,e)=>e.test(t.navigator.userAgent),uH=(t,e)=>{var n;return(n=t.matchMedia)===null||n===void 0?void 0:n.call(t,e).matches},DA={ipad:bE,iphone:eH,ios:tH,android:rL,phablet:rH,tablet:iH,cordova:oL,capacitor:sL,electron:sH,pwa:aH,mobile:ny,mobileweb:Zq,desktop:oH,hybrid:iL};let ol;const on=t=>t&&AW(t)||ol,lH=(t={})=>{if(typeof window>"u")return;const e=window.document,n=window,r=n.Ionic=n.Ionic||{},i={};t._ael&&(i.ael=t._ael),t._rel&&(i.rel=t._rel),t._ce&&(i.ce=t._ce),rq(i);const o=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},Gq(n)),{persistConfig:!1}),r.config),Yq(n)),t);Qe.reset(o),Qe.getBoolean("persistConfig")&&Kq(n,o),nL(n),r.config=Qe,r.mode=ol=Qe.get("mode",e.documentElement.getAttribute("mode")||(ws(n,"ios")?"ios":"md")),Qe.set("mode",ol),e.documentElement.setAttribute("mode",ol),e.documentElement.classList.add(ol),Qe.getBoolean("_testing")&&Qe.set("animated",!1);const s=u=>{var l;return(l=u.tagName)===null||l===void 0?void 0:l.startsWith("ION-")},a=u=>["ios","md"].includes(u);SW(u=>{for(;u;){const l=u.mode||u.getAttribute("mode");if(l){if(a(l))return l;s(u)&&console.warn('Invalid ionic mode: "'+l+'", expected: "ios" or "md"')}u=u.parentElement}return ol})};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const cH=t=>{try{if(t instanceof pH)return t.value;if(!dH()||typeof t!="string"||t==="")return t;if(t.includes("onload="))return"";const e=document.createDocumentFragment(),n=document.createElement("div");e.appendChild(n),n.innerHTML=t,fH.forEach(s=>{const a=e.querySelectorAll(s);for(let u=a.length-1;u>=0;u--){const l=a[u];l.parentNode?l.parentNode.removeChild(l):e.removeChild(l);const c=Tx(l);for(let d=0;d<c.length;d++)Ix(c[d])}});const r=Tx(e);for(let s=0;s<r.length;s++)Ix(r[s]);const i=document.createElement("div");i.appendChild(e);const o=i.querySelector("div");return o!==null?o.innerHTML:i.innerHTML}catch(e){return console.error(e),""}},Ix=t=>{if(t.nodeType&&t.nodeType!==1)return;if(typeof NamedNodeMap<"u"&&!(t.attributes instanceof NamedNodeMap)){t.remove();return}for(let n=t.attributes.length-1;n>=0;n--){const r=t.attributes.item(n),i=r.name;if(!hH.includes(i.toLowerCase())){t.removeAttribute(i);continue}const o=r.value,s=t[i];(o!=null&&o.toLowerCase().includes("javascript:")||s!=null&&s.toLowerCase().includes("javascript:"))&&t.removeAttribute(i)}const e=Tx(t);for(let n=0;n<e.length;n++)Ix(e[n])},Tx=t=>t.children!=null?t.children:t.childNodes,dH=()=>{var t;const e=window,n=(t=e==null?void 0:e.Ionic)===null||t===void 0?void 0:t.config;return n?n.get?n.get("sanitizerEnabled",!0):n.sanitizerEnabled===!0||n.sanitizerEnabled===void 0:!0},hH=["class","id","href","src","name","slot"],fH=["script","style","iframe","meta","link","object","embed"];class pH{constructor(e){this.value=e}}const mH=!1;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Sm=(t,e)=>e.closest(t)!==null,Pf=(t,e)=>typeof t=="string"&&t.length>0?Object.assign({"ion-color":!0,["ion-color-".concat(t)]:!0},e):e,gH=t=>t!==void 0?(Array.isArray(t)?t:t.split(" ")).filter(n=>n!=null).map(n=>n.trim()).filter(n=>n!==""):[],aL=t=>{const e={};return gH(t).forEach(n=>e[n]=!0),e},vH=/^[a-z][a-z0-9+\-.]*:/,uL=async(t,e,n,r)=>{if(t!=null&&t[0]!=="#"&&!vH.test(t)){const i=document.querySelector("ion-router");if(i)return e!=null&&e.preventDefault(),i.push(t,n,r)}return!1};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ph=()=>Qe.get("experimentalCloseWatcher",!1)&&Vt!==void 0&&"CloseWatcher"in Vt,yH=()=>{document.addEventListener("backbutton",()=>{})},wH=()=>{const t=document;let e=!1;const n=()=>{if(e)return;let r=0,i=[];const o=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(u,l){i.push({priority:u,handler:l,id:r++})}}});t.dispatchEvent(o);const s=async u=>{try{if(u!=null&&u.handler){const l=u.handler(a);l!=null&&await l}}catch(l){console.error(l)}},a=()=>{if(i.length>0){let u={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};i.forEach(l=>{l.priority>=u.priority&&(u=l)}),e=!0,i=i.filter(l=>l.id!==u.id),s(u).then(()=>e=!1)}};a()};if(Ph()){let r;const i=()=>{r==null||r.destroy(),r=new Vt.CloseWatcher,r.onclose=()=>{n(),i()}};i()}else t.addEventListener("backbutton",n)},lL=100,bH=99,xH=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY:bH,OVERLAY_BACK_BUTTON_PRIORITY:lL,blockHardwareBackButton:yH,shoudUseCloseWatcher:Ph,startHardwareBackButton:wH},Symbol.toStringTag,{value:"Module"}));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const Ui=(t,...e)=>console.warn("[Ionic Warning]: ".concat(t),...e);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const cL=async(t,e,n,r,i,o)=>{var s;if(t)return t.attachViewToDom(e,n,i,r);if(!o&&typeof n!="string"&&!(n instanceof HTMLElement))throw new Error("framework delegate is missing");const a=typeof n=="string"?(s=e.ownerDocument)===null||s===void 0?void 0:s.createElement(n):n;return r&&r.forEach(u=>a.classList.add(u)),i&&Object.assign(a,i),e.appendChild(a),await new Promise(u=>rc(a,u)),a},_H=(t,e)=>{if(e){if(t){const n=e.parentElement;return t.removeViewFromDom(n,e)}e.remove()}return Promise.resolve()},EH=()=>{let t,e;return{attachViewToDom:async(i,o,s={},a=[])=>{var u,l;t=i;let c;if(o){const h=typeof o=="string"?(u=t.ownerDocument)===null||u===void 0?void 0:u.createElement(o):o;a.forEach(f=>h.classList.add(f)),Object.assign(h,s),t.appendChild(h),c=h,await new Promise(f=>rc(h,f))}else if(t.children.length>0&&(t.tagName==="ION-MODAL"||t.tagName==="ION-POPOVER")&&!(c=t.children[0]).classList.contains("ion-delegate-host")){const f=(l=t.ownerDocument)===null||l===void 0?void 0:l.createElement("div");f.classList.add("ion-delegate-host"),a.forEach(m=>f.classList.add(m)),f.append(...t.children),t.appendChild(f),c=f}const d=document.querySelector("ion-app")||document.body;return e=document.createComment("ionic teleport"),t.parentNode.insertBefore(e,t),d.appendChild(t),c!=null?c:t},removeViewFromDom:()=>(t&&e&&(e.parentNode.insertBefore(t,e),e.remove()),Promise.resolve())}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let Cx=0,IH=0;const Cg=new WeakMap,TH=t=>({create(e){return AH(t,e)},dismiss(e,n,r){return DH(document,e,n,t,r)},async getTop(){return ic(document,t)}}),CH=TH("ion-toast"),kH=t=>{typeof document<"u"&&PH(document);const e=Cx++;t.overlayIndex=e},SH=t=>(t.hasAttribute("id")||(t.id="ion-overlay-".concat(++IH)),t.id),AH=(t,e)=>typeof window<"u"&&typeof window.customElements<"u"?window.customElements.whenDefined(t).then(()=>{const n=document.createElement(t);return n.classList.add("overlay-hidden"),Object.assign(n,Object.assign(Object.assign({},e),{hasController:!0})),hL(document).appendChild(n),new Promise(r=>rc(n,r))}):Promise.resolve(),ry='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',RH=t=>t.classList.contains("overlay-hidden"),OA=(t,e)=>{const n=t.querySelector(ry);kg(n,e)},LA=(t,e)=>{const n=Array.from(t.querySelectorAll(ry)),r=n.length>0?n[n.length-1]:null;kg(r,e)},kg=(t,e)=>{let n=t;const r=t==null?void 0:t.shadowRoot;r&&(n=r.querySelector(ry)||t),n?fq(n):e.focus()},NH=(t,e)=>{const n=ic(e,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),r=t.target;if(!n||!r||n.classList.contains("ion-disable-focus-trap"))return;const i=()=>{if(n===r)n.lastFocus=void 0;else if(r.tagName==="ION-TOAST")kg(n.lastFocus,n);else{const s=Pc(n);if(!s.contains(r))return;const a=s.querySelector(".ion-overlay-wrapper");if(!a)return;if(a.contains(r)||r===s.querySelector("ion-backdrop"))n.lastFocus=r;else{const u=n.lastFocus;OA(a,n),u===e.activeElement&&LA(a,n),n.lastFocus=e.activeElement}}},o=()=>{if(n.contains(r))n.lastFocus=r;else if(r.tagName==="ION-TOAST")kg(n.lastFocus,n);else{const s=n.lastFocus;OA(n,n),s===e.activeElement&&LA(n,n),n.lastFocus=e.activeElement}};n.shadowRoot?o():i()},PH=t=>{Cx===0&&(Cx=1,t.addEventListener("focus",e=>{NH(e,t)},!0),t.addEventListener("ionBackButton",e=>{const n=ic(t);n!=null&&n.backdropDismiss&&e.detail.register(lL,()=>{n.dismiss(void 0,Sx)})}),Ph()||t.addEventListener("keydown",e=>{if(e.key==="Escape"){const n=ic(t);n!=null&&n.backdropDismiss&&n.dismiss(void 0,Sx)}}))},DH=(t,e,n,r,i)=>{const o=ic(t,r,i);return o?o.dismiss(e,n):Promise.reject("overlay does not exist")},OH=(t,e)=>(e===void 0&&(e="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(t.querySelectorAll(e)).filter(n=>n.overlayIndex>0)),xE=(t,e)=>OH(t,e).filter(n=>!RH(n)),ic=(t,e,n)=>{const r=xE(t,e);return n===void 0?r[r.length-1]:r.find(i=>i.id===n)},dL=(t=!1)=>{const n=hL(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");n&&(t?n.setAttribute("aria-hidden","true"):n.removeAttribute("aria-hidden"))},LH=async(t,e,n,r,i)=>{var o,s;if(t.presented)return;dL(!0),wo!==void 0&&xE(wo).forEach(d=>d.setAttribute("aria-hidden","true")),t.presented=!0,t.willPresent.emit(),(o=t.willPresentShorthand)===null||o===void 0||o.emit();const a=on(t),u=t.enterAnimation?t.enterAnimation:Qe.get(e,a==="ios"?n:r);await fL(t,u,t.el,i)&&(t.didPresent.emit(),(s=t.didPresentShorthand)===null||s===void 0||s.emit()),t.el.tagName!=="ION-TOAST"&&MH(t.el),t.keyboardClose&&(document.activeElement===null||!t.el.contains(document.activeElement))&&t.el.focus(),t.el.removeAttribute("aria-hidden")},MH=async t=>{let e=document.activeElement;if(!e)return;const n=e==null?void 0:e.shadowRoot;n&&(e=n.querySelector(ry)||e),await t.onDidDismiss(),(document.activeElement===null||document.activeElement===document.body)&&e.focus()},VH=async(t,e,n,r,i,o,s)=>{var a,u,l;if(!t.presented)return!1;wo!==void 0&&xE(wo).length===1&&dL(!1),t.presented=!1;try{t.el.style.setProperty("pointer-events","none"),t.willDismiss.emit({data:e,role:n}),(a=t.willDismissShorthand)===null||a===void 0||a.emit({data:e,role:n});const c=on(t),d=t.leaveAnimation?t.leaveAnimation:Qe.get(r,c==="ios"?i:o);n!==pL&&await fL(t,d,t.el,s),t.didDismiss.emit({data:e,role:n}),(u=t.didDismissShorthand)===null||u===void 0||u.emit({data:e,role:n}),(Cg.get(t)||[]).forEach(f=>f.destroy()),Cg.delete(t),t.el.classList.add("overlay-hidden"),t.el.style.removeProperty("pointer-events"),t.el.lastFocus!==void 0&&(t.el.lastFocus=void 0)}catch(c){console.error(c)}return t.el.remove(),wo!==void 0&&((l=ic(wo))===null||l===void 0||l.removeAttribute("aria-hidden")),!0},hL=t=>t.querySelector("ion-app")||t.body,fL=async(t,e,n,r)=>{n.classList.remove("overlay-hidden");const i=t.el,o=e(i,r);(!t.animated||!Qe.getBoolean("animated",!0))&&o.duration(0),t.keyboardClose&&o.beforeAddWrite(()=>{const a=n.ownerDocument.activeElement;a!=null&&a.matches("input,ion-input, ion-textarea")&&a.blur()});const s=Cg.get(t)||[];return Cg.set(t,[...s,o]),await o.play(),!0},MA=(t,e)=>{let n;const r=new Promise(i=>n=i);return FH(t,e,i=>{n(i.detail)}),r},FH=(t,e,n)=>{const r=i=>{dq(t,e,r),n(i)};cq(t,e,r)},kx=t=>t==="cancel"||t===Sx,$H=t=>t(),BH=(t,e)=>{if(typeof t=="function")return Qe.get("_zoneGate",$H)(()=>{try{return t(e)}catch(r){throw r}})},Sx="backdrop",pL="gesture",jH=39,UH=t=>{let e=!1,n;const r=EH(),i=(a=!1)=>{if(n&&!a)return{delegate:n,inline:e};const{el:u,hasController:l,delegate:c}=t;return e=u.parentNode!==null&&!l,n=e?c||r:c,{inline:e,delegate:n}};return{attachViewToDom:async a=>{const{delegate:u}=i(!0);if(u)return await u.attachViewToDom(t.el,a);const{hasController:l}=t;if(l&&a!==void 0)throw new Error("framework delegate is missing");return null},removeViewFromDom:()=>{const{delegate:a}=i();a&&t.el!==void 0&&a.removeViewFromDom(t.el.parentElement,t.el)}}},zH=()=>{let t;const e=()=>{t&&(t(),t=void 0)};return{addClickListener:(r,i)=>{e();const o=i!==void 0?document.getElementById(i):null;if(!o){Ui('A trigger element with the ID "'.concat(i,'" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.'),r);return}t=((a,u)=>{const l=()=>{u.present()};return a.addEventListener("click",l),()=>{a.removeEventListener("click",l)}})(o,r)},removeClickListener:e}};function Jt(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */let bw;const WH=()=>{if(typeof window>"u")return new Map;if(!bw){const t=window;t.Ionicons=t.Ionicons||{},bw=t.Ionicons.map=t.Ionicons.map||new Map}return bw},qH=t=>{let e=xw(t.src);return e||(e=mL(t.name,t.icon,t.mode,t.ios,t.md),e?HH(e,t):t.icon&&(e=xw(t.icon),e||(e=xw(t.icon[t.mode]),e))?e:null)},HH=(t,e)=>{const n=WH().get(t);if(n)return n;try{return NO("svg/".concat(t,".svg"))}catch(r){console.warn('[Ionicons Warning]: Could not load icon with name "'.concat(t,'". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.'),e)}},mL=(t,e,n,r,i)=>(n=(n&&Up(n))==="ios"?"ios":"md",r&&n==="ios"?t=Up(r):i&&n==="md"?t=Up(i):(!t&&e&&!gL(e)&&(t=e),Sg(t)&&(t=Up(t))),!Sg(t)||t.trim()===""||t.replace(/[a-z]|-|\d/gi,"")!==""?null:t),xw=t=>Sg(t)&&(t=t.trim(),gL(t))?t:null,gL=t=>t.length>0&&/(\/|\.)/.test(t),Sg=t=>typeof t=="string",Up=t=>t.toLowerCase(),GH=(t,e=[])=>{const n={};return e.forEach(r=>{t.hasAttribute(r)&&(t.getAttribute(r)!==null&&(n[r]=t.getAttribute(r)),t.removeAttribute(r))}),n},KH=t=>t&&t.dir!==""?t.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",YH=t=>{const e=document.createElement("div");e.innerHTML=t;for(let r=e.childNodes.length-1;r>=0;r--)e.childNodes[r].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[r]);const n=e.firstElementChild;if(n&&n.nodeName.toLowerCase()==="svg"){const r=n.getAttribute("class")||"";if(n.setAttribute("class",(r+" s-ion-icon").trim()),vL(n))return e.innerHTML}return""},vL=t=>{if(t.nodeType===1){if(t.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;if(Sg(n)&&n.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<t.childNodes.length;e++)if(!vL(t.childNodes[e]))return!1}return!0},XH=t=>t.startsWith("data:image/svg+xml"),QH=t=>t.indexOf(";utf8,")!==-1,La=new Map,VA=new Map;let _w;const JH=(t,e)=>{let n=VA.get(t);if(!n)if(typeof fetch<"u"&&typeof document<"u")if(XH(t)&&QH(t)){_w||(_w=new DOMParser);const i=_w.parseFromString(t,"text/html").querySelector("svg");return i&&La.set(t,i.outerHTML),Promise.resolve()}else n=fetch(t).then(r=>{if(r.ok)return r.text().then(i=>{i&&e!==!1&&(i=YH(i)),La.set(t,i||"")});La.set(t,"")}),VA.set(t,n);else return La.set(t,""),Promise.resolve();return n},ZH=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",e9=ZH,t9=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.svgContent=void 0,this.isVisible=!1,this.mode=n9(),this.color=void 0,this.ios=void 0,this.md=void 0,this.flipRtl=void 0,this.name=void 0,this.src=void 0,this.icon=void 0,this.size=void 0,this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=GH(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,n,r){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const i=this.io=new window.IntersectionObserver(o=>{o[0].isIntersecting&&(i.disconnect(),this.io=void 0,r())},{rootMargin:n});i.observe(e)}else r()}loadIcon(){if(this.isVisible){const e=qH(this);e&&(La.has(e)?this.svgContent=La.get(e):JH(e,this.sanitize).then(()=>this.svgContent=La.get(e)),this.didLoadIcon=!0)}this.iconName=mL(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:n,inheritedAttributes:r,el:i}=this,o=this.mode||"md",s=n?(n.includes("arrow")||n.includes("chevron"))&&e!==!1:!1,a=e||s;return Ee(Ur,Object.assign({role:"img",class:Object.assign(Object.assign({[o]:!0},r9(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":a,"icon-rtl":a&&KH(i)})},r),this.svgContent?Ee("div",{class:"icon-inner",innerHTML:this.svgContent}):Ee("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return e9}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]},void 0,{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}]),n9=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",r9=t=>t?{"ion-color":!0,["ion-color-".concat(t)]:!0}:null;function i9(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,t9);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const o9="ion-card-content{display:block;position:relative}.card-content-ios{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:20px;font-size:1rem;line-height:1.4}.card-content-ios h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.5rem;font-weight:normal}.card-content-ios h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:1rem;font-weight:normal}.card-content-ios h3,.card-content-ios h4,.card-content-ios h5,.card-content-ios h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:0.875rem;font-weight:normal}.card-content-ios p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem}ion-card-header+.card-content-ios{padding-top:0}",s9=o9,a9="ion-card-content{display:block;position:relative}.card-content-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:13px;padding-bottom:13px;font-size:0.875rem;line-height:1.5}.card-content-md h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.5rem;font-weight:normal}.card-content-md h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:1rem;font-weight:normal}.card-content-md h3,.card-content-md h4,.card-content-md h5,.card-content-md h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:0.875rem;font-weight:normal}.card-content-md p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem;font-weight:normal;line-height:1.5}ion-card-header+.card-content-md{padding-top:0}",u9=a9,l9=_r(class extends Zn{constructor(){super(),this.__registerHost()}render(){const e=on(this);return Ee(Ur,{key:"d4da147bb0b0b14684b54d37d04ba5a8f7a7d71d",class:{[e]:!0,["card-content-".concat(e)]:!0}})}static get style(){return{ios:s9,md:u9}}},[32,"ion-card-content"]);function c9(){if(typeof customElements>"u")return;["ion-card-content"].forEach(e=>{switch(e){case"ion-card-content":customElements.get(e)||customElements.define(e,l9);break}})}const d9=c9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const h9=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}",f9=h9,p9=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,n){return new Promise(r=>{bx(()=>{const i=this.el.getBoundingClientRect(),o=i.width,s=i.height,a=Math.sqrt(o*o+s*s),u=Math.max(s,o),l=this.unbounded?u:a+g9,c=Math.floor(u*v9),d=l/c;let h=e-i.left,f=n-i.top;this.unbounded&&(h=o*.5,f=s*.5);const m=h-c*.5,v=f-c*.5,y=o*.5-h,g=s*.5-f;vE(()=>{const w=document.createElement("div");w.classList.add("ripple-effect");const b=w.style;b.top=v+"px",b.left=m+"px",b.width=b.height=c+"px",b.setProperty("--final-scale","".concat(d)),b.setProperty("--translate-end","".concat(y,"px, ").concat(g,"px")),(this.el.shadowRoot||this.el).appendChild(w),setTimeout(()=>{r(()=>{m9(w)})},325)})})})}get unbounded(){return this.type==="unbounded"}render(){const e=on(this);return Ee(Ur,{key:"a9ff1956627908ee4071002ca018eaa80f87cd59",role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return f9}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),m9=t=>{t.classList.add("fade-out"),setTimeout(()=>{t.remove()},200)},g9=10,v9=.5;function yL(){if(typeof customElements>"u")return;["ion-ripple-effect"].forEach(e=>{switch(e){case"ion-ripple-effect":customElements.get(e)||customElements.define(e,p9);break}})}/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const zp=typeof window<"u"?window:void 0;zp&&(zp.CSS&&zp.CSS.supports&&zp.CSS.supports("--a: 0"));/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const y9=t=>t&&t.dir!==""?t.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl";/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const w9=':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}',b9=w9,x9=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=St(this,"ionScrollStart",7),this.ionScroll=St(this,"ionScroll",7),this.ionScrollEnd=St(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.tabsElement=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){if(this.isMainContent=this.el.closest("ion-menu, ion-popover, ion-modal")===null,xx(this.el)){const e=this.tabsElement=this.el.closest("ion-tabs");e!==null&&(this.tabsLoadCallback=()=>this.resize(),e.addEventListener("ionTabBarLoaded",this.tabsLoadCallback))}}disconnectedCallback(){if(this.onScrollEnd(),xx(this.el)){const{tabsElement:e,tabsLoadCallback:n}=this;e!==null&&n!==void 0&&e.removeEventListener("ionTabBarLoaded",n),this.tabsElement=null,this.tabsLoadCallback=void 0}}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout(()=>{this.el.offsetParent!==null&&this.resize()},100)}shouldForceOverscroll(){const{forceOverscroll:e}=this,n=on(this);return e===void 0?n==="ios"&&ws("ios"):e}resize(){this.fullscreen?bx(()=>this.readDimensions()):(this.cTop!==0||this.cBottom!==0)&&(this.cTop=this.cBottom=0,IA(this))}readDimensions(){const e=E9(this.el),n=Math.max(this.el.offsetTop,0),r=Math.max(e.offsetHeight-n-this.el.offsetHeight,0);(n!==this.cTop||r!==this.cBottom)&&(this.cTop=n,this.cBottom=r,IA(this))}onScroll(e){const n=Date.now(),r=!this.isScrolling;this.lastScroll=n,r&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,bx(i=>{this.queued=!1,this.detail.event=e,I9(this.detail,this.scrollEl,i,r),this.ionScroll.emit(this.detail)}))}async getScrollElement(){return this.scrollEl||await new Promise(e=>rc(this.el,e)),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise(e=>rc(this.el,e)),Promise.resolve(this.backgroundContentEl)}scrollToTop(e=0){return this.scrollToPoint(void 0,0,e)}async scrollToBottom(e=0){const n=await this.getScrollElement(),r=n.scrollHeight-n.clientHeight;return this.scrollToPoint(void 0,r,e)}async scrollByPoint(e,n,r){const i=await this.getScrollElement();return this.scrollToPoint(e+i.scrollLeft,n+i.scrollTop,r)}async scrollToPoint(e,n,r=0){const i=await this.getScrollElement();if(r<32){n!=null&&(i.scrollTop=n),e!=null&&(i.scrollLeft=e);return}let o,s=0;const a=new Promise(f=>o=f),u=i.scrollTop,l=i.scrollLeft,c=n!=null?n-u:0,d=e!=null?e-l:0,h=f=>{const m=Math.min(1,(f-s)/r)-1,v=Math.pow(m,3)+1;c!==0&&(i.scrollTop=Math.floor(v*c+u)),d!==0&&(i.scrollLeft=Math.floor(v*d+l)),v<1?requestAnimationFrame(h):o()};return requestAnimationFrame(f=>{s=f,h(f)}),a}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval(()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()},100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:e,scrollX:n,scrollY:r,el:i}=this,o=y9(i)?"rtl":"ltr",s=on(this),a=this.shouldForceOverscroll(),u=s==="ios",l=e?"main":"div";return this.resize(),Ee(Ur,{key:"65d85e1f7f85876a76eec79addc4bd9f697a5d84",class:Pf(this.color,{[s]:!0,"content-sizing":Sm("ion-popover",this.el),overscroll:a,["content-".concat(o)]:!0}),style:{"--offset-top":"".concat(this.cTop,"px"),"--offset-bottom":"".concat(this.cBottom,"px")}},Ee("div",{key:"e2ac474a62cbc864772c497469100436f41289ff",ref:c=>this.backgroundContentEl=c,id:"background-content",part:"background"}),Ee(l,{key:"567a4bc2bcb13adfd987b088f95ac4b20b789f2c",class:{"inner-scroll":!0,"scroll-x":n,"scroll-y":r,overscroll:(n||r)&&a},ref:c=>this.scrollEl=c,onScroll:this.scrollEvents?c=>this.onScroll(c):void 0,part:"scroll"},Ee("slot",{key:"13909f87dd9f49bf1664ad95038499da376b9480"})),u?Ee("div",{class:"transition-effect"},Ee("div",{class:"transition-cover"}),Ee("div",{class:"transition-shadow"})):null,Ee("slot",{key:"05b56c139e203cfd1e3dd08054e99328e97e9243",name:"fixed"}))}get el(){return this}static get style(){return b9}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[9,"resize","onResize"]]]),_9=t=>{var e;return t.parentElement?t.parentElement:!((e=t.parentNode)===null||e===void 0)&&e.host?t.parentNode.host:null},E9=t=>{const e=t.closest("ion-tabs");if(e)return e;const n=t.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return n||_9(t)},I9=(t,e,n,r)=>{const i=t.currentX,o=t.currentY,s=t.currentTime,a=e.scrollLeft,u=e.scrollTop,l=n-s;if(r&&(t.startTime=n,t.startX=a,t.startY=u,t.velocityX=t.velocityY=0),t.currentTime=n,t.currentX=t.scrollLeft=a,t.currentY=t.scrollTop=u,t.deltaX=a-t.startX,t.deltaY=u-t.startY,l>0&&l<100){const c=(a-i)/l,d=(u-o)/l;t.velocityX=c*.7+t.velocityX*.3,t.velocityY=d*.7+t.velocityY*.3}};function T9(){if(typeof customElements>"u")return;["ion-content"].forEach(e=>{switch(e){case"ion-content":customElements.get(e)||customElements.define(e,x9);break}})}const C9=T9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const k9=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:14px;--padding-top:13px;--padding-bottom:13px;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:3.1em;font-size:min(1rem, 48px);font-weight:500;letter-spacing:0}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:min(1.0625rem, 51px);font-weight:normal}:host(.in-buttons){font-size:clamp(17px, 1.0625rem, 21.08px);font-weight:400}:host(.button-large){--border-radius:16px;--padding-top:17px;--padding-start:1em;--padding-end:1em;--padding-bottom:17px;min-height:3.1em;font-size:min(1.25rem, 60px)}:host(.button-small){--border-radius:6px;--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:min(0.8125rem, 39px)}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}',S9=k9,A9=':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:4px;--padding-top:8px;--padding-bottom:8px;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:36px;font-size:0.875rem;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:14px;--padding-start:1em;--padding-end:1em;--padding-bottom:14px;min-height:2.8em;font-size:1.25rem}:host(.button-small){--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:0.8125rem}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}',R9=A9,N9=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=St(this,"ionFocus",7),this.ionBlur=St(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.formButtonEl=null,this.formEl=null,this.inheritedAttributes={},this.handleClick=e=>{const{el:n}=this;this.type==="button"?uL(this.href,e,this.routerDirection,this.routerAnimation):hq(n)&&this.submitForm(e)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}disabledChanged(){const{disabled:e}=this;this.formButtonEl&&(this.formButtonEl.disabled=e)}renderHiddenButton(){const e=this.formEl=this.findForm();if(e){const{formButtonEl:n}=this;if(n!==null&&e.contains(n))return;const r=this.formButtonEl=document.createElement("button");r.type=this.type,r.style.display="none",r.disabled=this.disabled,e.appendChild(r)}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=lq(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(this.fill===void 0||this.fill==="clear")&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:e}=this;if(e instanceof HTMLFormElement)return e;if(typeof e=="string"){const n=document.getElementById(e);return n?n instanceof HTMLFormElement?n:(Ui('Form with selector: "#'.concat(e,'" could not be found. Verify that the id is attached to a <form> element.'),this.el),null):(Ui('Form with selector: "#'.concat(e,'" could not be found. Verify that the id is correct and the form is rendered in the DOM.'),this.el),null)}return e!==void 0?(Ui('The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',this.el),null):this.el.closest("form")}submitForm(e){this.formEl&&this.formButtonEl&&(e.preventDefault(),this.formButtonEl.click())}render(){const e=on(this),{buttonType:n,type:r,disabled:i,rel:o,target:s,size:a,href:u,color:l,expand:c,hasIconOnly:d,shape:h,strong:f,inheritedAttributes:m}=this,v=a===void 0&&this.inItem?"small":a,y=u===void 0?"button":"a",g=y==="button"?{type:r}:{download:this.download,href:u,rel:o,target:s};let w=this.fill;return w==null&&(w=this.inToolbar||this.inListHeader?"clear":"solid"),r!=="button"&&this.renderHiddenButton(),Ee(Ur,{key:"8533314504b286ec10e26722f93376d86a7ca1c9",onClick:this.handleClick,"aria-disabled":i?"true":null,class:Pf(l,{[e]:!0,[n]:!0,["".concat(n,"-").concat(c)]:c!==void 0,["".concat(n,"-").concat(v)]:v!==void 0,["".concat(n,"-").concat(h)]:h!==void 0,["".concat(n,"-").concat(w)]:!0,["".concat(n,"-strong")]:f,"in-toolbar":Sm("ion-toolbar",this.el),"in-toolbar-color":Sm("ion-toolbar[color]",this.el),"in-buttons":Sm("ion-buttons",this.el),"button-has-icon-only":d,"button-disabled":i,"ion-activatable":!0,"ion-focusable":!0})},Ee(y,Object.assign({key:"79bf020fdac0c2ceb2b05547b3e5a9a11e60abb4"},g,{class:"button-native",part:"native",disabled:i,onFocus:this.onFocus,onBlur:this.onBlur},m),Ee("span",{key:"109481ba86102647023b746b054b2718d3c9d92a",class:"button-inner"},Ee("slot",{key:"f824ddd9f988b9bd33136555b16aa790d9291b49",name:"icon-only"}),Ee("slot",{key:"d614f4e430792c5f93be4b3a8c57a826d74b9cfd",name:"start"}),Ee("slot",{key:"95d00c8a980c31cc7f84732f51a17a0cd285a7cb"}),Ee("slot",{key:"a228ff52cbe04dc9d2e22bb66611ecc96d130e6f",name:"end"})),e==="md"&&Ee("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return{ios:S9,md:R9}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1]},void 0,{disabled:["disabledChanged"]}]);/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const P9=()=>{if(Vt!==void 0)return Vt.Capacitor};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const wL=()=>{let t;return{lock:async()=>{const n=t;let r;return t=new Promise(i=>r=i),n!==void 0&&await n,r}}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var Ax;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(Ax||(Ax={}));var Rx;(function(t){t.Body="body",t.Ionic="ionic",t.Native="native",t.None="none"})(Rx||(Rx={}));const D9={getEngine(){const t=P9();if(t!=null&&t.isPluginAvailable("Keyboard"))return t.Plugins.Keyboard},getResizeMode(){const t=this.getEngine();return t!=null&&t.getResizeMode?t.getResizeMode().catch(e=>{if(e.code!==Ax.Unimplemented)throw e}):Promise.resolve(void 0)}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const bL=t=>{if(wo===void 0||t===Rx.None||t===void 0)return null;const e=wo.querySelector("ion-app");return e!=null?e:wo.body},FA=t=>{const e=bL(t);return e===null?0:e.clientHeight},O9=async t=>{let e,n,r,i;const o=async()=>{const c=await D9.getResizeMode(),d=c===void 0?void 0:c.mode;e=()=>{i===void 0&&(i=FA(d)),r=!0,s(r,d)},n=()=>{r=!1,s(r,d)},Vt==null||Vt.addEventListener("keyboardWillShow",e),Vt==null||Vt.addEventListener("keyboardWillHide",n)},s=(c,d)=>{t&&t(c,a(d))},a=c=>{if(i===0||i===FA(c))return;const d=bL(c);if(d!==null)return new Promise(h=>{const f=()=>{d.clientHeight===i&&(m.disconnect(),h())},m=new ResizeObserver(f);m.observe(d)})},u=()=>{Vt==null||Vt.removeEventListener("keyboardWillShow",e),Vt==null||Vt.removeEventListener("keyboardWillHide",n),e=n=void 0},l=()=>r;return await o(),{init:o,destroy:u,isKeyboardVisible:l}};/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const L9=":host{-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;display:block;-ms-flex:1;flex:1}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}",M9=L9,V9=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.fixed=!1}render(){const e=on(this);return Ee(Ur,{key:"03a8975bb9320192033219fc9e06fe7afa4fae4a",class:{[e]:!0,"grid-fixed":this.fixed}},Ee("slot",{key:"8d95abb4614e73a46a274668c13fe7c7f011c537"}))}static get style(){return M9}},[1,"ion-grid",{fixed:[4]}]);function F9(){if(typeof customElements>"u")return;["ion-grid"].forEach(e=>{switch(e){case"ion-grid":customElements.get(e)||customElements.define(e,V9);break}})}const $9=F9,xL=1,_L=2,Ag=3;class Nx{constructor(e,n){this.component=e,this.params=n,this.state=xL}async init(e){if(this.state=_L,!this.element){const n=this.component;this.element=await cL(this.delegate,e,n,["ion-page","ion-page-invisible"],this.params)}}_destroy(){sr(this.state!==Ag,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=Ag}}const $A=(t,e,n)=>!t||t.component!==e?!1:HO(t.params,n),BA=(t,e)=>t?t instanceof Nx?t:new Nx(t,e):null,B9=t=>t.map(e=>e instanceof Nx?e:"component"in e?BA(e.component,e.componentProps===null?void 0:e.componentProps):BA(e,void 0)).filter(e=>e!==null),j9=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}",U9=j9,z9=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=St(this,"ionNavWillLoad",7),this.ionNavWillChange=St(this,"ionNavWillChange",3),this.ionNavDidChange=St(this,"ionNavDidChange",3),this.transInstr=[],this.gestureOrAnimationInProgress=!1,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(this.swipeGesture===!0)}rootChanged(){this.root!==void 0&&this.didLoad!==!1&&(this.useRouter||this.root!==void 0&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=document.querySelector("ion-router")!==null&&this.el.closest("[no-router]")===null,this.swipeGesture===void 0){const e=on(this);this.swipeGesture=Qe.getBoolean("swipeBackEnabled",e==="ios")}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await Di(()=>import("./swipe-back-BQjFF2Ye.js"),__vite__mapDeps([]))).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)po(e.element,yw),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,n,r,i){return this.insert(-1,e,n,r,i)}insert(e,n,r,i,o){return this.insertPages(e,[{component:n,componentProps:r}],i,o)}insertPages(e,n,r,i){return this.queueTrns({insertStart:e,insertViews:n,opts:r},i)}pop(e,n){return this.removeIndex(-1,1,e,n)}popTo(e,n,r){const i={removeStart:-1,removeCount:-1,opts:n};return typeof e=="object"&&e.component?(i.removeView=e,i.removeStart=1):typeof e=="number"&&(i.removeStart=e+1),this.queueTrns(i,r)}popToRoot(e,n){return this.removeIndex(1,-1,e,n)}removeIndex(e,n=1,r,i){return this.queueTrns({removeStart:e,removeCount:n,opts:r},i)}setRoot(e,n,r,i){return this.setPages([{component:e,componentProps:n}],r,i)}setPages(e,n,r){return n!=null||(n={}),n.animated!==!0&&(n.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:n},r)}setRouteId(e,n,r,i){const o=this.getActiveSync();if($A(o,e,n))return Promise.resolve({changed:!1,element:o.element});let s;const a=new Promise(c=>s=c);let u;const l={updateURL:!1,viewIsReady:c=>{let d;const h=new Promise(f=>d=f);return s({changed:!0,element:c,markVisible:async()=>{d(),await u}}),h}};if(r==="root")u=this.setRoot(e,n,l);else{const c=this.views.find(d=>$A(d,e,n));c?u=this.popTo(c,Object.assign(Object.assign({},l),{direction:"back",animationBuilder:i})):r==="forward"?u=this.push(e,n,Object.assign(Object.assign({},l),{animationBuilder:i})):r==="back"&&(u=this.setRoot(e,n,Object.assign(Object.assign({},l),{direction:"back",animated:!0,animationBuilder:i})))}return a}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!!(e&&this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const n=this.views,r=n.indexOf(e);return r>0?n[r-1]:void 0}async queueTrns(e,n){var r,i;if(this.isTransitioning&&(!((r=e.opts)===null||r===void 0)&&r.skipIfBusy))return!1;const o=new Promise((s,a)=>{e.resolve=s,e.reject=a});if(e.done=n,e.opts&&e.opts.updateURL!==!1&&this.useRouter){const s=document.querySelector("ion-router");if(s){const a=await s.canTransition();if(a===!1)return!1;if(typeof a=="string")return s.push(a,e.opts.direction||"back"),!1}}return((i=e.insertViews)===null||i===void 0?void 0:i.length)===0&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),o}success(e,n){if(this.destroyed){this.fireError("nav controller was destroyed",n);return}if(n.done&&n.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),n.resolve(e.hasCompleted),n.opts.updateURL!==!1&&this.useRouter){const r=document.querySelector("ion-router");if(r){const i=e.direction==="back"?"back":"forward";r.navChanged(i)}}}failed(e,n){if(this.destroyed){this.fireError("nav controller was destroyed",n);return}this.transInstr.length=0,this.fireError(e,n)}fireError(e,n){n.done&&n.done(!1,!1,e),n.reject&&!this.destroyed?n.reject(e):n.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return e?(this.runTransition(e),!0):!1}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const n=this.getActiveSync(),r=this.getEnteringView(e,n);if(!n&&!r)throw new Error("no views in the stack to be removed");r&&r.state===xL&&await r.init(this.el),this.postViewInit(r,n,e);const i=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&r!==n;i&&e.opts&&n&&(e.opts.direction==="back"&&(e.opts.animationBuilder=e.opts.animationBuilder||(r==null?void 0:r.animationBuilder)),n.animationBuilder=e.opts.animationBuilder);let o;i?o=await this.transition(r,n,e):o={hasCompleted:!0,requiresTransition:!1},this.success(o,e),this.ionNavDidChange.emit()}catch(n){this.failed(n,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var n,r,i;const o=this.views.length;if((n=e.opts)!==null&&n!==void 0||(e.opts={}),(r=(i=e.opts).delegate)!==null&&r!==void 0||(i.delegate=this.delegate),e.removeView!==void 0){sr(e.removeStart!==void 0,"removeView needs removeStart"),sr(e.removeCount!==void 0,"removeView needs removeCount");const u=this.views.indexOf(e.removeView);if(u<0)throw new Error("removeView was not found");e.removeStart+=u}e.removeStart!==void 0&&(e.removeStart<0&&(e.removeStart=o-1),e.removeCount<0&&(e.removeCount=o-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===o),e.insertViews&&((e.insertStart<0||e.insertStart>o)&&(e.insertStart=o),e.enteringRequiresTransition=e.insertStart===o);const s=e.insertViews;if(!s)return;sr(s.length>0,"length can not be zero");const a=B9(s);if(a.length===0)throw new Error("invalid views to insert");for(const u of a){u.delegate=e.opts.delegate;const l=u.nav;if(l&&l!==this)throw new Error("inserted view was already inserted");if(u.state===Ag)throw new Error("inserted view was already destroyed")}e.insertViews=a}getEnteringView(e,n){const r=e.insertViews;if(r!==void 0)return r[r.length-1];const i=e.removeStart;if(i!==void 0){const o=this.views,s=i+e.removeCount;for(let a=o.length-1;a>=0;a--){const u=o[a];if((a<i||a>=s)&&u!==n)return u}}}postViewInit(e,n,r){var i,o,s;sr(n||e,"Both leavingView and enteringView are null"),sr(r.resolve,"resolve must be valid"),sr(r.reject,"reject must be valid");const a=r.opts,{insertViews:u,removeStart:l,removeCount:c}=r;let d;if(l!==void 0&&c!==void 0){sr(l>=0,"removeStart can not be negative"),sr(c>=0,"removeCount can not be negative"),d=[];for(let f=l;f<l+c;f++){const m=this.views[f];m!==void 0&&m!==e&&m!==n&&d.push(m)}(i=a.direction)!==null&&i!==void 0||(a.direction="back")}const h=this.views.length+((o=u==null?void 0:u.length)!==null&&o!==void 0?o:0)-(c!=null?c:0);if(sr(h>=0,"final balance can not be negative"),h===0)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(u){let f=r.insertStart;for(const m of u)this.insertViewAt(m,f),f++;r.enteringRequiresTransition&&((s=a.direction)!==null&&s!==void 0||(a.direction="forward"))}if(d&&d.length>0){for(const f of d)po(f.element,GO),po(f.element,KO),po(f.element,yw);for(const f of d)this.destroyView(f)}}async transition(e,n,r){const i=r.opts,o=i.progressAnimation?d=>{d!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,d.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0}),d.progressEnd(0,0,0)):this.sbAni=d}:void 0,s=on(this),a=e.element,u=n&&n.element,l=Object.assign(Object.assign({mode:s,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:o,animated:this.animated&&Qe.getBoolean("animated",!0),enteringEl:a,leavingEl:u},i),{animationBuilder:i.animationBuilder||this.animation||Qe.get("navAnimation")}),{hasCompleted:c}=await YO(l);return this.transitionFinish(c,e,n,i)}transitionFinish(e,n,r,i){const o=e?n:r;return o&&this.unmountInactiveViews(o),{hasCompleted:e,requiresTransition:!0,enteringView:n,leavingView:r,direction:i.direction}}insertViewAt(e,n){const r=this.views,i=r.indexOf(e);i>-1?(sr(e.nav===this,"view is not part of the nav"),r.splice(i,1),r.splice(n,0,e)):(sr(!e.nav,"nav is used"),e.nav=this,r.splice(n,0,e))}removeView(e){sr(e.state===_L||e.state===Ag,"view state should be loaded or destroyed");const n=this.views,r=n.indexOf(e);sr(r>-1,"view must be part of the stack"),r>=0&&n.splice(r,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const n=this.views,r=n.indexOf(e);for(let i=n.length-1;i>=0;i--){const o=n[i],s=o.element;s&&(i>r?(po(s,yw),this.destroyView(o)):i<r&&Ex(s,!0))}}canStart(){return!this.gestureOrAnimationInProgress&&!!this.swipeGesture&&!this.isTransitioning&&this.transInstr.length===0&&this.canGoBackSync()}onStart(){this.gestureOrAnimationInProgress=!0,this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,n,r){if(this.sbAni){this.sbAni.onFinish(()=>{this.gestureOrAnimationInProgress=!1},{oneTimeCallback:!0});let i=e?-.001:.001;e?i+=Tg([0,0],[.32,.72],[0,1],[1,1],n)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),i+=Tg([0,0],[1,0],[.68,.28],[1,1],n)[0]),this.sbAni.progressEnd(e?1:0,i,r)}else this.gestureOrAnimationInProgress=!1}render(){return Ee("slot",{key:"654286a8a7ef03d4a22497eb51e781a9a8979774"})}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return U9}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]},void 0,{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}]);function W9(){if(typeof customElements>"u")return;["ion-nav"].forEach(e=>{switch(e){case"ion-nav":customElements.get(e)||customElements.define(e,z9);break}})}const q9=W9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const H9=N9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const G9=":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, #666666)));-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:24px;margin-bottom:24px;border-radius:8px;-webkit-transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1), -webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);font-size:0.875rem;-webkit-box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);box-shadow:0 4px 16px rgba(0, 0, 0, 0.12)}:host(.ion-activated){-webkit-transform:scale3d(0.97, 0.97, 1);transform:scale3d(0.97, 0.97, 1)}",K9=G9,Y9=":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, #737373)));-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px;margin-top:10px;margin-bottom:10px;border-radius:4px;font-size:0.875rem;-webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}",X9=Y9,Q9=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAriaAttributes={},this.color=void 0,this.button=!1,this.type="button",this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0}componentWillLoad(){this.inheritedAriaAttributes=yE(this.el,["aria-label"])}isClickable(){return this.href!==void 0||this.button}renderCard(e){const n=this.isClickable();if(!n)return[Ee("slot",null)];const{href:r,routerAnimation:i,routerDirection:o,inheritedAriaAttributes:s}=this,a=n?r===void 0?"button":"a":"div",u=a==="button"?{type:this.type}:{download:this.download,href:this.href,rel:this.rel,target:this.target};return Ee(a,Object.assign({},u,s,{class:"card-native",part:"native",disabled:this.disabled,onClick:l=>uL(r,l,o,i)}),Ee("slot",null),n&&e==="md"&&Ee("ion-ripple-effect",null))}render(){const e=on(this);return Ee(Ur,{key:"9e35c114ce466623024b94dd6797118ad027417d",class:Pf(this.color,{[e]:!0,"card-disabled":this.disabled,"ion-activatable":this.isClickable()})},this.renderCard(e))}get el(){return this}static get style(){return{ios:K9,md:X9}}},[33,"ion-card",{color:[513],button:[4],type:[1],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1]}]),J9=Q9;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */function Z9(t,e,n,r){let i;if(n==="md"?i=t==="top"?8:-8:i=t==="top"?10:-10,e&&Vt){e8(e,r);const o=e.getBoundingClientRect();return t==="top"?i+=o.bottom:t==="bottom"&&(i-=Vt.innerHeight-o.top),{top:"".concat(i,"px"),bottom:"".concat(i,"px")}}else return{top:"calc(".concat(i,"px + var(--ion-safe-area-top, 0px))"),bottom:"calc(".concat(i,"px - var(--ion-safe-area-bottom, 0px))")}}function e8(t,e){t.offsetParent===null&&Ui("The positionAnchor element for ion-toast was found in the DOM, but appears to be hidden. This may lead to unexpected positioning of the toast.",e)}const _E=(t,e)=>Math.floor(t/2-e/2),t8=(t,e)=>{const n=eo(),r=eo(),{position:i,top:o,bottom:s}=e,u=Pc(t).querySelector(".toast-wrapper");switch(r.addElement(u),i){case"top":r.fromTo("transform","translateY(-100%)","translateY(".concat(o,")"));break;case"middle":const l=_E(t.clientHeight,u.clientHeight);u.style.top="".concat(l,"px"),r.fromTo("opacity",.01,1);break;default:r.fromTo("transform","translateY(100%)","translateY(".concat(s,")"));break}return n.easing("cubic-bezier(.155,1.105,.295,1.12)").duration(400).addAnimation(r)},n8=(t,e)=>{const n=eo(),r=eo(),{position:i,top:o,bottom:s}=e,u=Pc(t).querySelector(".toast-wrapper");switch(r.addElement(u),i){case"top":r.fromTo("transform","translateY(".concat(o,")"),"translateY(-100%)");break;case"middle":r.fromTo("opacity",.99,0);break;default:r.fromTo("transform","translateY(".concat(s,")"),"translateY(100%)");break}return n.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(r)},r8=(t,e)=>{const n=eo(),r=eo(),{position:i,top:o,bottom:s}=e,u=Pc(t).querySelector(".toast-wrapper");switch(r.addElement(u),i){case"top":u.style.setProperty("transform","translateY(".concat(o,")")),r.fromTo("opacity",.01,1);break;case"middle":const l=_E(t.clientHeight,u.clientHeight);u.style.top="".concat(l,"px"),r.fromTo("opacity",.01,1);break;default:u.style.setProperty("transform","translateY(".concat(s,")")),r.fromTo("opacity",.01,1);break}return n.easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation(r)},i8=t=>{const e=eo(),n=eo(),i=Pc(t).querySelector(".toast-wrapper");return n.addElement(i).fromTo("opacity",.99,0),e.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(n)},o8=(t,e,n)=>{const r=Pc(t).querySelector(".toast-wrapper"),i=t.clientHeight,o=r.getBoundingClientRect();let s=0;const a=.5,u=t.position==="middle"?.5:0,l=t.position==="top"?-1:1,c=_E(i,o.height),d=[{offset:0,transform:"translateY(-".concat(c+o.height,"px)")},{offset:.5,transform:"translateY(0px)"},{offset:1,transform:"translateY(".concat(c+o.height,"px)")}],h=eo("toast-swipe-to-dismiss-animation").addElement(r).duration(100);switch(t.position){case"middle":s=i+o.height,h.keyframes(d),h.progressStart(!0,.5);break;case"top":s=o.bottom,h.keyframes([{offset:0,transform:"translateY(".concat(e.top,")")},{offset:1,transform:"translateY(-100%)"}]),h.progressStart(!0,0);break;case"bottom":default:s=i-o.top,h.keyframes([{offset:0,transform:"translateY(".concat(e.bottom,")")},{offset:1,transform:"translateY(100%)"}]),h.progressStart(!0,0);break}const f=g=>g*l/s,y=qq({el:r,gestureName:"toast-swipe-to-dismiss",gesturePriority:jH,direction:"y",onMove:g=>{const w=u+f(g.deltaY);h.progressStep(w)},onEnd:g=>{const w=g.velocityY,b=(g.deltaY+w*1e3)/s*l;y.enable(!1);let x=!0,_=1,E=0,I=0;if(t.position==="middle"){x=b>=a/2||b<=-a/2,_=1,E=0;const S=r.getBoundingClientRect(),N=S.top-c,R="".concat(N,"px"),D=g.deltaY<=0?-1:1,W=(c+S.height)*D,F=x?"".concat(W,"px"):"0px",G=[{offset:0,transform:"translateY(".concat(R,")")},{offset:1,transform:"translateY(".concat(F,")")}];h.keyframes(G),I=W-N}else x=b>=a,_=x?1:0,E=f(g.deltaY),I=(x?1-E:E)*s;const C=Math.min(Math.abs(I)/Math.abs(w),200);h.onFinish(()=>{x?(n(),h.destroy()):(t.position==="middle"?h.keyframes(d).progressStart(!0,.5):h.progressStart(!0,0),y.enable(!0))},{oneTimeCallback:!0}).progressEnd(_,E,C)}});return y},s8=":host{--border-width:0;--border-style:none;--border-color:initial;--box-shadow:none;--min-width:auto;--width:auto;--min-height:auto;--height:auto;--max-height:auto;--white-space:normal;top:0;display:block;position:absolute;width:100%;height:100%;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);contain:strict;z-index:1001;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host(:dir(rtl)){left:unset;right:unset;right:0}}}:host(.overlay-hidden){display:none}:host(.ion-color){--button-color:inherit;color:var(--ion-color-contrast)}:host(.ion-color) .toast-button-cancel{color:inherit}:host(.ion-color) .toast-wrapper{background:var(--ion-color-base)}.toast-wrapper{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}@supports (inset-inline-start: 0){.toast-wrapper{inset-inline-start:var(--start);inset-inline-end:var(--end)}}@supports not (inset-inline-start: 0){.toast-wrapper{left:var(--start);right:var(--end)}:host-context([dir=rtl]) .toast-wrapper{left:unset;right:unset;left:var(--end);right:var(--start)}[dir=rtl] .toast-wrapper{left:unset;right:unset;left:var(--end);right:var(--start)}@supports selector(:dir(rtl)){.toast-wrapper:dir(rtl){left:unset;right:unset;left:var(--end);right:var(--start)}}}.toast-wrapper.toast-top{-webkit-transform:translate3d(0,  -100%,  0);transform:translate3d(0,  -100%,  0);top:0}.toast-wrapper.toast-bottom{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);bottom:0}.toast-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;pointer-events:auto;height:inherit;min-height:inherit;max-height:inherit;contain:content}.toast-layout-stacked .toast-container{-ms-flex-wrap:wrap;flex-wrap:wrap}.toast-layout-baseline .toast-content{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.toast-icon{-webkit-margin-start:16px;margin-inline-start:16px}.toast-content{min-width:0}.toast-message{-ms-flex:1;flex:1;white-space:var(--white-space)}.toast-button-group{display:-ms-flexbox;display:flex}.toast-layout-stacked .toast-button-group{-ms-flex-pack:end;justify-content:end;width:100%}.toast-button{border:0;outline:none;color:var(--button-color);z-index:0}.toast-icon,.toast-button-icon{font-size:1.4em}.toast-button-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}@media (any-hover: hover){.toast-button:hover{cursor:pointer}}:host{--background:var(--ion-color-step-50, #f2f2f2);--border-radius:14px;--button-color:var(--ion-color-primary, #3880ff);--color:var(--ion-color-step-850, #262626);--max-width:700px;--max-height:478px;--start:10px;--end:10px;font-size:clamp(14px, 0.875rem, 43.4px)}.toast-wrapper{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;display:block;position:absolute;z-index:10}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.toast-translucent) .toast-wrapper{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}:host(.ion-color.toast-translucent) .toast-wrapper{background:rgba(var(--ion-color-base-rgb), 0.8)}}.toast-wrapper.toast-middle{opacity:0.01}.toast-content{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:15px;padding-bottom:15px}.toast-header{margin-bottom:2px;font-weight:500}.toast-button{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:10px;padding-bottom:10px;min-height:44px;-webkit-transition:background-color, opacity 100ms linear;transition:background-color, opacity 100ms linear;border:0;background-color:transparent;font-family:var(--ion-font-family);font-size:clamp(17px, 1.0625rem, 21.998px);font-weight:500;overflow:hidden}.toast-button.ion-activated{opacity:0.4}@media (any-hover: hover){.toast-button:hover{opacity:0.6}}",a8=s8,u8=":host{--border-width:0;--border-style:none;--border-color:initial;--box-shadow:none;--min-width:auto;--width:auto;--min-height:auto;--height:auto;--max-height:auto;--white-space:normal;top:0;display:block;position:absolute;width:100%;height:100%;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);contain:strict;z-index:1001;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host(:dir(rtl)){left:unset;right:unset;right:0}}}:host(.overlay-hidden){display:none}:host(.ion-color){--button-color:inherit;color:var(--ion-color-contrast)}:host(.ion-color) .toast-button-cancel{color:inherit}:host(.ion-color) .toast-wrapper{background:var(--ion-color-base)}.toast-wrapper{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}@supports (inset-inline-start: 0){.toast-wrapper{inset-inline-start:var(--start);inset-inline-end:var(--end)}}@supports not (inset-inline-start: 0){.toast-wrapper{left:var(--start);right:var(--end)}:host-context([dir=rtl]) .toast-wrapper{left:unset;right:unset;left:var(--end);right:var(--start)}[dir=rtl] .toast-wrapper{left:unset;right:unset;left:var(--end);right:var(--start)}@supports selector(:dir(rtl)){.toast-wrapper:dir(rtl){left:unset;right:unset;left:var(--end);right:var(--start)}}}.toast-wrapper.toast-top{-webkit-transform:translate3d(0,  -100%,  0);transform:translate3d(0,  -100%,  0);top:0}.toast-wrapper.toast-bottom{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);bottom:0}.toast-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;pointer-events:auto;height:inherit;min-height:inherit;max-height:inherit;contain:content}.toast-layout-stacked .toast-container{-ms-flex-wrap:wrap;flex-wrap:wrap}.toast-layout-baseline .toast-content{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.toast-icon{-webkit-margin-start:16px;margin-inline-start:16px}.toast-content{min-width:0}.toast-message{-ms-flex:1;flex:1;white-space:var(--white-space)}.toast-button-group{display:-ms-flexbox;display:flex}.toast-layout-stacked .toast-button-group{-ms-flex-pack:end;justify-content:end;width:100%}.toast-button{border:0;outline:none;color:var(--button-color);z-index:0}.toast-icon,.toast-button-icon{font-size:1.4em}.toast-button-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}@media (any-hover: hover){.toast-button:hover{cursor:pointer}}:host{--background:var(--ion-color-step-800, #333333);--border-radius:4px;--box-shadow:0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);--button-color:var(--ion-color-primary, #3880ff);--color:var(--ion-color-step-50, #f2f2f2);--max-width:700px;--start:8px;--end:8px;font-size:0.875rem}.toast-wrapper{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;display:block;position:absolute;opacity:0.01;z-index:10}.toast-content{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:14px;padding-bottom:14px}.toast-header{margin-bottom:2px;font-weight:500;line-height:1.25rem}.toast-message{line-height:1.25rem}.toast-layout-baseline .toast-button-group-start{-webkit-margin-start:8px;margin-inline-start:8px}.toast-layout-stacked .toast-button-group-start{-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px}.toast-layout-baseline .toast-button-group-end{-webkit-margin-end:8px;margin-inline-end:8px}.toast-layout-stacked .toast-button-group-end{-webkit-margin-end:8px;margin-inline-end:8px;margin-bottom:8px}.toast-button{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;font-family:var(--ion-font-family);font-size:0.875rem;font-weight:500;letter-spacing:0.84px;text-transform:uppercase;overflow:hidden}.toast-button-cancel{color:var(--ion-color-step-100, #e6e6e6)}.toast-button-icon-only{border-radius:50%;-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:9px;padding-bottom:9px;width:36px;height:36px}@media (any-hover: hover){.toast-button:hover{background-color:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.08)}.toast-button-cancel:hover{background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.08)}}",l8=u8,c8=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=St(this,"ionToastDidPresent",7),this.willPresent=St(this,"ionToastWillPresent",7),this.willDismiss=St(this,"ionToastWillDismiss",7),this.didDismiss=St(this,"ionToastDidDismiss",7),this.didPresentShorthand=St(this,"didPresent",7),this.willPresentShorthand=St(this,"willPresent",7),this.willDismissShorthand=St(this,"willDismiss",7),this.didDismissShorthand=St(this,"didDismiss",7),this.delegateController=UH(this),this.lockController=wL(),this.triggerController=zH(),this.customHTMLEnabled=Qe.get("innerHTMLTemplatesEnabled",mH),this.presented=!1,this.dispatchCancelHandler=e=>{const n=e.detail.role;if(kx(n)){const r=this.getButtons().find(i=>i.role==="cancel");this.callButtonHandler(r)}},this.createSwipeGesture=e=>{(this.gesture=o8(this.el,e,()=>{this.dismiss(void 0,pL)})).enable(!0)},this.destroySwipeGesture=()=>{const{gesture:e}=this;e!==void 0&&(e.destroy(),this.gesture=void 0)},this.prefersSwipeGesture=()=>{const{swipeGesture:e}=this;return e==="vertical"},this.revealContentToScreenReader=!1,this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.color=void 0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.duration=Qe.getNumber("toastDuration",0),this.header=void 0,this.layout="baseline",this.message=void 0,this.keyboardClose=!1,this.position="bottom",this.positionAnchor=void 0,this.buttons=void 0,this.translucent=!1,this.animated=!0,this.icon=void 0,this.htmlAttributes=void 0,this.swipeGesture=void 0,this.isOpen=!1,this.trigger=void 0}swipeGestureChanged(){this.destroySwipeGesture(),this.presented&&this.prefersSwipeGesture()&&this.createSwipeGesture(this.lastPresentedPosition)}onIsOpenChange(e,n){e===!0&&n===!1?this.present():e===!1&&n===!0&&this.dismiss()}triggerChanged(){const{trigger:e,el:n,triggerController:r}=this;e&&r.addClickListener(n,e)}connectedCallback(){kH(this.el),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){SH(this.el)}componentDidLoad(){this.isOpen===!0&&Pi(()=>this.present()),this.triggerChanged()}async present(){const e=await this.lockController.lock();await this.delegateController.attachViewToDom();const{el:n,position:r}=this,i=this.getAnchorElement(),o=Z9(r,i,on(this),n);this.lastPresentedPosition=o,await LH(this,"toastEnter",t8,r8,{position:r,top:o.top,bottom:o.bottom}),this.revealContentToScreenReader=!0,this.duration>0&&(this.durationTimeout=setTimeout(()=>this.dismiss(void 0,"timeout"),this.duration)),this.prefersSwipeGesture()&&this.createSwipeGesture(o),e()}async dismiss(e,n){var r,i;const o=await this.lockController.lock(),{durationTimeout:s,position:a,lastPresentedPosition:u}=this;s&&clearTimeout(s);const l=await VH(this,e,n,"toastLeave",n8,i8,{position:a,top:(r=u==null?void 0:u.top)!==null&&r!==void 0?r:"",bottom:(i=u==null?void 0:u.bottom)!==null&&i!==void 0?i:""});return l&&(this.delegateController.removeViewFromDom(),this.revealContentToScreenReader=!1),this.lastPresentedPosition=void 0,this.destroySwipeGesture(),o(),l}onDidDismiss(){return MA(this.el,"ionToastDidDismiss")}onWillDismiss(){return MA(this.el,"ionToastWillDismiss")}getButtons(){return this.buttons?this.buttons.map(n=>typeof n=="string"?{text:n}:n):[]}getAnchorElement(){const{position:e,positionAnchor:n,el:r}=this;if(n!==void 0){if(e==="middle"&&n!==void 0){Ui('The positionAnchor property is ignored when using position="middle".',this.el);return}if(typeof n=="string"){const i=document.getElementById(n);if(i===null){Ui('An anchor element with an ID of "'.concat(n,'" was not found in the DOM.'),r);return}return i}if(n instanceof Zn)return n;Ui("Invalid positionAnchor value:",n,r)}}async buttonClick(e){const n=e.role;return kx(n)?this.dismiss(void 0,n):await this.callButtonHandler(e)?this.dismiss(void 0,n):Promise.resolve()}async callButtonHandler(e){if(e!=null&&e.handler)try{if(await BH(e.handler)===!1)return!1}catch(n){console.error(n)}return!0}renderButtons(e,n){if(e.length===0)return;const r=on(this),i={"toast-button-group":!0,["toast-button-group-".concat(n)]:!0};return Ee("div",{class:i},e.map(o=>Ee("button",Object.assign({},o.htmlAttributes,{type:"button",class:d8(o),tabIndex:0,onClick:()=>this.buttonClick(o),part:h8(o)}),Ee("div",{class:"toast-button-inner"},o.icon&&Ee("ion-icon",{"aria-hidden":"true",icon:o.icon,slot:o.text===void 0?"icon-only":void 0,class:"toast-button-icon"}),o.text),r==="md"&&Ee("ion-ripple-effect",{type:o.icon!==void 0&&o.text===void 0?"unbounded":"bounded"}))))}renderToastMessage(e,n=null){const{customHTMLEnabled:r,message:i}=this;return r?Ee("div",{key:e,"aria-hidden":n,class:"toast-message",part:"message",innerHTML:cH(i)}):Ee("div",{key:e,"aria-hidden":n,class:"toast-message",part:"message"},i)}renderHeader(e,n=null){return Ee("div",{key:e,class:"toast-header","aria-hidden":n,part:"header"},this.header)}render(){const{layout:e,el:n,revealContentToScreenReader:r,header:i,message:o}=this,s=this.getButtons(),a=s.filter(d=>d.side==="start"),u=s.filter(d=>d.side!=="start"),l=on(this),c={"toast-wrapper":!0,["toast-".concat(this.position)]:!0,["toast-layout-".concat(e)]:!0};return e==="stacked"&&a.length>0&&u.length>0&&Ui("This toast is using start and end buttons with the stacked toast layout. We recommend following the best practice of using either start or end buttons with the stacked toast layout.",n),Ee(Ur,Object.assign({key:"c8d7e7d2baa01d3ed5d65a845bc61acf087c0b18",tabindex:"-1"},this.htmlAttributes,{style:{zIndex:"".concat(6e4+this.overlayIndex)},class:Pf(this.color,Object.assign(Object.assign({[l]:!0},aL(this.cssClass)),{"overlay-hidden":!0,"toast-translucent":this.translucent})),onIonToastWillDismiss:this.dispatchCancelHandler}),Ee("div",{key:"27c0feeb89c4efb47c42623a4b036ed84338ed10",class:c},Ee("div",{key:"41d5a3069f92e4a6acef2793fa4e236cdbdaae88",class:"toast-container",part:"container"},this.renderButtons(a,"start"),this.icon!==void 0&&Ee("ion-icon",{class:"toast-icon",part:"icon",icon:this.icon,lazy:!1,"aria-hidden":"true"}),Ee("div",{key:"176f497bc990ef2ecc14c7fa90dd3a54a912030a",class:"toast-content",role:"status","aria-atomic":"true","aria-live":"polite"},!r&&i!==void 0&&this.renderHeader("oldHeader","true"),!r&&o!==void 0&&this.renderToastMessage("oldMessage","true"),r&&i!==void 0&&this.renderHeader("header"),r&&o!==void 0&&this.renderToastMessage("header")),this.renderButtons(u,"end"))))}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:a8,md:l8}}},[33,"ion-toast",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],color:[513],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],duration:[2],header:[1],layout:[1],message:[1],keyboardClose:[4,"keyboard-close"],position:[1],positionAnchor:[1,"position-anchor"],buttons:[16],translucent:[4],animated:[4],icon:[1],htmlAttributes:[16],swipeGesture:[1,"swipe-gesture"],isOpen:[4,"is-open"],trigger:[1],revealContentToScreenReader:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{swipeGesture:["swipeGestureChanged"],isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),d8=t=>Object.assign({"toast-button":!0,"toast-button-icon-only":t.icon!==void 0&&t.text===void 0,["toast-button-".concat(t.role)]:t.role!==void 0,"ion-focusable":!0,"ion-activatable":!0},aL(t.cssClass)),h8=t=>kx(t.role)?"button cancel":"button";function f8(){if(typeof customElements>"u")return;["ion-toast","ion-icon","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-toast":customElements.get(e)||customElements.define(e,c8);break;case"ion-icon":customElements.get(e)||i9();break;case"ion-ripple-effect":customElements.get(e)||yL();break}})}const p8=f8;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */var jA;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(jA||(jA={}));const m8="html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}",g8=m8,v8=_r(class extends Zn{constructor(){super(),this.__registerHost()}componentDidLoad(){w8(async()=>{const e=ws(window,"hybrid");if(Qe.getBoolean("_testing")||Di(()=>import("./index9-cxvylc6m.js"),__vite__mapDeps([])).then(i=>i.startTapClick(Qe)),Qe.getBoolean("statusTap",e)&&Di(()=>import("./status-tap-BY523Opi.js"),__vite__mapDeps([0,1])).then(i=>i.startStatusTap()),Qe.getBoolean("inputShims",y8())){const i=ws(window,"ios")?"ios":"android";Di(()=>import("./input-shims-CTTgUvhO.js"),__vite__mapDeps([2,1])).then(o=>o.startInputShims(Qe,i))}const n=await Di(()=>Promise.resolve().then(()=>xH),void 0),r=e||Ph();Qe.getBoolean("hardwareBackButton",r)?n.startHardwareBackButton():(Ph()&&Ui("experimentalCloseWatcher was set to `true`, but hardwareBackButton was set to `false`. Both config options must be `true` for the Close Watcher API to be used."),n.blockHardwareBackButton()),typeof window<"u"&&Di(()=>import("./keyboard2-CpnQkc6L.js"),__vite__mapDeps([])).then(i=>i.startKeyboardAssist(window)),Di(()=>import("./focus-visible-supuXXMI.js"),__vite__mapDeps([])).then(i=>this.focusVisible=i.startFocusVisible())})}async setFocus(e){this.focusVisible&&this.focusVisible.setFocus(e)}render(){const e=on(this);return Ee(Ur,{key:"3535eb5c0dab78a78011e552524a98599b2b650f",class:{[e]:!0,"ion-page":!0,"force-statusbar-padding":Qe.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return g8}},[0,"ion-app",{setFocus:[64]}]),y8=()=>!!(ws(window,"ios")&&ws(window,"mobile")||ws(window,"android")&&ws(window,"mobileweb")),w8=t=>{"requestIdleCallback"in window?window.requestIdleCallback(t):setTimeout(t,32)};function b8(){if(typeof customElements>"u")return;["ion-app"].forEach(e=>{switch(e){case"ion-app":customElements.get(e)||customElements.define(e,v8);break}})}const x8=b8,_8=":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}",E8=_8,I8=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=St(this,"ionNavWillLoad",7),this.ionNavWillChange=St(this,"ionNavWillChange",3),this.ionNavDidChange=St(this,"ionNavDidChange",3),this.lockController=wL(),this.gestureOrAnimationInProgress=!1,this.mode=on(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(this.swipeHandler!==void 0)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await Di(()=>import("./swipe-back-BQjFF2Ye.js"),__vite__mapDeps([]))).createSwipeBackGesture(this.el,()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart(),()=>e(),n=>{var r;return(r=this.ani)===null||r===void 0?void 0:r.progressStep(n)},(n,r,i)=>{if(this.ani){this.ani.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(n)},{oneTimeCallback:!0});let o=n?-.001:.001;n?o+=Tg([0,0],[.32,.72],[0,1],[1,1],r)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),o+=Tg([0,0],[1,0],[.68,.28],[1,1],r)[0]),this.ani.progressEnd(n?1:0,o,i)}else this.gestureOrAnimationInProgress=!1}),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,n,r){const i=await this.lockController.lock();let o=!1;try{o=await this.transition(e,n,r)}catch(s){console.error(s)}return i(),o}async setRouteId(e,n,r,i){return{changed:await this.setRoot(e,n,{duration:r==="root"?0:void 0,direction:r==="back"?"back":"forward",animationBuilder:i}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,n,r){if(this.activeComponent===e&&HO(n,this.activeParams))return!1;const i=this.activeEl,o=await cL(this.delegate,this.el,e,["ion-page","ion-page-invisible"],n);return this.activeComponent=e,this.activeEl=o,this.activeParams=n,await this.commit(o,i,r),await _H(this.delegate,i),!0}async transition(e,n,r={}){if(n===e)return!1;this.ionNavWillChange.emit();const{el:i,mode:o}=this,s=this.animated&&Qe.getBoolean("animated",!0),a=r.animationBuilder||this.animation||Qe.get("navAnimation");return await YO(Object.assign(Object.assign({mode:o,animated:s,enteringEl:e,leavingEl:n,baseEl:i,deepWait:xx(i),progressCallback:r.progressAnimation?u=>{u!==void 0&&!this.gestureOrAnimationInProgress?(this.gestureOrAnimationInProgress=!0,u.onFinish(()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)},{oneTimeCallback:!0}),u.progressEnd(0,0,0)):this.ani=u}:void 0},r),{animationBuilder:a})),this.ionNavDidChange.emit(),!0}render(){return Ee("slot",{key:"69b452a0dc0c10440bdd8700cf4843c43154c707"})}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return E8}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]},void 0,{swipeHandler:["swipeHandlerChanged"]}]);function T8(){if(typeof customElements>"u")return;["ion-router-outlet"].forEach(e=>{switch(e){case"ion-router-outlet":customElements.get(e)||customElements.define(e,I8);break}})}const C8=T8;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const k8=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",S8=k8,A8=":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, #595959));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}",R8=A8,N8=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=St(this,"ionTabBarChanged",7),this.ionTabBarLoaded=St(this,"ionTabBarLoaded",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){this.selectedTab!==void 0&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await O9(async(e,n)=>{e===!1&&n!==void 0&&await n,this.keyboardVisible=e})}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}componentDidLoad(){this.ionTabBarLoaded.emit()}render(){const{color:e,translucent:n,keyboardVisible:r}=this,i=on(this),o=r&&this.el.getAttribute("slot")!=="top";return Ee(Ur,{key:"e2b4b50270f171ed251359df6c65c5e7e4d526a4",role:"tablist","aria-hidden":o?"true":null,class:Pf(e,{[i]:!0,"tab-bar-translucent":n,"tab-bar-hidden":o})},Ee("slot",{key:"37495b2eddd01a758ceaeb36426abc9bd20bcca3"}))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:S8,md:R8}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]},void 0,{selectedTab:["selectedTabChanged"]}]);function P8(){if(typeof customElements>"u")return;["ion-tab-bar"].forEach(e=>{switch(e){case"ion-tab-bar":customElements.get(e)||customElements.define(e,N8);break}})}const D8=P8;/*!
 * (C) Ionic http://ionicframework.com - MIT License
 */const O8=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start:dir(rtl)) ::slotted(ion-badge),:host(.tab-layout-icon-end:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide:dir(rtl)) ::slotted(ion-badge),:host(.tab-has-label-only:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',L8=O8,M8=':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start:dir(rtl)) ::slotted(ion-badge),:host(.tab-layout-icon-end:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:80%}}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide:dir(rtl)) ::slotted(ion-badge),:host(.tab-has-label-only:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}',V8=M8,F8=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=St(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=e=>{(e.key==="Enter"||e.key===" ")&&this.selectTab(e)},this.onClick=e=>{this.selectTab(e)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(e){const n=e.target,r=this.el.parentElement;(e.composedPath().includes(r)||n!=null&&n.contains(this.el))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},yE(this.el,["aria-label"])),this.layout===void 0&&(this.layout=Qe.get("tabButtonLayout","icon-top"))}selectTab(e){this.tab!==void 0&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:n,hasLabel:r,href:i,rel:o,target:s,layout:a,selected:u,tab:l,inheritedAttributes:c}=this,d=on(this),h={download:this.download,href:i,rel:o,target:s};return Ee(Ur,{key:"9926f9392e7910ff3159397e4f907e0d7d2cf5a0",onClick:this.onClick,onKeyup:this.onKeyUp,id:l!==void 0?"tab-button-".concat(l):null,class:{[d]:!0,"tab-selected":u,"tab-disabled":e,"tab-has-label":r,"tab-has-icon":n,"tab-has-label-only":r&&!n,"tab-has-icon-only":n&&!r,["tab-layout-".concat(a)]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},Ee("a",Object.assign({key:"4b3ace749583a5502e94462f9a70c5158fe0194a"},h,{class:"button-native",part:"native",role:"tab","aria-selected":u?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},c),Ee("span",{key:"a2a30c02fbd5052da12586a5ab00a45f3bf53b88",class:"button-inner"},Ee("slot",{key:"3fb22ffbb09000d99537b531220c029330ae6940"})),d==="md"&&Ee("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:L8,md:V8}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]);function $8(){if(typeof customElements>"u")return;["ion-tab-button","ion-ripple-effect"].forEach(e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,F8);break;case"ion-ripple-effect":customElements.get(e)||yL();break}})}const B8=$8;let Ew;const j8=()=>{if(typeof window>"u")return new Map;if(!Ew){const t=window;t.Ionicons=t.Ionicons||{},Ew=t.Ionicons.map=t.Ionicons.map||new Map}return Ew},U8=t=>{let e=Iw(t.src);return e||(e=EL(t.name,t.icon,t.mode,t.ios,t.md),e?z8(e,t):t.icon&&(e=Iw(t.icon),e||(e=Iw(t.icon[t.mode]),e))?e:null)},z8=(t,e)=>{const n=j8().get(t);if(n)return n;try{return NO("svg/".concat(t,".svg"))}catch(r){console.warn('[Ionicons Warning]: Could not load icon with name "'.concat(t,'". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.'),e)}},EL=(t,e,n,r,i)=>(n=(n&&Wp(n))==="ios"?"ios":"md",r&&n==="ios"?t=Wp(r):i&&n==="md"?t=Wp(i):(!t&&e&&!IL(e)&&(t=e),Rg(t)&&(t=Wp(t))),!Rg(t)||t.trim()===""||t.replace(/[a-z]|-|\d/gi,"")!==""?null:t),Iw=t=>Rg(t)&&(t=t.trim(),IL(t))?t:null,IL=t=>t.length>0&&/(\/|\.)/.test(t),Rg=t=>typeof t=="string",Wp=t=>t.toLowerCase(),W8=(t,e=[])=>{const n={};return e.forEach(r=>{t.hasAttribute(r)&&(t.getAttribute(r)!==null&&(n[r]=t.getAttribute(r)),t.removeAttribute(r))}),n},q8=t=>t&&t.dir!==""?t.dir.toLowerCase()==="rtl":(document==null?void 0:document.dir.toLowerCase())==="rtl",H8=t=>{const e=document.createElement("div");e.innerHTML=t;for(let r=e.childNodes.length-1;r>=0;r--)e.childNodes[r].nodeName.toLowerCase()!=="svg"&&e.removeChild(e.childNodes[r]);const n=e.firstElementChild;if(n&&n.nodeName.toLowerCase()==="svg"){const r=n.getAttribute("class")||"";if(n.setAttribute("class",(r+" s-ion-icon").trim()),TL(n))return e.innerHTML}return""},TL=t=>{if(t.nodeType===1){if(t.nodeName.toLowerCase()==="script")return!1;for(let e=0;e<t.attributes.length;e++){const n=t.attributes[e].name;if(Rg(n)&&n.toLowerCase().indexOf("on")===0)return!1}for(let e=0;e<t.childNodes.length;e++)if(!TL(t.childNodes[e]))return!1}return!0},G8=t=>t.startsWith("data:image/svg+xml"),K8=t=>t.indexOf(";utf8,")!==-1,Ma=new Map,UA=new Map;let Tw;const Y8=(t,e)=>{let n=UA.get(t);if(!n)if(typeof fetch<"u"&&typeof document<"u")if(G8(t)&&K8(t)){Tw||(Tw=new DOMParser);const i=Tw.parseFromString(t,"text/html").querySelector("svg");return i&&Ma.set(t,i.outerHTML),Promise.resolve()}else n=fetch(t).then(r=>{if(r.ok)return r.text().then(i=>{i&&e!==!1&&(i=H8(i)),Ma.set(t,i||"")});Ma.set(t,"")}),UA.set(t,n);else return Ma.set(t,""),Promise.resolve();return n},X8=":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}",Q8=_r(class extends Zn{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.svgContent=void 0,this.isVisible=!1,this.mode=J8(),this.color=void 0,this.ios=void 0,this.md=void 0,this.flipRtl=void 0,this.name=void 0,this.src=void 0,this.icon=void 0,this.size=void 0,this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=W8(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",()=>{this.isVisible=!0,this.loadIcon()})}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,n,r){if(this.lazy&&typeof window<"u"&&window.IntersectionObserver){const i=this.io=new window.IntersectionObserver(o=>{o[0].isIntersecting&&(i.disconnect(),this.io=void 0,r())},{rootMargin:n});i.observe(e)}else r()}loadIcon(){if(this.isVisible){const e=U8(this);e&&(Ma.has(e)?this.svgContent=Ma.get(e):Y8(e,this.sanitize).then(()=>this.svgContent=Ma.get(e)),this.didLoadIcon=!0)}this.iconName=EL(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:n,inheritedAttributes:r,el:i}=this,o=this.mode||"md",s=n?(n.includes("arrow")||n.includes("chevron"))&&e!==!1:!1,a=e||s;return Ee(Ur,Object.assign({role:"img",class:Object.assign(Object.assign({[o]:!0},Z8(this.color)),{["icon-".concat(this.size)]:!!this.size,"flip-rtl":a,"icon-rtl":a&&q8(i)})},r),this.svgContent?Ee("div",{class:"icon-inner",innerHTML:this.svgContent}):Ee("div",{class:"icon-inner"}))}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return X8}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),J8=()=>typeof document<"u"&&document.documentElement.getAttribute("mode")||"md",Z8=t=>t?{"ion-color":!0,["ion-color-".concat(t)]:!0}:null;function eG(){if(typeof customElements>"u")return;["ion-icon"].forEach(e=>{switch(e){case"ion-icon":customElements.get(e)||customElements.define(e,Q8);break}})}const tG=eG,EE=H.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{},cleanupIonViewWillEnter:()=>{},cleanupIonViewDidEnter:()=>{},cleanupIonViewWillLeave:()=>{},cleanupIonViewDidLeave:()=>{}}),nG=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[],this.ionViewWillEnterDestructorCallbacks=[],this.ionViewDidEnterDestructorCallbacks=[],this.ionViewWillLeaveDestructorCallbacks=[],this.ionViewDidLeaveDestructorCallbacks=[]}onIonViewWillEnter(t){if(t.id){const e=this.ionViewWillEnterCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewWillEnterCallbacks[e]=t:this.ionViewWillEnterCallbacks.push(t)}else this.ionViewWillEnterCallbacks.push(t)}teardownCallback(t,e){const n=e.filter(r=>r.id===t.id);n.length!==0&&(n.forEach(r=>{r&&typeof r.destructor=="function"&&r.destructor()}),e=e.filter(r=>r.id!==t.id))}cleanupIonViewWillEnter(t){this.teardownCallback(t,this.ionViewWillEnterDestructorCallbacks)}cleanupIonViewDidEnter(t){this.teardownCallback(t,this.ionViewDidEnterDestructorCallbacks)}cleanupIonViewWillLeave(t){this.teardownCallback(t,this.ionViewWillLeaveDestructorCallbacks)}cleanupIonViewDidLeave(t){this.teardownCallback(t,this.ionViewDidLeaveDestructorCallbacks)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach(t=>{const e=t();t.id&&this.ionViewWillEnterDestructorCallbacks.push({id:t.id,destructor:e})})}onIonViewDidEnter(t){if(t.id){const e=this.ionViewDidEnterCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewDidEnterCallbacks[e]=t:this.ionViewDidEnterCallbacks.push(t)}else this.ionViewDidEnterCallbacks.push(t)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach(t=>{const e=t();t.id&&this.ionViewDidEnterDestructorCallbacks.push({id:t.id,destructor:e})})}onIonViewWillLeave(t){if(t.id){const e=this.ionViewWillLeaveCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewWillLeaveCallbacks[e]=t:this.ionViewWillLeaveCallbacks.push(t)}else this.ionViewWillLeaveCallbacks.push(t)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach(t=>{const e=t();t.id&&this.ionViewWillLeaveDestructorCallbacks.push({id:t.id,destructor:e})})}onIonViewDidLeave(t){if(t.id){const e=this.ionViewDidLeaveCallbacks.findIndex(n=>n.id===t.id);e>-1?this.ionViewDidLeaveCallbacks[e]=t:this.ionViewDidLeaveCallbacks.push(t)}else this.ionViewDidLeaveCallbacks.push(t)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach(t=>{const e=t();t.id&&this.ionViewDidLeaveDestructorCallbacks.push({id:t.id,destructor:e})}),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(t){this.componentCanBeDestroyedCallback=t}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},jo=H.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:t=>{typeof window<"u"&&(typeof t=="string"?window.location.pathname=t:window.history.back())},navigate:t=>{typeof window<"u"&&(window.location.pathname=t)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(t,e)=>{typeof window<"u"&&(window.location.pathname=e)},resetTab:(t,e)=>{typeof window<"u"&&(window.location.pathname=e)}}),CL=t=>t.toLowerCase().split("-").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(""),IE=t=>t.replace(/([A-Z])/g,e=>"-".concat(e[0].toLowerCase())),TE=(t,e,n={})=>{if(t instanceof Element){const r=rG(t.classList,e,n);r!==""&&(t.className=r),Object.keys(e).forEach(i=>{if(!(i==="children"||i==="style"||i==="ref"||i==="class"||i==="className"||i==="forwardedRef"))if(i.indexOf("on")===0&&i[2]===i[2].toUpperCase()){const o=i.substring(2),s=o[0].toLowerCase()+o.substring(1);CE(s)||oG(t,s,e[i])}else t[i]=e[i],typeof e[i]==="string"&&t.setAttribute(IE(i),e[i])})}},rG=(t,e,n)=>{const r=e.className||e.class,i=n.className||n.class,o=Cw(t),s=Cw(r?r.split(" "):[]),a=Cw(i?i.split(" "):[]),u=[];return o.forEach(l=>{s.has(l)?(u.push(l),s.delete(l)):a.has(l)||u.push(l)}),s.forEach(l=>u.push(l)),u.join(" ")},iG=t=>{switch(t){case"doubleclick":return"dblclick"}return t};/**
 * Checks if an event is supported in the current execution environment.
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */const CE=t=>{if(typeof document>"u")return!0;{const e="on"+iG(t);let n=e in document;if(!n){const r=document.createElement("div");r.setAttribute(e,"return;"),n=typeof r[e]=="function"}return n}},oG=(t,e,n)=>{const r=t.__events||(t.__events={}),i=r[e];i&&t.removeEventListener(e,i),t.addEventListener(e,r[e]=function(s){n&&n.call(this,s)})},Cw=t=>{const e=new Map;return t.forEach(n=>e.set(n,n)),e},sG=(t,e)=>{typeof t=="function"?t(e):t!=null&&(t.current=e)},kE=(...t)=>e=>{t.forEach(n=>{sG(n,e)})},aG=(t,e)=>{const n=(r,i)=>H.createElement(t,Object.assign({},r,{forwardedRef:i}));return n.displayName=e,H.forwardRef(n)},uG=(t,e)=>{e!==void 0&&typeof customElements<"u"&&!customElements.get(t)&&customElements.define(t,e)},Uo=(t,e,n,r)=>{r!==void 0&&r();const i=CL(t),o=class extends H.Component{constructor(s){super(s),this.setComponentElRef=a=>{this.componentEl=a}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(s){TE(this.componentEl,this.props,s)}render(){const s=this.props,{children:a,forwardedRef:u,style:l,className:c,ref:d}=s,h=Jt(s,["children","forwardedRef","style","className","ref"]);let f=Object.keys(h).reduce((v,y)=>{const g=h[y];if(y.indexOf("on")===0&&y[2]===y[2].toUpperCase()){const w=y.substring(2).toLowerCase();typeof document<"u"&&CE(w)&&(v[y]=g)}else{const w=typeof g;(w==="string"||w==="boolean"||w==="number")&&(v[IE(y)]=g)}return v},{});n&&(f=n(this.props,f));const m=Object.assign(Object.assign({},f),{ref:kE(u,this.setComponentElRef),style:l});return Q.createElement(t,m,a)}static get displayName(){return i}};return e&&(o.contextType=e),aG(o,i)},Df=Uo("ion-card-content",void 0,void 0,d9),qt=Uo("ion-content",void 0,void 0,C9),kL=Uo("ion-grid",void 0,void 0,$9),Dc=(t,e)=>{const n=(r,i)=>H.createElement(t,Object.assign({},r,{forwardedRef:i}));return n.displayName=e,H.forwardRef(n)},SE=()=>{if(typeof window<"u"){const t=window.Ionic;if(t&&t.config)return t.config}return null},SL=(t,e)=>{uG(t,e);const n=CL(t),r=class extends H.Component{constructor(i){super(i),this.handleClick=o=>{const{routerLink:s,routerDirection:a,routerOptions:u,routerAnimation:l}=this.props;s!==void 0&&(o.preventDefault(),this.context.navigate(s,a,void 0,l,u))},this.ref=H.createRef(),this.stableMergedRefs=kE(this.ref,this.props.forwardedRef)}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(i){const o=this.ref.current;TE(o,this.props,i)}render(){const i=this.props,{children:o,forwardedRef:s,style:a,className:u,ref:l}=i,c=Jt(i,["children","forwardedRef","style","className","ref"]),d=Object.keys(c).reduce((f,m)=>{if(m.indexOf("on")===0&&m[2]===m[2].toUpperCase()){const v=m.substring(2).toLowerCase();CE(v)&&(f[m]=c[m])}else["string","boolean","number"].includes(typeof c[m])&&(f[IE(m)]=c[m]);return f},{}),h=Object.assign(Object.assign({},d),{ref:this.stableMergedRefs,style:a});if(this.props.routerLink&&!this.props.href&&(h.href=this.props.routerLink),h.onClick){const f=h.onClick;h.onClick=m=>{f(m),m.defaultPrevented||this.handleClick(m)}}else h.onClick=this.handleClick;return Q.createElement(t,h,o)}static get displayName(){return n}static get contextType(){return jo}};return Dc(r,n)},lu=SL("ion-button",H9),zi=SL("ion-card",J9),lG=H.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),cG=({onAddOverlay:t,onRemoveOverlay:e})=>{const[n,r]=Q.useState({}),i=Q.useRef({});Q.useEffect(()=>{t(o),e(s)},[]);const o=(u,l,c)=>{const d=Object.assign({},i.current);d[u]={component:l,containerElement:c},i.current=d,r(d)},s=u=>{const l=Object.assign({},i.current);delete l[u],i.current=l,r(l)},a=Object.keys(n);return H.createElement(H.Fragment,null,a.map(u=>{const l=n[u];return r5.createPortal(l.component,l.containerElement,"overlay-".concat(u))}))},dG=Uo("ion-tab-button",void 0,void 0,B8),hG=Uo("ion-tab-bar",void 0,void 0,D8),Px=Uo("ion-router-outlet",void 0,void 0,C8),fG=Uo("ion-app",void 0,void 0,x8),pG=Uo("ion-icon",void 0,void 0,tG),mG=class extends H.Component{constructor(t){super(t),this.ionContext={addOverlay:(e,n,r)=>{this.addOverlayCallback&&this.addOverlayCallback(e,n,r)},removeOverlay:e=>{this.removeOverlayCallback&&this.removeOverlayCallback(e)}}}render(){return H.createElement(lG.Provider,{value:this.ionContext},H.createElement(fG,Object.assign({},this.props),this.props.children),H.createElement(cG,{onAddOverlay:t=>{this.addOverlayCallback=t},onRemoveOverlay:t=>{this.removeOverlayCallback=t}}))}static get displayName(){return"IonApp"}},AE=H.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class AL extends H.PureComponent{constructor(e){super(e),this.ionPageElementRef=H.createRef(),this.stableMergedRefs=kE(this.ionPageElementRef,this.props.forwardedRef),this.ionViewWillEnterHandler=this.ionViewWillEnterHandler.bind(this),this.ionViewDidEnterHandler=this.ionViewDidEnterHandler.bind(this),this.ionViewWillLeaveHandler=this.ionViewWillLeaveHandler.bind(this),this.ionViewDidLeaveHandler=this.ionViewDidLeaveHandler.bind(this)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{className:n,children:r,routeInfo:i,forwardedRef:o}=e,s=Jt(e,["className","children","routeInfo","forwardedRef"]);return H.createElement(EE.Consumer,null,a=>(this.ionLifeCycleContext=a,H.createElement("div",Object.assign({className:n?"".concat(n," ion-page"):"ion-page",ref:this.stableMergedRefs},s),r)))}static get contextType(){return AE}}class gG extends H.Component{constructor(e){super(e)}render(){const e=this.props,{className:n,children:r,forwardedRef:i}=e,o=Jt(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?H.createElement(AL,Object.assign({className:n?"".concat(n):"",routeInfo:this.context.routeInfo,forwardedRef:i},o),r):H.createElement("div",Object.assign({className:n?"ion-page ".concat(n):"ion-page",ref:i},o),r)}static get displayName(){return"IonPage"}static get contextType(){return jo}}const Ht=Dc(gG,"IonPage"),zA={main:0},Dh=(t="main")=>{var e;const n=((e=zA[t])!==null&&e!==void 0?e:0)+1;return zA[t]=n,n.toString()},vG=(t,e)=>{const n=new WeakMap,r="react-delegate-".concat(Dh());let i=0;return{attachViewToDom:async(a,u,l,c)=>{const d=document.createElement("div");c&&d.classList.add(...c),a.appendChild(d);const h=u(l),f="".concat(r,"-").concat(i++),m=Q1.createPortal(h,d,f);return n.set(d,m),t(m),Promise.resolve(d)},removeViewFromDom:(a,u)=>{const l=n.get(u);return l&&e(l),u.remove(),Promise.resolve()}}},yG=Uo("ion-nav",void 0,void 0,q9),wG=t=>{var{children:e,forwardedRef:n}=t,r=Jt(t,["children","forwardedRef"]);const[i,o]=Q.useState([]),s=l=>o(c=>[...c,l]),a=l=>o(c=>c.filter(d=>d!==l)),u=Q.useMemo(()=>vG(s,a),[]);return H.createElement(yG,Object.assign({delegate:u,ref:n},r),i)};Dc(wG,"IonNav");H.createContext({activeTab:void 0,selectTab:()=>!1});const bG=typeof HTMLElement<"u"?HTMLElement:class{};class xG extends H.Component{constructor(e){super(e),this.outletIsReady=!1,this.ionViewWillEnterHandler=this.ionViewWillEnterHandler.bind(this),this.ionViewDidEnterHandler=this.ionViewDidEnterHandler.bind(this),this.ionViewWillLeaveHandler=this.ionViewWillLeaveHandler.bind(this),this.ionViewDidLeaveHandler=this.ionViewDidLeaveHandler.bind(this)}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||rc(this.ionRouterOutlet,()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)}),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{StackManager:n,children:r,routeInfo:i}=e,o=Jt(e,["StackManager","children","routeInfo"]);return H.createElement(EE.Consumer,null,s=>(this.ionLifeCycleContext=s,H.createElement(n,{routeInfo:i},H.createElement(Px,Object.assign({setRef:a=>this.ionRouterOutlet=a},o),r))))}static get contextType(){return AE}}class _G extends H.Component{constructor(e){super(e)}render(){const e=this.context.getStackManager(),n=this.props,{children:r,forwardedRef:i}=n,o=Jt(n,["children","forwardedRef"]);return this.context.hasIonicRouter()?o.ionPage?H.createElement(xG,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},o),r):H.createElement(e,{routeInfo:this.context.routeInfo},H.createElement(Px,Object.assign({},o,{forwardedRef:i}),r)):H.createElement(Px,Object.assign({ref:i},this.props),this.props.children)}static get contextType(){return jo}}const EG=Dc(_G,"IonRouterOutlet"),kw=class extends H.Component{constructor(t){super(t),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const t=this.props,e=Jt(t,["onClick"]);return H.createElement(dG,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},e))}static get displayName(){return"IonTabButton"}};class IG extends H.PureComponent{constructor(e){super(e),this.setActiveTabOnContext=r=>{};const n={};H.Children.forEach(e.children,r=>{var i,o,s,a;r!=null&&typeof r=="object"&&r.props&&(r.type===kw||r.type.isTabButton)&&(n[r.props.tab]={originalHref:r.props.href,currentHref:r.props.href,originalRouteOptions:r.props.href===((i=e.routeInfo)===null||i===void 0?void 0:i.pathname)?(o=e.routeInfo)===null||o===void 0?void 0:o.routeOptions:void 0,currentRouteOptions:r.props.href===((s=e.routeInfo)===null||s===void 0?void 0:s.pathname)?(a=e.routeInfo)===null||a===void 0?void 0:a.routeOptions:void 0})}),this.state={tabs:n},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const e=this.state.tabs,r=Object.keys(e).find(i=>{const o=e[i].originalHref;return this.props.routeInfo.pathname.startsWith(o)});r&&this.setState({activeTab:r})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(e){const n=this.state.tabs[e];return n?(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:n.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0):!1}static getDerivedStateFromProps(e,n){var r,i,o;const s=Object.assign({},n.tabs),u=Object.keys(n.tabs).find(c=>{const d=n.tabs[c].originalHref;return e.routeInfo.pathname.startsWith(d)});H.Children.forEach(e.children,c=>{if(c!=null&&typeof c=="object"&&c.props&&(c.type===kw||c.type.isTabButton)){const d=s[c.props.tab];(!d||d.originalHref!==c.props.href)&&(s[c.props.tab]={originalHref:c.props.href,currentHref:c.props.href,originalRouteOptions:c.props.routeOptions,currentRouteOptions:c.props.routeOptions})}});const{activeTab:l}=n;if(u&&l){const c=n.tabs[l].currentHref,d=n.tabs[l].currentRouteOptions;(u!==l||c!==((r=e.routeInfo)===null||r===void 0?void 0:r.pathname)||d!==((i=e.routeInfo)===null||i===void 0?void 0:i.routeOptions))&&(s[u]={originalHref:s[u].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:s[u].originalRouteOptions,currentRouteOptions:(o=e.routeInfo)===null||o===void 0?void 0:o.routeOptions},e.routeInfo.routeAction==="pop"&&u!==l&&(s[l]={originalHref:s[l].originalHref,currentHref:s[l].originalHref,originalRouteOptions:s[l].originalRouteOptions,currentRouteOptions:s[l].currentRouteOptions}))}return u&&e.onSetCurrentTab(u,e.routeInfo),{activeTab:u,tabs:s}}onTabButtonClick(e,n){const r=this.state.tabs[e.detail.tab],i=r.originalHref,o=e.detail.href,{activeTab:s}=this.state;n&&n(e),s===e.detail.tab?i!==o&&this.context.resetTab(e.detail.tab,i,r.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,o,e.detail.routeOptions))}renderTabButton(e){return n=>{var r,i;if(n!=null&&n.props&&(n.type===kw||n.type.isTabButton)){const o=n.props.tab===e?(r=this.props.routeInfo)===null||r===void 0?void 0:r.pathname:this.state.tabs[n.props.tab].currentHref,s=n.props.tab===e?(i=this.props.routeInfo)===null||i===void 0?void 0:i.routeOptions:this.state.tabs[n.props.tab].currentRouteOptions;return H.cloneElement(n,{href:o,routeOptions:s,onClick:a=>this.onTabButtonClick(a,n.props.onClick)})}return null}}render(){const{activeTab:e}=this.state;return H.createElement(hG,Object.assign({},this.props,{selectedTab:e}),H.Children.map(this.props.children,this.renderTabButton(e)))}static get contextType(){return jo}}const TG=H.memo(t=>{var{forwardedRef:e}=t,n=Jt(t,["forwardedRef"]);const r=Q.useContext(jo);return H.createElement(IG,Object.assign({ref:e},n,{routeInfo:n.routeInfo||r.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:r.setCurrentTab}),n.children)});Dc(TG,"IonTabBar");class CG extends bG{constructor(){super()}}typeof window<"u"&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",CG));class kG extends H.PureComponent{constructor(e){super(e),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var e,n;const r=this.props,{icon:i,ios:o,md:s,mode:a}=r,u=Jt(r,["icon","ios","md","mode"]);let l;const c=SE(),d=a||(c==null?void 0:c.get("mode"));return o||s?d==="ios"?l=(e=o!=null?o:s)!==null&&e!==void 0?e:i:l=(n=s!=null?s:o)!==null&&n!==void 0?n:i:l=i,H.createElement(pG,Object.assign({ref:this.props.forwardedRef,icon:l},u),this.props.children)}static get contextType(){return jo}}Dc(kG,"IonIcon");class RE extends H.PureComponent{render(){const e=this.context.getIonRoute();return!this.context.hasIonicRouter()||!RE?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null):H.createElement(e,Object.assign({},this.props))}static get contextType(){return jo}}class RL extends H.PureComponent{render(){const e=this.context.getIonRedirect();return!this.context.hasIonicRouter()||!RL?(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRedirect>"),null):H.createElement(e,Object.assign({},this.props))}static get contextType(){return jo}}const SG=H.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});class ede extends H.PureComponent{constructor(e){super(e),this.nodes=new Map,this.animation=eo(e.id)}setupAnimation(e){const n=this.animation;this.nodes.size>0&&n.addElement(Array.from(this.nodes.values())),WA(n,e),qA(n,e)}componentDidMount(){const e=this.props;this.setupAnimation(e)}componentDidUpdate(e){const n=this.animation,r=this.props;WA(n,r,e),AG(n,r,e),qA(n,r,e)}render(){const{children:e}=this.props;return H.createElement(H.Fragment,null,H.Children.map(e,(n,r)=>H.cloneElement(n,{ref:i=>this.nodes.set(r,i)})))}}const WA=(t,e={},n={})=>{const r=["children","progressStart","progressStep","progressEnd","pause","stop","destroy","play","from","to","fromTo","onFinish"];for(const u in e)e.hasOwnProperty(u)&&!r.includes(u)&&e[u]!==n[u]&&t[u](e[u]);const i=e.from;i&&i!==n.from&&(Array.isArray(i)?i:[i]).forEach(l=>t.from(l.property,l.value));const o=e.to;o&&o!==n.to&&(Array.isArray(o)?o:[o]).forEach(l=>t.to(l.property,l.value));const s=e.fromTo;s&&s!==n.fromTo&&(Array.isArray(s)?s:[s]).forEach(l=>t.fromTo(l.property,l.fromValue,l.toValue));const a=e.onFinish;a&&a!==n.onFinish&&(Array.isArray(a)?a:[a]).forEach(l=>t.onFinish(l.callback,l.opts))},AG=(t,e={},n={})=>{var r,i,o,s,a;const{progressStart:u,progressStep:l,progressEnd:c}=e;u&&(((r=n.progressStart)===null||r===void 0?void 0:r.forceLinearEasing)!==(u==null?void 0:u.forceLinearEasing)||((i=n.progressStart)===null||i===void 0?void 0:i.step)!==(u==null?void 0:u.step))&&t.progressStart(u.forceLinearEasing,u.step),l&&((o=n.progressStep)===null||o===void 0?void 0:o.step)!==(l==null?void 0:l.step)&&t.progressStep(l.step),c&&(((s=n.progressEnd)===null||s===void 0?void 0:s.playTo)!==(c==null?void 0:c.playTo)||((a=n.progressEnd)===null||a===void 0?void 0:a.step)!==(c==null?void 0:c.step)||(n==null?void 0:n.dur)!==(c==null?void 0:c.dur))&&t.progressEnd(c.playTo,c.step,c.dur)},qA=(t,e={},n={})=>{!n.play&&e.play&&t.play(),!n.pause&&e.pause&&t.pause(),!n.stop&&e.stop&&t.stop(),!n.destroy&&e.destroy&&t.destroy()};function RG(t,e,n){const r=Q.useRef(),i=Q.useMemo(()=>"on".concat(t,"DidDismiss"),[t]),o=Q.useMemo(()=>"on".concat(t,"DidPresent"),[t]),s=Q.useMemo(()=>"on".concat(t,"WillDismiss"),[t]),a=Q.useMemo(()=>"on".concat(t,"WillPresent"),[t]);n();const u=Q.useCallback(async c=>{if(r.current)return;const{onDidDismiss:d,onWillDismiss:h,onDidPresent:f,onWillPresent:m}=c,v=Jt(c,["onDidDismiss","onWillDismiss","onDidPresent","onWillPresent"]),y=g=>{d&&d(g),r.current=void 0};r.current=await e.create(Object.assign({},v)),TE(r.current,{[i]:y,[o]:g=>f&&f(g),[s]:g=>h&&h(g),[a]:g=>m&&m(g)}),r.current.present()},[e]),l=Q.useCallback(async()=>{r.current&&await r.current.dismiss(),r.current=void 0},[]);return{present:u,dismiss:l}}function NG(){const t=RG("IonToast",CH,p8);return[Q.useCallback((n,r)=>typeof n=="string"?t.present({message:n,duration:r}):t.present(n),[t.present]),t.dismiss]}const PG=(t={})=>{typeof document<"u"&&document.documentElement.classList.add("ion-ce"),lH(Object.assign({},t))},NL=H.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class HA extends H.Component{constructor(e){super(e),this.ionLifeCycleContext=new nG,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed(()=>{this.props.mount||this._isMounted&&this.setState({show:!1},()=>this.props.removeView())}),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:e}=this.state;return H.createElement(EE.Provider,{value:this.ionLifeCycleContext},e&&this.props.children)}}class DG{constructor(){this.locationHistory=[],this.tabHistory={}}add(e){e.routeAction==="push"||e.routeAction==null?this._add(e):e.routeAction==="pop"?this._pop(e):e.routeAction==="replace"&&this._replace(e),e.routeDirection==="root"&&(this._clear(),this._add(e))}clearTabStack(e){const n=this._getRouteInfosByKey(e);n&&(n.forEach(r=>{this.locationHistory=this.locationHistory.filter(i=>i.id!==r.id)}),this.tabHistory[e]=[])}update(e){const n=this.locationHistory.findIndex(i=>i.id===e.id);n>-1&&this.locationHistory.splice(n,1,e);const r=this.tabHistory[e.tab||""];if(r){const i=r.findIndex(o=>o.id===e.id);i>-1?r.splice(i,1,e):r.push(e)}else e.tab&&(this.tabHistory[e.tab]=[e])}_add(e){const n=this._getRouteInfosByKey(e.tab);n&&(this._areRoutesEqual(n[n.length-1],e)&&n.pop(),n.push(e)),this.locationHistory.push(e)}_areRoutesEqual(e,n){return!e||!n?!1:e.pathname===n.pathname&&e.search===n.search}_pop(e){const n=this._getRouteInfosByKey(e.tab);n&&(n.pop(),n.pop(),n.push(e)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(e)}_replace(e){const n=this._getRouteInfosByKey(e.tab);n&&n.pop(),this.locationHistory.pop(),this._add(e)}_clear(){Object.keys(this.tabHistory).forEach(n=>this.tabHistory[n]=[]),this.locationHistory=[]}_getRouteInfosByKey(e){let n;return e&&(n=this.tabHistory[e],n||(n=this.tabHistory[e]=[])),n}getFirstRouteInfoForTab(e){const n=this._getRouteInfosByKey(e);if(n)return n[0]}getCurrentRouteInfoForTab(e){const n=this._getRouteInfosByKey(e);if(n)return n[n.length-1]}findLastLocation(e){const n=this._getRouteInfosByKey(e.tab);if(n)for(let r=n.length-2;r>=0;r--){const i=n[r];if(i&&i.pathname===e.pushedByRoute)return i}for(let r=this.locationHistory.length-2;r>=0;r--){const i=this.locationHistory[r];if(i&&i.pathname===e.pushedByRoute)return i}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class OG extends H.PureComponent{constructor(e){super(e),this.ionRouterContextValue={push:(n,r,i,o,s)=>{this.navigate(n,r,i,s,o)},back:n=>{this.goBack(void 0,n)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){typeof document<"u"&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){typeof document<"u"&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(e){e.detail.register(0,n=>{this.nativeGoBack(),n()})}goBack(e,n){this.props.onNavigateBack(e,n)}nativeGoBack(){this.props.onNativeBack()}navigate(e,n="forward",r="push",i,o,s){this.props.onNavigate(e,r,n,i,o,s)}getPageManager(){return AL}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return H.createElement(jo.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},H.createElement(SG.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class LG{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(e){const{outletId:n}=e;this.viewStacks[n]?this.viewStacks[n].push(e):this.viewStacks[n]=[e]}clear(e){return setTimeout(()=>{delete this.viewStacks[e]},500)}getViewItemsForOutlet(e){return this.viewStacks[e]||[]}remove(e){const{outletId:n}=e,r=this.viewStacks[n];if(r){const i=r.find(o=>o.id===e.id);i&&(i.mount=!1,this.viewStacks[n]=r.filter(o=>o.id!==i.id))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const e=this.getStackIds(),n=[];return e.forEach(r=>{n.push(...this.viewStacks[r])}),n}}class MG extends H.PureComponent{render(){return H.createElement(wt,Object.assign({path:this.props.path,exact:this.props.exact,render:this.props.render},this.props.computedMatch!==void 0?{computedMatch:this.props.computedMatch}:{}))}}const Oh=({pathname:t,componentProps:e})=>{const{exact:n,component:r}=e,i=e.path||e.from,s=ty(t,{exact:n,path:i,component:r});return s||!1};class VG extends LG{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(e,n,r,i){const o={id:Dh("viewItem"),outletId:e,ionPageElement:i,reactElement:n,mount:!0,ionRoute:!1};return n.type===RE&&(o.ionRoute=!0,o.disableIonPageManagement=n.props.disableIonPageManagement),o.routeData={match:Oh({pathname:r.pathname,componentProps:n.props}),childProps:n.props},o}getChildrenToRender(e,n,r){const i=this.getViewItemsForOutlet(e);return H.Children.forEach(n.props.children,s=>{const a=i.find(u=>GA(s,u.routeData.childProps.path||u.routeData.childProps.from));a&&(a.reactElement=s)}),i.map(s=>{let a;if(s.ionRoute&&!s.disableIonPageManagement)a=H.createElement(HA,{key:"view-".concat(s.id),mount:s.mount,removeView:()=>this.remove(s)},H.cloneElement(s.reactElement,{computedMatch:s.routeData.match}));else{const u=GA(s.reactElement,r.pathname);a=H.createElement(HA,{key:"view-".concat(s.id),mount:s.mount,removeView:()=>this.remove(s)},H.cloneElement(s.reactElement,{computedMatch:s.routeData.match})),!u&&s.routeData.match&&(s.routeData.match=void 0,s.mount=!1)}return a})}findViewItemByRouteInfo(e,n,r){const{viewItem:i,match:o}=this.findViewItemByPath(e.pathname,n);return(r===void 0||r===!0)&&i&&o&&(i.routeData.match=o),i}findLeavingViewItemByRouteInfo(e,n,r=!0){const{viewItem:i}=this.findViewItemByPath(e.lastPathname,n,r);return i}findViewItemByPathname(e,n){const{viewItem:r}=this.findViewItemByPath(e,n);return r}findViewItemByPath(e,n,r){let i,o,s;if(n)s=this.getViewItemsForOutlet(n),s.some(a),i||s.some(u);else{const l=this.getAllViewItems();l.some(a),i||l.some(u)}return{viewItem:i,match:o};function a(l){var c,d;if(r&&!l.ionRoute)return!1;if(o=Oh({pathname:e,componentProps:l.routeData.childProps}),o){const h=o.path.includes(":");if(!h||h&&o.url===((d=(c=l.routeData)===null||c===void 0?void 0:c.match)===null||d===void 0?void 0:d.url))return i=l,!0}return!1}function u(l){return!l.routeData.childProps.path&&!l.routeData.childProps.from?(o={path:e,url:e,isExact:!0,params:{}},i=l,!0):!1}}}function GA(t,e){return Oh({pathname:e,componentProps:t.props})}function FG(t){let e;if(typeof t=="string"?e=t:e=t.outerHTML,document){const n=document.createElement("div");n.innerHTML=e,n.style.zIndex="";const r=n.getElementsByTagName("ion-back-button");return r[0]&&r[0].remove(),n.firstChild}}const KA=t=>!t.classList.contains("ion-page-invisible")&&!t.classList.contains("ion-page-hidden");class $G extends H.PureComponent{constructor(e){super(e),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=Dh("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(e){const{pathname:n}=this.props.routeInfo,{pathname:r}=e.routeInfo;n!==r?(this.prevProps=e,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(e){var n,r;if(!this.routerOutletElement||!this.routerOutletElement.commit)this.pendingPageTransition=!0;else{let i=this.context.findViewItemByRouteInfo(e,this.id),o=this.context.findLeavingViewItemByRouteInfo(e,this.id);!o&&e.prevRouteLastPathname&&(o=this.context.findViewItemByPathname(e.prevRouteLastPathname,this.id)),o&&(e.routeAction==="replace"?o.mount=!1:e.routeAction==="push"&&e.routeDirection==="forward"?!((n=e.routeOptions)===null||n===void 0)&&n.unmount&&(o.mount=!1):e.routeDirection!=="none"&&i!==o&&(o.mount=!1));const s=BG((r=this.ionRouterOutlet)===null||r===void 0?void 0:r.props.children,e);if(i?i.reactElement=s:s&&(i=this.context.createViewItem(this.id,s,e),this.context.addViewItem(i)),i&&i.ionPageElement){if(i===o&&i.routeData.match.url!==e.pathname||(!o&&this.props.routeInfo.prevRouteLastPathname&&(o=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),KA(i.ionPageElement)&&o!==void 0&&!KA(o.ionPageElement)))return;this.transitionPage(e,i,o)}else o&&!s&&!i&&o.ionPageElement&&(o.ionPageElement.classList.add("ion-page-hidden"),o.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}}registerIonPage(e,n){const r=this.context.findViewItemByRouteInfo(n,this.id);if(r){const i=r.ionPageElement;if(r.ionPageElement=e,r.ionRoute=!0,i===e)return}this.handlePageTransition(n)}async setupRouterOutlet(e){const n=()=>{const o=SE();if(!(o&&o.get("swipeBackEnabled",e.mode==="ios")))return!1;const{routeInfo:a}=this.props,u=this.prevProps&&this.prevProps.routeInfo.pathname===a.pushedByRoute?this.prevProps.routeInfo:{pathname:a.pushedByRoute||""},l=this.context.findViewItemByRouteInfo(u,this.id,!1);return!!l&&l.mount&&l.routeData.match.path!==a.pathname},r=async()=>{const{routeInfo:o}=this.props,s=this.prevProps&&this.prevProps.routeInfo.pathname===o.pushedByRoute?this.prevProps.routeInfo:{pathname:o.pushedByRoute||""},a=this.context.findViewItemByRouteInfo(s,this.id,!1),u=this.context.findViewItemByRouteInfo(o,this.id,!1);return a&&u&&await this.transitionPage(o,a,u,"back",!0),Promise.resolve()},i=o=>{if(o)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:s}=this.props,a=this.prevProps&&this.prevProps.routeInfo.pathname===s.pushedByRoute?this.prevProps.routeInfo:{pathname:s.pushedByRoute||""},u=this.context.findViewItemByRouteInfo(a,this.id,!1),l=this.context.findViewItemByRouteInfo(s,this.id,!1);if(u!==l&&(u==null?void 0:u.ionPageElement)!==void 0){const{ionPageElement:c}=u;c.setAttribute("aria-hidden","true"),c.classList.add("ion-page-hidden")}}};e.swipeHandler={canStart:n,onStart:r,onEnd:i}}async transitionPage(e,n,r,i,o=!1){const s=async(c,d)=>{const h=this.skipTransition;h?this.skipTransition=!1:(c.classList.add("ion-page"),c.classList.add("ion-page-invisible")),await a.commit(c,d,{duration:h||l===void 0?0:void 0,direction:l,showGoBack:!!e.pushedByRoute,progressAnimation:o,animationBuilder:e.routeAnimation})},a=this.routerOutletElement,u=e.routeDirection==="none"||e.routeDirection==="root"?void 0:e.routeDirection,l=i!=null?i:u;if(n&&n.ionPageElement&&this.routerOutletElement)if(r&&r.ionPageElement&&n===r)if(jG(r.reactElement,e.pathname,!0)){const d=FG(r.ionPageElement.outerHTML);d&&(this.routerOutletElement.appendChild(d),await s(n.ionPageElement,d),this.routerOutletElement.removeChild(d))}else await s(n.ionPageElement,void 0);else await s(n.ionPageElement,r==null?void 0:r.ionPageElement),r&&r.ionPageElement&&!o&&(r.ionPageElement.classList.add("ion-page-hidden"),r.ionPageElement.setAttribute("aria-hidden","true"))}render(){const{children:e}=this.props,n=H.Children.only(e);this.ionRouterOutlet=n;const r=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,()=>{this.forceUpdate()});return H.createElement(AE.Provider,{value:this.stackContextValue},H.cloneElement(n,{ref:i=>{n.props.setRef&&n.props.setRef(i),n.props.forwardedRef&&(n.props.forwardedRef.current=i),this.routerOutletElement=i;const{ref:o}=n;typeof o=="function"&&o(i)}},r))}static get contextType(){return NL}}function BG(t,e){let n;return H.Children.forEach(t,r=>{Oh({pathname:e.pathname,componentProps:r.props})&&(n=r)}),n||(H.Children.forEach(t,r=>{r.props.path||r.props.from||(n=r)}),n)}function jG(t,e,n){return Oh({pathname:e,componentProps:Object.assign(Object.assign({},t.props),{exact:n})})}class UG extends H.PureComponent{constructor(e){super(e),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new DG,this.viewStack=new VG,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const n={id:Dh("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(n),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:n}}handleChangeTab(e,n,r){if(!n)return;const i=this.locationHistory.getCurrentRouteInfoForTab(e),[o,s]=n.split("?");i?(this.incomingRouteParams=Object.assign(Object.assign({},i),{routeAction:"push",routeDirection:"none"}),i.pathname===o?(this.incomingRouteParams.routeOptions=r,this.props.history.push(i.pathname+(i.search||""))):(this.incomingRouteParams.pathname=o,this.incomingRouteParams.search=s?"?"+s:void 0,this.incomingRouteParams.routeOptions=r,this.props.history.push(o+(s?"?"+s:"")))):this.handleNavigate(o,"push","none",void 0,r,e)}handleHistoryChange(e,n){var r,i,o;let s;if(this.incomingRouteParams?this.incomingRouteParams.routeAction==="replace"?s=this.locationHistory.previous():s=this.locationHistory.current():s=this.locationHistory.current(),s.pathname+s.search!==e.pathname){if(!this.incomingRouteParams){if(n==="REPLACE"&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),n==="POP"){const l=this.locationHistory.current();if(l&&l.pushedByRoute){const c=this.locationHistory.findLastLocation(l);this.incomingRouteParams=Object.assign(Object.assign({},c),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:((r=e.state)===null||r===void 0?void 0:r.direction)||"forward",routeOptions:(i=e.state)===null||i===void 0?void 0:i.routerOptions,tab:this.currentTab})}let u;if(!((o=this.incomingRouteParams)===null||o===void 0)&&o.id)u=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:s.pathname}),this.locationHistory.add(u);else{const l=this.incomingRouteParams.routeAction==="push"&&this.incomingRouteParams.routeDirection==="forward";if(u=Object.assign(Object.assign({id:Dh("routeInfo")},this.incomingRouteParams),{lastPathname:s.pathname,pathname:e.pathname,search:e.search,params:this.props.match.params,prevRouteLastPathname:s.lastPathname}),l)u.tab=s.tab,u.pushedByRoute=s.pathname;else if(u.routeAction==="pop"){const c=this.locationHistory.findLastLocation(u);u.pushedByRoute=c==null?void 0:c.pushedByRoute}else if(u.routeAction==="push"&&u.tab!==s.tab){const c=this.locationHistory.getCurrentRouteInfoForTab(u.tab);u.pushedByRoute=c==null?void 0:c.pushedByRoute}else if(u.routeAction==="replace"){const c=this.locationHistory.current(),d=c==null?void 0:c.pushedByRoute,h=d!==void 0&&d!==u.pathname?d:u.pushedByRoute;u.lastPathname=(c==null?void 0:c.pathname)||u.lastPathname,u.prevRouteLastPathname=c==null?void 0:c.lastPathname,u.pushedByRoute=h,u.routeDirection=u.routeDirection||(c==null?void 0:c.routeDirection),u.routeAnimation=u.routeAnimation||(c==null?void 0:c.routeAnimation)}this.locationHistory.add(u)}this.setState({routeInfo:u})}this.incomingRouteParams=void 0}handleNativeBack(){const e=this.props.history;(e.goBack||e.back)()}handleNavigate(e,n,r,i,o,s){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:n,routeDirection:r,routeOptions:o,routeAnimation:i,tab:s}),n==="push"?this.props.history.push(e):this.props.history.replace(e)}handleNavigateBack(e="/",n){const r=SE();e=e||r&&r.get("backButtonDefaultHref");const i=this.locationHistory.current();if(i&&i.pushedByRoute){const o=this.locationHistory.findLastLocation(i);if(o){const s=n||i.routeAnimation;if(this.incomingRouteParams=Object.assign(Object.assign({},o),{routeAction:"pop",routeDirection:"back",routeAnimation:s}),i.lastPathname===i.pushedByRoute||o.pathname===i.pushedByRoute&&i.tab===""&&o.tab===""){const a=this.props.history;(a.goBack||a.back)()}else this.handleNavigate(o.pathname+(o.search||""),"pop","back",s)}else this.handleNavigate(e,"pop","back",n)}else this.handleNavigate(e,"pop","back",n)}handleResetTab(e,n,r){const i=this.locationHistory.getFirstRouteInfoForTab(e);if(i){const o=Object.assign({},i);o.pathname=n,o.routeOptions=r,this.incomingRouteParams=Object.assign(Object.assign({},o),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(o.pathname+(o.search||""))}}handleSetCurrentTab(e){this.currentTab=e;const n=Object.assign({},this.locationHistory.current());n.tab!==e&&(n.tab=e,this.locationHistory.update(n))}render(){return H.createElement(NL.Provider,{value:this.routeMangerContextState},H.createElement(OG,{ionRoute:MG,ionRedirect:{},stackManager:$G,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const iy=hW(UG);iy.displayName="IonRouter";class zG extends H.Component{constructor(e){super(e);const{history:n}=e,r=Jt(e,["history"]);this.history=n||mO(r),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,n){const r=e.location||e,i=e.action||n;this.historyListenHandler&&this.historyListenHandler(r,i)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:n}=e,r=Jt(e,["children"]);return H.createElement(Nu,Object.assign({history:this.history},r),H.createElement(iy,{registerHistoryListener:this.registerHistoryListener},n))}}class tde extends H.Component{constructor(e){super(e),this.history=e.history,this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,n){const r=e.location||e,i=e.action||n;this.historyListenHandler&&this.historyListenHandler(r,i)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:n}=e,r=Jt(e,["children"]);return H.createElement(Nu,Object.assign({},r),H.createElement(iy,{registerHistoryListener:this.registerHistoryListener},n))}}class nde extends H.Component{constructor(e){super(e);const{history:n}=e,r=Jt(e,["history"]);this.history=n||vO(r),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,n){const r=e.location||e,i=e.action||n;this.historyListenHandler&&this.historyListenHandler(r,i)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:n}=e,r=Jt(e,["children"]);return H.createElement(Nu,Object.assign({history:this.history},r),H.createElement(iy,{registerHistoryListener:this.registerHistoryListener},n))}}const WG="/assets/bbaebdf1499184fa6c34242ca25181bb 1-B_InEx99.png";var YA={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},qG=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],a=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},DL={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,c=o>>2,d=(o&3)<<4|a>>4;let h=(a&15)<<2|l>>6,f=l&63;u||(f=64,s||(h=64)),r.push(n[c],n[d],n[h],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(PL(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):qG(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const l=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||a==null||l==null||d==null)throw new HG;const h=o<<2|a>>4;if(r.push(h),l!==64){const f=a<<4&240|l>>2;if(r.push(f),d!==64){const m=l<<6&192|d;r.push(m)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class HG extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const GG=function(t){const e=PL(t);return DL.encodeByteArray(e,!0)},Ng=function(t){return GG(t).replace(/\./g,"")},OL=function(t){try{return DL.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Pg(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!KG(n)||(t[n]=Pg(t[n],e[n]));return t}function KG(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YG(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XG=()=>YG().__FIREBASE_DEFAULTS__,QG=()=>{if(typeof process>"u"||typeof YA>"u")return;const t=YA.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},JG=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&OL(t[1]);return e&&JSON.parse(e)},NE=()=>{try{return XG()||QG()||JG()}catch(t){console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(t));return}},LL=()=>{var t;return(t=NE())===null||t===void 0?void 0:t.config},ZG=t=>{var e;return(e=NE())===null||e===void 0?void 0:e["_".concat(t)]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ML(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(r),aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ng(JSON.stringify(n)),Ng(JSON.stringify(s)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function t7(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function PE(){var t;const e=(t=NE())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch(n){return!1}}function n7(){return typeof self=="object"&&self.self===self}function VL(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function DE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FL(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $L(){return!PE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Lh(){try{return typeof indexedDB=="object"}catch(t){return!1}}function r7(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i7="FirebaseError";class Mn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=i7,Object.setPrototypeOf(this,Mn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ou.prototype.create)}}class Ou{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i="".concat(this.service,"/").concat(e),o=this.errors[e],s=o?o7(o,r):"Error",a="".concat(this.serviceName,": ").concat(s," (").concat(i,").");return new Mn(i,a,r)}}function o7(t,e){return t.replace(s7,(n,r)=>{const i=e[r];return i!=null?String(i):"<".concat(r,"?>")})}const s7=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XA(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function a7(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Mh(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(QA(o)&&QA(s)){if(!Mh(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function QA(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oc(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Sl(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function Dd(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function BL(t,e){const n=new u7(t,e);return n.subscribe.bind(n)}class u7{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");l7(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Sw),i.error===void 0&&(i.error=Sw),i.complete===void 0&&(i.complete=Sw);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(s){}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function l7(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Sw(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ye(t){return t&&t._delegate?t._delegate:t}class oi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c7{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new e7;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch(i){}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error("Service ".concat(this.name," is not available"))}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,!!this.shouldAutoInitialize()){if(h7(e))try{this.getOrInitializeService({instanceIdentifier:Ea})}catch(n){}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch(o){}}}}clearInstance(e=Ea){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ea){return this.instances.has(e)}getOptions(e=Ea){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(o);r===a&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch(o){}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:d7(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch(i){}return r||null}normalizeInstanceIdentifier(e=Ea){return this.component?this.component.multipleInstances?e:Ea:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function d7(t){return t===Ea?void 0:t}function h7(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new c7(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=[];var Pe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Pe||(Pe={}));const jL={debug:Pe.DEBUG,verbose:Pe.VERBOSE,info:Pe.INFO,warn:Pe.WARN,error:Pe.ERROR,silent:Pe.SILENT},p7=Pe.INFO,m7={[Pe.DEBUG]:"log",[Pe.VERBOSE]:"log",[Pe.INFO]:"info",[Pe.WARN]:"warn",[Pe.ERROR]:"error"},g7=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=m7[e];if(i)console[i]("[".concat(r,"]  ").concat(t.name,":"),...n);else throw new Error("Attempted to log a message with an invalid logType (value: ".concat(e,")"))};class oy{constructor(e){this.name=e,this._logLevel=p7,this._logHandler=g7,this._userLogHandler=null,OE.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Pe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jL[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Pe.DEBUG,...e),this._logHandler(this,Pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Pe.VERBOSE,...e),this._logHandler(this,Pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Pe.INFO,...e),this._logHandler(this,Pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Pe.WARN,...e),this._logHandler(this,Pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Pe.ERROR,...e),this._logHandler(this,Pe.ERROR,...e)}}function v7(t){OE.forEach(e=>{e.setLogLevel(t)})}function y7(t,e){for(const n of OE){let r=null;e&&e.level&&(r=jL[e.level]),t===null?n.userLogHandler=null:n.userLogHandler=(i,o,...s)=>{const a=s.map(u=>{if(u==null)return null;if(typeof u=="string")return u;if(typeof u=="number"||typeof u=="boolean")return u.toString();if(u instanceof Error)return u.message;try{return JSON.stringify(u)}catch(l){return null}}).filter(u=>u).join(" ");o>=(r!=null?r:i.logLevel)&&t({level:Pe[o].toLowerCase(),message:a,args:s,type:i.name})}}}const w7=(t,e)=>e.some(n=>t instanceof n);let JA,ZA;function b7(){return JA||(JA=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function x7(){return ZA||(ZA=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UL=new WeakMap,Dx=new WeakMap,zL=new WeakMap,Aw=new WeakMap,LE=new WeakMap;function _7(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Ps(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&UL.set(n,t)}).catch(()=>{}),LE.set(e,t),e}function E7(t){if(Dx.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});Dx.set(t,e)}let Ox={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Dx.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zL.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ps(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function I7(t){Ox=t(Ox)}function T7(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Rw(this),e,...n);return zL.set(r,e.sort?e.sort():[e]),Ps(r)}:x7().includes(t)?function(...e){return t.apply(Rw(this),e),Ps(UL.get(this))}:function(...e){return Ps(t.apply(Rw(this),e))}}function C7(t){return typeof t=="function"?T7(t):(t instanceof IDBTransaction&&E7(t),w7(t,b7())?new Proxy(t,Ox):t)}function Ps(t){if(t instanceof IDBRequest)return _7(t);if(Aw.has(t))return Aw.get(t);const e=C7(t);return e!==t&&(Aw.set(t,e),LE.set(e,t)),e}const Rw=t=>LE.get(t);function k7(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),a=Ps(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Ps(s.result),u.oldVersion,u.newVersion,Ps(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const S7=["get","getKey","getAll","getAllKeys","count"],A7=["put","add","delete","clear"],Nw=new Map;function eR(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Nw.get(e))return Nw.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=A7.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||S7.includes(n)))return;const o=async function(s,...a){const u=this.transaction(s,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return Nw.set(e,o),o}I7(t=>({...t,get:(e,n,r)=>eR(e,n)||t.get(e,n,r),has:(e,n)=>!!eR(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R7{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(N7(n)){const r=n.getImmediate();return"".concat(r.library,"/").concat(r.version)}else return null}).filter(n=>n).join(" ")}}function N7(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Lx="@firebase/app",tR="0.9.28";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new oy("@firebase/app"),P7="@firebase/app-compat",D7="@firebase/analytics-compat",O7="@firebase/analytics",L7="@firebase/app-check-compat",M7="@firebase/app-check",V7="@firebase/auth",F7="@firebase/auth-compat",$7="@firebase/database",B7="@firebase/database-compat",j7="@firebase/functions",U7="@firebase/functions-compat",z7="@firebase/installations",W7="@firebase/installations-compat",q7="@firebase/messaging",H7="@firebase/messaging-compat",G7="@firebase/performance",K7="@firebase/performance-compat",Y7="@firebase/remote-config",X7="@firebase/remote-config-compat",Q7="@firebase/storage",J7="@firebase/storage-compat",Z7="@firebase/firestore",eK="@firebase/firestore-compat",tK="firebase",nK="10.8.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs="[DEFAULT]",rK={[Lx]:"fire-core",[P7]:"fire-core-compat",[O7]:"fire-analytics",[D7]:"fire-analytics-compat",[M7]:"fire-app-check",[L7]:"fire-app-check-compat",[V7]:"fire-auth",[F7]:"fire-auth-compat",[$7]:"fire-rtdb",[B7]:"fire-rtdb-compat",[j7]:"fire-fn",[U7]:"fire-fn-compat",[z7]:"fire-iid",[W7]:"fire-iid-compat",[q7]:"fire-fcm",[H7]:"fire-fcm-compat",[G7]:"fire-perf",[K7]:"fire-perf-compat",[Y7]:"fire-rc",[X7]:"fire-rc-compat",[Q7]:"fire-gcs",[J7]:"fire-gcs-compat",[Z7]:"fire-fst",[eK]:"fire-fst-compat","fire-js":"fire-js",[tK]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs=new Map,Vh=new Map;function Dg(t,e){try{t.container.addComponent(e)}catch(n){cu.debug("Component ".concat(e.name," failed to register with FirebaseApp ").concat(t.name),n)}}function WL(t,e){t.container.addOrOverwriteComponent(e)}function Po(t){const e=t.name;if(Vh.has(e))return cu.debug("There were multiple attempts to register component ".concat(e,".")),!1;Vh.set(e,t);for(const n of Fs.values())Dg(n,t);return!0}function qL(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function iK(t,e,n=Vs){qL(t,e).clearInstance(n)}function oK(){Vh.clear()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sK={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Io=new Ou("app","Firebase",sK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let aK=class{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new oi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Io.create("app-deleted",{appName:this._name})}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zo=nK;function ME(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Vs,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Io.create("bad-app-name",{appName:String(i)});if(n||(n=LL()),!n)throw Io.create("no-options");const o=Fs.get(i);if(o){if(Mh(n,o.options)&&Mh(r,o.config))return o;throw Io.create("duplicate-app",{appName:i})}const s=new f7(i);for(const u of Vh.values())s.addComponent(u);const a=new aK(n,r,s);return Fs.set(i,a),a}function uK(t=Vs){const e=Fs.get(t);if(!e&&t===Vs&&LL())return ME();if(!e)throw Io.create("no-app",{appName:t});return e}function lK(){return Array.from(Fs.values())}async function HL(t){const e=t.name;Fs.has(e)&&(Fs.delete(e),await Promise.all(t.container.getProviders().map(n=>n.delete())),t.isDeleted=!0)}function ni(t,e,n){var r;let i=(r=rK[t])!==null&&r!==void 0?r:t;n&&(i+="-".concat(n));const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const a=['Unable to register library "'.concat(i,'" with version "').concat(e,'":')];o&&a.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),o&&s&&a.push("and"),s&&a.push('version name "'.concat(e,'" contains illegal characters (whitespace or "/")')),cu.warn(a.join(" "));return}Po(new oi("".concat(i,"-version"),()=>({library:i,version:e}),"VERSION"))}function GL(t,e){if(t!==null&&typeof t!="function")throw Io.create("invalid-log-argument");y7(t,e)}function KL(t){v7(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cK="firebase-heartbeat-database",dK=1,Fh="firebase-heartbeat-store";let Pw=null;function YL(){return Pw||(Pw=k7(cK,dK,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fh)}catch(n){console.warn(n)}}}}).catch(t=>{throw Io.create("idb-open",{originalErrorMessage:t.message})})),Pw}async function hK(t){try{const n=(await YL()).transaction(Fh),r=await n.objectStore(Fh).get(XL(t));return await n.done,r}catch(e){if(e instanceof Mn)cu.warn(e.message);else{const n=Io.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});cu.warn(n.message)}}}async function nR(t,e){try{const r=(await YL()).transaction(Fh,"readwrite");await r.objectStore(Fh).put(e,XL(t)),await r.done}catch(n){if(n instanceof Mn)cu.warn(n.message);else{const r=Io.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});cu.warn(r.message)}}}function XL(t){return"".concat(t.name,"!").concat(t.options.appId)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fK=1024,pK=30*24*60*60*1e3;class mK{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new vK(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=rR();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(s=>s.date===o)))return this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(s=>{const a=new Date(s.date).valueOf();return Date.now()-a<=pK}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rR(),{heartbeatsToSend:r,unsentEntries:i}=gK(this._heartbeatsCache.heartbeats),o=Ng(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}}function rR(){return new Date().toISOString().substring(0,10)}function gK(t,e=fK){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),iR(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),iR(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class vK{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Lh()?r7().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await hK(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return nR(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function iR(t){return Ng(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yK(t){Po(new oi("platform-logger",e=>new R7(e),"PRIVATE")),Po(new oi("heartbeat",e=>new mK(e),"PRIVATE")),ni(Lx,tR,t),ni(Lx,tR,"esm2017"),ni("fire-js","")}yK("");const wK=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:Mn,SDK_VERSION:zo,_DEFAULT_ENTRY_NAME:Vs,_addComponent:Dg,_addOrOverwriteComponent:WL,_apps:Fs,_clearComponents:oK,_components:Vh,_getProvider:qL,_registerComponent:Po,_removeServiceInstance:iK,deleteApp:HL,getApp:uK,getApps:lK,initializeApp:ME,onLog:GL,registerVersion:ni,setLogLevel:KL},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(e,n){this._delegate=e,this.firebase=n,Dg(e,new oi("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),HL(this._delegate)))}_getService(e,n=Vs){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&((r=i.getComponent())===null||r===void 0?void 0:r.instantiationMode)==="EXPLICIT"&&i.initialize(),i.getImmediate({identifier:n})}_removeServiceInstance(e,n=Vs){this._delegate.container.getProvider(e).clearInstance(n)}_addComponent(e){Dg(this._delegate,e)}_addOrOverwriteComponent(e){WL(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK={"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."},oR=new Ou("app-compat","Firebase",xK);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _K(t){const e={},n={__esModule:!0,initializeApp:o,app:i,registerVersion:ni,setLogLevel:KL,onLog:GL,apps:null,SDK_VERSION:zo,INTERNAL:{registerComponent:a,removeApp:r,useAsService:u,modularAPIs:wK}};n.default=n,Object.defineProperty(n,"apps",{get:s});function r(l){delete e[l]}function i(l){if(l=l||Vs,!XA(e,l))throw oR.create("no-app",{appName:l});return e[l]}i.App=t;function o(l,c={}){const d=ME(l,c);if(XA(e,d.name))return e[d.name];const h=new t(d,n);return e[d.name]=h,h}function s(){return Object.keys(e).map(l=>e[l])}function a(l){const c=l.name,d=c.replace("-compat","");if(Po(l)&&l.type==="PUBLIC"){const h=(f=i())=>{if(typeof f[d]!="function")throw oR.create("invalid-app-argument",{appName:c});return f[d]()};l.serviceProps!==void 0&&Pg(h,l.serviceProps),n[d]=h,t.prototype[d]=function(...f){return this._getService.bind(this,c).apply(this,l.multipleInstances?f:[])}}return l.type==="PUBLIC"?n[d]:null}function u(l,c){return c==="serverAuth"?null:c}return n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QL(){const t=_K(bK);t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:QL,extendNamespace:e,createSubscribe:BL,ErrorFactory:Ou,deepExtend:Pg});function e(n){Pg(t,n)}return t}const EK=QL();/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sR=new oy("@firebase/app-compat"),IK="@firebase/app-compat",TK="0.2.28";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CK(t){ni(IK,TK,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */if(n7()&&self.firebase!==void 0){sR.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const t=self.firebase.SDK_VERSION;t&&t.indexOf("LITE")>=0&&sR.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Ie=EK;CK();var kK="firebase",SK="10.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ie.registerVersion(kK,SK,"app-compat");const pd={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Yu={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AK(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}}function JL(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RK=AK,NK=JL,ZL=new Ou("auth","Firebase",JL());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og=new oy("@firebase/auth");function PK(t,...e){Og.logLevel<=Pe.WARN&&Og.warn("Auth (".concat(zo,"): ").concat(t),...e)}function Am(t,...e){Og.logLevel<=Pe.ERROR&&Og.error("Auth (".concat(zo,"): ").concat(t),...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sn(t,...e){throw VE(t,...e)}function Tn(t,...e){return VE(t,...e)}function eM(t,e,n){const r=Object.assign(Object.assign({},NK()),{[e]:n});return new Ou("auth","Firebase",r).create(e,{appName:t.name})}function Lc(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Sn(t,"argument-error"),eM(t,"argument-error","Type of ".concat(e.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function VE(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ZL.create(t,...e)}function te(t,e,...n){if(!t)throw VE(e,...n)}function Wi(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Am(e),new Error(e)}function _i(t,e){t||Wi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $h(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function FE(){return aR()==="http:"||aR()==="https:"}function aR(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DK(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(FE()||VL()||"connection"in navigator)?navigator.onLine:!0}function OK(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){this.shortDelay=e,this.longDelay=n,_i(n>e,"Short delay should be less than long delay!"),this.isMobile=t7()||DE()}get(){return DK()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(t,e){_i(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?"".concat(n).concat(e.startsWith("/")?e.slice(1):e):n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LK={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MK=new Of(3e4,6e4);function Lt(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Mt(t,e,n,r,i={}){return nM(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const a=Oc(Object.assign({key:t.config.apiKey},s)).slice(1),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode),tM.fetch()(rM(t,t.config.apiHost,n,a),Object.assign({method:e,headers:u,referrerPolicy:"no-referrer"},o))})}async function nM(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},LK),e);try{const i=new FK(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw Od(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const a=o.ok?s.errorMessage:s.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Od(t,"credential-already-in-use",s);if(u==="EMAIL_EXISTS")throw Od(t,"email-already-in-use",s);if(u==="USER_DISABLED")throw Od(t,"user-disabled",s);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw eM(t,c,l);Sn(t,c)}}catch(i){if(i instanceof Mn)throw i;Sn(t,"network-request-failed",{message:String(i)})}}async function Wo(t,e,n,r,i={}){const o=await Mt(t,e,n,r,i);return"mfaPendingCredential"in o&&Sn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function rM(t,e,n,r){const i="".concat(e).concat(n,"?").concat(r);return t.config.emulator?$E(t.config,i):"".concat(t.config.apiScheme,"://").concat(i)}function VK(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FK{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Tn(this.auth,"network-request-failed")),MK.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Od(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Tn(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uR(t){return t!==void 0&&t.getResponse!==void 0}function lR(t){return t!==void 0&&t.enterprise!==void 0}class $K{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return VK(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BK(t){return(await Mt(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function jK(t,e){return Mt(t,"GET","/v2/recaptchaConfig",Lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UK(t,e){return Mt(t,"POST","/v1/accounts:delete",e)}async function zK(t,e){return Mt(t,"POST","/v1/accounts:update",e)}async function WK(t,e){return Mt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}async function qK(t,e=!1){const n=ye(t),r=await n.getIdToken(e),i=sy(r);te(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:eh(Dw(i.auth_time)),issuedAtTime:eh(Dw(i.iat)),expirationTime:eh(Dw(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Dw(t){return Number(t)*1e3}function sy(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Am("JWT malformed, contained fewer than 3 sections"),null;try{const i=OL(n);return i?JSON.parse(i):(Am("Failed to decode base64 JWT payload"),null)}catch(i){return Am("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function HK(t){const e=sy(t);return te(e,"internal-error"),te(typeof e.exp<"u","internal-error"),te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Do(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Mn&&GK(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function GK({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iM{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=eh(this.lastLoginAt),this.creationTime=eh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bh(t){var e;const n=t.auth,r=await t.getIdToken(),i=await Do(t,WK(n,{idToken:r}));te(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?QK(o.providerUserInfo):[],a=XK(t.providerData,s),u=t.isAnonymous,l=!(t.email&&o.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:a,metadata:new iM(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function YK(t){const e=ye(t);await Bh(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function XK(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function QK(t){return t.map(e=>{var{providerId:n}=e,r=Jt(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JK(t,e){const n=await nM(t,{},async()=>{const r=Oc({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=rM(t,i,"/v1/token","key=".concat(o)),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",tM.fetch()(s,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function ZK(t,e){return Mt(t,"POST","/v2/accounts:revokeToken",Lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jh{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){te(e.idToken,"internal-error"),te(typeof e.idToken<"u","internal-error"),te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):HK(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return te(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await JK(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new jh;return r&&(te(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(te(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(te(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new jh,this.toJSON())}_performRefresh(){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ns(t,e){te(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ga{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Jt(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new KK(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new iM(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await Do(this,this.stsTokenManager.getToken(this.auth,e));return te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return qK(this,e)}reload(){return YK(this)}_assign(e){this!==e&&(te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ga(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bh(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Do(this,UK(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,a,u,l,c;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,h=(i=n.email)!==null&&i!==void 0?i:void 0,f=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,m=(s=n.photoURL)!==null&&s!==void 0?s:void 0,v=(a=n.tenantId)!==null&&a!==void 0?a:void 0,y=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,g=(l=n.createdAt)!==null&&l!==void 0?l:void 0,w=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:x,isAnonymous:_,providerData:E,stsTokenManager:I}=n;te(b&&I,e,"internal-error");const C=jh.fromJSON(this.name,I);te(typeof b=="string",e,"internal-error"),ns(d,e.name),ns(h,e.name),te(typeof x=="boolean",e,"internal-error"),te(typeof _=="boolean",e,"internal-error"),ns(f,e.name),ns(m,e.name),ns(v,e.name),ns(y,e.name),ns(g,e.name),ns(w,e.name);const S=new Ga({uid:b,auth:e,email:h,emailVerified:x,displayName:d,isAnonymous:_,photoURL:m,phoneNumber:f,tenantId:v,stsTokenManager:C,createdAt:g,lastLoginAt:w});return E&&Array.isArray(E)&&(S.providerData=E.map(N=>Object.assign({},N))),y&&(S._redirectEventId=y),S}static async _fromIdTokenResponse(e,n,r=!1){const i=new jh;i.updateFromServerResponse(n);const o=new Ga({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bh(o),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new Map;function Rr(t){_i(t instanceof Function,"Expected a class definition");let e=cR.get(t);return e?(_i(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,cR.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oM{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}oM.type="NONE";const oc=oM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ka(t,e,n){return"firebase:".concat(t,":").concat(e,":").concat(n)}class Vl{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Ka(this.userKey,i.apiKey,o),this.fullPersistenceKey=Ka("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ga._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Vl(Rr(oc),e,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let o=i[0]||Rr(oc);const s=Ka(r,e.config.apiKey,e.name);let a=null;for(const l of n)try{const c=await l._get(s);if(c){const d=Ga._fromJSON(e,c);l!==o&&(a=d),o=l;break}}catch(c){}const u=i.filter(l=>l._shouldAllowMigration);return!o._shouldAllowMigration||!u.length?new Vl(o,e,r):(o=u[0],a&&await o._set(s,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==o)try{await l._remove(s)}catch(c){}})),new Vl(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dR(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(uM(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(sM(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(lM(e))return"Blackberry";if(cM(e))return"Webos";if(BE(e))return"Safari";if((e.includes("chrome/")||aM(e))&&!e.includes("edge/"))return"Chrome";if(Lf(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function sM(t=yt()){return/firefox\//i.test(t)}function BE(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function aM(t=yt()){return/crios\//i.test(t)}function uM(t=yt()){return/iemobile/i.test(t)}function Lf(t=yt()){return/android/i.test(t)}function lM(t=yt()){return/blackberry/i.test(t)}function cM(t=yt()){return/webos/i.test(t)}function Mc(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eY(t=yt()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(t)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(t)}function tY(t=yt()){var e;return Mc(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function nY(){return FL()&&document.documentMode===10}function dM(t=yt()){return Mc(t)||Lf(t)||cM(t)||lM(t)||/windows phone/i.test(t)||uM(t)}function rY(){try{return!!(window&&window!==window.top)}catch(t){return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hM(t,e=[]){let n;switch(t){case"Browser":n=dR(yt());break;case"Worker":n="".concat(dR(yt()),"-").concat(t);break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return"".concat(n,"/JsCore/").concat(zo,"/").concat(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iY{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,a)=>{try{const u=e(o);s(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch(o){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oY(t,e={}){return Mt(t,"GET","/v2/passwordPolicy",Lt(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sY=6;class aY{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:sY,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsUppercaseLetter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(s=u.containsNumericCharacter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new hR(this),this.idTokenSubscription=new hR(this),this.beforeStateQueue=new iY(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ZL,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Rr(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Vl.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(o){}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(e);(!s||s===a)&&(u!=null&&u.user)&&(i=u.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(r){await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bh(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=OK()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?ye(e):null;return n&&te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(Rr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await oY(this),n=new aY(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ou("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await ZK(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Rr(e)||this._popupRedirectResolver;te(n,this,"argument-error"),this.redirectPersistenceManager=await Vl.create(this,[Rr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(te(a,this,"internal-error"),a.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{s=!0,u()}}else{const u=e.addObserver(n);return()=>{s=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=hM(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&PK("Error while retrieving App Check token: ".concat(n.error)),n==null?void 0:n.token}}function Rt(t){return ye(t)}class hR{constructor(e){this.auth=e,this.observer=null,this.addObserver=BL(n=>this.observer=n)}get next(){return te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Mf={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function lY(t){Mf=t}function jE(t){return Mf.loadJS(t)}function cY(){return Mf.recaptchaV2Script}function dY(){return Mf.recaptchaEnterpriseScript}function hY(){return Mf.gapiScript}function fM(t){return"__".concat(t).concat(Math.floor(Math.random()*1e6))}const fY="recaptcha-enterprise",pY="NO_RECAPTCHA";class mY{constructor(e){this.type=fY,this.auth=Rt(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,a)=>{jK(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const l=new $K(u);return o.tenantId==null?o._agentRecaptchaConfig=l:o._tenantRecaptchaConfigs[o.tenantId]=l,s(l.siteKey)}}).catch(u=>{a(u)})})}function i(o,s,a){const u=window.grecaptcha;lR(u)?u.enterprise.ready(()=>{u.enterprise.execute(o,{action:e}).then(l=>{s(l)}).catch(()=>{s(pY)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(a=>{if(!n&&lR(window.grecaptcha))i(a,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}let u=dY();u.length!==0&&(u+=a),jE(u).then(()=>{i(a,o,s)}).catch(l=>{s(l)})}}).catch(a=>{s(a)})})}}async function fR(t,e,n,r=!1){const i=new mY(t);let o;try{o=await i.verify(n)}catch(a){o=await i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}async function Uh(t,e,n,r){var i;if(!((i=t._getRecaptchaConfig())===null||i===void 0)&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await fR(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await fR(t,e,n,n==="getOobCode");return r(t,s)}else return Promise.reject(o)})}function gY(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Rr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vY(t,e,n){const r=Rt(t);te(r._canInitEmulator,r,"emulator-config-failed"),te(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=pM(e),{host:s,port:a}=yY(e),u=a===null?"":":".concat(a);r.config.emulator={url:"".concat(o,"//").concat(s).concat(u,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:a,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||wY()}function pM(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function yY(t){const e=pM(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:pR(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:pR(s)}}}function pR(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function wY(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wi("not implemented")}_getIdTokenResponse(e){return Wi("not implemented")}_linkToIdToken(e,n){return Wi("not implemented")}_getReauthenticationResolver(e){return Wi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mM(t,e){return Mt(t,"POST","/v1/accounts:resetPassword",Lt(t,e))}async function bY(t,e){return Mt(t,"POST","/v1/accounts:update",e)}async function xY(t,e){return Mt(t,"POST","/v1/accounts:signUp",e)}async function _Y(t,e){return Mt(t,"POST","/v1/accounts:update",Lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EY(t,e){return Wo(t,"POST","/v1/accounts:signInWithPassword",Lt(t,e))}async function ay(t,e){return Mt(t,"POST","/v1/accounts:sendOobCode",Lt(t,e))}async function IY(t,e){return ay(t,e)}async function TY(t,e){return ay(t,e)}async function CY(t,e){return ay(t,e)}async function kY(t,e){return ay(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SY(t,e){return Wo(t,"POST","/v1/accounts:signInWithEmailLink",Lt(t,e))}async function AY(t,e){return Wo(t,"POST","/v1/accounts:signInWithEmailLink",Lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zh extends Vc{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new zh(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new zh(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uh(e,n,"signInWithPassword",EY);case"emailLink":return SY(e,{email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Uh(e,r,"signUpPassword",xY);case"emailLink":return AY(e,{idToken:n,email:this._email,oobCode:this._password});default:Sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function To(t,e){return Wo(t,"POST","/v1/accounts:signInWithIdp",Lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RY="http://localhost";class to extends Vc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new to(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Jt(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new to(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return To(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,To(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,To(e,n)}buildRequest(){const e={requestUri:RY,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Oc(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NY(t,e){return Mt(t,"POST","/v1/accounts:sendVerificationCode",Lt(t,e))}async function PY(t,e){return Wo(t,"POST","/v1/accounts:signInWithPhoneNumber",Lt(t,e))}async function DY(t,e){const n=await Wo(t,"POST","/v1/accounts:signInWithPhoneNumber",Lt(t,e));if(n.temporaryProof)throw Od(t,"account-exists-with-different-credential",n);return n}const OY={USER_NOT_FOUND:"user-not-found"};async function LY(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return Wo(t,"POST","/v1/accounts:signInWithPhoneNumber",Lt(t,n),OY)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends Vc{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,n){return new Ya({verificationId:e,verificationCode:n})}static _fromTokenResponse(e,n){return new Ya({phoneNumber:e,temporaryProof:n})}_getIdTokenResponse(e){return PY(e,this._makeVerificationRequest())}_linkToIdToken(e,n){return DY(e,Object.assign({idToken:n},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return LY(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:n,verificationId:r,verificationCode:i}=this.params;return e&&n?{temporaryProof:e,phoneNumber:n}:{sessionInfo:r,code:i}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){typeof e=="string"&&(e=JSON.parse(e));const{verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o}=e;return!r&&!n&&!i&&!o?null:new Ya({verificationId:n,verificationCode:r,phoneNumber:i,temporaryProof:o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MY(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function VY(t){const e=Sl(Dd(t)).link,n=e?Sl(Dd(e)).deep_link_id:null,r=Sl(Dd(t)).deep_link_id;return(r?Sl(Dd(r)).link:null)||r||n||e||t}class uy{constructor(e){var n,r,i,o,s,a;const u=Sl(Dd(e)),l=(n=u.apiKey)!==null&&n!==void 0?n:null,c=(r=u.oobCode)!==null&&r!==void 0?r:null,d=MY((i=u.mode)!==null&&i!==void 0?i:null);te(l&&c&&d,"argument-error"),this.apiKey=l,this.operation=d,this.code=c,this.continueUrl=(o=u.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=u.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(a=u.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const n=VY(e);try{return new uy(n)}catch(r){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zs{constructor(){this.providerId=Zs.PROVIDER_ID}static credential(e,n){return zh._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=uy.parseLink(n);return te(r,"argument-error"),zh._fromEmailAndCode(e,r.code,r.tenantId)}}Zs.PROVIDER_ID="password";Zs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Zs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fc extends qo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Fl extends Fc{static credentialFromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;return te("providerId"in n&&"signInMethod"in n,"argument-error"),to._fromParams(n)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return te(e.idToken||e.accessToken,"argument-error"),to._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return Fl.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return Fl.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r,oauthTokenSecret:i,pendingToken:o,nonce:s,providerId:a}=e;if(!r&&!i&&!n&&!o||!a)return null;try{return new Fl(a)._credential({idToken:n,accessToken:r,nonce:s,pendingToken:o})}catch(u){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi extends Fc{constructor(){super("facebook.com")}static credential(e){return to._fromParams({providerId:Mi.PROVIDER_ID,signInMethod:Mi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Mi.credentialFromTaggedObject(e)}static credentialFromError(e){return Mi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Mi.credential(e.oauthAccessToken)}catch(n){return null}}}Mi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Mi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi extends Fc{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return to._fromParams({providerId:Vi.PROVIDER_ID,signInMethod:Vi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Vi.credentialFromTaggedObject(e)}static credentialFromError(e){return Vi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Vi.credential(n,r)}catch(i){return null}}}Vi.GOOGLE_SIGN_IN_METHOD="google.com";Vi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Fc{constructor(){super("github.com")}static credential(e){return to._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch(n){return null}}}Fi.GITHUB_SIGN_IN_METHOD="github.com";Fi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FY="http://localhost";class sc extends Vc{constructor(e,n){super(e,e),this.pendingToken=n}_getIdTokenResponse(e){const n=this.buildRequest();return To(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,To(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,To(e,n)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,pendingToken:o}=n;return!r||!i||!o||r!==i?null:new sc(r,o)}static _create(e,n){return new sc(e,n)}buildRequest(){return{requestUri:FY,returnSecureToken:!0,pendingToken:this.pendingToken}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $Y="saml.";class Lg extends qo{constructor(e){te(e.startsWith($Y),"argument-error"),super(e)}static credentialFromResult(e){return Lg.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return Lg.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const n=sc.fromJSON(e);return te(n,"argument-error"),n}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:n,providerId:r}=e;if(!n||!r)return null;try{return sc._create(r,n)}catch(i){return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i extends Fc{constructor(){super("twitter.com")}static credential(e,n){return to._fromParams({providerId:$i.PROVIDER_ID,signInMethod:$i.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return $i.credentialFromTaggedObject(e)}static credentialFromError(e){return $i.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return $i.credential(n,r)}catch(i){return null}}}$i.TWITTER_SIGN_IN_METHOD="twitter.com";$i.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gM(t,e){return Wo(t,"POST","/v1/accounts:signUp",Lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Ga._fromIdTokenResponse(e,r,i),s=mR(r);return new si({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=mR(r);return new si({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function mR(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function BY(t){var e;const n=Rt(t);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new si({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await gM(n,{returnSecureToken:!0}),i=await si._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg extends Mn{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Mg.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Mg(e,n,r,i)}}function vM(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Mg._fromErrorAndOperation(t,o,e,r):o})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yM(t){return new Set(t.map(({providerId:e})=>e).filter(e=>!!e))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jY(t,e){const n=ye(t);await ly(!0,n,e);const{providerUserInfo:r}=await zK(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),i=yM(r||[]);return n.providerData=n.providerData.filter(o=>i.has(o.providerId)),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function UE(t,e,n=!1){const r=await Do(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return si._forOperation(t,"link",r)}async function ly(t,e,n){await Bh(e);const r=yM(e.providerData),i=t===!1?"provider-already-linked":"no-such-provider";te(r.has(n)===t,e.auth,i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wM(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const o=await Do(t,vM(r,i,e,t),n);te(o.idToken,r,"internal-error");const s=sy(o.idToken);te(s,r,"internal-error");const{sub:a}=s;return te(t.uid===a,r,"user-mismatch"),si._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Sn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bM(t,e,n=!1){const r="signIn",i=await vM(t,r,e),o=await si._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function cy(t,e){return bM(Rt(t),e)}async function xM(t,e){const n=ye(t);return await ly(!1,n,e.providerId),UE(n,e)}async function _M(t,e){return wM(ye(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UY(t,e){return Wo(t,"POST","/v1/accounts:signInWithCustomToken",Lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zY(t,e){const n=Rt(t),r=await UY(n,{token:e,returnSecureToken:!0}),i=await si._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,n){this.factorId=e,this.uid=n.mfaEnrollmentId,this.enrollmentTime=new Date(n.enrolledAt).toUTCString(),this.displayName=n.displayName}static _fromServerResponse(e,n){return"phoneInfo"in n?zE._fromServerResponse(e,n):"totpInfo"in n?WE._fromServerResponse(e,n):Sn(e,"internal-error")}}class zE extends Vf{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,n){return new zE(n)}}class WE extends Vf{constructor(e){super("totp",e)}static _fromServerResponse(e,n){return new WE(n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dy(t,e,n){var r;te(((r=n.url)===null||r===void 0?void 0:r.length)>0,t,"invalid-continue-uri"),te(typeof n.dynamicLinkDomain>"u"||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(te(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(te(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qE(t){const e=Rt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function WY(t,e,n){const r=Rt(t),i={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&dy(r,i,n),await Uh(r,i,"getOobCode",TY)}async function qY(t,e,n){await mM(ye(t),{oobCode:e,newPassword:n}).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qE(t),r})}async function HY(t,e){await _Y(ye(t),{oobCode:e})}async function EM(t,e){const n=ye(t),r=await mM(n,{oobCode:e}),i=r.requestType;switch(te(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":te(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":te(r.mfaInfo,n,"internal-error");default:te(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=Vf._fromServerResponse(Rt(n),r.mfaInfo)),{data:{email:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.newEmail:r.email)||null,previousEmail:(r.requestType==="VERIFY_AND_CHANGE_EMAIL"?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}async function GY(t,e){const{data:n}=await EM(ye(t),e);return n.email}async function KY(t,e,n){const r=Rt(t),s=await Uh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gM).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&qE(t),u}),a=await si._fromIdTokenResponse(r,"signIn",s);return await r._updateCurrentUser(a.user),a}function YY(t,e,n){return cy(ye(t),Zs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XY(t,e,n){const r=Rt(t),i={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function o(s,a){te(a.handleCodeInApp,r,"argument-error"),a&&dy(r,s,a)}o(i,n),await Uh(r,i,"getOobCode",CY)}function QY(t,e){const n=uy.parseLink(e);return(n==null?void 0:n.operation)==="EMAIL_SIGNIN"}async function JY(t,e,n){const r=ye(t),i=Zs.credentialWithLink(e,n||$h());return te(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),cy(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZY(t,e){return Mt(t,"POST","/v1/accounts:createAuthUri",Lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eX(t,e){const n=FE()?$h():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:i}=await ZY(ye(t),r);return i||[]}async function tX(t,e){const n=ye(t),i={requestType:"VERIFY_EMAIL",idToken:await t.getIdToken()};e&&dy(n.auth,i,e);const{email:o}=await IY(n.auth,i);o!==t.email&&await t.reload()}async function nX(t,e,n){const r=ye(t),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await t.getIdToken(),newEmail:e};n&&dy(r.auth,o,n);const{email:s}=await kY(r.auth,o);s!==t.email&&await t.reload()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rX(t,e){return Mt(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iX(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=ye(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await Do(r,rX(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const a=r.providerData.find(({providerId:u})=>u==="password");a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function oX(t,e){return IM(ye(t),e,null)}function sX(t,e){return IM(ye(t),null,e)}async function IM(t,e,n){const{auth:r}=t,o={idToken:await t.getIdToken(),returnSecureToken:!0};e&&(o.email=e),n&&(o.password=n);const s=await Do(t,bY(r,o));await t._updateTokensIfNecessary(s,!0)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aX(t){var e,n;if(!t)return null;const{providerId:r}=t,i=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},o=t.isNewUser||t.kind==="identitytoolkit#SignupNewUserResponse";if(!r&&(t!=null&&t.idToken)){const s=(n=(e=sy(t.idToken))===null||e===void 0?void 0:e.firebase)===null||n===void 0?void 0:n.sign_in_provider;if(s){const a=s!=="anonymous"&&s!=="custom"?s:null;return new $l(o,a)}}if(!r)return null;switch(r){case"facebook.com":return new uX(o,i);case"github.com":return new lX(o,i);case"google.com":return new cX(o,i);case"twitter.com":return new dX(o,i,t.screenName||null);case"custom":case"anonymous":return new $l(o,null);default:return new $l(o,r,i)}}class $l{constructor(e,n,r={}){this.isNewUser=e,this.providerId=n,this.profile=r}}class TM extends $l{constructor(e,n,r,i){super(e,n,r),this.username=i}}class uX extends $l{constructor(e,n){super(e,"facebook.com",n)}}class lX extends TM{constructor(e,n){super(e,"github.com",n,typeof(n==null?void 0:n.login)=="string"?n==null?void 0:n.login:null)}}class cX extends $l{constructor(e,n){super(e,"google.com",n)}}class dX extends TM{constructor(e,n,r){super(e,"twitter.com",n,r)}}function hX(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:aX(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n,r){this.type=e,this.credential=n,this.user=r}static _fromIdtoken(e,n){return new Va("enroll",e,n)}static _fromMfaPendingCredential(e){return new Va("signin",e)}toJSON(){return{multiFactorSession:{[this.type==="enroll"?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var n,r;if(e!=null&&e.multiFactorSession){if(!((n=e.multiFactorSession)===null||n===void 0)&&n.pendingCredential)return Va._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(!((r=e.multiFactorSession)===null||r===void 0)&&r.idToken)return Va._fromIdtoken(e.multiFactorSession.idToken)}return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HE{constructor(e,n,r){this.session=e,this.hints=n,this.signInResolver=r}static _fromError(e,n){const r=Rt(e),i=n.customData._serverResponse,o=(i.mfaInfo||[]).map(a=>Vf._fromServerResponse(r,a));te(i.mfaPendingCredential,r,"internal-error");const s=Va._fromMfaPendingCredential(i.mfaPendingCredential);return new HE(s,o,async a=>{const u=await a._process(r,s);delete i.mfaInfo,delete i.mfaPendingCredential;const l=Object.assign(Object.assign({},i),{idToken:u.idToken,refreshToken:u.refreshToken});switch(n.operationType){case"signIn":const c=await si._fromIdTokenResponse(r,n.operationType,l);return await r._updateCurrentUser(c.user),c;case"reauthenticate":return te(n.user,r,"internal-error"),si._forOperation(n.user,n.operationType,l);default:Sn(r,"internal-error")}})}async resolveSignIn(e){const n=e;return this.signInResolver(n)}}function fX(t,e){var n;const r=ye(t),i=e;return te(e.customData.operationType,r,"argument-error"),te((n=i.customData._serverResponse)===null||n===void 0?void 0:n.mfaPendingCredential,r,"argument-error"),HE._fromError(r,i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pX(t,e){return Mt(t,"POST","/v2/accounts/mfaEnrollment:start",Lt(t,e))}function mX(t,e){return Mt(t,"POST","/v2/accounts/mfaEnrollment:finalize",Lt(t,e))}function gX(t,e){return Mt(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Lt(t,e))}class GE{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(n=>{n.mfaInfo&&(this.enrolledFactors=n.mfaInfo.map(r=>Vf._fromServerResponse(e.auth,r)))})}static _fromUser(e){return new GE(e)}async getSession(){return Va._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,n){const r=e,i=await this.getSession(),o=await Do(this.user,r._process(this.user.auth,i,n));return await this.user._updateTokensIfNecessary(o),this.user.reload()}async unenroll(e){const n=typeof e=="string"?e:e.uid,r=await this.user.getIdToken();try{const i=await Do(this.user,gX(this.user.auth,{idToken:r,mfaEnrollmentId:n}));this.enrolledFactors=this.enrolledFactors.filter(({uid:o})=>o!==n),await this.user._updateTokensIfNecessary(i),await this.user.reload()}catch(i){throw i}}}const Ow=new WeakMap;function vX(t){const e=ye(t);return Ow.has(e)||Ow.set(e,GE._fromUser(e)),Ow.get(e)}const Vg="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CM{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Vg,"1"),this.storage.removeItem(Vg),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yX(){const t=yt();return BE(t)||Mc(t)}const wX=1e3,bX=10;class kM extends CM{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=yX()&&rY(),this.fallbackToPolling=dM(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,a,u)=>{this.notifyListeners(s,u)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const s=this.storage.getItem(r);if(e.newValue!==s)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);nY()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,bX):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},wX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}kM.type="LOCAL";const KE=kM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM extends CM{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}SM.type="SESSION";const du=SM;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xX(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new hy(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(s).map(async l=>l(n.origin,o)),u=await xX(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}hy.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _X{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((a,u)=>{const l=Ff("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){const h=d;if(h.data.eventId===l)switch(h.data.status){case"ack":clearTimeout(c),o=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),a(h.data.response);break;default:clearTimeout(c),clearTimeout(o),u(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ut(){return window}function EX(t){Ut().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(){return typeof Ut().WorkerGlobalScope<"u"&&typeof Ut().importScripts=="function"}async function IX(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}function TX(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function CX(){return YE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AM="firebaseLocalStorageDb",kX=1,Fg="firebaseLocalStorage",RM="fbase_key";class $f{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function fy(t,e){return t.transaction([Fg],e?"readwrite":"readonly").objectStore(Fg)}function SX(){const t=indexedDB.deleteDatabase(AM);return new $f(t).toPromise()}function Mx(){const t=indexedDB.open(AM,kX);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Fg,{keyPath:RM})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Fg)?e(r):(r.close(),await SX(),e(await Mx()))})})}async function gR(t,e,n){const r=fy(t,!0).put({[RM]:e,value:n});return new $f(r).toPromise()}async function AX(t,e){const n=fy(t,!1).get(e),r=await new $f(n).toPromise();return r===void 0?null:r.value}function vR(t,e){const n=fy(t,!0).delete(e);return new $f(n).toPromise()}const RX=800,NX=3;class NM{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mx(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>NX)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return YE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=hy._getInstance(CX()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await IX(),!this.activeServiceWorker)return;this.sender=new _X(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||TX()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(n){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mx();return await gR(e,Vg,"1"),await vR(e,Vg),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>gR(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>AX(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>vR(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=fy(i,!1).getAll();return new $f(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),RX)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}NM.type="LOCAL";const Wh=NM;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PX(t,e){return Mt(t,"POST","/v2/accounts/mfaSignIn:start",Lt(t,e))}function DX(t,e){return Mt(t,"POST","/v2/accounts/mfaSignIn:finalize",Lt(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OX=500,LX=6e4,qp=1e12;class MX{constructor(e){this.auth=e,this.counter=qp,this._widgets=new Map}render(e,n){const r=this.counter;return this._widgets.set(r,new VX(e,this.auth.name,n||{})),this.counter++,r}reset(e){var n;const r=e||qp;(n=this._widgets.get(r))===null||n===void 0||n.delete(),this._widgets.delete(r)}getResponse(e){var n;const r=e||qp;return((n=this._widgets.get(r))===null||n===void 0?void 0:n.getResponse())||""}async execute(e){var n;const r=e||qp;return(n=this._widgets.get(r))===null||n===void 0||n.execute(),""}}class VX{constructor(e,n,r){this.params=r,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i=typeof e=="string"?document.getElementById(e):e;te(i,"argument-error",{appName:n}),this.container=i,this.isVisible=this.params.size!=="invisible",this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=FX(50);const{callback:e,"expired-callback":n}=this.params;if(e)try{e(this.responseToken)}catch(r){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,n)try{n()}catch(r){}this.isVisible&&this.execute()},LX)},OX))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function FX(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<t;r++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lw=fM("rcb"),$X=new Of(3e4,6e4);class BX{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(!((e=Ut().grecaptcha)===null||e===void 0)&&e.render)}load(e,n=""){return te(jX(n),e,"argument-error"),this.shouldResolveImmediately(n)&&uR(Ut().grecaptcha)?Promise.resolve(Ut().grecaptcha):new Promise((r,i)=>{const o=Ut().setTimeout(()=>{i(Tn(e,"network-request-failed"))},$X.get());Ut()[Lw]=()=>{Ut().clearTimeout(o),delete Ut()[Lw];const a=Ut().grecaptcha;if(!a||!uR(a)){i(Tn(e,"internal-error"));return}const u=a.render;a.render=(l,c)=>{const d=u(l,c);return this.counter++,d},this.hostLanguage=n,r(a)};const s="".concat(cY(),"?").concat(Oc({onload:Lw,render:"explicit",hl:n}));jE(s).catch(()=>{clearTimeout(o),i(Tn(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var n;return!!(!((n=Ut().grecaptcha)===null||n===void 0)&&n.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function jX(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class UX{async load(e){return new MX(e)}clearedOneInstance(){}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PM="recaptcha",zX={theme:"light",type:"image"};let WX=class{constructor(e,n,r=Object.assign({},zX)){this.parameters=r,this.type=PM,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rt(e),this.isInvisible=this.parameters.size==="invisible",te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const i=typeof n=="string"?document.getElementById(n):n;te(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new UX:new BX,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),n=this.getAssertedRecaptcha(),r=n.getResponse(e);return r||new Promise(i=>{const o=s=>{s&&(this.tokenChangeListeners.delete(o),i(s))};this.tokenChangeListeners.add(o),this.isInvisible&&n.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise?this.renderPromise:(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e}),this.renderPromise)}_reset(){this.assertNotDestroyed(),this.widgetId!==null&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){te(!this.parameters.sitekey,this.auth,"argument-error"),te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return n=>{if(this.tokenChangeListeners.forEach(r=>r(n)),typeof e=="function")e(n);else if(typeof e=="string"){const r=Ut()[e];typeof r=="function"&&r(n)}}}assertNotDestroyed(){te(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const n=document.createElement("div");e.appendChild(n),e=n}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){te(FE()&&!YE(),this.auth,"internal-error"),await qX(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await BK(this.auth);te(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};function qX(){let t=null;return new Promise(e=>{if(document.readyState==="complete"){e();return}t=()=>e(),window.addEventListener("load",t)}).catch(e=>{throw t&&window.removeEventListener("load",t),e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.verificationId=e,this.onConfirmation=n}confirm(e){const n=Ya._fromVerification(this.verificationId,e);return this.onConfirmation(n)}}async function HX(t,e,n){const r=Rt(t),i=await py(r,e,ye(n));return new XE(i,o=>cy(r,o))}async function GX(t,e,n){const r=ye(t);await ly(!1,r,"phone");const i=await py(r.auth,e,ye(n));return new XE(i,o=>xM(r,o))}async function KX(t,e,n){const r=ye(t),i=await py(r.auth,e,ye(n));return new XE(i,o=>_M(r,o))}async function py(t,e,n){var r;const i=await n.verify();try{te(typeof i=="string",t,"argument-error"),te(n.type===PM,t,"argument-error");let o;if(typeof e=="string"?o={phoneNumber:e}:o=e,"session"in o){const s=o.session;if("phoneNumber"in o)return te(s.type==="enroll",t,"internal-error"),(await pX(t,{idToken:s.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{te(s.type==="signin",t,"internal-error");const a=((r=o.multiFactorHint)===null||r===void 0?void 0:r.uid)||o.multiFactorUid;return te(a,t,"missing-multi-factor-info"),(await PX(t,{mfaPendingCredential:s.credential,mfaEnrollmentId:a,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}else{const{sessionInfo:s}=await NY(t,{phoneNumber:o.phoneNumber,recaptchaToken:i});return s}}finally{n._reset()}}async function YX(t,e){await UE(ye(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hu=class Rm{constructor(e){this.providerId=Rm.PROVIDER_ID,this.auth=Rt(e)}verifyPhoneNumber(e,n){return py(this.auth,e,ye(n))}static credential(e,n){return Ya._fromVerification(e,n)}static credentialFromResult(e){const n=e;return Rm.credentialFromTaggedObject(n)}static credentialFromError(e){return Rm.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:n,temporaryProof:r}=e;return n&&r?Ya._fromTokenResponse(n,r):null}};hu.PROVIDER_ID="phone";hu.PHONE_SIGN_IN_METHOD="phone";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t,e){return e?Rr(e):(te(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE extends Vc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return To(e,this._buildIdpRequest())}_linkToIdToken(e,n){return To(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return To(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function XX(t){return bM(t.auth,new QE(t),t.bypassAuthState)}function QX(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),wM(n,new QE(t),t.bypassAuthState)}async function JX(t){const{auth:e,user:n}=t;return te(n,e,"internal-error"),UE(n,new QE(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:a}=e;if(s){this.reject(s);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return XX;case"linkViaPopup":case"linkViaRedirect":return JX;case"reauthViaPopup":case"reauthViaRedirect":return QX;default:Sn(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZX=new Of(2e3,1e4);async function eQ(t,e,n){const r=Rt(t);Lc(t,e,qo);const i=Lu(r,n);return new bo(r,"signInViaPopup",e,i).executeNotNull()}async function tQ(t,e,n){const r=ye(t);Lc(r.auth,e,qo);const i=Lu(r.auth,n);return new bo(r.auth,"reauthViaPopup",e,i,r).executeNotNull()}async function nQ(t,e,n){const r=ye(t);Lc(r.auth,e,qo);const i=Lu(r.auth,n);return new bo(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class bo extends DM{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,bo.currentPopupAction&&bo.currentPopupAction.cancel(),bo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return te(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=Ff();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Tn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Tn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,bo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Tn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,ZX.get())};e()}}bo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rQ="pendingRedirect",th=new Map;class iQ extends DM{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=th.get(this.auth._key());if(!e){try{const r=await oQ(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}th.set(this.auth._key(),e)}return this.bypassAuthState||th.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function oQ(t,e){const n=LM(e),r=OM(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}async function JE(t,e){return OM(t)._set(LM(e),"true")}function sQ(){th.clear()}function ZE(t,e){th.set(t._key(),e)}function OM(t){return Rr(t._redirectPersistence)}function LM(t){return Ka(rQ,t.config.apiKey,t.name)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aQ(t,e,n){return uQ(t,e,n)}async function uQ(t,e,n){const r=Rt(t);Lc(t,e,qo),await r._initializationPromise;const i=Lu(r,n);return await JE(i,r),i._openRedirect(r,e,"signInViaRedirect")}function lQ(t,e,n){return cQ(t,e,n)}async function cQ(t,e,n){const r=ye(t);Lc(r.auth,e,qo),await r.auth._initializationPromise;const i=Lu(r.auth,n);await JE(i,r.auth);const o=await MM(r);return i._openRedirect(r.auth,e,"reauthViaRedirect",o)}function dQ(t,e,n){return hQ(t,e,n)}async function hQ(t,e,n){const r=ye(t);Lc(r.auth,e,qo),await r.auth._initializationPromise;const i=Lu(r.auth,n);await ly(!1,r,e.providerId),await JE(i,r.auth);const o=await MM(r);return i._openRedirect(r.auth,e,"linkViaRedirect",o)}async function fQ(t,e){return await Rt(t)._initializationPromise,my(t,e,!1)}async function my(t,e,n=!1){const r=Rt(t),i=Lu(r,e),s=await new iQ(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}async function MM(t){const e=Ff("".concat(t.uid,":::"));return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pQ=10*60*1e3;class VM{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mQ(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!FM(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Tn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=pQ&&this.cachedEventUids.clear(),this.cachedEventUids.has(yR(e))}saveEventToCache(e){this.cachedEventUids.add(yR(e)),this.lastProcessedEventTime=Date.now()}}function yR(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function FM({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function mQ(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return FM(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(t,e={}){return Mt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gQ=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vQ=/^https?/;async function yQ(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $M(t);for(const n of e)try{if(wQ(n))return}catch(r){}Sn(t,"unauthorized-domain")}function wQ(t){const e=$h(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!vQ.test(n))return!1;if(gQ.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bQ=new Of(3e4,6e4);function wR(){const t=Ut().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function xQ(t){return new Promise((e,n)=>{var r,i,o;function s(){wR(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wR(),n(Tn(t,"network-request-failed"))},timeout:bQ.get()})}if(!((i=(r=Ut().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=Ut().gapi)===null||o===void 0)&&o.load)s();else{const a=fM("iframefcb");return Ut()[a]=()=>{gapi.load?s():n(Tn(t,"network-request-failed"))},jE("".concat(hY(),"?onload=").concat(a)).catch(u=>n(u))}}).catch(e=>{throw Nm=null,e})}let Nm=null;function _Q(t){return Nm=Nm||xQ(t),Nm}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EQ=new Of(5e3,15e3),IQ="__/auth/iframe",TQ="emulator/auth/iframe",CQ={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},kQ=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SQ(t){const e=t.config;te(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?$E(e,TQ):"https://".concat(t.config.authDomain,"/").concat(IQ),r={apiKey:e.apiKey,appName:t.name,v:zo},i=kQ.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),"".concat(n,"?").concat(Oc(r).slice(1))}async function AQ(t){const e=await _Q(t),n=Ut().gapi;return te(n,t,"internal-error"),e.open({where:document.body,url:SQ(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CQ,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=Tn(t,"network-request-failed"),a=Ut().setTimeout(()=>{o(s)},EQ.get());function u(){Ut().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RQ={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},NQ=500,PQ=600,DQ="_blank",OQ="http://localhost";class bR{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function LQ(t,e,n,r=NQ,i=PQ){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},RQ),{width:r.toString(),height:i.toString(),top:o,left:s}),l=yt().toLowerCase();n&&(a=aM(l)?DQ:n),sM(l)&&(e=e||OQ,u.scrollbars="yes");const c=Object.entries(u).reduce((h,[f,m])=>"".concat(h).concat(f,"=").concat(m,","),"");if(tY(l)&&a!=="_self")return MQ(e||"",a),new bR(null);const d=window.open(e||"",a,c);te(d,t,"popup-blocked");try{d.focus()}catch(h){}return new bR(d)}function MQ(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VQ="__/auth/handler",FQ="emulator/auth/handler",$Q=encodeURIComponent("fac");async function Vx(t,e,n,r,i,o){te(t.config.authDomain,t,"auth-domain-config-required"),te(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:zo,eventId:i};if(e instanceof qo){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",a7(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[c,d]of Object.entries(o||{}))s[c]=d}if(e instanceof Fc){const c=e.getScopes().filter(d=>d!=="");c.length>0&&(s.scopes=c.join(","))}t.tenantId&&(s.tid=t.tenantId);const a=s;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await t._getAppCheckToken(),l=u?"#".concat($Q,"=").concat(encodeURIComponent(u)):"";return"".concat(BQ(t),"?").concat(Oc(a).slice(1)).concat(l)}function BQ({config:t}){return t.emulator?$E(t,FQ):"https://".concat(t.authDomain,"/").concat(VQ)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw="webStorageSupport";class jQ{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=du,this._completeRedirectFn=my,this._overrideRedirectResult=ZE}async _openPopup(e,n,r,i){var o;_i((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await Vx(e,n,r,$h(),i);return LQ(e,s,Ff())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await Vx(e,n,r,$h(),i);return EX(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(_i(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await AQ(e),r=new VM(e);return n.register("authEvent",i=>(te(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Mw,{type:Mw},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[Mw];s!==void 0&&n(!!s),Sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=yQ(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return dM()||BE()||Mc()}}const UQ=jQ;class zQ{constructor(e){this.factorId=e}_process(e,n,r){switch(n.type){case"enroll":return this._finalizeEnroll(e,n.credential,r);case"signin":return this._finalizeSignIn(e,n.credential);default:return Wi("unexpected MultiFactorSessionType")}}}class eI extends zQ{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new eI(e)}_finalizeEnroll(e,n,r){return mX(e,{idToken:n,displayName:r,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,n){return DX(e,{mfaPendingCredential:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class BM{constructor(){}static assertion(e){return eI._fromCredential(e)}}BM.FACTOR_ID="phone";var xR="@firebase/auth",_R="1.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WQ{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qQ(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HQ(t){Po(new oi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:a}=r.options;te(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:s,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:hM(t)},l=new uY(r,i,o,u);return gY(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Po(new oi("auth-internal",e=>{const n=Rt(e.getProvider("auth").getImmediate());return(r=>new WQ(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ni(xR,_R,qQ(t)),ni(xR,_R,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GQ=5*60;ZG("authIdTokenMaxAge");function KQ(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}lY({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=Tn("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",KQ().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HQ("Browser");/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fu(){return window}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YQ=2e3;async function XQ(t,e,n){var r;const{BuildInfo:i}=fu();_i(e.sessionId,"AuthEvent did not contain a session ID");const o=await tJ(e.sessionId),s={};return Mc()?s.ibi=i.packageName:Lf()?s.apn=i.packageName:Sn(t,"operation-not-supported-in-this-environment"),i.displayName&&(s.appDisplayName=i.displayName),s.sessionId=o,Vx(t,n,e.type,void 0,(r=e.eventId)!==null&&r!==void 0?r:void 0,s)}async function QQ(t){const{BuildInfo:e}=fu(),n={};Mc()?n.iosBundleId=e.packageName:Lf()?n.androidPackageName=e.packageName:Sn(t,"operation-not-supported-in-this-environment"),await $M(t,n)}function JQ(t){const{cordova:e}=fu();return new Promise(n=>{e.plugins.browsertab.isAvailable(r=>{let i=null;r?e.plugins.browsertab.openUrl(t):i=e.InAppBrowser.open(t,eY()?"_blank":"_system","location=yes"),n(i)})})}async function ZQ(t,e,n){const{cordova:r}=fu();let i=()=>{};try{await new Promise((o,s)=>{let a=null;function u(){var d;o();const h=(d=r.plugins.browsertab)===null||d===void 0?void 0:d.close;typeof h=="function"&&h(),typeof(n==null?void 0:n.close)=="function"&&n.close()}function l(){a||(a=window.setTimeout(()=>{s(Tn(t,"redirect-cancelled-by-user"))},YQ))}function c(){(document==null?void 0:document.visibilityState)==="visible"&&l()}e.addPassiveListener(u),document.addEventListener("resume",l,!1),Lf()&&document.addEventListener("visibilitychange",c,!1),i=()=>{e.removePassiveListener(u),document.removeEventListener("resume",l,!1),document.removeEventListener("visibilitychange",c,!1),a&&window.clearTimeout(a)}})}finally{i()}}function eJ(t){var e,n,r,i,o,s,a,u,l,c;const d=fu();te(typeof((e=d==null?void 0:d.universalLinks)===null||e===void 0?void 0:e.subscribe)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),te(typeof((n=d==null?void 0:d.BuildInfo)===null||n===void 0?void 0:n.packageName)<"u",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),te(typeof((o=(i=(r=d==null?void 0:d.cordova)===null||r===void 0?void 0:r.plugins)===null||i===void 0?void 0:i.browsertab)===null||o===void 0?void 0:o.openUrl)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((u=(a=(s=d==null?void 0:d.cordova)===null||s===void 0?void 0:s.plugins)===null||a===void 0?void 0:a.browsertab)===null||u===void 0?void 0:u.isAvailable)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),te(typeof((c=(l=d==null?void 0:d.cordova)===null||l===void 0?void 0:l.InAppBrowser)===null||c===void 0?void 0:c.open)=="function",t,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}async function tJ(t){const e=nJ(t),n=await crypto.subtle.digest("SHA-256",e);return Array.from(new Uint8Array(n)).map(i=>i.toString(16).padStart(2,"0")).join("")}function nJ(t){if(_i(/[0-9a-zA-Z]+/.test(t),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return new TextEncoder().encode(t);const e=new ArrayBuffer(t.length),n=new Uint8Array(e);for(let r=0;r<t.length;r++)n[r]=t.charCodeAt(r);return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rJ=20;class iJ extends VM{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(n=>n(e)),super.onEvent(e)}async initialized(){await this.initPromise}}function oJ(t,e,n=null){return{type:e,eventId:n,urlResponse:null,sessionId:uJ(),postBody:null,tenantId:t.tenantId,error:Tn(t,"no-auth-event")}}function sJ(t,e){return Fx()._set($x(t),e)}async function ER(t){const e=await Fx()._get($x(t));return e&&await Fx()._remove($x(t)),e}function aJ(t,e){var n,r;const i=cJ(e);if(i.includes("/__/auth/callback")){const o=Pm(i),s=o.firebaseError?lJ(decodeURIComponent(o.firebaseError)):null,a=(r=(n=s==null?void 0:s.code)===null||n===void 0?void 0:n.split("auth/"))===null||r===void 0?void 0:r[1],u=a?Tn(a):null;return u?{type:t.type,eventId:t.eventId,tenantId:t.tenantId,error:u,urlResponse:null,sessionId:null,postBody:null}:{type:t.type,eventId:t.eventId,tenantId:t.tenantId,sessionId:t.sessionId,urlResponse:i,postBody:null}}return null}function uJ(){const t=[],e="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<rJ;n++){const r=Math.floor(Math.random()*e.length);t.push(e.charAt(r))}return t.join("")}function Fx(){return Rr(KE)}function $x(t){return Ka("authEvent",t.config.apiKey,t.name)}function lJ(t){try{return JSON.parse(t)}catch(e){return null}}function cJ(t){const e=Pm(t),n=e.link?decodeURIComponent(e.link):void 0,r=Pm(n).link,i=e.deep_link_id?decodeURIComponent(e.deep_link_id):void 0;return Pm(i).link||i||r||n||t}function Pm(t){if(!(t!=null&&t.includes("?")))return{};const[e,...n]=t.split("?");return Sl(n.join("?"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dJ=500;class hJ{constructor(){this._redirectPersistence=du,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=my,this._overrideRedirectResult=ZE}async _initialize(e){const n=e._key();let r=this.eventManagers.get(n);return r||(r=new iJ(e),this.eventManagers.set(n,r),this.attachCallbackListeners(e,r)),r}_openPopup(e){Sn(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,n,r,i){eJ(e);const o=await this._initialize(e);await o.initialized(),o.resetRedirect(),sQ(),await this._originValidation(e);const s=oJ(e,r,i);await sJ(e,s);const a=await XQ(e,s,n),u=await JQ(a);return ZQ(e,o,u)}_isIframeWebStorageSupported(e,n){throw new Error("Method not implemented.")}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=QQ(e)),this.originValidationPromises[n]}attachCallbackListeners(e,n){const{universalLinks:r,handleOpenURL:i,BuildInfo:o}=fu(),s=setTimeout(async()=>{await ER(e),n.onEvent(IR())},dJ),a=async c=>{clearTimeout(s);const d=await ER(e);let h=null;d&&(c!=null&&c.url)&&(h=aJ(d,c.url)),n.onEvent(h||IR())};typeof r<"u"&&typeof r.subscribe=="function"&&r.subscribe(null,a);const u=i,l="".concat(o.packageName.toLowerCase(),"://");fu().handleOpenURL=async c=>{if(c.toLowerCase().startsWith(l)&&a({url:c}),typeof u=="function")try{u(c)}catch(d){console.error(d)}}}}const fJ=hJ;function IR(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Tn("no-auth-event")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pJ(t,e){Rt(t)._logFramework(e)}var mJ="@firebase/auth-compat",gJ="0.5.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vJ=1e3;function nh(){var t;return((t=self==null?void 0:self.location)===null||t===void 0?void 0:t.protocol)||null}function yJ(){return nh()==="http:"||nh()==="https:"}function jM(t=yt()){return!!((nh()==="file:"||nh()==="ionic:"||nh()==="capacitor:")&&t.toLowerCase().match(/iphone|ipad|ipod|android/))}function wJ(){return DE()||PE()}function bJ(){return FL()&&(document==null?void 0:document.documentMode)===11}function xJ(t=yt()){return/Edge\/\d+/.test(t)}function _J(t=yt()){return bJ()||xJ(t)}function UM(){try{const t=self.localStorage,e=Ff();if(t)return t.setItem(e,"1"),t.removeItem(e),_J()?Lh():!0}catch(t){return tI()&&Lh()}return!1}function tI(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vw(){return(yJ()||VL()||jM())&&!wJ()&&UM()&&!tI()}function zM(){return jM()&&typeof document<"u"}async function EJ(){return zM()?new Promise(t=>{const e=setTimeout(()=>{t(!1)},vJ);document.addEventListener("deviceready",()=>{clearTimeout(e),t(!0)})}):!1}function IJ(){return typeof window<"u"?window:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kr={LOCAL:"local",NONE:"none",SESSION:"session"},md=te,WM="persistence";function TJ(t,e){if(md(Object.values(kr).includes(e),t,"invalid-persistence-type"),DE()){md(e!==kr.SESSION,t,"unsupported-persistence-type");return}if(PE()){md(e===kr.NONE,t,"unsupported-persistence-type");return}if(tI()){md(e===kr.NONE||e===kr.LOCAL&&Lh(),t,"unsupported-persistence-type");return}md(e===kr.NONE||UM(),t,"unsupported-persistence-type")}async function Bx(t){await t._initializationPromise;const e=qM(),n=Ka(WM,t.config.apiKey,t.name);e&&e.setItem(n,t._getPersistence())}function CJ(t,e){const n=qM();if(!n)return[];const r=Ka(WM,t,e);switch(n.getItem(r)){case kr.NONE:return[oc];case kr.LOCAL:return[Wh,du];case kr.SESSION:return[du];default:return[]}}function qM(){var t;try{return((t=IJ())===null||t===void 0?void 0:t.sessionStorage)||null}catch(e){return null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kJ=te;class bs{constructor(){this.browserResolver=Rr(UQ),this.cordovaResolver=Rr(fJ),this.underlyingResolver=null,this._redirectPersistence=du,this._completeRedirectFn=my,this._overrideRedirectResult=ZE}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,n,r,i)}async _openRedirect(e,n,r,i){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,n,r,i)}_isIframeWebStorageSupported(e,n){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,n)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return zM()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return kJ(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await EJ();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HM(t){return t.unwrap()}function SJ(t){return t.wrapped()}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AJ(t){return GM(t)}function RJ(t,e){var n;const r=(n=e.customData)===null||n===void 0?void 0:n._tokenResponse;if((e==null?void 0:e.code)==="auth/multi-factor-auth-required"){const i=e;i.resolver=new NJ(t,fX(t,e))}else if(r){const i=GM(e),o=e;i&&(o.credential=i,o.tenantId=r.tenantId||void 0,o.email=r.email||void 0,o.phoneNumber=r.phoneNumber||void 0)}}function GM(t){const{_tokenResponse:e}=t instanceof Mn?t.customData:t;if(!e)return null;if(!(t instanceof Mn)&&"temporaryProof"in e&&"phoneNumber"in e)return hu.credentialFromResult(t);const n=e.providerId;if(!n||n===pd.PASSWORD)return null;let r;switch(n){case pd.GOOGLE:r=Vi;break;case pd.FACEBOOK:r=Mi;break;case pd.GITHUB:r=Fi;break;case pd.TWITTER:r=$i;break;default:const{oauthIdToken:i,oauthAccessToken:o,oauthTokenSecret:s,pendingToken:a,nonce:u}=e;return!o&&!s&&!i&&!a?null:a?n.startsWith("saml.")?sc._create(n,a):to._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:i,accessToken:o}):new Fl(n).credential({idToken:i,accessToken:o,rawNonce:u})}return t instanceof Mn?r.credentialFromError(t):r.credentialFromResult(t)}function ur(t,e){return e.catch(n=>{throw n instanceof Mn&&RJ(t,n),n}).then(n=>{const r=n.operationType,i=n.user;return{operationType:r,credential:AJ(n),additionalUserInfo:hX(n),user:gy.getOrCreate(i)}})}async function jx(t,e){const n=await e;return{verificationId:n.verificationId,confirm:r=>ur(t,n.confirm(r))}}class NJ{constructor(e,n){this.resolver=n,this.auth=SJ(e)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return ur(HM(this.auth),this.resolver.resolveSignIn(e))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let gy=class Ld{constructor(e){this._delegate=e,this.multiFactor=vX(e)}static getOrCreate(e){return Ld.USER_MAP.has(e)||Ld.USER_MAP.set(e,new Ld(e)),Ld.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return ur(this.auth,xM(this._delegate,e))}async linkWithPhoneNumber(e,n){return jx(this.auth,GX(this._delegate,e,n))}async linkWithPopup(e){return ur(this.auth,nQ(this._delegate,e,bs))}async linkWithRedirect(e){return await Bx(Rt(this.auth)),dQ(this._delegate,e,bs)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return ur(this.auth,_M(this._delegate,e))}reauthenticateWithPhoneNumber(e,n){return jx(this.auth,KX(this._delegate,e,n))}reauthenticateWithPopup(e){return ur(this.auth,tQ(this._delegate,e,bs))}async reauthenticateWithRedirect(e){return await Bx(Rt(this.auth)),lQ(this._delegate,e,bs)}sendEmailVerification(e){return tX(this._delegate,e)}async unlink(e){return await jY(this._delegate,e),this}updateEmail(e){return oX(this._delegate,e)}updatePassword(e){return sX(this._delegate,e)}updatePhoneNumber(e){return YX(this._delegate,e)}updateProfile(e){return iX(this._delegate,e)}verifyBeforeUpdateEmail(e,n){return nX(this._delegate,e,n)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};gy.USER_MAP=new WeakMap;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gd=te;class Ux{constructor(e,n){if(this.app=e,n.isInitialized()){this._delegate=n.getImmediate(),this.linkUnderlyingAuth();return}const{apiKey:r}=e.options;gd(r,"invalid-api-key",{appName:e.name}),gd(r,"invalid-api-key",{appName:e.name});const i=typeof window<"u"?bs:void 0;this._delegate=n.initialize({options:{persistence:PJ(r,e.name),popupRedirectResolver:i}}),this._delegate._updateErrorMap(RK),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?gy.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,n){vY(this._delegate,e,n)}applyActionCode(e){return HY(this._delegate,e)}checkActionCode(e){return EM(this._delegate,e)}confirmPasswordReset(e,n){return qY(this._delegate,e,n)}async createUserWithEmailAndPassword(e,n){return ur(this._delegate,KY(this._delegate,e,n))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return eX(this._delegate,e)}isSignInWithEmailLink(e){return QY(this._delegate,e)}async getRedirectResult(){gd(Vw(),this._delegate,"operation-not-supported-in-this-environment");const e=await fQ(this._delegate,bs);return e?ur(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){pJ(this._delegate,e)}onAuthStateChanged(e,n,r){const{next:i,error:o,complete:s}=TR(e,n,r);return this._delegate.onAuthStateChanged(i,o,s)}onIdTokenChanged(e,n,r){const{next:i,error:o,complete:s}=TR(e,n,r);return this._delegate.onIdTokenChanged(i,o,s)}sendSignInLinkToEmail(e,n){return XY(this._delegate,e,n)}sendPasswordResetEmail(e,n){return WY(this._delegate,e,n||void 0)}async setPersistence(e){TJ(this._delegate,e);let n;switch(e){case kr.SESSION:n=du;break;case kr.LOCAL:n=await Rr(Wh)._isAvailable()?Wh:KE;break;case kr.NONE:n=oc;break;default:return Sn("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(n)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return ur(this._delegate,BY(this._delegate))}signInWithCredential(e){return ur(this._delegate,cy(this._delegate,e))}signInWithCustomToken(e){return ur(this._delegate,zY(this._delegate,e))}signInWithEmailAndPassword(e,n){return ur(this._delegate,YY(this._delegate,e,n))}signInWithEmailLink(e,n){return ur(this._delegate,JY(this._delegate,e,n))}signInWithPhoneNumber(e,n){return jx(this._delegate,HX(this._delegate,e,n))}async signInWithPopup(e){return gd(Vw(),this._delegate,"operation-not-supported-in-this-environment"),ur(this._delegate,eQ(this._delegate,e,bs))}async signInWithRedirect(e){return gd(Vw(),this._delegate,"operation-not-supported-in-this-environment"),await Bx(this._delegate),aQ(this._delegate,e,bs)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return GY(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}Ux.Persistence=kr;function TR(t,e,n){let r=t;typeof t!="function"&&({next:r,error:e,complete:n}=t);const i=r;return{next:s=>i(s&&gy.getOrCreate(s)),error:e,complete:n}}function PJ(t,e){const n=CJ(t,e);if(typeof self<"u"&&!n.includes(Wh)&&n.push(Wh),typeof window<"u")for(const r of[KE,du])n.includes(r)||n.push(r);return n.includes(oc)||n.push(oc),n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(){this.providerId="phone",this._delegate=new hu(HM(Ie.auth()))}static credential(e,n){return hu.credential(e,n)}verifyPhoneNumber(e,n){return this._delegate.verifyPhoneNumber(e,n)}unwrap(){return this._delegate}}nI.PHONE_SIGN_IN_METHOD=hu.PHONE_SIGN_IN_METHOD;nI.PROVIDER_ID=hu.PROVIDER_ID;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DJ=te;class OJ{constructor(e,n,r=Ie.app()){var i;DJ((i=r.options)===null||i===void 0?void 0:i.apiKey,"invalid-api-key",{appName:r.name}),this._delegate=new WX(r.auth(),e,n),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LJ="auth-compat";function MJ(t){t.INTERNAL.registerComponent(new oi(LJ,e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("auth");return new Ux(n,r)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Yu.EMAIL_SIGNIN,PASSWORD_RESET:Yu.PASSWORD_RESET,RECOVER_EMAIL:Yu.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Yu.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Yu.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Yu.VERIFY_EMAIL}},EmailAuthProvider:Zs,FacebookAuthProvider:Mi,GithubAuthProvider:Fi,GoogleAuthProvider:Vi,OAuthProvider:Fl,SAMLAuthProvider:Lg,PhoneAuthProvider:nI,PhoneMultiFactorGenerator:BM,RecaptchaVerifier:OJ,TwitterAuthProvider:$i,Auth:Ux,AuthCredential:Vc,Error:Mn}).setInstantiationMode("LAZY").setMultipleInstances(!1)),t.registerVersion(mJ,gJ)}MJ(Ie);var VJ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ue,rI=rI||{},Se=VJ||self;function vy(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Bf(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function FJ(t){return Object.prototype.hasOwnProperty.call(t,Fw)&&t[Fw]||(t[Fw]=++$J)}var Fw="closure_uid_"+(1e9*Math.random()>>>0),$J=0;function BJ(t,e,n){return t.call.apply(t.bind,arguments)}function jJ(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Vn(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Vn=BJ:Vn=jJ,Vn.apply(null,arguments)}function Hp(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function fn(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),a=2;a<arguments.length;a++)s[a-2]=arguments[a];return e.prototype[i].apply(r,s)}}function ea(){this.s=this.s,this.o=this.o}var UJ=0;ea.prototype.s=!1;ea.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),UJ!=0)&&FJ(this)};ea.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const KM=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function iI(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function CR(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(vy(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Fn(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Fn.prototype.h=function(){this.defaultPrevented=!0};var zJ=function(){if(!Se.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const n=()=>{};Se.addEventListener("test",n,e),Se.removeEventListener("test",n,e)}catch(n){}return t}();function qh(t){return/^[\s\xa0]*$/.test(t)}function yy(){var t=Se.navigator;return t&&(t=t.userAgent)?t:""}function Bi(t){return yy().indexOf(t)!=-1}function oI(t){return oI[" "](t),t}oI[" "]=function(){};function WJ(t,e){var n=MZ;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var qJ=Bi("Opera"),ac=Bi("Trident")||Bi("MSIE"),YM=Bi("Edge"),zx=YM||ac,XM=Bi("Gecko")&&!(yy().toLowerCase().indexOf("webkit")!=-1&&!Bi("Edge"))&&!(Bi("Trident")||Bi("MSIE"))&&!Bi("Edge"),HJ=yy().toLowerCase().indexOf("webkit")!=-1&&!Bi("Edge");function QM(){var t=Se.document;return t?t.documentMode:void 0}var Wx;e:{var $w="",Bw=function(){var t=yy();if(XM)return/rv:([^\);]+)(\)|;)/.exec(t);if(YM)return/Edge\/([\d\.]+)/.exec(t);if(ac)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(HJ)return/WebKit\/(\S+)/.exec(t);if(qJ)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Bw&&($w=Bw?Bw[1]:""),ac){var jw=QM();if(jw!=null&&jw>parseFloat($w)){Wx=String(jw);break e}}Wx=$w}var qx;if(Se.document&&ac){var kR=QM();qx=kR||parseInt(Wx,10)||void 0}else qx=void 0;var GJ=qx;function Hh(t,e){if(Fn.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(XM){e:{try{oI(e.nodeName);var i=!0;break e}catch(o){}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:KJ[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Hh.$.h.call(this)}}fn(Hh,Fn);var KJ={2:"touch",3:"pen",4:"mouse"};Hh.prototype.h=function(){Hh.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var jf="closure_listenable_"+(1e6*Math.random()|0),YJ=0;function XJ(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++YJ,this.fa=this.ia=!1}function wy(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function sI(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function QJ(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function JM(t){const e={};for(const n in t)e[n]=t[n];return e}const SR="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ZM(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<SR.length;o++)n=SR[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function by(t){this.src=t,this.g={},this.h=0}by.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=Gx(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new XJ(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function Hx(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=KM(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(wy(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Gx(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var aI="closure_lm_"+(1e6*Math.random()|0),Uw={};function eV(t,e,n,r,i){if(r&&r.once)return nV(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)eV(t,e[o],n,r,i);return null}return n=cI(n),t&&t[jf]?t.O(e,n,Bf(r)?!!r.capture:!!r,i):tV(t,e,n,!1,r,i)}function tV(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Bf(i)?!!i.capture:!!i,a=lI(t);if(a||(t[aI]=a=new by(t)),n=a.add(e,n,r,s,o),n.proxy)return n;if(r=JJ(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)zJ||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(iV(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function JJ(){function t(n){return e.call(t.src,t.listener,n)}const e=ZJ;return t}function nV(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)nV(t,e[o],n,r,i);return null}return n=cI(n),t&&t[jf]?t.P(e,n,Bf(r)?!!r.capture:!!r,i):tV(t,e,n,!0,r,i)}function rV(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)rV(t,e[o],n,r,i);else r=Bf(r)?!!r.capture:!!r,n=cI(n),t&&t[jf]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=Gx(o,n,r,i),-1<n&&(wy(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=lI(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Gx(e,n,r,i)),(n=-1<t?e[t]:null)&&uI(n))}function uI(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[jf])Hx(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(iV(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=lI(e))?(Hx(n,t),n.h==0&&(n.src=null,e[aI]=null)):wy(t)}}}function iV(t){return t in Uw?Uw[t]:Uw[t]="on"+t}function ZJ(t,e){if(t.fa)t=!0;else{e=new Hh(e,this);var n=t.listener,r=t.la||t.src;t.ia&&uI(t),t=n.call(r,e)}return t}function lI(t){return t=t[aI],t instanceof by?t:null}var zw="__closure_events_fn_"+(1e9*Math.random()>>>0);function cI(t){return typeof t=="function"?t:(t[zw]||(t[zw]=function(e){return t.handleEvent(e)}),t[zw])}function cn(){ea.call(this),this.i=new by(this),this.S=this,this.J=null}fn(cn,ea);cn.prototype[jf]=!0;cn.prototype.removeEventListener=function(t,e,n,r){rV(this,t,e,n,r)};function Cn(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Fn(e,t);else if(e instanceof Fn)e.target=e.target||t;else{var i=e;e=new Fn(r,t),ZM(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Gp(s,r,!0,e)&&i}if(s=e.g=t,i=Gp(s,r,!0,e)&&i,i=Gp(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=Gp(s,r,!1,e)&&i}cn.prototype.N=function(){if(cn.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)wy(n[r]);delete t.g[e],t.h--}}this.J=null};cn.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};cn.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function Gp(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var a=s.listener,u=s.la||s.src;s.ia&&Hx(t.i,s),i=a.call(u,r)!==!1&&i}}return i&&!r.defaultPrevented}var dI=Se.JSON.stringify;class eZ{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function tZ(){var t=hI;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class nZ{constructor(){this.h=this.g=null}add(e,n){const r=oV.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var oV=new eZ(()=>new rZ,t=>t.reset());class rZ{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function iZ(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function oZ(t){Se.setTimeout(()=>{throw t},0)}let Gh,Kh=!1,hI=new nZ,sV=()=>{const t=Se.Promise.resolve(void 0);Gh=()=>{t.then(sZ)}};var sZ=()=>{for(var t;t=tZ();){try{t.h.call(t.g)}catch(n){oZ(n)}var e=oV;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Kh=!1};function xy(t,e){cn.call(this),this.h=t||1,this.g=e||Se,this.j=Vn(this.qb,this),this.l=Date.now()}fn(xy,cn);ue=xy.prototype;ue.ga=!1;ue.T=null;ue.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Cn(this,"tick"),this.ga&&(fI(this),this.start()))}};ue.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function fI(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}ue.N=function(){xy.$.N.call(this),fI(this),delete this.g};function pI(t,e,n){if(typeof t=="function")n&&(t=Vn(t,n));else if(t&&typeof t.handleEvent=="function")t=Vn(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:Se.setTimeout(t,e||0)}function aV(t){t.g=pI(()=>{t.g=null,t.i&&(t.i=!1,aV(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class aZ extends ea{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:aV(this)}N(){super.N(),this.g&&(Se.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Yh(t){ea.call(this),this.h=t,this.g={}}fn(Yh,ea);var AR=[];function uV(t,e,n,r){Array.isArray(n)||(n&&(AR[0]=n.toString()),n=AR);for(var i=0;i<n.length;i++){var o=eV(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function lV(t){sI(t.g,function(e,n){this.g.hasOwnProperty(n)&&uI(e)},t),t.g={}}Yh.prototype.N=function(){Yh.$.N.call(this),lV(this)};Yh.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function _y(){this.g=!0}_y.prototype.Ea=function(){this.g=!1};function uZ(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var l=a[u].split("=");if(1<l.length){var c=l[0];l=l[1];var d=c.split("_");s=2<=d.length&&d[1]=="type"?s+(c+"="+l+"&"):s+(c+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}function lZ(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}function Al(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+dZ(t,n)+(r?" "+r:"")})}function cZ(t,e){t.info(function(){return"TIMEOUT: "+e})}_y.prototype.info=function(){};function dZ(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return dI(n)}catch(a){return e}}var Mu={},RR=null;function Ey(){return RR=RR||new cn}Mu.Ta="serverreachability";function cV(t){Fn.call(this,Mu.Ta,t)}fn(cV,Fn);function Xh(t){const e=Ey();Cn(e,new cV(e))}Mu.STAT_EVENT="statevent";function dV(t,e){Fn.call(this,Mu.STAT_EVENT,t),this.stat=e}fn(dV,Fn);function Kn(t){const e=Ey();Cn(e,new dV(e,t))}Mu.Ua="timingevent";function hV(t,e){Fn.call(this,Mu.Ua,t),this.size=e}fn(hV,Fn);function Uf(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return Se.setTimeout(function(){t()},e)}var Iy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},fV={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function mI(){}mI.prototype.h=null;function NR(t){return t.h||(t.h=t.i())}function pV(){}var zf={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function gI(){Fn.call(this,"d")}fn(gI,Fn);function vI(){Fn.call(this,"c")}fn(vI,Fn);var Kx;function Ty(){}fn(Ty,mI);Ty.prototype.g=function(){return new XMLHttpRequest};Ty.prototype.i=function(){return{}};Kx=new Ty;function Wf(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Yh(this),this.P=hZ,t=zx?125:void 0,this.V=new xy(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new mV}function mV(){this.i=null,this.g="",this.h=!1}var hZ=45e3,gV={},Yx={};ue=Wf.prototype;ue.setTimeout=function(t){this.P=t};function Xx(t,e,n){t.L=1,t.A=ky(Oo(e)),t.u=n,t.S=!0,vV(t,null)}function vV(t,e){t.G=Date.now(),qf(t),t.B=Oo(t.A);var n=t.B,r=t.W;Array.isArray(r)||(r=[String(r)]),TV(n.i,"t",r),t.o=0,n=t.l.J,t.h=new mV,t.g=HV(t.l,n?e:null,!t.u),0<t.O&&(t.M=new aZ(Vn(t.Pa,t,t.g),t.O)),uV(t.U,t.g,"readystatechange",t.nb),e=t.I?JM(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),Xh(),uZ(t.j,t.v,t.B,t.m,t.W,t.u)}ue.nb=function(t){t=t.target;const e=this.M;e&&qi(t)==3?e.l():this.Pa(t)};ue.Pa=function(t){try{if(t==this.g)e:{const c=qi(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>c)&&(c!=3||zx||this.g&&(this.h.h||this.g.ja()||LR(this.g)))){this.J||c!=4||e==7||(e==8||0>=d?Xh(3):Xh(2)),Cy(this);var n=this.g.da();this.ca=n;t:if(yV(this)){var r=LR(this.g);t="";var i=r.length,o=qi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Fa(this),rh(this);var s="";break t}this.h.i=new Se.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.length=0,this.h.g+=t,this.o=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,lZ(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var a,u=this.g;if((a=u.g?u.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!qh(a)){var l=a;break t}}l=null}if(n=l)Al(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qx(this,n);else{this.i=!1,this.s=3,Kn(12),Fa(this),rh(this);break e}}this.S?(wV(this,c,s),zx&&this.i&&c==3&&(uV(this.U,this.V,"tick",this.mb),this.V.start())):(Al(this.j,this.m,s,null),Qx(this,s)),c==4&&Fa(this),this.i&&!this.J&&(c==4?UV(this.l,this):(this.i=!1,qf(this)))}else DZ(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.s=3,Kn(12)):(this.s=0,Kn(13)),Fa(this),rh(this)}}}catch(c){}finally{}};function yV(t){return t.g?t.v=="GET"&&t.L!=2&&t.l.Ha:!1}function wV(t,e,n){let r=!0,i;for(;!t.J&&t.o<n.length;)if(i=fZ(t,n),i==Yx){e==4&&(t.s=4,Kn(14),r=!1),Al(t.j,t.m,null,"[Incomplete Response]");break}else if(i==gV){t.s=4,Kn(15),Al(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Al(t.j,t.m,i,null),Qx(t,i);yV(t)&&t.o!=0&&(t.h.g=t.h.g.slice(t.o),t.o=0),e!=4||n.length!=0||t.h.h||(t.s=1,Kn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),EI(e),e.M=!0,Kn(11))):(Al(t.j,t.m,n,"[Invalid Chunked Response]"),Fa(t),rh(t))}ue.mb=function(){if(this.g){var t=qi(this.g),e=this.g.ja();this.o<e.length&&(Cy(this),wV(this,t,e),this.i&&t!=4&&qf(this))}};function fZ(t,e){var n=t.o,r=e.indexOf("\n",n);return r==-1?Yx:(n=Number(e.substring(n,r)),isNaN(n)?gV:(r+=1,r+n>e.length?Yx:(e=e.slice(r,r+n),t.o=r+n,e)))}ue.cancel=function(){this.J=!0,Fa(this)};function qf(t){t.Y=Date.now()+t.P,bV(t,t.P)}function bV(t,e){if(t.C!=null)throw Error("WatchDog timer not null");t.C=Uf(Vn(t.lb,t),e)}function Cy(t){t.C&&(Se.clearTimeout(t.C),t.C=null)}ue.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(cZ(this.j,this.B),this.L!=2&&(Xh(),Kn(17)),Fa(this),this.s=2,rh(this)):bV(this,this.Y-t)};function rh(t){t.l.H==0||t.J||UV(t.l,t)}function Fa(t){Cy(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,fI(t.V),lV(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Qx(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Jx(n.i,t))){if(!t.K&&Jx(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch(l){r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)jg(n),Ny(n);else break e;_I(n),Kn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Uf(Vn(n.ib,n),6e3));if(1>=SV(n.i)&&n.oa){try{n.oa()}catch(l){}n.oa=void 0}}else $a(n,11)}else if((t.K||n.g==t)&&jg(n),!qh(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let l=i[e];if(n.V=l[0],l=l[1],n.H==2)if(l[0]=="c"){n.K=l[1],n.pa=l[2];const c=l[3];c!=null&&(n.ra=c,n.l.info("VER="+n.ra));const d=l[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const h=l[5];h!=null&&typeof h=="number"&&0<h&&(r=1.5*h,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const f=t.g;if(f){const m=f.g?f.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(m){var o=r.i;o.g||m.indexOf("spdy")==-1&&m.indexOf("quic")==-1&&m.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(yI(o,o.h),o.h=null))}if(r.F){const v=f.g?f.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,at(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=qV(r,r.J?r.pa:null,r.Y),s.K){AV(r.i,s);var a=s,u=r.L;u&&a.setTimeout(u),a.C&&(Cy(a),qf(a)),r.g=s}else BV(r);0<n.j.length&&Py(n)}else l[0]!="stop"&&l[0]!="close"||$a(n,7);else n.H==3&&(l[0]=="stop"||l[0]=="close"?l[0]=="stop"?$a(n,7):xI(n):l[0]!="noop"&&n.h&&n.h.Aa(l),n.A=0)}}Xh(4)}catch(l){}}function pZ(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(vy(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function mZ(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(vy(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function xV(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(vy(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=mZ(t),r=pZ(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var _V=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function gZ(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Xa(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Xa){this.h=t.h,$g(this,t.j),this.s=t.s,this.g=t.g,Bg(this,t.m),this.l=t.l;var e=t.i,n=new Qh;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),PR(this,n),this.o=t.o}else t&&(e=String(t).match(_V))?(this.h=!1,$g(this,e[1]||"",!0),this.s=Md(e[2]||""),this.g=Md(e[3]||"",!0),Bg(this,e[4]),this.l=Md(e[5]||"",!0),PR(this,e[6]||"",!0),this.o=Md(e[7]||"")):(this.h=!1,this.i=new Qh(null,this.h))}Xa.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Vd(e,DR,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Vd(e,DR,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Vd(n,n.charAt(0)=="/"?wZ:yZ,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Vd(n,xZ)),t.join("")};function Oo(t){return new Xa(t)}function $g(t,e,n){t.j=n?Md(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Bg(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function PR(t,e,n){e instanceof Qh?(t.i=e,_Z(t.i,t.h)):(n||(e=Vd(e,bZ)),t.i=new Qh(e,t.h))}function at(t,e,n){t.i.set(e,n)}function ky(t){return at(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Md(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Vd(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,vZ),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function vZ(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var DR=/[#\/\?@]/g,yZ=/[#\?:]/g,wZ=/[#\?]/g,bZ=/[#\?@]/g,xZ=/#/g;function Qh(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ta(t){t.g||(t.g=new Map,t.h=0,t.i&&gZ(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}ue=Qh.prototype;ue.add=function(t,e){ta(this),this.i=null,t=$c(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function EV(t,e){ta(t),e=$c(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function IV(t,e){return ta(t),e=$c(t,e),t.g.has(e)}ue.forEach=function(t,e){ta(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};ue.ta=function(){ta(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};ue.Z=function(t){ta(this);let e=[];if(typeof t=="string")IV(this,t)&&(e=e.concat(this.g.get($c(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};ue.set=function(t,e){return ta(this),this.i=null,t=$c(this,t),IV(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};ue.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function TV(t,e,n){EV(t,e),0<n.length&&(t.i=null,t.g.set($c(t,e),iI(n)),t.h+=n.length)}ue.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function $c(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function _Z(t,e){e&&!t.j&&(ta(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(EV(this,r),TV(this,i,n))},t)),t.j=e}var EZ=class{constructor(t,e){this.g=t,this.map=e}};function CV(t){this.l=t||IZ,Se.PerformanceNavigationTiming?(t=Se.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(Se.g&&Se.g.Ka&&Se.g.Ka()&&Se.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var IZ=10;function kV(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function SV(t){return t.h?1:t.g?t.g.size:0}function Jx(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function yI(t,e){t.g?t.g.add(e):t.h=e}function AV(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}CV.prototype.cancel=function(){if(this.i=RV(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function RV(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return iI(t.i)}var TZ=class{stringify(t){return Se.JSON.stringify(t,void 0)}parse(t){return Se.JSON.parse(t,void 0)}};function CZ(){this.g=new TZ}function kZ(t,e,n){const r=n||"";try{xV(t,function(i,o){let s=i;Bf(i)&&(s=dI(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function SZ(t,e){const n=new _y;if(Se.Image){const r=new Image;r.onload=Hp(Kp,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Hp(Kp,n,r,"TestLoadImage: error",!1,e),r.onabort=Hp(Kp,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Hp(Kp,n,r,"TestLoadImage: timeout",!1,e),Se.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Kp(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}function Sy(t){this.l=t.ec||null,this.j=t.ob||!1}fn(Sy,mI);Sy.prototype.g=function(){return new Ay(this.l,this.j)};Sy.prototype.i=function(t){return function(){return t}}({});function Ay(t,e){cn.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=wI,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fn(Ay,cn);var wI=0;ue=Ay.prototype;ue.open=function(t,e){if(this.readyState!=wI)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Jh(this)};ue.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||Se).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};ue.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Hf(this)),this.readyState=wI};ue.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Jh(this)),this.g&&(this.readyState=3,Jh(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Se.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;NV(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function NV(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}ue.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Hf(this):Jh(this),this.readyState==3&&NV(this)}};ue.Za=function(t){this.g&&(this.response=this.responseText=t,Hf(this))};ue.Ya=function(t){this.g&&(this.response=t,Hf(this))};ue.ka=function(){this.g&&Hf(this)};function Hf(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Jh(t)}ue.setRequestHeader=function(t,e){this.v.append(t,e)};ue.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};ue.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")};function Jh(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Ay.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var AZ=Se.JSON.parse;function Nt(t){cn.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=PV,this.L=this.M=!1}fn(Nt,cn);var PV="",RZ=/^https?$/i,NZ=["POST","PUT"];ue=Nt.prototype;ue.Oa=function(t){this.M=t};ue.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Kx.g(),this.C=this.u?NR(this.u):NR(Kx),this.g.onreadystatechange=Vn(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){OR(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=Se.FormData&&t instanceof Se.FormData,!(0<=KM(NZ,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{LV(this),0<this.B&&((this.L=PZ(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Vn(this.ua,this)):this.A=pI(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){OR(this,o)}};function PZ(t){return ac&&typeof t.timeout=="number"&&t.ontimeout!==void 0}ue.ua=function(){typeof rI<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Cn(this,"timeout"),this.abort(8))};function OR(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,DV(t),Ry(t)}function DV(t){t.F||(t.F=!0,Cn(t,"complete"),Cn(t,"error"))}ue.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,Cn(this,"complete"),Cn(this,"abort"),Ry(this))};ue.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ry(this,!0)),Nt.$.N.call(this)};ue.La=function(){this.s||(this.G||this.v||this.l?OV(this):this.kb())};ue.kb=function(){OV(this)};function OV(t){if(t.h&&typeof rI<"u"&&(!t.C[1]||qi(t)!=4||t.da()!=2)){if(t.v&&qi(t)==4)pI(t.La,0,t);else if(Cn(t,"readystatechange"),qi(t)==4){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(_V)[1]||null;!i&&Se.self&&Se.self.location&&(i=Se.self.location.protocol.slice(0,-1)),r=!RZ.test(i?i.toLowerCase():"")}n=r}if(n)Cn(t,"complete"),Cn(t,"success");else{t.m=6;try{var o=2<qi(t)?t.g.statusText:""}catch(a){o=""}t.j=o+" ["+t.da()+"]",DV(t)}}finally{Ry(t)}}}}function Ry(t,e){if(t.g){LV(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||Cn(t,"ready");try{n.onreadystatechange=r}catch(i){}}}function LV(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(Se.clearTimeout(t.A),t.A=null)}ue.isActive=function(){return!!this.g};function qi(t){return t.g?t.g.readyState:0}ue.da=function(){try{return 2<qi(this)?this.g.status:-1}catch(t){return-1}};ue.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}};ue.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),AZ(e)}};function LR(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case PV:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(e){return null}}function DZ(t){const e={};t=(t.g&&2<=qi(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<t.length;r++){if(qh(t[r]))continue;var n=iZ(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}QJ(e,function(r){return r.join(", ")})}ue.Ia=function(){return this.m};ue.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function MV(t){let e="";return sI(t,function(n,r){e+=r,e+=":",e+=n,e+="\r\n"}),e}function bI(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=MV(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):at(t,e,n))}function vd(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function VV(t){this.Ga=0,this.j=[],this.l=new _y,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=vd("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=vd("baseRetryDelayMs",5e3,t),this.hb=vd("retryDelaySeedMs",1e4,t),this.eb=vd("forwardChannelMaxRetries",2,t),this.xa=vd("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new CV(t&&t.concurrentRequestLimit),this.Ja=new CZ,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}ue=VV.prototype;ue.ra=8;ue.H=1;function xI(t){if(FV(t),t.H==3){var e=t.W++,n=Oo(t.I);if(at(n,"SID",t.K),at(n,"RID",e),at(n,"TYPE","terminate"),Gf(t,n),e=new Wf(t,t.l,e),e.L=2,e.A=ky(Oo(n)),n=!1,Se.navigator&&Se.navigator.sendBeacon)try{n=Se.navigator.sendBeacon(e.A.toString(),"")}catch(r){}!n&&Se.Image&&(new Image().src=e.A,n=!0),n||(e.g=HV(e.l,null),e.g.ha(e.A)),e.G=Date.now(),qf(e)}WV(t)}function Ny(t){t.g&&(EI(t),t.g.cancel(),t.g=null)}function FV(t){Ny(t),t.u&&(Se.clearTimeout(t.u),t.u=null),jg(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&Se.clearTimeout(t.m),t.m=null)}function Py(t){if(!kV(t.i)&&!t.m){t.m=!0;var e=t.Na;Gh||sV(),Kh||(Gh(),Kh=!0),hI.add(e,t),t.C=0}}function OZ(t,e){return SV(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Uf(Vn(t.Na,t,e),zV(t,t.C)),t.C++,!0)}ue.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Wf(this,this.l,t);let o=this.s;if(this.U&&(o?(o=JM(o),ZM(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=$V(this,i,e),n=Oo(this.I),at(n,"RID",t),at(n,"CVER",22),this.F&&at(n,"X-HTTP-Session-Id",this.F),Gf(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(MV(o)))+"&"+e:this.o&&bI(n,this.o,o)),yI(this.i,i),this.bb&&at(n,"TYPE","init"),this.P?(at(n,"$req",e),at(n,"SID","null"),i.aa=!0,Xx(i,n,null)):Xx(i,n,e),this.H=2}}else this.H==3&&(t?MR(this,t):this.j.length==0||kV(this.i)||MR(this))};function MR(t,e){var n;e?n=e.m:n=t.W++;const r=Oo(t.I);at(r,"SID",t.K),at(r,"RID",n),at(r,"AID",t.V),Gf(t,r),t.o&&t.s&&bI(r,t.o,t.s),n=new Wf(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=$V(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),yI(t.i,n),Xx(n,r,e)}function Gf(t,e){t.na&&sI(t.na,function(n,r){at(e,r,n)}),t.h&&xV({},function(n,r){at(e,r,n)})}function $V(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Vn(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let a=!0;for(let u=0;u<n;u++){let l=i[u].g;const c=i[u].map;if(l-=o,0>l)o=Math.max(0,i[u].g-100),a=!1;else try{kZ(c,s,"req"+l+"_")}catch(d){r&&r(c)}}if(a){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function BV(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Gh||sV(),Kh||(Gh(),Kh=!0),hI.add(e,t),t.A=0}}function _I(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Uf(Vn(t.Ma,t),zV(t,t.A)),t.A++,!0)}ue.Ma=function(){if(this.u=null,jV(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Uf(Vn(this.jb,this),t)}};ue.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Kn(10),Ny(this),jV(this))};function EI(t){t.B!=null&&(Se.clearTimeout(t.B),t.B=null)}function jV(t){t.g=new Wf(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=Oo(t.wa);at(e,"RID","rpc"),at(e,"SID",t.K),at(e,"AID",t.V),at(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&at(e,"TO",t.qa),at(e,"TYPE","xmlhttp"),Gf(t,e),t.o&&t.s&&bI(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=ky(Oo(e)),n.u=null,n.S=!0,vV(n,t)}ue.ib=function(){this.v!=null&&(this.v=null,Ny(this),_I(this),Kn(19))};function jg(t){t.v!=null&&(Se.clearTimeout(t.v),t.v=null)}function UV(t,e){var n=null;if(t.g==e){jg(t),EI(t),t.g=null;var r=2}else if(Jx(t.i,e))n=e.F,AV(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.u?e.u.length:0,e=Date.now()-e.G;var i=t.C;r=Ey(),Cn(r,new hV(r,n)),Py(t)}else BV(t);else if(i=e.s,i==3||i==0&&0<e.ca||!(r==1&&OZ(t,e)||r==2&&_I(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:$a(t,5);break;case 4:$a(t,10);break;case 3:$a(t,6);break;default:$a(t,2)}}}function zV(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function $a(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Vn(t.pb,t);n||(n=new Xa("//www.google.com/images/cleardot.gif"),Se.location&&Se.location.protocol=="http"||$g(n,"https"),ky(n)),SZ(n.toString(),r)}else Kn(2);t.H=0,t.h&&t.h.za(e),WV(t),FV(t)}ue.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Kn(2)):(this.l.info("Failed to ping google.com"),Kn(1))};function WV(t){if(t.H=0,t.ma=[],t.h){const e=RV(t.i);(e.length!=0||t.j.length!=0)&&(CR(t.ma,e),CR(t.ma,t.j),t.i.i.length=0,iI(t.j),t.j.length=0),t.h.ya()}}function qV(t,e,n){var r=n instanceof Xa?Oo(n):new Xa(n);if(r.g!="")e&&(r.g=e+"."+r.g),Bg(r,r.m);else{var i=Se.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Xa(null);r&&$g(o,r),e&&(o.g=e),i&&Bg(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&at(r,n,e),at(r,"VER",t.ra),Gf(t,r),r}function HV(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Nt(new Sy({ob:n})):new Nt(t.va),e.Oa(t.J),e}ue.isActive=function(){return!!this.h&&this.h.isActive(this)};function GV(){}ue=GV.prototype;ue.Ba=function(){};ue.Aa=function(){};ue.za=function(){};ue.ya=function(){};ue.isActive=function(){return!0};ue.Va=function(){};function Ug(){if(ac&&!(10<=Number(GJ)))throw Error("Environmental error: no available transport.")}Ug.prototype.g=function(t,e){return new Or(t,e)};function Or(t,e){cn.call(this),this.g=new VV(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!qh(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!qh(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Bc(this)}fn(Or,cn);Or.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Kn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=qV(t,null,t.Y),Py(t)};Or.prototype.close=function(){xI(this.g)};Or.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=dI(t),t=n);e.j.push(new EZ(e.fb++,t)),e.H==3&&Py(e)};Or.prototype.N=function(){this.g.h=null,delete this.j,xI(this.g),delete this.g,Or.$.N.call(this)};function KV(t){gI.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}fn(KV,gI);function YV(){vI.call(this),this.status=1}fn(YV,vI);function Bc(t){this.g=t}fn(Bc,GV);Bc.prototype.Ba=function(){Cn(this.g,"a")};Bc.prototype.Aa=function(t){Cn(this.g,new KV(t))};Bc.prototype.za=function(t){Cn(this.g,new YV)};Bc.prototype.ya=function(){Cn(this.g,"b")};function LZ(){this.blockSize=-1}function Ei(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}fn(Ei,LZ);Ei.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Ww(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}Ei.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Ww(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Ww(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Ww(this,r),i=0;break}}this.h=i,this.i+=e};Ei.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function He(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var MZ={};function II(t){return-128<=t&&128>t?WJ(t,function(e){return new He([e|0],0>e?-1:0)}):new He([t|0],0>t?-1:0)}function Hi(t){if(isNaN(t)||!isFinite(t))return Bl;if(0>t)return bn(Hi(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Zx;return new He(e,0)}function XV(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return bn(XV(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Hi(Math.pow(e,8)),r=Bl,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=Hi(Math.pow(e,o)),r=r.R(o).add(Hi(s))):(r=r.R(n),r=r.add(Hi(s)))}return r}var Zx=4294967296,Bl=II(0),e_=II(1),VR=II(16777216);ue=He.prototype;ue.ea=function(){if(Yr(this))return-bn(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Zx+r)*e,e*=Zx}return t};ue.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(xo(this))return"0";if(Yr(this))return"-"+bn(this).toString(t);for(var e=Hi(Math.pow(t,6)),n=this,r="";;){var i=Wg(n,e).g;n=zg(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,xo(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};ue.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function xo(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function Yr(t){return t.h==-1}ue.X=function(t){return t=zg(this,t),Yr(t)?-1:xo(t)?0:1};function bn(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new He(n,~t.h).add(e_)}ue.abs=function(){return Yr(this)?bn(this):this};ue.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new He(n,n[n.length-1]&-2147483648?-1:0)};function zg(t,e){return t.add(bn(e))}ue.R=function(t){if(xo(this)||xo(t))return Bl;if(Yr(this))return Yr(t)?bn(this).R(bn(t)):bn(bn(this).R(t));if(Yr(t))return bn(this.R(bn(t)));if(0>this.X(VR)&&0>t.X(VR))return Hi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,a=t.D(i)>>>16,u=t.D(i)&65535;n[2*r+2*i]+=s*u,Yp(n,2*r+2*i),n[2*r+2*i+1]+=o*u,Yp(n,2*r+2*i+1),n[2*r+2*i+1]+=s*a,Yp(n,2*r+2*i+1),n[2*r+2*i+2]+=o*a,Yp(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new He(n,0)};function Yp(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function yd(t,e){this.g=t,this.h=e}function Wg(t,e){if(xo(e))throw Error("division by zero");if(xo(t))return new yd(Bl,Bl);if(Yr(t))return e=Wg(bn(t),e),new yd(bn(e.g),bn(e.h));if(Yr(e))return e=Wg(t,bn(e)),new yd(bn(e.g),e.h);if(30<t.g.length){if(Yr(t)||Yr(e))throw Error("slowDivide_ only works with positive integers.");for(var n=e_,r=e;0>=r.X(t);)n=FR(n),r=FR(r);var i=Xu(n,1),o=Xu(r,1);for(r=Xu(r,2),n=Xu(n,2);!xo(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=Xu(r,1),n=Xu(n,1)}return e=zg(t,i.R(e)),new yd(i,e)}for(i=Bl;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=Hi(n),s=o.R(e);Yr(s)||0<s.X(t);)n-=r,o=Hi(n),s=o.R(e);xo(o)&&(o=e_),i=i.add(o),t=zg(t,s)}return new yd(i,t)}ue.gb=function(t){return Wg(this,t).h};ue.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new He(n,this.h&t.h)};ue.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new He(n,this.h|t.h)};ue.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new He(n,this.h^t.h)};function FR(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new He(n,t.h)}function Xu(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new He(i,t.h)}Ug.prototype.createWebChannel=Ug.prototype.g;Or.prototype.send=Or.prototype.u;Or.prototype.open=Or.prototype.m;Or.prototype.close=Or.prototype.close;Iy.NO_ERROR=0;Iy.TIMEOUT=8;Iy.HTTP_ERROR=6;fV.COMPLETE="complete";pV.EventType=zf;zf.OPEN="a";zf.CLOSE="b";zf.ERROR="c";zf.MESSAGE="d";cn.prototype.listen=cn.prototype.O;Nt.prototype.listenOnce=Nt.prototype.P;Nt.prototype.getLastError=Nt.prototype.Sa;Nt.prototype.getLastErrorCode=Nt.prototype.Ia;Nt.prototype.getStatus=Nt.prototype.da;Nt.prototype.getResponseJson=Nt.prototype.Wa;Nt.prototype.getResponseText=Nt.prototype.ja;Nt.prototype.send=Nt.prototype.ha;Nt.prototype.setWithCredentials=Nt.prototype.Oa;Ei.prototype.digest=Ei.prototype.l;Ei.prototype.reset=Ei.prototype.reset;Ei.prototype.update=Ei.prototype.j;He.prototype.add=He.prototype.add;He.prototype.multiply=He.prototype.R;He.prototype.modulo=He.prototype.gb;He.prototype.compare=He.prototype.X;He.prototype.toNumber=He.prototype.ea;He.prototype.toString=He.prototype.toString;He.prototype.getBits=He.prototype.D;He.fromNumber=Hi;He.fromString=XV;var VZ=function(){return new Ug},FZ=function(){return Ey()},qw=Iy,$Z=fV,BZ=Mu,$R={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Xp=pV,jZ=Nt,UZ=Ei,jl=He;const BR="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}nn.UNAUTHENTICATED=new nn(null),nn.GOOGLE_CREDENTIALS=new nn("google-credentials-uid"),nn.FIRST_PARTY=new nn("first-party-uid"),nn.MOCK_USER=new nn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jc="10.8.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=new oy("@firebase/firestore");function sl(){return $s.logLevel}function zZ(t){$s.setLogLevel(t)}function Z(t,...e){if($s.logLevel<=Pe.DEBUG){const n=e.map(TI);$s.debug("Firestore (".concat(jc,"): ").concat(t),...n)}}function $t(t,...e){if($s.logLevel<=Pe.ERROR){const n=e.map(TI);$s.error("Firestore (".concat(jc,"): ").concat(t),...n)}}function Ii(t,...e){if($s.logLevel<=Pe.WARN){const n=e.map(TI);$s.warn("Firestore (".concat(jc,"): ").concat(t),...n)}}function TI(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch(e){return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function le(t="Unexpected state"){const e="FIRESTORE (".concat(jc,") INTERNAL ASSERTION FAILED: ")+t;throw $t(e),new Error(e)}function we(t,e){t||le()}function WZ(t,e){t||le()}function ae(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class J extends Mn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QV{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class qZ{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(nn.UNAUTHENTICATED))}shutdown(){}}class HZ{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class GZ{constructor(e){this.t=e,this.currentUser=nn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let o=new sn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new sn,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{Z("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(Z("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new sn)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(Z("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(we(typeof r.accessToken=="string"),new QV(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return we(e===null||typeof e=="string"),new nn(e)}}class KZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=nn.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class YZ{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new KZ(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(nn.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class XZ{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QZ{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{o.error!=null&&Z("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(o.error.message));const s=o.token!==this.R;return this.R=o.token,Z("FirebaseAppCheckTokenProvider","Received ".concat(s?"new":"existing"," token.")),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{Z("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):Z("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(we(typeof n.token=="string"),this.R=n.token,new XZ(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JZ(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JV{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=JZ(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function Ae(t,e){return t<e?-1:t>e?1:0}function uc(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}function ZV(t){return t+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new J(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new J(z.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new J(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new J(z.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return vt.fromMillis(Date.now())}static fromDate(e){return vt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new vt(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ae(this.nanoseconds,e.nanoseconds):Ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e){this.timestamp=e}static fromTimestamp(e){return new be(e)}static min(){return new be(new vt(0,0))}static max(){return new be(new vt(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(e,n,r){n===void 0?n=0:n>e.length&&le(),r===void 0?r=e.length-n:r>e.length-n&&le(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Zh.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Zh?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Oe extends Zh{construct(e,n,r){return new Oe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new J(z.INVALID_ARGUMENT,"Invalid segment (".concat(r,"). Paths must not contain // in them."));n.push(...r.split("/").filter(i=>i.length>0))}return new Oe(n)}static emptyPath(){return new Oe([])}}const ZZ=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mt extends Zh{construct(e,n,r){return new mt(e,n,r)}static isValidIdentifier(e){return ZZ.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new mt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new J(z.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));n.push(r),r=""};let s=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new J(z.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new J(z.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(s=!s,i++):a!=="."||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new J(z.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mt(n)}static emptyPath(){return new mt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oe{constructor(e){this.path=e}static fromPath(e){return new oe(Oe.fromString(e))}static fromName(e){return new oe(Oe.fromString(e).popFirst(5))}static empty(){return new oe(Oe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Oe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Oe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new oe(new Oe(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qg{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}}function t_(t){return t.fields.find(e=>e.kind===2)}function Ia(t){return t.fields.filter(e=>e.kind!==2)}qg.UNKNOWN_ID=-1;class Dm{constructor(e,n){this.fieldPath=e,this.kind=n}}class ef{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ef(0,Lr.min())}}function eF(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=be.fromTimestamp(r===1e9?new vt(n+1,0):new vt(n,r));return new Lr(i,oe.empty(),e)}function tF(t){return new Lr(t.readTime,t.key,-1)}class Lr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Lr(be.min(),oe.empty(),-1)}static max(){return new Lr(be.max(),oe.empty(),-1)}}function CI(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=oe.comparator(t.documentKey,e.documentKey),n!==0?n:Ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(t){if(t.code!==z.FAILED_PRECONDITION||t.message!==nF)throw t;Z("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&le(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,o=0,s=!1;e.forEach(a=>{++i,a.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const o=e.length,s=new Array(o);let a=0;for(let u=0;u<o;u++){const l=u;n(e[l]).next(c=>{s[l]=c,++a,a===o&&r(s)},c=>i(c))}})}static doWhile(e,n){return new $((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.V=new sn,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{n.error?this.V.reject(new ih(e,n.error)):this.V.resolve()},this.transaction.onerror=r=>{const i=kI(r.target.error);this.V.reject(new ih(e,i))}}static open(e,n,r,i){try{return new Dy(n,e.transaction(i,r))}catch(o){throw new ih(n,o)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(Z("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const n=this.transaction.objectStore(e);return new tee(n)}}class Jr{constructor(e,n,r){this.name=e,this.version=n,this.p=r,Jr.S(yt())===12.2&&$t("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Z("SimpleDb","Removing database:",e),ka(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!Lh())return!1;if(Jr.C())return!0;const e=yt(),n=Jr.S(e),r=0<n&&n<10,i=Jr.v(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,n){return e.store(n)}static S(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static v(e){const n=e.match(/Android ([\d.]+)/i),r=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(r)}async O(e){return this.db||(Z("SimpleDb","Opening database:",this.name),this.db=await new Promise((n,r)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=o=>{const s=o.target.result;n(s)},i.onblocked=()=>{r(new ih(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=o=>{const s=o.target.error;s.name==="VersionError"?r(new J(z.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):s.name==="InvalidStateError"?r(new J(z.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+s)):r(new ih(e,s))},i.onupgradeneeded=o=>{Z("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',o.oldVersion);const s=o.target.result;this.p.N(s,i.transaction,o.oldVersion,this.version).next(()=>{Z("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=n=>this.B(n)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=n=>e(n))}async runTransaction(e,n,r,i){const o=n==="readonly";let s=0;for(;;){++s;try{this.db=await this.O(e);const a=Dy.open(this.db,e,o?"readonly":"readwrite",r),u=i(a).next(l=>(a.g(),l)).catch(l=>(a.abort(l),$.reject(l))).toPromise();return u.catch(()=>{}),await a.m,u}catch(a){const u=a,l=u.name!=="FirebaseError"&&s<3;if(Z("SimpleDb","Transaction failed with error:",u.message,"Retrying:",l),this.close(),!l)return Promise.reject(u)}}}close(){this.db&&this.db.close(),this.db=void 0}}class eee{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return ka(this.k.delete())}}class ih extends J{constructor(e,n){super(z.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(n)),this.name="IndexedDbTransactionError"}}function ra(t){return t.name==="IndexedDbTransactionError"}class tee{constructor(e){this.store=e}put(e,n){let r;return n!==void 0?(Z("SimpleDb","PUT",this.store.name,e,n),r=this.store.put(n,e)):(Z("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),ka(r)}add(e){return Z("SimpleDb","ADD",this.store.name,e,e),ka(this.store.add(e))}get(e){return ka(this.store.get(e)).next(n=>(n===void 0&&(n=null),Z("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return Z("SimpleDb","DELETE",this.store.name,e),ka(this.store.delete(e))}count(){return Z("SimpleDb","COUNT",this.store.name),ka(this.store.count())}W(e,n){const r=this.options(e,n),i=r.index?this.store.index(r.index):this.store;if(typeof i.getAll=="function"){const o=i.getAll(r.range);return new $((s,a)=>{o.onerror=u=>{a(u.target.error)},o.onsuccess=u=>{s(u.target.result)}})}{const o=this.cursor(r),s=[];return this.G(o,(a,u)=>{s.push(u)}).next(()=>s)}}j(e,n){const r=this.store.getAll(e,n===null?void 0:n);return new $((i,o)=>{r.onerror=s=>{o(s.target.error)},r.onsuccess=s=>{i(s.target.result)}})}H(e,n){Z("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,n);r.J=!1;const i=this.cursor(r);return this.G(i,(o,s,a)=>a.delete())}Y(e,n){let r;n?r=e:(r={},n=e);const i=this.cursor(r);return this.G(i,n)}Z(e){const n=this.cursor({});return new $((r,i)=>{n.onerror=o=>{const s=kI(o.target.error);i(s)},n.onsuccess=o=>{const s=o.target.result;s?e(s.primaryKey,s.value).next(a=>{a?s.continue():r()}):r()}})}G(e,n){const r=[];return new $((i,o)=>{e.onerror=s=>{o(s.target.error)},e.onsuccess=s=>{const a=s.target.result;if(!a)return void i();const u=new eee(a),l=n(a.primaryKey,a.value,u);if(l instanceof $){const c=l.catch(d=>(u.done(),$.reject(d)));r.push(c)}u.isDone?i():u.$===null?a.continue():a.continue(u.$)}}).next(()=>$.waitFor(r))}options(e,n){let r;return e!==void 0&&(typeof e=="string"?r=e:n=e),{index:r,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const r=this.store.index(e.index);return e.J?r.openKeyCursor(e.range,n):r.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function ka(t){return new $((e,n)=>{t.onsuccess=r=>{const i=r.target.result;e(i)},t.onerror=r=>{const i=kI(r.target.error);n(i)}})}let jR=!1;function kI(t){const e=Jr.S(yt());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){const r=new J("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return jR||(jR=!0,setTimeout(()=>{throw r},0)),r}}return t}class nee{constructor(e,n){this.asyncQueue=e,this.X=n,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}ee(e){Z("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{Z("IndexBackfiller","Documents written: ".concat(await this.X.te()))}catch(n){ra(n)?Z("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",n):await na(n)}await this.ee(6e4)})}}class ree{constructor(e,n){this.localStore=e,this.persistence=n}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",n=>this.ne(n,e))}ne(e,n){const r=new Set;let i=n,o=!0;return $.doWhile(()=>o===!0&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(s=>{if(s!==null&&!r.has(s))return Z("IndexBackfiller","Processing collection: ".concat(s)),this.re(e,s,i).next(a=>{i-=a,r.add(s)});o=!1})).next(()=>n-i)}re(e,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,n).next(i=>this.localStore.localDocuments.getNextDocuments(e,n,i,r).next(o=>{const s=o.changes;return this.localStore.indexManager.updateIndexEntries(e,s).next(()=>this.ie(i,o)).next(a=>(Z("IndexBackfiller","Updating offset: ".concat(a)),this.localStore.indexManager.updateCollectionGroup(e,n,a))).next(()=>s.size)}))}ie(e,n){let r=e;return n.changes.forEach((i,o)=>{const s=tF(o);CI(s,r)>0&&(r=s)}),new Lr(r.readTime,r.documentKey,Math.max(n.batchId,e.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.se(r),this.oe=r=>n.writeSequenceNumber(r))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}gr._e=-1;function Kf(t){return t==null}function tf(t){return t===0&&1/t==-1/0}function iF(t){return typeof t=="number"&&Number.isInteger(t)&&!tf(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=UR(e)),e=iee(t.get(n),e);return UR(e)}function iee(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function UR(t){return t+""}function Gi(t){const e=t.length;if(we(e>=2),e===2)return we(t.charAt(0)===""&&t.charAt(1)===""),Oe.emptyPath();const n=e-2,r=[];let i="";for(let o=0;o<e;){const s=t.indexOf("",o);switch((s<0||s>n)&&le(),t.charAt(s+1)){case"":const a=t.substring(o,s);let u;i.length===0?u=a:(i+=a,u=i,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:le()}o=s+2}return new Oe(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zR=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t,e){return[t,Xn(e)]}function oF(t,e,n){return[t,Xn(e),n]}const oee={},see=["prefixPath","collectionGroup","readTime","documentId"],aee=["prefixPath","collectionGroup","documentId"],uee=["collectionGroup","readTime","prefixPath","documentId"],lee=["canonicalId","targetId"],cee=["targetId","path"],dee=["path","targetId"],hee=["collectionId","parent"],fee=["indexId","uid"],pee=["uid","sequenceNumber"],mee=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],gee=["indexId","uid","orderedDocumentKey"],vee=["userId","collectionPath","documentId"],yee=["userId","collectionPath","largestBatchId"],wee=["userId","collectionGroup","largestBatchId"],sF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],bee=[...sF,"documentOverlays"],aF=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uF=aF,xee=[...uF,"indexConfiguration","indexState","indexEntries"];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n_ extends rF{constructor(e,n){super(),this.ae=e,this.currentSequenceNumber=n}}function pn(t,e){const n=ae(t);return Jr.M(n.ae,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Vu(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lF(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){this.comparator=e,this.root=n||yn.EMPTY}insert(e,n){return new it(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,yn.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,yn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push("".concat(n,":").concat(r)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qp(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qp(this.root,e,this.comparator,!0)}}class Qp{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class yn{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r!=null?r:yn.RED,this.left=i!=null?i:yn.EMPTY,this.right=o!=null?o:yn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new yn(e!=null?e:this.key,n!=null?n:this.value,r!=null?r:this.color,i!=null?i:this.left,o!=null?o:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return yn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return yn.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,yn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,yn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw le();const e=this.left.check();if(e!==this.right.check())throw le();return e+(this.isRed()?0:1)}}yn.EMPTY=null,yn.RED=!0,yn.BLACK=!1;yn.EMPTY=new class{constructor(){this.size=0}get key(){throw le()}get value(){throw le()}get color(){throw le()}get left(){throw le()}get right(){throw le()}copy(e,n,r,i,o){return this}insert(e,n,r){return new yn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qR(this.data.getIterator())}getIteratorFrom(e){return new qR(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class qR{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Qu(t){return t.hasNext()?t.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e){this.fields=e,e.sort(mt.comparator)}static empty(){return new vr([])}unionWith(e){let n=new Ze(mt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new vr(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return uc(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ee(){return typeof atob<"u"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new cF("Invalid base64 string: "+o):o}}(e);return new Zt(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new Zt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Zt.EMPTY_BYTE_STRING=new Zt("");const Eee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Bs(t){if(we(!!t),typeof t=="string"){let e=0;const n=Eee.exec(t);if(we(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:At(t.seconds),nanos:At(t.nanos)}}function At(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function js(t){return typeof t=="string"?Zt.fromBase64String(t):Zt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function SI(t){const e=t.mapValue.fields.__previous_value__;return Oy(e)?SI(e):e}function nf(t){const e=Bs(t.mapValue.fields.__local_write_time__.timestampValue);return new vt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iee{constructor(e,n,r,i,o,s,a,u,l){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class Us{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Us("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Us&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xs={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lm={nullValue:"NULL_VALUE"};function pu(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Oy(t)?4:dF(t)?9007199254740991:10:le()}function no(t,e){if(t===e)return!0;const n=pu(t);if(n!==pu(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nf(t).isEqual(nf(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Bs(i.timestampValue),a=Bs(o.timestampValue);return s.seconds===a.seconds&&s.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return js(i.bytesValue).isEqual(js(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return At(i.geoPointValue.latitude)===At(o.geoPointValue.latitude)&&At(i.geoPointValue.longitude)===At(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return At(i.integerValue)===At(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=At(i.doubleValue),a=At(o.doubleValue);return s===a?tf(s)===tf(a):isNaN(s)&&isNaN(a)}return!1}(t,e);case 9:return uc(t.arrayValue.values||[],e.arrayValue.values||[],no);case 10:return function(i,o){const s=i.mapValue.fields||{},a=o.mapValue.fields||{};if(WR(s)!==WR(a))return!1;for(const u in s)if(s.hasOwnProperty(u)&&(a[u]===void 0||!no(s[u],a[u])))return!1;return!0}(t,e);default:return le()}}function rf(t,e){return(t.values||[]).find(n=>no(n,e))!==void 0}function zs(t,e){if(t===e)return 0;const n=pu(t),r=pu(e);if(n!==r)return Ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Ae(t.booleanValue,e.booleanValue);case 2:return function(o,s){const a=At(o.integerValue||o.doubleValue),u=At(s.integerValue||s.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return HR(t.timestampValue,e.timestampValue);case 4:return HR(nf(t),nf(e));case 5:return Ae(t.stringValue,e.stringValue);case 6:return function(o,s){const a=js(o),u=js(s);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const a=o.split("/"),u=s.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Ae(a[l],u[l]);if(c!==0)return c}return Ae(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const a=Ae(At(o.latitude),At(s.latitude));return a!==0?a:Ae(At(o.longitude),At(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const a=o.values||[],u=s.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=zs(a[l],u[l]);if(c)return c}return Ae(a.length,u.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===xs.mapValue&&s===xs.mapValue)return 0;if(o===xs.mapValue)return 1;if(s===xs.mapValue)return-1;const a=o.fields||{},u=Object.keys(a),l=s.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let d=0;d<u.length&&d<c.length;++d){const h=Ae(u[d],c[d]);if(h!==0)return h;const f=zs(a[u[d]],l[c[d]]);if(f!==0)return f}return Ae(u.length,c.length)}(t.mapValue,e.mapValue);default:throw le()}}function HR(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Ae(t,e);const n=Bs(t),r=Bs(e),i=Ae(n.seconds,r.seconds);return i!==0?i:Ae(n.nanos,r.nanos)}function lc(t){return r_(t)}function r_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Bs(n);return"time(".concat(r.seconds,",").concat(r.nanos,")")}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return js(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return oe.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return"geo(".concat(n.latitude,",").concat(n.longitude,")")}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=r_(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+="".concat(s,":").concat(r_(n.fields[s]));return i+"}"}(t.mapValue):le()}function mu(t,e){return{referenceValue:"projects/".concat(t.projectId,"/databases/").concat(t.database,"/documents/").concat(e.path.canonicalString())}}function i_(t){return!!t&&"integerValue"in t}function of(t){return!!t&&"arrayValue"in t}function GR(t){return!!t&&"nullValue"in t}function KR(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mm(t){return!!t&&"mapValue"in t}function oh(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Vu(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=oh(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=oh(t.arrayValue.values[n]);return e}return Object.assign({},t)}function dF(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}function Tee(t){return"nullValue"in t?Lm:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?mu(Us.empty(),oe.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:le()}function Cee(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?mu(Us.empty(),oe.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?xs:le()}function YR(t,e){const n=zs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function XR(t,e){const n=zs(t.value,e.value);return n!==0?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _n{constructor(e){this.value=e}static empty(){return new _n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Mm(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=oh(n)}setAll(e){let n=mt.emptyPath(),r={},i=[];e.forEach((s,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}s?r[a.lastSegment()]=oh(s):i.push(a.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());Mm(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return no(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Mm(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Vu(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new _n(oh(this.value))}}function hF(t){const e=[];return Vu(t.fields,(n,r)=>{const i=new mt([n]);if(Mm(r)){const o=hF(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new vr(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,n,r,i,o,s,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=a}static newInvalidDocument(e){return new ut(e,0,be.min(),be.min(),be.min(),_n.empty(),0)}static newFoundDocument(e,n,r,i){return new ut(e,1,n,be.min(),r,i,0)}static newNoDocument(e,n){return new ut(e,2,n,be.min(),be.min(),_n.empty(),0)}static newUnknownDocument(e,n){return new ut(e,3,n,be.min(),be.min(),_n.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(be.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=_n.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=_n.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=be.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ut&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ut(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(e,n){this.position=e,this.inclusive=n}}function QR(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=oe.comparator(oe.fromName(s.referenceValue),n.key):r=zs(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function JR(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!no(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sf{constructor(e,n="asc"){this.field=e,this.dir=n}}function kee(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fF{}class Le extends fF{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new See(e,n,r):n==="array-contains"?new Nee(e,r):n==="in"?new wF(e,r):n==="not-in"?new Pee(e,r):n==="array-contains-any"?new Dee(e,r):new Le(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Aee(e,r):new Ree(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(zs(n,this.value)):n!==null&&pu(this.value)===pu(n)&&this.matchesComparison(zs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return le()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class We extends fF{constructor(e,n){super(),this.filters=e,this.op=n,this.ue=null}static create(e,n){return new We(e,n)}matches(e){return cc(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function cc(t){return t.op==="and"}function o_(t){return t.op==="or"}function AI(t){return pF(t)&&cc(t)}function pF(t){for(const e of t.filters)if(e instanceof We)return!1;return!0}function s_(t){if(t instanceof Le)return t.field.canonicalString()+t.op.toString()+lc(t.value);if(AI(t))return t.filters.map(e=>s_(e)).join(",");{const e=t.filters.map(n=>s_(n)).join(",");return"".concat(t.op,"(").concat(e,")")}}function mF(t,e){return t instanceof Le?function(r,i){return i instanceof Le&&r.op===i.op&&r.field.isEqual(i.field)&&no(r.value,i.value)}(t,e):t instanceof We?function(r,i){return i instanceof We&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,a)=>o&&mF(s,i.filters[a]),!0):!1}(t,e):void le()}function gF(t,e){const n=t.filters.concat(e);return We.create(n,t.op)}function vF(t){return t instanceof Le?function(n){return"".concat(n.field.canonicalString()," ").concat(n.op," ").concat(lc(n.value))}(t):t instanceof We?function(n){return n.op.toString()+" {"+n.getFilters().map(vF).join(" ,")+"}"}(t):"Filter"}class See extends Le{constructor(e,n,r){super(e,n,r),this.key=oe.fromName(r.referenceValue)}matches(e){const n=oe.comparator(e.key,this.key);return this.matchesComparison(n)}}class Aee extends Le{constructor(e,n){super(e,"in",n),this.keys=yF("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ree extends Le{constructor(e,n){super(e,"not-in",n),this.keys=yF("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yF(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>oe.fromName(r.referenceValue))}class Nee extends Le{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return of(n)&&rf(n.arrayValue,this.value)}}class wF extends Le{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&rf(this.value.arrayValue,n)}}class Pee extends Le{constructor(e,n){super(e,"not-in",n)}matches(e){if(rf(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!rf(this.value.arrayValue,n)}}class Dee extends Le{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!of(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>rf(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oee{constructor(e,n=null,r=[],i=[],o=null,s=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=a,this.ce=null}}function a_(t,e=null,n=[],r=[],i=null,o=null,s=null){return new Oee(t,e,n,r,i,o,s)}function gu(t){const e=ae(t);if(e.ce===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>s_(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),Kf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>lc(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>lc(r)).join(",")),e.ce=n}return e.ce}function Yf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!kee(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mF(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!JR(t.startAt,e.startAt)&&JR(t.endAt,e.endAt)}function Hg(t){return oe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function Gg(t,e){return t.filters.filter(n=>n instanceof Le&&n.field.isEqual(e))}function ZR(t,e,n){let r=Lm,i=!0;for(const o of Gg(t,e)){let s=Lm,a=!0;switch(o.op){case"<":case"<=":s=Tee(o.value);break;case"==":case"in":case">=":s=o.value;break;case">":s=o.value,a=!1;break;case"!=":case"not-in":s=Lm}YR({value:r,inclusive:i},{value:s,inclusive:a})<0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];YR({value:r,inclusive:i},{value:s,inclusive:n.inclusive})<0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}function eN(t,e,n){let r=xs,i=!0;for(const o of Gg(t,e)){let s=xs,a=!0;switch(o.op){case">=":case">":s=Cee(o.value),a=!1;break;case"==":case"in":case"<=":s=o.value;break;case"<":s=o.value,a=!1;break;case"!=":case"not-in":s=xs}XR({value:r,inclusive:i},{value:s,inclusive:a})>0&&(r=s,i=a)}if(n!==null){for(let o=0;o<t.orderBy.length;++o)if(t.orderBy[o].field.isEqual(e)){const s=n.position[o];XR({value:r,inclusive:i},{value:s,inclusive:n.inclusive})>0&&(r=s,i=n.inclusive);break}}return{value:r,inclusive:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ho{constructor(e,n=null,r=[],i=[],o=null,s="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=a,this.endAt=u,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function bF(t,e,n,r,i,o,s,a){return new Ho(t,e,n,r,i,o,s,a)}function Uc(t){return new Ho(t)}function tN(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function RI(t){return t.collectionGroup!==null}function Ul(t){const e=ae(t);if(e.le===null){e.le=[];const n=new Set;for(const o of e.explicitOrderBy)e.le.push(o),n.add(o.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let a=new Ze(mt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.le.push(new sf(o,r))}),n.has(mt.keyField().canonicalString())||e.le.push(new sf(mt.keyField(),r))}return e.le}function Qn(t){const e=ae(t);return e.he||(e.he=Lee(e,Ul(t))),e.he}function Lee(t,e){if(t.limitType==="F")return a_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new sf(i.field,o)});const n=t.endAt?new Ws(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ws(t.startAt.position,t.startAt.inclusive):null;return a_(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function u_(t,e){const n=t.filters.concat([e]);return new Ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Kg(t,e,n){return new Ho(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Xf(t,e){return Yf(Qn(t),Qn(e))&&t.limitType===e.limitType}function xF(t){return"".concat(gu(Qn(t)),"|lt:").concat(t.limitType)}function al(t){return"Query(target=".concat(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=", filters: [".concat(n.filters.map(i=>vF(i)).join(", "),"]")),Kf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=", orderBy: [".concat(n.orderBy.map(i=>function(s){return"".concat(s.field.canonicalString()," (").concat(s.dir,")")}(i)).join(", "),"]")),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>lc(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>lc(i)).join(",")),"Target(".concat(r,")")}(Qn(t)),"; limitType=").concat(t.limitType,")")}function Qf(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):oe.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Ul(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,a,u){const l=QR(s,a,u);return s.inclusive?l<=0:l<0}(r.startAt,Ul(r),i)||r.endAt&&!function(s,a,u){const l=QR(s,a,u);return s.inclusive?l>=0:l>0}(r.endAt,Ul(r),i))}(t,e)}function _F(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EF(t){return(e,n)=>{let r=!1;for(const i of Ul(t)){const o=Mee(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function Mee(t,e,n){const r=t.field.isKeyField()?oe.comparator(e.key,n.key):function(o,s,a){const u=s.data.field(o),l=a.data.field(o);return u!==null&&l!==null?zs(u,l):le()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return le()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ia{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Vu(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return lF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vee=new it(oe.comparator);function yr(){return Vee}const IF=new it(oe.comparator);function Fd(...t){let e=IF;for(const n of t)e=e.insert(n.key,n);return e}function TF(t){let e=IF;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Ki(){return sh()}function CF(){return sh()}function sh(){return new ia(t=>t.toString(),(t,e)=>t.isEqual(e))}const Fee=new it(oe.comparator),$ee=new Ze(oe.comparator);function Re(...t){let e=$ee;for(const n of t)e=e.add(n);return e}const Bee=new Ze(Ae);function NI(){return Bee}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kF(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:tf(e)?"-0":e}}function SF(t){return{integerValue:""+t}}function AF(t,e){return iF(e)?SF(e):kF(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ly{constructor(){this._=void 0}}function jee(t,e,n){return t instanceof dc?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Oy(o)&&(o=SI(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof vu?NF(t,e):t instanceof yu?PF(t,e):function(i,o){const s=RF(i,o),a=nN(s)+nN(i.Ie);return i_(s)&&i_(i.Ie)?SF(a):kF(i.serializer,a)}(t,e)}function Uee(t,e,n){return t instanceof vu?NF(t,e):t instanceof yu?PF(t,e):n}function RF(t,e){return t instanceof hc?function(r){return i_(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class dc extends Ly{}class vu extends Ly{constructor(e){super(),this.elements=e}}function NF(t,e){const n=DF(e);for(const r of t.elements)n.some(i=>no(i,r))||n.push(r);return{arrayValue:{values:n}}}class yu extends Ly{constructor(e){super(),this.elements=e}}function PF(t,e){let n=DF(e);for(const r of t.elements)n=n.filter(i=>!no(i,r));return{arrayValue:{values:n}}}class hc extends Ly{constructor(e,n){super(),this.serializer=e,this.Ie=n}}function nN(t){return At(t.integerValue||t.doubleValue)}function DF(t){return of(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.field=e,this.transform=n}}function zee(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof vu&&i instanceof vu||r instanceof yu&&i instanceof yu?uc(r.elements,i.elements,no):r instanceof hc&&i instanceof hc?no(r.Ie,i.Ie):r instanceof dc&&i instanceof dc}(t.transform,e.transform)}class Wee{constructor(e,n){this.version=e,this.transformResults=n}}class gt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new gt}static exists(e){return new gt(void 0,e)}static updateTime(e){return new gt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vm(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class My{}function OF(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Wc(t.key,gt.none()):new zc(t.key,t.data,gt.none());{const n=t.data,r=_n.empty();let i=new Ze(mt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new Go(t.key,r,new vr(i.toArray()),gt.none())}}function qee(t,e,n){t instanceof zc?function(i,o,s){const a=i.value.clone(),u=iN(i.fieldTransforms,o,s.transformResults);a.setAll(u),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):t instanceof Go?function(i,o,s){if(!Vm(i.precondition,o))return void o.convertToUnknownDocument(s.version);const a=iN(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(LF(i)),u.setAll(a),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function ah(t,e,n,r){return t instanceof zc?function(o,s,a,u){if(!Vm(o.precondition,s))return a;const l=o.value.clone(),c=oN(o.fieldTransforms,u,s);return l.setAll(c),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null}(t,e,n,r):t instanceof Go?function(o,s,a,u){if(!Vm(o.precondition,s))return a;const l=oN(o.fieldTransforms,u,s),c=s.data;return c.setAll(LF(o)),c.setAll(l),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),a===null?null:a.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,a){return Vm(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):a}(t,e,n)}function Hee(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=RF(r.transform,i||null);o!=null&&(n===null&&(n=_n.empty()),n.set(r.field,o))}return n||null}function rN(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&uc(r,i,(o,s)=>zee(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class zc extends My{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Go extends My{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function LF(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function iN(t,e,n){const r=new Map;we(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Uee(s,a,n[i]))}return r}function oN(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,jee(o,s,e))}return r}class Wc extends My{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class PI extends My{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&qee(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=ah(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=ah(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=CF();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let a=this.applyToLocalView(s,o.mutatedFields);a=n.has(i.key)?null:a;const u=OF(s,a);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(be.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Re())}isEqual(e){return this.batchId===e.batchId&&uc(this.mutations,e.mutations,(n,r)=>rN(n,r))&&uc(this.baseMutations,e.baseMutations,(n,r)=>rN(n,r))}}class OI{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){we(e.mutations.length===r.length);let i=function(){return Fee}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new OI(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gee{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jt,Fe;function MF(t){switch(t){default:return le();case z.CANCELLED:case z.UNKNOWN:case z.DEADLINE_EXCEEDED:case z.RESOURCE_EXHAUSTED:case z.INTERNAL:case z.UNAVAILABLE:case z.UNAUTHENTICATED:return!1;case z.INVALID_ARGUMENT:case z.NOT_FOUND:case z.ALREADY_EXISTS:case z.PERMISSION_DENIED:case z.FAILED_PRECONDITION:case z.ABORTED:case z.OUT_OF_RANGE:case z.UNIMPLEMENTED:case z.DATA_LOSS:return!0}}function VF(t){if(t===void 0)return $t("GRPC error has no .code"),z.UNKNOWN;switch(t){case jt.OK:return z.OK;case jt.CANCELLED:return z.CANCELLED;case jt.UNKNOWN:return z.UNKNOWN;case jt.DEADLINE_EXCEEDED:return z.DEADLINE_EXCEEDED;case jt.RESOURCE_EXHAUSTED:return z.RESOURCE_EXHAUSTED;case jt.INTERNAL:return z.INTERNAL;case jt.UNAVAILABLE:return z.UNAVAILABLE;case jt.UNAUTHENTICATED:return z.UNAUTHENTICATED;case jt.INVALID_ARGUMENT:return z.INVALID_ARGUMENT;case jt.NOT_FOUND:return z.NOT_FOUND;case jt.ALREADY_EXISTS:return z.ALREADY_EXISTS;case jt.PERMISSION_DENIED:return z.PERMISSION_DENIED;case jt.FAILED_PRECONDITION:return z.FAILED_PRECONDITION;case jt.ABORTED:return z.ABORTED;case jt.OUT_OF_RANGE:return z.OUT_OF_RANGE;case jt.UNIMPLEMENTED:return z.UNIMPLEMENTED;case jt.DATA_LOSS:return z.DATA_LOSS;default:return le()}}(Fe=jt||(jt={}))[Fe.OK=0]="OK",Fe[Fe.CANCELLED=1]="CANCELLED",Fe[Fe.UNKNOWN=2]="UNKNOWN",Fe[Fe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Fe[Fe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Fe[Fe.NOT_FOUND=5]="NOT_FOUND",Fe[Fe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Fe[Fe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Fe[Fe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Fe[Fe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Fe[Fe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Fe[Fe.ABORTED=10]="ABORTED",Fe[Fe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Fe[Fe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Fe[Fe.INTERNAL=13]="INTERNAL",Fe[Fe.UNAVAILABLE=14]="UNAVAILABLE",Fe[Fe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kee=new jl([4294967295,4294967295],0);function sN(t){const e=FF().encode(t),n=new UZ;return n.update(e),new Uint8Array(n.digest())}function aN(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new jl([n,r],0),new jl([i,o],0)]}class MI{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $d("Invalid padding: ".concat(n));if(r<0)throw new $d("Invalid hash count: ".concat(r));if(e.length>0&&this.hashCount===0)throw new $d("Invalid hash count: ".concat(r));if(e.length===0&&n!==0)throw new $d("Invalid padding when bitmap length is 0: ".concat(n));this.Te=8*e.length-n,this.Ee=jl.fromNumber(this.Te)}de(e,n,r){let i=e.add(n.multiply(jl.fromNumber(r)));return i.compare(Kee)===1&&(i=new jl([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const n=sN(e),[r,i]=aN(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);if(!this.Ae(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new MI(o,i,n);return r.forEach(a=>s.insert(a)),s}insert(e){if(this.Te===0)return;const n=sN(e),[r,i]=aN(n);for(let o=0;o<this.hashCount;o++){const s=this.de(r,i,o);this.Re(s)}}Re(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class $d extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zf{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,ep.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Zf(be.min(),i,new it(Ae),yr(),Re())}}class ep{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new ep(r,n,Re(),Re(),Re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n,r,i){this.Ve=e,this.removedTargetIds=n,this.key=r,this.me=i}}class $F{constructor(e,n){this.targetId=e,this.fe=n}}class BF{constructor(e,n,r=Zt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class uN{constructor(){this.ge=0,this.pe=cN(),this.ye=Zt.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=Re(),n=Re(),r=Re();return this.pe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:le()}}),new ep(this.ye,this.we,e,n,r)}Fe(){this.Se=!1,this.pe=cN()}Me(e,n){this.Se=!0,this.pe=this.pe.insert(e,n)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,we(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Yee{constructor(e){this.Le=e,this.ke=new Map,this.qe=yr(),this.Qe=lN(),this.Ke=new it(Ae)}$e(e){for(const n of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(n,e.me):this.We(n,e.key,e.me);for(const n of e.removedTargetIds)this.We(n,e.key,e.me)}Ge(e){this.forEachTarget(e,n=>{const r=this.ze(n);switch(e.state){case 0:this.je(n)&&r.Ce(e.resumeToken);break;case 1:r.Ne(),r.be||r.Fe(),r.Ce(e.resumeToken);break;case 2:r.Ne(),r.be||this.removeTarget(n);break;case 3:this.je(n)&&(r.Be(),r.Ce(e.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.Ce(e.resumeToken));break;default:le()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ke.forEach((r,i)=>{this.je(i)&&n(i)})}Je(e){const n=e.targetId,r=e.fe.count,i=this.Ye(n);if(i){const o=i.target;if(Hg(o))if(r===0){const s=new oe(o.path);this.We(n,s,ut.newNoDocument(s,be.min()))}else we(r===1);else{const s=this.Ze(n);if(s!==r){const a=this.Xe(e),u=a?this.et(a,e,s):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(e){const n=e.fe.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,a;try{s=js(r).toUint8Array()}catch(u){if(u instanceof cF)return Ii("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new MI(s,i,o)}catch(u){return Ii(u instanceof $d?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(e,n,r){return n.fe.count===r-this.rt(e,n.targetId)?0:2}rt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Le.nt(),a="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(o.path.canonicalString());e.mightContain(a)||(this.We(n,o,null),i++)}),i}it(e){const n=new Map;this.ke.forEach((o,s)=>{const a=this.Ye(s);if(a){if(o.current&&Hg(a.target)){const u=new oe(a.target.path);this.qe.get(u)!==null||this.st(s,u)||this.We(s,u,ut.newNoDocument(u,e))}o.De&&(n.set(s,o.ve()),o.Fe())}});let r=Re();this.Qe.forEach((o,s)=>{let a=!0;s.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(o))}),this.qe.forEach((o,s)=>s.setReadTime(e));const i=new Zf(e,n,this.Ke,this.qe,r);return this.qe=yr(),this.Qe=lN(),this.Ke=new it(Ae),i}Ue(e,n){if(!this.je(e))return;const r=this.st(e,n.key)?2:0;this.ze(e).Me(n.key,r),this.qe=this.qe.insert(n.key,n),this.Qe=this.Qe.insert(n.key,this.ot(n.key).add(e))}We(e,n,r){if(!this.je(e))return;const i=this.ze(e);this.st(e,n)?i.Me(n,1):i.xe(n),this.Qe=this.Qe.insert(n,this.ot(n).delete(e)),r&&(this.qe=this.qe.insert(n,r))}removeTarget(e){this.ke.delete(e)}Ze(e){const n=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let n=this.ke.get(e);return n||(n=new uN,this.ke.set(e,n)),n}ot(e){let n=this.Qe.get(e);return n||(n=new Ze(Ae),this.Qe=this.Qe.insert(e,n)),n}je(e){const n=this.Ye(e)!==null;return n||Z("WatchChangeAggregator","Detected inactive target",e),n}Ye(e){const n=this.ke.get(e);return n&&n.be?null:this.Le._t(e)}He(e){this.ke.set(e,new uN),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.We(e,n,null)})}st(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function lN(){return new it(oe.comparator)}function cN(){return new it(oe.comparator)}const Xee={asc:"ASCENDING",desc:"DESCENDING"},Qee={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Jee={and:"AND",or:"OR"};class Zee{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function l_(t,e){return t.useProto3Json||Kf(e)?e:{value:e}}function fc(t,e){return t.useProto3Json?"".concat(new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+e.nanoseconds).slice(-9),"Z"):{seconds:""+e.seconds,nanos:e.nanoseconds}}function jF(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function ete(t,e){return fc(t,e.toTimestamp())}function Bt(t){return we(!!t),be.fromTimestamp(function(n){const r=Bs(n);return new vt(r.seconds,r.nanos)}(t))}function VI(t,e){return c_(t,e).canonicalString()}function c_(t,e){const n=function(i){return new Oe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function UF(t){const e=Oe.fromString(t);return we(JF(e)),e}function af(t,e){return VI(t.databaseId,e.path)}function Qi(t,e){const n=UF(e);if(n.get(1)!==t.databaseId.projectId)throw new J(z.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new J(z.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new oe(qF(n))}function zF(t,e){return VI(t.databaseId,e)}function WF(t){const e=UF(t);return e.length===4?Oe.emptyPath():qF(e)}function d_(t){return new Oe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function qF(t){return we(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function dN(t,e,n){return{name:af(t,e),fields:n.value.mapValue.fields}}function HF(t,e,n){const r=Qi(t,e.name),i=Bt(e.updateTime),o=e.createTime?Bt(e.createTime):be.min(),s=new _n({mapValue:{fields:e.fields}}),a=ut.newFoundDocument(r,i,o,s);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function tte(t,e){return"found"in e?function(r,i){we(!!i.found),i.found.name,i.found.updateTime;const o=Qi(r,i.found.name),s=Bt(i.found.updateTime),a=i.found.createTime?Bt(i.found.createTime):be.min(),u=new _n({mapValue:{fields:i.found.fields}});return ut.newFoundDocument(o,s,a,u)}(t,e):"missing"in e?function(r,i){we(!!i.missing),we(!!i.readTime);const o=Qi(r,i.missing),s=Bt(i.readTime);return ut.newNoDocument(o,s)}(t,e):le()}function nte(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:le()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(l,c){return l.useProto3Json?(we(c===void 0||typeof c=="string"),Zt.fromBase64String(c||"")):(we(c===void 0||c instanceof Uint8Array),Zt.fromUint8Array(c||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,a=s&&function(l){const c=l.code===void 0?z.UNKNOWN:VF(l.code);return new J(c,l.message||"")}(s);n=new BF(r,i,o,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Qi(t,r.document.name),o=Bt(r.document.updateTime),s=r.document.createTime?Bt(r.document.createTime):be.min(),a=new _n({mapValue:{fields:r.document.fields}}),u=ut.newFoundDocument(i,o,s,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new Fm(l,c,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Qi(t,r.document),o=r.readTime?Bt(r.readTime):be.min(),s=ut.newNoDocument(i,o),a=r.removedTargetIds||[];n=new Fm([],a,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Qi(t,r.document),o=r.removedTargetIds||[];n=new Fm([],o,i,null)}else{if(!("filter"in e))return le();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new Gee(i,o),a=r.targetId;n=new $F(a,s)}}return n}function uf(t,e){let n;if(e instanceof zc)n={update:dN(t,e.key,e.value)};else if(e instanceof Wc)n={delete:af(t,e.key)};else if(e instanceof Go)n={update:dN(t,e.key,e.data),updateMask:ute(e.fieldMask)};else{if(!(e instanceof PI))return le();n={verify:af(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const a=s.transform;if(a instanceof dc)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vu)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof yu)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof hc)return{fieldPath:s.field.canonicalString(),increment:a.Ie};throw le()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:ete(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:le()}(t,e.precondition)),n}function h_(t,e){const n=e.currentDocument?function(o){return o.updateTime!==void 0?gt.updateTime(Bt(o.updateTime)):o.exists!==void 0?gt.exists(o.exists):gt.none()}(e.currentDocument):gt.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,a){let u=null;if("setToServerValue"in a)we(a.setToServerValue==="REQUEST_TIME"),u=new dc;else if("appendMissingElements"in a){const c=a.appendMissingElements.values||[];u=new vu(c)}else if("removeAllFromArray"in a){const c=a.removeAllFromArray.values||[];u=new yu(c)}else"increment"in a?u=new hc(s,a.increment):le();const l=mt.fromServerFormat(a.fieldPath);return new Jf(l,u)}(t,i)):[];if(e.update){e.update.name;const i=Qi(t,e.update.name),o=new _n({mapValue:{fields:e.update.fields}});if(e.updateMask){const s=function(u){const l=u.fieldPaths||[];return new vr(l.map(c=>mt.fromServerFormat(c)))}(e.updateMask);return new Go(i,o,s,n,r)}return new zc(i,o,n,r)}if(e.delete){const i=Qi(t,e.delete);return new Wc(i,n)}if(e.verify){const i=Qi(t,e.verify);return new PI(i,n)}return le()}function rte(t,e){return t&&t.length>0?(we(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?Bt(i.updateTime):Bt(o);return s.isEqual(be.min())&&(s=Bt(o)),new Wee(s,i.transformResults||[])}(n,e))):[]}function GF(t,e){return{documents:[zF(t,e.path)]}}function KF(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zF(t,i);const o=function(l){if(l.length!==0)return QF(We.create(l,"and"))}(e.filters);o&&(n.structuredQuery.where=o);const s=function(l){if(l.length!==0)return l.map(c=>function(h){return{field:ul(h.field),direction:ote(h.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const a=l_(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{ut:n,parent:i}}function YF(t){let e=WF(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){we(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:e=e.child(c.collectionId)}let o=[];n.where&&(o=function(d){const h=XF(d);return h instanceof We&&AI(h)?h.getFilters():[h]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(h=>function(m){return new sf(ll(m.field),function(y){switch(y){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(m.direction))}(h))}(n.orderBy));let a=null;n.limit&&(a=function(d){let h;return h=typeof d=="object"?d.value:d,Kf(h)?null:h}(n.limit));let u=null;n.startAt&&(u=function(d){const h=!!d.before,f=d.values||[];return new Ws(f,h)}(n.startAt));let l=null;return n.endAt&&(l=function(d){const h=!d.before,f=d.values||[];return new Ws(f,h)}(n.endAt)),bF(e,i,s,o,a,"F",u,l)}function ite(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return le()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function XF(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ll(n.unaryFilter.field);return Le.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ll(n.unaryFilter.field);return Le.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=ll(n.unaryFilter.field);return Le.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=ll(n.unaryFilter.field);return Le.create(s,"!=",{nullValue:"NULL_VALUE"});default:return le()}}(t):t.fieldFilter!==void 0?function(n){return Le.create(ll(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return le()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return We.create(n.compositeFilter.filters.map(r=>XF(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return le()}}(n.compositeFilter.op))}(t):le()}function ote(t){return Xee[t]}function ste(t){return Qee[t]}function ate(t){return Jee[t]}function ul(t){return{fieldPath:t.canonicalString()}}function ll(t){return mt.fromServerFormat(t.fieldPath)}function QF(t){return t instanceof Le?function(n){if(n.op==="=="){if(KR(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NAN"}};if(GR(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(KR(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NAN"}};if(GR(n.value))return{unaryFilter:{field:ul(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ul(n.field),op:ste(n.op),value:n.value}}}(t):t instanceof We?function(n){const r=n.getFilters().map(i=>QF(i));return r.length===1?r[0]:{compositeFilter:{op:ate(n.op),filters:r}}}(t):le()}function ute(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function JF(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,r,i,o=be.min(),s=be.min(),a=Zt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new _o(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _o(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZF{constructor(e){this.ct=e}}function lte(t,e){let n;if(e.document)n=HF(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=oe.fromSegments(e.noDocument.path),i=bu(e.noDocument.readTime);n=ut.newNoDocument(r,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return le();{const r=oe.fromSegments(e.unknownDocument.path),i=bu(e.unknownDocument.version);n=ut.newUnknownDocument(r,i)}}return e.readTime&&n.setReadTime(function(i){const o=new vt(i[0],i[1]);return be.fromTimestamp(o)}(e.readTime)),n}function hN(t,e){const n=e.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Yg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document=function(o,s){return{name:af(o,s.key),fields:s.data.value.mapValue.fields,updateTime:fc(o,s.version.toTimestamp()),createTime:fc(o,s.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:wu(e.version)};else{if(!e.isUnknownDocument())return le();r.unknownDocument={path:n.path.toArray(),version:wu(e.version)}}return r}function Yg(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function wu(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function bu(t){const e=new vt(t.seconds,t.nanoseconds);return be.fromTimestamp(e)}function Sa(t,e){const n=(e.baseMutations||[]).map(o=>h_(t.ct,o));for(let o=0;o<e.mutations.length-1;++o){const s=e.mutations[o];if(o+1<e.mutations.length&&e.mutations[o+1].transform!==void 0){const a=e.mutations[o+1];s.updateTransforms=a.transform.fieldTransforms,e.mutations.splice(o+1,1),++o}}const r=e.mutations.map(o=>h_(t.ct,o)),i=vt.fromMillis(e.localWriteTimeMs);return new DI(e.batchId,i,n,r)}function Bd(t){const e=bu(t.readTime),n=t.lastLimboFreeSnapshotVersion!==void 0?bu(t.lastLimboFreeSnapshotVersion):be.min();let r;return r=function(o){return o.documents!==void 0}(t.query)?function(o){return we(o.documents.length===1),Qn(Uc(WF(o.documents[0])))}(t.query):function(o){return Qn(YF(o))}(t.query),new _o(r,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,Zt.fromBase64String(t.resumeToken))}function e4(t,e){const n=wu(e.snapshotVersion),r=wu(e.lastLimboFreeSnapshotVersion);let i;i=Hg(e.target)?GF(t.ct,e.target):KF(t.ct,e.target).ut;const o=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:gu(e.target),readTime:n,resumeToken:o,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function FI(t){const e=YF({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Kg(e,e.limit,"L"):e}function Hw(t,e){return new LI(e.largestBatchId,h_(t.ct,e.overlayMutation))}function fN(t,e){const n=e.path.lastSegment();return[t,Xn(e.path.popLast()),n]}function pN(t,e,n,r){return{indexId:t,uid:e,sequenceNumber:n,readTime:wu(r.readTime),documentKey:Xn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cte{getBundleMetadata(e,n){return mN(e).get(n).next(r=>{if(r)return function(o){return{id:o.bundleId,createTime:bu(o.createTime),version:o.version}}(r)})}saveBundleMetadata(e,n){return mN(e).put(function(i){return{bundleId:i.id,createTime:wu(Bt(i.createTime)),version:i.version}}(n))}getNamedQuery(e,n){return gN(e).get(n).next(r=>{if(r)return function(o){return{name:o.name,query:FI(o.bundledQuery),readTime:bu(o.readTime)}}(r)})}saveNamedQuery(e,n){return gN(e).put(function(i){return{name:i.name,readTime:wu(Bt(i.readTime)),bundledQuery:i.bundledQuery}}(n))}}function mN(t){return pn(t,"bundles")}function gN(t){return pn(t,"namedQueries")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vy{constructor(e,n){this.serializer=e,this.userId=n}static lt(e,n){const r=n.uid||"";return new Vy(e,r)}getOverlay(e,n){return wd(e).get(fN(this.userId,n)).next(r=>r?Hw(this.serializer,r):null)}getOverlays(e,n){const r=Ki();return $.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){const i=[];return r.forEach((o,s)=>{const a=new LI(n,s);i.push(this.ht(e,a))}),$.waitFor(i)}removeOverlaysForBatchId(e,n,r){const i=new Set;n.forEach(s=>i.add(Xn(s.getCollectionPath())));const o=[];return i.forEach(s=>{const a=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,r+1],!1,!0);o.push(wd(e).H("collectionPathOverlayIndex",a))}),$.waitFor(o)}getOverlaysForCollection(e,n,r){const i=Ki(),o=Xn(n),s=IDBKeyRange.bound([this.userId,o,r],[this.userId,o,Number.POSITIVE_INFINITY],!0);return wd(e).W("collectionPathOverlayIndex",s).next(a=>{for(const u of a){const l=Hw(this.serializer,u);i.set(l.getKey(),l)}return i})}getOverlaysForCollectionGroup(e,n,r,i){const o=Ki();let s;const a=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return wd(e).Y({index:"collectionGroupOverlayIndex",range:a},(u,l,c)=>{const d=Hw(this.serializer,l);o.size()<i||d.largestBatchId===s?(o.set(d.getKey(),d),s=d.largestBatchId):c.done()}).next(()=>o)}ht(e,n){return wd(e).put(function(i,o,s){const[a,u,l]=fN(o,s.mutation.key);return{userId:o,collectionPath:u,documentId:l,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:uf(i.ct,s.mutation)}}(this.serializer,this.userId,n))}}function wd(t){return pn(t,"documentOverlays")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aa{constructor(){}Pt(e,n){this.It(e,n),n.Tt()}It(e,n){if("nullValue"in e)this.Et(n,5);else if("booleanValue"in e)this.Et(n,10),n.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(n,15),n.dt(At(e.integerValue));else if("doubleValue"in e){const r=At(e.doubleValue);isNaN(r)?this.Et(n,13):(this.Et(n,15),tf(r)?n.dt(0):n.dt(r))}else if("timestampValue"in e){const r=e.timestampValue;this.Et(n,20),typeof r=="string"?n.At(r):(n.At("".concat(r.seconds||"")),n.dt(r.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,n),this.Vt(n);else if("bytesValue"in e)this.Et(n,30),n.ft(js(e.bytesValue)),this.Vt(n);else if("referenceValue"in e)this.gt(e.referenceValue,n);else if("geoPointValue"in e){const r=e.geoPointValue;this.Et(n,45),n.dt(r.latitude||0),n.dt(r.longitude||0)}else"mapValue"in e?dF(e)?this.Et(n,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,n),this.Vt(n)):"arrayValue"in e?(this.wt(e.arrayValue,n),this.Vt(n)):le()}Rt(e,n){this.Et(n,25),this.St(e,n)}St(e,n){n.At(e)}yt(e,n){const r=e.fields||{};this.Et(n,55);for(const i of Object.keys(r))this.Rt(i,n),this.It(r[i],n)}wt(e,n){const r=e.values||[];this.Et(n,50);for(const i of r)this.It(i,n)}gt(e,n){this.Et(n,37),oe.fromName(e).path.forEach(r=>{this.Et(n,60),this.St(r,n)})}Et(e,n){e.dt(n)}Vt(e){e.dt(2)}}Aa.bt=new Aa;function dte(t){if(t===0)return 8;let e=0;return!(t>>4)&&(e+=4,t<<=4),!(t>>6)&&(e+=2,t<<=2),!(t>>7)&&(e+=1),e}function vN(t){const e=64-function(r){let i=0;for(let o=0;o<8;++o){const s=dte(255&r[o]);if(i+=s,s!==8)break}return i}(t);return Math.ceil(e/8)}class hte{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Ct(r.value),r=n.next();this.vt()}Ft(e){const n=e[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Mt(r.value),r=n.next();this.xt()}Ot(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Ct(r);else if(r<2048)this.Ct(960|r>>>6),this.Ct(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Ct(480|r>>>12),this.Ct(128|63&r>>>6),this.Ct(128|63&r);else{const i=n.codePointAt(0);this.Ct(240|i>>>18),this.Ct(128|63&i>>>12),this.Ct(128|63&i>>>6),this.Ct(128|63&i)}}this.vt()}Nt(e){for(const n of e){const r=n.charCodeAt(0);if(r<128)this.Mt(r);else if(r<2048)this.Mt(960|r>>>6),this.Mt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Mt(480|r>>>12),this.Mt(128|63&r>>>6),this.Mt(128|63&r);else{const i=n.codePointAt(0);this.Mt(240|i>>>18),this.Mt(128|63&i>>>12),this.Mt(128|63&i>>>6),this.Mt(128|63&i)}}this.xt()}Bt(e){const n=this.Lt(e),r=vN(n);this.kt(1+r),this.buffer[this.position++]=255&r;for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=255&n[i]}qt(e){const n=this.Lt(e),r=vN(n);this.kt(1+r),this.buffer[this.position++]=~(255&r);for(let i=n.length-r;i<n.length;++i)this.buffer[this.position++]=~(255&n[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const n=function(o){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,o,!1),new Uint8Array(s.buffer)}(e),r=(128&n[0])!=0;n[0]^=r?255:128;for(let i=1;i<n.length;++i)n[i]^=r?255:0;return n}Ct(e){const n=255&e;n===0?(this.Kt(0),this.Kt(255)):n===255?(this.Kt(255),this.Kt(0)):this.Kt(n)}Mt(e){const n=255&e;n===0?(this.Ut(0),this.Ut(255)):n===255?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const n=e+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class fte{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class pte{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class bd{constructor(){this.Gt=new hte,this.zt=new fte(this.Gt),this.jt=new pte(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return e===0?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ra{constructor(e,n,r,i){this.indexId=e,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}Jt(){const e=this.directionalValue.length,n=e===0||this.directionalValue[e-1]===255?e+1:e,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new Ra(this.indexId,this.documentKey,this.arrayValue,r)}}function rs(t,e){let n=t.indexId-e.indexId;return n!==0?n:(n=yN(t.arrayValue,e.arrayValue),n!==0?n:(n=yN(t.directionalValue,e.directionalValue),n!==0?n:oe.comparator(t.documentKey,e.documentKey)))}function yN(t,e){for(let n=0;n<t.length&&n<e.length;++n){const r=t[n]-e[n];if(r!==0)return r}return t.length-e.length}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wN{constructor(e){this.Yt=new Ze((n,r)=>mt.comparator(n.field,r.field)),this.collectionId=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const n of e.filters){const r=n;r.isInequality()?this.Yt=this.Yt.add(r):this.Xt.push(r)}}get en(){return this.Yt.size>1}tn(e){if(we(e.collectionGroup===this.collectionId),this.en)return!1;const n=t_(e);if(n!==void 0&&!this.nn(n))return!1;const r=Ia(e);let i=new Set,o=0,s=0;for(;o<r.length&&this.nn(r[o]);++o)i=i.add(r[o].fieldPath.canonicalString());if(o===r.length)return!0;if(this.Yt.size>0){const a=this.Yt.getIterator().getNext();if(!i.has(a.field.canonicalString())){const u=r[o];if(!this.rn(a,u)||!this.sn(this.Zt[s++],u))return!1}++o}for(;o<r.length;++o){const a=r[o];if(s>=this.Zt.length||!this.sn(this.Zt[s++],a))return!1}return!0}on(){if(this.en)return null;let e=new Ze(mt.comparator);const n=[];for(const r of this.Xt)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Dm(r.field,2));else{if(e.has(r.field))continue;e=e.add(r.field),n.push(new Dm(r.field,0))}for(const r of this.Zt)r.field.isKeyField()||e.has(r.field)||(e=e.add(r.field),n.push(new Dm(r.field,r.dir==="asc"?0:1)));return new qg(qg.UNKNOWN_ID,this.collectionId,n,ef.empty())}nn(e){for(const n of this.Xt)if(this.rn(n,e))return!0;return!1}rn(e,n){if(e===void 0||!e.field.isEqual(n.fieldPath))return!1;const r=e.op==="array-contains"||e.op==="array-contains-any";return n.kind===2===r}sn(e,n){return!!e.field.isEqual(n.fieldPath)&&(n.kind===0&&e.dir==="asc"||n.kind===1&&e.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t4(t){var e,n;if(we(t instanceof Le||t instanceof We),t instanceof Le){if(t instanceof wF){const i=((n=(e=t.value.arrayValue)===null||e===void 0?void 0:e.values)===null||n===void 0?void 0:n.map(o=>Le.create(t.field,"==",o)))||[];return We.create(i,"or")}return t}const r=t.filters.map(i=>t4(i));return We.create(r,t.op)}function mte(t){if(t.getFilters().length===0)return[];const e=m_(t4(t));return we(n4(e)),f_(e)||p_(e)?[e]:e.getFilters()}function f_(t){return t instanceof Le}function p_(t){return t instanceof We&&AI(t)}function n4(t){return f_(t)||p_(t)||function(n){if(n instanceof We&&o_(n)){for(const r of n.getFilters())if(!f_(r)&&!p_(r))return!1;return!0}return!1}(t)}function m_(t){if(we(t instanceof Le||t instanceof We),t instanceof Le)return t;if(t.filters.length===1)return m_(t.filters[0]);const e=t.filters.map(r=>m_(r));let n=We.create(e,t.op);return n=Xg(n),n4(n)?n:(we(n instanceof We),we(cc(n)),we(n.filters.length>1),n.filters.reduce((r,i)=>$I(r,i)))}function $I(t,e){let n;return we(t instanceof Le||t instanceof We),we(e instanceof Le||e instanceof We),n=t instanceof Le?e instanceof Le?function(i,o){return We.create([i,o],"and")}(t,e):bN(t,e):e instanceof Le?bN(e,t):function(i,o){if(we(i.filters.length>0&&o.filters.length>0),cc(i)&&cc(o))return gF(i,o.getFilters());const s=o_(i)?i:o,a=o_(i)?o:i,u=s.filters.map(l=>$I(l,a));return We.create(u,"or")}(t,e),Xg(n)}function bN(t,e){if(cc(e))return gF(e,t.getFilters());{const n=e.filters.map(r=>$I(t,r));return We.create(n,"or")}}function Xg(t){if(we(t instanceof Le||t instanceof We),t instanceof Le)return t;const e=t.getFilters();if(e.length===1)return Xg(e[0]);if(pF(t))return t;const n=e.map(i=>Xg(i)),r=[];return n.forEach(i=>{i instanceof Le?r.push(i):i instanceof We&&(i.op===t.op?r.push(...i.filters):r.push(i))}),r.length===1?r[0]:We.create(r,t.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gte{constructor(){this._n=new BI}addToCollectionParentIndex(e,n){return this._n.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this._n.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Lr.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Lr.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class BI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Ze(Oe.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Ze(Oe.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jp=new Uint8Array(0);class vte{constructor(e,n){this.databaseId=n,this.an=new BI,this.un=new ia(r=>gu(r),(r,i)=>Yf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.an.has(n)){const r=n.lastSegment(),i=n.popLast();e.addOnCommittedListener(()=>{this.an.add(n)});const o={collectionId:r,parent:Xn(i)};return xN(e).put(o)}return $.resolve()}getCollectionParents(e,n){const r=[],i=IDBKeyRange.bound([n,""],[ZV(n),""],!1,!0);return xN(e).W(i).next(o=>{for(const s of o){if(s.collectionId!==n)break;r.push(Gi(s.parent))}return r})}addFieldIndex(e,n){const r=xd(e),i=function(a){return{indexId:a.indexId,collectionGroup:a.collectionGroup,fields:a.fields.map(u=>[u.fieldPath.canonicalString(),u.kind])}}(n);delete i.indexId;const o=r.add(i);if(n.indexState){const s=Zu(e);return o.next(a=>{s.put(pN(a,this.uid,n.indexState.sequenceNumber,n.indexState.offset))})}return o.next()}deleteFieldIndex(e,n){const r=xd(e),i=Zu(e),o=Ju(e);return r.delete(n.indexId).next(()=>i.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const n=xd(e),r=Ju(e),i=Zu(e);return n.H().next(()=>r.H()).next(()=>i.H())}createTargetIndexes(e,n){return $.forEach(this.cn(n),r=>this.getIndexType(e,r).next(i=>{if(i===0||i===1){const o=new wN(r).on();if(o!=null)return this.addFieldIndex(e,o)}}))}getDocumentsMatchingTarget(e,n){const r=Ju(e);let i=!0;const o=new Map;return $.forEach(this.cn(n),s=>this.ln(e,s).next(a=>{i&&(i=!!a),o.set(s,a)})).next(()=>{if(i){let s=Re();const a=[];return $.forEach(o,(u,l)=>{Z("IndexedDbIndexManager","Using index ".concat(function(b){return"id=".concat(b.indexId,"|cg=").concat(b.collectionGroup,"|f=").concat(b.fields.map(x=>"".concat(x.fieldPath,":").concat(x.kind)).join(","))}(u)," to execute ").concat(gu(n)));const c=function(b,x){const _=t_(x);if(_===void 0)return null;for(const E of Gg(b,_.fieldPath))switch(E.op){case"array-contains-any":return E.value.arrayValue.values||[];case"array-contains":return[E.value]}return null}(l,u),d=function(b,x){const _=new Map;for(const E of Ia(x))for(const I of Gg(b,E.fieldPath))switch(I.op){case"==":case"in":_.set(E.fieldPath.canonicalString(),I.value);break;case"not-in":case"!=":return _.set(E.fieldPath.canonicalString(),I.value),Array.from(_.values())}return null}(l,u),h=function(b,x){const _=[];let E=!0;for(const I of Ia(x)){const C=I.kind===0?ZR(b,I.fieldPath,b.startAt):eN(b,I.fieldPath,b.startAt);_.push(C.value),E&&(E=C.inclusive)}return new Ws(_,E)}(l,u),f=function(b,x){const _=[];let E=!0;for(const I of Ia(x)){const C=I.kind===0?eN(b,I.fieldPath,b.endAt):ZR(b,I.fieldPath,b.endAt);_.push(C.value),E&&(E=C.inclusive)}return new Ws(_,E)}(l,u),m=this.hn(u,l,h),v=this.hn(u,l,f),y=this.Pn(u,l,d),g=this.In(u.indexId,c,m,h.inclusive,v,f.inclusive,y);return $.forEach(g,w=>r.j(w,n.limit).next(b=>{b.forEach(x=>{const _=oe.fromSegments(x.documentKey);s.has(_)||(s=s.add(_),a.push(_))})}))}).next(()=>a)}return $.resolve(null)})}cn(e){let n=this.un.get(e);return n||(e.filters.length===0?n=[e]:n=mte(We.create(e.filters,"and")).map(r=>a_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,n),n)}In(e,n,r,i,o,s,a){const u=(n!=null?n.length:1)*Math.max(r.length,o.length),l=u/(n!=null?n.length:1),c=[];for(let d=0;d<u;++d){const h=n?this.Tn(n[d/l]):Jp,f=this.En(e,h,r[d%l],i),m=this.dn(e,h,o[d%l],s),v=a.map(y=>this.En(e,h,y,!0));c.push(...this.createRange(f,m,v))}return c}En(e,n,r,i){const o=new Ra(e,oe.empty(),n,r);return i?o:o.Jt()}dn(e,n,r,i){const o=new Ra(e,oe.empty(),n,r);return i?o.Jt():o}ln(e,n){const r=new wN(n),i=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,i).next(o=>{let s=null;for(const a of o)r.tn(a)&&(!s||a.fields.length>s.fields.length)&&(s=a);return s})}getIndexType(e,n){let r=2;const i=this.cn(n);return $.forEach(i,o=>this.ln(e,o).next(s=>{s?r!==0&&s.fields.length<function(u){let l=new Ze(mt.comparator),c=!1;for(const d of u.filters)for(const h of d.getFlattenedFilters())h.field.isKeyField()||(h.op==="array-contains"||h.op==="array-contains-any"?c=!0:l=l.add(h.field));for(const d of u.orderBy)d.field.isKeyField()||(l=l.add(d.field));return l.size+(c?1:0)}(o)&&(r=1):r=0})).next(()=>function(s){return s.limit!==null}(n)&&i.length>1&&r===2?1:r)}An(e,n){const r=new bd;for(const i of Ia(e)){const o=n.data.field(i.fieldPath);if(o==null)return null;const s=r.Ht(i.kind);Aa.bt.Pt(o,s)}return r.Wt()}Tn(e){const n=new bd;return Aa.bt.Pt(e,n.Ht(0)),n.Wt()}Rn(e,n){const r=new bd;return Aa.bt.Pt(mu(this.databaseId,n),r.Ht(function(o){const s=Ia(o);return s.length===0?0:s[s.length-1].kind}(e))),r.Wt()}Pn(e,n,r){if(r===null)return[];let i=[];i.push(new bd);let o=0;for(const s of Ia(e)){const a=r[o++];for(const u of i)if(this.Vn(n,s.fieldPath)&&of(a))i=this.mn(i,s,a);else{const l=u.Ht(s.kind);Aa.bt.Pt(a,l)}}return this.fn(i)}hn(e,n,r){return this.Pn(e,n,r.position)}fn(e){const n=[];for(let r=0;r<e.length;++r)n[r]=e[r].Wt();return n}mn(e,n,r){const i=[...e],o=[];for(const s of r.arrayValue.values||[])for(const a of i){const u=new bd;u.seed(a.Wt()),Aa.bt.Pt(s,u.Ht(n.kind)),o.push(u)}return o}Vn(e,n){return!!e.filters.find(r=>r instanceof Le&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in"))}getFieldIndexes(e,n){const r=xd(e),i=Zu(e);return(n?r.W("collectionGroupIndex",IDBKeyRange.bound(n,n)):r.W()).next(o=>{const s=[];return $.forEach(o,a=>i.get([a.indexId,this.uid]).next(u=>{s.push(function(c,d){const h=d?new ef(d.sequenceNumber,new Lr(bu(d.readTime),new oe(Gi(d.documentKey)),d.largestBatchId)):ef.empty(),f=c.fields.map(([m,v])=>new Dm(mt.fromServerFormat(m),v));return new qg(c.indexId,c.collectionGroup,f,h)}(a,u))})).next(()=>s)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>n.length===0?null:(n.sort((r,i)=>{const o=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return o!==0?o:Ae(r.collectionGroup,i.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,r){const i=xd(e),o=Zu(e);return this.gn(e).next(s=>i.W("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(a=>$.forEach(a,u=>o.put(pN(u.indexId,this.uid,s,r)))))}updateIndexEntries(e,n){const r=new Map;return $.forEach(n,(i,o)=>{const s=r.get(i.collectionGroup);return(s?$.resolve(s):this.getFieldIndexes(e,i.collectionGroup)).next(a=>(r.set(i.collectionGroup,a),$.forEach(a,u=>this.pn(e,i,u).next(l=>{const c=this.yn(o,u);return l.isEqual(c)?$.resolve():this.wn(e,o,u,l,c)}))))})}Sn(e,n,r,i){return Ju(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(r,n.key),documentKey:n.key.path.toArray()})}bn(e,n,r,i){return Ju(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(r,n.key),n.key.path.toArray()])}pn(e,n,r){const i=Ju(e);let o=new Ze(rs);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.Rn(r,n)])},(s,a)=>{o=o.add(new Ra(r.indexId,n,a.arrayValue,a.directionalValue))}).next(()=>o)}yn(e,n){let r=new Ze(rs);const i=this.An(n,e);if(i==null)return r;const o=t_(n);if(o!=null){const s=e.data.field(o.fieldPath);if(of(s))for(const a of s.arrayValue.values||[])r=r.add(new Ra(n.indexId,e.key,this.Tn(a),i))}else r=r.add(new Ra(n.indexId,e.key,Jp,i));return r}wn(e,n,r,i,o){Z("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const s=[];return function(u,l,c,d,h){const f=u.getIterator(),m=l.getIterator();let v=Qu(f),y=Qu(m);for(;v||y;){let g=!1,w=!1;if(v&&y){const b=c(v,y);b<0?w=!0:b>0&&(g=!0)}else v!=null?w=!0:g=!0;g?(d(y),y=Qu(m)):w?(h(v),v=Qu(f)):(v=Qu(f),y=Qu(m))}}(i,o,rs,a=>{s.push(this.Sn(e,n,r,a))},a=>{s.push(this.bn(e,n,r,a))}),$.waitFor(s)}gn(e){let n=1;return Zu(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,o)=>{o.done(),n=i.sequenceNumber+1}).next(()=>n)}createRange(e,n,r){r=r.sort((s,a)=>rs(s,a)).filter((s,a,u)=>!a||rs(s,u[a-1])!==0);const i=[];i.push(e);for(const s of r){const a=rs(s,e),u=rs(s,n);if(a===0)i[0]=e.Jt();else if(a>0&&u<0)i.push(s),i.push(s.Jt());else if(u>0)break}i.push(n);const o=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];const a=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,Jp,[]],u=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,Jp,[]];o.push(IDBKeyRange.bound(a,u))}return o}Dn(e,n){return rs(e,n)>0}getMinOffsetFromCollectionGroup(e,n){return this.getFieldIndexes(e,n).next(_N)}getMinOffset(e,n){return $.mapArray(this.cn(n),r=>this.ln(e,r).next(i=>i||le())).next(_N)}}function xN(t){return pn(t,"collectionParents")}function Ju(t){return pn(t,"indexEntries")}function xd(t){return pn(t,"indexConfiguration")}function Zu(t){return pn(t,"indexState")}function _N(t){we(t.length!==0);let e=t[0].indexState.offset,n=e.largestBatchId;for(let r=1;r<t.length;r++){const i=t[r].indexState.offset;CI(i,e)<0&&(e=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new Lr(e.readTime,e.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EN={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class lr{constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new lr(e,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r4(t,e,n){const r=t.store("mutations"),i=t.store("documentMutations"),o=[],s=IDBKeyRange.only(n.batchId);let a=0;const u=r.Y({range:s},(c,d,h)=>(a++,h.delete()));o.push(u.next(()=>{we(a===1)}));const l=[];for(const c of n.mutations){const d=oF(e,c.key.path,n.batchId);o.push(i.delete(d)),l.push(c.key)}return $.waitFor(o).next(()=>l)}function Qg(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw le();e=t.noDocument}return JSON.stringify(e).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lr.DEFAULT_COLLECTION_PERCENTILE=10,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lr.DEFAULT=new lr(41943040,lr.DEFAULT_COLLECTION_PERCENTILE,lr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lr.DISABLED=new lr(-1,0,0);class Fy{constructor(e,n,r,i){this.userId=e,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.Cn={}}static lt(e,n,r,i){we(e.uid!=="");const o=e.isAuthenticated()?e.uid:"";return new Fy(o,n,r,i)}checkEmpty(e){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return is(e).Y({index:"userMutationsIndex",range:r},(i,o,s)=>{n=!1,s.done()}).next(()=>n)}addMutationBatch(e,n,r,i){const o=cl(e),s=is(e);return s.add({}).next(a=>{we(typeof a=="number");const u=new DI(a,n,r,i),l=function(f,m,v){const y=v.baseMutations.map(w=>uf(f.ct,w)),g=v.mutations.map(w=>uf(f.ct,w));return{userId:m,batchId:v.batchId,localWriteTimeMs:v.localWriteTime.toMillis(),baseMutations:y,mutations:g}}(this.serializer,this.userId,u),c=[];let d=new Ze((h,f)=>Ae(h.canonicalString(),f.canonicalString()));for(const h of i){const f=oF(this.userId,h.key.path,a);d=d.add(h.key.path.popLast()),c.push(s.put(l)),c.push(o.put(f,oee))}return d.forEach(h=>{c.push(this.indexManager.addToCollectionParentIndex(e,h))}),e.addOnCommittedListener(()=>{this.Cn[a]=u.keys()}),$.waitFor(c).next(()=>u)})}lookupMutationBatch(e,n){return is(e).get(n).next(r=>r?(we(r.userId===this.userId),Sa(this.serializer,r)):null)}vn(e,n){return this.Cn[n]?$.resolve(this.Cn[n]):this.lookupMutationBatch(e,n).next(r=>{if(r){const i=r.keys();return this.Cn[n]=i,i}return null})}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=IDBKeyRange.lowerBound([this.userId,r]);let o=null;return is(e).Y({index:"userMutationsIndex",range:i},(s,a,u)=>{a.userId===this.userId&&(we(a.batchId>=r),o=Sa(this.serializer,a)),u.done()}).next(()=>o)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return is(e).Y({index:"userMutationsIndex",range:n,reverse:!0},(i,o,s)=>{r=o.batchId,s.done()}).next(()=>r)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return is(e).W("userMutationsIndex",n).next(r=>r.map(i=>Sa(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,n){const r=Om(this.userId,n.path),i=IDBKeyRange.lowerBound(r),o=[];return cl(e).Y({range:i},(s,a,u)=>{const[l,c,d]=s,h=Gi(c);if(l===this.userId&&n.path.isEqual(h))return is(e).get(d).next(f=>{if(!f)throw le();we(f.userId===this.userId),o.push(Sa(this.serializer,f))});u.done()}).next(()=>o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(Ae);const i=[];return n.forEach(o=>{const s=Om(this.userId,o.path),a=IDBKeyRange.lowerBound(s),u=cl(e).Y({range:a},(l,c,d)=>{const[h,f,m]=l,v=Gi(f);h===this.userId&&o.path.isEqual(v)?r=r.add(m):d.done()});i.push(u)}),$.waitFor(i).next(()=>this.Fn(e,r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1,o=Om(this.userId,r),s=IDBKeyRange.lowerBound(o);let a=new Ze(Ae);return cl(e).Y({range:s},(u,l,c)=>{const[d,h,f]=u,m=Gi(h);d===this.userId&&r.isPrefixOf(m)?m.length===i&&(a=a.add(f)):c.done()}).next(()=>this.Fn(e,a))}Fn(e,n){const r=[],i=[];return n.forEach(o=>{i.push(is(e).get(o).next(s=>{if(s===null)throw le();we(s.userId===this.userId),r.push(Sa(this.serializer,s))}))}),$.waitFor(i).next(()=>r)}removeMutationBatch(e,n){return r4(e.ae,this.userId,n).next(r=>(e.addOnCommittedListener(()=>{this.Mn(n.batchId)}),$.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return $.resolve();const r=IDBKeyRange.lowerBound(function(s){return[s]}(this.userId)),i=[];return cl(e).Y({range:r},(o,s,a)=>{if(o[0]===this.userId){const u=Gi(o[1]);i.push(u)}else a.done()}).next(()=>{we(i.length===0)})})}containsKey(e,n){return i4(e,this.userId,n)}xn(e){return o4(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function i4(t,e,n){const r=Om(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let s=!1;return cl(t).Y({range:o,J:!0},(a,u,l)=>{const[c,d,h]=a;c===e&&d===i&&(s=!0),l.done()}).next(()=>s)}function is(t){return pn(t,"mutations")}function cl(t){return pn(t,"documentMutations")}function o4(t){return pn(t,"mutationQueues")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new xu(0)}static Bn(){return new xu(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yte{constructor(e,n){this.referenceDelegate=e,this.serializer=n}allocateTargetId(e){return this.Ln(e).next(n=>{const r=new xu(n.highestTargetId);return n.highestTargetId=r.next(),this.kn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ln(e).next(n=>be.fromTimestamp(new vt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ln(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,r){return this.Ln(e).next(i=>(i.highestListenSequenceNumber=n,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),n>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=n),this.kn(e,i)))}addTargetData(e,n){return this.qn(e,n).next(()=>this.Ln(e).next(r=>(r.targetCount+=1,this.Qn(n,r),this.kn(e,r))))}updateTargetData(e,n){return this.qn(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>el(e).delete(n.targetId)).next(()=>this.Ln(e)).next(r=>(we(r.targetCount>0),r.targetCount-=1,this.kn(e,r)))}removeTargets(e,n,r){let i=0;const o=[];return el(e).Y((s,a)=>{const u=Bd(a);u.sequenceNumber<=n&&r.get(u.targetId)===null&&(i++,o.push(this.removeTargetData(e,u)))}).next(()=>$.waitFor(o)).next(()=>i)}forEachTarget(e,n){return el(e).Y((r,i)=>{const o=Bd(i);n(o)})}Ln(e){return IN(e).get("targetGlobalKey").next(n=>(we(n!==null),n))}kn(e,n){return IN(e).put("targetGlobalKey",n)}qn(e,n){return el(e).put(e4(this.serializer,n))}Qn(e,n){let r=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,r=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ln(e).next(n=>n.targetCount)}getTargetData(e,n){const r=gu(n),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let o=null;return el(e).Y({range:i,index:"queryTargetsIndex"},(s,a,u)=>{const l=Bd(a);Yf(n,l.target)&&(o=l,u.done())}).next(()=>o)}addMatchingKeys(e,n,r){const i=[],o=ps(e);return n.forEach(s=>{const a=Xn(s.path);i.push(o.put({targetId:r,path:a})),i.push(this.referenceDelegate.addReference(e,r,s))}),$.waitFor(i)}removeMatchingKeys(e,n,r){const i=ps(e);return $.forEach(n,o=>{const s=Xn(o.path);return $.waitFor([i.delete([r,s]),this.referenceDelegate.removeReference(e,r,o)])})}removeMatchingKeysForTargetId(e,n){const r=ps(e),i=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),i=ps(e);let o=Re();return i.Y({range:r,J:!0},(s,a,u)=>{const l=Gi(s[1]),c=new oe(l);o=o.add(c)}).next(()=>o)}containsKey(e,n){const r=Xn(n.path),i=IDBKeyRange.bound([r],[ZV(r)],!1,!0);let o=0;return ps(e).Y({index:"documentTargetsIndex",J:!0,range:i},([s,a],u,l)=>{s!==0&&(o++,l.done())}).next(()=>o>0)}_t(e,n){return el(e).get(n).next(r=>r?Bd(r):null)}}function el(t){return pn(t,"targets")}function IN(t){return pn(t,"targetGlobal")}function ps(t){return pn(t,"targetDocuments")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TN([t,e],[n,r]){const i=Ae(t,n);return i===0?Ae(e,r):i}class wte{constructor(e){this.Kn=e,this.buffer=new Ze(TN),this.$n=0}Un(){return++this.$n}Wn(e){const n=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();TN(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class bte{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Gn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return this.Gn!==null}zn(e){Z("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ra(n)?Z("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await na(n)}await this.zn(3e5)})}}class xte{constructor(e,n){this.jn=e,this.params=n}calculateTargetCount(e,n){return this.jn.Hn(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(gr._e);const r=new wte(n);return this.jn.forEachTarget(e,i=>r.Wn(i.sequenceNumber)).next(()=>this.jn.Jn(e,i=>r.Wn(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.jn.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.jn.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Z("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(EN)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Z("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),EN):this.Yn(e,n))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,n){let r,i,o,s,a,u,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(d=>(d>this.params.maximumSequenceNumbersToCollect?(Z("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(d)),i=this.params.maximumSequenceNumbersToCollect):i=d,s=Date.now(),this.nthSequenceNumber(e,i))).next(d=>(r=d,a=Date.now(),this.removeTargets(e,r,n))).next(d=>(o=d,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(d=>(l=Date.now(),sl()<=Pe.DEBUG&&Z("LruGarbageCollector","LRU Garbage Collection\n	Counted targets in ".concat(s-c,"ms\n	Determined least recently used ").concat(i," in ")+(a-s)+"ms\n"+"	Removed ".concat(o," targets in ")+(u-a)+"ms\n"+"	Removed ".concat(d," documents in ")+(l-u)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:d})))}}function _te(t,e){return new xte(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ete{constructor(e,n){this.db=e,this.garbageCollector=_te(this,n)}Hn(e){const n=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}Zn(e){let n=0;return this.Jn(e,r=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Jn(e,n){return this.Xn(e,(r,i)=>n(i))}addReference(e,n,r){return Zp(e,r)}removeReference(e,n,r){return Zp(e,r)}removeTargets(e,n,r){return this.db.getTargetCache().removeTargets(e,n,r)}markPotentiallyOrphaned(e,n){return Zp(e,n)}er(e,n){return function(i,o){let s=!1;return o4(i).Z(a=>i4(i,a,o).next(u=>(u&&(s=!0),$.resolve(!u)))).next(()=>s)}(e,n)}removeOrphanedDocuments(e,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let o=0;return this.Xn(e,(s,a)=>{if(a<=n){const u=this.er(e,s).next(l=>{if(!l)return o++,r.getEntry(e,s).next(()=>(r.removeEntry(s,be.min()),ps(e).delete(function(d){return[0,Xn(d.path)]}(s))))});i.push(u)}}).next(()=>$.waitFor(i)).next(()=>r.apply(e)).next(()=>o)}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,n){return Zp(e,n)}Xn(e,n){const r=ps(e);let i,o=gr._e;return r.Y({index:"documentTargetsIndex"},([s,a],{path:u,sequenceNumber:l})=>{s===0?(o!==gr._e&&n(new oe(Gi(i)),o),o=l,i=u):o=gr._e}).next(()=>{o!==gr._e&&n(new oe(Gi(i)),o)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Zp(t,e){return ps(t).put(function(r,i){return{targetId:0,path:Xn(r.path),sequenceNumber:i}}(e,t.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s4{constructor(){this.changes=new ia(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ut.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ite{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,r){return ya(e).put(r)}removeEntry(e,n,r){return ya(e).delete(function(o,s){const a=o.path.toArray();return[a.slice(0,a.length-2),a[a.length-2],Yg(s),a[a.length-1]]}(n,r))}updateMetadata(e,n){return this.getMetadata(e).next(r=>(r.byteSize+=n,this.tr(e,r)))}getEntry(e,n){let r=ut.newInvalidDocument(n);return ya(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_d(n))},(i,o)=>{r=this.nr(n,o)}).next(()=>r)}rr(e,n){let r={size:0,document:ut.newInvalidDocument(n)};return ya(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(_d(n))},(i,o)=>{r={document:this.nr(n,o),size:Qg(o)}}).next(()=>r)}getEntries(e,n){let r=yr();return this.ir(e,n,(i,o)=>{const s=this.nr(i,o);r=r.insert(i,s)}).next(()=>r)}sr(e,n){let r=yr(),i=new it(oe.comparator);return this.ir(e,n,(o,s)=>{const a=this.nr(o,s);r=r.insert(o,a),i=i.insert(o,Qg(s))}).next(()=>({documents:r,_r:i}))}ir(e,n,r){if(n.isEmpty())return $.resolve();let i=new Ze(SN);n.forEach(u=>i=i.add(u));const o=IDBKeyRange.bound(_d(i.first()),_d(i.last())),s=i.getIterator();let a=s.getNext();return ya(e).Y({index:"documentKeyIndex",range:o},(u,l,c)=>{const d=oe.fromSegments([...l.prefixPath,l.collectionGroup,l.documentId]);for(;a&&SN(a,d)<0;)r(a,null),a=s.getNext();a&&a.isEqual(d)&&(r(a,l),a=s.hasNext()?s.getNext():null),a?c.U(_d(a)):c.done()}).next(()=>{for(;a;)r(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,n,r,i,o){const s=n.path,a=[s.popLast().toArray(),s.lastSegment(),Yg(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],u=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return ya(e).W(IDBKeyRange.bound(a,u,!0)).next(l=>{o==null||o.incrementDocumentReadCount(l.length);let c=yr();for(const d of l){const h=this.nr(oe.fromSegments(d.prefixPath.concat(d.collectionGroup,d.documentId)),d);h.isFoundDocument()&&(Qf(n,h)||i.has(h.key))&&(c=c.insert(h.key,h))}return c})}getAllFromCollectionGroup(e,n,r,i){let o=yr();const s=kN(n,r),a=kN(n,Lr.max());return ya(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(u,l,c)=>{const d=this.nr(oe.fromSegments(l.prefixPath.concat(l.collectionGroup,l.documentId)),l);o=o.insert(d.key,d),o.size===i&&c.done()}).next(()=>o)}newChangeBuffer(e){return new Tte(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return CN(e).get("remoteDocumentGlobalKey").next(n=>(we(!!n),n))}tr(e,n){return CN(e).put("remoteDocumentGlobalKey",n)}nr(e,n){if(n){const r=lte(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(be.min())))return r}return ut.newInvalidDocument(e)}}function a4(t){return new Ite(t)}class Tte extends s4{constructor(e,n){super(),this.ar=e,this.trackRemovals=n,this.ur=new ia(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const n=[];let r=0,i=new Ze((o,s)=>Ae(o.canonicalString(),s.canonicalString()));return this.changes.forEach((o,s)=>{const a=this.ur.get(o);if(n.push(this.ar.removeEntry(e,o,a.readTime)),s.isValidDocument()){const u=hN(this.ar.serializer,s);i=i.add(o.path.popLast());const l=Qg(u);r+=l-a.size,n.push(this.ar.addEntry(e,o,u))}else if(r-=a.size,this.trackRemovals){const u=hN(this.ar.serializer,s.convertToNoDocument(be.min()));n.push(this.ar.addEntry(e,o,u))}}),i.forEach(o=>{n.push(this.ar.indexManager.addToCollectionParentIndex(e,o))}),n.push(this.ar.updateMetadata(e,r)),$.waitFor(n)}getFromCache(e,n){return this.ar.rr(e,n).next(r=>(this.ur.set(n,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,n){return this.ar.sr(e,n).next(({documents:r,_r:i})=>(i.forEach((o,s)=>{this.ur.set(o,{size:s,readTime:r.get(o).readTime})}),r))}}function CN(t){return pn(t,"remoteDocumentGlobal")}function ya(t){return pn(t,"remoteDocumentsV14")}function _d(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kN(t,e){const n=e.documentKey.path.toArray();return[t,Yg(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function SN(t,e){const n=t.path.toArray(),r=e.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=Ae(n[o],r[o]),i)return i;return i=Ae(n.length,r.length),i||(i=Ae(n[n.length-2],r[r.length-2]),i||Ae(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cte{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&ah(r.mutation,i,vr.empty(),vt.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Re()){const i=Ki();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=Fd();return o.forEach((a,u)=>{s=s.insert(a,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Re()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,a)=>{n.set(s,a)})})}computeViews(e,n,r,i){let o=yr();const s=sh(),a=function(){return sh()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof Go)?o=o.insert(l.key,l):c!==void 0?(s.set(l.key,c.mutation.getFieldMask()),ah(c.mutation,l,c.mutation.getFieldMask(),vt.now())):s.set(l.key,vr.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,c)=>s.set(l,c)),n.forEach((l,c)=>{var d;return a.set(l,new Cte(c,(d=s.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,n){const r=sh();let i=new it((s,a)=>s-a),o=Re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const a of s)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||vr.empty();c=a.applyToLocalView(l,c),r.set(u,c);const d=(i.get(a.batchId)||Re()).add(u);i=i.insert(a.batchId,d)})}).next(()=>{const s=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,d=CF();c.forEach(h=>{if(!o.has(h)){const f=OF(n.get(h),r.get(h));f!==null&&d.set(h,f),o=o.add(h)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,d))}return $.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(s){return oe.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):RI(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):$.resolve(Ki());let a=-1,u=o;return s.next(l=>$.forEach(l,(c,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),o.get(c)?$.resolve():this.remoteDocumentCache.getEntry(e,c).next(h=>{u=u.insert(c,h)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,Re())).next(c=>({batchId:a,changes:TF(c)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new oe(n)).next(r=>{let i=Fd();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const o=n.collectionGroup;let s=Fd();return this.indexManager.getCollectionParents(e,o).next(a=>$.forEach(a,u=>{const l=function(d,h){return new Ho(h,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(c=>{c.forEach((d,h)=>{s=s.insert(d,h)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{const c=l.getKey();s.get(c)===null&&(s=s.insert(c,ut.newInvalidDocument(c)))});let a=Fd();return s.forEach((u,l)=>{const c=o.get(u);c!==void 0&&ah(c.mutation,l,vr.empty(),vt.now()),Qf(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kte{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,n){return $.resolve(this.cr.get(n))}saveBundleMetadata(e,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:Bt(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.lr.get(n))}saveNamedQuery(e,n){return this.lr.set(n.name,function(i){return{name:i.name,query:FI(i.bundledQuery),readTime:Bt(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ste{constructor(){this.overlays=new it(oe.comparator),this.hr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Ki();return $.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.ht(e,n,o)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.hr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=Ki(),o=n.length+1,s=new oe(n.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new it((l,c)=>l-c);const s=this.overlays.getIterator();for(;s.hasNext();){const l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=o.get(l.largestBatchId);c===null&&(c=Ki(),o=o.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=Ki(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return $.resolve(a)}ht(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new LI(n,r));let o=this.hr.get(n);o===void 0&&(o=Re(),this.hr.set(n,o)),this.hr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(){this.Pr=new Ze(en.Ir),this.Tr=new Ze(en.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,n){const r=new en(e,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Ar(new en(e,n))}Rr(e,n){e.forEach(r=>this.removeReference(r,n))}Vr(e){const n=new oe(new Oe([])),r=new en(n,e),i=new en(n,e+1),o=[];return this.Tr.forEachInRange([r,i],s=>{this.Ar(s),o.push(s.key)}),o}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const n=new oe(new Oe([])),r=new en(n,e),i=new en(n,e+1);let o=Re();return this.Tr.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new en(e,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class en{constructor(e,n){this.key=e,this.pr=n}static Ir(e,n){return oe.comparator(e.key,n.key)||Ae(e.pr,n.pr)}static Er(e,n){return Ae(e.pr,n.pr)||oe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ate{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Ze(en.Ir)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new DI(o,n,r,i);this.mutationQueue.push(s);for(const a of i)this.wr=this.wr.add(new en(a.key,o)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(s)}lookupMutationBatch(e,n){return $.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.br(r),o=i<0?0:i;return $.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new en(n,0),i=new en(n,Number.POSITIVE_INFINITY),o=[];return this.wr.forEachInRange([r,i],s=>{const a=this.Sr(s.pr);o.push(a)}),$.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(Ae);return n.forEach(i=>{const o=new en(i,0),s=new en(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([o,s],a=>{r=r.add(a.pr)})}),$.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;oe.isDocumentKey(o)||(o=o.child(""));const s=new en(new oe(o),0);let a=new Ze(Ae);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},s),$.resolve(this.Dr(a))}Dr(e){const n=[];return e.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){we(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return $.forEach(n.mutations,i=>{const o=new en(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.wr=r})}Mn(e){}containsKey(e,n){const r=new en(n,0),i=this.wr.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}Cr(e,n){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const n=this.br(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rte{constructor(e){this.vr=e,this.docs=function(){return new it(oe.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():ut.newInvalidDocument(n))}getEntries(e,n){let r=yr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():ut.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=yr();const s=n.path,a=new oe(s.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||CI(tF(c),r)<=0||(i.has(c.key)||Qf(n,c))&&(o=o.insert(c.key,c.mutableCopy()))}return $.resolve(o)}getAllFromCollectionGroup(e,n,r,i){le()}Fr(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Nte(this)}getSize(e){return $.resolve(this.size)}}class Nte extends s4{constructor(e){super(),this.ar=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(e,i)):this.ar.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.ar.getEntry(e,n)}getAllFromCache(e,n){return this.ar.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pte{constructor(e){this.persistence=e,this.Mr=new ia(n=>gu(n),Yf),this.lastRemoteSnapshotVersion=be.min(),this.highestTargetId=0,this.Or=0,this.Nr=new jI,this.targetCount=0,this.Br=xu.Nn()}forEachTarget(e,n){return this.Mr.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),$.resolve()}qn(e){this.Mr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Br=new xu(n),this.highestTargetId=n),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,n){return this.qn(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.qn(n),$.resolve()}removeTargetData(e,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Mr.forEach((s,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(o).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.Mr.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this.Nr.dr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),$.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Nr.Vr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Nr.gr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l4{constructor(e,n){this.Lr={},this.overlays={},this.kr=new gr(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new Pte(this),this.indexManager=new gte,this.remoteDocumentCache=function(i){return new Rte(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new ZF(n),this.$r=new kte(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new Ste,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Lr[e.toKey()];return r||(r=new Ate(n,this.referenceDelegate),this.Lr[e.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,n,r){Z("MemoryPersistence","Starting transaction:",e);const i=new Dte(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(o=>this.referenceDelegate.Wr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Gr(e,n){return $.or(Object.values(this.Lr).map(r=>()=>r.containsKey(e,n)))}}class Dte extends rF{constructor(e){super(),this.currentSequenceNumber=e}}class $y{constructor(e){this.persistence=e,this.zr=new jI,this.jr=null}static Hr(e){return new $y(e)}get Jr(){if(this.jr)return this.jr;throw le()}addReference(e,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.Jr.add(n.toString()),$.resolve()}removeTarget(e,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Jr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ur(){this.jr=new Set}Wr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.Jr,r=>{const i=oe.fromPath(r);return this.Yr(e,i).next(o=>{o||n.removeEntry(i,be.min())})}).next(()=>(this.jr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Yr(e,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(e){return 0}Yr(e,n){return $.or([()=>$.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Gr(e,n)])}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ote{constructor(e){this.serializer=e}N(e,n,r,i){const o=new Dy("createOrUpgrade",n);r<1&&i>=1&&(function(u){u.createObjectStore("owner")}(e),function(u){u.createObjectStore("mutationQueues",{keyPath:"userId"}),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zR,{unique:!0}),u.createObjectStore("documentMutations")}(e),AN(e),function(u){u.createObjectStore("remoteDocuments")}(e));let s=$.resolve();return r<3&&i>=3&&(r!==0&&(function(u){u.deleteObjectStore("targetDocuments"),u.deleteObjectStore("targets"),u.deleteObjectStore("targetGlobal")}(e),AN(e)),s=s.next(()=>function(u){const l=u.store("targetGlobal"),c={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:be.min().toTimestamp(),targetCount:0};return l.put("targetGlobalKey",c)}(o))),r<4&&i>=4&&(r!==0&&(s=s.next(()=>function(u,l){return l.store("mutations").W().next(c=>{u.deleteObjectStore("mutations"),u.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",zR,{unique:!0});const d=l.store("mutations"),h=c.map(f=>d.put(f));return $.waitFor(h)})}(e,o))),s=s.next(()=>{(function(u){u.createObjectStore("clientMetadata",{keyPath:"clientId"})})(e)})),r<5&&i>=5&&(s=s.next(()=>this.Xr(o))),r<6&&i>=6&&(s=s.next(()=>(function(u){u.createObjectStore("remoteDocumentGlobal")}(e),this.ei(o)))),r<7&&i>=7&&(s=s.next(()=>this.ti(o))),r<8&&i>=8&&(s=s.next(()=>this.ni(e,o))),r<9&&i>=9&&(s=s.next(()=>{(function(u){u.objectStoreNames.contains("remoteDocumentChanges")&&u.deleteObjectStore("remoteDocumentChanges")})(e)})),r<10&&i>=10&&(s=s.next(()=>this.ri(o))),r<11&&i>=11&&(s=s.next(()=>{(function(u){u.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(u){u.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(s=s.next(()=>{(function(u){const l=u.createObjectStore("documentOverlays",{keyPath:vee});l.createIndex("collectionPathOverlayIndex",yee,{unique:!1}),l.createIndex("collectionGroupOverlayIndex",wee,{unique:!1})})(e)})),r<13&&i>=13&&(s=s.next(()=>function(u){const l=u.createObjectStore("remoteDocumentsV14",{keyPath:see});l.createIndex("documentKeyIndex",aee),l.createIndex("collectionGroupIndex",uee)}(e)).next(()=>this.ii(e,o)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(s=s.next(()=>this.si(e,o))),r<15&&i>=15&&(s=s.next(()=>function(u){u.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),u.createObjectStore("indexState",{keyPath:fee}).createIndex("sequenceNumberIndex",pee,{unique:!1}),u.createObjectStore("indexEntries",{keyPath:mee}).createIndex("documentKeyIndex",gee,{unique:!1})}(e))),s}ei(e){let n=0;return e.store("remoteDocuments").Y((r,i)=>{n+=Qg(i)}).next(()=>{const r={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Xr(e){const n=e.store("mutationQueues"),r=e.store("mutations");return n.W().next(i=>$.forEach(i,o=>{const s=IDBKeyRange.bound([o.userId,-1],[o.userId,o.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",s).next(a=>$.forEach(a,u=>{we(u.userId===o.userId);const l=Sa(this.serializer,u);return r4(e,o.userId,l).next(()=>{})}))}))}ti(e){const n=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const o=[];return r.Y((s,a)=>{const u=new Oe(s),l=function(d){return[0,Xn(d)]}(u);o.push(n.get(l).next(c=>c?$.resolve():(d=>n.put({targetId:0,path:Xn(d),sequenceNumber:i.highestListenSequenceNumber}))(u)))}).next(()=>$.waitFor(o))})}ni(e,n){e.createObjectStore("collectionParents",{keyPath:hee});const r=n.store("collectionParents"),i=new BI,o=s=>{if(i.add(s)){const a=s.lastSegment(),u=s.popLast();return r.put({collectionId:a,parent:Xn(u)})}};return n.store("remoteDocuments").Y({J:!0},(s,a)=>{const u=new Oe(s);return o(u.popLast())}).next(()=>n.store("documentMutations").Y({J:!0},([s,a,u],l)=>{const c=Gi(a);return o(c.popLast())}))}ri(e){const n=e.store("targets");return n.Y((r,i)=>{const o=Bd(i),s=e4(this.serializer,o);return n.put(s)})}ii(e,n){const r=n.store("remoteDocuments"),i=[];return r.Y((o,s)=>{const a=n.store("remoteDocumentsV14"),u=function(d){return d.document?new oe(Oe.fromString(d.document.name).popFirst(5)):d.noDocument?oe.fromSegments(d.noDocument.path):d.unknownDocument?oe.fromSegments(d.unknownDocument.path):le()}(s).path.toArray(),l={prefixPath:u.slice(0,u.length-2),collectionGroup:u[u.length-2],documentId:u[u.length-1],readTime:s.readTime||[0,0],unknownDocument:s.unknownDocument,noDocument:s.noDocument,document:s.document,hasCommittedMutations:!!s.hasCommittedMutations};i.push(a.put(l))}).next(()=>$.waitFor(i))}si(e,n){const r=n.store("mutations"),i=a4(this.serializer),o=new l4($y.Hr,this.serializer.ct);return r.W().next(s=>{const a=new Map;return s.forEach(u=>{var l;let c=(l=a.get(u.userId))!==null&&l!==void 0?l:Re();Sa(this.serializer,u).keys().forEach(d=>c=c.add(d)),a.set(u.userId,c)}),$.forEach(a,(u,l)=>{const c=new nn(l),d=Vy.lt(this.serializer,c),h=o.getIndexManager(c),f=Fy.lt(c,this.serializer,h,o.referenceDelegate);return new u4(i,f,d,h).recalculateAndSaveOverlaysForDocumentKeys(new n_(n,gr._e),u).next()})})}}function AN(t){t.createObjectStore("targetDocuments",{keyPath:cee}).createIndex("documentTargetsIndex",dee,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",lee,{unique:!0}),t.createObjectStore("targetGlobal")}const Gw="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class UI{constructor(e,n,r,i,o,s,a,u,l,c,d=15){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.oi=o,this.window=s,this.document=a,this._i=l,this.ai=c,this.ui=d,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=h=>Promise.resolve(),!UI.D())throw new J(z.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ete(this,i),this.Ti=n+"main",this.serializer=new ZF(u),this.Ei=new Jr(this.Ti,this.ui,new Ote(this.serializer)),this.Qr=new yte(this.referenceDelegate,this.serializer),this.remoteDocumentCache=a4(this.serializer),this.$r=new cte,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,c===!1&&$t("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new J(z.FAILED_PRECONDITION,Gw);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Qr.getHighestSequenceNumber(e))}).then(e=>{this.kr=new gr(e,this._i)}).then(()=>{this.qr=!0}).catch(e=>(this.Ei&&this.Ei.close(),Promise.reject(e)))}fi(e){return this.Ii=async n=>{if(this.started)return e(n)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L(async n=>{n.newVersion===null&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget(async()=>{this.started&&await this.Ai()}))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>em(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.gi(e).next(n=>{n||(this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)))})}).next(()=>this.pi(e)).next(n=>this.isPrimary&&!n?this.yi(e).next(()=>!1):!!n&&this.wi(e).next(()=>!0))).catch(e=>{if(ra(e))return Z("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Z("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.oi.enqueueRetryable(()=>this.Ii(e)),this.isPrimary=e})}gi(e){return Ed(e).get("owner").next(n=>$.resolve(this.Si(n)))}bi(e){return em(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",n=>{const r=pn(n,"clientMetadata");return r.W().next(i=>{const o=this.vi(i,18e5),s=i.filter(a=>o.indexOf(a)===-1);return $.forEach(s,a=>r.delete(a.clientId)).next(()=>s)})}).catch(()=>[]);if(this.di)for(const n of e)this.di.removeItem(this.Fi(n.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Ai().then(()=>this.Di()).then(()=>this.mi()))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?$.resolve(!0):Ed(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)){if(this.Si(n)&&this.networkEnabled)return!0;if(!this.Si(n)){if(!n.allowTabSynchronization)throw new J(z.FAILED_PRECONDITION,Gw);return!1}}return!(!this.networkEnabled||!this.inForeground)||em(e).W().next(r=>this.vi(r,5e3).find(i=>{if(this.clientId!==i.clientId){const o=!this.networkEnabled&&i.networkEnabled,s=!this.inForeground&&i.inForeground,a=this.networkEnabled===i.networkEnabled;if(o||s&&a)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&Z("IndexedDbPersistence","Client ".concat(n?"is":"is not"," eligible for a primary lease.")),n))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const n=new n_(e,gr._e);return this.yi(n).next(()=>this.bi(n))}),this.Ei.close(),this.Bi()}vi(e,n){return e.filter(r=>this.Ci(r.updateTimeMs,n)&&!this.Mi(r.clientId))}Li(){return this.runTransaction("getActiveClients","readonly",e=>em(e).W().next(n=>this.vi(n,18e5).map(r=>r.clientId)))}get started(){return this.qr}getMutationQueue(e,n){return Fy.lt(e,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new vte(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return Vy.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,n,r){Z("IndexedDbPersistence","Starting transaction:",e);const i=n==="readonly"?"readonly":"readwrite",o=function(u){return u===15?xee:u===14?uF:u===13?aF:u===12?bee:u===11?sF:void le()}(this.ui);let s;return this.Ei.runTransaction(e,i,o,a=>(s=new n_(a,this.kr?this.kr.next():gr._e),n==="readwrite-primary"?this.gi(s).next(u=>!!u||this.pi(s)).next(u=>{if(!u)throw $t("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.oi.enqueueRetryable(()=>this.Ii(!1)),new J(z.FAILED_PRECONDITION,nF);return r(s)}).next(u=>this.wi(s).next(()=>u)):this.ki(s).next(()=>r(s)))).then(a=>(s.raiseOnCommittedEvent(),a))}ki(e){return Ed(e).get("owner").next(n=>{if(n!==null&&this.Ci(n.leaseTimestampMs,5e3)&&!this.Mi(n.ownerId)&&!this.Si(n)&&!(this.ai||this.allowTabSynchronization&&n.allowTabSynchronization))throw new J(z.FAILED_PRECONDITION,Gw)})}wi(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Ed(e).put("owner",n)}static D(){return Jr.D()}yi(e){const n=Ed(e);return n.get("owner").next(r=>this.Si(r)?(Z("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):$.resolve())}Ci(e,n){const r=Date.now();return!(e<r-n)&&(!(e>r)||($t("Detected an update time that is in the future: ".concat(e," > ").concat(r)),!1))}Ri(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.li=()=>{this.oi.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.Ai()))},this.document.addEventListener("visibilitychange",this.li),this.inForeground=this.document.visibilityState==="visible")}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;typeof((e=this.window)===null||e===void 0?void 0:e.addEventListener)=="function"&&(this.ci=()=>{this.xi();const n=/(?:Version|Mobile)\/1[456]/;$L()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var n;try{const r=((n=this.di)===null||n===void 0?void 0:n.getItem(this.Fi(e)))!==null;return Z("IndexedDbPersistence","Client '".concat(e,"' ").concat(r?"is":"is not"," zombied in LocalStorage")),r}catch(r){return $t("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(e){$t("Failed to set zombie client id.",e)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(e){}}Fi(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Ed(t){return pn(t,"owner")}function em(t){return pn(t,"clientMetadata")}function zI(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(e,n){let r=Re(),i=Re();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new WI(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lte{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c4{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return $L()?8:Jr.v(yt())>0?6:4}()}initialize(e,n){this.zi=e,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(e,n,r,i){const o={result:null};return this.ji(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.Hi(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;const s=new Lte;return this.Ji(e,n,s).next(a=>{if(o.result=a,this.Ui)return this.Yi(e,n,s,a.size)})}).next(()=>o.result)}Yi(e,n,r,i){return r.documentReadCount<this.Wi?(sl()<=Pe.DEBUG&&Z("QueryEngine","SDK will not create cache indexes for query:",al(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),$.resolve()):(sl()<=Pe.DEBUG&&Z("QueryEngine","Query:",al(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(sl()<=Pe.DEBUG&&Z("QueryEngine","The SDK decides to create cache indexes for query:",al(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Qn(n))):$.resolve())}ji(e,n){if(tN(n))return $.resolve(null);let r=Qn(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Kg(n,null,"F"),r=Qn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Re(...o);return this.zi.getDocuments(e,s).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,s,u.readTime)?this.ji(e,Kg(n,null,"F")):this.es(e,l,n,u)}))})))}Hi(e,n,r,i){return tN(n)||i.isEqual(be.min())?$.resolve(null):this.zi.getDocuments(e,r).next(o=>{const s=this.Zi(n,o);return this.Xi(n,s,r,i)?$.resolve(null):(sl()<=Pe.DEBUG&&Z("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),al(n)),this.es(e,s,n,eF(i,-1)).next(a=>a))})}Zi(e,n){let r=new Ze(EF(e));return n.forEach((i,o)=>{Qf(e,o)&&(r=r.add(o))}),r}Xi(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ji(e,n,r){return sl()<=Pe.DEBUG&&Z("QueryEngine","Using full collection scan to execute query:",al(n)),this.zi.getDocumentsMatchingQuery(e,n,Lr.min(),r)}es(e,n,r,i){return this.zi.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mte{constructor(e,n,r,i){this.persistence=e,this.ts=n,this.serializer=i,this.ns=new it(Ae),this.rs=new ia(o=>gu(o),Yf),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(r)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new u4(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.ns))}}function d4(t,e,n,r){return new Mte(t,e,n,r)}async function h4(t,e){const n=ae(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n._s(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],a=[];let u=Re();for(const l of i){s.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of o){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:s,addedBatchIds:a}))})})}function Vte(t,e){const n=ae(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const d=l.batch,h=d.keys();let f=$.resolve();return h.forEach(m=>{f=f.next(()=>c.getEntry(u,m)).next(v=>{const y=l.docVersions.get(m);we(y!==null),v.version.compareTo(y)<0&&(d.applyToRemoteDocument(v,l),v.isValidDocument()&&(v.setReadTime(l.commitVersion),c.addEntry(v)))})}),f.next(()=>a.mutationQueue.removeMutationBatch(u,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Re();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function f4(t){const e=ae(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Qr.getLastRemoteSnapshotVersion(n))}function Fte(t,e){const n=ae(t),r=e.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];e.targetChanges.forEach((c,d)=>{const h=i.get(d);if(!h)return;a.push(n.Qr.removeMatchingKeys(o,c.removedDocuments,d).next(()=>n.Qr.addMatchingKeys(o,c.addedDocuments,d)));let f=h.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?f=f.withResumeToken(Zt.EMPTY_BYTE_STRING,be.min()).withLastLimboFreeSnapshotVersion(be.min()):c.resumeToken.approximateByteSize()>0&&(f=f.withResumeToken(c.resumeToken,r)),i=i.insert(d,f),function(v,y,g){return v.resumeToken.approximateByteSize()===0||y.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:g.addedDocuments.size+g.modifiedDocuments.size+g.removedDocuments.size>0}(h,f,c)&&a.push(n.Qr.updateTargetData(o,f))});let u=yr(),l=Re();if(e.documentUpdates.forEach(c=>{e.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(o,c))}),a.push(p4(o,s,e.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(be.min())){const c=n.Qr.getLastRemoteSnapshotVersion(o).next(d=>n.Qr.setTargetsMetadata(o,o.currentSequenceNumber,r));a.push(c)}return $.waitFor(a).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.ns=i,o))}function p4(t,e,n){let r=Re(),i=Re();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=yr();return n.forEach((a,u)=>{const l=o.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(be.min())?(e.removeEntry(a,u.readTime),s=s.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(a,u)):Z("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:s,ls:i}})}function $te(t,e){const n=ae(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function pc(t,e){const n=ae(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,e).next(o=>o?(i=o,$.resolve(i)):n.Qr.allocateTargetId(r).next(s=>(i=new _o(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(e,r.targetId)),r})}async function mc(t,e,n){const r=ae(t),i=r.ns.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!ra(s))throw s;Z("LocalStore","Failed to update sequence numbers for target ".concat(e,": ").concat(s))}r.ns=r.ns.remove(e),r.rs.delete(i.target)}function Jg(t,e,n){const r=ae(t);let i=be.min(),o=Re();return r.persistence.runTransaction("Execute query","readwrite",s=>function(u,l,c){const d=ae(u),h=d.rs.get(c);return h!==void 0?$.resolve(d.ns.get(h)):d.Qr.getTargetData(l,c)}(r,s,Qn(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(s,a.targetId).next(u=>{o=u})}).next(()=>r.ts.getDocumentsMatchingQuery(s,e,n?i:be.min(),n?o:Re())).next(a=>(v4(r,_F(e),a),{documents:a,hs:o})))}function m4(t,e){const n=ae(t),r=ae(n.Qr),i=n.ns.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",o=>r._t(o,e).next(s=>s?s.target:null))}function g4(t,e){const n=ae(t),r=n.ss.get(e)||be.min();return n.persistence.runTransaction("Get new document changes","readonly",i=>n.os.getAllFromCollectionGroup(i,e,eF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(v4(n,e,i),i))}function v4(t,e,n){let r=t.ss.get(e)||be.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.ss.set(e,r)}async function Bte(t,e,n,r){const i=ae(t);let o=Re(),s=yr();for(const l of n){const c=e.Ps(l.metadata.name);l.document&&(o=o.add(c));const d=e.Is(l);d.setReadTime(e.Ts(l.metadata.readTime)),s=s.insert(c,d)}const a=i.os.newChangeBuffer({trackRemovals:!0}),u=await pc(i,function(c){return Qn(Uc(Oe.fromString("__bundle__/docs/".concat(c))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",l=>p4(l,a,s).next(c=>(a.apply(l),c)).next(c=>i.Qr.removeMatchingKeysForTargetId(l,u.targetId).next(()=>i.Qr.addMatchingKeys(l,o,u.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(l,c.cs,c.ls)).next(()=>c.cs)))}async function jte(t,e,n=Re()){const r=await pc(t,Qn(FI(e.bundledQuery))),i=ae(t);return i.persistence.runTransaction("Save named query","readwrite",o=>{const s=Bt(e.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.$r.saveNamedQuery(o,e);const a=r.withResumeToken(Zt.EMPTY_BYTE_STRING,s);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(o,a).next(()=>i.Qr.removeMatchingKeysForTargetId(o,r.targetId)).next(()=>i.Qr.addMatchingKeys(o,n,r.targetId)).next(()=>i.$r.saveNamedQuery(o,e))})}function RN(t,e){return"firestore_clients_".concat(t,"_").concat(e)}function NN(t,e,n){let r="firestore_mutations_".concat(t,"_").concat(n);return e.isAuthenticated()&&(r+="_".concat(e.uid)),r}function Kw(t,e){return"firestore_targets_".concat(t,"_").concat(e)}class Zg{constructor(e,n,r,i){this.user=e,this.batchId=n,this.state=r,this.error=i}static Es(e,n,r){const i=JSON.parse(r);let o,s=typeof i=="object"&&["pending","acknowledged","rejected"].indexOf(i.state)!==-1&&(i.error===void 0||typeof i.error=="object");return s&&i.error&&(s=typeof i.error.message=="string"&&typeof i.error.code=="string",s&&(o=new J(i.error.code,i.error.message))),s?new Zg(e,n,i.state,o):($t("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class uh{constructor(e,n,r){this.targetId=e,this.state=n,this.error=r}static Es(e,n){const r=JSON.parse(n);let i,o=typeof r=="object"&&["not-current","current","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object");return o&&r.error&&(o=typeof r.error.message=="string"&&typeof r.error.code=="string",o&&(i=new J(r.error.code,r.error.message))),o?new uh(e,r.state,i):($t("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(n)),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class ev{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Es(e,n){const r=JSON.parse(n);let i=typeof r=="object"&&r.activeTargetIds instanceof Array,o=NI();for(let s=0;i&&s<r.activeTargetIds.length;++s)i=iF(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new ev(e,o):($t("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(n)),null)}}class qI{constructor(e,n){this.clientId=e,this.onlineState=n}static Es(e){const n=JSON.parse(e);return typeof n=="object"&&["Unknown","Online","Offline"].indexOf(n.onlineState)!==-1&&typeof n.clientId=="string"?new qI(n.clientId,n.onlineState):($t("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class g_{constructor(){this.activeTargetIds=NI()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Yw{constructor(e,n,r,i,o){this.window=e,this.oi=n,this.persistenceKey=r,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new it(Ae),this.started=!1,this.ys=[];const s=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=o,this.ws=RN(this.persistenceKey,this.Vs),this.Ss=function(u){return"firestore_sequence_number_".concat(u)}(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new g_),this.bs=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.Ds=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Cs=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.vs=function(u){return"firestore_online_state_".concat(u)}(this.persistenceKey),this.Fs=function(u){return"firestore_bundle_loaded_v2_".concat(u)}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const r of e){if(r===this.Vs)continue;const i=this.getItem(RN(this.persistenceKey,r));if(i){const o=ev.Es(r,i);o&&(this.ps=this.ps.insert(o.clientId,o))}}this.Ms();const n=this.storage.getItem(this.vs);if(n){const r=this.xs(n);r&&this.Os(r)}for(const r of this.ys)this.gs(r);this.ys=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let n=!1;return this.ps.forEach((r,i)=>{i.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,n,r){this.Bs(e,n,r),this.Ls(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(Kw(this.persistenceKey,e));if(r){const i=uh.Es(e,r);i&&(n=i.state)}}return this.ks.As(e),this.Ms(),n}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Kw(this.persistenceKey,e))}updateQueryState(e,n,r){this.qs(e,n,r)}handleUserChange(e,n,r){n.forEach(i=>{this.Ls(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return Z("SharedClientState","READ",e,n),n}setItem(e,n){Z("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){Z("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const n=e;if(n.storageArea===this.storage){if(Z("SharedClientState","EVENT",n.key,n.newValue),n.key===this.ws)return void $t("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable(async()=>{if(this.started){if(n.key!==null){if(this.bs.test(n.key)){if(n.newValue==null){const r=this.$s(n.key);return this.Us(r,null)}{const r=this.Ws(n.key,n.newValue);if(r)return this.Us(r.clientId,r)}}else if(this.Ds.test(n.key)){if(n.newValue!==null){const r=this.Gs(n.key,n.newValue);if(r)return this.zs(r)}}else if(this.Cs.test(n.key)){if(n.newValue!==null){const r=this.js(n.key,n.newValue);if(r)return this.Hs(r)}}else if(n.key===this.vs){if(n.newValue!==null){const r=this.xs(n.newValue);if(r)return this.Os(r)}}else if(n.key===this.Ss){const r=function(o){let s=gr._e;if(o!=null)try{const a=JSON.parse(o);we(typeof a=="number"),s=a}catch(a){$t("SharedClientState","Failed to read sequence number from WebStorage",a)}return s}(n.newValue);r!==gr._e&&this.sequenceNumberHandler(r)}else if(n.key===this.Fs){const r=this.Js(n.newValue);await Promise.all(r.map(i=>this.syncEngine.Ys(i)))}}}else this.ys.push(n)})}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,n,r){const i=new Zg(this.currentUser,e,n,r),o=NN(this.persistenceKey,this.currentUser,e);this.setItem(o,i.ds())}Ls(e){const n=NN(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Qs(e){const n={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(n))}qs(e,n,r){const i=Kw(this.persistenceKey,e),o=new uh(e,n,r);this.setItem(i,o.ds())}Ks(e){const n=JSON.stringify(Array.from(e));this.setItem(this.Fs,n)}$s(e){const n=this.bs.exec(e);return n?n[1]:null}Ws(e,n){const r=this.$s(e);return ev.Es(r,n)}Gs(e,n){const r=this.Ds.exec(e),i=Number(r[1]),o=r[2]!==void 0?r[2]:null;return Zg.Es(new nn(o),i,n)}js(e,n){const r=this.Cs.exec(e),i=Number(r[1]);return uh.Es(i,n)}xs(e){return qI.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);Z("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,n){const r=n?this.ps.insert(e,n):this.ps.remove(e),i=this.Ns(this.ps),o=this.Ns(r),s=[],a=[];return o.forEach(u=>{i.has(u)||s.push(u)}),i.forEach(u=>{o.has(u)||a.push(u)}),this.syncEngine.eo(s,a).then(()=>{this.ps=r})}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let n=NI();return e.forEach((r,i)=>{n=n.unionWith(i.activeTargetIds)}),n}}class y4{constructor(){this.no=new g_,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,n,r){this.ro[e]=n}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new g_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ute{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PN{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Z("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){Z("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let tm=null;function Xw(){return tm===null?tm=function(){return 268435456+Math.round(2147483648*Math.random())}():tm++,"0x"+tm.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zte={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wte{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="WebChannelConnection";class qte extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.fo=r+"://"+n.host,this.po="projects/".concat(i,"/databases/").concat(o),this.yo=this.databaseId.database==="(default)"?"project_id=".concat(i):"project_id=".concat(i,"&database_id=").concat(o)}get wo(){return!1}So(n,r,i,o,s){const a=Xw(),u=this.bo(n,r.toUriEncodedString());Z("RestConnection","Sending RPC '".concat(n,"' ").concat(a,":"),u,i);const l={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(l,o,s),this.Co(n,u,l,i).then(c=>(Z("RestConnection","Received RPC '".concat(n,"' ").concat(a,": "),c),c),c=>{throw Ii("RestConnection","RPC '".concat(n,"' ").concat(a," failed with error: "),c,"url: ",u,"request:",i),c})}vo(n,r,i,o,s,a){return this.So(n,r,i,o,s)}Do(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+jc}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}bo(n,r){const i=zte[n];return"".concat(this.fo,"/v1/").concat(r,":").concat(i)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,n,r,i){const o=Xw();return new Promise((s,a)=>{const u=new jZ;u.setWithCredentials(!0),u.listenOnce($Z.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case qw.NO_ERROR:const c=u.getResponseJson();Z(Pn,"XHR for RPC '".concat(e,"' ").concat(o," received:"),JSON.stringify(c)),s(c);break;case qw.TIMEOUT:Z(Pn,"RPC '".concat(e,"' ").concat(o," timed out")),a(new J(z.DEADLINE_EXCEEDED,"Request time out"));break;case qw.HTTP_ERROR:const d=u.getStatus();if(Z(Pn,"RPC '".concat(e,"' ").concat(o," failed with status:"),d,"response text:",u.getResponseText()),d>0){let h=u.getResponseJson();Array.isArray(h)&&(h=h[0]);const f=h==null?void 0:h.error;if(f&&f.status&&f.message){const m=function(y){const g=y.toLowerCase().replace(/_/g,"-");return Object.values(z).indexOf(g)>=0?g:z.UNKNOWN}(f.status);a(new J(m,f.message))}else a(new J(z.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new J(z.UNAVAILABLE,"Connection failed."));break;default:le()}}finally{Z(Pn,"RPC '".concat(e,"' ").concat(o," completed."))}});const l=JSON.stringify(i);Z(Pn,"RPC '".concat(e,"' ").concat(o," sending request:"),i),u.send(n,"POST",l,r,15)})}Fo(e,n,r){const i=Xw(),o=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=VZ(),a=FZ(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Do(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=o.join("");Z(Pn,"Creating RPC '".concat(e,"' stream ").concat(i,": ").concat(c),u);const d=s.createWebChannel(c,u);let h=!1,f=!1;const m=new Wte({lo:y=>{f?Z(Pn,"Not sending because RPC '".concat(e,"' stream ").concat(i," is closed:"),y):(h||(Z(Pn,"Opening RPC '".concat(e,"' stream ").concat(i," transport.")),d.open(),h=!0),Z(Pn,"RPC '".concat(e,"' stream ").concat(i," sending:"),y),d.send(y))},ho:()=>d.close()}),v=(y,g,w)=>{y.listen(g,b=>{try{w(b)}catch(x){setTimeout(()=>{throw x},0)}})};return v(d,Xp.EventType.OPEN,()=>{f||Z(Pn,"RPC '".concat(e,"' stream ").concat(i," transport opened."))}),v(d,Xp.EventType.CLOSE,()=>{f||(f=!0,Z(Pn,"RPC '".concat(e,"' stream ").concat(i," transport closed")),m.Vo())}),v(d,Xp.EventType.ERROR,y=>{f||(f=!0,Ii(Pn,"RPC '".concat(e,"' stream ").concat(i," transport errored:"),y),m.Vo(new J(z.UNAVAILABLE,"The operation could not be completed")))}),v(d,Xp.EventType.MESSAGE,y=>{var g;if(!f){const w=y.data[0];we(!!w);const b=w,x=b.error||((g=b[0])===null||g===void 0?void 0:g.error);if(x){Z(Pn,"RPC '".concat(e,"' stream ").concat(i," received error:"),x);const _=x.status;let E=function(S){const N=jt[S];if(N!==void 0)return VF(N)}(_),I=x.message;E===void 0&&(E=z.INTERNAL,I="Unknown error status: "+_+" with message "+x.message),f=!0,m.Vo(new J(E,I)),d.close()}else Z(Pn,"RPC '".concat(e,"' stream ").concat(i," received:"),w),m.mo(w)}}),v(a,BZ.STAT_EVENT,y=>{y.stat===$R.PROXY?Z(Pn,"RPC '".concat(e,"' stream ").concat(i," detected buffering proxy")):y.stat===$R.NOPROXY&&Z(Pn,"RPC '".concat(e,"' stream ").concat(i," detected no buffering proxy"))}),setTimeout(()=>{m.Ro()},0),m}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(){return typeof window<"u"?window:null}function $m(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tp(t){return new Zee(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HI{constructor(e,n,r=1e3,i=1.5,o=6e4){this.oi=e,this.timerId=n,this.Mo=r,this.xo=i,this.Oo=o,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const n=Math.floor(this.No+this.Qo()),r=Math.max(0,Date.now()-this.Lo),i=Math.max(0,n-r);i>0&&Z("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.No," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b4{constructor(e,n,r,i,o,s,a,u){this.oi=e,this.$o=r,this.Uo=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new HI(e,n)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,n){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():n&&n.code===z.RESOURCE_EXHAUSTED?($t(n.toString()),$t("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):n&&n.code===z.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(n)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),n=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Wo===n&&this.o_(r,i)},r=>{e(()=>{const i=new J(z.UNKNOWN,"Fetching auth token failed: "+r.message);return this.__(i)})})}o_(e,n){const r=this.s_(this.Wo);this.stream=this.a_(e,n),this.stream.Po(()=>{r(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(i=>{r(()=>this.__(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return Z("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}s_(e){return n=>{this.oi.enqueueAndForget(()=>this.Wo===e?n():(Z("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hte extends b4{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}a_(e,n){return this.connection.Fo("Listen",e,n)}onMessage(e){this.jo.reset();const n=nte(this.serializer,e),r=function(o){if(!("targetChange"in o))return be.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?be.min():s.readTime?Bt(s.readTime):be.min()}(e);return this.listener.u_(n,r)}c_(e){const n={};n.database=d_(this.serializer),n.addTarget=function(o,s){let a;const u=s.target;if(a=Hg(u)?{documents:GF(o,u)}:{query:KF(o,u).ut},a.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){a.resumeToken=jF(o,s.resumeToken);const l=l_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}else if(s.snapshotVersion.compareTo(be.min())>0){a.readTime=fc(o,s.snapshotVersion.toTimestamp());const l=l_(o,s.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);const r=ite(this.serializer,e);r&&(n.labels=r),this.t_(n)}l_(e){const n={};n.database=d_(this.serializer),n.removeTarget=e,this.t_(n)}}class Gte extends b4{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,n){return this.connection.Fo("Write",e,n)}onMessage(e){if(we(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const n=rte(e.writeResults,e.commitTime),r=Bt(e.commitTime);return this.listener.T_(r,n)}return we(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=d_(this.serializer),this.t_(e)}I_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>uf(this.serializer,r))};this.t_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kte extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new J(z.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.So(e,c_(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new J(z.UNKNOWN,o.toString())})}vo(e,n,r,i,o){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,a])=>this.connection.vo(e,c_(n,r),i,s,a,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===z.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new J(z.UNKNOWN,s.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class Yte{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const n="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.g_?($t(n),this.g_=!1):Z("OnlineStateTracker",n)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xte{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=o,this.M_.io(s=>{r.enqueueAndForget(async()=>{oa(this)&&(Z("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=ae(u);l.v_.add(4),await qc(l),l.x_.set("Unknown"),l.v_.delete(4),await np(l)}(this))})}),this.x_=new Yte(r,i)}}async function np(t){if(oa(t))for(const e of t.F_)await e(!0)}async function qc(t){for(const e of t.F_)await e(!1)}function By(t,e){const n=ae(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),YI(n)?KI(n):Gc(n).Jo()&&GI(n,e))}function lf(t,e){const n=ae(t),r=Gc(n);n.C_.delete(e),r.Jo()&&x4(n,e),n.C_.size===0&&(r.Jo()?r.Xo():oa(n)&&n.x_.set("Unknown"))}function GI(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(be.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Gc(t).c_(e)}function x4(t,e){t.O_.Oe(e),Gc(t).l_(e)}function KI(t){t.O_=new Yee({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),Gc(t).start(),t.x_.p_()}function YI(t){return oa(t)&&!Gc(t).Ho()&&t.C_.size>0}function oa(t){return ae(t).v_.size===0}function _4(t){t.O_=void 0}async function Qte(t){t.C_.forEach((e,n)=>{GI(t,e)})}async function Jte(t,e){_4(t),YI(t)?(t.x_.S_(e),KI(t)):t.x_.set("Unknown")}async function Zte(t,e,n){if(t.x_.set("Online"),e instanceof BF&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const a of o.targetIds)i.C_.has(a)&&(await i.remoteSyncer.rejectListen(a,s),i.C_.delete(a),i.O_.removeTarget(a))}(t,e)}catch(r){Z("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await tv(t,r)}else if(e instanceof Fm?t.O_.$e(e):e instanceof $F?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(be.min()))try{const r=await f4(t.localStore);n.compareTo(r)>=0&&await function(o,s){const a=o.O_.it(s);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=o.C_.get(l);c&&o.C_.set(l,c.withResumeToken(u.resumeToken,s))}}),a.targetMismatches.forEach((u,l)=>{const c=o.C_.get(u);if(!c)return;o.C_.set(u,c.withResumeToken(Zt.EMPTY_BYTE_STRING,c.snapshotVersion)),x4(o,u);const d=new _o(c.target,u,l,c.sequenceNumber);GI(o,d)}),o.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){Z("RemoteStore","Failed to raise snapshot:",r),await tv(t,r)}}async function tv(t,e,n){if(!ra(e))throw e;t.v_.add(1),await qc(t),t.x_.set("Offline"),n||(n=()=>f4(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Z("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await np(t)})}function E4(t,e){return e().catch(n=>tv(t,n,e))}async function Hc(t){const e=ae(t),n=qs(e);let r=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;ene(e);)try{const i=await $te(e.localStore,r);if(i===null){e.D_.length===0&&n.Xo();break}r=i.batchId,tne(e,i)}catch(i){await tv(e,i)}I4(e)&&T4(e)}function ene(t){return oa(t)&&t.D_.length<10}function tne(t,e){t.D_.push(e);const n=qs(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function I4(t){return oa(t)&&!qs(t).Ho()&&t.D_.length>0}function T4(t){qs(t).start()}async function nne(t){qs(t).d_()}async function rne(t){const e=qs(t);for(const n of t.D_)e.I_(n.mutations)}async function ine(t,e,n){const r=t.D_.shift(),i=OI.from(r,e,n);await E4(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Hc(t)}async function one(t,e){e&&qs(t).P_&&await async function(r,i){if(function(s){return MF(s)&&s!==z.ABORTED}(i.code)){const o=r.D_.shift();qs(r).Zo(),await E4(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Hc(r)}}(t,e),I4(t)&&T4(t)}async function DN(t,e){const n=ae(t);n.asyncQueue.verifyOperationInProgress(),Z("RemoteStore","RemoteStore received new credentials");const r=oa(n);n.v_.add(3),await qc(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await np(n)}async function v_(t,e){const n=ae(t);e?(n.v_.delete(2),await np(n)):e||(n.v_.add(2),await qc(n),n.x_.set("Unknown"))}function Gc(t){return t.N_||(t.N_=function(n,r,i){const o=ae(n);return o.R_(),new Hte(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:Qte.bind(null,t),To:Jte.bind(null,t),u_:Zte.bind(null,t)}),t.F_.push(async e=>{e?(t.N_.Zo(),YI(t)?KI(t):t.x_.set("Unknown")):(await t.N_.stop(),_4(t))})),t.N_}function qs(t){return t.B_||(t.B_=function(n,r,i){const o=ae(n);return o.R_(),new Gte(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{Po:nne.bind(null,t),To:one.bind(null,t),E_:rne.bind(null,t),T_:ine.bind(null,t)}),t.F_.push(async e=>{e?(t.B_.Zo(),await Hc(t)):(await t.B_.stop(),t.D_.length>0&&(Z("RemoteStore","Stopping write stream with ".concat(t.D_.length," pending writes")),t.D_=[]))})),t.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new sn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,a=new XI(e,n,s,i,o);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new J(z.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Kc(t,e){if($t("AsyncQueue","".concat(e,": ").concat(t)),ra(t))return new J(z.UNAVAILABLE,"".concat(e,": ").concat(t));throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zl{constructor(e){this.comparator=e?(n,r)=>e(n,r)||oe.comparator(n.key,r.key):(n,r)=>oe.comparator(n.key,r.key),this.keyedMap=Fd(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new zl(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof zl)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const r=new zl;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ON{constructor(){this.L_=new it(oe.comparator)}track(e){const n=e.doc.key,r=this.L_.get(n);r?e.type!==0&&r.type===3?this.L_=this.L_.insert(n,e):e.type===3&&r.type!==1?this.L_=this.L_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.L_=this.L_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.L_=this.L_.remove(n):e.type===1&&r.type===2?this.L_=this.L_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.L_=this.L_.insert(n,{type:2,doc:e.doc}):le():this.L_=this.L_.insert(n,e)}k_(){const e=[];return this.L_.inorderTraversal((n,r)=>{e.push(r)}),e}}class gc{constructor(e,n,r,i,o,s,a,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(a=>{s.push({type:0,doc:a})}),new gc(e,n,zl.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Xf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sne{constructor(){this.q_=void 0,this.Q_=[]}}class ane{constructor(){this.queries=new ia(e=>xF(e),Xf),this.onlineState="Unknown",this.K_=new Set}}async function QI(t,e){const n=ae(t),r=e.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new sne),i)try{o.q_=await n.onListen(r)}catch(s){const a=Kc(s,"Initialization of query '".concat(al(e.query),"' failed"));return void e.onError(a)}n.queries.set(r,o),o.Q_.push(e),e.U_(n.onlineState),o.q_&&e.W_(o.q_)&&ZI(n)}async function JI(t,e){const n=ae(t),r=e.query;let i=!1;const o=n.queries.get(r);if(o){const s=o.Q_.indexOf(e);s>=0&&(o.Q_.splice(s,1),i=o.Q_.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function une(t,e){const n=ae(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const a of s.Q_)a.W_(i)&&(r=!0);s.q_=i}}r&&ZI(n)}function lne(t,e,n){const r=ae(t),i=r.queries.get(e);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(e)}function ZI(t){t.K_.forEach(e=>{e.next()})}class eT{constructor(e,n,r){this.query=e,this.G_=n,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=r||{}}W_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new gc(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.z_?this.H_(e)&&(this.G_.next(e),n=!0):this.J_(e,this.onlineState)&&(this.Y_(e),n=!0),this.j_=e,n}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let n=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),n=!0),n}J_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.Z_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const n=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Y_(e){e=gc.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cne{constructor(e,n){this.X_=e,this.byteLength=n}ea(){return"metadata"in this.X_}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LN{constructor(e){this.serializer=e}Ps(e){return Qi(this.serializer,e)}Is(e){return e.metadata.exists?HF(this.serializer,e.document,!1):ut.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return Bt(e)}}class dne{constructor(e,n,r){this.ta=e,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=C4(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++n;const r=Oe.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ra(e){const n=new Map,r=new LN(this.serializer);for(const i of e)if(i.metadata.queries){const o=r.Ps(i.metadata.name);for(const s of i.metadata.queries){const a=(n.get(s)||Re()).add(o);n.set(s,a)}}return n}async complete(){const e=await Bte(this.localStore,new LN(this.serializer),this.documents,this.ta.id),n=this.ra(this.documents);for(const r of this.queries)await jte(this.localStore,r,n.get(r.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function C4(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k4{constructor(e){this.key=e}}class S4{constructor(e){this.key=e}}class A4{constructor(e,n){this.query=e,this.oa=n,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Re(),this.mutatedKeys=Re(),this.ua=EF(e),this.ca=new zl(this.ua)}get la(){return this.oa}ha(e,n){const r=n?n.Pa:new ON,i=n?n.ca:this.ca;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((c,d)=>{const h=i.get(c),f=Qf(this.query,d)?d:null,m=!!h&&this.mutatedKeys.has(h.key),v=!!f&&(f.hasLocalMutations||this.mutatedKeys.has(f.key)&&f.hasCommittedMutations);let y=!1;h&&f?h.data.isEqual(f.data)?m!==v&&(r.track({type:3,doc:f}),y=!0):this.Ia(h,f)||(r.track({type:2,doc:f}),y=!0,(u&&this.ua(f,u)>0||l&&this.ua(f,l)<0)&&(a=!0)):!h&&f?(r.track({type:0,doc:f}),y=!0):h&&!f&&(r.track({type:1,doc:h}),y=!0,(u||l)&&(a=!0)),y&&(f?(s=s.add(f),o=v?o.add(c):o.delete(c)):(s=s.delete(c),o=o.delete(c)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const c=this.query.limitType==="F"?s.last():s.first();s=s.delete(c.key),o=o.delete(c.key),r.track({type:1,doc:c})}return{ca:s,Pa:r,Xi:a,mutatedKeys:o}}Ia(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const o=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const s=e.Pa.k_();s.sort((c,d)=>function(f,m){const v=y=>{switch(y){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return le()}};return v(f)-v(m)}(c.type,d.type)||this.ua(c.doc,d.doc)),this.Ta(r),i=i!=null&&i;const a=n&&!i?this.Ea():[],u=this.aa.size===0&&this.current&&!i?1:0,l=u!==this._a;return this._a=u,s.length!==0||l?{snapshot:new gc(this.query,e.ca,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new ON,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(n=>this.oa=this.oa.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.oa=this.oa.delete(n)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=Re(),this.ca.forEach(r=>{this.Aa(r.key)&&(this.aa=this.aa.add(r.key))});const n=[];return e.forEach(r=>{this.aa.has(r)||n.push(new S4(r))}),this.aa.forEach(r=>{e.has(r)||n.push(new k4(r))}),n}Ra(e){this.oa=e.hs,this.aa=Re();const n=this.ha(e.documents);return this.applyChanges(n,!0)}Va(){return gc.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class hne{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class fne{constructor(e){this.key=e,this.ma=!1}}class pne{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new ia(a=>xF(a),Xf),this.pa=new Map,this.ya=new Set,this.wa=new it(oe.comparator),this.Sa=new Map,this.ba=new jI,this.Da={},this.Ca=new Map,this.va=xu.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function mne(t,e){const n=oT(t);let r,i;const o=n.ga.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{const s=await pc(n.localStore,Qn(e)),a=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=await tT(n,e,r,a==="current",s.resumeToken),n.isPrimaryClient&&By(n.remoteStore,s)}return i}async function tT(t,e,n,r,i){t.Ma=(d,h,f)=>async function(v,y,g,w){let b=y.view.ha(g);b.Xi&&(b=await Jg(v.localStore,y.query,!1).then(({documents:I})=>y.view.ha(I,b)));const x=w&&w.targetChanges.get(y.targetId),_=w&&w.targetMismatches.get(y.targetId)!=null,E=y.view.applyChanges(b,v.isPrimaryClient,x,_);return y_(v,y.targetId,E.da),E.snapshot}(t,d,h,f);const o=await Jg(t.localStore,e,!0),s=new A4(e,o.hs),a=s.ha(o.documents),u=ep.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(a,t.isPrimaryClient,u);y_(t,n,l.da);const c=new hne(e,n,s);return t.ga.set(e,c),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),l.snapshot}async function gne(t,e){const n=ae(t),r=n.ga.get(e),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter(o=>!Xf(o,e))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await mc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),lf(n.remoteStore,r.targetId),vc(n,r.targetId)}).catch(na)):(vc(n,r.targetId),await mc(n.localStore,r.targetId,!0))}async function vne(t,e,n){const r=sT(t);try{const i=await function(s,a){const u=ae(s),l=vt.now(),c=a.reduce((f,m)=>f.add(m.key),Re());let d,h;return u.persistence.runTransaction("Locally write mutations","readwrite",f=>{let m=yr(),v=Re();return u.os.getEntries(f,c).next(y=>{m=y,m.forEach((g,w)=>{w.isValidDocument()||(v=v.add(g))})}).next(()=>u.localDocuments.getOverlayedDocuments(f,m)).next(y=>{d=y;const g=[];for(const w of a){const b=Hee(w,d.get(w.key).overlayedDocument);b!=null&&g.push(new Go(w.key,b,hF(b.value.mapValue),gt.exists(!0)))}return u.mutationQueue.addMutationBatch(f,l,g,a)}).next(y=>{h=y;const g=y.applyToLocalDocumentSet(d,v);return u.documentOverlayCache.saveOverlays(f,y.batchId,g)})}).then(()=>({batchId:h.batchId,changes:TF(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,a,u){let l=s.Da[s.currentUser.toKey()];l||(l=new it(Ae)),l=l.insert(a,u),s.Da[s.currentUser.toKey()]=l}(r,i.batchId,n),await Ko(r,i.changes),await Hc(r.remoteStore)}catch(i){const o=Kc(i,"Failed to persist write");n.reject(o)}}async function R4(t,e){const n=ae(t);try{const r=await Fte(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.Sa.get(o);s&&(we(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.ma=!0:i.modifiedDocuments.size>0?we(s.ma):i.removedDocuments.size>0&&(we(s.ma),s.ma=!1))}),await Ko(n,r,e)}catch(r){await na(r)}}function MN(t,e,n){const r=ae(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ga.forEach((o,s)=>{const a=s.view.U_(e);a.snapshot&&i.push(a.snapshot)}),function(s,a){const u=ae(s);u.onlineState=a;let l=!1;u.queries.forEach((c,d)=>{for(const h of d.Q_)h.U_(a)&&(l=!0)}),l&&ZI(u)}(r.eventManager,e),i.length&&r.fa.u_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function yne(t,e,n){const r=ae(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Sa.get(e),o=i&&i.key;if(o){let s=new it(oe.comparator);s=s.insert(o,ut.newNoDocument(o,be.min()));const a=Re().add(o),u=new Zf(be.min(),new Map,new it(Ae),s,a);await R4(r,u),r.wa=r.wa.remove(o),r.Sa.delete(e),iT(r)}else await mc(r.localStore,e,!1).then(()=>vc(r,e,n)).catch(na)}async function wne(t,e){const n=ae(t),r=e.batch.batchId;try{const i=await Vte(n.localStore,e);rT(n,r,null),nT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ko(n,i)}catch(i){await na(i)}}async function bne(t,e,n){const r=ae(t);try{const i=await function(s,a){const u=ae(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(d=>(we(d!==null),c=d.keys(),u.mutationQueue.removeMutationBatch(l,d))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,e);rT(r,e,n),nT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ko(r,i)}catch(i){await na(i)}}async function xne(t,e){const n=ae(t);oa(n.remoteStore)||Z("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=await function(s){const a=ae(s);return a.persistence.runTransaction("Get highest unacknowledged batch id","readonly",u=>a.mutationQueue.getHighestUnacknowledgedBatchId(u))}(n.localStore);if(r===-1)return void e.resolve();const i=n.Ca.get(r)||[];i.push(e),n.Ca.set(r,i)}catch(r){const i=Kc(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}function nT(t,e){(t.Ca.get(e)||[]).forEach(n=>{n.resolve()}),t.Ca.delete(e)}function rT(t,e,n){const r=ae(t);let i=r.Da[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Da[r.currentUser.toKey()]=i}}function vc(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.pa.get(e))t.ga.delete(r),n&&t.fa.xa(r,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach(r=>{t.ba.containsKey(r)||N4(t,r)})}function N4(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);n!==null&&(lf(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),iT(t))}function y_(t,e,n){for(const r of n)r instanceof k4?(t.ba.addReference(r.key,e),_ne(t,r)):r instanceof S4?(Z("SyncEngine","Document no longer in limbo: "+r.key),t.ba.removeReference(r.key,e),t.ba.containsKey(r.key)||N4(t,r.key)):le()}function _ne(t,e){const n=e.key,r=n.path.canonicalString();t.wa.get(n)||t.ya.has(r)||(Z("SyncEngine","New document in limbo: "+n),t.ya.add(r),iT(t))}function iT(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new oe(Oe.fromString(e)),r=t.va.next();t.Sa.set(r,new fne(n)),t.wa=t.wa.insert(n,r),By(t.remoteStore,new _o(Qn(Uc(n.path)),r,"TargetPurposeLimboResolution",gr._e))}}async function Ko(t,e,n){const r=ae(t),i=[],o=[],s=[];r.ga.isEmpty()||(r.ga.forEach((a,u)=>{s.push(r.Ma(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(u.targetId,l!=null&&l.fromCache?"not-current":"current"),l){i.push(l);const c=WI.Ki(u.targetId,l);o.push(c)}}))}),await Promise.all(s),r.fa.u_(i),await async function(u,l){const c=ae(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>$.forEach(l,h=>$.forEach(h.qi,f=>c.persistence.referenceDelegate.addReference(d,h.targetId,f)).next(()=>$.forEach(h.Qi,f=>c.persistence.referenceDelegate.removeReference(d,h.targetId,f)))))}catch(d){if(!ra(d))throw d;Z("LocalStore","Failed to update sequence numbers: "+d)}for(const d of l){const h=d.targetId;if(!d.fromCache){const f=c.ns.get(h),m=f.snapshotVersion,v=f.withLastLimboFreeSnapshotVersion(m);c.ns=c.ns.insert(h,v)}}}(r.localStore,o))}async function Ene(t,e){const n=ae(t);if(!n.currentUser.isEqual(e)){Z("SyncEngine","User change. New user:",e.toKey());const r=await h4(n.localStore,e);n.currentUser=e,function(o,s){o.Ca.forEach(a=>{a.forEach(u=>{u.reject(new J(z.CANCELLED,s))})}),o.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ko(n,r.us)}}function Ine(t,e){const n=ae(t),r=n.Sa.get(e);if(r&&r.ma)return Re().add(r.key);{let i=Re();const o=n.pa.get(e);if(!o)return i;for(const s of o){const a=n.ga.get(s);i=i.unionWith(a.view.la)}return i}}async function Tne(t,e){const n=ae(t),r=await Jg(n.localStore,e.query,!0),i=e.view.Ra(r);return n.isPrimaryClient&&y_(n,e.targetId,i.da),i}async function Cne(t,e){const n=ae(t);return g4(n.localStore,e).then(r=>Ko(n,r))}async function kne(t,e,n,r){const i=ae(t),o=await function(a,u){const l=ae(a),c=ae(l.mutationQueue);return l.persistence.runTransaction("Lookup mutation documents","readonly",d=>c.vn(d,u).next(h=>h?l.localDocuments.getDocuments(d,h):$.resolve(null)))}(i.localStore,e);o!==null?(n==="pending"?await Hc(i.remoteStore):n==="acknowledged"||n==="rejected"?(rT(i,e,r||null),nT(i,e),function(a,u){ae(ae(a).mutationQueue).Mn(u)}(i.localStore,e)):le(),await Ko(i,o)):Z("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Sne(t,e){const n=ae(t);if(oT(n),sT(n),e===!0&&n.Fa!==!0){const r=n.sharedClientState.getAllActiveQueryTargets(),i=await VN(n,r.toArray());n.Fa=!0,await v_(n.remoteStore,!0);for(const o of i)By(n.remoteStore,o)}else if(e===!1&&n.Fa!==!1){const r=[];let i=Promise.resolve();n.pa.forEach((o,s)=>{n.sharedClientState.isLocalQueryTarget(s)?r.push(s):i=i.then(()=>(vc(n,s),mc(n.localStore,s,!0))),lf(n.remoteStore,s)}),await i,await VN(n,r),function(s){const a=ae(s);a.Sa.forEach((u,l)=>{lf(a.remoteStore,l)}),a.ba.mr(),a.Sa=new Map,a.wa=new it(oe.comparator)}(n),n.Fa=!1,await v_(n.remoteStore,!1)}}async function VN(t,e,n){const r=ae(t),i=[],o=[];for(const s of e){let a;const u=r.pa.get(s);if(u&&u.length!==0){a=await pc(r.localStore,Qn(u[0]));for(const l of u){const c=r.ga.get(l),d=await Tne(r,c);d.snapshot&&o.push(d.snapshot)}}else{const l=await m4(r.localStore,s);a=await pc(r.localStore,l),await tT(r,P4(l),s,!1,a.resumeToken)}i.push(a)}return r.fa.u_(o),i}function P4(t){return bF(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Ane(t){return function(n){return ae(ae(n).persistence).Li()}(ae(t).localStore)}async function Rne(t,e,n,r){const i=ae(t);if(i.Fa)return void Z("SyncEngine","Ignoring unexpected query state notification.");const o=i.pa.get(e);if(o&&o.length>0)switch(n){case"current":case"not-current":{const s=await g4(i.localStore,_F(o[0])),a=Zf.createSynthesizedRemoteEventForCurrentChange(e,n==="current",Zt.EMPTY_BYTE_STRING);await Ko(i,s,a);break}case"rejected":await mc(i.localStore,e,!0),vc(i,e,r);break;default:le()}}async function Nne(t,e,n){const r=oT(t);if(r.Fa){for(const i of e){if(r.pa.has(i)){Z("SyncEngine","Adding an already active target "+i);continue}const o=await m4(r.localStore,i),s=await pc(r.localStore,o);await tT(r,P4(o),s.targetId,!1,s.resumeToken),By(r.remoteStore,s)}for(const i of n)r.pa.has(i)&&await mc(r.localStore,i,!1).then(()=>{lf(r.remoteStore,i),vc(r,i)}).catch(na)}}function oT(t){const e=ae(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=R4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Ine.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=yne.bind(null,e),e.fa.u_=une.bind(null,e.eventManager),e.fa.xa=lne.bind(null,e.eventManager),e}function sT(t){const e=ae(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=wne.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=bne.bind(null,e),e}function Pne(t,e,n){const r=ae(t);(async function(o,s,a){try{const u=await s.getMetadata();if(await function(f,m){const v=ae(f),y=Bt(m.createTime);return v.persistence.runTransaction("hasNewerBundle","readonly",g=>v.$r.getBundleMetadata(g,m.id)).then(g=>!!g&&g.createTime.compareTo(y)>=0)}(o.localStore,u))return await s.close(),a._completeWith(function(f){return{taskState:"Success",documentsLoaded:f.totalDocuments,bytesLoaded:f.totalBytes,totalDocuments:f.totalDocuments,totalBytes:f.totalBytes}}(u)),Promise.resolve(new Set);a._updateProgress(C4(u));const l=new dne(u,o.localStore,s.serializer);let c=await s.Oa();for(;c;){const h=await l.na(c);h&&a._updateProgress(h),c=await s.Oa()}const d=await l.complete();return await Ko(o,d.sa,void 0),await function(f,m){const v=ae(f);return v.persistence.runTransaction("Save bundle","readwrite",y=>v.$r.saveBundleMetadata(y,m))}(o.localStore,u),a._completeWith(d.progress),Promise.resolve(d.ia)}catch(u){return Ii("SyncEngine","Loading bundle failed with ".concat(u)),a._failWith(u),Promise.resolve(new Set)}})(r,e,n).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}class w_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=tp(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return d4(this.persistence,new c4,e.initialUser,this.serializer)}createPersistence(e){return new l4($y.Hr,this.serializer)}createSharedClientState(e){return new y4}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class D4 extends w_{constructor(e,n,r){super(),this.Na=e,this.cacheSizeBytes=n,this.forceOwnership=r,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await sT(this.Na.syncEngine),await Hc(this.Na.remoteStore),await this.persistence.fi(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}createLocalStore(e){return d4(this.persistence,new c4,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,n){const r=this.persistence.referenceDelegate.garbageCollector;return new bte(r,e.asyncQueue,n)}createIndexBackfillerScheduler(e,n){const r=new ree(n,this.persistence);return new nee(e.asyncQueue,r)}createPersistence(e){const n=zI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?lr.withCacheSize(this.cacheSizeBytes):lr.DEFAULT;return new UI(this.synchronizeTabs,n,e.clientId,r,e.asyncQueue,w4(),$m(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new y4}}class Dne extends D4{constructor(e,n){super(e,n,!1),this.Na=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const n=this.Na.syncEngine;this.sharedClientState instanceof Yw&&(this.sharedClientState.syncEngine={Zs:kne.bind(null,n),Xs:Rne.bind(null,n),eo:Nne.bind(null,n),Li:Ane.bind(null,n),Ys:Cne.bind(null,n)},await this.sharedClientState.start()),await this.persistence.fi(async r=>{await Sne(this.Na.syncEngine,r),this.gcScheduler&&(r&&!this.gcScheduler.started?this.gcScheduler.start():r||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(r&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():r||this.indexBackfillerScheduler.stop())})}createSharedClientState(e){const n=w4();if(!Yw.D(n))throw new J(z.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=zI(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Yw(n,e.asyncQueue,r,e.clientId,e.initialUser)}}class aT{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>MN(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ene.bind(null,this.syncEngine),await v_(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new ane}()}createDatastore(e){const n=tp(e.databaseInfo.databaseId),r=function(o){return new qte(o)}(e.databaseInfo);return function(o,s,a,u){return new Kte(o,s,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,a){return new Xte(r,i,o,s,a)}(this.localStore,this.datastore,e.asyncQueue,n=>MN(this.syncEngine,n,0),function(){return PN.D()?new PN:new Ute}())}createSyncEngine(e,n){return function(i,o,s,a,u,l,c){const d=new pne(i,o,s,a,u,l);return c&&(d.Fa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e;await async function(r){const i=ae(r);Z("RemoteStore","RemoteStore shutting down."),i.v_.add(5),await qc(i),i.M_.shutdown(),i.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const r={value:t.slice(n,n+e),done:!1};return n+=e,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):$t("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class One{constructor(e,n){this.ka=e,this.serializer=n,this.metadata=new sn,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then(r=>{r&&r.ea()?this.metadata.resolve(r.X_.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(r==null?void 0:r.X_))))},r=>this.metadata.reject(r))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(e===null)return null;const n=this.qa.decode(e),r=Number(n);isNaN(r)&&this.$a("length string (".concat(n,") is not valid number"));const i=await this.Ua(r);return new cne(JSON.parse(i),e.length+r)}Wa(){return this.buffer.findIndex(e=>e===123)}async Ka(){for(;this.Wa()<0&&!await this.Ga(););if(this.buffer.length===0)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const n=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),n}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const n=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),n}$a(e){throw this.ka.cancel(),new Error("Invalid bundle format: ".concat(e))}async Ga(){const e=await this.ka.read();if(!e.done){const n=new Uint8Array(this.buffer.length+e.value.length);n.set(this.buffer),n.set(e.value,this.buffer.length),this.buffer=n}return e.done}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lne{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new J(z.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const n=await async function(i,o){const s=ae(i),a={documents:o.map(d=>af(s.serializer,d))},u=await s.vo("BatchGetDocuments",s.serializer.databaseId,Oe.emptyPath(),a,o.length),l=new Map;u.forEach(d=>{const h=tte(s.serializer,d);l.set(h.key.toString(),h)});const c=[];return o.forEach(d=>{const h=l.get(d.toString());we(!!h),c.push(h)}),c}(this.datastore,e);return n.forEach(r=>this.recordVersion(r)),n}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastTransactionError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Wc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(n=>{e.delete(n.key.toString())}),e.forEach((n,r)=>{const i=oe.fromPath(r);this.mutations.push(new PI(i,this.precondition(i)))}),await async function(r,i){const o=ae(r),s={writes:i.map(a=>uf(o.serializer,a))};await o.So("Commit",o.serializer.databaseId,Oe.emptyPath(),s)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw le();n=be.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!n.isEqual(r))throw new J(z.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?n.isEqual(be.min())?gt.exists(!1):gt.updateTime(n):gt.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(be.min()))throw new J(z.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return gt.updateTime(n)}return gt.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mne{constructor(e,n,r,i,o){this.asyncQueue=e,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=o,this.za=r.maxAttempts,this.jo=new HI(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo(async()=>{const e=new Lne(this.datastore),n=this.Ja(e);n&&n.then(r=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(r)}).catch(i=>{this.Ya(i)}))}).catch(r=>{this.Ya(r)})})}Ja(e){try{const n=this.updateFunction(e);return!Kf(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ha(),Promise.resolve()))):this.deferred.reject(e)}Za(e){if(e.name==="FirebaseError"){const n=e.code;return n==="aborted"||n==="failed-precondition"||n==="already-exists"||!MF(n)}return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vne{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=nn.UNAUTHENTICATED,this.clientId=JV.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{Z("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(Z("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new J(z.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Kc(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Bm(t,e){t.asyncQueue.verifyOperationInProgress(),Z("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await h4(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function b_(t,e){t.asyncQueue.verifyOperationInProgress();const n=await uT(t);Z("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>DN(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>DN(e.remoteStore,i)),t._onlineComponents=e}function O4(t){return t.name==="FirebaseError"?t.code===z.FAILED_PRECONDITION||t.code===z.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function uT(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Z("FirestoreClient","Using user provided OfflineComponentProvider");try{await Bm(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!O4(n))throw n;Ii("Error using user provided cache. Falling back to memory cache: "+n),await Bm(t,new w_)}}else Z("FirestoreClient","Using default OfflineComponentProvider"),await Bm(t,new w_);return t._offlineComponents}async function Uy(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Z("FirestoreClient","Using user provided OnlineComponentProvider"),await b_(t,t._uninitializedComponentsProvider._online)):(Z("FirestoreClient","Using default OnlineComponentProvider"),await b_(t,new aT))),t._onlineComponents}function L4(t){return uT(t).then(e=>e.persistence)}function lT(t){return uT(t).then(e=>e.localStore)}function M4(t){return Uy(t).then(e=>e.remoteStore)}function cT(t){return Uy(t).then(e=>e.syncEngine)}function Fne(t){return Uy(t).then(e=>e.datastore)}async function yc(t){const e=await Uy(t),n=e.eventManager;return n.onListen=mne.bind(null,e.syncEngine),n.onUnlisten=gne.bind(null,e.syncEngine),n}function $ne(t){return t.asyncQueue.enqueue(async()=>{const e=await L4(t),n=await M4(t);return e.setNetworkEnabled(!0),function(i){const o=ae(i);return o.v_.delete(0),np(o)}(n)})}function Bne(t){return t.asyncQueue.enqueue(async()=>{const e=await L4(t),n=await M4(t);return e.setNetworkEnabled(!1),async function(i){const o=ae(i);o.v_.add(0),await qc(o),o.x_.set("Offline")}(n)})}function jne(t,e){const n=new sn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,o,s){try{const a=await function(l,c){const d=ae(l);return d.persistence.runTransaction("read document","readonly",h=>d.localDocuments.getDocument(h,c))}(i,o);a.isFoundDocument()?s.resolve(a):a.isNoDocument()?s.resolve(null):s.reject(new J(z.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(a){const u=Kc(a,"Failed to get document '".concat(o," from cache"));s.reject(u)}}(await lT(t),e,n)),n.promise}function V4(t,e,n={}){const r=new sn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new jy({next:h=>{s.enqueueAndForget(()=>JI(o,d));const f=h.docs.has(a);!f&&h.fromCache?l.reject(new J(z.UNAVAILABLE,"Failed to get document because the client is offline.")):f&&h.fromCache&&u&&u.source==="server"?l.reject(new J(z.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new eT(Uc(a.path),c,{includeMetadataChanges:!0,Z_:!0});return QI(o,d)}(await yc(t),t.asyncQueue,e,n,r)),r.promise}function Une(t,e){const n=new sn;return t.asyncQueue.enqueueAndForget(async()=>async function(i,o,s){try{const a=await Jg(i,o,!0),u=new A4(o,a.hs),l=u.ha(a.documents),c=u.applyChanges(l,!1);s.resolve(c.snapshot)}catch(a){const u=Kc(a,"Failed to execute query '".concat(o," against cache"));s.reject(u)}}(await lT(t),e,n)),n.promise}function F4(t,e,n={}){const r=new sn;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,a,u,l){const c=new jy({next:h=>{s.enqueueAndForget(()=>JI(o,d)),h.fromCache&&u.source==="server"?l.reject(new J(z.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(h)},error:h=>l.reject(h)}),d=new eT(a,c,{includeMetadataChanges:!0,Z_:!0});return QI(o,d)}(await yc(t),t.asyncQueue,e,n,r)),r.promise}function zne(t,e){const n=new jy(e);return t.asyncQueue.enqueueAndForget(async()=>function(i,o){ae(i).K_.add(o),o.next()}(await yc(t),n)),()=>{n.La(),t.asyncQueue.enqueueAndForget(async()=>function(i,o){ae(i).K_.delete(o)}(await yc(t),n))}}function Wne(t,e,n,r){const i=function(s,a){let u;return u=typeof s=="string"?FF().encode(s):s,function(c,d){return new One(c,d)}(function(c,d){if(c instanceof Uint8Array)return FN(c,d);if(c instanceof ArrayBuffer)return FN(new Uint8Array(c),d);if(c instanceof ReadableStream)return c.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(u),a)}(n,tp(e));t.asyncQueue.enqueueAndForget(async()=>{Pne(await cT(t),i,r)})}function qne(t,e){return t.asyncQueue.enqueue(async()=>function(r,i){const o=ae(r);return o.persistence.runTransaction("Get named query","readonly",s=>o.$r.getNamedQuery(s,i))}(await lT(t),e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $N=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dT(t,e,n){if(!n)throw new J(z.INVALID_ARGUMENT,"Function ".concat(t,"() cannot be called with an empty ").concat(e,"."))}function B4(t,e,n,r){if(e===!0&&r===!0)throw new J(z.INVALID_ARGUMENT,"".concat(t," and ").concat(n," cannot be used together."))}function BN(t){if(!oe.isDocumentKey(t))throw new J(z.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(t," has ").concat(t.length,"."))}function jN(t){if(oe.isDocumentKey(t))throw new J(z.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(t," has ").concat(t.length,"."))}function zy(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t="".concat(t.substring(0,20),"...")),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?"a custom ".concat(e," object"):"an object"}}return typeof t=="function"?"a function":le()}function je(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new J(z.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=zy(t);throw new J(z.INVALID_ARGUMENT,"Expected type '".concat(e.name,"', but it was: ").concat(n))}}return t}function j4(t,e){if(e<=0)throw new J(z.INVALID_ARGUMENT,"Function ".concat(t,"() requires a positive number, but it was: ").concat(e,"."))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new J(z.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new J(z.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}B4("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$4((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new J(z.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(o.timeoutSeconds," (must not be NaN)"));if(o.timeoutSeconds<5)throw new J(z.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(o.timeoutSeconds," (minimum allowed value is 5)"));if(o.timeoutSeconds>30)throw new J(z.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(o.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rp{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new UN({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new J(z.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new J(z.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new UN(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qZ;switch(r.type){case"firstParty":return new YZ(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new J(z.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=$N.get(n);r&&(Z("ComponentProvider","Removing Datastore"),$N.delete(n),r.terminate())}(this),Promise.resolve()}}function Hne(t,e,n,r={}){var i;const o=(t=je(t,rp))._getSettings(),s="".concat(e,":").concat(n);if(o.host!=="firestore.googleapis.com"&&o.host!==s&&Ii("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let a,u;if(typeof r.mockUserToken=="string")a=r.mockUserToken,u=nn.MOCK_USER;else{a=ML(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const l=r.mockUserToken.sub||r.mockUserToken.user_id;if(!l)throw new J(z.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new nn(l)}t._authCredentials=new HZ(new QV(a,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let er=class U4{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new U4(this.firestore,e,this._query)}},_t=class z4{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ds(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new z4(this.firestore,e,this._key)}},Ds=class W4 extends er{constructor(e,n,r){super(e,n,Uc(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new _t(this.firestore,null,new oe(e))}withConverter(e){return new W4(this.firestore,e,this._path)}};function Wy(t,e,...n){if(t=ye(t),dT("collection","path",e),t instanceof rp){const r=Oe.fromString(e,...n);return jN(r),new Ds(t,null,r)}{if(!(t instanceof _t||t instanceof Ds))throw new J(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return jN(r),new Ds(t.firestore,null,r)}}function Gne(t,e){if(t=je(t,rp),dT("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new J(z.INVALID_ARGUMENT,"Invalid collection ID '".concat(e,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new er(t,null,function(r){return new Ho(Oe.emptyPath(),r)}(e))}function nv(t,e,...n){if(t=ye(t),arguments.length===1&&(e=JV.newId()),dT("doc","path",e),t instanceof rp){const r=Oe.fromString(e,...n);return BN(r),new _t(t,null,new oe(r))}{if(!(t instanceof _t||t instanceof Ds))throw new J(z.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Oe.fromString(e,...n));return BN(r),new _t(t.firestore,t instanceof Ds?t.converter:null,new oe(r))}}function q4(t,e){return t=ye(t),e=ye(e),(t instanceof _t||t instanceof Ds)&&(e instanceof _t||e instanceof Ds)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function H4(t,e){return t=ye(t),e=ye(e),t instanceof er&&e instanceof er&&t.firestore===e.firestore&&Xf(t._query,e._query)&&t.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kne{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new HI(this,"async_queue_retry"),this._u=()=>{const n=$m();n&&Z("AsyncQueue","Visibility state changed to "+n.visibilityState),this.jo.Ko()};const e=$m();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const n=$m();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const n=new sn;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!ra(e))throw e;Z("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const n=this.Xa.then(()=>(this.iu=!0,e().catch(r=>{this.ru=r,this.iu=!1;const i=function(s){let a=s.message||"";return s.stack&&(a=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),a}(r);throw $t("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.iu=!1,r))));return this.Xa=n,n}enqueueAfterDelay(e,n,r){this.au(),this.ou.indexOf(e)>-1&&(n=0);const i=XI.createAndSchedule(this,e,n,r,o=>this.lu(o));return this.nu.push(i),i}au(){this.ru&&le()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const n of this.nu)if(n.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.nu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const n=this.nu.indexOf(e);this.nu.splice(n,1)}}function x_(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const o of r)if(o in i&&typeof i[o]=="function")return!0;return!1}(t,["next","error","complete"])}class Yne{constructor(){this._progressObserver={},this._taskCompletionResolver=new sn,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,r){this._progressObserver={next:e,error:n,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xne=-1;let Pt=class extends rp{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Kne}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||G4(this),this._firestoreClient.terminate()}};function mn(t){return t._firestoreClient||G4(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function G4(t){var e,n,r;const i=t._freezeSettings(),o=function(a,u,l,c){return new Iee(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,$4(c.experimentalLongPollingOptions),c.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Vne(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function Qne(t,e){Y4(t=je(t,Pt));const n=mn(t);if(n._uninitializedComponentsProvider)throw new J(z.FAILED_PRECONDITION,"SDK cache is already specified.");Ii("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=t._freezeSettings(),i=new aT;return K4(n,i,new D4(i,r.cacheSizeBytes,e==null?void 0:e.forceOwnership))}function Jne(t){Y4(t=je(t,Pt));const e=mn(t);if(e._uninitializedComponentsProvider)throw new J(z.FAILED_PRECONDITION,"SDK cache is already specified.");Ii("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),r=new aT;return K4(e,r,new Dne(r,n.cacheSizeBytes))}function K4(t,e,n){const r=new sn;return t.asyncQueue.enqueue(async()=>{try{await Bm(t,n),await b_(t,e),r.resolve()}catch(i){const o=i;if(!O4(o))throw o;Ii("Error enabling indexeddb cache. Falling back to memory cache: "+o),r.reject(o)}}).then(()=>r.promise)}function Zne(t){if(t._initialized&&!t._terminated)throw new J(z.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new sn;return t._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(r){if(!Jr.D())return Promise.resolve();const i=r+"main";await Jr.delete(i)}(zI(t._databaseId,t._persistenceKey)),e.resolve()}catch(n){e.reject(n)}}),e.promise}function ere(t){return function(n){const r=new sn;return n.asyncQueue.enqueueAndForget(async()=>xne(await cT(n),r)),r.promise}(mn(t=je(t,Pt)))}function tre(t){return $ne(mn(t=je(t,Pt)))}function nre(t){return Bne(mn(t=je(t,Pt)))}function rre(t,e){const n=mn(t=je(t,Pt)),r=new Yne;return Wne(n,t._databaseId,e,r),r}function ire(t,e){return qne(mn(t=je(t,Pt)),e).then(n=>n?new er(t,null,n.query):null)}function Y4(t){if(t._initialized||t._terminated)throw new J(z.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ro(Zt.fromBase64String(e))}catch(n){throw new J(z.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new ro(Zt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hs=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new J(z.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Fu=class{constructor(e){this._methodName=e}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qy{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new J(z.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new J(z.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ae(this._lat,e._lat)||Ae(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ore=/^__.*__$/;class sre{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Go(e,this.data,this.fieldMask,n,this.fieldTransforms):new zc(e,this.data,n,this.fieldTransforms)}}class X4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Go(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Q4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw le()}}class Hy{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Eu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Hy(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.mu(e),i}fu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.Au({path:r,Vu:!1});return i.Eu(),i}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return rv(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(Q4(this.du)&&ore.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class are{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||tp(e)}Su(e,n,r,i=!1){return new Hy({du:e,methodName:n,wu:r,path:mt.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $u(t){const e=t._freezeSettings(),n=tp(t._databaseId);return new are(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Gy(t,e,n,r,i,o={}){const s=t.Su(o.merge||o.mergeFields?2:0,e,n,i);yT("Data must be an object, but it was:",s,r);const a=e3(r,s);let u,l;if(o.merge)u=new vr(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){const c=[];for(const d of o.mergeFields){const h=__(e,d,n);if(!s.contains(h))throw new J(z.INVALID_ARGUMENT,"Field '".concat(h,"' is specified in your field mask but missing from your input data."));n3(c,h)||c.push(h)}u=new vr(c),l=s.fieldTransforms.filter(d=>u.covers(d.field))}else u=null,l=s.fieldTransforms;return new sre(new _n(a),u,l)}class ip extends Fu{_toFieldTransform(e){if(e.du!==2)throw e.du===1?e.pu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.pu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ip}}function J4(t,e,n){return new Hy({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class hT extends Fu{_toFieldTransform(e){return new Jf(e.path,new dc)}isEqual(e){return e instanceof hT}}class fT extends Fu{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=J4(this,e,!0),r=this.bu.map(o=>Bu(o,n)),i=new vu(r);return new Jf(e.path,i)}isEqual(e){return e instanceof fT&&Mh(this.bu,e.bu)}}class pT extends Fu{constructor(e,n){super(e),this.bu=n}_toFieldTransform(e){const n=J4(this,e,!0),r=this.bu.map(o=>Bu(o,n)),i=new yu(r);return new Jf(e.path,i)}isEqual(e){return e instanceof pT&&Mh(this.bu,e.bu)}}class mT extends Fu{constructor(e,n){super(e),this.Du=n}_toFieldTransform(e){const n=new hc(e.serializer,AF(e.serializer,this.Du));return new Jf(e.path,n)}isEqual(e){return e instanceof mT&&this.Du===e.Du}}function gT(t,e,n,r){const i=t.Su(1,e,n);yT("Data must be an object, but it was:",i,r);const o=[],s=_n.empty();Vu(r,(u,l)=>{const c=wT(e,u,n);l=ye(l);const d=i.fu(c);if(l instanceof ip)o.push(c);else{const h=Bu(l,d);h!=null&&(o.push(c),s.set(c,h))}});const a=new vr(o);return new X4(s,a,i.fieldTransforms)}function vT(t,e,n,r,i,o){const s=t.Su(1,e,n),a=[__(e,r,n)],u=[i];if(o.length%2!=0)throw new J(z.INVALID_ARGUMENT,"Function ".concat(e,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<o.length;h+=2)a.push(__(e,o[h])),u.push(o[h+1]);const l=[],c=_n.empty();for(let h=a.length-1;h>=0;--h)if(!n3(l,a[h])){const f=a[h];let m=u[h];m=ye(m);const v=s.fu(f);if(m instanceof ip)l.push(f);else{const y=Bu(m,v);y!=null&&(l.push(f),c.set(f,y))}}const d=new vr(l);return new X4(c,d,s.fieldTransforms)}function Z4(t,e,n,r=!1){return Bu(n,t.Su(r?4:3,e))}function Bu(t,e){if(t3(t=ye(t)))return yT("Unsupported field value:",e,t),e3(t,e);if(t instanceof Fu)return function(r,i){if(!Q4(i.du))throw i.pu("".concat(r._methodName,"() can only be used with update() and set()"));if(!i.path)throw i.pu("".concat(r._methodName,"() is not currently supported inside arrays"));const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const a of r){let u=Bu(a,i.gu(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=ye(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AF(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=vt.fromDate(r);return{timestampValue:fc(i.serializer,o)}}if(r instanceof vt){const o=new vt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:fc(i.serializer,o)}}if(r instanceof qy)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof ro)return{bytesValue:jF(i.serializer,r._byteString)};if(r instanceof _t){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.pu("Document reference is for database ".concat(s.projectId,"/").concat(s.database," but should be for database ").concat(o.projectId,"/").concat(o.database));return{referenceValue:VI(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.pu("Unsupported field value: ".concat(zy(r)))}(t,e)}function e3(t,e){const n={};return lF(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Vu(t,(r,i)=>{const o=Bu(i,e.Ru(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function t3(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof vt||t instanceof qy||t instanceof ro||t instanceof _t||t instanceof Fu)}function yT(t,e,n){if(!t3(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=zy(n);throw r==="an object"?e.pu(t+" a custom object"):e.pu(t+" "+r)}}function __(t,e,n){if((e=ye(e))instanceof Hs)return e._internalPath;if(typeof e=="string")return wT(t,e);throw rv("Field path arguments must be of type string or ",t,!1,void 0,n)}const ure=new RegExp("[~\\*/\\[\\]]");function wT(t,e,n){if(e.search(ure)>=0)throw rv("Invalid field path (".concat(e,"). Paths must not contain '~', '*', '/', '[', or ']'"),t,!1,void 0,n);try{return new Hs(...e.split("."))._internalPath}catch(r){throw rv("Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),t,!1,void 0,n)}}function rv(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let a="Function ".concat(e,"() called with invalid data");n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=" in field ".concat(r)),s&&(u+=" in document ".concat(i)),u+=")"),new J(z.INVALID_ARGUMENT,a+t+u)}function n3(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new _t(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new lre(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Ky("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class lre extends cf{data(){return super.data()}}function Ky(t,e){return typeof e=="string"?wT(t,e):e instanceof Hs?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new J(z.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class bT{}class op extends bT{}function os(t,e,...n){let r=[];e instanceof bT&&r.push(e),r=r.concat(n),function(o){const s=o.filter(u=>u instanceof xT).length,a=o.filter(u=>u instanceof Yy).length;if(s>1||s>0&&a>0)throw new J(z.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Yy extends op{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Yy(e,n,r)}_apply(e){const n=this._parse(e);return o3(e._query,n),new er(e.firestore,e.converter,u_(e._query,n))}_parse(e){const n=$u(e.firestore);return function(o,s,a,u,l,c,d){let h;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new J(z.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(c,"' queries on documentId()."));if(c==="in"||c==="not-in"){WN(d,c);const f=[];for(const m of d)f.push(zN(u,o,m));h={arrayValue:{values:f}}}else h=zN(u,o,d)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||WN(d,c),h=Z4(a,s,d,c==="in"||c==="not-in");return Le.create(l,c,h)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function cre(t,e,n){const r=e,i=Ky("where",t);return Yy._create(i,r,n)}class xT extends bT{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new xT(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:We.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,o){let s=i;const a=o.getFlattenedFilters();for(const u of a)o3(s,u),s=u_(s,u)}(e._query,n),new er(e.firestore,e.converter,u_(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _T extends op{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new _T(e,n)}_apply(e){const n=function(i,o,s){if(i.startAt!==null)throw new J(z.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new J(z.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new sf(o,s)}(e._query,this._field,this._direction);return new er(e.firestore,e.converter,function(i,o){const s=i.explicitOrderBy.concat([o]);return new Ho(i.path,i.collectionGroup,s,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function dre(t,e="asc"){const n=e,r=Ky("orderBy",t);return _T._create(r,n)}class Xy extends op{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Xy(e,n,r)}_apply(e){return new er(e.firestore,e.converter,Kg(e._query,this._limit,this._limitType))}}function hre(t){return j4("limit",t),Xy._create("limit",t,"F")}function fre(t){return j4("limitToLast",t),Xy._create("limitToLast",t,"L")}class Qy extends op{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Qy(e,n,r)}_apply(e){const n=i3(e,this.type,this._docOrFields,this._inclusive);return new er(e.firestore,e.converter,function(i,o){return new Ho(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,o,i.endAt)}(e._query,n))}}function pre(...t){return Qy._create("startAt",t,!0)}function mre(...t){return Qy._create("startAfter",t,!1)}class Jy extends op{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Jy(e,n,r)}_apply(e){const n=i3(e,this.type,this._docOrFields,this._inclusive);return new er(e.firestore,e.converter,function(i,o){return new Ho(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,o)}(e._query,n))}}function gre(...t){return Jy._create("endBefore",t,!1)}function vre(...t){return Jy._create("endAt",t,!0)}function i3(t,e,n,r){if(n[0]=ye(n[0]),n[0]instanceof cf)return function(o,s,a,u,l){if(!u)throw new J(z.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(a,"()."));const c=[];for(const d of Ul(o))if(d.field.isKeyField())c.push(mu(s,u.key));else{const h=u.data.field(d.field);if(Oy(h))throw new J(z.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+d.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(h===null){const f=d.field.canonicalString();throw new J(z.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(f,"' (used as the orderBy) does not exist."))}c.push(h)}return new Ws(c,l)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=$u(t.firestore);return function(s,a,u,l,c,d){const h=s.explicitOrderBy;if(c.length>h.length)throw new J(z.INVALID_ARGUMENT,"Too many arguments provided to ".concat(l,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const f=[];for(let m=0;m<c.length;m++){const v=c[m];if(h[m].field.isKeyField()){if(typeof v!="string")throw new J(z.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(l,"(), but got a ").concat(typeof v));if(!RI(s)&&v.indexOf("/")!==-1)throw new J(z.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(l,"() must be a plain document ID, but '").concat(v,"' contains a slash."));const y=s.path.child(Oe.fromString(v));if(!oe.isDocumentKey(y))throw new J(z.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(l,"() must result in a valid document path, but '").concat(y,"' is not because it contains an odd number of segments."));const g=new oe(y);f.push(mu(a,g))}else{const y=Z4(u,l,v);f.push(y)}}return new Ws(f,d)}(t._query,t.firestore._databaseId,i,e,n,r)}}function zN(t,e,n){if(typeof(n=ye(n))=="string"){if(n==="")throw new J(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!RI(e)&&n.indexOf("/")!==-1)throw new J(z.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=e.path.child(Oe.fromString(n));if(!oe.isDocumentKey(r))throw new J(z.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return mu(t,new oe(r))}if(n instanceof _t)return mu(t,n._key);throw new J(z.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(zy(n),"."))}function WN(t,e){if(!Array.isArray(t)||t.length===0)throw new J(z.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(e.toString(),"' filters."))}function o3(t,e){const n=function(i,o){for(const s of i)for(const a of s.getFlattenedFilters())if(o.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new J(z.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(e.op.toString(),"' filter.")):new J(z.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(e.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class ET{convertValue(e,n="none"){switch(pu(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(js(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw le()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Vu(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new qy(At(e.latitude),At(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=SI(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(nf(e));default:return null}}convertTimestamp(e){const n=Bs(e);return new vt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Oe.fromString(e);we(JF(r));const i=new Us(r.get(1),r.get(3)),o=new oe(r.popFirst(5));return i.isEqual(n)||$t("Document ".concat(o," contains a document reference within a different database (").concat(i.projectId,"/").concat(i.database,") which is not supported. It will be treated as a reference in the current database (").concat(n.projectId,"/").concat(n.database,") instead.")),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zy(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class yre extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let Lo=class extends cf{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Ky("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}},lh=class extends Lo{data(e={}){return super.data(e)}},Gs=class{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Ba(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new lh(this._firestore,this._userDataWriter,r.key,r,new Ba(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new J(z.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(a=>{const u=new lh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ba(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>o||a.type!==3).map(a=>{const u=new lh(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Ba(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=s.indexOf(a.doc.key),s=s.delete(a.doc.key)),a.type!==1&&(s=s.add(a.doc),c=s.indexOf(a.doc.key)),{type:wre(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}};function wre(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return le()}}function s3(t,e){return t instanceof Lo&&e instanceof Lo?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(t._document===null?e._document===null:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Gs&&e instanceof Gs&&t._firestore===e._firestore&&H4(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bre(t){t=je(t,_t);const e=je(t.firestore,Pt);return V4(mn(e),t._key).then(n=>TT(e,t,n))}class ju extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new ro(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new _t(this.firestore,null,n)}}function xre(t){t=je(t,_t);const e=je(t.firestore,Pt),n=mn(e),r=new ju(e);return jne(n,t._key).then(i=>new Lo(e,r,t._key,i,new Ba(i!==null&&i.hasLocalMutations,!0),t.converter))}function _re(t){t=je(t,_t);const e=je(t.firestore,Pt);return V4(mn(e),t._key,{source:"server"}).then(n=>TT(e,t,n))}function Ere(t){t=je(t,er);const e=je(t.firestore,Pt),n=mn(e),r=new ju(e);return r3(t._query),F4(n,t._query).then(i=>new Gs(e,r,t,i))}function Ire(t){t=je(t,er);const e=je(t.firestore,Pt),n=mn(e),r=new ju(e);return Une(n,t._query).then(i=>new Gs(e,r,t,i))}function Tre(t){t=je(t,er);const e=je(t.firestore,Pt),n=mn(e),r=new ju(e);return F4(n,t._query,{source:"server"}).then(i=>new Gs(e,r,t,i))}function qN(t,e,n){t=je(t,_t);const r=je(t.firestore,Pt),i=Zy(t.converter,e,n);return sp(r,[Gy($u(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,gt.none())])}function HN(t,e,n,...r){t=je(t,_t);const i=je(t.firestore,Pt),o=$u(i);let s;return s=typeof(e=ye(e))=="string"||e instanceof Hs?vT(o,"updateDoc",t._key,e,n,r):gT(o,"updateDoc",t._key,e),sp(i,[s.toMutation(t._key,gt.exists(!0))])}function Cre(t){return sp(je(t.firestore,Pt),[new Wc(t._key,gt.none())])}function IT(t,e){const n=je(t.firestore,Pt),r=nv(t),i=Zy(t.converter,e);return sp(n,[Gy($u(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,gt.exists(!1))]).then(()=>r)}function a3(t,...e){var n,r,i;t=ye(t);let o={includeMetadataChanges:!1},s=0;typeof e[s]!="object"||x_(e[s])||(o=e[s],s++);const a={includeMetadataChanges:o.includeMetadataChanges};if(x_(e[s])){const d=e[s];e[s]=(n=d.next)===null||n===void 0?void 0:n.bind(d),e[s+1]=(r=d.error)===null||r===void 0?void 0:r.bind(d),e[s+2]=(i=d.complete)===null||i===void 0?void 0:i.bind(d)}let u,l,c;if(t instanceof _t)l=je(t.firestore,Pt),c=Uc(t._key.path),u={next:d=>{e[s]&&e[s](TT(l,t,d))},error:e[s+1],complete:e[s+2]};else{const d=je(t,er);l=je(d.firestore,Pt),c=d._query;const h=new ju(l);u={next:f=>{e[s]&&e[s](new Gs(l,h,d,f))},error:e[s+1],complete:e[s+2]},r3(t._query)}return function(h,f,m,v){const y=new jy(v),g=new eT(f,y,m);return h.asyncQueue.enqueueAndForget(async()=>QI(await yc(h),g)),()=>{y.La(),h.asyncQueue.enqueueAndForget(async()=>JI(await yc(h),g))}}(mn(l),c,a,u)}function kre(t,e){return zne(mn(t=je(t,Pt)),x_(e)?e:{next:e})}function sp(t,e){return function(r,i){const o=new sn;return r.asyncQueue.enqueueAndForget(async()=>vne(await cT(r),i,o)),o.promise}(mn(t),e)}function TT(t,e,n){const r=n.docs.get(e._key),i=new ju(t);return new Lo(t,i,e._key,r,new Ba(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sre={maxAttempts:5};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Are=class{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$u(e)}set(e,n,r){this._verifyNotCommitted();const i=ms(e,this._firestore),o=Zy(i.converter,n,r),s=Gy(this._dataReader,"WriteBatch.set",i._key,o,i.converter!==null,r);return this._mutations.push(s.toMutation(i._key,gt.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const o=ms(e,this._firestore);let s;return s=typeof(n=ye(n))=="string"||n instanceof Hs?vT(this._dataReader,"WriteBatch.update",o._key,n,r,i):gT(this._dataReader,"WriteBatch.update",o._key,n),this._mutations.push(s.toMutation(o._key,gt.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=ms(e,this._firestore);return this._mutations=this._mutations.concat(new Wc(n._key,gt.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new J(z.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function ms(t,e){if((t=ye(t)).firestore!==e)throw new J(z.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rre=class extends class{constructor(n,r){this._firestore=n,this._transaction=r,this._dataReader=$u(n)}get(n){const r=ms(n,this._firestore),i=new yre(this._firestore);return this._transaction.lookup([r._key]).then(o=>{if(!o||o.length!==1)return le();const s=o[0];if(s.isFoundDocument())return new cf(this._firestore,i,s.key,s,r.converter);if(s.isNoDocument())return new cf(this._firestore,i,r._key,null,r.converter);throw le()})}set(n,r,i){const o=ms(n,this._firestore),s=Zy(o.converter,r,i),a=Gy(this._dataReader,"Transaction.set",o._key,s,o.converter!==null,i);return this._transaction.set(o._key,a),this}update(n,r,i,...o){const s=ms(n,this._firestore);let a;return a=typeof(r=ye(r))=="string"||r instanceof Hs?vT(this._dataReader,"Transaction.update",s._key,r,i,o):gT(this._dataReader,"Transaction.update",s._key,r),this._transaction.update(s._key,a),this}delete(n){const r=ms(n,this._firestore);return this._transaction.delete(r._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=ms(e,this._firestore),r=new ju(this._firestore);return super.get(e).then(i=>new Lo(this._firestore,r,n._key,i._document,new Ba(!1,!1),n.converter))}};function Nre(t,e,n){t=je(t,Pt);const r=Object.assign(Object.assign({},Sre),n);return function(o){if(o.maxAttempts<1)throw new J(z.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,s,a){const u=new sn;return o.asyncQueue.enqueueAndForget(async()=>{const l=await Fne(o);new Mne(o.asyncQueue,l,a,s,u).ja()}),u.promise}(mn(t),i=>e(new Rre(t,i)),r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pre(){return new ip("deleteField")}function Dre(){return new hT("serverTimestamp")}function Ore(...t){return new fT("arrayUnion",t)}function Lre(...t){return new pT("arrayRemove",t)}function Mre(t){return new mT("increment",t)}(function(e,n=!0){(function(i){jc=i})(zo),Po(new oi("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),a=new Pt(new GZ(r.getProvider("auth-internal")),new QZ(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new J(z.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Us(l.options.projectId,c)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),a._setSettings(o),a},"PUBLIC").setMultipleInstances(!0)),ni(BR,"4.4.3",e),ni(BR,"4.4.3","esm2017")})();const Vre="@firebase/firestore-compat",Fre="0.3.26";/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t,e){if(e===void 0)return{merge:!1};if(e.mergeFields!==void 0&&e.merge!==void 0)throw new J("invalid-argument","Invalid options passed to function ".concat(t,"(): You cannot ")+'specify both "merge" and "mergeFields".');return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GN(){if(typeof Uint8Array>"u")throw new J("unimplemented","Uint8Arrays are not available in this environment.")}function KN(){if(!_ee())throw new J("unimplemented","Blobs are unavailable in Firestore in this environment.")}let u3=class E_{constructor(e){this._delegate=e}static fromBase64String(e){return KN(),new E_(ro.fromBase64String(e))}static fromUint8Array(e){return GN(),new E_(ro.fromUint8Array(e))}toBase64(){return KN(),this._delegate.toBase64()}toUint8Array(){return GN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I_(t){return $re(t,["next","error","complete"])}function $re(t,e){if(typeof t!="object"||t===null)return!1;const n=t;for(const r of e)if(r in n&&typeof n[r]=="function")return!0;return!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bre{enableIndexedDbPersistence(e,n){return Qne(e._delegate,{forceOwnership:n})}enableMultiTabIndexedDbPersistence(e){return Jne(e._delegate)}clearIndexedDbPersistence(e){return Zne(e._delegate)}}class l3{constructor(e,n,r){this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Us||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const n=this._delegate._getSettings();!e.merge&&n.host!==e.host&&Ii("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&(e=Object.assign(Object.assign({},n),e),delete e.merge),this._delegate._setSettings(e)}useEmulator(e,n,r={}){Hne(this._delegate,e,n,r)}enableNetwork(){return tre(this._delegate)}disableNetwork(){return nre(this._delegate)}enablePersistence(e){let n=!1,r=!1;return e&&(n=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,B4("synchronizeTabs",n,"experimentalForceOwningTab",r)),n?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return ere(this._delegate)}onSnapshotsInSync(e){return kre(this._delegate,e)}get app(){if(!this._appCompat)throw new J("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wc(this,Wy(this._delegate,e))}catch(n){throw Wn(n,"collection()","Firestore.collection()")}}doc(e){try{return new Zr(this,nv(this._delegate,e))}catch(n){throw Wn(n,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new zn(this,Gne(this._delegate,e))}catch(n){throw Wn(n,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return Nre(this._delegate,n=>e(new c3(this,n)))}batch(){return mn(this._delegate),new d3(new Are(this._delegate,e=>sp(this._delegate,e)))}loadBundle(e){return rre(this._delegate,e)}namedQuery(e){return ire(this._delegate,e).then(n=>n?new zn(this,n):null)}}class e0 extends ET{constructor(e){super(),this.firestore=e}convertBytes(e){return new u3(new ro(e))}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return Zr.forKey(n,this.firestore,null)}}function jre(t){zZ(t)}class c3{constructor(e,n){this._firestore=e,this._delegate=n,this._userDataWriter=new e0(e)}get(e){const n=ja(e);return this._delegate.get(n).then(r=>new df(this._firestore,new Lo(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,n.converter)))}set(e,n,r){const i=ja(e);return r?(CT("Transaction.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=ja(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=ja(e);return this._delegate.delete(n),this}}class d3{constructor(e){this._delegate=e}set(e,n,r){const i=ja(e);return r?(CT("WriteBatch.set",r),this._delegate.set(i,n,r)):this._delegate.set(i,n),this}update(e,n,r,...i){const o=ja(e);return arguments.length===2?this._delegate.update(o,n):this._delegate.update(o,n,r,...i),this}delete(e){const n=ja(e);return this._delegate.delete(n),this}commit(){return this._delegate.commit()}}class _u{constructor(e,n,r){this._firestore=e,this._userDataWriter=n,this._delegate=r}fromFirestore(e,n){const r=new lh(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new hf(this._firestore,r),n!=null?n:{})}toFirestore(e,n){return n?this._delegate.toFirestore(e,n):this._delegate.toFirestore(e)}static getInstance(e,n){const r=_u.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let o=i.get(n);return o||(o=new _u(e,new e0(e),n),i.set(n,o)),o}}_u.INSTANCES=new WeakMap;class Zr{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new e0(e)}static forPath(e,n,r){if(e.length%2!==0)throw new J("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(e.canonicalString()," has ").concat(e.length));return new Zr(n,new _t(n._delegate,r,new oe(e)))}static forKey(e,n,r){return new Zr(n,new _t(n._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new wc(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wc(this.firestore,Wy(this._delegate,e))}catch(n){throw Wn(n,"collection()","DocumentReference.collection()")}}isEqual(e){return e=ye(e),e instanceof _t?q4(this._delegate,e):!1}set(e,n){n=CT("DocumentReference.set",n);try{return n?qN(this._delegate,e,n):qN(this._delegate,e)}catch(r){throw Wn(r,"setDoc()","DocumentReference.set()")}}update(e,n,...r){try{return arguments.length===1?HN(this._delegate,e):HN(this._delegate,e,n,...r)}catch(i){throw Wn(i,"updateDoc()","DocumentReference.update()")}}delete(){return Cre(this._delegate)}onSnapshot(...e){const n=h3(e),r=f3(e,i=>new df(this.firestore,new Lo(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return a3(this._delegate,n,r)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=xre(this._delegate):(e==null?void 0:e.source)==="server"?n=_re(this._delegate):n=bre(this._delegate),n.then(r=>new df(this.firestore,new Lo(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Zr(this.firestore,e?this._delegate.withConverter(_u.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function Wn(t,e,n){return t.message=t.message.replace(e,n),t}function h3(t){for(const e of t)if(typeof e=="object"&&!I_(e))return e;return{}}function f3(t,e){var n,r;let i;return I_(t[0])?i=t[0]:I_(t[1])?i=t[1]:typeof t[0]=="function"?i={next:t[0],error:t[1],complete:t[2]}:i={next:t[1],error:t[2],complete:t[3]},{next:o=>{i.next&&i.next(e(o))},error:(n=i.error)===null||n===void 0?void 0:n.bind(i),complete:(r=i.complete)===null||r===void 0?void 0:r.bind(i)}}class df{constructor(e,n){this._firestore=e,this._delegate=n}get ref(){return new Zr(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,n){return this._delegate.get(e,n)}isEqual(e){return s3(this._delegate,e._delegate)}}class hf extends df{data(e){const n=this._delegate.data(e);return this._delegate._converter||WZ(n!==void 0),n}}class zn{constructor(e,n){this.firestore=e,this._delegate=n,this._userDataWriter=new e0(e)}where(e,n,r){try{return new zn(this.firestore,os(this._delegate,cre(e,n,r)))}catch(i){throw Wn(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,n){try{return new zn(this.firestore,os(this._delegate,dre(e,n)))}catch(r){throw Wn(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new zn(this.firestore,os(this._delegate,hre(e)))}catch(n){throw Wn(n,"limit()","Query.limit()")}}limitToLast(e){try{return new zn(this.firestore,os(this._delegate,fre(e)))}catch(n){throw Wn(n,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new zn(this.firestore,os(this._delegate,pre(...e)))}catch(n){throw Wn(n,"startAt()","Query.startAt()")}}startAfter(...e){try{return new zn(this.firestore,os(this._delegate,mre(...e)))}catch(n){throw Wn(n,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new zn(this.firestore,os(this._delegate,gre(...e)))}catch(n){throw Wn(n,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new zn(this.firestore,os(this._delegate,vre(...e)))}catch(n){throw Wn(n,"endAt()","Query.endAt()")}}isEqual(e){return H4(this._delegate,e._delegate)}get(e){let n;return(e==null?void 0:e.source)==="cache"?n=Ire(this._delegate):(e==null?void 0:e.source)==="server"?n=Tre(this._delegate):n=Ere(this._delegate),n.then(r=>new T_(this.firestore,new Gs(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const n=h3(e),r=f3(e,i=>new T_(this.firestore,new Gs(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return a3(this._delegate,n,r)}withConverter(e){return new zn(this.firestore,e?this._delegate.withConverter(_u.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class Ure{constructor(e,n){this._firestore=e,this._delegate=n}get type(){return this._delegate.type}get doc(){return new hf(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class T_{constructor(e,n){this._firestore=e,this._delegate=n}get query(){return new zn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new hf(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(n=>new Ure(this._firestore,n))}forEach(e,n){this._delegate.forEach(r=>{e.call(n,new hf(this._firestore,r))})}isEqual(e){return s3(this._delegate,e._delegate)}}class wc extends zn{constructor(e,n){super(e,n),this.firestore=e,this._delegate=n}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Zr(this.firestore,e):null}doc(e){try{return e===void 0?new Zr(this.firestore,nv(this._delegate)):new Zr(this.firestore,nv(this._delegate,e))}catch(n){throw Wn(n,"doc()","CollectionReference.doc()")}}add(e){return IT(this._delegate,e).then(n=>new Zr(this.firestore,n))}isEqual(e){return q4(this._delegate,e._delegate)}withConverter(e){return new wc(this.firestore,e?this._delegate.withConverter(_u.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function ja(t){return je(t,_t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(...e){this._delegate=new Hs(...e)}static documentId(){return new kT(mt.keyField().canonicalString())}isEqual(e){return e=ye(e),e instanceof Hs?this._delegate._internalPath.isEqual(e._internalPath):!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Na{constructor(e){this._delegate=e}static serverTimestamp(){const e=Dre();return e._methodName="FieldValue.serverTimestamp",new Na(e)}static delete(){const e=Pre();return e._methodName="FieldValue.delete",new Na(e)}static arrayUnion(...e){const n=Ore(...e);return n._methodName="FieldValue.arrayUnion",new Na(n)}static arrayRemove(...e){const n=Lre(...e);return n._methodName="FieldValue.arrayRemove",new Na(n)}static increment(e){const n=Mre(e);return n._methodName="FieldValue.increment",new Na(n)}isEqual(e){return this._delegate.isEqual(e._delegate)}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zre={Firestore:l3,GeoPoint:qy,Timestamp:vt,Blob:u3,Transaction:c3,WriteBatch:d3,DocumentReference:Zr,DocumentSnapshot:df,Query:zn,QueryDocumentSnapshot:hf,QuerySnapshot:T_,CollectionReference:wc,FieldPath:kT,FieldValue:Na,setLogLevel:jre,CACHE_SIZE_UNLIMITED:Xne};function Wre(t,e){t.INTERNAL.registerComponent(new oi("firestore-compat",n=>{const r=n.getProvider("app-compat").getImmediate(),i=n.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},zre)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qre(t){Wre(t,(e,n)=>new l3(e,n,new Bre)),t.registerVersion(Vre,Fre)}qre(Ie);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p3="firebasestorage.googleapis.com",m3="storageBucket",Hre=2*60*1e3,Gre=10*60*1e3,Kre=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt extends Mn{constructor(e,n,r=0){super(Qw(e),"Firebase Storage: ".concat(n," (").concat(Qw(e),")")),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Tt.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Qw(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}var ct;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ct||(ct={}));function Qw(t){return"storage/"+t}function ST(){const t="An unknown error occurred, please check the error payload for server response.";return new Tt(ct.UNKNOWN,t)}function Yre(t){return new Tt(ct.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function Xre(t){return new Tt(ct.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Qre(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Tt(ct.UNAUTHENTICATED,t)}function Jre(){return new Tt(ct.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Zre(t){return new Tt(ct.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function g3(){return new Tt(ct.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function v3(){return new Tt(ct.CANCELED,"User canceled the upload/download.")}function eie(t){return new Tt(ct.INVALID_URL,"Invalid URL '"+t+"'.")}function tie(t){return new Tt(ct.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function nie(){return new Tt(ct.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+m3+"' property when initializing the app?")}function y3(){return new Tt(ct.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rie(){return new Tt(ct.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function iie(){return new Tt(ct.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oie(t){return new Tt(ct.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."))}function Wl(t){return new Tt(ct.INVALID_ARGUMENT,t)}function w3(){return new Tt(ct.APP_DELETED,"The Firebase app was deleted.")}function b3(t){return new Tt(ct.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ch(t,e){return new Tt(ct.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Id(t){throw new Tt(ct.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Ln.makeFromUrl(e,n)}catch(i){return new Ln(e,"")}if(r.path==="")return r;throw tie(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function o(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const s="(/(.*))?$",a=new RegExp("^gs://"+i+s,"i"),u={bucket:1,path:3};function l(x){x.path_=decodeURIComponent(x.path)}const c="v[A-Za-z0-9_]+",d=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp("^https?://".concat(d,"/").concat(c,"/b/").concat(i,"/o").concat(h),"i"),m={bucket:1,path:3},v=n===p3?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",g=new RegExp("^https?://".concat(v,"/").concat(i,"/").concat(y),"i"),b=[{regex:a,indices:u,postModify:o},{regex:f,indices:m,postModify:l},{regex:g,indices:{bucket:1,path:2},postModify:l}];for(let x=0;x<b.length;x++){const _=b[x],E=_.regex.exec(e);if(E){const I=E[_.indices.bucket];let C=E[_.indices.path];C||(C=""),r=new Ln(I,C),_.postModify(r);break}}if(r==null)throw eie(e);return r}}class sie{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aie(t,e,n){let r=1,i=null,o=null,s=!1,a=0;function u(){return a===2}let l=!1;function c(...y){l||(l=!0,e.apply(null,y))}function d(y){i=setTimeout(()=>{i=null,t(f,u())},y)}function h(){o&&clearTimeout(o)}function f(y,...g){if(l){h();return}if(y){h(),c.call(null,y,...g);return}if(u()||s){h(),c.call(null,y,...g);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,d(b)}let m=!1;function v(y){m||(m=!0,h(),!l&&(i!==null?(y||(a=2),clearTimeout(i),d(0)):y||(a=1)))}return d(0),o=setTimeout(()=>{s=!0,v(!0)},n),v}function uie(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lie(t){return t!==void 0}function cie(t){return typeof t=="function"}function die(t){return typeof t=="object"&&!Array.isArray(t)}function t0(t){return typeof t=="string"||t instanceof String}function YN(t){return AT()&&t instanceof Blob}function AT(){return typeof Blob<"u"}function C_(t,e,n,r){if(r<e)throw Wl("Invalid value for '".concat(t,"'. Expected ").concat(e," or greater."));if(r>n)throw Wl("Invalid value for '".concat(t,"'. Expected ").concat(n," or less."))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sa(t,e,n){let r=e;return n==null&&(r="https://".concat(e)),"".concat(n,"://").concat(r,"/v0").concat(t)}function x3(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qa;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Qa||(Qa={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _3(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,o=e.indexOf(t)!==-1;return n||i||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hie{constructor(e,n,r,i,o,s,a,u,l,c,d,h=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=d,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,m)=>{this.resolve_=f,this.reject_=m,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new nm(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const a=o.getErrorCode()===Qa.NO_ERROR,u=o.getStatus();if(!a||_3(u,this.additionalRetryCodes_)&&this.retry){const c=o.getErrorCode()===Qa.ABORT;r(!1,new nm(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new nm(l,o))})},n=(r,i)=>{const o=this.resolve_,s=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());lie(u)?o(u):o()}catch(u){s(u)}else if(a!==null){const u=ST();u.serverResponse=a.getErrorText(),this.errorCallback_?s(this.errorCallback_(a,u)):s(u)}else if(i.canceled){const u=this.appDelete_?w3():v3();s(u)}else{const u=g3();s(u)}};this.canceled_?n(!1,new nm(!1,null,!0)):this.backoffId_=aie(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&uie(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class nm{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function fie(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function pie(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e!=null?e:"AppManager")}function mie(t,e){e&&(t["X-Firebase-GMPID"]=e)}function gie(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function vie(t,e,n,r,i,o,s=!0){const a=x3(t.urlParams),u=t.url+a,l=Object.assign({},t.headers);return mie(l,e),fie(l,n),pie(l,o),gie(l,r),new hie(u,t.method,l,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yie(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function wie(...t){const e=yie();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(AT())return new Blob(t);throw new Tt(ct.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function bie(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xie(t){if(typeof atob>"u")throw oie("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ei={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Jw{constructor(e,n){this.data=e,this.contentType=n||null}}function E3(t,e){switch(t){case ei.RAW:return new Jw(I3(e));case ei.BASE64:case ei.BASE64URL:return new Jw(T3(t,e));case ei.DATA_URL:return new Jw(Eie(e),Iie(e))}throw ST()}function I3(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const o=r,s=t.charCodeAt(++n);r=65536|(o&1023)<<10|s&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function _ie(t){let e;try{e=decodeURIComponent(t)}catch(n){throw ch(ei.DATA_URL,"Malformed data URL.")}return I3(e)}function T3(t,e){switch(t){case ei.BASE64:{const i=e.indexOf("-")!==-1,o=e.indexOf("_")!==-1;if(i||o)throw ch(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ei.BASE64URL:{const i=e.indexOf("+")!==-1,o=e.indexOf("/")!==-1;if(i||o)throw ch(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=xie(e)}catch(i){throw i.message.includes("polyfill")?i:ch(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class C3{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw ch(ei.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Tie(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Eie(t){const e=new C3(t);return e.base64?T3(ei.BASE64,e.rest):_ie(e.rest)}function Iie(t){return new C3(t).contentType}function Tie(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e,n){let r=0,i="";YN(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(YN(this.data_)){const r=this.data_,i=bie(r,e,n);return i===null?null:new mo(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new mo(r,!0)}}static getBlob(...e){if(AT()){const n=e.map(r=>r instanceof mo?r.data_:r);return new mo(wie.apply(null,n))}else{const n=e.map(s=>t0(s)?E3(ei.RAW,s).data:s.data_);let r=0;n.forEach(s=>{r+=s.byteLength});const i=new Uint8Array(r);let o=0;return n.forEach(s=>{for(let a=0;a<s.length;a++)i[o++]=s[a]}),new mo(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t){let e;try{e=JSON.parse(t)}catch(n){return null}return die(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cie(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kie(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function k3(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sie(t,e){return e}class jn{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||Sie}}let rm=null;function Aie(t){return!t0(t)||t.length<2?t:k3(t)}function n0(){if(rm)return rm;const t=[];t.push(new jn("bucket")),t.push(new jn("generation")),t.push(new jn("metageneration")),t.push(new jn("name","fullPath",!0));function e(o,s){return Aie(s)}const n=new jn("name");n.xform=e,t.push(n);function r(o,s){return s!==void 0?Number(s):s}const i=new jn("size");return i.xform=r,t.push(i),t.push(new jn("timeCreated")),t.push(new jn("updated")),t.push(new jn("md5Hash",null,!0)),t.push(new jn("cacheControl",null,!0)),t.push(new jn("contentDisposition",null,!0)),t.push(new jn("contentEncoding",null,!0)),t.push(new jn("contentLanguage",null,!0)),t.push(new jn("contentType",null,!0)),t.push(new jn("metadata","customMetadata",!0)),rm=t,rm}function Rie(t,e){function n(){const r=t.bucket,i=t.fullPath,o=new Ln(r,i);return e._makeStorageReference(o)}Object.defineProperty(t,"ref",{get:n})}function Nie(t,e,n){const r={};r.type="file";const i=n.length;for(let o=0;o<i;o++){const s=n[o];r[s.local]=s.xform(r,e[s.server])}return Rie(r,t),r}function S3(t,e,n){const r=RT(e);return r===null?null:Nie(t,r,n)}function Pie(t,e,n,r){const i=RT(e);if(i===null||!t0(i.downloadTokens))return null;const o=i.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(l=>{const c=t.bucket,d=t.fullPath,h="/b/"+s(c)+"/o/"+s(d),f=sa(h,n,r),m=x3({alt:"media",token:l});return f+m})[0]}function NT(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XN="prefixes",QN="items";function Die(t,e,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[XN])for(const i of n[XN]){const o=i.replace(/\/$/,""),s=t._makeStorageReference(new Ln(e,o));r.prefixes.push(s)}if(n[QN])for(const i of n[QN]){const o=t._makeStorageReference(new Ln(e,i.name));r.items.push(o)}return r}function Oie(t,e,n){const r=RT(n);return r===null?null:Die(t,e,r)}class Yo{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(t){if(!t)throw ST()}function r0(t,e){function n(r,i){const o=S3(t,i,e);return Ji(o!==null),o}return n}function Lie(t,e){function n(r,i){const o=Oie(t,e,i);return Ji(o!==null),o}return n}function Mie(t,e){function n(r,i){const o=S3(t,i,e);return Ji(o!==null),Pie(o,i,t.host,t._protocol)}return n}function Yc(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=Jre():i=Qre():n.getStatus()===402?i=Xre(t.bucket):n.getStatus()===403?i=Zre(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function i0(t){const e=Yc(t);function n(r,i){let o=e(r,i);return r.getStatus()===404&&(o=Yre(t.path)),o.serverResponse=i.serverResponse,o}return n}function A3(t,e,n){const r=e.fullServerUrl(),i=sa(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Yo(i,o,r0(t,n),s);return a.errorHandler=i0(e),a}function Vie(t,e,n,r,i){const o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const s=e.bucketOnlyServerUrl(),a=sa(s,t.host,t._protocol),u="GET",l=t.maxOperationRetryTime,c=new Yo(a,u,Lie(t,e.bucket),l);return c.urlParams=o,c.errorHandler=Yc(e),c}function Fie(t,e,n){const r=e.fullServerUrl(),i=sa(r,t.host,t._protocol),o="GET",s=t.maxOperationRetryTime,a=new Yo(i,o,Mie(t,n),s);return a.errorHandler=i0(e),a}function $ie(t,e,n,r){const i=e.fullServerUrl(),o=sa(i,t.host,t._protocol),s="PATCH",a=NT(n,r),u={"Content-Type":"application/json; charset=utf-8"},l=t.maxOperationRetryTime,c=new Yo(o,s,r0(t,r),l);return c.headers=u,c.body=a,c.errorHandler=i0(e),c}function Bie(t,e){const n=e.fullServerUrl(),r=sa(n,t.host,t._protocol),i="DELETE",o=t.maxOperationRetryTime;function s(u,l){}const a=new Yo(r,i,s,o);return a.successCodes=[200,204],a.errorHandler=i0(e),a}function jie(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function R3(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=jie(null,e)),r}function Uie(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let x=0;x<2;x++)b=b+Math.random().toString().slice(2);return b}const u=a();s["Content-Type"]="multipart/related; boundary="+u;const l=R3(e,r,i),c=NT(l,n),d="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+u+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",h="\r\n--"+u+"--",f=mo.getBlob(d,r,h);if(f===null)throw y3();const m={name:l.fullPath},v=sa(o,t.host,t._protocol),y="POST",g=t.maxUploadRetryTime,w=new Yo(v,y,r0(t,n),g);return w.urlParams=m,w.headers=s,w.body=f.uploadData(),w.errorHandler=Yc(e),w}class iv{constructor(e,n,r,i){this.current=e,this.total=n,this.finalized=!!r,this.metadata=i||null}}function PT(t,e){let n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(i){Ji(!1)}return Ji(!!n&&(e||["active"]).indexOf(n)!==-1),n}function zie(t,e,n,r,i){const o=e.bucketOnlyServerUrl(),s=R3(e,r,i),a={name:s.fullPath},u=sa(o,t.host,t._protocol),l="POST",c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},d=NT(s,n),h=t.maxUploadRetryTime;function f(v){PT(v);let y;try{y=v.getResponseHeader("X-Goog-Upload-URL")}catch(g){Ji(!1)}return Ji(t0(y)),y}const m=new Yo(u,l,f,h);return m.urlParams=a,m.headers=c,m.body=d,m.errorHandler=Yc(e),m}function Wie(t,e,n,r){const i={"X-Goog-Upload-Command":"query"};function o(l){const c=PT(l,["active","final"]);let d=null;try{d=l.getResponseHeader("X-Goog-Upload-Size-Received")}catch(f){Ji(!1)}d||Ji(!1);const h=Number(d);return Ji(!isNaN(h)),new iv(h,r.size(),c==="final")}const s="POST",a=t.maxUploadRetryTime,u=new Yo(n,s,o,a);return u.headers=i,u.errorHandler=Yc(e),u}const JN=256*1024;function qie(t,e,n,r,i,o,s,a){const u=new iv(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw rie();const l=u.total-u.current;let c=l;i>0&&(c=Math.min(c,i));const d=u.current,h=d+c;let f="";c===0?f="finalize":l===c?f="upload, finalize":f="upload";const m={"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":"".concat(u.current)},v=r.slice(d,h);if(v===null)throw y3();function y(x,_){const E=PT(x,["active","final"]),I=u.current+c,C=r.size();let S;return E==="final"?S=r0(e,o)(x,_):S=null,new iv(I,C,E==="final",S)}const g="POST",w=e.maxUploadRetryTime,b=new Yo(n,g,y,w);return b.headers=m,b.body=v.uploadData(),b.progressCallback=a||null,b.errorHandler=Yc(t),b}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hie={STATE_CHANGED:"state_changed"},qn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Zw(t){switch(t){case"running":case"pausing":case"canceling":return qn.RUNNING;case"paused":return qn.PAUSED;case"success":return qn.SUCCESS;case"canceled":return qn.CANCELED;case"error":return qn.ERROR;default:return qn.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gie{constructor(e,n,r){if(cie(e)||n!=null||r!=null)this.next=e,this.error=n!=null?n:void 0,this.complete=r!=null?r:void 0;else{const o=e;this.next=o.next,this.error=o.error,this.complete=o.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t){return(...e)=>{Promise.resolve().then(()=>t(...e))}}class Kie{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Qa.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Qa.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Qa.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i){if(this.sent_)throw Id("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Id("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Id("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Id("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Id("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class Yie extends Kie{initXhr(){this.xhr_.responseType="text"}}function ji(){return new Yie}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N3{constructor(e,n,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=n,this._metadata=r,this._mappings=n0(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ct.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const o=this.isExponentialBackoffExpired();if(_3(i.status,[]))if(o)i=g3();else{this.sleepTime=Math.max(this.sleepTime*2,Kre),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ct.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,o)=>{this._resolve=i,this._reject=o,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return n=>this._updateProgress(e+n)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([n,r])=>{switch(this._state){case"running":e(n,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,n)=>{const r=zie(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ji,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._uploadUrl=o,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((n,r)=>{const i=Wie(this._ref.storage,this._ref._location,e,this._blob),o=this._ref.storage._makeRequest(i,ji,n,r);this._request=o,o.getPromise().then(s=>{s=s,this._request=void 0,this._updateProgress(s.current),this._needToFetchStatus=!1,s.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=JN*this._chunkMultiplier,n=new iv(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,o)=>{let s;try{s=qie(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,n,this._makeProgressCallback())}catch(u){this._error=u,this._transition("error");return}const a=this._ref.storage._makeRequest(s,ji,i,o,!1);this._request=a,a.getPromise().then(u=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(u.current),u.finalized?(this._metadata=u.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){JN*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,n)=>{const r=A3(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,ji,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,n)=>{const r=Uie(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,ji,e,n);this._request=i,i.getPromise().then(o=>{this._request=void 0,this._metadata=o,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const n=this._transferred;this._transferred=e,this._transferred!==n&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const n=this._state==="paused";this._state=e,n&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=v3(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=Zw(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,n,r,i){const o=new Gie(n||void 0,r||void 0,i||void 0);return this._addObserver(o),()=>{this._removeObserver(o)}}then(e,n){return this._promise.then(e,n)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const n=this._observers.indexOf(e);n!==-1&&this._observers.splice(n,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(n=>{this._notifyObserver(n)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(Zw(this._state)){case qn.SUCCESS:tl(this._resolve.bind(null,this.snapshot))();break;case qn.CANCELED:case qn.ERROR:const n=this._reject;tl(n.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Zw(this._state)){case qn.RUNNING:case qn.PAUSED:e.next&&tl(e.next.bind(e,this.snapshot))();break;case qn.SUCCESS:e.complete&&tl(e.complete.bind(e))();break;case qn.CANCELED:case qn.ERROR:e.error&&tl(e.error.bind(e,this._error))();break;default:e.error&&tl(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eu{constructor(e,n){this._service=e,n instanceof Ln?this._location=n:this._location=Ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Eu(e,n)}get root(){const e=new Ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return k3(this._location.path)}get storage(){return this._service}get parent(){const e=Cie(this._location.path);if(e===null)return null;const n=new Ln(this._location.bucket,e);return new Eu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw b3(e)}}function Xie(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new N3(t,new mo(e),n)}function Qie(t){const e={prefixes:[],items:[]};return P3(t,e).then(()=>e)}async function P3(t,e,n){const i=await D3(t,{pageToken:n});e.prefixes.push(...i.prefixes),e.items.push(...i.items),i.nextPageToken!=null&&await P3(t,e,i.nextPageToken)}function D3(t,e){e!=null&&typeof e.maxResults=="number"&&C_("options.maxResults",1,1e3,e.maxResults);const n=e||{},r=Vie(t.storage,t._location,"/",n.pageToken,n.maxResults);return t.storage.makeRequestWithTokens(r,ji)}function Jie(t){t._throwIfRoot("getMetadata");const e=A3(t.storage,t._location,n0());return t.storage.makeRequestWithTokens(e,ji)}function Zie(t,e){t._throwIfRoot("updateMetadata");const n=$ie(t.storage,t._location,e,n0());return t.storage.makeRequestWithTokens(n,ji)}function eoe(t){t._throwIfRoot("getDownloadURL");const e=Fie(t.storage,t._location,n0());return t.storage.makeRequestWithTokens(e,ji).then(n=>{if(n===null)throw iie();return n})}function toe(t){t._throwIfRoot("deleteObject");const e=Bie(t.storage,t._location);return t.storage.makeRequestWithTokens(e,ji)}function O3(t,e){const n=kie(t._location.path,e),r=new Ln(t._location.bucket,n);return new Eu(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noe(t){return/^[A-Za-z]+:\/\//.test(t)}function roe(t,e){return new Eu(t,e)}function L3(t,e){if(t instanceof DT){const n=t;if(n._bucket==null)throw nie();const r=new Eu(n,n._bucket);return e!=null?L3(r,e):r}else return e!==void 0?O3(t,e):t}function ioe(t,e){if(e&&noe(e)){if(t instanceof DT)return roe(t,e);throw Wl("To use ref(service, url), the first argument must be a Storage instance.")}else return L3(t,e)}function ZN(t,e){const n=e==null?void 0:e[m3];return n==null?null:Ln.makeFromBucketSpec(n,t)}function ooe(t,e,n,r={}){t.host="".concat(e,":").concat(n),t._protocol="http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:ML(i,t.app.options.projectId))}class DT{constructor(e,n,r,i,o){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=p3,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Hre,this._maxUploadRetryTime=Gre,this._requests=new Set,i!=null?this._bucket=Ln.makeFromBucketSpec(i,this._host):this._bucket=ZN(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ln.makeFromBucketSpec(this._url,e):this._bucket=ZN(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){C_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){C_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Eu(this,e)}_makeRequest(e,n,r,i,o=!0){if(this._deleted)return new sie(w3());{const s=vie(e,this._appId,r,i,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const e2="@firebase/storage",t2="0.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const soe="storage";function OT(t,e,n){return t=ye(t),Xie(t,e,n)}function aoe(t){return t=ye(t),Jie(t)}function uoe(t,e){return t=ye(t),Zie(t,e)}function loe(t,e){return t=ye(t),D3(t,e)}function coe(t){return t=ye(t),Qie(t)}function LT(t){return t=ye(t),eoe(t)}function doe(t){return t=ye(t),toe(t)}function ov(t,e){return t=ye(t),ioe(t,e)}function hoe(t,e){return O3(t,e)}function foe(t,e,n,r={}){ooe(t,e,n,r)}function poe(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new DT(n,r,i,e,zo)}function moe(){Po(new oi(soe,poe,"PUBLIC").setMultipleInstances(!0)),ni(e2,t2,""),ni(e2,t2,"esm2017")}moe();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n,r){this._delegate=e,this.task=n,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,n){this._delegate=e,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new im(this._delegate.snapshot,this,this._ref)}then(e,n){return this._delegate.then(r=>{if(e)return e(new im(r,this,this._ref))},n)}on(e,n,r,i){let o;return n&&(typeof n=="function"?o=s=>n(new im(s,this,this._ref)):o={next:n.next?s=>n.next(new im(s,this,this._ref)):void 0,complete:n.complete||void 0,error:n.error||void 0}),this._delegate.on(e,o,r||void 0,i||void 0)}}class r2{constructor(e,n){this._delegate=e,this._service=n}get prefixes(){return this._delegate.prefixes.map(e=>new Co(e,this._service))}get items(){return this._delegate.items.map(e=>new Co(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *  http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(e,n){this._delegate=e,this.storage=n}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const n=hoe(this._delegate,e);return new Co(n,this.storage)}get root(){return new Co(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return e==null?null:new Co(e,this.storage)}put(e,n){return this._throwIfRoot("put"),new n2(OT(this._delegate,e,n),this)}putString(e,n=ei.RAW,r){this._throwIfRoot("putString");const i=E3(n,e),o=Object.assign({},r);return o.contentType==null&&i.contentType!=null&&(o.contentType=i.contentType),new n2(new N3(this._delegate,new mo(i.data,!0),o),this)}listAll(){return coe(this._delegate).then(e=>new r2(e,this.storage))}list(e){return loe(this._delegate,e||void 0).then(n=>new r2(n,this.storage))}getMetadata(){return aoe(this._delegate)}updateMetadata(e){return uoe(this._delegate,e)}getDownloadURL(){return LT(this._delegate)}delete(){return this._throwIfRoot("delete"),doe(this._delegate)}_throwIfRoot(e){if(this._delegate._location.path==="")throw b3(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(e,n){this.app=e,this._delegate=n}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(i2(e))throw Wl("ref() expected a child path but got a URL, use refFromURL instead.");return new Co(ov(this._delegate,e),this)}refFromURL(e){if(!i2(e))throw Wl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ln.makeFromUrl(e,this._delegate.host)}catch(n){throw Wl("refFromUrl() expected a valid full URL but got an invalid one.")}return new Co(ov(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,n,r={}){foe(this._delegate,e,n,r)}}function i2(t){return/^[A-Za-z]+:\/\//.test(t)}const goe="@firebase/storage-compat",voe="0.3.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yoe="storage-compat";function woe(t,{instanceIdentifier:e}){const n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("storage").getImmediate({identifier:e});return new M3(n,r)}function boe(t){const e={TaskState:qn,TaskEvent:Hie,StringFormat:ei,Storage:M3,Reference:Co};t.INTERNAL.registerComponent(new oi(yoe,woe,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(goe,voe)}boe(Ie);const xoe={apiKey:"AIzaSyDDdSly9TG350O54D_BvtElgHZ6oxJ_CbU",authDomain:"furpet-14eea.firebaseapp.com",projectId:"furpet-14eea",storageBucket:"furpet-14eea.appspot.com",messagingSenderId:"170672929681",appId:"1:170672929681:web:219bb7ade084ec11633830",measurementId:"G-F3DBNJSXJ2"};Ie.initializeApp(xoe);var _oe=Ie.firestore(),V3=Ie.storage();async function Eoe(t,e){const n="".concat(t);try{const r=await Ie.auth().signInWithEmailAndPassword(n,e),i=Ie.auth().currentUser;if(i){const s=(await Ie.firestore().collection("users").doc(i.uid).get()).data();if(s)return s.role}}catch(r){return console.log(r),!1}}async function Ioe(t,e,n){const r="".concat(t);try{const i=await Ie.auth().createUserWithEmailAndPassword(r,e),o=Ie.auth().currentUser;o&&Ie.firestore().collection("users").doc(o.uid).set({role:n,email:r})}catch(i){return console.log(i),!1}}const Toe=()=>{const[t,e]=Q.useState(""),[n,r]=Q.useState(""),[i,o]=Q.useState(""),[s,a]=NG(),u=Pu();async function l(){await Ioe(t,n,i)&&s("You have registered successfully!",2e3),u.push("/login")}return p.jsx(Ht,{children:p.jsx(qt,{children:p.jsxs("div",{className:"signup_box",children:[p.jsxs("div",{className:"rectangle_box",children:[p.jsx("h1",{className:"h1_signUp",children:"Create an Account"}),p.jsxs(kL,{className:"signup_form",children:[p.jsx("input",{className:"input_signUp",type:"text",placeholder:"Username"}),p.jsx("input",{className:"input_signUp",type:"email",placeholder:"Email",onChange:c=>e(c.target.value)}),p.jsx("input",{className:"input_signUp",type:"password",placeholder:"Password",onChange:c=>r(c.target.value)}),p.jsxs("select",{className:"input_signUp",onChange:c=>o(c.target.value),children:[" ",p.jsx("option",{value:"",children:"Select Role"}),p.jsx("option",{value:"adopter",children:"Adopter"}),p.jsx("option",{value:"pet owner",children:"Pet Owner"})]}),p.jsx("input",{onClick:l,className:"submit_signUp",type:"submit",value:"SignUp"}),p.jsxs("p",{children:["have a account? ",p.jsx("a",{href:"/login",children:"login"})]})]})]}),p.jsx("img",{className:"image_SignUp",src:WG})]})})})},Coe="/assets/pexels-svetozar-milashevich-99573-1490908-D_mEmgPN.jpg",Er="/assets/anIOs_StartupLogo-PSC8-CH5pP8yn.png",koe=()=>{const[t,e]=Q.useState(""),[n,r]=Q.useState(""),i=Pu(),o=async()=>{try{switch(await Eoe(t,n)){case"adopter":i.push("/adopterHome");break;case"pet owner":i.push("/petOwnerHome");break;case"admin":i.push("/adminHome");break;default:window.confirm("Wrong Username or Password")&&i.push("/login")}}catch(s){console.error(s)}};return p.jsx(Ht,{children:p.jsx(qt,{children:p.jsxs("div",{className:"login_box",children:[p.jsx("img",{className:"image_Login",src:Coe}),p.jsxs("div",{className:"rectangle_box",children:[p.jsx("img",{className:"image_Logo",src:Er}),p.jsx("h1",{className:"h1_login",children:"Login"}),p.jsxs(kL,{className:"login_form",children:[p.jsx("input",{className:"input_login",type:"text",placeholder:"Email",onChange:s=>e(s.target.value)}),p.jsx("input",{className:"input_login",type:"password",placeholder:"Password",onChange:s=>r(s.target.value)}),p.jsx("a",{children:p.jsx("input",{onClick:o,className:"submit_login",type:"submit",value:"Login"})}),p.jsxs("p",{children:["need account? ",p.jsx("a",{href:"/signup",children:"signup"})]})]})]})]})})})},F3="/assets/friendly-smart-basenji-dog-giving-his-paw-close-up-isolated-white 1-_xVyURnC.png",o0="/assets/dog 1-K5e42Fyy.png",bc="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABsCAYAAACPZlfNAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA8sSURBVHgB7Z17eFTVtcDXOmdm8gAk8foArY+rKfaKXrEI6rUPqlSYhNLKvdFkAty03uJHATMRi95LPy/tx1eLlRASwZZPLeWRR6cVtGTCo36mtlKxjVal1BYtWLVRkArmRebM2avrBPg+tDBnnzn7nEni/P45Z2bWOWefvfZzrbX3AGTJkiVLlixZsmTJkiVLlixZsgwVEAYQc+ZMyw92Jq/SAfTQUfHnBzdtPwAZoLS0VL8wcOSTR0VAGCPf3bdmTbsBA4QBobAFZeGrNQ2Xa4A3EFDoxPeEsJtA3NeRGPFkLBYzwWOqym/+IqJ+H2fLdfwxcPzrPiB4PJE071sd2/YaZJiMKywaKa4koseQOa2QoFheKDH3/nVPHQIPWFAaPjsQxGUE8NXTChEdJMC5KxvjP4MMklGFVZWFv44aruLToIT4yyGkkgc2tr4FCrk3UlJ4FGg7n15jJ8tFqpMzLFKzMb4FMkTGFFZdOqWIgvpOPj1b/ip8AXq6b6rd3HYYFFBden0eBQt/yacTZK/hDDsQRBqvuuDIokGGIF1fBo6U1X/VpzEvvx4UQYECKw3Syuq/BuCcBNH/Q4bISA2rnjm9iERyL6QBJzhBAmfUNrW0gAsWzJxSogs93aatN2jAJd+Pxd8Bn8lMDaPk7ZAmXMJDnOplC8JFOZAmC8LhM1hZqyB98hIBqIIM4LvClkyaFBACSsEVNFYrHPMNSBO9AG/lw0XgAh7U3my9C/iM7wp7b1T+OB5tXQou4abxTkgDnkIgX7wYXENjO8/MPx98xneFcZG8FtRw8fyyqdPBIdWR4i9Y14J7cswQXgE+438fptHFoAhdw9vAKYizQBEIdDX4TAYGHfhJUAQn/rOLpk8fISs/Z9q0fD6EQRGEVAQ+47/CEM4CRbCp6AJjGF0oK587nMbx4VxQBeLQ78PYLlgAChF68guyshqKiaAShJHgM74rLKWRN537CZRXgtZvhVcH+Z9/vj+QJ749oBQaKy0q4N9BJaT6XezJQA2Dd0Eh3I8VgoSJbckSfldE1/O/D4GkxAjtBP/7MMJ9oBDWVD57qvPs5HpemD4MTnKOKnr6X8BnfFeYSeJNUAgrLFfvIlu7Ym+OkQuKIdL/CD7ju8J0EPtBIdwnarl5SdsmUQsElb+rILEHfMZ3hSVQ3wVWnIQ6TDrUJ+yEAiDUxoQQ9OXpQmnzLoPvCjt7TPxNNr++CIrgGtZbcBi67OR6k11HQSHWO2TC6+y/e2UJCE3Ar0ARSPDekra2pJ3c6lhbNyicUvBzn4YMkBEHpilwHfRXDvdwSZf1+hI/8E+gCFOYzZABMqKwuuaW3TwnehkUwM6t5xyIt4ECeISzp75520uQAdLymC6oYBc7imGGlkysWvfU3yGt2iLq+NUfBZcIxF/KyqJJO0DHanAJEt4PaWBFFBcGDhbmaHm53Z3BI489+WQnOMSRwqoiJezap9kawXieg5wZJD0RrSjeTwK2sk3vR7XNLdLzkoK3e9e9Pzr//9x5n+kDs6f397LSQYEvGgHo5OIl7ZL5KJzefaKn21HwzoLS8OV6EOYDdF+PmH8pt815ZwxPdkcjxTs5LetrG+NNIFnopQyxcyMlhTlAj/DpjNSStM00YV59c+vrIEFVJDybm7QfQ9rgw7UNLY5iO6IVU5uBtFshXYT4am3T1rUyotFIySUE9F1W8gxWx+mDZQl29SGGH25oed/unrZ9GKsdc5CsCKMZYAtO0XR81lIESFA45toNlpIhXbTkIw6vADJFDaQJl+4tDpQ1mbX7PF9zW0plHbvxtTkknrQCW8EGW4VFI+FF/MBykIQTeC7XmkfvqgjbBrosWbJEJEJYyVc5XmTAXpof127Y9gI4ZGXT9l3s2o+DY+gtzqz5MpLVM8MsR09wKv8FZEH8DAUK/sdOLKXCKisr2f6GUon8CAFBuLQqUmzbwa9eG39HgFHGz3Gy0OENM9F3H6SJQeZCR88jSBJRyfKG+Bt2olUV4a+TQKsW54NDuDX7/v/OviWlklMq7Iy+jklcYz4BacLX1kTLwzfaydU1bG83jaOf4wQftJNlmbf0kDa1LvaLv0KaPNS4/VUByVK+l731g+igRjRxZeNW22lIdVnxNTyC/AHILe74J7jVyDkq+lJGgqVUmKZpU8AlnIi11aVTzrSTq489tUcXwfGcQY+R5Wo8Bfz9b00Dipev3fIquKSuYdvTWkD7PN9z32meZc20t2oUGl/T1GprSvtmZfEo0oD7ZHdzW66dN6X6PeXNifAqcAm/+AUQ1KUWMNQ0PfFmbWPr7eyUnMhN0Hf4K2sZ0DOcyEdQg7BhDLvxoVj8FVDEinVbng/qySs5lTP548/5hX9njdg441doemBC4WUTS6w0ydzL6IN7+XAZuIUoZZ6nHNbzHOtVfgH3ibAwjKtrYzuk50yDiXmR4ouCxGYvhLTj/U/AtfqdlY3x0af73aaGpdcWn5JgMCOLB/wgRLRYhbIseM6WUicpLR1c/Syz0yWghvK7Z91yz4PrNyldaG7NXQQWTkAdruHm9wrUsIg9i2fxm3M/SIfZOLyPLcS7NdKee7Gj89k2Ccu+E6zltmweK1UYCpbSo5DaNEXwF9aa7VJSSXISZu9X+LgGFBCdOWU0mHpUaFDGro7+YNL+TLNs8sdO+uX4txusc0ITxo3Oe/2q8uJtQlCNrDXGDk3Xrud5ncpYy5RxIimrHyfkeVAIT6i/DC6prJyUy1OFpST0PXzDRSeUJZcAvJSbnG/oGv7hzvKSxdGvTHKd0Xw/1+90MtwipMzz1H0YqPMMH3sYuqqt0Vkl/zYykf8bzqXFXInSz2zubzSkpZCf9/LC8mmfAhcgknTksRQatqX8OdWPBR29z4DEZFYWLgBnW5unQBpUV0y7BUx6kRU1DpSBF5hovhwtL5Y2vZ2M5S7pn7Yogw7lHOlfqH9aUirMcr3znEilZxVHdDpowo5TdVvxNCLxUz5VMhL7SJKCXOPWV1VMnenwQrgw0GsFsSpbhcl5HXvAxkdmOys3ybAs9UdAEUkt6cgXdddtX7qOR4AbwVvvuI6k//DOSMl4R1exExfUYQrT/IGdkG0mWHY3HnltBlUI+RC3e0onjxS6aY0qzwDPoXzuj7bMm32TtIU91JtjG60lDeITMmEHUqU2EDAX8aED3EPiMO6XFU4Ec5by4UrwCR5xjgoZOffIyt+/aZM1T1URY3kYkvAtGUEphT24fvsBrmUPgFsI3qtvbf1ARrS6dHoRz56ULW+VhYfVC+dYczxJce7/9oNrsF42vEK6X2CjbC27DjaAG5A2yYpS0LiDD74vmGO0YUK/V1pawOPgAi6U8beN/G/LyjvqyPuS3XPh2EZajmHrO2kY+JGMLA+XQ9ym3wEZgm1as0ky3kWgJvVOp+H5vxlv3OJka0FHClsda+vKMYZbASyOByHsF3uiZuPPpWIIRwV7Pucmsskt1qS8uiI8VUa2rmHLXn65WnAKYRsawybFYnsSTi5zPFReFosd6Rn+7q3H/VW2ixCO8ycMHJUONQig+CxkGO6cpC0YuQRWXrTLyNIxa+cKIxj6rxWxWC84RIc0aG/vELt2v9Y28fIxj7Mp5WIukf8Kp1E+Em0KaVC+fMOOt0GSa68cc7+b0AQVcItgTP1UsLFtz0Hb5urXr+w9+pmiKzabQfPM45aYUzenCL8KAP7niob42t++9KpjZR27hQIWVIQvDxDcaJVKLj3nsc2wWyC9QIib6za07HRyr6ry4jvYoGo7gfQargbciMB/1zXF1zu5rnpW8TVkQgnf4T9Y6cO5DergTN7J93pmRVP8d+CSjO5IegLLJjcq1DVaN7U5oIm7OFkqLQhpwxrr0hGXJ8HYWNewI63tAlWTUYVZ27f2koiiFexDZJmFfN8dTRLL6fkS15JmSiaa3URsuSUzG1zOnna+MMW3uH+bNVBqkyzc5JucaQ8lDPje6gxscOm7wqojU8uIcBX36rahbwMahLd5iLyobmO8AXzEN4XdPevmYUZSX8odsTW8H6hNn3MEPljb1PJN8AnfFvSZIriClRWFoaQsC43ujkZKVoNPpDUPc0p1pLiG2/55MHSZcP0VRSOe2/1aWmY7J3iusGNLj3AZDHUQJ1w3tuiPrDRP9+7wtA9bWD7tLBOFtRB8cA8w5Hm3RzOvXrNhmwrf4SnxtA8zNdNaEvRxUZbFueyaSXu3bxk8q2F3zpp8oWaGrIULPrj3BxLUlTCGj14di6kLHzgJz2qYlgxaAZYfM2VZ4PCcYG8leISHTSJKrXMeihCYznf7lsQThc2N3HQJN7YKAz4HGzhhkkf/GuGJwoKQa/1NxtCaIDsjZ9x5+Z78CYEnCkMhfN/PfaDB7jS1+wsfxxuFaTAKPuaggHPAA7wZdKAXMfCDC4E4ePowIs337cEHGhqisvUIH7oveACJpNKNmAcjhORJHnjTJGrk++bFA40EoSd54E0NM3Qr5sGTJmEwwCPEQw83tHiyp70nCquPtR4kIumNJ4caiODZ/zx7ZppC1Fzsgzi4YYu6Z3EenimsYMwEK/7e97+6yDTsWd/zVuKNNvAIzzzObW1tdN1Vl/XwGN/x/1QObnDeY807le2H9VE8dWD25Hdws/jx6cu4KXx6ZUNLDDzEU4WtWdNuCFOb73DzykEJAr1JQnwNPMbzMDdrj3oeMVr7YHTD0EUkBXy5tmnrfvAYX+ISVzbGd2gIZXzqeJ/2gQ8eNolurJfYBFMFvgWS1myMb4EkhblP+xsMHV7XTBGub2z1rZ/2PbZ+YaT4oiThYkC6Hd1utwpgLbbrQMADiLRHmPRXNou9hyeaX8R8ljqHCIvYuHc+f3Exy1muH7cFNYkETYlgX3TVuqd87Z8zttwoWjZ1EmraXZzpX3JyXb+SiFr4LE5Cf5Y+EHvrW1ul9sqw3Paf/sTwsaYQn2drxM0gYLITVxD1W51oMyt/2cqm+C7IABlf0De/7IvnaVqwlIt8KX+0vLQfWozev2EzwQFOaDs7Rhsg19y64tFtfwcFfG36DSNGDiuYQSDKrchdOEUMJT//fR4BvsK//8Qg2LJKYit0LxkQKzBP5p45k0f2duWeE0QzSKbZ2bX30Dtr2tsN8AFrhY3AwPlGn5mHuuhJGkaHtXMCZMmSJUuWLFmyZMmSJUuWLFmyZPGAfwAKkCZiMV2nSAAAAABJRU5ErkJggg==",s0="/assets/cat 1-DXmcPP6o.png",$3="/assets/Group 32-DrtocWDy.png",Soe=()=>{const[t,e]=Q.useState([]),n=Ie.storage().ref(),[r,i]=Q.useState("all");Q.useEffect(()=>{const a=async()=>{const c=(await n.child("images").listAll()).items.map(d=>d.getDownloadURL());return Promise.all(c)};(async()=>{const l=await a();e(l)})()},[]);const[o,s]=Q.useState([]);return Q.useEffect(()=>{(async()=>{const c=await Ie.firestore().collection("pets").orderBy("index").get(),d=await Promise.all(c.docs.map(async h=>{const f=h.data(),m=await n.child("images/".concat(f.index)).getDownloadURL();return{...f,id:h.id,imageUrl:m}}));s(d)})()},[]),p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/adopterHome",children:"Home"}),p.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),p.jsx("a",{href:"/appointmentlist",children:"Appointments"}),p.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsxs("div",{className:"welcomeBanner",children:[p.jsxs("p",{className:"welcomeText",children:["You can make a ",p.jsx("br",{}),"difference in their ",p.jsx("br",{}),"lives"]}),p.jsx("a",{href:"/adopterAdopt",children:p.jsx("div",{className:"AdoptAPet",children:p.jsx("p",{className:"AdoptAPet2",children:"Adopt A Pet"})})}),p.jsx("img",{className:"welcomeImg",src:F3})]}),p.jsxs("div",{className:"categories1",children:[p.jsx("h1",{className:"categories_h1",children:"Categories"}),p.jsxs("div",{className:"categories_container",children:[p.jsx("div",{className:"categories_box",onClick:()=>i("all"),children:p.jsx("img",{src:bc})}),p.jsx("div",{className:"categories_box",onClick:()=>i("Dog"),children:p.jsx("img",{src:o0})}),p.jsx("div",{className:"categories_box",onClick:()=>i("Cat"),children:p.jsx("img",{src:s0})})]})]}),p.jsxs("div",{className:"adoption1",children:[p.jsx("h1",{className:"adpotion_h1",children:"For Adoption"}),p.jsxs("div",{className:"adoption_container",children:[o.filter(a=>r==="all"||a.type.toLowerCase()===r.toLowerCase()).slice(0,3).map((a,u)=>p.jsxs("div",{className:"adoption_box",children:[p.jsx("img",{className:"adoption_image",src:a.imageUrl,alt:a.name}),p.jsx("p",{className:"adoption_text",children:a.breed}),p.jsxs("p",{className:"adoption_desc",children:["Age: ",a.age," Years Old"]}),p.jsxs("p",{className:"adoption_desc",children:["Gender: ",a.gender]}),p.jsxs("p",{className:"adoption_desc",children:["Weight: ",a.weight," kg"]}),p.jsxs("p",{className:"adoption_desc",children:["Address: ",a.location]}),p.jsxs("p",{className:"adoption_desc",children:["Status: ",a.status]}),p.jsx(Bo,{to:"/adopterAdoptme/".concat(a.id),children:p.jsx("div",{className:"adoptMe",children:p.jsx("p",{className:"adoption_button",children:"Adopt Me"})})})]},a.id)),p.jsxs("div",{className:"adoption_box2",children:[p.jsx("img",{src:bc}),p.jsx("a",{href:"/adopterAdopt",children:p.jsx("div",{className:"adoptMe2",children:p.jsx("p",{className:"adoption_button",children:"Meet More"})})})]})]})]}),p.jsxs("div",{className:"adoptionProcess",children:[p.jsxs("p",{className:"adoptionProcessText",children:["Adoption",p.jsx("br",{}),"Process"]}),p.jsx("div",{className:"adoptionProcess_img",children:p.jsx("img",{src:$3})})]})]})})},Aoe=()=>{const[t,e]=Q.useState([]),n=Ie.storage().ref(),[r,i]=Q.useState("all");Q.useEffect(()=>{const a=async()=>{const c=(await n.child("images").listAll()).items.map(d=>d.getDownloadURL());return Promise.all(c)};(async()=>{const l=await a();e(l)})()},[]);const[o,s]=Q.useState([]);return Q.useEffect(()=>{(async()=>{const c=await Ie.firestore().collection("pets").orderBy("index").get(),d=await Promise.all(c.docs.map(async h=>{const f=h.data(),m=await n.child("images/".concat(f.index)).getDownloadURL();return{...f,id:h.id,imageUrl:m}}));s(d)})()},[]),p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/petOwnerHome",children:"Home"}),p.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),p.jsx("a",{href:"/rehome",children:"Rehome"}),p.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsxs("div",{className:"welcomeBanner",children:[p.jsxs("p",{className:"welcomeText",children:["You can make a ",p.jsx("br",{}),"difference in their ",p.jsx("br",{}),"lives"]}),p.jsx("a",{href:"/petOwnerAdopt",children:p.jsx("div",{className:"AdoptAPet",children:p.jsx("p",{className:"AdoptAPet2",children:"Adopt A Pet"})})}),p.jsx("img",{className:"welcomeImg",src:F3})]}),p.jsxs("div",{className:"categories1",children:[p.jsx("h1",{className:"categories_h1",children:"Categories"}),p.jsxs("div",{className:"categories_container",children:[p.jsx("div",{className:"categories_box",onClick:()=>i("all"),children:p.jsx("img",{src:bc})}),p.jsx("div",{className:"categories_box",onClick:()=>i("Dog"),children:p.jsx("img",{src:o0})}),p.jsx("div",{className:"categories_box",onClick:()=>i("Cat"),children:p.jsx("img",{src:s0})})]})]}),p.jsxs("div",{className:"adoption1",children:[p.jsx("h1",{className:"adpotion_h1",children:"For Adoption"}),p.jsxs("div",{className:"adoption_container",children:[o.filter(a=>r==="all"||a.type.toLowerCase()===r.toLowerCase()).slice(0,3).map((a,u)=>p.jsxs("div",{className:"adoption_box",children:[p.jsx("img",{className:"adoption_image",src:a.imageUrl,alt:a.name}),p.jsx("p",{className:"adoption_text",children:a.breed}),p.jsxs("p",{className:"adoption_desc",children:[a.age," Years Old"]}),p.jsx("p",{className:"adoption_desc",children:a.gender}),p.jsxs("p",{className:"adoption_desc",children:[a.weight," kg"]}),p.jsx("p",{className:"adoption_desc",children:a.location}),p.jsxs("p",{className:"adoption_desc",children:["Status: ",a.status]}),p.jsx(Bo,{to:"/petOwnerAdoptme/".concat(a.id),children:p.jsx("div",{className:"adoptMe",children:p.jsx("p",{className:"adoption_button",children:"Adopt Me"})})})]},a.id)),p.jsxs("div",{className:"adoption_box2",children:[p.jsx("img",{src:bc}),p.jsx("a",{href:"/petOwnerAdopt",children:p.jsx("div",{className:"adoptMe2",children:p.jsx("p",{className:"adoption_button",children:"Meet More"})})})]})]})]}),p.jsxs("div",{className:"adoptionProcess",children:[p.jsxs("p",{className:"adoptionProcessText",children:["Adoption",p.jsx("br",{}),"Process"]}),p.jsx("div",{className:"adoptionProcess_img",children:p.jsx("img",{src:$3})})]})]})})},Roe=()=>{const[t,e]=Q.useState([]),n=Ie.storage().ref(),[r,i]=Q.useState("all");Q.useEffect(()=>{const a=async()=>{const c=(await n.child("images").listAll()).items.map(d=>d.getDownloadURL());return Promise.all(c)};(async()=>{const l=await a();e(l)})()},[]);const[o,s]=Q.useState([]);return Q.useEffect(()=>{(async()=>{const c=await Ie.firestore().collection("pets").orderBy("index").get(),d=await Promise.all(c.docs.map(async h=>{const f=h.data(),m=await n.child("images/".concat(f.index)).getDownloadURL();return{...f,id:h.id,imageUrl:m}}));s(d)})()},[]),p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/adopterHome",children:"Home"}),p.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),p.jsx("a",{href:"/appointmentlist",children:"Appointments"}),p.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsxs("div",{className:"categories2",children:[p.jsx("h1",{className:"categories_h1",children:"Categories"}),p.jsxs("div",{className:"categories_container",children:[p.jsx("div",{className:"categories_box",onClick:()=>i("all"),children:p.jsx("img",{src:bc})}),p.jsx("div",{className:"categories_box",onClick:()=>i("Dog"),children:p.jsx("img",{src:o0})}),p.jsx("div",{className:"categories_box",onClick:()=>i("Cat"),children:p.jsx("img",{src:s0})})]})]}),p.jsxs("div",{className:"adoption2",children:[p.jsx("h1",{className:"adpotion_h1",children:"For Adoption"}),p.jsx("div",{className:"adoption_container",children:o.filter(a=>r==="all"||a.type.toLowerCase()===r.toLowerCase()).map((a,u)=>p.jsxs("div",{className:"adoption_box",children:[p.jsx("img",{className:"adoption_image",src:a.imageUrl,alt:a.name}),p.jsx("p",{className:"adoption_text",children:a.breed}),p.jsxs("p",{className:"adoption_desc",children:["Age: ",a.age," Years Old"]}),p.jsxs("p",{className:"adoption_desc",children:["Gender: ",a.gender]}),p.jsxs("p",{className:"adoption_desc",children:["Weight: ",a.weight," kg"]}),p.jsxs("p",{className:"adoption_desc",children:["Address: ",a.location]}),p.jsxs("p",{className:"adoption_desc",children:["Status: ",a.status]}),p.jsx(Bo,{to:"/adopterAdoptme/".concat(a.id),children:p.jsx("div",{className:"adoptMe",children:p.jsx("p",{className:"adoption_button",children:"Adopt Me"})})})]},a.id))})]})]})})},Noe=()=>{const[t,e]=Q.useState([]),n=Ie.storage().ref(),[r,i]=Q.useState("all");Q.useEffect(()=>{const a=async()=>{const c=(await n.child("images").listAll()).items.map(d=>d.getDownloadURL());return Promise.all(c)};(async()=>{const l=await a();e(l)})()},[]);const[o,s]=Q.useState([]);return Q.useEffect(()=>{(async()=>{const c=await Ie.firestore().collection("pets").orderBy("index").get(),d=await Promise.all(c.docs.map(async h=>{const f=h.data(),m=await n.child("images/".concat(f.index)).getDownloadURL();return{...f,id:h.id,imageUrl:m}}));s(d)})()},[]),p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/petOwnerHome",children:"Home"}),p.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),p.jsx("a",{href:"/rehome",children:"Rehome"}),p.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsxs("div",{className:"categories2",children:[p.jsx("h1",{className:"categories_h1",children:"Categories"}),p.jsxs("div",{className:"categories_container",children:[p.jsx("div",{className:"categories_box",onClick:()=>i("all"),children:p.jsx("img",{src:bc})}),p.jsx("div",{className:"categories_box",onClick:()=>i("Dog"),children:p.jsx("img",{src:o0})}),p.jsx("div",{className:"categories_box",onClick:()=>i("Cat"),children:p.jsx("img",{src:s0})})]})]}),p.jsxs("div",{className:"adoption2",children:[p.jsx("h1",{className:"adpotion_h1",children:"For Adoption"}),p.jsx("div",{className:"adoption_container",children:o.filter(a=>r==="all"||a.type.toLowerCase()===r.toLowerCase()).map((a,u)=>p.jsxs("div",{className:"adoption_box",children:[p.jsx("img",{className:"adoption_image",src:a.imageUrl,alt:a.name}),p.jsx("p",{className:"adoption_text",children:a.breed}),p.jsxs("p",{className:"adoption_desc",children:["Age: ",a.age," Years Old"]}),p.jsxs("p",{className:"adoption_desc",children:["Gender: ",a.gender]}),p.jsxs("p",{className:"adoption_desc",children:["Weight: ",a.weight," kg"]}),p.jsxs("p",{className:"adoption_desc",children:["Address: ",a.location]}),p.jsxs("p",{className:"adoption_desc",children:["Status: ",a.status]}),p.jsx(Bo,{to:"/petOwnerAdoptme/".concat(a.id),children:p.jsx("div",{className:"adoptMe",children:p.jsx("p",{className:"adoption_button",children:"Adopt Me"})})})]}))})]}),p.jsx("div",{className:"space"})]})})},Poe=()=>{const[t,e]=Q.useState(null),[n,r]=Q.useState(null),{id:i}=Nc();return Q.useEffect(()=>{(async()=>{const a=await Ie.firestore().collection("pets").doc(i).get(),u={id:a.id,...a.data()};e(u)})()},[i]),Q.useEffect(()=>{const o=async()=>t?await Ie.storage().ref().child("images/".concat(t.index)).getDownloadURL():null;(async()=>{const a=await o();r(a),console.log(n)})()},[t]),t?p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/adopterHome",children:"Home"}),p.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),p.jsx("a",{href:"/appointmentlist",children:"Appointments"}),p.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsx("div",{className:"details",children:p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"details_textSquare",children:[p.jsx("h1",{className:"details_h1",children:t.name}),p.jsxs("h2",{className:"details_h2",children:[p.jsx("b",{children:"Type:"})," ",t.type]}),p.jsxs("h2",{className:"details_h2",children:[p.jsx("b",{children:"Gender:"})," ",t.gender]}),p.jsxs("h2",{className:"details_h2",children:[p.jsx("b",{children:"Breed:"})," ",t.breed]}),p.jsxs("h2",{className:"details_h2",children:[p.jsx("b",{children:"Neutered:"})," ",t.neutered]}),p.jsxs("h2",{className:"details_h2",children:[p.jsx("b",{children:"Age (months):"})," ",t.age]}),p.jsx(Bo,{to:"/appointment/".concat(t.id),children:p.jsx("div",{className:"details_appointment",children:p.jsx("p",{className:"details_appointment2",children:"Take a QnA & Make an Appointment"})})})]}),n&&p.jsx("img",{className:"details_img",src:n}),p.jsx("h1",{className:"details_aboutme",children:"About Me"}),p.jsx("p",{className:"details_desc",children:t.about}),p.jsx("h1",{className:"details_caretaker",children:"Caretaker"}),p.jsx("div",{className:"caretaker_container",children:p.jsxs("div",{className:"caretaker_box",children:[p.jsxs("h1",{className:"caretaker_h1",children:["Caretaker: ",t.caretakerInfo]}),p.jsxs("h2",{className:"caretaker_h2",children:["Location: ",t.address," | Contact Number: ",t.caretakerNumber]})]})}),p.jsx("div",{className:"space2"})]})})]})}):p.jsx("div",{children:"Loading..."})},Doe=()=>{const[t,e]=Q.useState(null),[n,r]=Q.useState(null),{id:i}=Nc();return Q.useEffect(()=>{(async()=>{const a=await Ie.firestore().collection("pets").doc(i).get(),u={id:a.id,...a.data()};e(u)})()},[i]),Q.useEffect(()=>{const o=async()=>t?await Ie.storage().ref().child("images/".concat(t.index)).getDownloadURL():null;(async()=>{const a=await o();r(a),console.log(n)})()},[t]),t?p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/petOwnerHome",children:"Home"}),p.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),p.jsx("a",{href:"/rehome",children:"Rehome"}),p.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsx("div",{className:"details",children:p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"details_textSquare",children:[p.jsx("h1",{className:"details_h1",children:t.name}),p.jsxs("h2",{className:"details_h2",children:[p.jsx("b",{children:"Type:"})," ",t.type]}),p.jsxs("h2",{className:"details_h2",children:[p.jsx("b",{children:"Gender:"})," ",t.gender]}),p.jsxs("h2",{className:"details_h2",children:[p.jsx("b",{children:"Breed:"})," ",t.breed]}),p.jsxs("h2",{className:"details_h2",children:[p.jsx("b",{children:"Neutered:"})," ",t.neutered]}),p.jsxs("h2",{className:"details_h2",children:[p.jsx("b",{children:"Age (months):"})," ",t.age]})]}),n&&p.jsx("img",{className:"details_img",src:n}),p.jsx("h1",{className:"details_aboutme",children:"About Me"}),p.jsx("p",{className:"details_desc",children:t.about}),p.jsx("h1",{className:"details_caretaker",children:"Caretaker"}),p.jsx("div",{className:"caretaker_container",children:p.jsxs("div",{className:"caretaker_box",children:[p.jsxs("h1",{className:"caretaker_h1",children:["Caretaker: ",t.caretakerInfo]}),p.jsxs("h2",{className:"caretaker_h2",children:["Location: ",t.address," | Contact Number: ",t.caretakerNumber]})]})}),p.jsx("div",{className:"space2"})]})})]})}):p.jsx("div",{children:"Loading..."})},o2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function s2(){let t="";for(let e=0;e<20;e++)t+=o2.charAt(Math.floor(Math.random()*o2.length));return t}var Ooe=Ie.firestore();const Loe=()=>{const t=Pu(),[e,n]=Q.useState(null),[r,i]=Q.useState(null),[o,s]=Q.useState(null),{id:a}=Nc(),[u,l]=Q.useState({q1:"",q2:"",q3:"",q4:"",q5:"",q6:"",q7:"",q8:"",q9:"",q10:"",q11:"",q12:"",q13:"",q14:"",q15:"",q16:"",q17:"",q18:"",q19:"",pet_index:"",appoint_name:"",appoint_number:"",appoint_email:"",appoint_address:"",appoint_date:"",pet_name:"",pet_caretaker:"",pet_number:"",pet_location:"",index:s2(),status:"Pending",imageUrl:"documents/".concat(s2())});Q.useEffect(()=>{(async()=>{const v=await Ie.firestore().collection("pets").doc(a).get(),y={id:v.id,...v.data()};n(y),l({...u,pet_index:y.index.toString(),pet_name:y.name.toString(),pet_caretaker:y.caretakerInfo.toString(),pet_number:y.caretakerNumber.toString(),pet_location:y.location.toString()})})()},[a]);const c=f=>{l({...u,[f.target.name]:f.target.value})},d=f=>{f.target.files&&s(f.target.files[0])};Q.useEffect(()=>{const f=async()=>e?await Ie.storage().ref().child("images/".concat(e.index)).getDownloadURL():null;(async()=>{const v=await f();i(v),console.log(r)})()},[e]);const h=async f=>{if(f.preventDefault(),u.q1,u.q2,u.q3,u.q4,u.q5,u.q6,u.q7,u.q8,u.q9,u.q10,u.q11,u.q12,u.q13,u.q14,u.q15,u.q16,u.q17,u.q18,u.q19===""){alert('Please go back to "QnA" answer all questions.');return}if(o){const m=ov(V3,"documents/".concat(u.index)),v=OT(m,o);v.on("state_changed",y=>{},y=>{console.log(y)},()=>{LT(v.snapshot.ref).then(y=>{l({...u,imageUrl:y}),IT(Wy(Ooe,"appointment"),u)})})}t.push("/adopterHome")};return e?p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/adopterHome",children:"Home"}),p.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),p.jsx("a",{href:"/appointmentlist",children:"Appointments"}),p.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsxs("div",{className:"appointment",children:[p.jsx("h1",{className:"appointment_h1",children:"Question and Answer & Make An Appointment"}),p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"appointment_container",children:p.jsxs("div",{className:"appointment_box",children:[r&&p.jsx("img",{src:r}),p.jsx("h1",{className:"appointment_texth1",children:e.name}),p.jsxs("h2",{className:"appointment_h2",children:["Caretaker: ",e.caretakerInfo]}),p.jsx("h2",{className:"appointment_h2",children:e.location}),p.jsx("h2",{className:"appointment_h2",children:e.caretakerNumber})]})}),p.jsx("form",{onSubmit:h,children:p.jsx("div",{className:"qnaBox",children:p.jsxs("div",{className:"qnaform",children:["Please Answer the Questions",p.jsx("br",{}),p.jsx("p",{children:"1. Do you own your home?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q1",value:"Yes",checked:u.q1==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q1",value:"No",checked:u.q1==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"2. If renting, do you have permission from your landlord to have pets?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q2",value:"Yes",checked:u.q2==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q2",value:"No",checked:u.q2==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"3. Are there children in your household?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q3",value:"Yes",checked:u.q3==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q3",value:"No",checked:u.q3==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"4. Do you have other pets at home?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q4",value:"Yes",checked:u.q4==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q4",value:"No",checked:u.q4==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"5. Have you owned a pet before?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q5",value:"Yes",checked:u.q5==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q5",value:"No",checked:u.q5==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"6. Are you familiar with the specific needs of the chosen pet type/breed?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q6",value:"Yes",checked:u.q6==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q6",value:"No",checked:u.q6==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"7. Do you have a stable daily routine?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q7",value:"Yes",checked:u.q7==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q7",value:"No",checked:u.q7==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"8. Are you away from home for long periods during the day?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q8",value:"Yes",checked:u.q8==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q8",value:"No",checked:u.q8==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"9. Can you afford the costs associated with pet ownership, including food, veterinary care, and unexpected expenses?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q9",value:"Yes",checked:u.q9==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q9",value:"No",checked:u.q9==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"10. Do you have a regular veterinarian?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q10",value:"Yes",checked:u.q10==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q10",value:"No",checked:u.q10==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"11. Are you willing to provide regular veterinary care, including vaccinations and routine check-ups?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q11",value:"Yes",checked:u.q11==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q11",value:"No",checked:u.q11==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"12. Are you willing to attend training classes if necessary?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q12",value:"Yes",checked:u.q12==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q12",value:"No",checked:u.q12==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"13. Do you have experience in training pets?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q13",value:"Yes",checked:u.q13==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q13",value:"No",checked:u.q13==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"14. Will the pet primarily be kept indoors?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q14",value:"Yes",checked:u.q14==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q14",value:"No",checked:u.q14==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"15. Do you have a secure, fenced yard?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q15",value:"Yes",checked:u.q15==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q15",value:"No",checked:u.q15==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"16. Do you have a plan for emergencies or unforeseen circumstances?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q16",value:"Yes",checked:u.q16==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q16",value:"No",checked:u.q16==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"17. Are you willing to spay/neuter your pet if it is not already done?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q17",value:"Yes",checked:u.q17==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q17",value:"No",checked:u.q17==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"18. Can you provide personal or veterinarian references?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q18",value:"Yes",checked:u.q18==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q18",value:"No",checked:u.q18==="No",onChange:c})," No"]})]}),p.jsx("p",{children:"19. Are you willing to allow a representative from the pet owner to conduct a home visit?"}),p.jsxs("div",{className:"AddPet_radio",children:[p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q19",value:"Yes",checked:u.q19==="Yes",onChange:c})," Yes"]}),p.jsxs("label",{className:"radioMargin",children:[p.jsx("input",{type:"radio",name:"q19",value:"No",checked:u.q19==="No",onChange:c})," No"]})]}),p.jsx("div",{className:"scheduleBox1",children:p.jsxs("div",{className:"scheduleform",children:[p.jsx("h1",{className:"schedule_h1",children:"Schedule Your Visit"}),p.jsx("h3",{className:"schedule_h1",children:"Insert ID Here"}),p.jsx("input",{type:"file",className:"schedule_file",onChange:d}),p.jsx("input",{className:"schedule_input1",type:"date",name:"appoint_date",value:u.appoint_date,onChange:c}),p.jsx("h1",{className:"schedule_h1",children:"Fill your details"}),p.jsx("input",{className:"schedule_input1",type:"text",name:"appoint_name",value:u.appoint_name,onChange:c,placeholder:"Full Name"}),p.jsx("input",{className:"schedule_input1",type:"text",name:"appoint_number",value:u.appoint_number,onChange:c,placeholder:"Phone Number"}),p.jsx("input",{className:"schedule_input1",type:"email",name:"appoint_email",value:u.appoint_email,onChange:c,placeholder:"Email"}),p.jsx("input",{className:"schedule_input1",type:"text",name:"appoint_address",value:u.appoint_address,onChange:c,placeholder:"Address"}),p.jsx("input",{className:"hidden_input",type:"text",name:"pet_index",value:u.pet_index||"",onChange:c,disabled:!0}),p.jsx("input",{className:"hidden_input",type:"text",name:"pet_name",value:u.pet_name||"",onChange:c,disabled:!0}),p.jsx("input",{className:"hidden_input",type:"text",name:"pet_number",value:u.pet_number||"",onChange:c,disabled:!0}),p.jsx("input",{className:"hidden_input",type:"text",name:"pet_caretaker",value:u.pet_caretaker||"",onChange:c,disabled:!0}),p.jsx("input",{className:"hidden_input",type:"text",name:"pet_location",value:u.pet_location||"",onChange:c,disabled:!0})]})}),p.jsx("input",{className:"schedule_submit1",type:"submit"})]})})})]})]})]})}):p.jsx("div",{children:"Loading..."})},Moe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAtCAYAAAADfVPBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMwSURBVHgB7ZpBbtpAFED/d5FitQriCDlAF/QG5QZk0ZSki8Kyq5Bdd4ETkJ4gdAMEKsENSm/AogfgBnVbqSJV8HS+EWDDzHjGHgNCfYskzNjjeXj+t/8oCHsk37+6RubX+Z9nAGzi+/jp92WvDQlB2BP5QeUWfWhstjMHGr/e9JqQgGewB2QiBDJ4ffL2JTwOvn8DQxzYMfmHy9aWCINx+CP15/uVezBkpzI0QQRWD7fxiTd/Vnol+h1pZ1A1FdpJzBTuywX/hduiCYbbkeGNV+nerY7rVqo8ZjYE2Aj/PNa82siLu07mMiTCnp985ZcqRi7sQ80TZC6J0IQLleKEMl1mYhH0ZCIEtfP+Eh0XOqdI49B4oCAzGf4NnwnvCMylIkt4/xgRt4R8162rzstEJhBxYEuEYOC0qD9uDO+iM1kIhUBWVJ1jXWYtQk91IUF/nFCwRNl8I3bwh+ocqzISkekiBmAaalMKyWLNYaB8M7AmoxIJYkBTSBxrPGnwJcfHmarmYCU1F/pXRcYYnwALZ5ulyBTCE90S5hN9eip57wYTaT+J8BiKmUZ6GV2R1fGyCfMsR8kBNu8sOuc6IsEokILTL5fvnTncRUXiH3CFIY+JvyfCbBdC+oXISCyzEGHtaKvek5qIETIWIRIlAJEIv/hnXRHCOx/xNwG8EXQlEgnmAIaIahES4RevggGmsaaD0Z2xJvJwUd4WoSU6e5VUhNCWkYg0TUVoifKsNTRNGjpoyShEGmCAjVhTERszQZkrqA5NRWwtURVKmaDM3awOD1SEkC4zoQiVuXZEmrZFgnE3G0zLXBW2Yk2XyL6Zosz9YCxCscbgY7gtSxEiF/nkumX+U/Dq3dV60VuyWKKsGm7LWoTIqTqDev2in0BEFGvrLaWsUMqA72jn/tUSZSCItW4bdoCVStNm0khDDlKyKLbYUFzmdoyWaFpSyYS2lM7Wrfplrm0SLzPpBsaeRAjlnfGRlU8l20Fc5BaEOzGdKewJdWpGvEa98i1VUWULG9nsIESItDIHI0JEl9lsNkLXHYMus5lno6j6z7GD+W6lAUdCDhfPi6Ng5/8HkCVHJfMPZJIG4Xp+O78AAAAASUVORK5CYII=",B3="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAABBCAYAAABmd3xuAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHiSURBVHgB7do/TsMwFAbw77lFYmqTjYXKnIAjUDYGKOEI3ABOAJwAOAE9QvkzMJYbcIQIGNhquoAE2DgFBtIOqcFQ8d5PihKlierPdey6NSCEEEKI/4oQ0XB9MXOKDhGIrNttXNz2EEkdMRESX7saofz9iKhy+EE7SeaTZKrCvFrbtAiniJqPmdbT3PNkjEn7xlS5tnKzf+i09v3Fe5hxDjhont3sV7lWgTEJzxXr8JV7e6tUFy8v/eK4ptQJSkOY72iOrbXRxuRPSqn2hI7X+JFla3RUr+eoqHL4tJfnfldsGHZaY6+Tc9fpxV0fkQ03FjVobJAyIe8tzzxX0uHFMlhb0LW5ufaXkw5m0mSlmASVv8u/Pj/308v7HJFEDT8KTnTy5SSNOs3xUeF99qdL92/7XReRyDPPlYTnSsJzJeG5kvBcSXiuJDxXEp4rCc+VhOdKwnMlf1rE0ji/7aLi7+6Ns5sl/DJp9lxJeK5+ssPbfOi0NGIjWoZz+Alh4YlyXwBdOpcRkCG2ScGdyxEgqNk7564wQxzoFAGCwluljtzH4qS/VpTD1lTQKrCg8GkvN74CVv+6AkbBfTk+VopN7Vvr7QeZ1sraHX+44reoy8NLilXVp0ULLD4ICCGEEEKUvAH7tYCNvGG0BgAAAABJRU5ErkJggg==",Voe=()=>{const[t,e]=Q.useState([]),n=Ie.storage().ref();Q.useEffect(()=>{const s=async()=>{const l=(await n.child("images").listAll()).items.map(c=>c.getDownloadURL());return Promise.all(l)};(async()=>{const u=await s();e(u)})()},[]);const[r,i]=Q.useState([]);Q.useEffect(()=>{(async()=>{const c=(await Ie.firestore().collection("pets").orderBy("index").get()).docs.map(d=>({...d.data(),id:d.id}));i(c)})()},[]);const o=async(s,a)=>{const l=Ie.firestore().collection("pets").doc(s),d=Ie.storage().ref().child("images/".concat(a));window.confirm("Are you sure you want to delete this pet?")&&(d.delete().then(()=>{console.log("Image deleted from Firebase Storage.")}).catch(h=>{console.error("Error deleting image from Firebase Storage:",h)}),await l.delete(),i(r.filter(h=>h.id!==s)))};return p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/petOwnerHome",children:"Home"}),p.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),p.jsx("a",{href:"/rehome",children:"Rehome"}),p.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsxs("div",{className:"rehome",children:[p.jsx("h1",{className:"rehome_h1",children:"Pet Listed"}),p.jsx("a",{href:"/addpet",children:p.jsx("h1",{className:"addnewpet",children:"Add Pet"})}),p.jsx("div",{className:"rehome_container",children:r.map((s,a)=>p.jsxs("div",{className:"rehome_box",children:[p.jsx("img",{className:"rehome_img",src:t[a],alt:s.name},a),p.jsx("h1",{className:"rehome_texth1",children:s.name},a),p.jsxs("h2",{className:"rehome_h2",children:["Owner Information: ",s.caretakerInfo]},a),p.jsxs("h2",{className:"rehome_h2",children:["Address: ",s.location]},a),p.jsxs("h2",{className:"rehome_h2",children:["Neutered:",s.neutered]},a),p.jsxs("h2",{className:"rehome_h2",children:["Status:",s.status]},a),p.jsx(Bo,{className:"edit",to:"/updatePet/".concat(s.id),children:p.jsx("img",{className:"edit",src:Moe})}),p.jsx("img",{className:"delete",src:B3,onClick:()=>o(s.id,s.index)})]}))}),p.jsx("div",{className:"space3"})]})]})})},Foe="/assets/Group 54-BH8CYfnq.png",a2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function $oe(){let t="";for(let e=0;e<20;e++)t+=a2.charAt(Math.floor(Math.random()*a2.length));return t}const Boe=()=>{const t=Pu(),[e,n]=Q.useState({index:$oe(),name:"",age:"",breed:"",location:"",about:"",caretakerInfo:"",caretakerNumber:"",weight:"",gender:"male",neutered:"yes",type:"cat",imageUrl:"images/".concat(Date.now()),status:"Available",address:""}),[r,i]=Q.useState(null),o=u=>{n({...e,[u.target.name]:u.target.value})},s=u=>{u.target.files&&i(u.target.files[0])},a=async u=>{if(u.preventDefault(),r){const l=ov(V3,"images/".concat(e.index)),c=OT(l,r);c.on("state_changed",d=>{},d=>{console.log(d)},()=>{LT(c.snapshot.ref).then(d=>{n({...e,imageUrl:d}),IT(Wy(_oe,"pets"),e)})})}t.push("/rehome")};return p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/petOwnerHome",children:"Home"}),p.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),p.jsx("a",{href:"/rehome",children:"Rehome"}),p.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsx("div",{className:"AddPet",children:p.jsxs("div",{className:"AddPetBox",children:[p.jsx("h1",{className:"AddPetBoxH1",children:"Re-Home Pet"}),p.jsx("img",{src:Foe}),p.jsxs("form",{onSubmit:a,className:"AddPetform",children:[p.jsx("input",{type:"file",onChange:s}),p.jsx("input",{type:"text",className:"AddPetForm_input",placeholder:"Pet Name",name:"name",value:e.name,onChange:o}),p.jsx("input",{type:"text",className:"AddPetForm_input",placeholder:"Age",name:"age",value:e.age,onChange:o}),p.jsx("div",{className:"AddPet_dropdown",children:p.jsxs("select",{className:"AddPet_dropbtn",name:"gender",value:e.gender,onChange:o,children:[p.jsx("option",{value:"",children:"Select Gender"}),p.jsx("option",{value:"male",children:"Male"}),p.jsx("option",{value:"female",children:"Female"})]})}),p.jsx("div",{className:"AddPet_dropdown",children:p.jsxs("select",{className:"AddPet_dropbtn",name:"neutered",value:e.neutered,onChange:o,children:[p.jsx("option",{value:"",children:"Select Neutered"}),p.jsx("option",{value:"Yes",children:"Yes"}),p.jsx("option",{value:"No",children:"No"})]})}),p.jsx("div",{className:"AddPet_dropdown",children:p.jsxs("select",{className:"AddPet_dropbtn",name:"type",value:e.type,onChange:o,children:[p.jsx("option",{value:"",children:"Select Type"}),p.jsx("option",{value:"Cat",children:"Cat"}),p.jsx("option",{value:"Dog",children:"Dog"})]})}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Breed",name:"breed",value:e.breed,onChange:o}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Weight (kg)",name:"weight",value:e.weight,onChange:o}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Address",name:"location",value:e.location,onChange:o}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"About",name:"about",value:e.about,onChange:o}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Name",name:"caretakerInfo",value:e.caretakerInfo,onChange:o}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Number",name:"caretakerNumber",value:e.caretakerNumber,onChange:o}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Location",name:"address",value:e.address,onChange:o}),p.jsx("a",{href:"/home",children:p.jsx("button",{className:"AddPet_submit",type:"submit",children:"Add Pet"})})]})]})})]})})},joe=()=>{const t=Pu(),{id:e}=Nc(),[n,r]=Q.useState({index:Date.now(),name:"",age:"",breed:"",location:"",about:"",caretakerInfo:"",caretakerNumber:"",weight:"",gender:"male",neutered:"yes",type:"cat",status:"available",address:""});Q.useEffect(()=>{(async()=>{const u=await Ie.firestore().collection("pets").doc(e).get();r(u.data())})()},[e]);const i=s=>{r({...n,[s.target.name]:s.target.value})},o=async(s,a)=>{s.preventDefault(),await Ie.firestore().collection("pets").doc(e).set(a),t.push("/rehome")};return n?p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/petOwnerHome",children:"Home"}),p.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),p.jsx("a",{href:"/rehome",children:"Rehome"}),p.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsx("div",{className:"AddPet",children:p.jsxs("div",{className:"AddPetBox",children:[p.jsx("h1",{className:"AddPetBoxH1",children:"Re-Home Pet"}),p.jsxs("form",{onSubmit:s=>o(s,n),className:"UpdatePetform",children:[p.jsx("input",{type:"text",className:"AddPetForm_input",placeholder:"Pet Name",name:"name",value:n.name,onChange:i}),p.jsx("input",{type:"text",className:"AddPetForm_input",placeholder:"Age",name:"age",value:n.age,onChange:i}),p.jsx("div",{className:"AddPet_dropdown",children:p.jsxs("select",{className:"AddPet_dropbtn",name:"gender",value:n.gender,onChange:i,children:[p.jsx("option",{value:"",children:"Select Gender"}),p.jsx("option",{value:"male",children:"Male"}),p.jsx("option",{value:"female",children:"Female"})]})}),p.jsx("div",{className:"AddPet_dropdown",children:p.jsxs("select",{className:"AddPet_dropbtn",name:"neutered",value:n.neutered,onChange:i,children:[p.jsx("option",{value:"",children:"Select Neutered"}),p.jsx("option",{value:"Yes",children:"Yes"}),p.jsx("option",{value:"No",children:"No"})]})}),p.jsx("div",{className:"AddPet_dropdown",children:p.jsxs("select",{className:"AddPet_dropbtn",name:"type",value:n.type,onChange:i,children:[p.jsx("option",{value:"",children:"Select Type"}),p.jsx("option",{value:"Cat",children:"Cat"}),p.jsx("option",{value:"Dog",children:"Dog"})]})}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Breed",name:"breed",value:n.breed,onChange:i}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Weight (kg)",name:"weight",value:n.weight,onChange:i}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Address",name:"location",value:n.location,onChange:i}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"About",name:"about",value:n.about,onChange:i}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Information",name:"caretakerInfo",value:n.caretakerInfo,onChange:i}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Number",name:"caretakerNumber",value:n.caretakerNumber,onChange:i}),p.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Location",name:"address",value:n.address,onChange:i}),p.jsx("a",{href:"/home",children:p.jsx("button",{className:"AddPet_submit",type:"submit",children:"Save"})})]})]})})]})}):p.jsx("div",{children:"Loading..."})},Uoe=()=>{const[t,e]=Q.useState([]),[n,r]=Q.useState([]),i=Ie.storage().ref();Q.useEffect(()=>{const s=async()=>{const l=(await i.child("documents").listAll()).items.map(c=>c.getDownloadURL());return Promise.all(l)};(async()=>{const u=await s();r(u)})()},[]),Q.useEffect(()=>{(async()=>{const l=await Ie.firestore().collection("appointment").orderBy("index").get(),c=await Promise.all(l.docs.map(async d=>{var m;const h=d.data(),f=await i.child("documents/".concat(h.index)).getDownloadURL();return{...h,id:d.id,imageUrl:f,index:(m=h.index)!=null?m:""}}));e(c)})()},[]);const o=async(s,a)=>{const l=Ie.firestore().collection("appointment").doc(s),d=Ie.storage().ref().child("documents/".concat(a));window.confirm("Are you sure you want to delete this appointment?")&&(d.delete().then(()=>{console.log("Image deleted from Firebase Storage.")}).catch(h=>{console.error("Error deleting image from Firebase Storage:",h)}),await l.delete(),e(t.filter(h=>h.id!==s)))};return p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/adopterHome",children:"Home"}),p.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),p.jsx("a",{href:"/appointmentlist",children:"Appointments"}),p.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsxs("div",{className:"rehome",children:[p.jsx("h1",{className:"rehome_h1",children:"Appointment List"}),p.jsx("div",{className:"rehome_container",children:t.map((s,a)=>p.jsxs("div",{className:"appointment_outerbox",children:[p.jsx("img",{className:"document_img",src:s.imageUrl,alt:s.index},a),p.jsxs("div",{className:"appointment_innerbox2",children:[p.jsx("h1",{className:"rehome_texth1",children:s.pet_name}),p.jsxs("h2",{className:"rehome_h2",children:["Owner Name: ",s.pet_caretaker]}),p.jsxs("h2",{className:"rehome_h2",children:["Owner Number: ",s.pet_number]}),p.jsxs("h2",{className:"rehome_h2",children:["Owner Address: ",s.pet_location]}),p.jsxs("h2",{className:"rehome_h2",children:["Your Name: ",s.appoint_name]}),p.jsxs("h2",{className:"rehome_h2",children:["Your Number: ",s.appoint_number]}),p.jsxs("h2",{className:"rehome_h2",children:["Your Email: ",s.appoint_email]}),p.jsxs("h2",{className:"rehome_h2",children:["Status: ",s.status]})]}),p.jsx("img",{className:"deleteImg2",src:B3,onClick:()=>o(s.id,s.index)})]},s.id))})]})]})})};/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var j3=function(t,e){return(j3=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var i in r)r.hasOwnProperty(i)&&(n[i]=r[i])})(t,e)};function Xo(t,e){function n(){this.constructor=t}j3(t,e),t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function pe(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})}function me(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(d){c=[6,d],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var U3=function(){function t(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return t.prototype.setPlatform=function(e,n){this.platform!=null&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+n+"."),this.platformName=e,this.platform=n},t.prototype.registerFlag=function(e,n,r){if(this.flagRegistry[e]={evaluationFn:n,setHook:r},this.urlFlags[e]!=null){var i=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+i+"."),this.set(e,i)}},t.prototype.get=function(e){return e in this.flags?this.flags[e]:(this.flags[e]=this.evaluateFlag(e),this.flags[e])},t.prototype.getNumber=function(e){return this.get(e)},t.prototype.getBool=function(e){return this.get(e)},t.prototype.getFlags=function(){return this.flags},Object.defineProperty(t.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),t.prototype.set=function(e,n){if(this.flagRegistry[e]==null)throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=n,this.flagRegistry[e].setHook!=null&&this.flagRegistry[e].setHook(n)},t.prototype.evaluateFlag=function(e){if(this.flagRegistry[e]==null)throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},t.prototype.setFlags=function(e){this.flags=Object.assign({},e)},t.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},t.prototype.populateURLFlags=function(){var e=this;if(this.global!==void 0&&this.global.location!==void 0&&this.global.location.search!==void 0){var n,r,i=(n=this.global.location.search,r={},n.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,function(o){for(var s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];return function(u,l,c){u[decodeURIComponent(l)]=decodeURIComponent(c||"")}(r,s[0],s[1]),s.join("=")}),r);"tfjsflags"in i&&i.tfjsflags.split(",").forEach(function(o){var s=o.split(":"),a=s[0],u=s[1];e.urlFlags[a]=function(l,c){if((c=c.toLowerCase())==="true"||c==="false")return c==="true";if(""+ +c===c)return+c;throw new Error("Could not parse value flag value "+c+" for flag "+l+".")}(a,u)})}},t}();function q(){return a0}var a0=null;function u2(t){for(var e=t.length,n=0,r=0;e>0;)r=Math.random()*e|0,n=t[--e],t[e]=t[r],t[r]=n}function sv(t,e,n){return Math.max(t,Math.min(e,n))}function MT(t){return t%2==0?t:t+1}function z3(t){for(var e=0,n=0;n<t.length;n++)e+=t[n];return e}function A(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function $e(t,e,n){n===void 0&&(n=""),A(an(t,e),function(){return n+" Shapes "+t+" and "+e+" must match"})}function Uu(t){A(t!=null,function(){return"The input to the tensor constructor must be a non-null value."})}function Mo(t,e,n){if(e===void 0&&(e=[]),n===void 0&&(n=!1),e==null&&(e=[]),Array.isArray(t)||xn(t)&&!n)for(var r=0;r<t.length;++r)Mo(t[r],e,n);else e.push(t);return e}function ve(t){if(t.length===0)return 1;for(var e=t[0],n=1;n<t.length;n++)e*=t[n];return e}function an(t,e){if(t===e)return!0;if(t==null||e==null||t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}function Et(t){return t%1==0}function W3(t){if(Math.tanh!=null)return Math.tanh(t);if(t===1/0)return 1;if(t===-1/0)return-1;var e=Math.exp(2*t);return(e-1)/(e+1)}function av(t){var e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}function Ja(t,e){return e<=t.length?t:t+" ".repeat(e-t.length)}function k_(t,e,n){return e===void 0&&(e=function(r){return 0}),new Promise(function(r,i){var o=0,s=function(){if(t())r();else{var a=e(++o);n!=null&&o>=n?i():setTimeout(s,a)}};s()})}function q3(t,e){for(var n=1,r=-1,i=0;i<t.length;++i)if(t[i]>=0)n*=t[i];else if(t[i]===-1){if(r!==-1)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(t[i]<0)throw Error("Shapes can not be < 0. Found "+t[i]+" at dim "+i);if(r===-1){if(e>0&&e!==n)throw Error("Size("+e+") must match the product of shape "+t);return t}if(n===0)throw Error("Cannot infer the missing size in ["+t+"] when there are 0 elements");if(e%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+e+" / "+n);var o=t.slice();return o[r]=e/n,o}function gn(t,e){var n=e.length;return A((t=t==null?e.map(function(r,i){return i}):[].concat(t)).every(function(r){return r>=-n&&r<n}),function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+t}),A(t.every(function(r){return Et(r)}),function(){return"All values in axis param must be integers but got axis "+t}),t.map(function(r){return r<0?n+r:r})}function gs(t,e){for(var n=[],r=[],i=e!=null&&Array.isArray(e)&&e.length===0,o=e==null||i?null:gn(e,t).sort(),s=0,a=0;a<t.length;++a){if(o!=null){if(o[s]===a&&t[a]!==1)throw new Error("Can't squeeze axis "+a+" since its dim '"+t[a]+"' is not 1");(o[s]==null||o[s]>a)&&t[a]===1&&(n.push(t[a]),r.push(a)),o[s]<=a&&s++}t[a]!==1&&(n.push(t[a]),r.push(a))}return{newShape:n,keptDims:r}}function ff(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else{if(t!=="bool")throw new Error("Unknown data type "+t);n=new Uint8Array(e)}return n}function pf(t,e){var n=null;if(t==null||t==="float32")n=new Float32Array(e);else if(t==="int32")n=new Int32Array(e);else if(t==="bool")n=new Uint8Array(e);else{if(t!=="string")throw new Error("Unknown data type "+t);n=new Array(e)}return n}function H3(t,e){for(var n=0;n<t.length;n++){var r=t[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+e+" being uploaded contains "+r+".")}}function G3(t){return t==="bool"||t==="complex64"||t==="float32"||t==="int32"||t==="string"}function K3(t,e){return e!=="complex64"&&(e!=="float32"||t==="complex64")&&(e!=="int32"||t==="float32"||t==="complex64")&&(e!=="bool"||t!=="bool")}function xn(t){return t instanceof Float32Array||t instanceof Int32Array||t instanceof Uint8Array}function VT(t){if(t==="float32"||t==="int32")return 4;if(t==="complex64")return 8;if(t==="bool")return 1;throw new Error("Unknown dtype "+t)}function Y3(t){if(t==null)return 0;var e=0;return t.forEach(function(n){return e+=n.length}),e}function _s(t){return typeof t=="string"||t instanceof String}function X3(t){return typeof t=="boolean"}function Q3(t){return typeof t=="number"}function Xc(t){return Array.isArray(t)?Xc(t[0]):t instanceof Float32Array?"float32":t instanceof Int32Array||t instanceof Uint8Array?"int32":Q3(t)?"float32":_s(t)?"string":X3(t)?"bool":"float32"}function Ks(t){return!!(t&&t.constructor&&t.call&&t.apply)}function uv(t,e){for(var n=e;n<t;++n)if(t%n==0)return n;return t}function aa(t){var e=t.length;if(e<2)return[];var n=new Array(e-1);n[e-2]=t[e-1];for(var r=e-3;r>=0;--r)n[r]=n[r+1]*t[r+1];return n}function FT(t,e,n){if(e==="string")throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(t)&&(t=Mo(t)),n&&H3(t,e),function(o,s){return o instanceof Float32Array&&s==="float32"||o instanceof Int32Array&&s==="int32"||o instanceof Uint8Array&&s==="bool"}(t,e))return t;if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool"){for(var r=new Uint8Array(t.length),i=0;i<r.length;++i)Math.round(t[i])!==0&&(r[i]=1);return r}throw new Error("Unknown data type "+e)}function S_(t,e){if(t.length===0)return e[0];var n=t.reduce(function(r,i){return r*i});if(n===0)return[];if(n!==e.length)throw new Error("["+t+"] does not match the input size.");return function r(i,o,s){var a=new Array;if(o.length===1)for(var u=o[0],l=0;l<u;l++)a[l]=s[i+l];else{u=o[0];var c=o.slice(1),d=c.reduce(function(h,f){return h*f});for(l=0;l<u;l++)a[l]=r(i+l*d,c,s)}return a}(0,t,e)}function $T(t,e){for(var n=Qc(t,e),r=0;r<n.length;r++)n[r]=1;return n}function Qc(t,e){if(e==null||e==="float32"||e==="complex64")return new Float32Array(t);if(e==="int32")return new Int32Array(t);if(e==="bool")return new Uint8Array(t);throw new Error("Unknown data type "+e)}function mi(){return q().platform.now()}function BT(t){t.forEach(function(e){A(Number.isInteger(e)&&e>=0,function(){return"Tensor must have a shape comprised of positive integers but got shape ["+t+"]."})})}function J3(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",q().platform.encode(t,e)}function mf(t,e){return e===void 0&&(e="utf-8"),e=e||"utf-8",q().platform.decode(t,e)}var xc=Object.freeze({shuffle:u2,clamp:sv,nearestLargerEven:MT,sum:z3,randUniform:function(t,e){var n=Math.random();return e*n+(1-n)*t},distSquared:function(t,e){for(var n=0,r=0;r<t.length;r++){var i=Number(t[r])-Number(e[r]);n+=i*i}return n},assert:A,assertShapesMatch:$e,assertNonNull:Uu,flatten:Mo,sizeFromShape:ve,isScalarShape:function(t){return t.length===0},arraysEqual:an,isInt:Et,tanh:W3,sizeToSquarishShape:av,createShuffledIndices:function(t){for(var e=new Uint32Array(t),n=0;n<t;++n)e[n]=n;return u2(e),e},rightPad:Ja,repeatedTry:k_,inferFromImplicitShape:q3,parseAxisParam:gn,squeezeShape:gs,getTypedArrayFromDType:ff,getArrayFromDType:pf,checkConversionForErrors:H3,isValidDtype:G3,hasEncodingLoss:K3,isTypedArray:xn,bytesPerElement:VT,bytesFromStringArray:Y3,isString:_s,isBoolean:X3,isNumber:Q3,inferDtype:Xc,isFunction:Ks,nearestDivisor:uv,computeStrides:aa,toTypedArray:FT,toNestedArray:S_,makeOnesTypedArray:$T,makeZerosTypedArray:Qc,now:mi,assertNonNegativeIntegerDimensions:BT,fetch:function(t,e){return q().platform.fetch(t,e)},encodeString:J3,decodeString:mf}),zoe=function(){function t(e,n){this.backendTimer=e,this.logger=n,n==null&&(this.logger=new Woe)}return t.prototype.profileKernel=function(e,n,r){var i,o=this,s=this.backendTimer.time(function(){i=r()});return(Array.isArray(i)?i:[i]).forEach(function(a){a.data().then(function(u){(function(l,c,d){if(c!=="float32")return!1;for(var h=0;h<l.length;h++){var f=l[h];if(isNaN(f)||!isFinite(f))return console.warn("Found "+f+" in the result of '"+d+"'"),!0}})(u,a.dtype,e),s.then(function(l){var c="";l.getExtraProfileInfo!=null&&(c=l.getExtraProfileInfo()),o.logger.logKernelProfile(e,a,u,l.kernelMs,n,c)})})}),i},t}(),Woe=function(){function t(){}return t.prototype.logKernelProfile=function(e,n,r,i,o,s){var a=Ja(i+"ms",9),u=Ja(e,25),l=n.rank,c=n.size,d=Ja(n.shape.toString(),14),h="";for(var f in o){var m=o[f].shape,v=m.length;h+=f+": "+v+"D "+(v>0?m:"")+" "}console.log("%c"+u+"	%c"+a+"	%c"+l+"D "+d+"	%c"+c+"	%c"+h+"	%c"+s,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},t}(),l2=20,Td=3,eb=7;function qoe(t,e,n,r){var i=aa(e),o=function(l,c,d,h){var f=ve(c),m=h[h.length-1],v=new Array(m).fill(0),y=c.length,g=d==="complex64"?kd(l):l;if(y>1)for(var w=0;w<f/m;w++)for(var b=w*m,x=0;x<m;x++)v[x]=Math.max(v[x],Cd(g[b+x],0,d).length);return v}(t,e,n,i),s=e.length,a=function l(c,d,h,f,m,v){v===void 0&&(v=!0);var y=h==="complex64"?2:1,g=d[0],w=d.length;if(w===0){if(h==="complex64"){var b=kd(c);return[Cd(b[0],0,h)]}return h==="bool"?[Z3(c[0])]:[c[0].toString()]}if(w===1){if(g>l2){var x=Td*y,_=Array.from(c.slice(0,x)),E=Array.from(c.slice(g-Td*y,g));return h==="complex64"&&(_=kd(_),E=kd(E)),["["+_.map(function(j,L){return Cd(j,m[L],h)}).join(", ")+", ..., "+E.map(function(j,L){return Cd(j,m[g-Td+L],h)}).join(", ")+"]"]}var I=h==="complex64"?kd(c):Array.from(c);return["["+I.map(function(j,L){return Cd(j,m[L],h)}).join(", ")+"]"]}var C=d.slice(1),S=f.slice(1),N=f[0]*y,R=[];if(g>l2){for(var D=0;D<Td;D++){var W=D*N,F=W+N;R.push.apply(R,l(c.slice(W,F),C,h,S,m,!1))}R.push("...");for(var D=g-Td;D<g;D++){var W=D*N,F=W+N;R.push.apply(R,l(c.slice(W,F),C,h,S,m,D===g-1))}}else for(var D=0;D<g;D++){var W=D*N,F=W+N;R.push.apply(R,l(c.slice(W,F),C,h,S,m,D===g-1))}var G=w===2?",":"";R[0]="["+R[0]+G;for(var D=1;D<R.length-1;D++)R[D]=" "+R[D]+G;for(var K=",\n",D=2;D<w;D++)K+="\n";return R[R.length-1]=" "+R[R.length-1]+"]"+(v?"":K),R}(t,e,n,i,o),u=["Tensor"];return r&&(u.push("  dtype: "+n),u.push("  rank: "+s),u.push("  shape: ["+e+"]"),u.push("  values:")),u.push(a.map(function(l){return"    "+l}).join("\n")),u.join("\n")}function Cd(t,e,n){return Ja(Array.isArray(t)?parseFloat(t[0].toFixed(eb))+" + "+parseFloat(t[1].toFixed(eb))+"j":_s(t)?"'"+t+"'":n==="bool"?Z3(t):parseFloat(t.toFixed(eb)).toString(),e)}function Z3(t){return t===0?"false":"true"}function kd(t){for(var e=[],n=0;n<t.length;n+=2)e.push([t[n],t[n+1]]);return e}var _c=function(){function t(e,n,r){var i=this;if(this.dtype=n,this.shape=e.slice(),this.size=ve(e),r!=null){var o=r.length;A(o===this.size,function(){return"Length of values '"+o+"' does not match the size inferred by the shape '"+i.size+"'."})}if(n==="complex64")throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=r||pf(n,this.size),this.strides=aa(e)}return t.prototype.set=function(e){for(var n=this,r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];r.length===0&&(r=[0]),A(r.length===this.rank,function(){return"The number of provided coordinates ("+r.length+") must match the rank ("+n.rank+")"});var o=this.locToIndex(r);this.values[o]=e},t.prototype.get=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];e.length===0&&(e=[0]);for(var r=0,i=0,o=e;i<o.length;i++){var s=o[i];if(s<0||s>=this.shape[r]){var a="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(a)}r++}for(var u=e[e.length-1],l=0;l<e.length-1;++l)u+=this.strides[l]*e[l];return this.values[u]},t.prototype.locToIndex=function(e){if(this.rank===0)return 0;if(this.rank===1)return e[0];for(var n=e[e.length-1],r=0;r<e.length-1;++r)n+=this.strides[r]*e[r];return n},t.prototype.indexToLoc=function(e){if(this.rank===0)return[];if(this.rank===1)return[e];for(var n=new Array(this.shape.length),r=0;r<n.length-1;++r)n[r]=Math.floor(e/this.strides[r]),e-=n[r]*this.strides[r];return n[n.length-1]=e,n},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.toTensor=function(){return ie.make(this.shape,{values:this.values},this.dtype)},t}(),cr=null,U=null,e$=null,ie=function(){function t(e,n,r,i,o){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=n||"float32",this.size=ve(e),this.strides=aa(e),this.dataId=i!=null?i:{},this.id=cr().nextTensorId(),this.rankType=this.rank<5?this.rank.toString():"higher",cr().registerTensor(this,o),r!=null&&cr().write(o,this.dataId,r)}return t.make=function(e,n,r,i){var o=n.values;return n.values!=null&&r==="string"&&_s(n.values[0])&&(o=n.values.map(function(s){return J3(s)})),new t(e,r,o,n.dataId,i)},t.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},t.prototype.asScalar=function(){return this.throwIfDisposed(),A(this.size===1,function(){return"The array must have only 1 element."}),this.reshape([])},t.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},t.prototype.as2D=function(e,n){return this.throwIfDisposed(),this.reshape([e,n])},t.prototype.as3D=function(e,n,r){return this.throwIfDisposed(),this.reshape([e,n,r])},t.prototype.as4D=function(e,n,r,i){return this.throwIfDisposed(),this.reshape([e,n,r,i])},t.prototype.as5D=function(e,n,r,i,o){return this.throwIfDisposed(),this.reshape([e,n,r,i,o])},t.prototype.asType=function(e){return this.throwIfDisposed(),U.cast(this,e)},Object.defineProperty(t.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),t.prototype.buffer=function(){return pe(this,void 0,void 0,function(){var e;return me(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,U.buffer(this.shape,this.dtype,e)]}})})},t.prototype.bufferSync=function(){return U.buffer(this.shape,this.dtype,this.dataSync())},t.prototype.array=function(){return pe(this,void 0,void 0,function(){var e;return me(this,function(n){switch(n.label){case 0:return[4,this.data()];case 1:return e=n.sent(),[2,S_(this.shape,e)]}})})},t.prototype.arraySync=function(){return S_(this.shape,this.dataSync())},t.prototype.data=function(){return pe(this,void 0,void 0,function(){var e,n;return me(this,function(r){switch(r.label){case 0:return this.throwIfDisposed(),e=cr().read(this.dataId),this.dtype!=="string"?[3,2]:[4,e];case 1:n=r.sent();try{return[2,n.map(function(i){return mf(i)})]}catch(i){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}r.label=2;case 2:return[2,e]}})})},t.prototype.dataSync=function(){this.throwIfDisposed();var e=cr().readSync(this.dataId);if(this.dtype==="string")try{return e.map(function(n){return mf(n)})}catch(n){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},t.prototype.bytes=function(){return pe(this,void 0,void 0,function(){var e;return me(this,function(n){switch(n.label){case 0:return this.throwIfDisposed(),[4,cr().read(this.dataId)];case 1:return e=n.sent(),this.dtype==="string"?[2,e]:[2,new Uint8Array(e.buffer)]}})})},t.prototype.dispose=function(){this.isDisposed||(cr().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(t.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),t.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},t.prototype.toFloat=function(){return this.asType("float32")},t.prototype.toInt=function(){return this.asType("int32")},t.prototype.toBool=function(){return this.asType("bool")},t.prototype.print=function(e){return e===void 0&&(e=!1),U.print(this,e)},t.prototype.reshape=function(e){return this.throwIfDisposed(),U.reshape(this,e)},t.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},t.prototype.expandDims=function(e){return e===void 0&&(e=0),U.expandDims(this,e)},t.prototype.cumsum=function(e,n,r){return e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1),U.cumsum(this,e,n,r)},t.prototype.squeeze=function(e){return this.throwIfDisposed(),U.squeeze(this,e)},t.prototype.clone=function(){return this.throwIfDisposed(),U.clone(this)},t.prototype.oneHot=function(e,n,r){return this.throwIfDisposed(),U.oneHot(this,e,n,r)},t.prototype.toString=function(e){return e===void 0&&(e=!1),qoe(this.dataSync(),this.shape,this.dtype,e)},t.prototype.tile=function(e){return this.throwIfDisposed(),U.tile(this,e)},t.prototype.gather=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),U.gather(this,e,n)},t.prototype.matMul=function(e,n,r){return n===void 0&&(n=!1),r===void 0&&(r=!1),this.throwIfDisposed(),U.matMul(this,e,n,r)},t.prototype.dot=function(e){return this.throwIfDisposed(),U.dot(this,e)},t.prototype.norm=function(e,n,r){return e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1),this.throwIfDisposed(),U.norm(this,e,n,r)},t.prototype.slice=function(e,n){return this.throwIfDisposed(),U.slice(this,e,n)},t.prototype.reverse=function(e){return this.throwIfDisposed(),U.reverse(this,e)},t.prototype.concat=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),e instanceof t&&(e=[e]),U.concat([this].concat(e),n)},t.prototype.split=function(e,n){return n===void 0&&(n=0),this.throwIfDisposed(),U.split(this,e,n)},t.prototype.stack=function(e,n){return n===void 0&&(n=0),U.stack([this,e],n)},t.prototype.unstack=function(e){return e===void 0&&(e=0),U.unstack(this,e)},t.prototype.pad=function(e,n){return n===void 0&&(n=0),U.pad(this,e,n)},t.prototype.batchNormalization=function(e,n,r,i,o){return r===void 0&&(r=.001),e$("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,n,o,i,r)},t.prototype.batchNorm=function(e,n,r,i,o){return o===void 0&&(o=.001),this.throwIfDisposed(),U.batchNorm(this,e,n,r,i,o)},t.prototype.all=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),U.all(this,e,n)},t.prototype.any=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),U.any(this,e,n)},t.prototype.logSumExp=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),U.logSumExp(this,e,n)},t.prototype.sum=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),U.sum(this,e,n)},t.prototype.prod=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),U.prod(this,e,n)},t.prototype.mean=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),U.mean(this,e,n)},t.prototype.min=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),U.min(this,e,n)},t.prototype.max=function(e,n){return e===void 0&&(e=null),n===void 0&&(n=!1),this.throwIfDisposed(),U.max(this,e,n)},t.prototype.argMin=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),U.argMin(this,e)},t.prototype.argMax=function(e){return e===void 0&&(e=null),this.throwIfDisposed(),U.argMax(this,e)},t.prototype.cast=function(e){return this.throwIfDisposed(),U.cast(this,e)},t.prototype.add=function(e){return this.throwIfDisposed(),U.add(this,e)},t.prototype.addStrict=function(e){return this.throwIfDisposed(),U.addStrict(this,e)},t.prototype.atan2=function(e){return this.throwIfDisposed(),U.atan2(this,e)},t.prototype.sub=function(e){return this.throwIfDisposed(),U.sub(this,e)},t.prototype.subStrict=function(e){return this.throwIfDisposed(),U.subStrict(this,e)},t.prototype.pow=function(e){return this.throwIfDisposed(),U.pow(this,e)},t.prototype.powStrict=function(e){return this.throwIfDisposed(),U.powStrict(this,e)},t.prototype.mul=function(e){return this.throwIfDisposed(),U.mul(this,e)},t.prototype.mulStrict=function(e){return this.throwIfDisposed(),U.mulStrict(this,e)},t.prototype.div=function(e){return this.throwIfDisposed(),U.div(this,e)},t.prototype.floorDiv=function(e){return this.throwIfDisposed(),U.floorDiv(this,e)},t.prototype.divStrict=function(e){return this.throwIfDisposed(),U.divStrict(this,e)},t.prototype.minimum=function(e){return this.throwIfDisposed(),U.minimum(this,e)},t.prototype.minimumStrict=function(e){return this.throwIfDisposed(),U.minimumStrict(this,e)},t.prototype.maximum=function(e){return this.throwIfDisposed(),U.maximum(this,e)},t.prototype.maximumStrict=function(e){return this.throwIfDisposed(),U.maximumStrict(this,e)},t.prototype.mod=function(e){return this.throwIfDisposed(),U.mod(this,e)},t.prototype.modStrict=function(e){return this.throwIfDisposed(),U.modStrict(this,e)},t.prototype.squaredDifference=function(e){return this.throwIfDisposed(),U.squaredDifference(this,e)},t.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),U.squaredDifferenceStrict(this,e)},t.prototype.transpose=function(e){return this.throwIfDisposed(),U.transpose(this,e)},t.prototype.notEqual=function(e){return this.throwIfDisposed(),U.notEqual(this,e)},t.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),U.notEqualStrict(this,e)},t.prototype.less=function(e){return this.throwIfDisposed(),U.less(this,e)},t.prototype.lessStrict=function(e){return this.throwIfDisposed(),U.lessStrict(this,e)},t.prototype.equal=function(e){return this.throwIfDisposed(),U.equal(this,e)},t.prototype.equalStrict=function(e){return this.throwIfDisposed(),U.equalStrict(this,e)},t.prototype.lessEqual=function(e){return this.throwIfDisposed(),U.lessEqual(this,e)},t.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),U.lessEqualStrict(this,e)},t.prototype.greater=function(e){return this.throwIfDisposed(),U.greater(this,e)},t.prototype.greaterStrict=function(e){return this.throwIfDisposed(),U.greaterStrict(this,e)},t.prototype.greaterEqual=function(e){return this.throwIfDisposed(),U.greaterEqual(this,e)},t.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),U.greaterEqualStrict(this,e)},t.prototype.logicalAnd=function(e){return this.throwIfDisposed(),U.logicalAnd(this,e)},t.prototype.logicalOr=function(e){return this.throwIfDisposed(),U.logicalOr(this,e)},t.prototype.logicalNot=function(){return this.throwIfDisposed(),U.logicalNot(this)},t.prototype.logicalXor=function(e){return this.throwIfDisposed(),U.logicalXor(this,e)},t.prototype.where=function(e,n){return this.throwIfDisposed(),U.where(e,this,n)},t.prototype.neg=function(){return this.throwIfDisposed(),U.neg(this)},t.prototype.ceil=function(){return this.throwIfDisposed(),U.ceil(this)},t.prototype.floor=function(){return this.throwIfDisposed(),U.floor(this)},t.prototype.sign=function(){return this.throwIfDisposed(),U.sign(this)},t.prototype.isNaN=function(){return this.throwIfDisposed(),U.isNaN(this)},t.prototype.isInf=function(){return this.throwIfDisposed(),U.isInf(this)},t.prototype.isFinite=function(){return this.throwIfDisposed(),U.isFinite(this)},t.prototype.exp=function(){return this.throwIfDisposed(),U.exp(this)},t.prototype.expm1=function(){return this.throwIfDisposed(),U.expm1(this)},t.prototype.log=function(){return this.throwIfDisposed(),U.log(this)},t.prototype.log1p=function(){return this.throwIfDisposed(),U.log1p(this)},t.prototype.sqrt=function(){return this.throwIfDisposed(),U.sqrt(this)},t.prototype.rsqrt=function(){return this.throwIfDisposed(),U.rsqrt(this)},t.prototype.square=function(){return this.throwIfDisposed(),U.square(this)},t.prototype.reciprocal=function(){return this.throwIfDisposed(),U.reciprocal(this)},t.prototype.abs=function(){return this.throwIfDisposed(),U.abs(this)},t.prototype.clipByValue=function(e,n){return this.throwIfDisposed(),U.clipByValue(this,e,n)},t.prototype.relu=function(){return this.throwIfDisposed(),U.relu(this)},t.prototype.relu6=function(){return this.throwIfDisposed(),U.relu6(this)},t.prototype.elu=function(){return this.throwIfDisposed(),U.elu(this)},t.prototype.selu=function(){return this.throwIfDisposed(),U.selu(this)},t.prototype.leakyRelu=function(e){return e===void 0&&(e=.2),this.throwIfDisposed(),U.leakyRelu(this,e)},t.prototype.prelu=function(e){return this.throwIfDisposed(),U.prelu(this,e)},t.prototype.sigmoid=function(){return this.throwIfDisposed(),U.sigmoid(this)},t.prototype.logSigmoid=function(){return this.throwIfDisposed(),U.logSigmoid(this)},t.prototype.softplus=function(){return this.throwIfDisposed(),U.softplus(this)},t.prototype.zerosLike=function(){return this.throwIfDisposed(),U.zerosLike(this)},t.prototype.onesLike=function(){return this.throwIfDisposed(),U.onesLike(this)},t.prototype.sin=function(){return this.throwIfDisposed(),U.sin(this)},t.prototype.cos=function(){return this.throwIfDisposed(),U.cos(this)},t.prototype.tan=function(){return this.throwIfDisposed(),U.tan(this)},t.prototype.asin=function(){return this.throwIfDisposed(),U.asin(this)},t.prototype.acos=function(){return this.throwIfDisposed(),U.acos(this)},t.prototype.atan=function(){return this.throwIfDisposed(),U.atan(this)},t.prototype.sinh=function(){return this.throwIfDisposed(),U.sinh(this)},t.prototype.cosh=function(){return this.throwIfDisposed(),U.cosh(this)},t.prototype.tanh=function(){return this.throwIfDisposed(),U.tanh(this)},t.prototype.asinh=function(){return this.throwIfDisposed(),U.asinh(this)},t.prototype.acosh=function(){return this.throwIfDisposed(),U.acosh(this)},t.prototype.atanh=function(){return this.throwIfDisposed(),U.atanh(this)},t.prototype.erf=function(){return this.throwIfDisposed(),U.erf(this)},t.prototype.round=function(){return this.throwIfDisposed(),U.round(this)},t.prototype.step=function(e){return e===void 0&&(e=0),this.throwIfDisposed(),U.step(this,e)},t.prototype.softmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),U.softmax(this,e)},t.prototype.logSoftmax=function(e){return e===void 0&&(e=-1),this.throwIfDisposed(),U.logSoftmax(this,e)},t.prototype.resizeBilinear=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),U.image.resizeBilinear(this,e,n)},t.prototype.resizeNearestNeighbor=function(e,n){return n===void 0&&(n=!1),this.throwIfDisposed(),U.image.resizeNearestNeighbor(this,e,n)},t.prototype.conv1d=function(e,n,r,i,o,s){return i===void 0&&(i="NWC"),o===void 0&&(o=1),this.throwIfDisposed(),U.conv1d(this,e,n,r,i,o,s)},t.prototype.conv2d=function(e,n,r,i,o,s){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),U.conv2d(this,e,n,r,i,o,s)},t.prototype.conv2dTranspose=function(e,n,r,i,o){return this.throwIfDisposed(),U.conv2dTranspose(this,e,n,r,i,o)},t.prototype.depthwiseConv2D=function(e,n,r,i,o,s){return i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]),this.throwIfDisposed(),U.depthwiseConv2d(this,e,n,r,i,o,s)},t.prototype.separableConv2d=function(e,n,r,i,o,s){return o===void 0&&(o=[1,1]),s===void 0&&(s="NHWC"),this.throwIfDisposed(),U.separableConv2d(this,e,n,r,i,o,s)},t.prototype.avgPool=function(e,n,r,i){return this.throwIfDisposed(),U.avgPool(this,e,n,r,i)},t.prototype.maxPool=function(e,n,r,i){return this.throwIfDisposed(),U.maxPool(this,e,n,r,i)},t.prototype.localResponseNormalization=function(e,n,r,i){return e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5),U.localResponseNormalization(this,e,n,r,i)},t.prototype.pool=function(e,n,r,i,o){return this.throwIfDisposed(),U.pool(this,e,n,r,i,o)},t.prototype.variable=function(e,n,r){return e===void 0&&(e=!0),this.throwIfDisposed(),Jc.variable(this,e,n,r)},t.prototype.unsortedSegmentSum=function(e,n){return this.throwIfDisposed(),U.unsortedSegmentSum(this,e,n)},t.prototype.batchToSpaceND=function(e,n){return this.throwIfDisposed(),U.batchToSpaceND(this,e,n)},t.prototype.spaceToBatchND=function(e,n){return this.throwIfDisposed(),U.spaceToBatchND(this,e,n)},t.prototype.topk=function(e,n){return e===void 0&&(e=1),n===void 0&&(n=!0),this.throwIfDisposed(),U.topk(this,e,n)},t.prototype.stridedSlice=function(e,n,r,i,o,s,a,u){return i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u=0),this.throwIfDisposed(),U.stridedSlice(this,e,n,r,i,o,s,a,u)},t.prototype.depthToSpace=function(e,n){return this.throwIfDisposed(),U.depthToSpace(this,e,n)},t.prototype.fft=function(){return this.throwIfDisposed(),U.spectral.fft(this)},t.prototype.ifft=function(){return this.throwIfDisposed(),U.spectral.ifft(this)},t.prototype.rfft=function(){return this.throwIfDisposed(),U.spectral.rfft(this)},t.prototype.irfft=function(){return this.throwIfDisposed(),U.spectral.irfft(this)},t}();Object.defineProperty(ie,Symbol.hasInstance,{value:function(t){return!!t&&t.dataId!=null&&t.shape!=null&&t.dtype!=null}});var Jc=function(t){function e(n,r,i){r===void 0&&(r=!0);var o=t.call(this,n.shape,n.dtype,null,n.dataId)||this;o.trainable=r,o.name=i,o.name==null&&(o.name=cr().nextVariableId().toString());try{cr().registerVariable(o)}catch(s){throw cr().disposeTensor(o),s}return o}return Xo(e,t),e.variable=function(n,r,i,o){return r===void 0&&(r=!0),o!=null&&o!==n.dtype&&(n=n.asType(o)),new e(n,r,i)},e.prototype.assign=function(n){if(n.dtype!==this.dtype)throw new Error("dtype of the new value ("+n.dtype+") and previous value ("+this.dtype+") must match");if(!an(n.shape,this.shape))throw new Error("shape of the new value ("+n.shape+") and previous value ("+this.shape+") must match");cr().disposeTensor(this),this.dataId=n.dataId,cr().registerTensor(this)},e.prototype.dispose=function(){cr().disposeVariable(this),this.isDisposedInternal=!0},e}(ie);Object.defineProperty(Jc,Symbol.hasInstance,{value:function(t){return t instanceof ie&&t.assign!=null&&t.assign instanceof Function}});var A_,R_,N_,P_,D_,Hoe=Jc.variable;(function(t){t.R0="R0",t.R1="R1",t.R2="R2",t.R3="R3",t.R4="R4",t.R5="R5",t.R6="R6"})(A_||(A_={})),function(t){t.float32="float32",t.int32="int32",t.bool="int32",t.complex64="complex64"}(R_||(R_={})),function(t){t.float32="float32",t.int32="int32",t.bool="bool",t.complex64="complex64"}(N_||(N_={})),function(t){t.float32="float32",t.int32="float32",t.bool="float32",t.complex64="complex64"}(P_||(P_={})),function(t){t.float32="complex64",t.int32="complex64",t.bool="complex64",t.complex64="complex64"}(D_||(D_={}));var Goe={float32:P_,int32:R_,bool:N_,complex64:D_};function zt(t,e){if(t==="string"||e==="string"){if(t==="string"&&e==="string")return"string";throw new Error("Can not upcast "+t+" with "+e)}return Goe[t][e]}function tb(t){return zt(t,"int32")}function Dt(t,e){if(t.dtype===e.dtype)return[t,e];var n=zt(t.dtype,e.dtype);return[t.cast(n),e.cast(n)]}function t$(t,e){A(t.dtype===e.dtype,function(){return"The dtypes of the first("+t.dtype+") and second("+e.dtype+") input must match"})}function jT(t){var e=[];return function n(r,i,o){if(r!=null){if(r instanceof ie)return void i.push(r);if(s=r,!(!Array.isArray(s)&&typeof s!="object")){var s,a=r;for(var u in a){var l=a[u];o.has(l)||(o.add(l),n(l,i,o))}}}}(t,e,new Set),e}var nb,Koe=Object.freeze({makeTypesMatch:Dt,assertTypesMatch:t$,isTensorInList:function(t,e){for(var n=0;n<e.length;n++)if(e[n].id===t.id)return!0;return!1},getTensorsInContainer:jT}),c2=function(){function t(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return t.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},t}(),Yoe=function(){function t(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new c2}return t.prototype.ready=function(){return pe(this,void 0,void 0,function(){var e,n,r;return me(this,function(i){switch(i.label){case 0:if(this.pendingBackendInit!=null)return[2,this.pendingBackendInit.then(function(){})];if(this.backendInstance!=null)return[2];e=this.getSortedBackends(),n=0,i.label=1;case 1:return n<e.length?(r=e[n],[4,this.initializeBackend(r).success]):[3,5];case 2:return i.sent()?[4,this.setBackend(r)]:[3,4];case 3:return i.sent(),[2];case 4:return n++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}})})},Object.defineProperty(t.prototype,"backend",{get:function(){if(this.pendingBackendInit!=null)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");if(this.backendInstance==null){var e=this.initializeBackendsAndReturnBest(),n=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+n+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");this.setBackend(n)}return this.backendInstance},enumerable:!0,configurable:!0}),t.prototype.backendNames=function(){return Object.keys(this.registryFactory)},t.prototype.findBackend=function(e){return!(e in this.registry)&&(!(e in this.registryFactory)||this.initializeBackend(e).asyncInit)?null:this.registry[e]},t.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},t.prototype.registerBackend=function(e,n,r){return r===void 0&&(r=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:n,priority:r},!0)},t.prototype.setBackend=function(e){return pe(this,void 0,void 0,function(){var n,r,i;return me(this,function(o){switch(o.label){case 0:if(this.registryFactory[e]==null)throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,this.registry[e]!=null?[3,4]:(this.backendInstance=null,n=this.initializeBackend(e),r=n.success,n.asyncInit?[4,r]:[3,2]);case 1:return i=o.sent(),[3,3];case 2:i=r,o.label=3;case 3:if(!i)return[2,!1];o.label=4;case 4:return this.backendInstance=this.registry[e],this.profiler=new zoe(this.backendInstance),[2,!0]}})})},t.prototype.initializeBackend=function(e){var n=this,r=this.registryFactory[e];if(r==null)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var i=r.factory();if(Promise.resolve(i)===i){var o=++this.pendingBackendInitId,s=i.then(function(a){return!(o<n.pendingBackendInitId)&&(n.registry[e]=a,n.pendingBackendInit=null,!0)}).catch(function(a){return!(o<n.pendingBackendInitId)&&(n.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(a.stack||a.message),!1)});return this.pendingBackendInit=s,{success:s,asyncInit:!0}}return this.registry[e]=i,{success:!0,asyncInit:!1}}catch(a){return console.warn("Initialization of backend "+e+" failed"),console.warn(a.stack||a.message),{success:!1,asyncInit:!1}}},t.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&this.pendingBackendInit!=null&&this.pendingBackendInitId++,e in this.registry&&(this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},t.prototype.getSortedBackends=function(){var e=this;if(Object.keys(this.registryFactory).length===0)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort(function(n,r){return e.registryFactory[r].priority-e.registryFactory[n].priority})},t.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),n=0;n<e.length;n++){var r=e[n],i=this.initializeBackend(r),o=i.success,s=i.asyncInit;if(s||o)return{name:r,asyncInit:s}}throw new Error("Could not initialize any backends, all backend initializations failed.")},t.prototype.moveData=function(e,n){this.write(e,n,this.readSync(n))},t.prototype.tidy=function(e,n){var r,i=this,o=null;if(n==null){if(typeof e!="function")throw new Error("Please provide a function to tidy()");n=e}else{if(typeof e!="string"&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if(typeof n!="function")throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");o=e}return this.scopedRun(function(){return i.startScope(o)},function(){return i.endScope(r)},function(){return(r=n())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),r})},t.prototype.scopedRun=function(e,n,r){e();try{var i=r();return n(),i}catch(o){throw n(),o}},t.prototype.nextTensorId=function(){return t.nextTensorId++},t.prototype.nextVariableId=function(){return t.nextVariableId++},t.prototype.clone=function(e){var n=ie.make(e.shape,{dataId:e.dataId},e.dtype);return this.addTapeNode([e],n,function(r){return[r.toFloat()]}),n},t.prototype.runKernel=function(e,n,r){var i,o=this,s=[],a=this.isTapeOn(),u=this.state.activeScope!=null?this.state.activeScope.name:"",l=function(f){a&&(s=f.map(function(m){return o.keep(o.clone(m))}))},c=this.state.numBytes,d=this.state.numTensors;if(this.scopedRun(function(){return o.state.kernelDepth++},function(){return o.state.kernelDepth--},function(){i=o.ENV.getBool("DEBUG")?o.profiler.profileKernel(u,n,function(){return e(o.backend,l)}):e(o.backend,l)}),a){var h={id:this.state.nextTapeNodeId++,name:u,inputs:n,outputs:Array.isArray(i)?i:[i],saved:s};r!=null&&(h.gradient=function(f){return r(f,s)}),this.state.activeTape.push(h)}return this.state.profiling&&this.state.activeProfile.kernels.push({name:u,bytesAdded:this.state.numBytes-c,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-d,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(n).map(function(f){return n[f].shape}),outputShape:Array.isArray(i)?i.map(function(f){return f.shape}):i.shape}),i},t.prototype.registerTensor=function(e,n){var r=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,e.dtype==="string"&&this.state.numStringTensors++,r===0){this.state.numDataBuffers++;var i=0;e.dtype!=="complex64"&&e.dtype!=="string"&&(i=e.size*VT(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:n!=null?n:this.backend,dtype:e.dtype,shape:e.shape,bytes:i,refCount:0}),this.state.numBytes+=i,n!=null?n.register(e.dataId,e.shape,e.dtype):this.backend.register(e.dataId,e.shape,e.dtype)}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof Jc||this.track(e)},t.prototype.registerVariable=function(e){if(this.state.registeredVariables[e.name]!=null)throw new Error("Variable with name "+e.name+" was already registered");this.state.registeredVariables[e.name]=e},t.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,e.dtype==="string"&&this.state.numStringTensors--;var n=this.state.tensorInfo.get(e.dataId);n.refCount<=1?(e.dtype!=="complex64"&&(this.state.numBytes-=n.bytes),this.state.numDataBuffers--,n.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},t.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var n=this.state.registeredVariables[e];this.disposeVariable(n)}},t.prototype.disposeVariable=function(e){this.disposeTensor(e),this.state.registeredVariables[e.name]!=null&&delete this.state.registeredVariables[e.name]},t.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,e.reasons==null&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},t.prototype.profile=function(e){return pe(this,void 0,void 0,function(){var n,r;return me(this,function(i){return this.state.profiling=!0,n=this.state.numBytes,r=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map(function(o){return o.totalBytesSnapshot})),this.state.activeProfile.newBytes=this.state.numBytes-n,this.state.activeProfile.newTensors=this.state.numTensors-r,[2,this.state.activeProfile]})})},t.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&this.state.kernelDepth===0},t.prototype.addTapeNode=function(e,n,r){var i={};e.forEach(function(s,a){i[a]=s});var o={id:this.state.nextTapeNodeId++,name:this.state.activeScope.name,inputs:i,outputs:[n],gradient:function(s){var a=r(s),u={};return a.forEach(function(l,c){u[c]=function(){return l}}),u}};this.state.activeTape.push(o)},t.prototype.keep=function(e){return e.kept=!0,e},t.prototype.startTape=function(){this.state.gradientDepth===0&&(this.state.activeTape=[]),this.state.gradientDepth++},t.prototype.endTape=function(){this.state.gradientDepth--},t.prototype.startScope=function(e){var n={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(n.name=e),this.state.scopeStack.push(n),this.state.activeScope=n},t.prototype.endScope=function(e){for(var n=this,r=jT(e),i=new Set(r.map(function(u){return u.id})),o=0;o<this.state.activeScope.track.length;o++){var s=this.state.activeScope.track[o];s.kept||i.has(s.id)||s.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=this.state.scopeStack.length===0?null:this.state.scopeStack[this.state.scopeStack.length-1],r.forEach(function(u){u.kept||u.scopeId!==a.id||n.track(u)})},t.prototype.gradients=function(e,n,r,i){var o=this;if(i===void 0&&(i=!1),A(n.length>0,function(){return"gradients() received an empty list of xs."}),r!=null&&r.dtype!=="float32")throw new Error("dy must have 'float32' dtype, but has '"+r.dtype+"'");var s=this.scopedRun(function(){return o.startTape()},function(){return o.endTape()},function(){return o.tidy("forward",e)});A(s instanceof ie,function(){return"The result y returned by f() must be a tensor."});var a=function(u,l,c){for(var d={},h={},f=0;f<l.length;f++)d[l[f].id]=!0;for(f=0;f<u.length;f++){var m=(E=u[f]).inputs;for(var v in m){for(var y=m[v],g=!1,w=0;w<l.length;w++)if(d[y.id]){E.outputs.forEach(function(N){return d[N.id]=!0}),g=!0,h[E.id]=!0;break}if(g)break}}var b={};b[c.id]=!0;var x={};for(f=u.length-1;f>=0;f--)for(m=(E=u[f]).inputs,w=0;w<E.outputs.length;w++)if(b[E.outputs[w].id]){for(var v in m)b[m[v].id]=!0,x[E.id]=!0;break}var _=[];for(f=0;f<u.length;f++){var E;if(h[(E=u[f]).id]&&x[E.id]){var I={};for(var v in E.inputs){var C=E.inputs[v];d[C.id]&&(I[v]=C)}var S=Object.assign({},E);S.inputs=I,S.outputs=E.outputs,_.push(S)}}return _}(this.state.activeTape,n,s);if(!i&&a.length===0&&n.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",function(){var u,l,c={};c[s.id]=r==null?(u=s.shape,l=$T(ve(u),"float32"),ie.make(u,{values:l})):r,function(h,f,m){for(var v=function(g){var w=f[g],b=[];if(w.outputs.forEach(function(I){var C=h[I.id];if(C!=null)b.push(C);else{var S=ie.make(I.shape,{values:Qc(I.size,I.dtype)},I.dtype);b.push(S)}}),w.gradient==null)throw new Error("Cannot compute gradient: gradient function not found for "+w.name+".");var x=w.gradient(w.outputs.length===1?b[0]:b),_=function(I){if(!(I in x))throw new Error("Cannot backprop through input "+I+". Available gradients found: "+Object.keys(x)+".");var C=m(function(){return x[I]()});if(C.dtype!=="float32")throw new Error("Error in gradient for op "+w.name+". The gradient of input "+I+" must have 'float32' dtype, but has '"+C.dtype+"'");var S=w.inputs[I];if(!an(C.shape,S.shape))throw new Error("Error in gradient for op "+w.name+". The gradient of input '"+I+"' has shape '"+C.shape+"', which does not match the shape of the input '"+S.shape+"'");if(h[S.id]==null)h[S.id]=C;else{var N=h[S.id];h[S.id]=N.add(C),N.dispose()}};for(var E in w.inputs)_(E)},y=f.length-1;y>=0;y--)v(y)}(c,a,function(h){return o.tidy(h)});var d=n.map(function(h){return c[h.id]});return o.state.gradientDepth===0&&(o.state.activeTape.forEach(function(h){for(var f in h.saved)h.saved[f].dispose()}),o.state.activeTape=null),{value:s,grads:d}})},t.prototype.customGrad=function(e){var n=this;return A(Ks(e),function(){return"The f passed in customGrad(f) must be a function."}),function(){for(var r,i=[],o=0;o<arguments.length;o++)i[o]=arguments[o];A(i.every(function(a){return a instanceof ie}),function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"});var s={};return i.forEach(function(a,u){s[u]=a}),n.runKernel(function(a,u){return A((r=e.apply(void 0,i.concat([u]))).value instanceof ie,function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"}),A(Ks(r.gradFunc),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."}),r.value},s,function(a,u){var l=r.gradFunc(a,u),c=Array.isArray(l)?l:[l];A(c.length===i.length,function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."}),A(c.every(function(h){return h instanceof ie}),function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."});var d={};return c.forEach(function(h,f){d[f]=function(){return h}}),d})}},t.prototype.write=function(e,n,r){var i=this.state.tensorInfo.get(n),o=i.backend;if(e=e||this.backend,i.dtype==="string"){var s=Y3(r);this.state.numBytes+=s-i.bytes,i.bytes=s}e!==o&&(o.disposeData(n),i.backend=e,e.register(n,i.shape,i.dtype)),e.write(n,r)},t.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},t.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},t.prototype.fromPixels=function(e,n){return this.backend.fromPixels(e,n)},t.prototype.time=function(e){return pe(this,void 0,void 0,function(){var n,r;return me(this,function(i){switch(i.label){case 0:return n=mi(),[4,this.backend.time(e)];case 1:return(r=i.sent()).wallMs=mi()-n,[2,r]}})})},t.prototype.track=function(e){return this.state.activeScope!=null&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(t.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),t.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new c2,this.registry)this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},t.nextTensorId=0,t.nextVariableId=0,t}(),O=function(){var t=function(){if(nb==null){var n=void 0;if(typeof window<"u")n=window;else if(typeof global<"u")n=global;else if(typeof process<"u")n=process;else{if(typeof self>"u")throw new Error("Could not find a global object");n=self}nb=n}return nb}();if(t._tfengine==null){var e=new U3(t);t._tfengine=new Yoe(e)}return function(n){a0=n}(t._tfengine.ENV),cr=function(){return t._tfengine},t._tfengine}();function n$(){return typeof window<"u"&&window.document!=null||typeof WorkerGlobalScope<"u"}var uo=q();uo.registerFlag("DEBUG",function(){return!1},function(t){t&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")}),uo.registerFlag("IS_BROWSER",function(){return n$()}),uo.registerFlag("IS_NODE",function(){return typeof process<"u"&&process.versions!==void 0&&process.versions.node!==void 0}),uo.registerFlag("IS_CHROME",function(){return typeof navigator<"u"&&navigator!=null&&navigator.userAgent!=null&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}),uo.registerFlag("PROD",function(){return!1}),uo.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",function(){return uo.getBool("DEBUG")}),uo.registerFlag("DEPRECATION_WARNINGS_ENABLED",function(){return!0}),uo.registerFlag("IS_TEST",function(){return!1});var gi,Sr,Ta={},rb={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function r$(t,e){Ta[t]=e}function oo(t){t in Ta||(Ta[t]=function(n){if(n!==1&&n!==2)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var r=i$(n);return r.addEventListener("webglcontextlost",function(i){i.preventDefault(),delete Ta[n]},!1),n===1?r.getContext("webgl",rb)||r.getContext("experimental-webgl",rb):r.getContext("webgl2",rb)}(t));var e=Ta[t];return e.isContextLost()?(delete Ta[t],oo(t)):(e.disable(e.DEPTH_TEST),e.disable(e.STENCIL_TEST),e.disable(e.BLEND),e.disable(e.DITHER),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SAMPLE_COVERAGE),e.enable(e.SCISSOR_TEST),e.enable(e.CULL_FACE),e.cullFace(e.BACK),Ta[t])}function i$(t){if(typeof OffscreenCanvas<"u"&&t===2)return new OffscreenCanvas(300,150);if(typeof document<"u")return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function u0(t,e){return[e,t]}function ib(t){var e=ve(t);return av(Math.ceil(e/4))}function ap(t,e){return[Math.max(1,Math.ceil(e/2)),Math.max(1,Math.ceil(t/2))]}function UT(t,e){var n,r,i,o,s,a,u,l,c,d=t;return q().getNumber("WEBGL_VERSION")===2?(n=d.R32F,r=d.R16F,i=d.RGBA16F,o=d.RGBA32F,s=d.RED,a=4,u=1,l=d.HALF_FLOAT,c=d.FLOAT):(n=t.RGBA,r=t.RGBA,i=t.RGBA,o=d.RGBA,s=t.RGBA,a=4,u=4,l=e!=null?e.HALF_FLOAT_OES:null,c=t.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:s,downloadTextureFormat:t.RGBA,downloadUnpackNumChannels:a,defaultNumChannels:u,textureTypeHalfFloat:l,textureTypeFloat:c}}function fe(t,e,n){var r=n();return e&&function(i){var o=i.getError();if(o!==i.NO_ERROR)throw new Error("WebGL Error: "+s$(i,o))}(t),r}(function(t){t[t.RENDER=0]="RENDER",t[t.UPLOAD=1]="UPLOAD",t[t.PIXELS=2]="PIXELS",t[t.DOWNLOAD=3]="DOWNLOAD"})(gi||(gi={})),function(t){t[t.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",t[t.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",t[t.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",t[t.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",t[t.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(Sr||(Sr={}));var Xoe=596e-10,Qoe=65504;function o$(t){return!!(q().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||t===0||Xoe<Math.abs(t)&&Math.abs(t)<Qoe)}function s$(t,e){switch(e){case t.NO_ERROR:return"NO_ERROR";case t.INVALID_ENUM:return"INVALID_ENUM";case t.INVALID_VALUE:return"INVALID_VALUE";case t.INVALID_OPERATION:return"INVALID_OPERATION";case t.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case t.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case t.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+e}}function jm(t,e,n){return Qo(t,e,function(){return t.getExtension(n)},'Extension "'+n+'" not supported on this browser.')}function a$(t,e,n){var r=Qo(t,e,function(){return t.createShader(t.VERTEX_SHADER)},"Unable to create vertex WebGLShader.");if(fe(t,e,function(){return t.shaderSource(r,n)}),fe(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw console.log(t.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function u$(t,e,n){var r=Qo(t,e,function(){return t.createShader(t.FRAGMENT_SHADER)},"Unable to create fragment WebGLShader.");if(fe(t,e,function(){return t.shaderSource(r,n)}),fe(t,e,function(){return t.compileShader(r)}),t.getShaderParameter(r,t.COMPILE_STATUS)===!1)throw function(i,o){var s=Joe.exec(o);if(s==null)return console.log("Couldn't parse line number in error: "+o),void console.log(i);for(var a=+s[1],u=i.split("\n"),l=u.length.toString().length+2,c=u.map(function(y,g){return Ja((g+1).toString(),l)+y}),d=0,h=0;h<c.length;h++)d=Math.max(c[h].length,d);var f=c.slice(0,a-1),m=c.slice(a-1,a),v=c.slice(a);console.log(f.join("\n")),console.log(o.split("\n")[0]),console.log("%c "+Ja(m[0],d),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(v.join("\n"))}(n,t.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}var Um,zm,Joe=/ERROR: [0-9]+:([0-9]+):/g;function l$(t,e){return Qo(t,e,function(){return t.createProgram()},"Unable to create WebGLProgram.")}function c$(t,e,n){if(fe(t,e,function(){return t.linkProgram(n)}),t.getProgramParameter(n,t.LINK_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function Wm(t,e,n){if(fe(t,e,function(){return t.validateProgram(n)}),t.getProgramParameter(n,t.VALIDATE_STATUS)===!1)throw console.log(t.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function d$(t,e,n){var r=Qo(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return fe(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),fe(t,e,function(){return t.bufferData(t.ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function h$(t,e,n){var r=Qo(t,e,function(){return t.createBuffer()},"Unable to create WebGLBuffer");return fe(t,e,function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r)}),fe(t,e,function(){return t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}),r}function f$(t,e){return Qo(t,e,function(){return t.createTexture()},"Unable to create WebGLTexture.")}function p$(t,e){var n=q().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t<=0||e<=0){var r="["+t+"x"+e+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(t>n||e>n)throw r="["+t+"x"+e+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU "+("["+n+"x"+n+"]")+".")}function m$(t,e){return Qo(t,e,function(){return t.createFramebuffer()},"Unable to create WebGLFramebuffer.")}function O_(t,e,n,r,i,o,s,a){var u=t.getAttribLocation(n,r);return u!==-1&&(fe(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,i)}),fe(t,e,function(){return t.vertexAttribPointer(u,o,t.FLOAT,!1,s,a)}),fe(t,e,function(){return t.enableVertexAttribArray(u)}),!0)}function g$(t,e,n,r){x$(t,r),fe(t,e,function(){return t.activeTexture(t.TEXTURE0+r)}),fe(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)})}function v$(t,e,n,r){return Qo(t,e,function(){return t.getUniformLocation(n,r)},'uniform "'+r+'" not present in program.')}function y$(t,e,n){return t.getUniformLocation(e,n)}function w$(t,e,n,r,i,o){fe(t,e,function(){return g$(t,e,r,o)}),fe(t,e,function(){return t.uniform1i(i,o)})}function qm(t,e,n,r){fe(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,r)}),fe(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)})}function L_(t,e,n){fe(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,n)}),fe(t,e,function(){return t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)})}function jd(t){var e=t.checkFramebufferStatus(t.FRAMEBUFFER);if(e!==t.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+b$(t,e))}function b$(t,e){switch(e){case t.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case t.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case t.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+e}}function Qo(t,e,n,r){var i=fe(t,e,function(){return n()});if(i==null)throw new Error(r);return i}function x$(t,e){var n=t.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=e+t.TEXTURE0;if(r<t.TEXTURE0||r>n)throw new Error("textureUnit must be in "+("[gl.TEXTURE0, gl.TEXTURE"+n+"]")+".")}function gf(t,e){return e===void 0&&(e=2),ve(t.slice(0,t.length-e))}function vf(t){if(t.length===0)throw Error("Cannot get rows and columns of an empty shape array.");return[t.length>1?t[t.length-2]:1,t[t.length-1]]}function Hm(t){var e=[1,1,1];return t.length===0||t.length===1&&t[0]===1||(e=[gf(t)].concat(vf(t))),e}function _$(t,e){var n;e===void 0&&(e=!1);var r=q().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e&&(r*=2,(t=t.map(function(l,c){return c>=t.length-2?MT(t[c]):t[c]})).length===1&&(t=[2,t[0]])),t.length!==2){var i=gs(t);t=i.newShape}var o=ve(t);if(t.length<=1&&o<=r)return[1,o];if(t.length===2&&t[0]<=r&&t[1]<=r)return t;if(t.length===3&&t[0]*t[1]<=r&&t[2]<=r)return[t[0]*t[1],t[2]];if(t.length===3&&t[0]<=r&&t[1]*t[2]<=r)return[t[0],t[1]*t[2]];if(t.length===4&&t[0]*t[1]*t[2]<=r&&t[3]<=r)return[t[0]*t[1]*t[2],t[3]];if(t.length===4&&t[0]<=r&&t[1]*t[2]*t[3]<=r)return[t[0],t[1]*t[2]*t[3]];if(e){var s=gf(t),a=2,u=2;return t.length&&(a=(n=vf(t))[0],u=n[1]),av(o=s*(a/2)*(u/2)).map(function(l){return 2*l})}return av(o)}function om(t){return t%2==0}function Ud(t,e){if(an(t=t.slice(-2),e=e.slice(-2))||!t.length||!e.length||t[0]===0||t[1]===0||e[0]===0||e[1]===0)return!0;if(t.length!==e.length){var n=t.slice(-1)[0],r=e.slice(-1)[0];if(n===r||om(n)&&om(r)&&(t[0]===1||e[0]===1))return!0}return t[1]===e[1]&&om(t[0])&&om(e[0])}function E$(t){if(Um==null){var e=oo(t);Um=e.getParameter(e.MAX_TEXTURE_SIZE)}return Um}function I$(t){if(zm==null){var e=oo(t);zm=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,zm)}function T$(t){if(t===0)return 0;var e=oo(t);return vi(e,"EXT_disjoint_timer_query_webgl2")&&t===2?2:vi(e,"EXT_disjoint_timer_query")?1:0}function vi(t,e){return t.getExtension(e)!=null}function M_(t){try{if(oo(t)!=null)return!0}catch(e){return!1}return!1}function C$(t){if(t===0)return!1;var e=oo(t);if(t===1){if(!vi(e,"OES_texture_float"))return!1}else if(!vi(e,"EXT_color_buffer_float"))return!1;return V_(e)}function k$(t){if(t===0)return!1;var e=oo(t);if(t!==1){if(vi(e,"EXT_color_buffer_float"))return V_(e);if(vi(e,"EXT_color_buffer_half_float")){var n=e.getExtension("EXT_color_buffer_half_float");return function(r,i){var o=UT(r,i),s=r.createTexture();r.bindTexture(r.TEXTURE_2D,s),r.texImage2D(r.TEXTURE_2D,0,o.internalFormatHalfFloat,1,1,0,o.textureFormatFloat,o.textureTypeHalfFloat,null);var a=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,a),r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,s,0);var u=r.checkFramebufferStatus(r.FRAMEBUFFER)===r.FRAMEBUFFER_COMPLETE;return r.bindTexture(r.TEXTURE_2D,null),r.bindFramebuffer(r.FRAMEBUFFER,null),r.deleteTexture(s),r.deleteFramebuffer(a),u}(e,n)}return!1}return!!vi(e,"OES_texture_float")&&!!vi(e,"WEBGL_color_buffer_float")&&V_(e)}function V_(t){var e=UT(t),n=t.createTexture();t.bindTexture(t.TEXTURE_2D,n),t.texImage2D(t.TEXTURE_2D,0,e.internalFormatFloat,1,1,0,e.textureFormatFloat,e.textureTypeFloat,null);var r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0);var i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(n),t.deleteFramebuffer(r),i}function S$(t){return t===2&&oo(t).fenceSync!=null}var Zoe=Object.freeze({callAndCheck:fe,canBeRepresented:o$,getWebGLErrorMessage:s$,getExtensionOrThrow:jm,createVertexShader:a$,createFragmentShader:u$,createProgram:l$,linkProgram:c$,validateProgram:Wm,createStaticVertexBuffer:d$,createStaticIndexBuffer:h$,getNumChannels:function(){return q().getNumber("WEBGL_VERSION")===2?1:4},createTexture:f$,validateTextureSize:p$,createFramebuffer:m$,bindVertexBufferToProgramAttribute:O_,bindTextureUnit:g$,unbindTextureUnit:function(t,e,n){x$(t,n),fe(t,e,function(){return t.activeTexture(t.TEXTURE0+n)}),fe(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})},getProgramUniformLocationOrThrow:v$,getProgramUniformLocation:y$,bindTextureToProgramUniformSampler:w$,bindCanvasToFramebuffer:function(t,e){fe(t,e,function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)}),fe(t,e,function(){return t.viewport(0,0,t.canvas.width,t.canvas.height)}),fe(t,e,function(){return t.scissor(0,0,t.canvas.width,t.canvas.height)})},bindColorTextureToFramebuffer:qm,unbindColorTextureFromFramebuffer:L_,validateFramebuffer:jd,getFramebufferErrorMessage:b$,getBatchDim:gf,getRowsCols:vf,getShapeAs3D:Hm,getTextureShapeFromLogicalShape:_$,isReshapeFree:Ud,getWebGLMaxTextureSize:E$,resetMaxTextureSize:function(){Um=null},resetMaxTexturesInShader:function(){zm=null},getMaxTexturesInShader:I$,getWebGLDisjointQueryTimerVersion:T$,hasExtension:vi,isWebGLVersionEnabled:M_,isCapableOfRenderingToFloatTexture:C$,isDownloadFloatTextureEnabled:k$,isWebGLFenceEnabled:S$}),Te=q();function ese(){q().set("PROD",!0)}function tse(){q().set("DEBUG",!0)}function nse(){q().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")}function zT(t){q().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(t+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function rse(){O.disposeVariables()}function ise(){return O}function ose(){return O.memory()}function sse(t){return O.profile(t)}function Je(t,e){return O.tidy(t,e)}function Jn(t){jT(t).forEach(function(e){return e.dispose()})}function A$(t){return O.keep(t)}function ase(t){return O.time(t)}function use(t){return O.setBackend(t)}function lse(){return O.ready()}function cse(){return O.backendName}function dse(t){O.removeBackend(t)}function hse(t){return O.findBackend(t)}function fse(t){return O.findBackendFactory(t)}function pse(t,e,n){return n===void 0&&(n=1),O.registerBackend(t,e,n)}function mse(){return O.backend}function gse(t,e){q().setPlatform(t,e)}function F_(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];q().getBool("IS_TEST")||console.warn.apply(console,t)}function io(t,e){var n=t;if(xn(t))return e==="string"?[]:[t.length];if(!Array.isArray(t))return[];for(var r=[];Array.isArray(n)||xn(n)&&e!=="string";)r.push(n.length),n=n[0];return Array.isArray(t)&&q().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function i(o,s,a){if(a=a||[],!Array.isArray(o)&&!xn(o))return void A(s.length===0,function(){return"Element arr["+a.join("][")+"] is a primitive, but should be an array/TypedArray of "+s[0]+" elements"});A(s.length>0,function(){return"Element arr["+a.join("][")+"] should be a primitive, but is an array of "+o.length+" elements"}),A(o.length===s[0],function(){return"Element arr["+a.join("][")+"] should have "+s[0]+" elements, but has "+o.length+" elements"});for(var u=s.slice(1),l=0;l<o.length;++l)i(o[l],u,a.concat(l))}(t,r,[]),r}function d2(t,e,n,r){if(t!=null&&(t!=="numeric"&&t!==e||t==="numeric"&&e==="string"))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+t+" tensor, but got "+e+" tensor")}function k(t,e,n,r){if(r===void 0&&(r="numeric"),t instanceof ie)return d2(r,t.dtype,e,n),t;var i=Xc(t);if(i!=="string"&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),d2(r,i,e,n),t==null||!xn(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string"){var o=t==null?"null":t.constructor.name;throw new Error("Argument '"+e+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var s=io(t,i);xn(t)||Array.isArray(t)||(t=[t]);var a=i!=="string"?FT(t,i,q().getBool("DEBUG")):Mo(t,[],!0);return ie.make(s,{values:a},i)}function yf(t,e,n,r){if(r===void 0&&(r="numeric"),!Array.isArray(t))throw new Error("Argument "+e+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return t.map(function(i,o){return k(i,e+"["+o+"]",n)},r)}function WT(t,e){for(var n=0;n<t.length;++n)if(t[t.length-n-1]!==e-1-n)return!1;return!0}function R$(t,e,n){for(var r=t.length+e.length,i=[],o=0,s=0,a=0;a<r;a++)n.indexOf(a)===-1?i.push(t[o++]):i.push(e[s++]);return i}function wn(t,e){for(var n=[],r=t.length,i=0;i<r;i++)e.indexOf(i)===-1&&n.push(t[i]);return[n,e.map(function(o){return t[o]})]}function Mr(t,e){return R$(t,e.map(function(n){return 1}),e)}function dr(t,e,n){A(WT(e,n),function(){return t+" supports only inner-most axes for now. Got axes "+e+" and rank-"+n+" input."})}function Ci(t,e){if(WT(t,e))return null;for(var n=[],r=0;r<e;++r)t.indexOf(r)===-1&&n.push(r);return t.forEach(function(i){return n.push(i)}),n}function l0(t){return t.map(function(e,n){return[n,e]}).sort(function(e,n){return e[1]-n[1]}).map(function(e){return e[0]})}function ki(t,e){for(var n=[],r=e-t;r<e;++r)n.push(r);return n}function N$(t,e){var n=t[0].length;t.forEach(function(i,o){A(i.length===n,function(){return"Error in concat"+n+"D: rank of tensors["+o+"] must be the same as the rank of the rest ("+n+")"})}),A(e>=0&&e<n,function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."});var r=t[0];t.forEach(function(i,o){for(var s=0;s<n;s++)A(s===e||i[s]===r[s],function(){return"Error in concat"+n+"D: Shape of tensors["+o+"] ("+i+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+o+"."})})}function Iu(t,e){for(var n=t[0].slice(),r=1;r<t.length;r++)n[e]+=t[r][e];return n}function P(t){var e=Object.keys(t);if(e.length!==1)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+e.length+" keys.");var n=e[0],r=t[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];O.startScope(n);try{var a=r.apply(void 0,o);return a instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),O.endScope(a),a}catch(u){throw O.endScope(null),u}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}Te.registerFlag("HAS_WEBGL",function(){return Te.getNumber("WEBGL_VERSION")>0}),Te.registerFlag("WEBGL_VERSION",function(){return M_(2)?2:M_(1)?1:0}),Te.registerFlag("WEBGL_BUFFER_SUPPORTED",function(){return Te.get("WEBGL_VERSION")===2}),Te.registerFlag("WEBGL_CPU_FORWARD",function(){return!0}),Te.registerFlag("WEBGL_FORCE_F16_TEXTURES",function(){return!1}),Te.registerFlag("WEBGL_PACK",function(){return Te.getBool("HAS_WEBGL")}),Te.registerFlag("WEBGL_PACK_NORMALIZATION",function(){return Te.getBool("WEBGL_PACK")}),Te.registerFlag("WEBGL_PACK_CLIP",function(){return Te.getBool("WEBGL_PACK")}),Te.registerFlag("WEBGL_PACK_DEPTHWISECONV",function(){return!1}),Te.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",function(){return Te.getBool("WEBGL_PACK")}),Te.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",function(){return Te.getBool("WEBGL_PACK")}),Te.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",function(){return Te.getBool("WEBGL_PACK")}),Te.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",function(){return Te.getBool("WEBGL_PACK")}),Te.registerFlag("WEBGL_PACK_REDUCE",function(){return Te.getBool("WEBGL_PACK")}),Te.registerFlag("WEBGL_LAZILY_UNPACK",function(){return Te.getBool("WEBGL_PACK")}),Te.registerFlag("WEBGL_CONV_IM2COL",function(){return Te.getBool("WEBGL_PACK")}),Te.registerFlag("WEBGL_MAX_TEXTURE_SIZE",function(){return E$(Te.getNumber("WEBGL_VERSION"))}),Te.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",function(){return I$(Te.getNumber("WEBGL_VERSION"))}),Te.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",function(){var t=Te.getNumber("WEBGL_VERSION");return t===0?0:T$(t)}),Te.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",function(){return Te.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(t=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))));var t}),Te.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",function(){return C$(Te.getNumber("WEBGL_VERSION"))}),Te.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",function(){return!Te.getBool("WEBGL_FORCE_F16_TEXTURES")&&Te.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")}),Te.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",function(){return k$(Te.getNumber("WEBGL_VERSION"))}),Te.registerFlag("WEBGL_FENCE_API_ENABLED",function(){return S$(Te.getNumber("WEBGL_VERSION"))}),Te.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",function(){return Te.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0}),e$=zT;var Kt=P({complex_:function(t,e){var n=k(t,"real","complex"),r=k(e,"imag","complex");return $e(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),O.runKernel(function(i){return i.complex(n,r)},{$real:n,$imag:r})}}),fr=P({real_:function(t){var e=k(t,"input","real");return O.runKernel(function(n){return n.real(e)},{$input:e})}}),Xr=P({imag_:function(t){var e=k(t,"input","imag");return O.runKernel(function(n){return n.imag(e)},{$input:e})}});function Xt(t,e,n){return ua(t,e,io(t,n),n)}function ua(t,e,n,r){if(r==null&&(r=Xc(t)),r==="complex64")throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!xn(t)&&!Array.isArray(t)&&typeof t!="number"&&typeof t!="boolean"&&typeof t!="string")throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(e!=null){BT(e);var i=ve(e),o=ve(n);A(i===o,function(){return"Based on the provided shape, ["+e+"], the tensor should have "+i+" values but has "+o});for(var s=0;s<n.length;++s){var a=n[s],u=s!==n.length-1||a!==ve(e.slice(s));A(n[s]===e[s]||!u,function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+e+"). "})}}return xn(t)||Array.isArray(t)||(t=[t]),e=e||n,t=r!=="string"?FT(t,r,q().getBool("DEBUG")):Mo(t,[],!0),ie.make(e,{values:t},r)}function ge(t,e){if((xn(t)&&e!=="string"||Array.isArray(t))&&e!=="complex64")throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if(e==="string"&&xn(t)&&!(t instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return ua(t,[],[],e)}function Ys(t,e){Uu(t);var n=io(t,e);if(n.length!==1)throw new Error("tensor1d() requires values to be a flat/TypedArray");return ua(t,null,n,e)}function Za(t,e,n){if(Uu(t),e!=null&&e.length!==2)throw new Error("tensor2d() requires shape to have two numbers");var r=io(t,n);if(r.length!==2&&r.length!==1)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return ua(t,e,r,n)}function qT(t,e,n){if(Uu(t),e!=null&&e.length!==3)throw new Error("tensor3d() requires shape to have three numbers");var r=io(t,n);if(r.length!==3&&r.length!==1)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return ua(t,e,r,n)}function ls(t,e,n){if(Uu(t),e!=null&&e.length!==4)throw new Error("tensor4d() requires shape to have four numbers");var r=io(t,n);if(r.length!==4&&r.length!==1)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return ua(t,e,r,n)}function P$(t,e,n){if(Uu(t),e!=null&&e.length!==5)throw new Error("tensor5d() requires shape to have five numbers");var r=io(t,n);if(r.length!==5&&r.length!==1)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return ua(t,e,r,n)}function D$(t,e,n){if(Uu(t),e!=null&&e.length!==6)throw new Error("tensor6d() requires shape to have six numbers");var r=io(t,n);if(r.length!==6&&r.length!==1)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(r.length===1&&e==null)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return ua(t,e=e||r,r,n)}function la(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=la(t,"float32"),r=ft(t,"float32");return Kt(n,r)}var i=$T(ve(t),e);return ie.make(t,{values:i},e)}function ft(t,e){if(e===void 0&&(e="float32"),e==="complex64"){var n=ft(t,"float32"),r=ft(t,"float32");return Kt(n,r)}var i=Qc(ve(t),e);return ie.make(t,{values:i},e)}function up(t,e,n){return O.runKernel(function(r){return r.fill(t,e,n)},{})}function HT(t,e,n){if(n<=0)throw new Error("The number of values should be positive.");return O.runKernel(function(r){return r.linspace(t,e,n)},{})}function c0(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n===0)throw new Error("Cannot have a step of zero");if(t===e||t<e&&n<0||e<t&&n>1)return ft([0],r);var i=Qc(Math.abs(Math.ceil((e-t)/n)),r);e<t&&n===1&&(n=-1),i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return Ys(i,r)}var d0=P({onesLike_:function(t){var e=k(t,"x","onesLike");if(e.dtype==="complex64"){var n=d0(fr(e)),r=Ve(Xr(e));return Kt(n,r)}return O.runKernel(function(i){return i.onesLike(e)},{$x:e},function(i,o){return{$x:function(){return Ve(i)}}})}}),Ve=P({zerosLike_:function(t){var e=k(t,"x","zerosLike");return O.runKernel(function(n){return n.zerosLike(e)},{$x:e},function(n,r){return{$x:function(){return Ve(n)}}})}}),Vr=P({concat_:function(t,e){e===void 0&&(e=0),A(t.length>=1,function(){return"Pass at least one tensor to concat"});var n=yf(t,"tensors","concat");n[0].dtype==="complex64"&&n.forEach(function(s){if(s.dtype!=="complex64")throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+s.dtype+". ")}),e=gn(e,n[0].shape)[0];var r=Iu(n.map(function(s){return s.shape}),e);if(ve(r)===0)return Xt([],r);if((n=n.filter(function(s){return s.size>0})).length===1)return n[0];var i=n.map(function(s){return s.shape});N$(i,e);var o=n;return O.runKernel(function(s){return s.concat(n,e)},o,function(s){var a=i.map(function(u){return u[e]});return lp(s,a,e).map(function(u){return function(){return u}})})}}),O$=P({concat1d_:function(t){return Vr(t,0)}}),L$=P({concat2d_:function(t,e){return Vr(t,e)}}),M$=P({concat3d_:function(t,e){return Vr(t,e)}}),V$=P({concat4d_:function(t,e){return Vr(t,e)}}),lp=P({split_:function(t,e,n){n===void 0&&(n=0);var r,i=k(t,"x","split");return n=gn(n,i.shape)[0],typeof e=="number"?(A(i.shape[n]%e==0,function(){return"Number of splits must evenly divide the axis."}),r=new Array(e).fill(i.shape[n]/e)):(A(i.shape[n]===e.reduce(function(o,s){return o+s}),function(){return"The sum of sizes must match the size of the axis dimension."}),r=e),O.runKernel(function(o){return o.split(i,r,n)},{$x:i},function(o){return{$x:function(){return Vr(o,n)}}})}});function zu(t,e){return t(e={exports:{}},e.exports),e.exports}var vse=zu(function(t){(function(e,n,r){function i(a){var u,l=this,c=(u=4022871197,function(d){d=d.toString();for(var h=0;h<d.length;h++){var f=.02519603282416938*(u+=d.charCodeAt(h));f-=u=f>>>0,u=(f*=u)>>>0,u+=4294967296*(f-=u)}return 23283064365386963e-26*(u>>>0)});l.next=function(){var d=2091639*l.s0+23283064365386963e-26*l.c;return l.s0=l.s1,l.s1=l.s2,l.s2=d-(l.c=0|d)},l.c=1,l.s0=c(" "),l.s1=c(" "),l.s2=c(" "),l.s0-=c(a),l.s0<0&&(l.s0+=1),l.s1-=c(a),l.s1<0&&(l.s1+=1),l.s2-=c(a),l.s2<0&&(l.s2+=1),c=null}function o(a,u){return u.c=a.c,u.s0=a.s0,u.s1=a.s1,u.s2=a.s2,u}function s(a,u){var l=new i(a),c=u&&u.state,d=l.next;return d.int32=function(){return 4294967296*l.next()|0},d.double=function(){return d()+11102230246251565e-32*(2097152*d()|0)},d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.alea=s})(0,t,!1)}),yse=zu(function(t){(function(e,n,r){function i(a){var u=this,l="";u.x=0,u.y=0,u.z=0,u.w=0,u.next=function(){var d=u.x^u.x<<11;return u.x=u.y,u.y=u.z,u.z=u.w,u.w^=u.w>>>19^d^d>>>8},a===(0|a)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u}function s(a,u){var l=new i(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.xor128=s})(0,t,!1)}),wse=zu(function(t){(function(e,n,r){function i(a){var u=this,l="";u.next=function(){var d=u.x^u.x>>>2;return u.x=u.y,u.y=u.z,u.z=u.w,u.w=u.v,(u.d=u.d+362437|0)+(u.v=u.v^u.v<<4^d^d<<1)|0},u.x=0,u.y=0,u.z=0,u.w=0,u.v=0,a===(0|a)?u.x=a:l+=a;for(var c=0;c<l.length+64;c++)u.x^=0|l.charCodeAt(c),c==l.length&&(u.d=u.x<<10^u.x>>>4),u.next()}function o(a,u){return u.x=a.x,u.y=a.y,u.z=a.z,u.w=a.w,u.v=a.v,u.d=a.d,u}function s(a,u){var l=new i(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.xorwow=s})(0,t,!1)}),bse=zu(function(t){(function(e,n,r){function i(a){var u=this;u.next=function(){var l,c,d=u.x,h=u.i;return l=d[h],c=(l^=l>>>7)^l<<24,c^=(l=d[h+1&7])^l>>>10,c^=(l=d[h+3&7])^l>>>3,c^=(l=d[h+4&7])^l<<7,l=d[h+7&7],c^=(l^=l<<13)^l<<9,d[h]=c,u.i=h+1&7,c},function(l,c){var d,h=[];if(c===(0|c))h[0]=c;else for(c=""+c,d=0;d<c.length;++d)h[7&d]=h[7&d]<<15^c.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],l.x=h,l.i=0,d=256;d>0;--d)l.next()}(u,a)}function o(a,u){return u.x=a.x.slice(),u.i=a.i,u}function s(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},d.int32=l.next,d.quick=d,c&&(c.x&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.xorshift7=s})(0,t,!1)}),xse=zu(function(t){(function(e,n,r){function i(a){var u=this;u.next=function(){var l,c,d=u.w,h=u.X,f=u.i;return u.w=d=d+1640531527|0,c=h[f+34&127],l=h[f=f+1&127],c^=c<<13,l^=l<<17,c^=c>>>15,l^=l>>>12,c=h[f]=c^l,u.i=f,c+(d^d>>>16)|0},function(l,c){var d,h,f,m,v,y=[],g=128;for(c===(0|c)?(h=c,c=null):(c+="\0",h=0,g=Math.max(g,c.length)),f=0,m=-32;m<g;++m)c&&(h^=c.charCodeAt((m+32)%c.length)),m===0&&(v=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,m>=0&&(v=v+1640531527|0,f=(d=y[127&m]^=h+v)==0?f+1:0);for(f>=128&&(y[127&(c&&c.length||0)]=-1),f=127,m=512;m>0;--m)h=y[f+34&127],d=y[f=f+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,y[f]=h^d;l.w=v,l.X=y,l.i=f}(u,a)}function o(a,u){return u.i=a.i,u.w=a.w,u.X=a.X.slice(),u}function s(a,u){a==null&&(a=+new Date);var l=new i(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},d.int32=l.next,d.quick=d,c&&(c.X&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.xor4096=s})(0,t,!1)}),_se=zu(function(t){(function(e,n,r){function i(a){var u=this,l="";u.next=function(){var d=u.b,h=u.c,f=u.d,m=u.a;return d=d<<25^d>>>7^h,h=h-f|0,f=f<<24^f>>>8^m,m=m-d|0,u.b=d=d<<20^d>>>12^h,u.c=h=h-f|0,u.d=f<<16^h>>>16^m,u.a=m-d|0},u.a=0,u.b=0,u.c=-1640531527,u.d=1367130551,a===Math.floor(a)?(u.a=a/4294967296|0,u.b=0|a):l+=a;for(var c=0;c<l.length+20;c++)u.b^=0|l.charCodeAt(c),u.next()}function o(a,u){return u.a=a.a,u.b=a.b,u.c=a.c,u.d=a.d,u}function s(a,u){var l=new i(a),c=u&&u.state,d=function(){return(l.next()>>>0)/4294967296};return d.double=function(){do var h=((l.next()>>>11)+(l.next()>>>0)/4294967296)/2097152;while(h===0);return h},d.int32=l.next,d.quick=d,c&&(typeof c=="object"&&o(c,l),d.state=function(){return o(l,{})}),d}n&&n.exports?n.exports=s:r&&r.amd?r(function(){return s}):this.tychei=s})(0,t,!1)}),Ca=zu(function(t){(function(e,n){var r,i=this,o=256,s=6,a="random",u=n.pow(o,s),l=n.pow(2,52),c=2*l,d=o-1;function h(g,w,b){var x=[],_=v(function C(S,N){var R,D=[],W=typeof S;if(N&&W=="object")for(R in S)try{D.push(C(S[R],N-1))}catch(F){}return D.length?D:W=="string"?S:S+"\0"}((w=w==1?{entropy:!0}:w||{}).entropy?[g,y(e)]:g==null?function(){try{var C;return r&&(C=r.randomBytes)?C=C(o):(C=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(C)),y(C)}catch(R){var S=i.navigator,N=S&&S.plugins;return[+new Date,i,N,i.screen,y(e)]}}():g,3),x),E=new f(x),I=function(){for(var C=E.g(s),S=u,N=0;C<l;)C=(C+N)*o,S*=o,N=E.g(1);for(;C>=c;)C/=2,S/=2,N>>>=1;return(C+N)/S};return I.int32=function(){return 0|E.g(4)},I.quick=function(){return E.g(4)/4294967296},I.double=I,v(y(E.S),e),(w.pass||b||function(C,S,N,R){return R&&(R.S&&m(R,E),C.state=function(){return m(E,{})}),N?(n[a]=C,S):C})(I,_,"global"in w?w.global:this==n,w.state)}function f(g){var w,b=g.length,x=this,_=0,E=x.i=x.j=0,I=x.S=[];for(b||(g=[b++]);_<o;)I[_]=_++;for(_=0;_<o;_++)I[_]=I[E=d&E+g[_%b]+(w=I[_])],I[E]=w;(x.g=function(C){for(var S,N=0,R=x.i,D=x.j,W=x.S;C--;)S=W[R=d&R+1],N=N*o+W[d&(W[R]=W[D=d&D+S])+(W[D]=S)];return x.i=R,x.j=D,N})(o)}function m(g,w){return w.i=g.i,w.j=g.j,w.S=g.S.slice(),w}function v(g,w){for(var b,x=g+"",_=0;_<x.length;)w[d&_]=d&(b^=19*w[d&_])+x.charCodeAt(_++);return y(w)}function y(g){return String.fromCharCode.apply(0,g)}if(n["seed"+a]=h,v(n.random(),e),t.exports){t.exports=h;try{r=require("crypto")}catch(g){}}})([],Math)});Ca.alea=vse,Ca.xor128=yse,Ca.xorwow=wse,Ca.xorshift7=bse,Ca.xor4096=xse,Ca.tychei=_se;var h0=Ca.alea,GT=function(){function t(e,n,r,i,o){this.mean=e,this.stdDev=n,this.dtype=r,this.nextVal=NaN,this.truncated=i,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var s=o||Math.random();this.random=h0(s.toString())}return t.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var n,r,i=!1;!i;){var o=void 0,s=void 0,a=void 0;do a=(o=2*this.random()-1)*o+(s=2*this.random()-1)*s;while(a>=1||a===0);var u=Math.sqrt(-2*Math.log(a)/a);n=this.mean+this.stdDev*o*u,r=this.mean+this.stdDev*s*u,this.truncated&&!this.isValidTruncated(n)||(i=!0)}return this.truncated&&!this.isValidTruncated(r)||(this.nextVal=this.convertValue(r)),this.convertValue(n)},t.prototype.convertValue=function(e){return this.dtype==null||this.dtype==="float32"?e:Math.round(e)},t.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},t}(),Ese=function(){function t(e,n,r,i){this.alpha=e,this.beta=1/n,this.dtype=r;var o=i||Math.random();this.randu=h0(o.toString()),this.randn=new GT(0,1,r,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return t.prototype.nextValue=function(){for(var e,n,r,i,o,s;;){do i=this.randn.nextValue(),s=1+this.c*i;while(s<=0);if(s*=s*s,n=1-.331*(e=i*i)*e,r=.5*e+this.d*(1-s+Math.log(s)),(o=this.randu())<n||Math.log(o)<r)break}return s=1/this.beta*this.d*s,this.alpha<1&&(s*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(s)},t.prototype.convertValue=function(e){return this.dtype==="float32"?e:Math.round(e)},t}(),Ise=function(){function t(e,n,r,i){var o=this;if(e===void 0&&(e=0),n===void 0&&(n=1),this.canReturnFloat=function(){return o.dtype==null||o.dtype==="float32"},this.min=e,this.range=n-e,this.dtype=r,i==null&&(i=Math.random()),typeof i=="number"&&(i=i.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+n+" <= 1 and dtype is not float");this.random=h0(i)}return t.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},t.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},t}();function ke(t,e,n){return e===void 0&&(e="float32"),e=e||"float32",BT(t),new _c(t,e,n)}function F$(t,e){e===void 0&&(e=!1),console.log(t.toString(e))}var f0=P({batchToSpaceND_:function(t,e,n){var r=k(t,"x","batchToSpaceND"),i=e.reduce(function(o,s){return o*s});return A(r.rank>=1+e.length,function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+e.length}),A(n.length===e.length,function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+e.length}),A(r.shape[0]%i==0,function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+e.join(" * ")+" === "+i}),O.runKernel(function(o){return o.batchToSpaceND(r,e,n)},{$x:r},function(o){return{$x:function(){return o.spaceToBatchND(e,n)}}})}}),KT=P({cast_:function(t,e){var n=k(t,"x","cast");if(!G3(e))throw new Error("Failed to cast to unknown dtype "+e);if(e==="string"&&n.dtype!=="string"||e!=="string"&&n.dtype==="string")throw new Error("Only strings can be casted to strings");return O.runKernel(function(r){return r.cast(n,e)},{$x:n},function(r){return{$x:function(){return r.clone()}}})}}),$$=P({clone_:function(t){var e=k(t,"x","clone",null);return O.runKernel(function(n){return ie.make(e.shape,{dataId:e.dataId},e.dtype)},{$x:e},function(n){return{$x:function(){return n.toFloat()}}})}}),B$=P({cumsum_:function(t,e,n,r){e===void 0&&(e=0),n===void 0&&(n=!1),r===void 0&&(r=!1);var i=k(t,"x","cumsum"),o=Ci([e|=0],i.rank),s=i;o!=null&&(s=i.transpose(o));var a=ki(1,i.rank)[0],u=O.runKernel(function(l){return l.cumsum(s,a,n,r)},{permutedX:s},function(l){return{permutedX:function(){return l.cumsum(e,n,!r)}}});return o!=null&&(u=u.transpose(o)),u}}),YT=P({depthToSpace_:function(t,e,n){n===void 0&&(n="NHWC");var r=k(t,"x","depthToSpace"),i=n==="NHWC"?r.shape[1]:r.shape[2],o=n==="NHWC"?r.shape[2]:r.shape[3],s=n==="NHWC"?r.shape[3]:r.shape[1];return A(i*e>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+e+"  for depthToSpace with input shape\n      "+r.shape}),A(o*e>=0,function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+e+" for depthToSpace with input shape\n          "+r.shape}),A(s%(e*e)==0,function(){return"Dimension size must be evenly divisible by "+e*e+" but is "+s+" for depthToSpace with input shape "+r.shape}),O.runKernel(function(a){return a.depthToSpace(r,e,n)},{$x:r})}}),Oi=P({expandDims_:function(t,e){e===void 0&&(e=0);var n=k(t,"x","expandDims",null);A(e<=n.rank,function(){return"Axis must be <= rank of the tensor"});var r=n.shape.slice();return e<0&&(A(-(n.rank+1)<=e,function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"}),e=n.rank+e+1),r.splice(e,0,1),cp(n,r)}}),XT=P({eye_:function(t,e,n,r){r===void 0&&(r="float32"),e==null&&(e=t);for(var i=ke([t,e],r),o=t<=e?t:e,s=0;s<o;++s)i.set(1,s,s);var a=i.toTensor().as2D(t,e);if(n==null)return a;if(n.length===1)return eu(Oi(a,0),[n[0],1,1]);if(n.length===2)return eu(Oi(Oi(a,0),0),[n[0],n[1],1,1]);if(n.length===3)return eu(Oi(Oi(Oi(a,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),QT=P({multinomial_:function(t,e,n,r){r===void 0&&(r=!1);var i=k(t,"logits","multinomial"),o=i.size,s=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(s>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+s);n=n||Math.random();var a=s===1?i.as2D(1,-1):i,u=O.runKernel(function(l){return l.multinomial(a,r,e,n)},{logits2D:a});return s===1?u.as1D():u}}),wf=P({oneHot_:function(t,e,n,r){if(n===void 0&&(n=1),r===void 0&&(r=0),e<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+e);var i=k(t,"indices","oneHot","int32"),o=i.shape.concat([e]);return i=i.flatten(),O.runKernel(function(s){return s.oneHot(i,e,n,r)},{$indices:i},function(s){return{$indices:function(){return ft(i.shape,"float32")}}}).reshape(o)}}),Wu=P({pad_:function(t,e,n){n===void 0&&(n=0);var r=k(t,"x","pad");if(r.rank===0)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i=e.map(function(o){return o[0]});return O.runKernel(function(o){return o.pad(r,e,n)},{$x:r},function(o){return{$x:function(){return o.slice(i,r.shape)}}})}}),j$=P({pad1d_:function(t,e,n){return n===void 0&&(n=0),A(e.length===2,function(){return"Invalid number of paddings. Must be length of 2."}),Wu(t,[e],n)}}),U$=P({pad2d_:function(t,e,n){return n===void 0&&(n=0),A(e.length===2&&e[0].length===2&&e[1].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Wu(t,e,n)}}),z$=P({pad3d_:function(t,e,n){return n===void 0&&(n=0),A(e.length===3&&e[0].length===2&&e[1].length===2&&e[2].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Wu(t,e,n)}}),W$=P({pad4d_:function(t,e,n){return n===void 0&&(n=0),A(e.length===4&&e[0].length===2&&e[1].length===2&&e[2].length===2&&e[3].length===2,function(){return"Invalid number of paddings. Must be length of 2 each."}),Wu(t,e,n)}}),q$=P({rand_:function(t,e,n){var r=ve(t),i=null;if(n==null||n==="float32")i=new Float32Array(r);else if(n==="int32")i=new Int32Array(r);else{if(n!=="bool")throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=e();return ie.make(t,{values:i},n)}}),H$=P({randomNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new GT(e,n,r,!1,i),s=ke(t,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),G$=P({randomGamma_:function(t,e,n,r,i){if(n===void 0&&(n=1),r===void 0&&(r="float32"),n==null&&(n=1),r==null&&(r="float32"),r!=="float32"&&r!=="int32")throw new Error("Unsupported data type "+r);for(var o=new Ese(e,n,r,i),s=ke(t,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),p0=P({randomUniform_:function(t,e,n,r,i){e===void 0&&(e=0),n===void 0&&(n=1),r===void 0&&(r="float32");for(var o=ke(t,r),s=new Ise(e,n,null,i),a=0;a<o.values.length;a++)o.values[a]=s.nextValue();return o.toTensor()}}),cp=P({reshape_:function(t,e){var n=k(t,"x","reshape",null);return e=q3(e,n.size),A(n.size===ve(e),function(){return"new shape and old shape must have the same number of elements."}),O.runKernel(function(r){return r.reshape(n,e)},{$x:n},function(r){return{$x:function(){return r.reshape(n.shape)}}})}}),m0=P({spaceToBatchND_:function(t,e,n){var r=k(t,"x","spaceToBatchND");return A(r.rank>=1+e.length,function(){return"input rank "+r.rank+" should be > than [blockShape] "+e.length}),A(n.length===e.length,function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+e.length}),A(r.shape.reduce(function(i,o,s){return s>0&&s<=e.length?i&&(o+n[s-1][0]+n[s-1][1])%e[s-1]==0:i},!0),function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+e.toString()}),O.runKernel(function(i){return i.spaceToBatchND(r,e,n)},{$x:r},function(i){return{$x:function(){return i.batchToSpaceND(e,n)}}})}}),g0=P({squeeze_:function(t,e){var n=k(t,"x","squeeze");return cp(n,gs(n.shape,e).newShape)}}),Vo=P({stack_:function(t,e){e===void 0&&(e=0);var n=yf(t,"tensors","stack");if(A(n.length>=1,function(){return"Pass at least one tensor to tf.stack"}),n.length===1)return n[0].expandDims(e);var r=n[0].rank,i=n[0].shape,o=n[0].dtype;A(e<=r,function(){return"Axis must be <= rank of the tensor"}),n.forEach(function(a){$e(i,a.shape,"All tensors passed to stack must have matching shapes")}),n.forEach(function(a){A(o===a.dtype,function(){return"All tensors passed to stack must have matching dtypes"})});var s=n.map(function(a){return a.expandDims(e)});return Vr(s,e)}}),eu=P({tile_:function(t,e){var n=k(t,"x","tile",null);return A(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+e+"."}),O.runKernel(function(r,i){var o=r.tile(n,e);return i([n]),o},{$x:n},function(r,i){var o=i[0];return{$x:function(){var s=Ve(o);if(o.rank===1)for(var a=0;a<e[0];++a)s=s.add(r.slice([a*o.shape[0]],[o.shape[0]]));else if(o.rank===2)for(a=0;a<e[0];++a)for(var u=0;u<e[1];++u)s=s.add(r.slice([a*o.shape[0],u*o.shape[1]],[o.shape[0],o.shape[1]]));else if(o.rank===3)for(a=0;a<e[0];++a)for(u=0;u<e[1];++u)for(var l=0;l<e[2];++l)s=s.add(r.slice([a*o.shape[0],u*o.shape[1],l*o.shape[2]],[o.shape[0],o.shape[1],o.shape[2]]));else{if(o.rank!==4)throw new Error("Gradient for tile operation is not implemented for rank-"+o.rank+" tensors yet.");for(a=0;a<e[0];++a)for(u=0;u<e[1];++u)for(l=0;l<e[2];++l)for(var c=0;c<e[3];++c)s=s.add(r.slice([a*o.shape[0],u*o.shape[1],l*o.shape[2],c*o.shape[3]],[o.shape[0],o.shape[1],o.shape[2],o.shape[3]]))}return s}}})}}),JT=P({truncatedNormal_:function(t,e,n,r,i){if(e===void 0&&(e=0),n===void 0&&(n=1),r!=null&&r==="bool")throw new Error("Unsupported data type "+r);for(var o=new GT(e,n,r,!0,i),s=ke(t,r),a=0;a<s.values.length;a++)s.values[a]=o.nextValue();return s.toTensor()}}),dp=P({unstack_:function(t,e){e===void 0&&(e=0),e=e||0;var n=k(t,"x","unstack");return A(e>=-n.shape.length&&e<n.shape.length,function(){return"Axis = "+e+" is not in [-"+n.shape.length+", "+n.shape.length+")"}),e<0&&(e+=n.shape.length),O.runKernel(function(r){return r.unstack(n,e)},{$x:n},function(r){return{$x:function(){return Vo(r,e)}}})}}),ZT=function(t,e){return pe(this,void 0,void 0,function(){var n,r,i,o,s,a,u,l,c,d;return me(this,function(h){switch(h.label){case 0:return n=k(t,"x","setdiff1d"),r=k(e,"y","setdiff1d"),A(n.dtype===r.dtype,function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."}),A(n.rank===1,function(){return"x should be 1D tensor, but got x ("+n.shape+")."}),A(r.rank===1,function(){return"y should be 1D tensor, but got y ("+r.shape+")."}),[4,n.data()];case 1:return i=h.sent(),[4,r.data()];case 2:for(o=h.sent(),s=new Set(o),a=0,c=0;c<i.length;c++)s.has(i[c])||a++;for(u=new _c([a],n.dtype),l=new _c([a],"int32"),c=0,d=0;c<i.length;c++)s.has(i[c])||(u.values[d]=i[c],l.values[d]=c,d++);return[2,[u.toTensor(),l.toTensor()]]}})})};function lv(t,e,n,r){r===void 0&&(r=!0);var i=[];if(r)(i=i.concat(e.slice(0))).push(t[0]/n),i=i.concat(t.slice(1));else{i=i.concat(t[0]);for(var o=e.length,s=0;s<o;++s)i=i.concat([t[s+1]/e[s],e[s]]);i=i.concat(t.slice(o+1))}return i}function cv(t,e,n){n===void 0&&(n=!0);var r=[];if(n){r.push(e);for(var i=e+1;i<t;++i)i<=2*e?(r.push(i),r.push(i-(e+1))):r.push(i)}else{var o=[],s=[];for(i=1;i<t;++i)i>=2*e+1||i%2==1?s.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,s)}return r}function dv(t,e,n,r){r===void 0&&(r=!0);var i=[];r?i.push(t[0]/n):i.push(t[0]*n);for(var o=1;o<t.length;++o)o<=e.length?r?i.push(e[o-1]*t[o]):i.push(t[o]/e[o-1]):i.push(t[o]);return i}function K$(t,e){for(var n=[0],r=0;r<e;++r)n.push(t[r][0]);return n}function Y$(t,e,n){for(var r=t.slice(0,1),i=0;i<n;++i)r.push(t[i+1]-e[i][0]-e[i][1]);return r}function X$(t,e){if(t.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(e.dtype!=="int32")throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.shape[e.rank-1]>t.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+e.shape[e.rank-1]+" vs. "+t.rank);if(t.size===0)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+t.shape+".");for(var n=e.shape,r=n[n.length-1],i=1,o=0;o<n.length-1;++o)i*=n[o];var s=t.shape,a=n.slice();a.pop();var u=1;for(o=r;o<t.rank;++o)u*=s[o],a.push(s[o]);var l=aa(t.shape).map(function(c){return c/u}).concat([1]).slice(0,r);return[a,i,u,l]}var Q$=30;function ob(t){return t<=Q$?t:uv(t,Math.floor(Math.sqrt(t)))}function Tse(t,e,n){if(e.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+t.rank+".");if(e.dtype!=="int32")throw new Error("The dtype of 'indices' should be int32, but got dtype: "+e.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(n.length===0){if(e.size===0)throw new Error("Indices specified for empty output. indices shape: "+e.shape);if(t.size===0)throw new Error("Updates specified for empty output. updates shape: "+t.shape)}(function(r,i,o){var s=i.rank>1?i.shape[i.rank-1]:1,a=i.rank>1?i.rank-1:1,u="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+o.shape+", indices.shape: "+i.shape+", shape: "+r+", sliceDim: "+s+", and batchDim: "+a+".";if(o.rank<a)throw new Error(u+" update.rank < "+a+". ");if(r.length<s+(o.rank-a))throw new Error(u+" Output shape length < "+(s+(o.rank-a)));if(o.rank!==a+r.length-s)throw new Error(u+" update.rank != "+(a+r.length-s));for(var l=0;l<a;++l)if(o.shape[l]!==i.shape[l])throw new Error(u+" updates.shape["+l+"] ("+o.shape[l]+") != indices.shape["+l+"] ("+i.shape[l]+").");for(l=0;l<o.rank-a;++l)if(o.shape[l+a]!==r[l+s])throw new Error(u+" updates.shape["+(l+a)+"] ("+o.shape[l+a]+") != shape["+(l+a)+"] ("+r[l+a]+")")})(n,e,t)}function hv(t,e,n){for(var r=e.rank>1?e.shape[e.rank-1]:1,i=n.length,o=1,s=r;s<i;++s)o*=n[s];var a=r<1?1:r;return{sliceRank:r,numUpdates:e.size/a,sliceSize:o,strides:aa(n.slice(0,r)).concat([1]),outputSize:ve(n)}}function h2(t){for(var e=[],n=0;t>0;)1&t&&e.push(n),t/=2,n++;return e}function eC(t,e,n){for(var r=[],i=0;i<t.length;i++)r[i]=Math.ceil((e[i]-t[i])/n[i]);return r}function Cse(t,e,n,r,i){var o=e[i],s=n[i]||1;(t&1<<i||o==null)&&(o=s>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),o=sv(0,o,a-1)}function kse(t,e,n,r,i){var o=e[i],s=n[i]||1;(t&1<<i||o==null)&&(o=s>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var a=r[i];return o<0&&(o+=a),o=s>0?sv(0,o,a):sv(-1,o,a-1)}function J$(t,e,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(e[i]>0||n[i]!==t[i])return!1;return!0}function Z$(t,e){for(var n=t.length>0?t[t.length-1]:1,r=0;r<t.length-1;r++)n+=t[r]*e[r];return n}function Sse(t){return A(Ks(t),function(){return"The f passed in grad(f) must be a function"}),function(e,n){var r=k(e,"x","tf.grad",null),i=n!=null?k(n,"dy","tf.grad"):null;return O.tidy(function(){var o=O.gradients(function(){return t(r)},[r],i),s=o.value,a=o.grads;return i!=null&&$e(s.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),v0(a),a[0]})}}function Ase(t){return A(Ks(t),function(){return"The f passed in grads(f) must be a function"}),function(e,n){A(Array.isArray(e),function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"});var r=yf(e,"args","tf.grads",null),i=n!=null?k(n,"dy","tf.grads"):null;return O.tidy(function(){var o=O.gradients(function(){return t.apply(void 0,r)},r,i),s=o.value,a=o.grads;return i!=null&&$e(s.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),v0(a),a})}}function Rse(t){return A(Ks(t),function(){return"The f passed in valueAndGrad(f) must be a function"}),function(e,n){A(e instanceof ie,function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"}),A(n==null||n instanceof ie,function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"});var r=O.gradients(function(){return t(e)},[e],n),i=r.grads,o=r.value;return v0(i),{grad:i[0],value:o}}}function Nse(t){return A(Ks(t),function(){return"The f passed in valueAndGrads(f) must be a function"}),function(e,n){A(Array.isArray(e)&&e.every(function(i){return i instanceof ie}),function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"}),A(n==null||n instanceof ie,function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"});var r=O.gradients(function(){return t.apply(void 0,e)},e,n);return n!=null&&$e(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),v0(r.grads),r}}function eB(t,e){A(Ks(t),function(){return"The f passed in variableGrads(f) must be a function"}),A(e==null||Array.isArray(e)&&e.every(function(c){return c instanceof Jc}),function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"});var n=e!=null;if(!n)for(var r in e=[],O.registeredVariables)e.push(O.registeredVariables[r]);var i=n?e.filter(function(c){return!c.trainable}):null,o=e.length;A((e=e.filter(function(c){return c.trainable})).length>0,function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."});var s=O.gradients(t,e,null,!0),a=s.value,u=s.grads;A(u.some(function(c){return c!=null}),function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."}),A(a.rank===0,function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+a.rank+" tensor"});var l={};return e.forEach(function(c,d){u[d]!=null&&(l[c.name]=u[d])}),i!=null&&i.forEach(function(c){return l[c.name]=null}),{value:a,grads:l}}function Zc(t){return O.customGrad(t)}function v0(t){if(t.filter(function(e){return e==null}).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var hp=P({softmax_:function(t,e){e===void 0&&(e=-1);var n=k(t,"logits","softmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+e);return Zc(function(r,i){var o=r.logSumExp([e],!0),s=r.toFloat().sub(o).exp();return i([s]),{value:s,gradFunc:function(a,u){var l=u[0],c=a.mul(l);return c.sub(c.sum([e],!0).mul(l))}}})(n)}}),tC=P({logSoftmax_:function(t,e){e===void 0&&(e=-1);var n=k(t,"logits","logSoftmax");if(e===-1&&(e=n.rank-1),e!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+e);return Zc(function(r,i){var o=r.max(e,!0),s=r.sub(o),a=s.toFloat().sub(s.exp().sum(e,!0).log());return i([a]),{value:a,gradFunc:function(u,l){var c=l[0].exp();return u.sub(u.sum(e,!0).mul(c))}}})(n)}}),nC=function(){function t(e,n){this.backend=e,this.dataMover=n,this.data=new WeakMap}return t.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},t.prototype.set=function(e,n){this.data.set(e,n)},t.prototype.has=function(e){return this.data.has(e)},t.prototype.delete=function(e){return this.data.delete(e)},t}(),Pse=function(){function t(){}return t.prototype.time=function(e){throw new Error("Not yet implemented.")},t.prototype.read=function(e){throw new Error("Not yet implemented.")},t.prototype.readSync=function(e){throw new Error("Not yet implemented.")},t.prototype.disposeData=function(e){throw new Error("Not yet implemented.")},t.prototype.write=function(e,n){throw new Error("Not yet implemented.")},t.prototype.fromPixels=function(e,n){throw new Error("Not yet implemented.")},t.prototype.register=function(e,n,r){throw new Error("Not yet implemented.")},t.prototype.memory=function(){throw new Error("Not yet implemented.")},t.prototype.floatPrecision=function(){throw new Error("Not yet implemented")},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.batchMatMul=function(e,n,r,i){throw new Error("Not yet implemented")},t.prototype.fusedBatchMatMul=function(e){throw e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,new Error("Not yet implemented")},t.prototype.slice=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.stridedSlice=function(e,n,r,i){throw new Error("Not yet implemented")},t.prototype.unstack=function(e,n){throw new Error("Not yet implemented")},t.prototype.reverse=function(e,n){throw new Error("Not yet implemented")},t.prototype.concat=function(e,n){throw new Error("Not yet implemented")},t.prototype.neg=function(e){throw new Error("Not yet implemented")},t.prototype.add=function(e,n){throw new Error("Not yet implemented")},t.prototype.addN=function(e){throw new Error("Not yet implemented")},t.prototype.subtract=function(e,n){throw new Error("Not yet implemented")},t.prototype.multiply=function(e,n){throw new Error("Not yet implemented")},t.prototype.realDivide=function(e,n){throw new Error("Not yet implemented")},t.prototype.floorDiv=function(e,n){throw new Error("Not yet implemented")},t.prototype.sum=function(e,n){throw new Error("Not yet implemented")},t.prototype.prod=function(e,n){throw new Error("Not yet implemented")},t.prototype.unsortedSegmentSum=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.argMin=function(e,n){throw new Error("Not yet implemented")},t.prototype.argMax=function(e,n){throw new Error("Not yet implemented")},t.prototype.equal=function(e,n){throw new Error("Not yet implemented")},t.prototype.notEqual=function(e,n){throw new Error("Not yet implemented")},t.prototype.less=function(e,n){throw new Error("Not yet implemented")},t.prototype.lessEqual=function(e,n){throw new Error("Not yet implemented")},t.prototype.greater=function(e,n){throw new Error("Not yet implemented")},t.prototype.greaterEqual=function(e,n){throw new Error("Not yet implemented")},t.prototype.logicalNot=function(e){throw new Error("Not yet implemented")},t.prototype.logicalAnd=function(e,n){throw new Error("Not yet implemented")},t.prototype.logicalOr=function(e,n){throw new Error("Not yet implemented")},t.prototype.where=function(e){throw new Error("Not yet implemented")},t.prototype.select=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.topk=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.min=function(e,n){throw new Error("Not yet implemented")},t.prototype.minimum=function(e,n){throw new Error("Not yet implemented")},t.prototype.mod=function(e,n){throw new Error("Not yet implemented")},t.prototype.max=function(e,n){throw new Error("Not yet implemented")},t.prototype.maximum=function(e,n){throw new Error("Not yet implemented")},t.prototype.all=function(e,n){throw new Error("Not yet implemented")},t.prototype.any=function(e,n){throw new Error("Not yet implemented")},t.prototype.squaredDifference=function(e,n){throw new Error("Not yet implemented")},t.prototype.ceil=function(e){throw new Error("Not yet implemented")},t.prototype.floor=function(e){throw new Error("Not yet implemented")},t.prototype.round=function(e){throw new Error("Not yet implemented")},t.prototype.sign=function(e){throw new Error("Not yet implemented")},t.prototype.isNaN=function(e){throw new Error("Not yet implemented")},t.prototype.isInf=function(e){throw new Error("Not yet implemented")},t.prototype.isFinite=function(e){throw new Error("Not yet implemented")},t.prototype.pow=function(e,n){throw new Error("Not yet implemented")},t.prototype.exp=function(e){throw new Error("Not yet implemented")},t.prototype.expm1=function(e){throw new Error("Not yet implemented")},t.prototype.log=function(e){throw new Error("Not yet implemented")},t.prototype.log1p=function(e){throw new Error("Not yet implemented")},t.prototype.sqrt=function(e){throw new Error("Not yet implemented")},t.prototype.rsqrt=function(e){throw new Error("Not yet implemented")},t.prototype.square=function(e){throw new Error("Not yet implemented")},t.prototype.reciprocal=function(e){throw new Error("Not yet implemented")},t.prototype.relu=function(e){throw new Error("Not yet implemented")},t.prototype.relu6=function(e){throw new Error("Not yet implemented")},t.prototype.prelu=function(e,n){throw new Error("Not yet implemented")},t.prototype.elu=function(e){throw new Error("Not yet implemented")},t.prototype.eluDer=function(e,n){throw new Error("Not yet implemented")},t.prototype.selu=function(e){throw new Error("Not yet implemented")},t.prototype.int=function(e){throw new Error("Not yet implemented")},t.prototype.clip=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.abs=function(e){throw new Error("Not yet implemented")},t.prototype.complexAbs=function(e){throw new Error("Not yet implemented")},t.prototype.sigmoid=function(e){throw new Error("Not yet implemented")},t.prototype.softplus=function(e){throw new Error("Not yet implemented")},t.prototype.sin=function(e){throw new Error("Not yet implemented")},t.prototype.cos=function(e){throw new Error("Not yet implemented")},t.prototype.tan=function(e){throw new Error("Not yet implemented")},t.prototype.asin=function(e){throw new Error("Not yet implemented")},t.prototype.acos=function(e){throw new Error("Not yet implemented")},t.prototype.atan=function(e){throw new Error("Not yet implemented")},t.prototype.atan2=function(e,n){throw new Error("Not yet implemented")},t.prototype.sinh=function(e){throw new Error("Not yet implemented")},t.prototype.cosh=function(e){throw new Error("Not yet implemented")},t.prototype.tanh=function(e){throw new Error("Not yet implemented")},t.prototype.asinh=function(e){throw new Error("Not yet implemented")},t.prototype.acosh=function(e){throw new Error("Not yet implemented")},t.prototype.atanh=function(e){throw new Error("Not yet implemented")},t.prototype.erf=function(e){throw new Error("Not yet implemented")},t.prototype.step=function(e,n){throw new Error("Not yet implemented")},t.prototype.fusedConv2d=function(e){throw e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,new Error("Not yet implemented")},t.prototype.conv2d=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.conv2dDerInput=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.conv2dDerFilter=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.fusedDepthwiseConv2D=function(e){throw e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,new Error("Not yet implemented")},t.prototype.depthwiseConv2D=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.depthwiseConv2DDerInput=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.conv3d=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.conv3dDerInput=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.conv3dDerFilter=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.maxPool=function(e,n){throw new Error("Not yet implemented")},t.prototype.maxPoolBackprop=function(e,n,r,i){throw new Error("Not yet implemented")},t.prototype.avgPool=function(e,n){throw new Error("Not yet implemented")},t.prototype.avgPoolBackprop=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.avgPool3d=function(e,n){throw new Error("Not yet implemented")},t.prototype.avgPool3dBackprop=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.maxPool3d=function(e,n){throw new Error("Not yet implemented")},t.prototype.maxPool3dBackprop=function(e,n,r,i){throw new Error("Not yet implemented")},t.prototype.reshape=function(e,n){throw new Error("Not yet implemented")},t.prototype.cast=function(e,n){throw new Error("Not yet implemented")},t.prototype.tile=function(e,n){throw new Error("Not yet implemented")},t.prototype.pad=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.transpose=function(e,n){throw new Error("Not yet implemented")},t.prototype.gather=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.gatherND=function(e,n){throw new Error("Not yet implemented")},t.prototype.scatterND=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.batchToSpaceND=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.spaceToBatchND=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.resizeBilinear=function(e,n,r,i){throw new Error("Not yet implemented")},t.prototype.resizeBilinearBackprop=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.resizeNearestNeighbor=function(e,n,r,i){throw new Error("Not yet implemented")},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.batchNormalization=function(e,n,r,i,o,s){throw new Error("Not yet implemented")},t.prototype.localResponseNormalization4D=function(e,n,r,i,o){throw new Error("Not yet implemented")},t.prototype.LRNGrad=function(e,n,r,i,o,s,a){throw new Error("Not yet implemented")},t.prototype.multinomial=function(e,n,r,i){throw new Error("Not yet implemented")},t.prototype.oneHot=function(e,n,r,i){throw new Error("Not yet implemented")},t.prototype.cumsum=function(e,n,r,i){throw new Error("Not yet implemented")},t.prototype.nonMaxSuppression=function(e,n,r,i,o){throw new Error("Not yet implemented")},t.prototype.fft=function(e){throw new Error("Not yet implemented")},t.prototype.ifft=function(e){throw new Error("Not yet implemented")},t.prototype.complex=function(e,n){throw new Error("Not yet implemented")},t.prototype.real=function(e){throw new Error("Not yet implemented")},t.prototype.imag=function(e){throw new Error("Not yet implemented")},t.prototype.cropAndResize=function(e,n,r,i,o,s){throw new Error("Not yet implemented")},t.prototype.depthToSpace=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.split=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.sparseToDense=function(e,n,r,i){throw new Error("Not yet implemented")},t.prototype.diag=function(e){throw new Error("Not yet implemented")},t.prototype.fill=function(e,n,r){throw new Error("Not yet implemented.")},t.prototype.onesLike=function(e){throw new Error("Not yet implemented")},t.prototype.zerosLike=function(e){throw new Error("Not yet implemented")},t.prototype.linspace=function(e,n,r){throw new Error("Not yet implemented")},t.prototype.dispose=function(){throw new Error("Not yet implemented")},t}();function Ua(t,e){for(var n=t.length,r=[],i=0;i<n;i++){var o=n-1-i,s=t[o]||1;(e[e.length-1-i]||1)>1&&s===1&&r.unshift(o)}return r}function Ot(t,e){for(var n=[],r=0;r<e.length;r++){var i=t[t.length-r-1],o=e.length-r-1,s=e[o];(i==null||i===1&&s>1)&&n.unshift(o)}return n}function De(t,e){for(var n=[],r=Math.max(t.length,e.length),i=0;i<r;i++){var o=t[t.length-i-1];o==null&&(o=1);var s=e[e.length-i-1];if(s==null&&(s=1),o===1)n.unshift(s);else if(s===1)n.unshift(o);else{if(o!==s)throw Error("Operands could not be broadcast together with shapes "+t+" and "+e+".");n.unshift(o)}}return n}function Ec(t,e,n,r,i,o,s){s===void 0&&(s="channelsLast");var a,u=fv(e),l=u[0],c=u[1];if(s==="channelsLast")a=[l,c,t[3],t[3]];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);a=[l,c,t[1],t[1]]}return ca(t,a,n,r,i,o,!1,s)}function bf(t,e,n,r,i,o,s){s===void 0&&(s="NDHWC");var a,u,l=$_(e),c=l[0],d=l[1],h=l[2];if(s==="NDHWC")u="channelsLast",a=[c,d,h,t[4],t[4]];else{if(s!=="NCDHW")throw new Error("Unknown dataFormat "+s);u="channelsFirst",a=[c,d,h,t[1],t[1]]}return xf(t,a,n,r,i,!1,u,o)}function ca(t,e,n,r,i,o,s,a){s===void 0&&(s=!1),a===void 0&&(a="channelsLast");var u=[-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],h=u[3];if(a==="channelsLast")l=t[0],c=t[1],d=t[2],h=t[3];else{if(a!=="channelsFirst")throw new Error("Unknown dataFormat "+a);l=t[0],h=t[1],c=t[2],d=t[3]}var f,m=e[0],v=e[1],y=e[3],g=fv(n),w=g[0],b=g[1],x=fv(r),_=x[0],E=x[1],I=ql(m,_),C=ql(v,E),S=function(F,G,K,j,L,V,M,Y){var X,se,re;if(typeof F=="number"){var xe=F===0?"VALID":"NUMBER";X={top:F,bottom:F,left:F,right:F,type:xe};var ce=function(dt,Ye,Xe,An,zr){An==null&&(An=rC(dt,Ye,Xe));var ir=dt[0],ai=dt[1],Bn=dh((ir-Ye+2*An)/Xe+1,zr);A(Et(Bn),function(){return"The output # of rows ("+Bn+") must be an integer. Change the stride and/or zero pad parameters"});var or=dh((ai-Ye+2*An)/Xe+1,zr);return A(Et(or),function(){return"The output # of columns ("+or+") must be an integer. Change the stride and/or zero pad parameters"}),[Bn,or]}([G,K],V,j,F,Y);se=ce[0],re=ce[1]}else if(F==="same"){se=Math.ceil(G/j),re=Math.ceil(K/L);var _e=Math.max(0,(se-1)*j+V-G),Ce=Math.max(0,(re-1)*L+M-K),tt=Math.floor(_e/2),Ue=_e-tt,Ke=Math.floor(Ce/2),ze=Ce-Ke;X={top:tt,bottom:Ue,left:Ke,right:ze,type:"SAME"}}else{if(F!=="valid")throw Error("Unknown padding parameter: "+F);X={top:0,bottom:0,left:0,right:0,type:"VALID"},se=Math.ceil((G-V+1)/j),re=Math.ceil((K-M+1)/L)}return{padInfo:X,outHeight:se,outWidth:re}}(i,c,d,w,b,I,C,o),N=S.padInfo,R=S.outHeight,D=S.outWidth,W=s?y*h:y;return a==="channelsFirst"?f=[l,W,R,D]:a==="channelsLast"&&(f=[l,R,D,W]),{batchSize:l,dataFormat:a,inHeight:c,inWidth:d,inChannels:h,outHeight:R,outWidth:D,outChannels:W,padInfo:N,strideHeight:w,strideWidth:b,filterHeight:m,filterWidth:v,effectiveFilterHeight:I,effectiveFilterWidth:C,dilationHeight:_,dilationWidth:E,inShape:t,outShape:f,filterShape:e}}function xf(t,e,n,r,i,o,s,a){o===void 0&&(o=!1),s===void 0&&(s="channelsLast");var u=[-1,-1,-1,-1,-1],l=u[0],c=u[1],d=u[2],h=u[3],f=u[4];if(s==="channelsLast")l=t[0],c=t[1],d=t[2],h=t[3],f=t[4];else{if(s!=="channelsFirst")throw new Error("Unknown dataFormat "+s);l=t[0],f=t[1],c=t[2],d=t[3],h=t[4]}var m,v=e[0],y=e[1],g=e[2],w=e[4],b=$_(n),x=b[0],_=b[1],E=b[2],I=$_(r),C=I[0],S=I[1],N=I[2],R=ql(v,C),D=ql(y,S),W=ql(g,N),F=function(M,Y,X,se,re,xe,ce,_e,Ce,tt,Ue){var Ke,ze,dt,Ye;if(typeof M=="number"){var Xe=M===0?"VALID":"NUMBER";Ke={top:M,bottom:M,left:M,right:M,front:M,back:M,type:Xe};var An=function(Zo,li,F0,Hu,pa,ao){pa==null&&(pa=rC(Zo,li,Hu));var es=Zo[0],ma=Zo[1],Ir=Zo[2],Wr=dh((es-li+2*pa)/Hu+1,ao);A(Et(Wr),function(){return"The output # of depths ("+Wr+") must be an integer. Change the stride and/or zero pad parameters"});var Ai=dh((ma-li+2*pa)/Hu+1,ao);A(Et(Ai),function(){return"The output # of rows ("+Ai+") must be an integer. Change the stride and/or zero pad parameters"});var rd=dh((Ir-li+2*pa)/Hu+1,ao);return A(Et(rd),function(){return"The output # of columns ("+rd+") must be an integer. Change the stride and/or zero pad parameters"}),[Wr,Ai,rd,F0]}([Y,X,se,1],_e,1,re,M,Ue);ze=An[0],dt=An[1],Ye=An[2]}else if(M==="same"){ze=Math.ceil(Y/re),dt=Math.ceil(X/xe),Ye=Math.ceil(se/ce);var zr=(ze-1)*re+_e-Y,ir=(dt-1)*xe+Ce-X,ai=(Ye-1)*ce+tt-se,Bn=Math.floor(zr/2),or=zr-Bn,ui=Math.floor(ir/2),td=ir-ui,so=Math.floor(ai/2),nd=ai-so;Ke={top:ui,bottom:td,left:so,right:nd,front:Bn,back:or,type:"SAME"}}else{if(M!=="valid")throw Error("Unknown padding parameter: "+M);Ke={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},ze=Math.ceil((Y-_e+1)/re),dt=Math.ceil((X-Ce+1)/xe),Ye=Math.ceil((se-tt+1)/ce)}return{padInfo:Ke,outDepth:ze,outHeight:dt,outWidth:Ye}}(i,c,d,h,x,_,E,R,D,W,a),G=F.padInfo,K=F.outDepth,j=F.outHeight,L=F.outWidth,V=o?w*f:w;return s==="channelsFirst"?m=[l,V,K,j,L]:s==="channelsLast"&&(m=[l,K,j,L,V]),{batchSize:l,dataFormat:s,inDepth:c,inHeight:d,inWidth:h,inChannels:f,outDepth:K,outHeight:j,outWidth:L,outChannels:V,padInfo:G,strideDepth:x,strideHeight:_,strideWidth:E,filterDepth:v,filterHeight:y,filterWidth:g,effectiveFilterDepth:R,effectiveFilterHeight:D,effectiveFilterWidth:W,dilationDepth:C,dilationHeight:S,dilationWidth:N,inShape:t,outShape:m,filterShape:e}}function rC(t,e,n,r){r===void 0&&(r=1);var i=ql(e,r);return Math.floor((t[0]*(n-1)-n+i)/2)}function fv(t){return typeof t=="number"?[t,t,t]:t.length===2?[t[0],t[1],1]:t}function $_(t){return typeof t=="number"?[t,t,t]:t}function ql(t,e){return e<=1?t:t+(t-1)*(e-1)}function dh(t,e){if(!e)return t;switch(e){case"round":return Math.round(t);case"ceil":return Math.ceil(t);case"floor":return Math.floor(t);default:throw new Error("Unknown roundingMode "+e)}}function Tu(t){var e=fv(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function tr(t,e){return Tu(t)||Tu(e)}function y0(t){if(t==="NHWC")return"channelsLast";if(t==="NCHW")return"channelsFirst";throw new Error("Unknown dataFormat "+t)}function iC(t,e,n){if(e==="complex64"){if(t.dtype==="complex64")return t.clone();var r=ft(t.shape),i=t.toFloat(),o=n.complex(i,r);return r.dispose(),i.dispose(),o}if(!K3(t.dtype,e))return ie.make(t.shape,{dataId:t.dataId},e);if(t.dtype==="complex64"){var s=n.real(t);return o=s.cast(e),s.dispose(),o}if(e==="int32")return n.int(t);if(e==="bool"){var a=ge(0,t.dtype);return o=n.notEqual(t,a),a.dispose(),o}throw new Error("Error in Cast: failed to cast "+t.dtype+" to "+e)}function pv(t,e){return ie.make(e,{dataId:t.dataId},t.dtype)}function oC(t,e,n){var r=(e-t)/(n-1),i=Qc(n,"float32");i[0]=t;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return Ys(i,"float32")}var Dse=Object.freeze({castTensor:iC,reshapeTensor:pv,linspaceImpl:oC,upcastType:zt,axesAreInnerMostDims:WT,combineLocations:R$,computeOutAndReduceShapes:wn,expandShapeToKeepDim:Mr,assertAxesAreInnerMostDims:dr,getAxesPermutation:Ci,getUndoAxesPermutation:l0,getInnerMostAxes:ki,getBroadcastDims:Ua,getReductionAxes:Ot,assertAndGetBroadcastShape:De,assertParamsConsistent:N$,computeOutShape:Iu,computePool2DInfo:Ec,computePool3DInfo:bf,computeConv2DInfo:ca,computeConv3DInfo:xf,computeDefaultPad:rC,tupleValuesAreOne:Tu,eitherStridesOrDilationsAreOne:tr,convertConv2DDataFormat:y0});function B_(t,e){if(t.length!==e.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+t.length+", imag: "+e.length+".");for(var n=new Float32Array(2*t.length),r=0;r<n.length;r+=2)n[r]=t[r/2],n[r+1]=e[r/2];return n}function f2(t,e){return{real:t[2*e],imag:t[2*e+1]}}function Ose(t,e,n,r){t[2*r]=e,t[2*r+1]=n}function Lse(t,e,n){var r=(n?2:-2)*Math.PI*(t/e);return{real:Math.cos(r),imag:Math.sin(r)}}function sC(t,e,n,r,i){for(var o=Array.from(e).map(function(f,m){return{score:f,boxIndex:m}}).filter(function(f){return f.score>i}).sort(function(f,m){return m.score-f.score}),s=[],a=0;a<o.length;a++){var u=o[a],l=u.score,c=u.boxIndex;if(l<i)break;for(var d=!1,h=s.length-1;h>=0;--h)if(Mse(t,c,s[h])>=r){d=!0;break}if(!d&&(s.push(c),s.length>=n))break}return Ys(s,"int32")}function Mse(t,e,n){var r=t.subarray(4*e,4*e+4),i=t.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),s=Math.min(r[1],r[3]),a=Math.max(r[0],r[2]),u=Math.max(r[1],r[3]),l=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),f=(a-o)*(u-s),m=(d-l)*(h-c);if(f<=0||m<=0)return 0;var v=Math.max(o,l),y=Math.max(s,c),g=Math.min(a,d),w=Math.min(u,h),b=Math.max(g-v,0)*Math.max(w-y,0);return b/(f+m-b)}function tB(t,e,n){var r=new Array(t.rank).fill(0),i=t.shape.slice();return e.map(function(o){i[n]=o;var s=t.slice(r,i);return r[n]+=o,s})}function nB(t,e){for(var n=new Array(t.rank),r=0;r<n.length;r++)n[r]=t.shape[r]*e[r];var i=ke(n,t.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),s=new Array(t.rank),a=0;a<s.length;a++)s[a]=o[a]%t.shape[a];var u=t.locToIndex(s);i.values[r]=t.values[u]}return i.toTensor()}function rB(t,e,n,r,i){for(var o=e[e.length-1],s=[t.length/o,o],a=s[0],u=s[1],l=ff(n,a*r),c=ff("int32",a*r),d=0;d<a;d++){for(var h=d*u,f=t.subarray(h,h+u),m=[],v=0;v<f.length;v++)m.push({value:f[v],index:v});m.sort(function(x,_){return _.value-x.value});var y=d*r,g=l.subarray(y,y+r),w=c.subarray(y,y+r);for(v=0;v<r;v++)g[v]=m[v].value,w[v]=m[v].index}var b=e.slice();return b[b.length-1]=r,[Xt(l,b,n),Xt(c,b,"int32")]}function aC(t,e){for(var n=[],r=0;r<e.length;r++)e[r]&&n.push(r);var i=ke(t,"int32"),o=ke([n.length,t.length],"int32");for(r=0;r<n.length;r++){var s=i.indexToLoc(n[r]),a=r*t.length;o.values.set(s,a)}return o.toTensor()}var Vse=function(){return function(t,e){this.outputShape=[],this.outputShape=t,this.variableNames=e.map(function(i,o){return"T"+o});var n=[];this.variableNames.forEach(function(i){n.push("float v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "}}(),Fse=function(){return function(t,e){this.outputShape=[],this.usesPackedTextures=!0,this.outputShape=t,this.variableNames=e.map(function(i,o){return"T"+o});var n=[];this.variableNames.forEach(function(i){n.push("vec4 v"+i+" = get"+i+"AtOutCoords();")});var r=this.variableNames.map(function(i){return"v"+i}).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "}}(),$se=function(){return function(t,e,n){this.variableNames=["A"];var r=t.windowSize,i=t.batchSize,o=t.inSize,s=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,s];var a=e==="max"?">":"<",u=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+u+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+a+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "}}();function iB(t,e){return["x","y","z","w","u","v"].slice(0,e).map(function(n){return t+"."+n})}function pr(t,e){return e===1?[t]:iB(t,e)}function On(){var t,e,n,r,i,o,s,a,u,l;return q().getNumber("WEBGL_VERSION")===2?(t="#version 300 es",e="in",n="out",r="in",i="texture",o="outputColor",s="out vec4 outputColor;",a="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",u="",l="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(t="",e="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",s="",a="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",u="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",l="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:t,attribute:e,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:s,defineSpecialNaN:a,defineSpecialInf:u,defineRound:l}}function za(t,e,n){n===void 0&&(n="index");var r=aa(e);return r.map(function(i,o){return"int "+t[o]+" = "+n+" / "+i+"; "+(o===r.length-1?"int "+t[o+1]+" = "+n+" - "+t[o]+" * "+i:"index -= "+t[o]+" * "+i)+";"}).join("")}function uC(t){var e=aa(t).map(function(n){return n.toString()});return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+e[0]+" + coords.y * "+e[1]+" + coords.z;\n  }\n"}var oB="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function Bse(t,e,n,r){var i=[];t.forEach(function(f){var m=ve(f.shapeInfo.logicalShape);f.shapeInfo.isUniform?i.push("uniform float "+f.name+(m>1?"["+m+"]":"")+";"):(i.push("uniform sampler2D "+f.name+";"),i.push("uniform int offset"+f.name+";"))});var o,s,a=i.join("\n"),u=t.map(function(f){return function(m,v,y){y===void 0&&(y=!1);var g="";g+=y?sB(m):dl(m);var w=m.shapeInfo.logicalShape,b=v.logicalShape;return w.length<=b.length&&(g+=y?function(x,_){var E,I=x.name,C=I.charAt(0).toUpperCase()+I.slice(1),S="get"+C+"AtOutCoords",N=x.shapeInfo.logicalShape.length,R=_.logicalShape.length,D=Ua(x.shapeInfo.logicalShape,_.logicalShape),W=ot(R),F=R-N,G=["x","y","z","w","u","v"];E=N===0?"":R<2&&D.length>=1?"coords = 0;":D.map(function(X){return"coords."+G[X+F]+" = 0;"}).join("\n");var K="";K=R<2&&N>0?"coords":x.shapeInfo.logicalShape.map(function(X,se){return"coords."+G[se+F]}).join(", ");var j="return outputValue;",L=ve(x.shapeInfo.logicalShape)===1,V=ve(_.logicalShape)===1;if(N!==1||L||V){if(L&&!V)j=R===1?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(D.length){var M=N-2,Y=N-1;D.indexOf(M)>-1&&D.indexOf(Y)>-1?j="return vec4(outputValue.x);":D.indexOf(M)>-1?j="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":D.indexOf(Y)>-1&&(j="return vec4(outputValue.xx, outputValue.zz);")}}else j="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+S+"() {\n      "+W+" coords = getOutputCoords();\n      "+E+"\n      vec4 outputValue = get"+C+"("+K+");\n      "+j+"\n    }\n  "}(m,v):function(x,_){var E=x.name,I=E.charAt(0).toUpperCase()+E.slice(1),C="get"+I+"AtOutCoords",S=_.texShape,N=x.shapeInfo.texShape,R=x.shapeInfo.logicalShape.length,D=_.logicalShape.length;if(!x.shapeInfo.isUniform&&R===D&&x.shapeInfo.flatOffset==null&&an(N,S))return"\n      float "+C+"() {\n        return sampleTexture("+E+", resultUV);\n      }\n    ";var W,F=ot(D),G=Ua(x.shapeInfo.logicalShape,_.logicalShape),K=D-R,j=["x","y","z","w","u","v"];W=R===0?"":D<2&&G.length>=1?"coords = 0;":G.map(function(V){return"coords."+j[V+K]+" = 0;"}).join("\n");var L="";return L=D<2&&R>0?"coords":x.shapeInfo.logicalShape.map(function(V,M){return"coords."+j[M+K]}).join(", "),"\n    float "+C+"() {\n      "+F+" coords = getOutputCoords();\n      "+W+"\n      return get"+I+"("+L+");\n    }\n  "}(m,v)),g}(f,e,r)}).join("\n"),l=e.texShape,c=On(),d=function(f){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+f.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),h=function(f){return f.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+f.varyingFs+" vec2 resultUV;\n    "+f.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+f.defineSpecialNaN+"\n    "+f.defineSpecialInf+"\n    "+f.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+jse+"\n    "+Use+"\n    "+zse+"\n  "}(c);return e.isPacked?(o=function(f,m){switch(f.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(x,_){var E=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)];return E[0]===1?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+E[1]+".0);\n      }\n    ":E[1]===1?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+E[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+E[0]+", "+E[1]+"));\n      return 2 * (resTexRC.x * "+E[1]+" + resTexRC.y);\n    }\n  "}(0,m);case 2:return function(x,_){var E=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)];if(an(x,_))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+E[0]+", "+E[1]+"));\n      }\n    ";var I=Math.ceil(x[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+E[0]+", "+E[1]+"));\n\n      int index = resTexRC.x * "+E[1]+" + resTexRC.y;\n      int r = 2 * (index / "+I+");\n      int c = imod(index, "+I+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(f,m);case 3:return v=f,y=m,g=[Math.ceil(y[0]/2),Math.ceil(y[1]/2)],w=Math.ceil(v[2]/2),b=w*Math.ceil(v[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+g[0]+", "+g[1]+"));\n      int index = resTexRC.x * "+g[1]+" + resTexRC.y;\n\n      int b = index / "+b+";\n      index -= b * "+b+";\n\n      int r = 2 * (index / "+w+");\n      int c = imod(index, "+w+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(x,_){for(var E=[Math.ceil(_[0]/2),Math.ceil(_[1]/2)],I=Math.ceil(x[x.length-1]/2),C=I*Math.ceil(x[x.length-2]/2),S=C,N="",R="b, r, c",D=2;D<x.length-1;D++)S*=x[x.length-D-1],N="\n      int b"+D+" = index / "+S+";\n      index -= b"+D+" * "+S+";\n    "+N,R="b"+D+", "+R;return"\n    ivec"+x.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+E[0]+", "+E[1]+"));\n      int index = resTexRC.x * "+E[1]+" + resTexRC.y;\n\n      "+N+"\n\n      int b = index / "+C+";\n      index -= b * "+C+";\n\n      int r = 2 * (index / "+I+");\n      int c = imod(index, "+I+") * 2;\n\n      return ivec"+x.length+"("+R+");\n    }\n  "}(f,m)}var v,y,g,w,b}(e.logicalShape,l),s=function(f){return"\n    void setOutput(vec4 val) {\n      "+f.output+" = val;\n    }\n  "}(c)):(o=function(f,m){switch(f.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(g,w){return w[0]===1?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+w[1]+".0);\n      }\n    ":w[1]===1?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+w[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+w[0]+", "+w[1]+"));\n      return resTexRC.x * "+w[1]+" + resTexRC.y;\n    }\n  "}(0,m);case 2:return function(g,w){return an(g,w)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+w[0]+", "+w[1]+"));\n      }\n    ":g[1]===1?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+w[0]+", "+w[1]+"));\n        int index = resTexRC.x * "+w[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":g[0]===1?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+w[0]+", "+w[1]+"));\n        int index = resTexRC.x * "+w[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+w[0]+", "+w[1]+"));\n      int index = resTexRC.x * "+w[1]+" + resTexRC.y;\n      int r = index / "+g[1]+";\n      int c = index - r * "+g[1]+";\n      return ivec2(r, c);\n    }\n  "}(f,m);case 3:return v=m,y=za(["r","c","d"],f),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+v[0]+", "+v[1]+"));\n      int index = resTexRC.x * "+v[1]+" + resTexRC.y;\n      "+y+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(g,w){var b=za(["r","c","d","d2"],g);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+w[0]+", "+w[1]+"));\n      int index = resTexRC.x * "+w[1]+" + resTexRC.y;\n      "+b+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(f,m);case 5:return function(g,w){var b=za(["r","c","d","d2","d3"],g);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+w[0]+",\n                             "+w[1]+"));\n\n      int index = resTexRC.x * "+w[1]+" + resTexRC.y;\n\n      "+b+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(f,m);case 6:return function(g,w){var b=za(["r","c","d","d2","d3","d4"],g);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+w[0]+", "+w[1]+"));\n      int index = resTexRC.x * "+w[1]+" + resTexRC.y;\n\n      "+b+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(f,m);default:throw new Error(f.length+"-D output sampling is not yet supported")}var v,y}(e.logicalShape,l),s=function(f){return"\n    void setOutput(float val) {\n      "+f.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(h+=Wse),[h,d,s,a,o,u,n].join("\n")}function dl(t){var e=t.shapeInfo.logicalShape;switch(e.length){case 0:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"float "+i+"() {return "+r+";}";var o=n.shapeInfo.texShape,s=o[0],a=o[1];if(s===1&&a===1)return"\n      float "+i+"() {\n        return sampleTexture("+r+", halfCR);\n      }\n    ";var u=n.shapeInfo.texShape,l=u[0],c=u[1],d=wa(r);return"\n    float "+i+"() {\n      vec2 uv = uvFromFlat("+l+", "+c+", "+d+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);case 1:return function(n){var r=n.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1);if(n.shapeInfo.isUniform)return"\n      float "+i+"(int index) {\n        "+nl(n)+"\n      }\n    ";var o=n.shapeInfo.texShape,s=o[0],a=o[1];if(a===1&&s===1)return"\n      float "+i+"(int index) {\n        return sampleTexture("+r+", halfCR);\n      }\n    ";var u=wa(r);return a===1?"\n      float "+i+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+u+") + 0.5) / "+s+".0);\n        return sampleTexture("+r+", uv);\n      }\n    ":s===1?"\n      float "+i+"(int index) {\n        vec2 uv = vec2((float(index + "+u+") + 0.5) / "+a+".0, 0.5);\n        return sampleTexture("+r+", uv);\n      }\n    ":"\n    float "+i+"(int index) {\n      vec2 uv = uvFromFlat("+s+", "+a+", index + "+u+");\n      return sampleTexture("+r+", uv);\n    }\n  "}(t);case 2:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=n.shapeInfo.texShape;if(s!=null&&an(r,s)){var a=s[0],u=s[1];return"\n    float "+o+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+u+".0, "+a+".0);\n      return sampleTexture("+i+", uv);\n    }\n  "}var l=gs(r),c=l.newShape,d=l.keptDims,h=c;if(h.length<r.length){var f=hl(n,h);return"\n      "+dl(f)+"\n      float "+o+"(int row, int col) {\n        return "+o+"("+fl(["row","col"],d)+");\n      }\n    "}if(n.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+r[1]+", 1)));\n        "+nl(n)+"\n      }\n    ";var m=s[0],v=s[1],y=wa(i);return v===1?"\n    float "+o+"(int row, int col) {\n      float index = dot(vec3(row, col, "+y+"), vec3("+r[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+m+".0);\n      return sampleTexture("+i+", uv);\n    }\n  ":m===1?"\n    float "+o+"(int row, int col) {\n      float index = dot(vec3(row, col, "+y+"), vec3("+r[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+v+".0, 0.5);\n      return sampleTexture("+i+", uv);\n    }\n  ":"\n  float "+o+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+r[1]+" + col + "+y+";\n    vec2 uv = uvFromFlat("+m+", "+v+", index);\n    return sampleTexture("+i+", uv);\n  }\n"}(t);case 3:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[1]*r[2],a=r[2],u=gs(r),l=u.newShape,c=u.keptDims,d=l;if(d.length<r.length){var h=hl(n,d);return"\n        "+dl(h)+"\n        float "+o+"(int row, int col, int depth) {\n          return "+o+"("+fl(["row","col","depth"],c)+");\n        }\n      "}if(n.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+s+", "+a+", 1)));\n        "+nl(n)+"\n      }\n    ";var f=n.shapeInfo.texShape,m=f[0],v=f[1],y=n.shapeInfo.flatOffset;if(v===s&&y==null)return"\n        float "+o+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+a+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+v+".0, "+m+".0);\n          return sampleTexture("+i+", uv);\n        }\n      ";if(v===a&&y==null)return"\n    float "+o+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+r[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+v+".0, "+m+".0);\n      return sampleTexture("+i+", uv);\n    }\n  ";var g=wa(i);return"\n      float "+o+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+s+" + col * "+a+" + depth + "+g+";\n        vec2 uv = uvFromFlat("+m+", "+v+", index);\n        return sampleTexture("+i+", uv);\n      }\n  "}(t);case 4:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[3],a=r[2]*s,u=r[1]*a,l=gs(r),c=l.newShape,d=l.keptDims;if(c.length<r.length){var h=hl(n,c);return"\n      "+dl(h)+"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        return "+o+"("+fl(["row","col","depth","depth2"],d)+");\n      }\n    "}if(n.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+u+", "+a+", "+s+", 1)));\n        "+nl(n)+"\n      }\n    ";var f=n.shapeInfo.flatOffset,m=n.shapeInfo.texShape,v=m[0],y=m[1];if(y===u&&f==null)return"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+a+", "+s+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+y+".0, "+v+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ";if(y===s&&f==null)return"\n      float "+o+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+r[1]*r[2]+", "+r[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+y+".0, "+v+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ";var g=wa(i);return"\n    float "+o+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+u+" + col * "+a+" +\n          depth * "+s+" + depth2;\n      vec2 uv = uvFromFlat("+v+", "+y+", index + "+g+");\n      return sampleTexture("+i+", uv);\n    }\n  "}(t);case 5:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=r[4],a=r[3]*s,u=r[2]*a,l=r[1]*u,c=gs(r),d=c.newShape,h=c.keptDims;if(d.length<r.length){var f=hl(n,d);return"\n      "+dl(f)+"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+o+"("+fl(["row","col","depth","depth2","depth3"],h)+");\n      }\n    "}if(n.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+l+", "+u+", "+a+", "+s+")) +\n          depth3;\n        "+nl(n)+"\n      }\n    ";var m=n.shapeInfo.flatOffset,v=n.shapeInfo.texShape,y=v[0],g=v[1];if(g===l&&m==null)return"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+u+", "+a+", "+s+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+g+".0, "+y+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ";if(g===s&&m==null)return"\n      float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+r[1]*r[2]*r[3]+",\n               "+r[2]*r[3]+", "+r[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+g+".0, "+y+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ";var w=wa(i);return"\n    float "+o+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+l+" + col * "+u+" + depth * "+a+" +\n          depth2 * "+s+" + depth3 + "+w+";\n      vec2 uv = uvFromFlat("+y+", "+g+", index);\n      return sampleTexture("+i+", uv);\n    }\n  "}(t);case 6:return function(n){var r=n.shapeInfo.logicalShape,i=n.name,o="get"+i.charAt(0).toUpperCase()+i.slice(1),s=gs(r),a=s.newShape,u=s.keptDims;if(a.length<r.length){var l=hl(n,a);return"\n      "+dl(l)+"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+o+"("+fl(["row","col","depth","depth2","depth3","depth4"],u)+");\n      }\n    "}var c=r[5],d=r[4]*c,h=r[3]*d,f=r[2]*h,m=r[1]*f;if(n.shapeInfo.isUniform)return"\n      float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+m+", "+f+", "+h+", "+d+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+c+", 1)));\n        "+nl(n)+"\n      }\n    ";var v=n.shapeInfo.flatOffset,y=n.shapeInfo.texShape,g=y[0],w=y[1];if(w===m&&v==null)return"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+f+", "+h+", "+d+", "+c+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+w+".0, "+g+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ";if(w===c&&v==null)return"\n      float "+o+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+r[1]*r[2]*r[3]*r[4]+",\n               "+r[2]*r[3]*r[4]+",\n               "+r[3]*r[4]+",\n               "+r[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+w+".0, "+g+".0);\n        return sampleTexture("+i+", uv);\n      }\n    ";var b=wa(i);return"\n    float "+o+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+m+" + col * "+f+" + depth * "+h+" +\n          depth2 * "+d+" + depth3 * "+c+" + depth4 + "+b+";\n      vec2 uv = uvFromFlat("+g+", "+w+", index);\n      return sampleTexture("+i+", uv);\n    }\n  "}(t);default:throw new Error(e.length+"-D input sampling is not yet supported")}}function sB(t){var e,n,r;switch(t.shapeInfo.logicalShape.length){case 0:return e=t.name,n="get"+e.charAt(0).toUpperCase()+e.slice(1),r=On(),"\n    vec4 "+n+"() {\n      return "+r.texture2D+"("+e+", halfCR);\n    }\n  ";case 1:return function(i){var o=i.name,s="get"+o.charAt(0).toUpperCase()+o.slice(1),a=i.shapeInfo.texShape,u=[Math.ceil(a[0]/2),Math.ceil(a[1]/2)],l=On();return"\n    vec4 "+s+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+u[0]+", "+u[1]+", index);\n      return "+l.texture2D+"("+o+", uv);\n    }\n  "}(t);case 2:return function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),u=i.shapeInfo.texShape,l=u[0],c=u[1],d=On();if(u!=null&&an(o,u))return"\n      vec4 "+a+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+c+".0, "+l+".0);\n\n        return "+d.texture2D+"("+s+", uv);\n      }\n    ";var h=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)],f=Math.ceil(o[1]/2);return"\n    vec4 "+a+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+f+", "+h[0]+", "+h[1]+", row, col);\n      return "+d.texture2D+"("+s+", uv);\n    }\n  "}(t);case 3:return function(i){var o=i.shapeInfo.logicalShape,s=i.name,a="get"+s.charAt(0).toUpperCase()+s.slice(1),u=i.shapeInfo.texShape,l=[Math.ceil(u[0]/2),Math.ceil(u[1]/2)];if(o[0]===1){var c=o.slice(1),d=hl(i,c);return"\n        "+sB(d)+"\n        vec4 "+a+"(int b, int row, int col) {\n          return "+a+"("+fl(["b","row","col"],[1,2])+");\n        }\n      "}var h=l[0],f=l[1],m=Math.ceil(o[2]/2),v=m*Math.ceil(o[1]/2),y=On();return"\n    vec4 "+a+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+h+", "+f+", "+v+", "+m+", b, row, col);\n      return "+y.texture2D+"("+s+", uv);\n    }\n  "}(t);default:return function(i){for(var o=i.shapeInfo.logicalShape,s=o.length,a=i.name,u="get"+a.charAt(0).toUpperCase()+a.slice(1),l=i.shapeInfo.texShape,c=[Math.ceil(l[0]/2),Math.ceil(l[1]/2)],d=c[0],h=c[1],f=Math.ceil(o[s-1]/2),m=f*Math.ceil(o[s-2]/2),v="int b, int row, int col",y="b * "+m+" + (row / 2) * "+f+" + (col / 2)",g=2;g<s-1;g++)v="int b"+g+", "+v,m*=o[s-g-1],y="b"+g+" * "+m+" + "+y;var w=On();return"\n    vec4 "+u+"("+v+") {\n      int index = "+y+";\n      int texR = index / "+h+";\n      int texC = index - texR * "+h+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+", "+d+");\n      return "+w.texture2D+"("+a+", uv);\n    }\n  "}(t)}}var jse="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Use="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",zse="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",Wse="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function wa(t){return"offset"+t}function nl(t){var e=t.name,n=ve(t.shapeInfo.logicalShape);return n<2?"return "+e+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+e+"[i];\n      }\n    }\n  "}function ot(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error("GPU for rank "+t+" is not yet supported")}function hl(t,e){var n=JSON.parse(JSON.stringify(t));return n.shapeInfo.logicalShape=e,n}function fl(t,e){return e.map(function(n){return t[n]}).join(", ")}var qse=function(){return function(t,e,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,A(t.length>2,function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."});var i=t[t.length-1],o=Math.ceil(i/e);this.outputShape=t.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var s,a,u=this.outputShape,l=u.length,c=ot(l),d=pr("coords",l);if(o===1){var h=ot(a=l+1);s="\n        "+h+" sourceLocR = "+h+"("+d.join()+", 0);\n        ++"+d[l-1]+";\n        "+h+" sourceLocG = "+h+"("+d.join()+", 0);\n        ++"+d[l-2]+";\n        "+h+" sourceLocA = "+h+"("+d.join()+", 0);\n        --"+d[l-1]+";\n        "+h+" sourceLocB = "+h+"("+d.join()+", 0);\n        --"+d[l-2]+";"}else a=l,s="\n        "+c+" sourceLocR = coords;\n        ++"+d[l-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+d[l-2]+";\n        "+c+" sourceLocA = coords;\n        --"+d[l-1]+";\n        "+c+" sourceLocB = coords;\n        --"+d[l-2]+";";var f=["x","y","z","w","u","v"].slice(0,a),m="."+f[a-1],v=f.map(function(C){return"int "+C}),y=pr("sourceLocR",a-1).concat("inIdx.r"),g=pr("sourceLocG",a-1).concat("inIdx.g"),w=pr("sourceLocB",a-1).concat("inIdx.b"),b=pr("sourceLocA",a-1).concat("inIdx.a"),x=n==="max"?"greaterThan":"lessThan",_=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+w.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",E="vec4(\n            getAChannel("+y.join()+"),\n            hasNextCol ? getAChannel("+g.join()+") : 0.,\n            hasNextRow ? getAChannel("+w.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",I=r?"":"\n      float getBestIndicesAChannel("+v.join()+") {\n        return getChannel(getBestIndicesA("+f.join()+"),\n                                          vec2("+f.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+v.join()+") {\n        return getChannel(getA("+f.join()+"),\n                               vec2("+f.slice(-2).join()+"));\n      }\n      "+I+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+d[l-1]+" < "+(u[l-1]-1)+";\n        bool hasNextRow = "+d[l-2]+" < "+(u[l-2]-1)+";\n        "+s+"\n        ivec4 srcIdx = ivec4(sourceLocR"+m+", sourceLocG"+m+",\n          sourceLocB"+m+", sourceLocA"+m+") * "+e+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+E+";\n\n        for (int i = 0; i < "+e+"; i++) {\n          inIdx = srcIdx;\n          "+_+"\n          vec4 candidate = "+E+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "}}(),Hse=function(){return function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,s=t.dilationWidth,a=t.effectiveFilterHeight,u=t.effectiveFilterWidth,l=a-1-t.padInfo.top,c=u-1-t.padInfo.left,d=1/(e*n);this.userCode="\n      const ivec2 pads = ivec2("+l+", "+c+");\n      const float avgMultiplier = float("+d+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+a+";\n            wR += "+o+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+u+";\n            wC+= "+s+") {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}(),Gse=function(){return function(t){this.variableNames=["dy"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=c-1-t.padInfo.front,m=d-1-t.padInfo.top,v=h-1-t.padInfo.left,y=1/(e*n*r);this.userCode="\n      const ivec3 pads = ivec3("+f+", "+m+", "+v+");\n      const float avgMultiplier = float("+y+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+a+") {\n          float dyD = float(dyDCorner + wD) / "+i+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+d+";\n              wR += "+u+") {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+h+";\n                wC += "+l+") {\n              float dyC = float(dyCCorner + wC) / "+s+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}(),Kse=function(){return function(t,e,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],De(t,e),De(t,n);var s="0.0";r!=null&&(De(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="1.0";i!=null&&(De(t,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+s+";\n        float scale = "+a+";\n        float inv = scale * inversesqrt(variance + float("+o+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "}}(),Yse=function(){return function(t,e,n,r,i,o){this.usesPackedTextures=!0,this.variableNames=["x","mean","variance"],De(t,e),De(t,n);var s="vec4(0.0)";r!=null&&(De(t,r),this.variableNames.push("offset"),s="getOffsetAtOutCoords()");var a="vec4(1.0)";i!=null&&(De(t,i),this.variableNames.push("scale"),a="getScaleAtOutCoords()"),this.outputShape=t,this.userCode="\n      void main() {\n        vec4 offset = "+s+";\n        vec4 scale = "+a+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+o+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "}}(),Xse="return areal * breal - aimag * bimag;",Qse="return areal * bimag + aimag * breal;",p2=function(){return function(t,e,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=De(e,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+t+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "}}(),sb="return a + b;",ab="return a - b;",m2="return a * b;",aB="return (a < 0.) ? b * a : a;",Ct=function(){return function(t,e,n){this.variableNames=["A","B"],this.outputShape=De(e,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+t+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "}}(),uB="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",lo=function(){return function(t,e,n,r){r===void 0&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.outputShape=De(e,n);var i=this.outputShape.length,o="";if(r)if(i===0||ve(this.outputShape)===1)o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o="\n          "+ot(i)+" coords = getOutputCoords();\n        ",i===1)o+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var s=pr("coords",i);o+="\n            bool nextRowOutOfBounds =\n              ("+s[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+s[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+o+"\n\n        setOutput(result);\n      }\n    "}}(),Jse=function(){function t(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),Zse=function(){function t(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(e,n){var r=this;return function(i,o){r.minLoc==null&&(r.minLoc=i.getUniformLocationNoThrow(o,"minVal"),r.maxLoc=i.getUniformLocationNoThrow(o,"maxVal")),i.gl.uniform1f(r.minLoc,e),i.gl.uniform1f(r.maxLoc,n)}},t}(),eae=function(){return function(t){this.variableNames=["real","imag"],this.outputShape=t,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "}}(),tae=function(){return function(t){this.outputShape=[],this.outputShape=Iu(t,1),this.variableNames=t.map(function(a,u){return"T"+u});var e=new Array(t.length-1);e[0]=t[0][1];for(var n=1;n<e.length;n++)e[n]=e[n-1]+t[n][1];var r=["if (yC < "+e[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<e.length;n++){var i=e[n-1];r.push("else if (yC < "+e[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var o=e.length,s=e[e.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+s+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "}}(),nae=function(){return function(t,e){this.usesPackedTextures=!0,this.outputShape=[],this.outputShape=Iu(t,e);var n=this.outputShape,r=n.length,i=ot(r),o=pr("coords",r),s=["x","y","z","w","u","v"].slice(0,r);this.variableNames=t.map(function(y,g){return"T"+g});var a=new Array(t.length-1);a[0]=t[0][e];for(var u=1;u<a.length;u++)a[u]=a[u-1]+t[u][e];var l=s[e],c=s.slice(-2),d=s.join(),h="if ("+l+" < "+a[0]+") {\n        return getChannel(\n            getT0("+d+"), vec2("+c.join()+"));\n        }";for(u=1;u<a.length;u++){var f=a[u-1];h+="\n        if ("+l+" < "+a[u]+"  && "+l+" >= "+a[u-1]+") {\n          return getChannel(\n            getT"+u+"("+sm(s,l,f)+"),\n            vec2("+sm(c,l,f)+"));\n        }"}var m=a.length,v=a[a.length-1];h+="\n        return getChannel(\n          getT"+m+"("+sm(s,l,v)+"),\n          vec2("+sm(c,l,v)+"));",this.userCode="\n      float getValue("+s.map(function(y){return"int "+y})+") {\n        "+h+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+o+"), 0., 0., 0.);\n\n        "+o[r-1]+" = "+o[r-1]+" + 1;\n        if ("+o[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+o+");\n        }\n\n        "+o[r-2]+" = "+o[r-2]+" + 1;\n        if ("+o[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+o+");\n        }\n\n        "+o[r-1]+" = "+o[r-1]+" - 1;\n        if ("+o[r-2]+" < "+n[r-2]+" &&\n            "+o[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+o+");\n        }\n        setOutput(result);\n      }\n    "}}();function sm(t,e,n){var r=t.indexOf(e);return t.map(function(i,o){return o===r?i+" - "+n:i}).join()}var rae=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.dataFormat==="channelsLast";this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              if ("+o+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}(),iae=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=t.dataFormat==="channelsLast",s=e-1-t.padInfo.top,a=n-1-t.padInfo.left,u=o?1:2,l=o?2:3,c=o?3:1;this.userCode="\n      const ivec2 pads = ivec2("+s+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+c+"];\n\n        ivec2 dyCorner = ivec2(coords["+u+"], coords["+l+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n\n              if ("+o+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}(),oae=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.padInfo.front,o=t.padInfo.top,s=t.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yF = 0; yF < "+t.outDepth+"; yF++) {\n            int xF = wF + yF * "+e+" - "+i+";\n\n            if (xF < 0 || xF >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+o+";\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+s+";\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}(),sae=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterDepth,n=t.filterHeight,r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,a=e-1-t.padInfo.front,u=n-1-t.padInfo.top,l=r-1-t.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+a+", "+u+", "+l+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+e+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+i+".0;\n\n          if (dyF < 0.0 || dyF >= "+t.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+e+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+s+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+t.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}(),aae=function(){return function(t){this.variableNames=["x","dy"],this.outputShape=t.filterShape;var e=t.strideHeight,n=t.strideWidth,r=t.padInfo.top,i=t.padInfo.left,o=t.outChannels/t.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+o+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+t.batchSize+"; b++) {\n          for (int yR = 0; yR < "+t.outHeight+"; yR++) {\n            int xR = wR + yR * "+e+" - "+r+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+t.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}(),uae=function(){return function(t){this.variableNames=["dy","W"],this.outputShape=t.inShape;var e=t.filterHeight,n=t.filterWidth,r=t.strideHeight,i=t.strideWidth,o=e-1-t.padInfo.top,s=n-1-t.padInfo.left,a=t.outChannels/t.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+e+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+e+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+a+"; dm++) {\n              int d2 = d1 * "+a+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}(),g2=function(){return function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.padInfo.top,o=t.padInfo.left,s=t.strideHeight,a=t.strideWidth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterHeight,d=t.filterWidth,h=4*Math.floor(t.inChannels/4),f=t.inChannels%4,m=t.dataFormat==="channelsLast",v=m?1:2,y=m?2:3,g=m?3:1,w="",b="";n&&(w=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var x=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+w+"\n\n      const ivec2 strides = ivec2("+s+", "+a+");\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+g+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+v+"], coords["+y+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+u+";\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+l+";\n\n            if (xC < 0 || xC >= "+t.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+m+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(f===1)+") {\n\n              if ("+m+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+h+") *\n                    getW(wR, wC, "+h+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+h+", xR, xC) *\n                    getW(wR, wC, "+h+", d2);\n              }\n\n            } else if ("+(f===2)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2)\n              );\n\n              if ("+m+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(f===3)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2),\n                getW(wR, wC, "+h+" + 2, d2)\n              );\n\n              if ("+m+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1),\n                  getX(batch, xR, xC, "+h+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC),\n                  getX(batch, "+h+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+x+"\n        "+b+"\n        setOutput(result);\n      }\n    "}}(),lae=function(){return function(t){this.variableNames=["x","W"],this.outputShape=t.outShape;var e=t.padInfo.front,n=t.padInfo.top,r=t.padInfo.left,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.filterDepth,d=t.filterHeight,h=t.filterWidth,f=4*Math.floor(t.inChannels/4),m=t.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+i+", "+o+", "+s+");\n      const ivec3 pads = ivec3("+e+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+a+";\n\n          if (xF < 0 || xF >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+"; wR++) {\n            int xR = xRCorner + wR * "+u+";\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+h+"; wC++) {\n              int xC = xCCorner + wC * "+l+";\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+f+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(m===1)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+f+") *\n                  getW(wF, wR, wC, "+f+", d2);\n              } else if ("+(m===2)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(m===3)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+f+"),\n                  getX(batch, xF, xR, xC, "+f+" + 1),\n                  getX(batch, xF, xR, xC, "+f+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+f+", d2),\n                  getW(wF, wR, wC, "+f+" + 1, d2),\n                  getW(wF, wR, wC, "+f+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}(),v2=function(){return function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.outputShape=t.outShape;var i=t.inHeight,o=t.inWidth,s=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,h=t.filterHeight,f=t.filterWidth,m=t.outChannels/t.inChannels,v="",y="";n&&(v=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",y="result = activation(result);");var g=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+v+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+s+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+m+";\n        int q = d2 - d1 * "+m+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+h+"; wR++) {\n          int xR = xRCorner + wR * "+c+";\n\n          if (xR < 0 || xR >= "+i+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+f+"; wC++) {\n            int xC = xCCorner + wC * "+d+";\n\n            if (xC < 0 || xC >= "+o+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+g+"\n        "+y+"\n        setOutput(result);\n      }\n    "}}(),y2=function(){return function(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=null),r===void 0&&(r=!1),this.variableNames=["x","W"],this.usesPackedTextures=!0,this.outputShape=t.outShape;for(var i=t.inHeight,o=t.inWidth,s=t.padInfo.top,a=t.padInfo.left,u=t.strideHeight,l=t.strideWidth,c=t.dilationHeight,d=t.dilationWidth,h=t.filterHeight,f=t.filterWidth,m=f,v="int xR; int xC; int xCOffset;",y=0;y<h;y++)for(var g=0;g<f;g++)v+="\n          vec4 xTexelR"+y+"C"+2*g+" = vec4(0.);\n          vec4 wR"+y+"C"+g+" = vec4(0.);\n          vec4 xR"+y+"C"+g+" = vec4(0.);";for(y=0;y<h;y++)for(var w=0;w<m;w++){if(v+="\n          xR = xRCorner + "+y*c+";\n          xC = xCCorner + "+(g=2*w)*d+";\n        ",l===1){if(g<f&&(v+=a%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+y+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+y+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n                  xR"+y+"C"+g+" = vec4(previous.zw, xTexelR"+y+"C"+g+".xy);\n                } else {\n                  xR"+y+"C"+g+" = vec4(0, 0, xTexelR"+y+"C"+g+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+i+" && xC >= 0 && xC < "+o+") {\n                  xTexelR"+y+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+y+"C"+g+" = vec4(0.);\n                }\n\n                xR"+y+"C"+g+" = xTexelR"+y+"C"+g+";\n              ",g+1<f)){var b=a%2==0?MT(d):d;d%2==0&&a%2==1||d%2!=0&&a%2!=1?(v+="\n                  xCOffset = xC + "+a%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+y+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",d>1&&(v+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+i+" &&\n                      xCOffset >= 0 && xCOffset < "+o+") {\n                      xTexelR"+y+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+y+"C"+g+" = vec4(0.);\n                    }\n                  "),v+="\n                  xR"+y+"C"+(g+1)+" = vec4(\n                    xTexelR"+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+".xy);\n                "):v+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+y+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+y+"C"+(g+1)+" = xTexelR"+y+"C"+(g+2)+";\n                "}}else g<f&&(v+="\n              if(xR >= 0 && xR < "+i+") {\n            ",a%2==1?(v+="\n                xCOffset = xC + 1 - "+l+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+y+"C"+g+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+y+"C"+g+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+o+") {\n                  xTexelR"+y+"C"+(g+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+y+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+y+"C"+g+" = vec4(\n                  xTexelR"+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+".zw);\n              ",g+1<f&&(v+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+l+";\n                  if(xCOffset >= 0 && xCOffset < "+o+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+y+"C"+(g+1)+" = vec4(xTexelR"+y+"C"+(g+2)+".xy, final.xy);\n                ")):(v+="\n                if(xC >= 0 && xC < "+o+") {\n                  xTexelR"+y+"C"+g+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+y+"C"+g+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+l+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+y+"C"+(g+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+y+"C"+(g+2)+" = vec4(0.);\n                }\n\n                xR"+y+"C"+g+" = vec4(\n                  xTexelR"+y+"C"+g+".xy, xTexelR"+y+"C"+(g+2)+".xy);\n              ",g+1<f&&(v+="\n                  xR"+y+"C"+(g+1)+" = vec4(\n                    xTexelR"+y+"C"+g+".zw, xTexelR"+y+"C"+(g+2)+".zw);\n                ")),v+="}");g<f&&(v+="\n            vec4 wTexelR"+y+"C"+g+" = getW("+y+", "+g+", d1, q);\n            wR"+y+"C"+g+" = vec4(wTexelR"+y+"C"+g+".xz, wTexelR"+y+"C"+g+".xz);\n          ",g+1<f&&(v+="\n              vec4 wTexelR"+y+"C"+(g+1)+" = getW("+y+", "+(g+1)+", d1, q);\n              wR"+y+"C"+(g+1)+" =\n                vec4(wTexelR"+y+"C"+(g+1)+".xz, wTexelR"+y+"C"+(g+1)+".xz);"))}for(y=0;y<h;y++)for(g=0;g<f;g++)v+="dotProd += xR"+y+"C"+g+" * wR"+y+"C"+g+";";var x="",_="";n&&(x=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",_="result = activation(result);");var E=e?"result += getBiasAtOutCoords();":"";e&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+u+", "+l+");\n      const ivec2 pads = ivec2("+s+", "+a+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+v+"\n\n        vec4 result = dotProd;\n        "+E+"\n        "+_+"\n        setOutput(result);\n      }\n    "}}(),cae=function(){return function(t,e,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=t[0],s=t[1],a=t[2],u=t[3],l=e[0],c=n[0],d=n[1];this.outputShape=[l,c,d,u];var h=r==="bilinear"?1:0,f=[s-1+".0",a-1+".0"],m=f[0],v=f[1],y=c>1?[""+(s-1)/(c-1),"(y2-y1) * height_ratio","y1*"+m+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+m],g=y[0],w=y[1],b=y[2],x=d>1?[""+(a-1)/(d-1),"(x2-x1) * width_ratio","x1*"+v+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+v],_=x[0],E=x[1],I=x[2];this.userCode="\n      const float height_ratio = float("+g+");\n      const float width_ratio = float("+_+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+o+") {\n          return;\n        }\n\n        float height_scale = "+w+";\n        float width_scale = "+E+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+m+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+I+";\n        if( in_x < 0.0 || in_x > "+v+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+h+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "}}(),dae=function(){return function(t,e,n){this.variableNames=["x"],this.outputShape=t;var r=t.length,i=t[t.length-1],o=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+ot(r)+" coords = getOutputCoords();\n        int end = "+w2(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+o+" end) {\n            continue;\n          }\n          if (idx == end && "+e+") {\n            continue;\n          }\n          "+w2(r,"coords")+" = idx;\n          val += getX("+function(s,a){if(s===1)return""+a;if(s===2)return a+".x, "+a+".y";if(s===3)return a+".x, "+a+".y, "+a+".z";if(s===4)return a+".x, "+a+".y, "+a+".z, "+a+".w";throw Error("Cumulative sum for rank "+s+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "}}();function w2(t,e){if(t===1)return""+e;if(t===2)return e+".y";if(t===3)return e+".z";if(t===4)return e+".w";throw Error("Cumulative sum for rank "+t+" is not yet supported")}var hae=function(){return function(t,e){this.variableNames=["A"];var n=On();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+za(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "}}(),fae=function(){return function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0;var n=On();this.outputShape=t,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+za(["r","c","d"],t)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+e[0]+", "+e[1]+"));\n        int index = 4 * (resTexRC.x * "+e[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "}}(),pae=function(){function t(e,n,r){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=n,this.dataFormat=r,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+n+";\n      int offset_h = imod(h, "+n+");\n      int in_w = w / "+n+";\n      int offset_w = imod(w, "+n+");\n      int offset_d = (offset_h * "+n+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return t.prototype.getHeightCoordString=function(){return this.dataFormat==="NHWC"?"coords[1]":"coords[2]"},t.prototype.getWidthCoordString=function(){return this.dataFormat==="NHWC"?"coords[2]":"coords[3]"},t.prototype.getDepthCoordString=function(){return this.dataFormat==="NHWC"?"coords[3]":"coords[1]"},t.prototype.getOutputDepthSize=function(){return this.dataFormat==="NHWC"?this.outputShape[3]:this.outputShape[1]},t.prototype.getInputSamplingString=function(){return this.dataFormat==="NHWC"?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},t}(),mae=function(){return function(t){this.variableNames=["X"],this.outputShape=[t,t],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "}}(),gae=function(){return function(t){this.variableNames=["A"];var e=On();this.outputShape=t,this.userCode="\n      "+oB+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+e.output+" = encode_float(x);\n      }\n    "}}(),vae=function(){return function(t){this.variableNames=["A"],this.usesPackedTextures=!0;var e=On();this.outputShape=t,this.userCode="\n      "+oB+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+e.output+" = encode_float(x);\n      }\n    "}}(),yae=function(){return function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=On(),i=e[0],o=e[1];this.outputShape=t;var s="result";n&&(s="floor(result * 255. + 0.5)"),this.userCode="\n      "+uC(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+o+";\n        int c = imod(flatIndex, "+o+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+s+", 0., 0., 0.);\n      }\n    "}}(),wae=function(){return function(t,e,n){n===void 0&&(n=!1),this.variableNames=["A"];var r=On(),i=e[0],o=e[1];this.outputShape=t;var s="",a="result";n&&(a="floor(result * 255. + 0.5)");for(var u=0;u<=1;u++)for(var l=0;l<=1;l++){var c=2*u+l;s+="\n          localCoords = coords;\n          if(localCoords[2] + "+l+" < "+t[2]+") {\n            localCoords[2] += "+l+";\n            if(localCoords[1] + "+u+" < "+t[1]+") {\n              localCoords[1] += "+u+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n    \n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+o+";\n              c = imod(flatIndex, "+o+");\n              uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+uC(t)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n        \n        "+s+"\n\n        "+r.output+" = "+a+";\n      }\n    "}}(),bae="return real * expR - imag * expI;",xae="return real * expI + imag * expR;",b2=function(){return function(t,e,n){this.variableNames=["real","imag"];var r=e[1];this.outputShape=e;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+t+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+o+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "}}(),_ae=function(){function t(e,n){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.valueLoc==null&&(n.valueLoc=r.getUniformLocationNoThrow(i,"value")),r.gl.uniform1f(n.valueLoc,e)}},t}(),Eae=function(){return function(t){this.variableNames=["A"];var e=On(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+e.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "}}(),Iae=function(){return function(t){this.variableNames=["A"];var e=On(),n=t[0],r=t[1];this.outputShape=t,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n            vec4 values = "+e.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+e.output+" = result;\n      }\n    "}}(),Tae=function(){return function(t,e,n){this.variableNames=["A","indices"];var r=t.slice();r[n]=e,this.outputShape=r,this.rank=r.length;var i=ot(this.rank),o=function(s,a){var u=s.length;if(u>4)throw Error("Gather for rank "+u+" is not yet supported");if(u===1)return"int(getIndices(resRC))";for(var l=["resRC.x","resRC.y","resRC.z","resRC.w"],c=[],d=0;d<s.length;d++)d===a?c.push("int(getIndices("+l[d]+"))"):c.push(""+l[d]);return c.join()}(t,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "}}(),Cae=function(){return function(t,e,n){this.sliceDim=t,this.strides=e,this.variableNames=["x","indices"],this.outputShape=n;var r=ot(e.length),i=ot(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+o+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "}}();function lB(t,e){var n=On();return a$(t,e,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function cB(t,e){return d$(t,e,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function dB(t,e){return h$(t,e,new Uint16Array([0,1,2,2,1,3]))}function fp(t,e,n,r,i,o,s){p$(n,r);var a=f$(t,e),u=t.TEXTURE_2D;return fe(t,e,function(){return t.bindTexture(u,a)}),fe(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE)}),fe(t,e,function(){return t.texParameteri(u,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)}),fe(t,e,function(){return t.texParameteri(u,t.TEXTURE_MIN_FILTER,t.NEAREST)}),fe(t,e,function(){return t.texParameteri(u,t.TEXTURE_MAG_FILTER,t.NEAREST)}),fe(t,e,function(){return t.texImage2D(u,0,i,n,r,0,o,s,null)}),fe(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)}),a}function hB(t,e,n,r,i){var o=u0(n,r);return fp(t,e,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,t.FLOAT)}function fB(t,e,n,r,i){var o=u0(n,r);return fp(t,e,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function pB(t,e,n,r,i){var o=u0(n,r);return fp(t,e,o[0],o[1],t.RGBA,t.RGBA,t.UNSIGNED_BYTE)}function mB(t,e,n,r,i){var o=ap(n,r);return fp(t,e,o[0],o[1],i.internalFormatPackedFloat,t.RGBA,t.FLOAT)}function gB(t,e,n,r,i){var o=ap(n,r);return fp(t,e,o[0],o[1],i.internalFormatPackedHalfFloat,t.RGBA,i.textureTypeHalfFloat)}function vB(t,e,n,r){return fe(t,e,function(){return t.bindBuffer(t.ARRAY_BUFFER,r)}),O_(t,e,n,"clipSpacePos",r,3,20,0)&&O_(t,e,n,"uv",r,2,20,12)}function yB(t,e,n,r,i,o,s){var a,u,l;fe(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),o instanceof Uint8Array?(a=new Uint8Array(r*i*4),u=t.UNSIGNED_BYTE,l=t.RGBA):(a=new Float32Array(r*i*4),u=t.FLOAT,l=s.internalFormatPackedFloat),a.set(o),fe(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,l,r,i,0,t.RGBA,u,a)}),fe(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function wB(t,e,n,r){fe(t,e,function(){return t.bindTexture(t.TEXTURE_2D,n)}),r.data instanceof Uint8Array?fe(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r.width,r.height,0,t.RGBA,t.UNSIGNED_BYTE,r.data)}):fe(t,e,function(){return t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,r)}),fe(t,e,function(){return t.bindTexture(t.TEXTURE_2D,null)})}function bB(t,e,n,r,i){var o=t.createBuffer();fe(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,o)});var s=16*n*r;return fe(t,e,function(){return t.bufferData(t.PIXEL_PACK_BUFFER,s,t.STREAM_READ)}),fe(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,0)}),fe(t,e,function(){return t.bindBuffer(t.PIXEL_PACK_BUFFER,null)}),o}function xB(t,e,n){var r=t,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,e),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function _B(t,e,n,r,i){var o=u0(n,r),s=o[0],a=o[1],u=new Uint8Array(n*r*4);return fe(t,e,function(){return t.readPixels(0,0,s,a,i.downloadTextureFormat,t.UNSIGNED_BYTE,u)}),new Float32Array(u.buffer)}function EB(t,e,n,r,i,o,s,a){var u=t,l=new Float32Array(function(c,d){var h=ap(c,d);return h[0]*h[1]*4}(o,s));return u.bindBuffer(u.PIXEL_PACK_BUFFER,e),u.getBufferSubData(u.PIXEL_PACK_BUFFER,0,l),u.bindBuffer(u.PIXEL_PACK_BUFFER,null),l}function IB(t,e,n,r){var i=new Float32Array(n*r*4);return fe(t,e,function(){return t.readPixels(0,0,r,n,t.RGBA,t.FLOAT,i)}),i}var kae=Object.freeze({createVertexShader:lB,createVertexBuffer:cB,createIndexBuffer:dB,createFloat32MatrixTexture:hB,createFloat16MatrixTexture:fB,createUnsignedBytesMatrixTexture:pB,createPackedMatrixTexture:mB,createFloat16PackedMatrixTexture:gB,bindVertexProgramAttributeStreams:vB,uploadDenseMatrixToTexture:yB,uploadPixelDataToTexture:wB,createBufferFromOutputTexture:bB,downloadFloat32MatrixFromBuffer:xB,downloadByteEncodedFloatMatrixFromOutputTexture:_B,downloadPackedMatrixFromBuffer:EB,downloadMatrixFromPackedOutputTexture:IB}),TB=function(){function t(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var n=q().getNumber("WEBGL_VERSION");if(e!=null?(this.gl=e,r$(n,e)):this.gl=oo(n),q().getNumber("WEBGL_VERSION")===1)this.textureFloatExtension=jm(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),this.textureHalfFloatExtension=jm(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float");else if(vi(this.gl,"EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float");else{if(!vi(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=cB(this.gl,this.debug),this.indexBuffer=dB(this.gl,this.debug),this.framebuffer=m$(this.gl,this.debug),this.textureConfig=UT(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(t.prototype,"debug",{get:function(){return q().getBool("DEBUG")},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){var e=this;if(!this.disposed){this.program!=null&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),this.outputTexture!=null&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var n=this.gl;fe(n,this.debug,function(){return n.finish()}),fe(n,this.debug,function(){return n.bindFramebuffer(n.FRAMEBUFFER,null)}),fe(n,this.debug,function(){return n.deleteFramebuffer(e.framebuffer)}),fe(n,this.debug,function(){return n.bindBuffer(n.ARRAY_BUFFER,null)}),fe(n,this.debug,function(){return n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,null)}),fe(n,this.debug,function(){return n.deleteBuffer(e.indexBuffer)}),this.disposed=!0}},t.prototype.createFloat32MatrixTexture=function(e,n){return this.throwIfDisposed(),hB(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createFloat16MatrixTexture=function(e,n){return this.throwIfDisposed(),fB(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createUnsignedBytesMatrixTexture=function(e,n){return this.throwIfDisposed(),pB(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.uploadPixelDataToTexture=function(e,n){this.throwIfDisposed(),wB(this.gl,this.debug,e,n)},t.prototype.uploadDenseMatrixToTexture=function(e,n,r,i){this.throwIfDisposed(),yB(this.gl,this.debug,e,n,r,i,this.textureConfig)},t.prototype.createFloat16PackedMatrixTexture=function(e,n){return this.throwIfDisposed(),gB(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.createPackedMatrixTexture=function(e,n){return this.throwIfDisposed(),mB(this.gl,this.debug,e,n,this.textureConfig)},t.prototype.deleteMatrixTexture=function(e){var n=this;this.throwIfDisposed(),this.outputTexture===e&&(L_(this.gl,this.debug,this.framebuffer),this.outputTexture=null),fe(this.gl,this.debug,function(){return n.gl.deleteTexture(e)})},t.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return _B(i.gl,i.debug,n,r,i.textureConfig)})},t.prototype.downloadPackedMatrixFromBuffer=function(e,n,r,i,o,s){return EB(this.gl,e,0,0,0,o,s,this.textureConfig)},t.prototype.downloadFloat32MatrixFromBuffer=function(e,n){return xB(this.gl,e,n)},t.prototype.createBufferFromTexture=function(e,n,r){this.bindTextureToFrameBuffer(e);var i=bB(this.gl,this.debug,n,r,this.textureConfig);return this.unbindTextureToFrameBuffer(),i},t.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},t.prototype.createFence=function(e){var n,r,i=this;if(q().getBool("WEBGL_FENCE_API_ENABLED")){var o=e,s=o.fenceSync(o.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),r=function(){var a=o.clientWaitSync(s,0,0);return a===o.ALREADY_SIGNALED||a===o.CONDITION_SATISFIED},n=s}else q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(n=this.beginQuery(),this.endQuery(),r=function(){return i.isQueryAvailable(n,q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):r=function(){return!0};return{query:n,isFencePassed:r}},t.prototype.downloadMatrixFromPackedTexture=function(e,n,r){var i=this;return this.downloadMatrixDriver(e,function(){return IB(i.gl,i.debug,n,r)})},t.prototype.createProgram=function(e){this.throwIfDisposed();var n=this.gl,r=u$(n,this.debug,e),i=lB(n,this.debug),o=l$(n,this.debug);return fe(n,this.debug,function(){return n.attachShader(o,i)}),fe(n,this.debug,function(){return n.attachShader(o,r)}),c$(n,this.debug,o),this.debug&&Wm(n,this.debug,o),this.vertexAttrsAreBound||(this.setProgram(o),this.vertexAttrsAreBound=vB(n,this.debug,this.program,this.vertexBuffer)),o},t.prototype.deleteProgram=function(e){var n=this;this.throwIfDisposed(),e===this.program&&(this.program=null),e!=null&&fe(this.gl,this.debug,function(){return n.gl.deleteProgram(e)})},t.prototype.setProgram=function(e){var n=this;this.throwIfDisposed(),this.program=e,this.program!=null&&this.debug&&Wm(this.gl,this.debug,this.program),fe(this.gl,this.debug,function(){return n.gl.useProgram(e)})},t.prototype.getUniformLocation=function(e,n,r){return r===void 0&&(r=!0),this.throwIfDisposed(),r?v$(this.gl,this.debug,e,n):y$(this.gl,e,n)},t.prototype.getAttributeLocation=function(e,n){var r=this;return this.throwIfDisposed(),fe(this.gl,this.debug,function(){return r.gl.getAttribLocation(e,n)})},t.prototype.getUniformLocationNoThrow=function(e,n){return this.throwIfDisposed(),this.gl.getUniformLocation(e,n)},t.prototype.setInputMatrixTexture=function(e,n,r){this.throwIfDisposed(),this.throwIfNoProgram(),w$(this.gl,this.debug,this.program,e,n,r)},t.prototype.setOutputMatrixTexture=function(e,n,r){this.setOutputMatrixTextureDriver(e,r,n)},t.prototype.setOutputPackedMatrixTexture=function(e,n,r){this.throwIfDisposed();var i=ap(n,r),o=i[0],s=i[1];this.setOutputMatrixTextureDriver(e,o,s)},t.prototype.setOutputMatrixWriteRegion=function(e,n,r,i){this.setOutputMatrixWriteRegionDriver(r,e,i,n)},t.prototype.setOutputPackedMatrixWriteRegion=function(e,n,r,i){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},t.prototype.debugValidate=function(){this.program!=null&&Wm(this.gl,this.debug,this.program),jd(this.gl)},t.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),fe(e,this.debug,function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)})},t.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),fe(this.gl,this.debug,function(){return e.gl.finish()})},t.prototype.getQueryTimerExtension=function(){return this.disjointQueryTimerExtension==null&&(this.disjointQueryTimerExtension=jm(this.gl,this.debug,q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},t.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},t.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},t.prototype.beginQuery=function(){if(q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")===2){var e=this.gl,n=this.getQueryTimerExtensionWebGL2(),r=e.createQuery();return e.beginQuery(n.TIME_ELAPSED_EXT,r),r}var i=this.getQueryTimerExtensionWebGL1(),o=i.createQueryEXT();return i.beginQueryEXT(i.TIME_ELAPSED_EXT,o),o},t.prototype.endQuery=function(){if(q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")!==2){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var n=this.gl,r=this.getQueryTimerExtensionWebGL2();n.endQuery(r.TIME_ELAPSED_EXT)}},t.prototype.waitForQueryAndGetTime=function(e){return pe(this,void 0,void 0,function(){var n=this;return me(this,function(r){switch(r.label){case 0:return[4,k_(function(){return n.disposed||n.isQueryAvailable(e,q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))})];case 1:return r.sent(),[2,this.getQueryTime(e,q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}})})},t.prototype.getQueryTime=function(e,n){if(n===0)return null;if(n===2){var r=this.gl;return r.getQueryParameter(e,r.QUERY_RESULT)/1e6}var i=this.getQueryTimerExtensionWebGL1();return i.getQueryObjectEXT(e,i.QUERY_RESULT_EXT)/1e6},t.prototype.isQueryAvailable=function(e,n){if(n===0)return!0;if(n===2){var r=this.gl,i=this.getQueryTimerExtensionWebGL2(),o=r.getQueryParameter(e,r.QUERY_RESULT_AVAILABLE);return this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint}return o=(i=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,i.QUERY_RESULT_AVAILABLE_EXT),this.disjoint==null&&(this.disjoint=this.gl.getParameter(i.GPU_DISJOINT_EXT)),o&&!this.disjoint},t.prototype.pollFence=function(e){var n=this;return new Promise(function(r){n.addItemToPoll(function(){return e.isFencePassed()},function(){return r()})})},t.prototype.pollItems=function(){for(var e=function(r){for(var i=0;i<r.length;++i){var o=r[i]();if(!o)break}return i-1}(this.itemsToPoll.map(function(r){return r.isDoneFn})),n=0;n<=e;++n)(0,this.itemsToPoll[n].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},t.prototype.addItemToPoll=function(e,n){var r=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:n}),this.itemsToPoll.length>1||k_(function(){return r.pollItems(),r.itemsToPoll.length===0})},t.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),qm(this.gl,this.debug,e,this.framebuffer),this.debug&&jd(this.gl)},t.prototype.unbindTextureToFrameBuffer=function(){this.outputTexture!=null?(qm(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&jd(this.gl)):L_(this.gl,this.debug,this.framebuffer)},t.prototype.downloadMatrixDriver=function(e,n){this.bindTextureToFrameBuffer(e);var r=n();return this.unbindTextureToFrameBuffer(),r},t.prototype.setOutputMatrixTextureDriver=function(e,n,r){this.throwIfDisposed();var i=this.gl;qm(i,this.debug,e,this.framebuffer),this.debug&&jd(i),this.outputTexture=e,fe(i,this.debug,function(){return i.viewport(0,0,n,r)}),fe(i,this.debug,function(){return i.scissor(0,0,n,r)})},t.prototype.setOutputMatrixWriteRegionDriver=function(e,n,r,i){var o=this;this.throwIfDisposed(),fe(this.gl,this.debug,function(){return o.gl.scissor(e,n,r,i)})},t.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},t.prototype.throwIfNoProgram=function(){if(this.program==null)throw new Error("No GPU program is currently set.")},t}();function x2(t,e){if(t.length!==e.length)throw Error("Binary was compiled with "+t.length+" inputs, but was executed with "+e.length+" inputs");t.forEach(function(n,r){var i=n.logicalShape,o=e[r],s=o.shape;if(!an(i,s))throw Error("Binary was compiled with different shapes than the current args. Shapes "+i+" and "+s+" must match");if(!n.isUniform||!o.isUniform){var a=n.texShape,u=o.isUniform?null:o.texData.texShape;if(!an(a,u))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+u+" must match")}})}var Sae=function(){return function(t,e,n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;for(var r=n.filterWidth,i=n.inChannels,o=n.strideWidth,s=n.strideHeight,a=n.padInfo,u=n.outWidth,l=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,h=a.left,f=a.top,m=i*r,v=On(),y=d==="channelsLast",g=y?0:1,w=y?1:2,b="",x=0;x<=1;x++)for(var _=0;_<=1;_++)b+="\n          blockIndex = rc.y + "+_+";\n          pos = rc.x + "+x+";\n\n          if(blockIndex < "+t[1]+" && pos < "+t[0]+") {\n            offsetY = int(blockIndex / ("+u+")) * "+s+" - "+f+";\n            d0 = offsetY + "+c+" * (pos / "+m+");\n\n            if(d0 < "+e[g]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+u+".) * "+o+". - "+h+".);\n              d1 = offsetX + "+l+" * (int(mod(float(pos), "+m+".) / "+i+".));\n\n              if(d1 < "+e[w]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+i+".));\n\n                if ("+y+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*x+_)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*x+_)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+v.output+" = result;\n      }\n    "}}(),Aae=function(){return function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[];var o,s=e,a=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+s+"; j <= "+s+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+a+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+o+";\n        setOutput(val);\n      }\n    "}}(),Rae=function(){return function(t,e,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=t,this.depth=t[3],this.depthRadius=e,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+e+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+e+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "}}(),Nae=function(){return function(t,e,n,r,i){this.variableNames=["x"],this.outputShape=[],this.usesPackedTextures=!0;var o,s=e,a=t[3]-1;this.outputShape=t;var u="float("+n+") + float("+r+") * sum";o=i===.5?"inversesqrt("+u+")":i===1?"1.0/("+u+")":"exp(log("+u+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+s+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+s+"; j <= "+s+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+a+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+o+";\n        setOutput(result);\n      }\n    "}}(),Pae=function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideHeight,n=t.strideWidth,r=t.dilationHeight,i=t.effectiveFilterHeight,o=t.effectiveFilterWidth,s=i-1-t.padInfo.top,a=o-1-t.padInfo.left,u=i*o-1;this.userCode="\n      const ivec2 pads = ivec2("+s+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+e+".0;\n\n          if (dyR < 0.0 || dyR >= "+t.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+o+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+u+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+o+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}(),Dae=function(){return function(t){this.variableNames=["dy","maxPos"],this.outputShape=t.inShape;var e=t.strideDepth,n=t.strideHeight,r=t.strideWidth,i=t.dilationDepth,o=t.dilationHeight,s=t.dilationWidth,a=t.effectiveFilterDepth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=a-1-t.padInfo.front,d=u-1-t.padInfo.top,h=l-1-t.padInfo.left,f=a*u*l-1;this.userCode="\n      const ivec3 pads = ivec3("+c+", "+d+", "+h+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+a+";\n           wD += "+i+") {\n          float dyD = float(dyDCorner + wD) / "+e+".0;\n\n          if (dyD < 0.0 || dyD >= "+t.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+o+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+t.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+s+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+t.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+f+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+u+" * "+l+" +\n                  wR * "+l+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "}}(),ub=function(){return function(t,e,n,r,i,o,s){n===void 0&&(n=!1),r===void 0&&(r=!1),i===void 0&&(i=!1),o===void 0&&(o=null),s===void 0&&(s=!1),this.variableNames=["matrixA","matrixB"],this.usesPackedTextures=!0,this.outputShape=e;var a=n?t[1]:t[2],u=Math.ceil(a/2),l=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],f="",m="";o&&(f=s?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+o+"\n        }":"vec4 activation(vec4 x) {\n          "+o+"\n        }",m="result = activation(result);");var v=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),s&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+f+"\n\n      const float sharedDimension = "+u+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+u+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+l+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+d[0]+" * "+h[0]+");\n          result += ("+d[1]+" * "+h[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+v+"\n\n        "+m+"\n\n        setOutput(result);\n      }\n    "}}(),Oae=function(){function t(e,n,r){this.variableNames=["probs"],this.outputShape=[e,r],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(n-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(n-1)+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(e){var n=this;return function(r,i){n.seedLoc==null&&(n.seedLoc=r.getUniformLocation(i,"seed")),r.gl.uniform1f(n.seedLoc,e)}},t}(),Lae=function(){return function(t,e,n,r){this.variableNames=["indices"],this.outputShape=[t,e],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "}}(),Mae=function(){return function(t){this.variableNames=["A"],this.outputShape=t;var e=t.length;if(e===0)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=pr("rc",e),r=ot(e),i=function(a,u,l){if(a===1)return"rc > "+u[0];for(var c="",d=a-2;d<a;d++)c+=l[d]+" >= "+u[d],d<a-1&&(c+="||");return c}(e,t,n),o=function(a,u,l,c){if(a===1)return"";var d=c.slice(-2);return"\n    int r = "+d[0]+";\n    int c = "+d[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+u+";\n    bool rEdge = rp1 >= "+l+";\n  "}(e,t[t.length-1],t[t.length-2],n),s=function(a,u){var l=a.length,c=function(d,h){for(var f=[],m=0;m<=1;m++)for(var v=0;v<=1;v++){for(var y=(m===0?"r":"rp1")+", "+(v===0?"c":"cp1"),g=2;g<d;g++)y=h[h.length-1-g]+","+y;f.push(y)}return f}(l,u);return l===1?"getA(rc),\n            rc + 1 >= "+a[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+c[0]+"),\n          cEdge ? 0. : getA("+c[1]+"),\n          rEdge ? 0. : getA("+c[2]+"),\n          rEdge || cEdge ? 0. : getA("+c[3]+")"}(t,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+o+"\n\n            setOutput(vec4("+s+"));\n          }\n        }\n      "}}}(),Vae=function(){return function(t,e,n){this.variableNames=["x"],this.outputShape=e.map(function(u,l){return u[0]+t[l]+u[1]});var r=t.length,i=ot(r),o=e.map(function(u){return u[0]}).join(","),s=e.map(function(u,l){return u[0]+t[l]}).join(","),a=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=r!==1?"\n      "+i+" start = "+i+"("+o+");\n      "+i+" end = "+i+"("+s+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+a+"));\n        }\n      }\n    ":"\n        int start = "+o+";\n        int end = "+s+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "}}(),Fae=function(){return function(t,e,n){this.variableNames=["x"],this.usesPackedTextures=!0,this.outputShape=e.map(function(y,g){return y[0]+t[g]+y[1]});for(var r=t.length,i=ot(r),o=e.map(function(y){return y[0]}).join(","),s=e.map(function(y,g){return y[0]+t[g]}).join(","),a=pr("rc",r),u=pr("source",r),l=a[r-1]+" < "+this.outputShape[r-1],c=r===1?"source":"vec2("+u.slice(-2).join()+")",d=[i+" rc = outputLoc;",a[r-1]+" += 1;\n       if("+l+") {\n      ",r===1?"":"}\n       rc = outputLoc;\n       "+a[r-2]+" += 1;\n       if("+a[r-2]+" < "+this.outputShape[r-2]+") {",r===1?"":"  "+a[r-1]+" += 1;\n         if("+l+") {"],h=r===1?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",f="",m=0,v=r===1?2:4;m<v;m++)f+="\n        "+d[m]+"\n        if ("+h+") {\n          result["+m+"] = float("+n+");\n        } else {\n          "+i+" source = rc - start;\n          result["+m+"] = getChannel(getX("+u.join()+"), "+c+");\n        }\n      ";f+=r===1?"} ":"}}",this.userCode="\n      const "+i+" start = "+i+"("+o+");\n      const "+i+" end = "+i+"("+s+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+f+"\n        setOutput(result);\n      }\n    "}}(),lb=function(){return function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideHeight,o=t.strideWidth,s=t.dilationHeight,a=t.dilationWidth,u=t.effectiveFilterHeight,l=t.effectiveFilterWidth,c=t.padInfo.top,d=t.padInfo.left;this.outputShape=t.outShape;var h=e==="avg",f="0.0";if(h||(f="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+o+");\n        const ivec2 pads = ivec2("+c+", "+d+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+u+";\n              wR += "+s+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+l+";\n                wC += "+a+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+t.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+l+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var m=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(m="avgValue / count");var v=4*Math.floor(r/4),y=r%4,g="\n      if ("+h+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+c+", "+d+");\n      const float initializationValue = "+f+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+f+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+u+";\n            wR += "+s+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+t.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+v+"; wC += 4) {\n            int xC = xCCorner + wC * "+a+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              getValue(batch, xR, xC + 2 * "+a+", d),\n              getValue(batch, xR, xC + 3 * "+a+", d)\n            );\n\n            "+g+"\n          }\n\n          int xC = xCCorner + "+v+";\n          if ("+(y===1)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(y===2)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+g+"\n          } else if ("+(y===3)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+a+", d),\n              getValue(batch, xR, xC + 2 * "+a+", d),\n              initializationValue\n            );\n\n            "+g+"\n          }\n        }\n        setOutput("+m+");\n      }\n    "}}}(),cb=function(){return function(t,e,n){if(this.variableNames=["x"],e==="avg"&&n)throw new Error("Cannot compute positions for average pool.");var r=t.filterWidth,i=t.strideDepth,o=t.strideHeight,s=t.strideWidth,a=t.dilationDepth,u=t.dilationHeight,l=t.dilationWidth,c=t.effectiveFilterDepth,d=t.effectiveFilterHeight,h=t.effectiveFilterWidth,f=t.padInfo.front,m=t.padInfo.top,v=t.padInfo.left;this.outputShape=t.outShape;var y=e==="avg",g="0.0";if(y||(g="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+o+", "+s+");\n        const ivec3 pads = ivec3("+f+", "+m+", "+v+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+c+";\n              wD += "+a+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+t.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+d+";\n                wR += "+u+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+t.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+h+";\n                  wC += "+l+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+t.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+d+" * "+h+" +\n                      wR * "+h+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var w=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="avg"&&(w="avgValue / count");var b=4*Math.floor(r/4),x=r%4,_="\n      if ("+y+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+o+", "+s+");\n      const ivec3 pads = ivec3("+f+", "+m+", "+v+");\n      const float initializationValue = "+g+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+t.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+g+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+a+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+t.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+";\n            wR += "+u+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+t.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+l+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+l+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+l+", ch)\n              );\n\n              "+_+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(x===1)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+_+"\n            } else if ("+(x===2)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+_+"\n            } else if ("+(x===3)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+l+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+l+", ch),\n                initializationValue\n              );\n\n              "+_+"\n            }\n          }\n          setOutput("+w+");\n        }\n      }\n    "}}}(),$ae=function(){return function(t,e){this.variableNames=["x"];var n=t.windowSize,r=t.batchSize,i=t.inSize,o=Math.ceil(i/n);this.outputShape=[r,o];var s="0.0",a="";e==="prod"?s="1.0":e==="min"?(s="1.0 / 1e-20",a="min"):e==="max"&&(s="-1.0 / 1e-20",a="max");var u=e+"("+e+"("+e+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";e==="sum"?u="sumValue":e==="prod"?u="prodValue":e==="all"?u="allValue":e==="any"&&(u="anyValue");var l=4*Math.floor(n/4),c=n%4,d="\n      if ("+(e==="sum")+") {\n        sumValue += dot(values, ones);\n      } else if ("+(e==="prod")+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+a+"(values, minMaxValue);\n      }\n    ",h="vec4";e==="all"?(s="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):e==="any"&&(s="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var f="";i%n>0&&(f="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+s+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+f+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+s+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+l+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+d+"\n        }\n\n        int inIdx = inOffset + "+l+";\n        if ("+(c===1)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(c===2)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(c===3)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+d+"\n        }\n        setOutput("+u+");\n      }\n    "}}(),Bae=function(){return function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+za(["r","c","d"],e)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+uC(t)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+t[1]+";\n        int cols = "+t[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "}}(),jae=function(){return function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],o=r[2],s=t.shape,a=s[1],u=s[2],l=[n&&a>1?i-1:i,n&&u>1?o-1:o],c=[n&&a>1?a-1:a,n&&u>1?u-1:u],d=l[0]/c[0],h=l[1]/c[1],f=1/d,m=1/h,v=2*Math.ceil(f)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+m+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+y+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+a+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(o-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "}}(),Uae=function(){return function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],s=t[2],a=t[3];this.outputShape=[i,e,n,a];var u=[r&&e>1?o-1:o,r&&n>1?s-1:s],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "}}(),zae=function(){return function(t,e,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=[];var i=t[0],o=t[1],s=t[2],a=t[3];this.outputShape=[i,e,n,a];var u=[r&&e>1?o-1:o,r&&n>1?s-1:s],l=[r&&e>1?e-1:e,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+",\n          "+u[1]/l[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+s+".0,\n                                     "+s+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n        \n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(a-1)+"; \n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "}}(),Wae=function(){return function(t,e,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=e.shape;var r=e.shape,i=r[1],o=r[2],s=t.shape,a=s[1],u=s[2],l=[n&&a>1?i-1:i,n&&u>1?o-1:o],c=[n&&a>1?a-1:a,n&&u>1?u-1:u],d=l[0]/c[0],h=l[1]/c[1],f=1/d,m=1/h,v=2*Math.ceil(f)+2,y=2*Math.ceil(m)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+f+");\n        const float invWidthScale = float("+m+");\n\n        const int winHeight = int("+v+");\n        const int winWidth = int("+y+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+a+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+u+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+l[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+l[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "}}(),qae=function(){return function(t,e,n,r){this.variableNames=["A"],this.outputShape=[];var i=t[0],o=t[1],s=t[2],a=t[3];this.outputShape=[i,e,n,a];var u=[r&&e>1?o-1:o,r&&n>1?s-1:s],l=[r&&e>1?e-1:e,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+u[0]/l[0]+",\n          "+u[1]/l[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+s+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "}}(),Hae=function(){return function(t,e){this.variableNames=["x"];var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=t,n!==1){var r=t.map(function(o,s){return function(a){return e.indexOf(a)!==-1&&t[a]!==1?t[a]+" - coords["+a+"] - 1":"coords["+a+"]"}(s)}).join(","),i=ot(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+t[0]+" - coord - 1));\n        }\n      "}}(),Gae=function(){return function(t,e){this.variableNames=["x"],this.usesPackedTextures=!0;var n=t.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=t;var r=pr("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],s=ot(n);function a(u){var l=t.map(function(c,d){return function(h,f){return e.indexOf(h)!==-1&&t[h]!==1?t[h]+" - "+f[h]+" - 1":""+f[h]}(d,u)});return"getChannel(getX("+l.join(",")+"), vec2("+l.slice(-2).join(",")+"))"}this.userCode=n===1?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+t[0]+" - rc - 1),\n            "+t[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+t[0]+" - (rc  + 1) - 1),\n                "+t[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+s+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(u){return a(u)}(r.slice())+";\n          if("+i+"){\n            result.g = "+function(u){return u[n-1]="("+u[n-1]+" + 1)",a(u)}(r.slice())+";\n          }\n          if("+o+") {\n            result.b = "+function(u){return u[n-2]="("+u[n-2]+" + 1)",a(u)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(u){return u[n-1]="("+u[n-1]+" + 1)",u[n-2]="("+u[n-2]+" + 1)",a(u)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "}}(),_2=function(){return function(t,e,n,r,i,o,s){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var a=ot(i.length),u=ot(o.length),l="";n===1?l="i":n===2&&(l="i, j");var c="getIndices("+l+")",d="";r===1?d="i":r===2&&(d="i, coords[1]");var h="getUpdates("+d+")",f=e>1?"strides[j]":"strides";this.userCode="\n        "+a+" strides = "+a+"("+i+");\n\n        void main() {\n          "+u+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+t+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+e+"; j++) {\n              int index = round("+c+");\n              flattenedIndex += index * "+f+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+h+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "}}(),Kae=function(){return function(t,e){this.variableNames=["x","segmentIds"];var n=t.windowSize,r=t.batchSize,i=t.inSize,o=t.numSegments,s=o*Math.ceil(i/n);this.outputShape=[r,s];var a=4*Math.floor(n/4),u=n%4,l="\n        sumValue += dot(values, segFilter);\n    ",c="";i%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var d="";i%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+d+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+a+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+l+"\n        }\n\n        int inIdx = inOffset + "+a+";\n        if ("+(u===1)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+l+"\n        } else if ("+(u===2)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+l+"\n        } else if ("+(u===3)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+l+"\n        }\n        setOutput(sumValue);\n      }\n    "}}(),Yae=function(){return function(t,e,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=e,n>4)throw Error("Where for rank "+n+" is not yet supported");if(n===1)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],s=[],a=[],u=0;u<e.length;u++)a.push(""+o[u]),u<t&&s.push(""+o[u]);r=s.join(),i=a.join()}var l=ot(n);this.userCode="\n      void main() {\n        "+l+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "}}(),Xae=function(){function t(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var n,r=ot(this.rank),i="uniform int start["+this.rank+"];",o=function(s){if(s===1)return"sourceLoc";if(s<=6)return db.slice(0,s).map(function(a){return"sourceLoc."+a}).join(",");throw Error("Slicing for rank "+s+" is not yet supported")}(this.rank);n="\n        "+r+" sourceLoc;\n        "+r+" coords = getOutputCoords();\n        "+e.map(function(s,a){return"sourceLoc."+db[a]+" = start["+a+"] + coords."+db[a]+";"}).join("\n")+"\n      ",this.userCode="\n      "+i+"\n      void main() {\n        "+n+"\n        setOutput(getSource("+o+"));\n      }\n    "}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),db=["x","y","z","w","u","v"],Qae=function(){function t(e){this.variableNames=["source"],this.usesPackedTextures=!0,this.outputShape=e,this.rank=e.length;var n=ot(this.rank),r=pr("coords",this.rank),i=pr("sourceLoc",this.rank),o=this.rank===1?"sourceLoc":"vec2("+i.slice(-2).join()+")",s="getChannel(getSource("+i.join()+"), "+o+")",a="\n      result.x = "+s+";\n      if (++"+r[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+i[this.rank-1]+";\n        result.y = "+s+";\n        --"+i[this.rank-1]+";\n      }\n    ",u=this.rank===1?"":"\n      --"+r[this.rank-1]+";\n      if (++"+r[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+i[this.rank-2]+";\n        result.z = "+s+";\n        if (++"+r[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+i[this.rank-1]+";\n          result.w = "+s+";\n        }\n      }\n    ",l=this.rank<=4?"sourceLoc = coords +\n            "+n+"("+e.map(function(c,d){return"start["+d+"]"}).join()+");":e.map(function(c,d){return i[d]+" = "+r[d]+" + start["+d+"];"}).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+n+" coords = getOutputCoords();\n        "+n+" sourceLoc;\n        "+l+" \n        vec4 result = vec4(0.);\n        "+a+"\n        "+u+"\n        setOutput(result);\n      }\n    "}return t.prototype.getCustomSetupFunc=function(e){var n=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(r,i){n.startLoc==null&&(n.startLoc=r.getUniformLocationNoThrow(i,"start"),n.startLoc==null)||r.gl.uniform1iv(n.startLoc,e)}},t}(),Jae=function(){return function(t,e,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=ot(n.length),o=ot(n.length),s="";if(r===1)s="coords * strides + begin";else{var a=0;s=n.map(function(u,l){return a++,n.length===1?"coords * strides["+l+"] + begin["+l+"]":"coords["+(a-1)+"] * strides["+l+"] + begin["+l+"]"}).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+t+");\n      "+i+" strides = "+i+"("+e+");\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+s+"));\n      }\n    "}}(),Zae=function(){function t(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return t.prototype.acquireTexture=function(e,n,r){var i,o=E2(n,r),s=I2(e,o,r);if(s in this.freeTextures||(this.freeTextures[s]=[]),s in this.usedTextures||(this.usedTextures[s]=[]),this.freeTextures[s].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[s].shift();return this.usedTextures[s].push(a),a}return this.numUsedTextures++,this.log(),o===Sr.PACKED_2X2_FLOAT32?i=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):o===Sr.PACKED_2X2_FLOAT16?i=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):o===Sr.UNPACKED_FLOAT32?i=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):o===Sr.UNPACKED_FLOAT16?i=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):o===Sr.PACKED_4X1_UNSIGNED_BYTE&&(i=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[s].push(i),i},t.prototype.releaseTexture=function(e,n,r,i){if(this.freeTextures!=null){var o=I2(n,E2(r,i),i);o in this.freeTextures||(this.freeTextures[o]=[]),this.freeTextures[o].push(e),this.numFreeTextures++,this.numUsedTextures--;var s=this.usedTextures[o],a=s.indexOf(e);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");s.splice(a,1),this.log()}},t.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},t.prototype.getNumUsedTextures=function(){return this.numUsedTextures},t.prototype.getNumFreeTextures=function(){return this.numFreeTextures},t.prototype.dispose=function(){var e=this;if(this.freeTextures!=null){for(var n in this.freeTextures)this.freeTextures[n].forEach(function(r){e.gpgpu.deleteMatrixTexture(r)});for(var n in this.usedTextures)this.usedTextures[n].forEach(function(i){e.gpgpu.deleteMatrixTexture(i)});this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},t}();function E2(t,e){if(t===gi.UPLOAD)return Sr.PACKED_2X2_FLOAT32;if(t===gi.RENDER||t==null)return function(n){return q().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?n?Sr.PACKED_2X2_FLOAT32:Sr.UNPACKED_FLOAT32:n?Sr.PACKED_2X2_FLOAT16:Sr.UNPACKED_FLOAT16}(e);if(t===gi.DOWNLOAD||t===gi.PIXELS)return Sr.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+t)}function I2(t,e,n){return t[0]+"_"+t[1]+"_"+e+"_"+n}var eue=function(){return function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[r]*e[r];this.outputShape=n,this.rank=n.length;var i=ot(this.rank),o=function(s){var a=s.length;if(a>5)throw Error("Tile for rank "+a+" is not yet supported");if(a===1)return"imod(resRC, "+s[0]+")";for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],l=[],c=0;c<s.length;c++)l.push("imod("+u[c]+", "+s[c]+")");return l.join()}(t);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "}}(),tue=function(){return function(t,e){this.variableNames=["A"];for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];this.outputShape=n,this.rank=n.length;var i=ot(this.rank),o=function(s){var a=s.length;if(a>6)throw Error("Transpose for rank "+a+" is not yet supported");for(var u=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],l=new Array(a),c=0;c<s.length;c++)l[s[c]]=u[c];return l.join()}(e);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+o+"));\n    }\n    "}}(),nue=function(){return function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0;for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t[e[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=ot(this.rank),o=iB("rc",this.rank),s=new Array(this.rank);for(r=0;r<e.length;r++)s[e[r]]=o[r];var a="vec2("+s.slice(-2).join()+")",u="++"+o[this.rank-1]+" < "+n[this.rank-1],l="getChannel(getA("+s.join()+"), "+a+")";this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+l+";\n      if("+u+") {\n        result[1] = "+l+";\n      }\n      --"+o[this.rank-1]+";\n      if(++"+o[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+l+";\n        if("+u+") {\n          result[3] = "+l+";\n        }\n      }  \n      setOutput(result);\n    }\n    "}}(),lC=1.7580993408473768,cC=1.0507009873554805,Ne=function(){return function(t,e){this.variableNames=["A"],this.outputShape=t,this.userCode="\n      float unaryOperation(float x) {\n        "+e+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}}(),Si="if (isnan(x)) return x;",rue="return x;",T2="return abs(x);",CB=Si+"\n  return (x < 0.0) ? 0.0 : x;\n",kB=Si+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",SB="return (x >= 0.0) ? x : (exp(x) - 1.0);",iue="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+lC+";\n  float scale = "+cC+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",C2="return -x;",k2="return ceil(x);",S2="return floor(x);",A2="return exp(x);",R2="return exp(x) - 1.0;",oue=Si+"\n  return sin(x);\n",sue=Si+"\n  return cos(x);\n",aue=Si+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",uue=Si+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",lue=Si+"\n  return atan(x);\n",cue=Si+"return log(x + sqrt(x * x + 1.0));",due=Si+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",hue=Si+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",am="return x;",fue="return x;",AB="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",RB="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",NB="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",Sd=function(){return function(t,e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "}}(),pue=function(){return function(t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=t;var e=t.length,n=pr("rc",e),r=ot(e),i=function(a,u){if(a===1)return"rc";for(var l="",c=0;c<a;c++)l+=u[c],c<a-1&&(l+=",");return l}(e,n),o=n.slice(-2),s=e<=1?"rc":"vec2("+o.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+s+"));\n      }\n    "}}(),um={};function lm(t,e){if(e===void 0&&(e=!1),t==="linear")return e?fue:rue;if(t==="relu")return e?AB:CB;if(t==="elu")return e?NB:SB;if(t==="relu6")return e?RB:kB;if(t==="prelu")return e?uB:aB;throw new Error("Activation "+t+" has not been implemented for the WebGL backend.")}var mue=600,PB=function(){function t(e){if(this.gpgpu=e,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.disposed=!1,!q().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(e==null){var n=oo(q().getNumber("WEBGL_VERSION"));this.binaryCache=((r=q().getNumber("WEBGL_VERSION"))in um||(um[r]={}),um[r]),this.gpgpu=new TB(n),this.canvas=n.canvas,this.gpgpuCreatedLocally=!0}else this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;var r;this.textureManager=new Zae(this.gpgpu),this.numMBBeforeWarning=q().global.screen==null?1024:q().global.screen.height*q().global.screen.width*window.devicePixelRatio*mue/1024/1024,this.texData=new nC(this,O)}return t.prototype.register=function(e,n,r){if(this.texData.has(e))throw new Error("Data buffer is already registered");this.texData.set(e,{shape:n,dtype:r})},t.prototype.fromPixels=function(e,n){if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r=typeof OffscreenCanvas<"u"&&e instanceof OffscreenCanvas||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement,i=e.data instanceof Uint8Array,o=typeof ImageData<"u"&&e instanceof ImageData,s=typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement,a=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,u=s?[e.videoWidth,e.videoHeight]:[e.width,e.height],l=u[0],c=u[1],d=[c,l],h=[c,l,n];if(!(r||i||o||s||a))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);(a||s)&&(this.fromPixels2DContext==null&&(this.fromPixels2DContext=i$(q().getNumber("WEBGL_VERSION")).getContext("2d")),this.fromPixels2DContext.canvas.width=l,this.fromPixels2DContext.canvas.height=c,this.fromPixels2DContext.drawImage(e,0,0,l,c),e=this.fromPixels2DContext.canvas);var f,m,v=this.makeTensorHandle(d,"int32");if(this.texData.get(v.dataId).usage=gi.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(v.dataId),e),q().getBool("WEBGL_PACK")){f=new Iae(h);var y=this.makePackedTensor(f.outputShape,v.dtype);m=this.compileAndRun(f,[v],y)}else f=new Eae(h),m=this.compileAndRun(f,[v]);return this.disposeData(v.dataId),m},t.prototype.makeTensorHandle=function(e,n){var r={};return this.register(r,e,n),{dataId:r,shape:e,dtype:n}},t.prototype.write=function(e,n){if(n==null)throw new Error("MathBackendWebGL.write(): values can not be null");if(q().getBool("DEBUG"))for(var r=0;r<n.length;r++){var i=n[r];if(!o$(i))throw q().getBool("WEBGL_RENDER_FLOAT32_CAPABLE")?Error("The value "+i+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'"):Error("The value "+i+" cannot be represented on this device.")}var o=this.texData.get(e);if(o.dtype==="complex64")throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.releaseGPUData(e),o.usage=gi.UPLOAD,o.values=n},t.prototype.readSync=function(e){var n=this.texData.get(e),r=n.values,i=n.dtype,o=n.complexTensors,s=n.slice,a=n.shape,u=n.isPacked;if(s!=null){var l=void 0;l=u?new Sd(a,am):new Ne(a,am);var c=this.compileAndRun(l,[{dataId:e,shape:a,dtype:i}]),d=this.readSync(c.dataId);return c.dispose(),d}if(r!=null)return this.convertAndCacheOnCPU(e);if(i==="string")return r;var h,f,m=this.activeTimers!=null;return m&&(h=mi()),i==="complex64"?f=B_(o.real.dataSync(),o.imag.dataSync()):f=this.getValuesFromTexture(e),m&&(this.downloadWaitMs+=mi()-h),this.convertAndCacheOnCPU(e,f)},t.prototype.read=function(e){return pe(this,void 0,void 0,function(){var n,r,i,o,s,a,u,l,c,d,h,f,m,v,y,g,w,b,x,_,E,I;return me(this,function(C){switch(C.label){case 0:if(this.pendingRead.has(e))return n=this.pendingRead.get(e),[2,new Promise(function(S){return n.push(S)})];if(r=this.texData.get(e),i=r.values,o=r.shape,s=r.slice,a=r.dtype,u=r.complexTensors,l=r.isPacked,s!=null)return c=void 0,c=l?new Sd(o,am):new Ne(o,am),d=this.compileAndRun(c,[{dataId:e,shape:o,dtype:a}]),h=this.read(d.dataId),d.dispose(),[2,h];if(i!=null)return[2,this.convertAndCacheOnCPU(e)];if(!q().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&q().getNumber("WEBGL_VERSION")===2)throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return f=null,a!=="complex64"&&q().get("WEBGL_BUFFER_SUPPORTED")&&(m=this.decode(e),v=this.texData.get(m.dataId),f=(I=this.gpgpu).createBufferFromTexture.apply(I,[v.texture].concat(ib(o)))),this.pendingRead.set(e,[]),a==="complex64"?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:C.sent(),C.label=2;case 2:return a!=="complex64"?[3,4]:[4,Promise.all([u.real.data(),u.imag.data()])];case 3:return g=C.sent(),w=g[0],b=g[1],y=B_(w,b),[3,5];case 4:f==null?y=this.getValuesFromTexture(e):(x=ve(o),y=this.gpgpu.downloadFloat32MatrixFromBuffer(f,x)),C.label=5;case 5:return m!=null&&this.disposeData(m.dataId),_=this.convertAndCacheOnCPU(e,y),E=this.pendingRead.get(e),this.pendingRead.delete(e),E.forEach(function(S){return S(_)}),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)),[2,_]}})})},t.prototype.getValuesFromTexture=function(e){var n,r=this,i=this.texData.get(e),o=i.shape,s=i.dtype,a=i.isPacked,u=ve(o);if(q().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(e),c=this.texData.get(l.dataId),d=(n=this.gpgpu).downloadMatrixFromPackedTexture.apply(n,[c.texture].concat(ib(o))).subarray(0,u);return this.disposeData(l.dataId),d}var h=q().getBool("WEBGL_PACK")&&a===!0,f=h?Hm(o):o,m=this.makeTensorHandle(f,"float32");m.size=ve(o),this.texData.get(m.dataId).usage=gi.DOWNLOAD;var v=Je(function(){var w=h?new vae(f):new gae(f);return r.compileAndRun(w,[{shape:f,dtype:s,dataId:e}],m,null)}),y=this.texData.get(v.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(y.texture,y.texShape[0],y.texShape[1]).subarray(0,u);return this.disposeData(m.dataId),g},t.prototype.time=function(e){return pe(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return me(this,function(l){switch(l.label){case 0:return n=this.activeTimers,r=[],i=!1,this.programTimersStack==null?(this.programTimersStack=r,i=!0):this.activeTimers.push(r),this.activeTimers=r,e(),o=Mo(this.activeTimers.map(function(c){return c.query})).filter(function(c){return c!=null}),s=Mo(this.activeTimers.map(function(c){return c.name})).filter(function(c){return c!=null}),this.activeTimers=n,i&&(this.programTimersStack=null),[4,Promise.all(o)];case 1:return a=l.sent(),u={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:z3(a),getExtraProfileInfo:function(){return a.map(function(c,d){return{name:s[d],ms:c}}).map(function(c){return c.name+": "+c.ms}).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,u]}})})},t.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},t.prototype.startTimer=function(){return q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:mi(),endMs:null}},t.prototype.endTimer=function(e){return q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=mi(),e)},t.prototype.getQueryTime=function(e){return pe(this,void 0,void 0,function(){var n;return me(this,function(r){return q().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(n=e).endMs-n.startMs]})})},t.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e)){if(this.pendingRead.has(e))this.pendingDisposal.add(e);else if(this.texData.has(e)){this.releaseGPUData(e);var n=this.texData.get(e).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.texData.delete(e)}}},t.prototype.releaseGPUData=function(e){var n=this.texData.get(e),r=n.texture,i=n.dtype,o=n.texShape,s=n.usage,a=n.isPacked,u=n.slice,l=u&&u.origDataId||e,c=this.dataRefCount.get(l);c>1?this.dataRefCount.set(l,c-1):(this.dataRefCount.delete(l),r!=null&&(this.numBytesInGPU-=this.computeBytes(o,i),this.textureManager.releaseTexture(r,o,s,a)));var d=this.texData.get(e);d.texture=null,d.texShape=null,d.isPacked=!1,d.slice=null},t.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},t.prototype.getDataInfo=function(e){return this.texData.get(e)},t.prototype.getCPUBackend=function(){return q().getBool("WEBGL_CPU_FORWARD")?(this.cpuBackend==null&&(this.cpuBackend=O.findBackend("cpu")),this.cpuBackend):null},t.prototype.shouldExecuteOnCPU=function(e,n){var r=this;return n===void 0&&(n=128),this.getCPUBackend()!=null&&e.every(function(i){return r.texData.get(i.dataId).texture==null&&i.size<n})},t.prototype.getGPGPUContext=function(){return this.gpgpu},t.prototype.complex=function(e,n){var r=this.makeOutputArray(e.shape,"complex64");return this.texData.get(r.dataId).complexTensors={real:O.keep(e.clone()),imag:O.keep(n.clone())},r},t.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},t.prototype.slice=function(e,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,n,r);if(ve(r)===0)return Xt([],r,e.dtype);var i=this.texData.get(e.dataId).isPacked,o=J$(e.shape,n,r);if(i||!o){var s=q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Qae(r):new Xae(r),a=s.getCustomSetupFunc(n);return this.compileAndRun(s,[e],null,a)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,n,r)},t.prototype.shallowSlice=function(e,n,r){var i=this.texData.get(e.dataId),o=ie.make(r,{},e.dtype,this),s=this.texData.get(o.dataId);Object.assign(s,i),s.shape=r,s.dtype=e.dtype;var a=Z$(n,e.strides);i.slice&&(a+=i.slice.flatOffset),s.slice={flatOffset:a,origDataId:i.slice&&i.slice.origDataId||e.dataId};var u=this.dataRefCount.get(s.slice.origDataId)||1;return this.dataRefCount.set(s.slice.origDataId,u+1),o},t.prototype.stridedSlice=function(e,n,r,i){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,n,r,i);var o=eC(n,r,i);if(o.some(function(a){return a===0}))return Xt([],o);var s=new Jae(n,i,o);return this.compileAndRun(s,[e])},t.prototype.reverse=function(e,n){var r=q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Gae(e.shape,n):new Hae(e.shape,n);return this.compileAndRun(r,[e])},t.prototype.concat=function(e,n){if(e[0].dtype==="complex64"){var r=e.map(function(h){return fr(h)}),i=e.map(function(h){return Xr(h)});return Kt(this.concat(r,n),this.concat(i,n))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,n);if(e.length===1)return e[0];if(e.length>q().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var o=Math.floor(e.length/2),s=this.concat(e.slice(0,o),n),a=this.concat(e.slice(o),n);return this.concat([s,a],n)}if(q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var u=new nae(e.map(function(h){return h.shape}),n);return this.compileAndRun(u,e)}var l=Iu(e.map(function(h){return h.shape}),n),c=e.map(function(h){return h.as2D(-1,ve(h.shape.slice(n)))}),d=new tae(c.map(function(h){return h.shape}));return this.compileAndRun(d,c).reshape(l)},t.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,C2,e.dtype);var n=new Ne(e.shape,C2);return this.compileAndRun(n,[e])},t.prototype.batchMatMul=function(e,n,r,i){var o=r?e.shape[2]:e.shape[1],s=i?n.shape[1]:n.shape[2],a=r?e.shape[1]:e.shape[2],u=e.shape[0];if((o===1||s===1)&&a>1e3){r&&(e=e.transpose([0,2,1])),i&&(n=n.transpose([0,2,1]));var l=s===1?e:e.as3D(u,a,1),c=s===1?2:1,d=s===1?n.as3D(u,1,a):n;return this.multiply(l,d).sum(c,!0)}var h=zt(e.dtype,n.dtype),f=new ub(e.shape,[u,o,s],r,i),m=this.makePackedTensor(f.outputShape,h);return this.compileAndRun(f,[e,n],m)},t.prototype.fusedBatchMatMul=function(e){var n=e.a,r=e.b,i=e.transposeA,o=e.transposeB,s=e.bias,a=e.activation,u=e.preluActivationWeights,l=i?n.shape[2]:n.shape[1],c=o?r.shape[1]:r.shape[2],d=n.shape[0],h=zt(n.dtype,r.dtype),f=s!=null,m=u!=null,v=a?lm(a,!0):null,y=new ub(n.shape,[d,l,c],i,o,f,v,m),g=this.makePackedTensor(y.outputShape,h),w=[n,r];return s&&w.push(s),u&&w.push(u),this.compileAndRun(y,w,g)},t.prototype.multiply=function(e,n){if(e.dtype==="complex64"){var r=this.texData.get(e.dataId),i=this.texData.get(n.dataId),o=new p2(Xse,e.shape,n.shape),s=new p2(Qse,e.shape,n.shape),a=[this.makeComplexComponentTensorHandle(e,r.complexTensors.real),this.makeComplexComponentTensorHandle(e,r.complexTensors.imag),this.makeComplexComponentTensorHandle(n,i.complexTensors.real),this.makeComplexComponentTensorHandle(n,i.complexTensors.imag)],u=this.compileAndRun(o,a),l=this.compileAndRun(s,a),c=this.complex(u,l);return u.dispose(),l.dispose(),c}if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.multiply(e,n);if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,m2,e.dtype);var d=new Ct(m2,e.shape,n.shape),h=this.makeOutputArray(d.outputShape,e.dtype);return this.compileAndRun(d,[e,n],h)},t.prototype.batchNormalization=function(e,n,r,i,o,s){var a=[e,n,r],u=null;s!=null&&(u=s.shape,a.push(s));var l=null;if(o!=null&&(l=o.shape,a.push(o)),q().getBool("WEBGL_PACK_NORMALIZATION")){var c=new Yse(e.shape,n.shape,r.shape,u,l,i);return this.compileAndRun(c,a)}var d=new Kse(e.shape,n.shape,r.shape,u,l,i);return this.compileAndRun(d,a)},t.prototype.localResponseNormalization4D=function(e,n,r,i,o){var s=q().getBool("WEBGL_PACK_NORMALIZATION")?new Nae(e.shape,n,r,i,o):new Aae(e.shape,n,r,i,o);return this.compileAndRun(s,[e])},t.prototype.LRNGrad=function(e,n,r,i,o,s,a){var u=new Rae(n.shape,i,o,s,a);return this.compileAndRun(u,[n,r,e])},t.prototype.tile=function(e,n){if(e.dtype==="string"){var r=this.readSync(e.dataId).map(function(o){return mf(o)});return nB(ke(e.shape,e.dtype,r),n)}var i=new eue(e.shape,n);return this.compileAndRun(i,[e])},t.prototype.pad=function(e,n,r){var i=q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new Fae(e.shape,n,r):new Vae(e.shape,n,r);return this.compileAndRun(i,[e])},t.prototype.transpose=function(e,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,n);var r=q().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new nue(e.shape,n):new tue(e.shape,n);return this.compileAndRun(r,[e])},t.prototype.gather=function(e,n,r){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.gather(e,n,r);var i=new Tae(e.shape,n.size,r);return this.compileAndRun(i,[e,n])},t.prototype.batchToSpaceND=function(e,n,r){A(e.rank<=4,function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"});var i=n.reduce(function(c,d){return c*d}),o=lv(e.shape,n,i),s=cv(o.length,n.length),a=dv(e.shape,n,i),u=K$(r,n.length),l=Y$(a,r,n.length);return e.reshape(o).transpose(s).reshape(a).slice(u,l)},t.prototype.spaceToBatchND=function(e,n,r){A(e.rank<=4,function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"});var i=n.reduce(function(d,h){return d*h}),o=[[0,0]];o.push.apply(o,r);for(var s=1+n.length;s<e.shape.length;++s)o.push([0,0]);var a=e.pad(o),u=lv(a.shape,n,i,!1),l=cv(u.length,n.length,!1),c=dv(a.shape,n,i,!1);return a.reshape(u).transpose(l).reshape(c)},t.prototype.reduce=function(e,n,r){var i=e.shape[0],o=e.shape[1],s=ob(o),a=new $ae({windowSize:s,inSize:o,batchSize:i},n),u=a.outputShape,l=u[0],c=u[1],d=this.makeOutputArray([l,c],r);return this.compileAndRun(a,[e],d),d.shape[1]===1?d:this.reduce(d,n,r)},t.prototype.argReduce=function(e,n,r){r===void 0&&(r=null);var i=e.shape[0],o=e.shape[1];r!=null&&(i=r.shape[0],o=r.shape[1]);var s=ob(o),a=new $se({windowSize:s,inSize:o,batchSize:i},n,r==null),u=a.outputShape,l=u[0],c=u[1],d=this.makeOutputArray([l,c],"int32"),h=[e];return r!=null&&h.push(r),this.compileAndRun(a,h,d),d.shape[1]===1?d:this.argReduce(e,n,d)},t.prototype.argReducePacked=function(e,n,r){r===void 0&&(r=null);var i=r!=null?r.shape:e.shape,o=ob(i[i.length-1]),s=new qse(i,o,n,r==null),a=this.makePackedTensor(s.outputShape,"int32"),u=r==null?[e]:[e,r];return this.compileAndRun(s,u,a),a.rank===e.rank?this.argReducePacked(e,n,a):a},t.prototype.sum=function(e,n){dr("sum",n,e.rank);var r=wn(e.shape,n),i=r[0],o=ve(r[1]),s=e.as2D(-1,o),a=tb(e.dtype);return this.reduce(s,"sum",a).reshape(i)},t.prototype.prod=function(e,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,n);var r=wn(e.shape,n),i=r[0],o=ve(r[1]),s=e.as2D(-1,o),a=tb(e.dtype);return this.reduce(s,"prod",a).reshape(i)},t.prototype.unsortedSegmentSum=function(e,n,r){var i=0,o=Ci([i],e.rank),s=e;o!=null&&(s=e.transpose(o),i=ki(1,e.rank)[0]);var a=function(h,f,m){for(var v=[],y=h.length,g=0;g<y;g++)g!==f?v.push(h[g]):v.push(m);return v}(s.shape,i,r),u=ve([s.shape[i]]),l=s.as2D(-1,u),c=tb(e.dtype),d=this.segOpCompute(l,"unsortedSegmentSum",n,c,r).reshape(a);return o!=null&&(d=d.transpose(l0(o))),d},t.prototype.segOpCompute=function(e,n,r,i,o){var s=e.shape[0],a=e.shape[1],u=function(m,v){var y,g=!1;for(m<=Q$?(y=m,g=!0):y=uv(m,Math.floor(Math.sqrt(m)));!g;)y>v||y===m?g=!0:y=uv(m,y+1);return y}(a,o),l=new Kae({windowSize:u,inSize:a,batchSize:s,numSegments:o},n),c=l.outputShape,d=c[0],h=c[1],f=this.makeOutputArray([d,h],i);return this.compileAndRun(l,[e,r],f),f.shape[1]===o?f:(r=c0(0,o).tile([a/u]),this.segOpCompute(f,n,r,i,o))},t.prototype.argMinMaxReduce=function(e,n,r){var i=[n];if(dr("arg"+r.charAt(0).toUpperCase()+r.slice(1),i,e.rank),!q().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var o=wn(e.shape,i),s=o[0],a=ve(o[1]),u=e.as2D(-1,a);return this.argReduce(u,r).reshape(s)}return this.argReducePacked(e,r)},t.prototype.argMin=function(e,n){return this.argMinMaxReduce(e,n,"min")},t.prototype.argMax=function(e,n){return this.argMinMaxReduce(e,n,"max")},t.prototype.cumsum=function(e,n,r,i){if(n!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+n);var o=new dae(e.shape,r,i);return this.compileAndRun(o,[e])},t.prototype.equal=function(e,n){if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,"\n  return vec4(equal(a, b));\n","bool");var r=new Ct("return float(a == b);",e.shape,n.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],i)},t.prototype.notEqual=function(e,n){if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,"\n  return vec4(notEqual(a, b));\n","bool");var r=new Ct("return float(a != b);",e.shape,n.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],i)},t.prototype.less=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.less(e,n);if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,"\n  return vec4(lessThan(a, b));\n","bool");var r=new Ct("return float(a < b);",e.shape,n.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],i)},t.prototype.lessEqual=function(e,n){if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,"\n  return vec4(lessThanEqual(a, b));\n","bool");var r=new Ct("return float(a <= b);",e.shape,n.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],i)},t.prototype.greater=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.greater(e,n);if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,"\n  return vec4(greaterThan(a, b));\n","bool");var r=new Ct("return float(a > b);",e.shape,n.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],i)},t.prototype.greaterEqual=function(e,n){if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var r=new Ct("return float(a >= b);",e.shape,n.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],i)},t.prototype.logicalNot=function(e){var n=new Ne(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(n,[e])},t.prototype.logicalAnd=function(e,n){if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var r=new Ct("return float(a >= 1.0 && b >= 1.0);",e.shape,n.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],i)},t.prototype.logicalOr=function(e,n){if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var r=new Ct("return float(a >= 1.0 || b >= 1.0);",e.shape,n.shape),i=this.makeOutputArray(r.outputShape,"bool");return this.compileAndRun(r,[e,n],i)},t.prototype.select=function(e,n,r){var i=new Yae(e.rank,n.shape,n.rank),o=this.makeOutputArray(i.outputShape,zt(n.dtype,r.dtype));return this.compileAndRun(i,[e,n,r],o)},t.prototype.where=function(e){F_("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var n=e.dataSync();return aC(e.shape,n)},t.prototype.topk=function(e,n,r){return rB(e.dataSync(),e.shape,e.dtype,n)},t.prototype.min=function(e,n){dr("min",n,e.rank);var r=wn(e.shape,n),i=r[0],o=ve(r[1]),s=e.as2D(-1,o);return this.reduce(s,"min",s.dtype).reshape(i)},t.prototype.minimum=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.minimum(e,n);var r=q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lo("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,n.shape):new Ct("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.mod=function(e,n){var r=q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lo("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,n.shape):new Ct("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.max=function(e,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,n);dr("max",n,e.rank);var r=wn(e.shape,n),i=r[0],o=ve(r[1]),s=e.as2D(-1,o);return this.reduce(s,"max",s.dtype).reshape(i)},t.prototype.maximum=function(e,n){if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.maximum(e,n);var r=q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lo("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,n.shape):new Ct("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.all=function(e,n){dr("all",n,e.rank);var r=wn(e.shape,n),i=r[0],o=ve(r[1]),s=e.as2D(-1,o);return this.reduce(s,"all",s.dtype).reshape(i)},t.prototype.any=function(e,n){dr("any",n,e.rank);var r=wn(e.shape,n),i=r[0],o=ve(r[1]),s=e.as2D(-1,o);return this.reduce(s,"any",s.dtype).reshape(i)},t.prototype.squaredDifference=function(e,n){var r=q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lo("return (a - b) * (a - b);",e.shape,n.shape):new Ct("return (a - b) * (a - b);",e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.realDivide=function(e,n){if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var r=new Ct("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,n.shape),i=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[e,n],i)},t.prototype.floorDiv=function(e,n){if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var r=new Ct("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,n.shape),i=this.makeOutputArray(r.outputShape,"int32");return this.compileAndRun(r,[e,n],i)},t.prototype.add=function(e,n){if(e.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(e,n,sb);if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.add(e,n);var r=zt(e.dtype,n.dtype);if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,sb,r);var i=new Ct(sb,e.shape,n.shape),o=this.makeOutputArray(i.outputShape,r);return this.compileAndRun(i,[e,n],o)},t.prototype.packedUnaryOp=function(e,n,r){var i=new Sd(e.shape,n),o=this.makePackedTensor(i.outputShape,r);return this.compileAndRun(i,[e],o)},t.prototype.packedBinaryOp=function(e,n,r,i,o){o===void 0&&(o=!1);var s=new lo(r,e.shape,n.shape,o),a=this.makePackedTensor(s.outputShape,i);return this.compileAndRun(s,[e,n],a)},t.prototype.complexSeparableBinaryOp=function(e,n,r){var i=this,o=this.texData.get(e.dataId),s=this.texData.get(n.dataId),a=[[o.complexTensors.real,s.complexTensors.real],[o.complexTensors.imag,s.complexTensors.imag]].map(function(d){var h=d[0],f=d[1],m=i.makeComplexComponentTensorHandle(e,h),v=i.makeComplexComponentTensorHandle(n,f),y=new Ct(r,e.shape,n.shape),g=i.makeOutputArray(y.outputShape,zt(h.dtype,f.dtype));return i.compileAndRun(y,[m,v],g)}),u=a[0],l=a[1],c=this.complex(u,l);return u.dispose(),l.dispose(),c},t.prototype.makeComplexComponentTensorHandle=function(e,n){return{dataId:n.dataId,dtype:n.dtype,shape:e.shape}},t.prototype.addN=function(e){if(e.length===1)return e[0];if(e.length>q().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var n=Math.floor(e.length/2),r=this.addN(e.slice(0,n)),i=this.addN(e.slice(n));return this.addN([r,i])}var o=e.map(function(c){return c.dtype}).reduce(function(c,d){return zt(c,d)}),s=e.map(function(c){return c.shape}),a=q().getBool("WEBGL_PACK"),u=a?new Fse(e[0].shape,s):new Vse(e[0].shape,s),l=a?this.makePackedTensor(u.outputShape,o):this.makeOutputArray(u.outputShape,o);return this.compileAndRun(u,e,l)},t.prototype.subtract=function(e,n){if(e.dtype==="complex64"&&n.dtype==="complex64")return this.complexSeparableBinaryOp(e,n,ab);if(this.shouldExecuteOnCPU([e,n]))return this.cpuBackend.subtract(e,n);var r=zt(e.dtype,n.dtype);if(q().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,n,ab,e.dtype);var i=new Ct(ab,e.shape,n.shape),o=this.makeOutputArray(i.outputShape,r);return this.compileAndRun(i,[e,n],o)},t.prototype.pow=function(e,n){var r=q().getBool("WEBGL_PACK_BINARY_OPERATIONS"),i=r?new lo("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,n.shape):new Ct("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,n.shape),o=zt(e.dtype,n.dtype),s=r?this.makePackedTensor(i.outputShape,o):this.makeOutputArray(i.outputShape,o);return this.compileAndRun(i,[e,n],s)},t.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,k2,e.dtype);var n=new Ne(e.shape,k2);return this.compileAndRun(n,[e])},t.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,S2,e.dtype);var n=new Ne(e.shape,S2);return this.compileAndRun(n,[e])},t.prototype.sign=function(e){var n=new Ne(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(n,[e])},t.prototype.isNaN=function(e){var n=new Ne(e.shape,"return float(isnan(x));"),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e],r)},t.prototype.isInf=function(e){var n=new Ne(e.shape,"return float(isinf(x));"),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e],r)},t.prototype.isFinite=function(e){var n=new Ne(e.shape,"return float(!isnan(x) && !isinf(x));"),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e],r)},t.prototype.round=function(e){var n=new Ne(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(n,[e])},t.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,A2,e.dtype);var n=new Ne(e.shape,A2);return this.compileAndRun(n,[e])},t.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,R2,e.dtype);var n=new Ne(e.shape,R2);return this.compileAndRun(n,[e])},t.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var n=new Ne(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(n,[e])},t.prototype.log1p=function(e){var n=new Ne(e.shape,"return log(1.0 + x);");return this.compileAndRun(n,[e])},t.prototype.sqrt=function(e){var n=new Ne(e.shape,"return sqrt(x);");return this.compileAndRun(n,[e])},t.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var n=new Ne(e.shape,"return inversesqrt(x);");return this.compileAndRun(n,[e])},t.prototype.square=function(e){var n=new Ne(e.shape,"return x * x;");return this.compileAndRun(n,[e])},t.prototype.reciprocal=function(e){var n=new Ne(e.shape,"return 1.0 / x;");return this.compileAndRun(n,[e])},t.prototype.relu=function(e){var n;return n=q().getBool("WEBGL_PACK")?new Sd(e.shape,AB):new Ne(e.shape,CB),this.compileAndRun(n,[e])},t.prototype.relu6=function(e){var n;return n=q().getBool("WEBGL_PACK")?new Sd(e.shape,RB):new Ne(e.shape,kB),this.compileAndRun(n,[e])},t.prototype.prelu=function(e,n){var r=q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lo(uB,e.shape,n.shape):new Ct(aB,e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.elu=function(e){if(q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,NB,e.dtype);var n=new Ne(e.shape,SB);return this.compileAndRun(n,[e])},t.prototype.eluDer=function(e,n){var r=q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lo("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,n.shape):new Ct("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.selu=function(e){var n=new Ne(e.shape,iue);return this.compileAndRun(n,[e])},t.prototype.int=function(e){var n=new Ne(e.shape,"return float(int(x));"),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[e],r)},t.prototype.clip=function(e,n,r){var i,o=(i=q().getBool("WEBGL_PACK_CLIP")?new Zse(e.shape):new Jse(e.shape)).getCustomSetupFunc(n,r);return this.compileAndRun(i,[e],null,o)},t.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(q().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,T2,e.dtype);var n=new Ne(e.shape,T2);return this.compileAndRun(n,[e])},t.prototype.complexAbs=function(e){var n=this.texData.get(e.dataId),r=new eae(e.shape),i=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag)];return this.compileAndRun(r,i)},t.prototype.sigmoid=function(e){var n=new Ne(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(n,[e])},t.prototype.softplus=function(e){var n=new Ne(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(n,[e])},t.prototype.sin=function(e){var n=new Ne(e.shape,oue);return this.compileAndRun(n,[e])},t.prototype.cos=function(e){var n=new Ne(e.shape,sue);return this.compileAndRun(n,[e])},t.prototype.tan=function(e){var n=new Ne(e.shape,"return tan(x);");return this.compileAndRun(n,[e])},t.prototype.asin=function(e){var n=new Ne(e.shape,aue);return this.compileAndRun(n,[e])},t.prototype.acos=function(e){var n=new Ne(e.shape,uue);return this.compileAndRun(n,[e])},t.prototype.atan=function(e){var n=new Ne(e.shape,lue);return this.compileAndRun(n,[e])},t.prototype.atan2=function(e,n){var r=q().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new lo("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,n.shape):new Ct("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,n.shape);return this.compileAndRun(r,[e,n])},t.prototype.sinh=function(e){var n=new Ne(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(n,[e])},t.prototype.cosh=function(e){var n=new Ne(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(n,[e])},t.prototype.tanh=function(e){var n=new Ne(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(n,[e])},t.prototype.asinh=function(e){var n=new Ne(e.shape,cue);return this.compileAndRun(n,[e])},t.prototype.acosh=function(e){var n=new Ne(e.shape,due);return this.compileAndRun(n,[e])},t.prototype.atanh=function(e){var n=new Ne(e.shape,hue);return this.compileAndRun(n,[e])},t.prototype.erf=function(e){var n=new Ne(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(n,[e])},t.prototype.step=function(e,n){var r=new Ne(e.shape,function(i){return i===void 0&&(i=0),Si+"\n    return x > 0.0 ? 1.0 : float("+i+");\n  "}(n));return this.compileAndRun(r,[e])},t.prototype.conv2dByMatMul=function(e,n,r,i,o,s){var a=e.shape,u=this.texData.get(e.dataId),l=r.inChannels,c=a[0]*a[1]*a[2],d=r.outChannels,h=r.dataFormat==="channelsLast",f=(c===1||d===1)&&l>1e3,m=a[2]%2!=0&&!!u.isPacked;if(f||!q().getBool("WEBGL_LAZILY_UNPACK")||!q().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!m){var v=h?a[0]*a[1]*a[2]:a[0]*a[2]*a[3],y=this.reshape(e,[1,v,r.inChannels]),g=this.reshape(n,[1,r.inChannels,r.outChannels]);return this.reshape(this.fusedBatchMatMul({a:y,b:g,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:s}),r.outShape)}var w=h?a[0]*a[1]*(a[2]+1):a[0]*a[2]*(a[3]+1),b=ie.make([1,w,r.inChannels],{dataId:e.dataId},e.dtype,this),x=u.shape;u.shape=u.shape.slice(),u.shape[u.shape.length-2]++,A(Ud(u.shape,b.shape),function(){return"packed reshape "+u.shape+" to "+b.shape+" isn't free"});var _=this.reshape(n,[1,r.inChannels,r.outChannels]),E=this.fusedBatchMatMul({a:b,b:_,transposeA:!1,transposeB:!1,bias:i,activation:o,preluActivationWeights:s}),I=this.texData.get(E.dataId);return A(I.isPacked,function(){return"batchMatMul result is expected to be packed"}),u.shape=x,I.shape=r.outShape,ie.make(r.outShape,{dataId:E.dataId},E.dtype,this)},t.prototype.conv2dWithIm2Row=function(e,n,r,i,o,s){var a=r.filterWidth,u=r.filterHeight,l=r.inChannels,c=r.outWidth,d=r.outHeight,h=r.dataFormat==="channelsLast",f=a*u*l,m=d*c,v=[f,m],y=e.squeeze([0]),g=n.reshape([1,f,-1]),w=new Sae(v,y.shape,r),b=this.compileAndRun(w,[y]).reshape([1,v[0],v[1]]),x=i!=null,_=s!=null,E=o?lm(o,!0):null,I=new ub(b.shape,[1,m,r.outChannels],!0,!1,x,E,_),C=[b,g];i&&C.push(i),_&&C.push(s);var S=this.compileAndRun(I,C);return h?S.reshape([1,d,c,r.outChannels]):S.reshape([1,r.outChannels,d,c])},t.prototype.fusedConv2d=function(e){var n=e.input,r=e.filter,i=e.convInfo,o=e.bias,s=e.activation,a=e.preluActivationWeights;if(i.filterHeight===1&&i.filterWidth===1&&i.dilationHeight===1&&i.dilationWidth===1&&i.strideHeight===1&&i.strideWidth===1&&(i.padInfo.type==="SAME"||i.padInfo.type==="VALID"))return this.conv2dByMatMul(n,r,i,o,s,a);if(q().getBool("WEBGL_CONV_IM2COL")&&n.shape[0]===1)return this.conv2dWithIm2Row(n,r,i,o,s,a);var u=o!=null,l=a!=null,c=s?lm(s,!1):null,d=new g2(i,u,c,l),h=[n,r];return o&&h.push(o),a&&h.push(a),this.compileAndRun(d,h)},t.prototype.conv2d=function(e,n,r){if(r.filterHeight===1&&r.filterWidth===1&&r.dilationHeight===1&&r.dilationWidth===1&&r.strideHeight===1&&r.strideWidth===1&&(r.padInfo.type==="SAME"||r.padInfo.type==="VALID"))return this.conv2dByMatMul(e,n,r);if(q().getBool("WEBGL_CONV_IM2COL")&&e.shape[0]===1)return this.conv2dWithIm2Row(e,n,r);var i=new g2(r);return this.compileAndRun(i,[e,n])},t.prototype.conv2dDerInput=function(e,n,r){var i=new iae(r);return this.compileAndRun(i,[e,n])},t.prototype.conv2dDerFilter=function(e,n,r){var i=new rae(r);return this.compileAndRun(i,[e,n])},t.prototype.fusedDepthwiseConv2D=function(e){var n,r=e.input,i=e.filter,o=e.convInfo,s=e.bias,a=e.activation,u=e.preluActivationWeights,l=q().getBool("WEBGL_PACK_DEPTHWISECONV")&&o.strideWidth<=2&&o.outChannels/o.inChannels==1,c=a?lm(a,l):null,d=[r,i],h=s!=null,f=u!=null;return h&&d.push(s),f&&d.push(u),l?(n=new y2(o,h,c,f),this.compileAndRun(n,d,this.makePackedTensor(o.outShape,r.dtype))):(n=new v2(o,h,c,f),this.compileAndRun(n,d))},t.prototype.depthwiseConv2D=function(e,n,r){var i;return q().getBool("WEBGL_PACK_DEPTHWISECONV")&&r.strideWidth<=2&&r.outChannels/r.inChannels==1?(i=new y2(r),this.compileAndRun(i,[e,n],this.makePackedTensor(r.outShape,e.dtype))):(i=new v2(r),this.compileAndRun(i,[e,n]))},t.prototype.depthwiseConv2DDerInput=function(e,n,r){var i=new uae(r);return this.compileAndRun(i,[e,n])},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){var i=new aae(r);return this.compileAndRun(i,[e,n])},t.prototype.conv3d=function(e,n,r){var i=new lae(r);return this.compileAndRun(i,[e,n])},t.prototype.conv3dDerInput=function(e,n,r){var i=new sae(r);return this.compileAndRun(i,[e,n])},t.prototype.conv3dDerFilter=function(e,n,r){var i=new oae(r);return this.compileAndRun(i,[e,n])},t.prototype.maxPool=function(e,n){var r=new lb(n,"max",!1),i=this.makeOutputArray(r.outputShape,e.dtype);return this.compileAndRun(r,[e],i)},t.prototype.avgPool=function(e,n){var r=new lb(n,"avg",!1),i=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[e],i)},t.prototype.maxPoolBackprop=function(e,n,r,i){var o=new lb(i,"max",!0),s=this.compileAndRun(o,[n]),a=new Pae(i),u=this.makeOutputArray(a.outputShape,n.dtype),l=this.compileAndRun(a,[e,s],u);return s.dispose(),l},t.prototype.avgPoolBackprop=function(e,n,r){var i=new Hse(r),o=this.makeOutputArray(i.outputShape,n.dtype);return this.compileAndRun(i,[e],o)},t.prototype.cast=function(e,n){return iC(e,n,this)},t.prototype.unstack=function(e,n){for(var r=e.shape[n],i=new Array(e.rank-1),o=0,s=0;s<e.rank;s++)s!==n&&(i[o++]=e.shape[s]);var a=new Array(e.rank).fill(0),u=e.shape.slice();u[n]=1;var l=new Array(r);for(s=0;s<l.length;s++)a[n]=s,l[s]=this.slice(e,a,u).reshape(i);return l},t.prototype.avgPool3d=function(e,n){var r=new cb(n,"avg",!1),i=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[e],i)},t.prototype.avgPool3dBackprop=function(e,n,r){var i=new Gse(r),o=this.makeOutputArray(i.outputShape,n.dtype);return this.compileAndRun(i,[e],o)},t.prototype.maxPool3d=function(e,n){var r=new cb(n,"max",!1),i=this.makeOutputArray(r.outputShape,"float32");return this.compileAndRun(r,[e],i)},t.prototype.maxPool3dBackprop=function(e,n,r,i){var o=new cb(i,"max",!0),s=this.compileAndRun(o,[n]),a=new Dae(i),u=this.makeOutputArray(a.outputShape,n.dtype),l=this.compileAndRun(a,[e,s],u);return s.dispose(),l},t.prototype.reshape=function(e,n){var r=this.texData.get(e.dataId);return!r.isPacked||Ud(e.shape,n)||r.texture!==null&&Ud(r.shape,n)?pv(e,n):this.packedReshape(e,n)},t.prototype.resizeBilinear=function(e,n,r,i){var o=q().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new zae(e.shape,n,r,i):new Uae(e.shape,n,r,i);return this.compileAndRun(o,[e])},t.prototype.resizeBilinearBackprop=function(e,n,r){var i=new jae(e,n,r);return this.compileAndRun(i,[e])},t.prototype.resizeNearestNeighbor=function(e,n,r,i){var o=new qae(e.shape,n,r,i);return this.compileAndRun(o,[e])},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){var i=new Wae(e,n,r);return this.compileAndRun(i,[e])},t.prototype.multinomial=function(e,n,r,i){var o=n?e:hp(e),s=o.shape[0],a=o.shape[1],u=new Oae(s,a,r),l=this.makeOutputArray(u.outputShape,"int32"),c=u.getCustomSetupFunc(i);return this.compileAndRun(u,[o],l,c)},t.prototype.oneHot=function(e,n,r,i){var o=new Lae(e.size,n,r,i);return this.compileAndRun(o,[e])},t.prototype.diag=function(e){var n=new mae(e.size);return this.compileAndRun(n,[e])},t.prototype.nonMaxSuppression=function(e,n,r,i,o){return F_("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),sC(e.dataSync(),n.dataSync(),r,i,o)},t.prototype.cropAndResize=function(e,n,r,i,o,s){var a=new cae(e.shape,n.shape,i,o,s);return this.compileAndRun(a,[e,n,r])},t.prototype.depthToSpace=function(e,n,r){A(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});var i=e.shape[0],o=r==="NHWC"?e.shape[1]:e.shape[2],s=r==="NHWC"?e.shape[2]:e.shape[3],a=r==="NHWC"?e.shape[3]:e.shape[1],u=o*n,l=s*n,c=a/(n*n),d=new pae(r==="NHWC"?[i,u,l,c]:[i,c,u,l],n,r);return this.compileAndRun(d,[e])},t.prototype.split=function(e,n,r){return tB(e,n,r)},t.prototype.scatterND=function(e,n,r){var i=hv(0,e,r),o=i.sliceRank,s=i.numUpdates,a=i.sliceSize,u=i.strides,l=i.outputSize,c=[l/a,a],d=e.reshape([s,o]),h=n.reshape([s,a]);if(l===0)return pv(Xt([]),r);var f=ge(0),m=new _2(s,o,d.rank,h.rank,u,c);return this.compileAndRun(m,[h,d,f]).reshape(r)},t.prototype.sparseToDense=function(e,n,r,i){var o=hv(0,e,r),s=o.sliceRank,a=o.numUpdates,u=o.strides,l=o.outputSize,c=new _2(a,s,e.rank,n.rank,u,[l,1],!1);return this.compileAndRun(c,[n,e,i]).reshape(r)},t.prototype.fft=function(e){return this.fftImpl(e,!1)},t.prototype.ifft=function(e){return this.fftImpl(e,!0)},t.prototype.fftImpl=function(e,n){var r=this.texData.get(e.dataId),i=new b2(bae,e.shape,n),o=new b2(xae,e.shape,n),s=[this.makeComplexComponentTensorHandle(e,r.complexTensors.real),this.makeComplexComponentTensorHandle(e,r.complexTensors.imag)],a=this.compileAndRun(i,s),u=this.compileAndRun(o,s),l=this.complex(a,u).as2D(e.shape[0],e.shape[1]);return a.dispose(),u.dispose(),l},t.prototype.gatherND=function(e,n){var r=n.shape,i=r[r.length-1],o=X$(e,n),s=o[0],a=o[1],u=o[2],l=o[3],c=n.reshape([a,i]),d=e.reshape([e.size/u,u]),h=new Cae(i,l,[a,u]);return this.compileAndRun(h,[d,c]).reshape(s)},t.prototype.fill=function(e,n,r){if((r=r||Xc(n))==="string"){var i=pf(r,ve(e));return i.fill(n),ie.make(e,{values:i},r)}var o=new _ae(e,n),s=o.getCustomSetupFunc(n),a=this.makeOutputArray(e,r);return this.compileAndRun(o,[],a,s)},t.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){return this.fill(e.shape,e.dtype==="string"?"":0,e.dtype)},t.prototype.linspace=function(e,n,r){return oC(e,n,r)},t.prototype.makeOutputArray=function(e,n){return ie.make(e,{},n,this)},t.prototype.makePackedTensor=function(e,n){var r=ie.make(e,{},n,this);return this.texData.get(r.dataId).isPacked=!0,r},t.prototype.unpackTensor=function(e){var n=new pue(e.shape);return this.compileAndRun(n,[e],ie.make(n.outputShape,{},e.dtype,this))},t.prototype.packTensor=function(e){var n=new Mae(e.shape);return this.compileAndRun(n,[e],this.makePackedTensor(e.shape,e.dtype),null,!0)},t.prototype.packedReshape=function(e,n){var r=e.reshape([gf(e.shape)].concat(vf(e.shape))),i=[gf(n)].concat(vf(n)),o=new Bae(i,r.shape);return this.compileAndRun(o,[r],null,null,!0).reshape(n)},t.prototype.decode=function(e){var n,r=this.texData.get(e),i=r.isPacked,o=r.shape,s=r.dtype,a=Hm(o),u=ib(o),l=this.makeTensorHandle(o,"float32");return this.texData.get(l.dataId).isPacked=!0,this.texData.get(l.dataId).dtype=s,this.texData.get(l.dataId).texShape=u.map(function(c){return 2*c}),n=i?new fae(a,u):new hae(a,u),this.compileAndRun(n,[{shape:a,dtype:s,dataId:e}],l,null,!0),l},t.prototype.compileAndRun=function(e,n,r,i,o){var s=this;if(o===void 0&&(o=!1),r==null&&(r=e.usesPackedTextures?this.makePackedTensor(e.outputShape,n[0].dtype):this.makeOutputArray(e.outputShape,n[0].dtype)),r.size===0)return this.texData.get(r.dataId).values=ff(r.dtype,0),r;var a=n.map(function(f){if(f.dtype==="complex64")throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var m=s.texData.get(f.dataId);if(m.texture==null){if(!e.usesPackedTextures&&ve(f.shape)<=q().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:f.shape,texData:null,isUniform:!0,uniformValues:m.values};e.usesPackedTextures&&(m.isPacked=!0,m.shape=f.shape)}else if(!!m.isPacked!=!!e.usesPackedTextures)f=m.isPacked?s.unpackTensor(f):s.packTensor(f),m=s.texData.get(f.dataId);else if(m.isPacked&&!Ud(m.shape,f.shape)){var v=f,y=f.shape;f.shape=m.shape,f=s.packedReshape(f,y),m=s.texData.get(f.dataId),v.shape=y}return s.uploadToGPU(f.dataId),{shape:f.shape,texData:m,isUniform:!1}});this.uploadToGPU(r.dataId);var u,l={shape:r.shape,texData:this.texData.get(r.dataId),isUniform:!1},c=function(f,m,v){var y="";m.concat(v).forEach(function(b){var x=b.texData!=null&&b.texData.slice!=null&&b.texData.slice.flatOffset>0,_=b.isUniform?"uniform":b.texData.texShape;y+=b.shape+"_"+_+"_"+x});var g=f.userCode,w=f.constructor.name;return w+="_"+y+"_"+g}(e,a,l),d=this.getAndSaveBinary(c,function(){return function(f,m,v,y){var g=m.userCode,w=v.map(function(D,W){var F={logicalShape:D.shape,texShape:D.isUniform?null:D.texData.texShape,isUniform:D.isUniform,isPacked:!D.isUniform&&D.texData.isPacked,flatOffset:null};return D.texData!=null&&D.texData.slice!=null&&D.texData.slice.flatOffset>0&&(F.flatOffset=D.texData.slice.flatOffset),{name:m.variableNames[W],shapeInfo:F}}),b=w.map(function(D){return D.shapeInfo}),x={logicalShape:y.shape,texShape:y.texData.texShape,isUniform:!1,isPacked:y.texData.isPacked,flatOffset:null},_=Bse(w,x,g,m.usesPackedTextures),E=f.createProgram(_),I=null,C=f.getUniformLocation(E,"NAN",!1);q().getNumber("WEBGL_VERSION")===1&&(I=f.getUniformLocation(E,"INFINITY",!1));for(var S={},N=0;N<m.variableNames.length;N++){var R=m.variableNames[N];S[R]=f.getUniformLocation(E,R,!1),S["offset"+R]=f.getUniformLocation(E,"offset"+R,!1)}return{program:m,source:_,webGLProgram:E,uniformLocations:S,inShapeInfos:b,outShapeInfo:x,infLoc:I,nanLoc:C}}(s.gpgpu,e,a,l)}),h=this.activeTimers!=null;return h&&(u=this.startTimer()),function(f,m,v,y,g){x2(m.inShapeInfos,v),x2([m.outShapeInfo],[y]);var w=y.texData.texture,b=y.texData.texShape;y.texData.isPacked?f.setOutputPackedMatrixTexture(w,b[0],b[1]):f.setOutputMatrixTexture(w,b[0],b[1]),f.setProgram(m.webGLProgram),q().getNumber("WEBGL_VERSION")===1&&m.infLoc!==null&&f.gl.uniform1f(m.infLoc,1/0),m.nanLoc!==null&&f.gl.uniform1f(m.nanLoc,NaN),v.forEach(function(x,_){var E=m.program.variableNames[_],I=m.uniformLocations[E],C=m.uniformLocations["offset"+E];if(I!=null)if(x.isUniform)if(ve(x.shape)<2)f.gl.uniform1f(I,x.uniformValues[0]);else{var S=x.uniformValues;S instanceof Float32Array||(S=new Float32Array(S)),f.gl.uniform1fv(I,S)}else x.texData.slice!=null&&C!=null&&f.gl.uniform1i(C,x.texData.slice.flatOffset),f.setInputMatrixTexture(x.texData.texture,I,_)}),g!=null&&g(f,m.webGLProgram),f.executeProgram()}(this.gpgpu,d,a,l,i),h&&(u=this.endTimer(u),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(u)})),!q().getBool("WEBGL_LAZILY_UNPACK")&&this.texData.get(r.dataId).isPacked&&o===!1?this.unpackTensor(r):r},t.prototype.getAndSaveBinary=function(e,n){return e in this.binaryCache||(this.binaryCache[e]=n()),this.binaryCache[e]},t.prototype.getTextureManager=function(){return this.textureManager},t.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),this.canvas!=null&&this.canvas.remove!=null?this.canvas.remove():this.canvas=null,this.fromPixels2DContext!=null&&this.fromPixels2DContext.canvas.remove&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},t.prototype.floatPrecision=function(){var e=this;return this.floatPrecisionValue==null&&(this.floatPrecisionValue=Je(function(){if(!q().get("WEBGL_RENDER_FLOAT32_ENABLED")){var n=q().getBool("DEBUG");q().set("DEBUG",!1);var r=e.abs(ge(1e-8)).dataSync()[0];if(q().set("DEBUG",n),r>0)return 32}return 16})),this.floatPrecisionValue},t.prototype.epsilon=function(){return this.floatPrecision()===32?1e-7:1e-4},t.prototype.uploadToGPU=function(e){var n,r=this.texData.get(e),i=r.shape,o=r.dtype,s=r.values,a=r.texture,u=r.usage,l=r.isPacked;if(a==null){var c,d=this.activeTimers!=null;d&&(c=mi());var h=r.texShape;if(h==null&&(h=_$(i,l),r.texShape=h),s!=null){var f=Hm(i),m=void 0,v=h[1],y=h[0],g=s instanceof Uint8Array;l?(v=(n=ap(h[0],h[1]))[0],y=n[1],m=new wae(f,[y,v],g)):m=new yae(f,[y,v],g);var w=this.makeTensorHandle([y,v],o);this.texData.get(w.dataId).usage=g?gi.PIXELS:gi.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(w.dataId),v,y,s);var b=this.makeTensorHandle(m.outputShape,w.dtype);b.size=ve(m.outputShape),this.texData.get(b.dataId).isPacked=l,this.compileAndRun(m,[w],b);var x=this.texData.get(b.dataId);r.texture=x.texture,r.texShape=x.texShape,r.isPacked=x.isPacked,r.usage=x.usage,this.disposeData(w.dataId),this.texData.delete(b.dataId),r.values=null,d&&(this.uploadWaitMs+=mi()-c)}else{var _=this.acquireTexture(h,u,o,l);r.texture=_}}},t.prototype.convertAndCacheOnCPU=function(e,n){var r=this.texData.get(e),i=r.dtype;return this.releaseGPUData(e),n!=null&&(r.values=function(o,s){if(s==="float32"||s==="complex64")return o;if(s==="int32"||s==="bool"){for(var a=s==="int32"?new Int32Array(o.length):new Uint8Array(o.length),u=0;u<a.length;++u)a[u]=Math.round(o[u]);return a}throw new Error("Unknown dtype "+s)}(n,i)),r.values},t.prototype.acquireTexture=function(e,n,r,i){if(this.numBytesInGPU+=this.computeBytes(e,r),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var o=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+o+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,n,i)},t.prototype.computeBytes=function(e,n){return e[0]*e[1]*VT(n)},t}();n$()&&O.registerBackend("webgl",function(){return new PB},2);var dC=P({abs_:function(t){var e=k(t,"x","abs");return e.dtype==="complex64"?O.runKernel(function(n){return n.complexAbs(e)},{$x:e}):O.runKernel(function(n,r){var i=n.abs(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.toFloat().step(-1))}}})}}),hC=P({acos_:function(t){var e=k(t,"x","acos");return O.runKernel(function(n,r){var i=n.acos(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(ge(1).sub(i.toFloat().square()).sqrt()).neg()}}})}}),fC=P({acosh_:function(t){var e=k(t,"x","acosh");return O.runKernel(function(n,r){var i=n.acosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(i.toFloat().square().sub(1).sqrt())}}})}}),pC=P({asin_:function(t){var e=k(t,"x","asin");return O.runKernel(function(n,r){var i=n.asin(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(ge(1).sub(i.toFloat().square()).sqrt())}}})}}),mC=P({asinh_:function(t){var e=k(t,"x","asinh");return O.runKernel(function(n,r){var i=n.asinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.divStrict(ge(1).add(i.toFloat().square()).sqrt())}}})}}),gC=P({atan_:function(t){var e=k(t,"x","atan");return O.runKernel(function(n,r){var i=n.atan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().square().add(1))}}})}}),vC=P({atanh_:function(t){var e=k(t,"x","atanh");return O.runKernel(function(n,r){var i=n.atanh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(ge(1).sub(i.toFloat().square()))}}})}}),yC=P({ceil_:function(t){var e=k(t,"x","ceil");return O.runKernel(function(n){return n.ceil(e)},{$x:e},function(n){return{$x:function(){return Ve(n)}}})}}),wC=P({clipByValue_:function(t,e,n){var r=k(t,"x","clipByValue");return A(e<=n,function(){return"Error in clip: min ("+e+") must be less than or equal to max ("+n+")."}),O.runKernel(function(i,o){var s=i.clip(r,e,n);return o([r]),s},{$x:r},function(i,o){var s=o[0];return{$x:function(){return i.where(s.greaterEqual(e).logicalAnd(s.lessEqual(n)),Ve(i))}}})}}),bC=P({cos_:function(t){var e=k(t,"x","cos");return O.runKernel(function(n,r){var i=n.cos(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().sin().neg().mul(n)}}})}}),xC=P({cosh_:function(t){var e=k(t,"x","cosh");return O.runKernel(function(n,r){var i=n.cosh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().sinh().mulStrict(n)}}})}}),_C=P({erf_:function(t){var e=k(t,"x","erf");return A(e.dtype==="int32"||e.dtype==="float32",function(){return"Input dtype must be `int32` or `float32`."}),e.dtype==="int32"&&(e=e.toFloat()),O.runKernel(function(n,r){var i=n.erf(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}})}}),EC=P({exp_:function(t){var e=k(t,"x","exp");return O.runKernel(function(n,r){var i=n.exp(e);return r([i]),i},{$x:e},function(n,r){return{$x:function(){return n.mulStrict(r[0])}}})}}),IC=P({expm1_:function(t){var e=k(t,"x","expm1");return O.runKernel(function(n,r){var i=n.expm1(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.exp())}}})}}),TC=P({floor_:function(t){var e=k(t,"x","floor");return O.runKernel(function(n){return n.floor(e)},{$x:e},function(n){return{$x:function(){return Ve(n)}}})}}),CC=P({log_:function(t){var e=k(t,"x","log");return O.runKernel(function(n,r){var i=n.log(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat())}}})}}),kC=P({log1p_:function(t){var e=k(t,"x","log1p");return O.runKernel(function(n,r){var i=n.log1p(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.add(1))}}})}}),DB=P({logSigmoid_:function(t){var e=k(t,"x","logSigmoid");return O.runKernel(function(n,r){var i=n.softplus(e.neg()).neg();return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.neg().sigmoid())}}})}}),w0=P({neg_:function(t){var e=k(t,"x","neg");return O.runKernel(function(n){return n.neg(e)},{$x:e},function(n){return{$x:function(){return n.neg()}}})}}),SC=P({reciprocal_:function(t){var e=k(t,"x","reciprocal");return O.runKernel(function(n,r){var i=n.reciprocal(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.square().neg())}}})}}),AC=P({round_:function(t){var e=k(t,"x","round");return O.runKernel(function(n){return n.round(e)},{$x:e},function(n){return{$x:function(){return Ve(n)}}})}}),b0=P({rsqrt_:function(t){var e=k(t,"x","rsqrt");return O.runKernel(function(n,r){var i=n.rsqrt(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.pow(1.5).mul(2)).neg()}}})}}),RC=P({sigmoid_:function(t){var e=k(t,"x","sigmoid");return O.runKernel(function(n,r){var i=n.sigmoid(e);return r([i]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.mul(ge(1).sub(i)))}}})}}),NC=P({sign_:function(t){var e=k(t,"x","sign");return O.runKernel(function(n){return n.sign(e)},{$x:e},function(n){return{$x:function(){return Ve(n)}}})}}),OB=P({isNaN_:function(t){var e=k(t,"x","isNaN");return O.runKernel(function(n){return n.isNaN(e)},{$x:e},function(n){return{$x:function(){return Ve(n)}}})}}),LB=P({isInf_:function(t){var e=k(t,"x","isInf");return O.runKernel(function(n){return n.isInf(e)},{$x:e},function(n){return{$x:function(){return Ve(n)}}})}}),MB=P({isFinite_:function(t){var e=k(t,"x","isFinite");return O.runKernel(function(n){return n.isFinite(e)},{$x:e},function(n){return{$x:function(){return Ve(n)}}})}}),PC=P({sin_:function(t){var e=k(t,"x","sin");return O.runKernel(function(n,r){var i=n.sin(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().cos().mul(n)}}})}}),DC=P({sinh_:function(t){var e=k(t,"x","sinh");return O.runKernel(function(n,r){var i=n.sinh(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return i.toFloat().cosh().mulStrict(n)}}})}}),OC=P({softplus_:function(t){var e=k(t,"x","softplus");return O.runKernel(function(n,r){var i=n.softplus(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.sigmoid())}}})}}),LC=P({sqrt_:function(t){var e=k(t,"x","sqrt");return O.runKernel(function(n,r){var i=n.sqrt(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.toFloat().sqrt().mul(2))}}})}}),MC=P({square_:function(t){var e=k(t,"x","square");return O.runKernel(function(n,r){return r([e]),n.square(e)},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mul(i.toFloat().mul(2))}}})}}),VB=P({step_:function(t,e){e===void 0&&(e=0);var n=k(t,"x","step");return O.runKernel(function(r){return r.step(n,e)},{$x:n},function(r){return{$x:function(){return Ve(r)}}})}}),VC=P({tan_:function(t){var e=k(t,"x","tan");return O.runKernel(function(n,r){var i=n.tan(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.div(i.cos().square())}}})}}),FC=P({tanh_:function(t){var e=k(t,"x","tanh");return O.runKernel(function(n,r){var i=n.tanh(e);return r([i]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return ge(1).sub(i.square()).mulStrict(n)}}})}});function FB(t,e,n,r,i,o){var s,a,u=k(t,"x","batchNorm"),l=k(e,"mean","batchNorm"),c=k(n,"variance","batchNorm");return i!=null&&(s=k(i,"scale","batchNorm")),r!=null&&(a=k(r,"offset","batchNorm")),A(u.rank===2,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),A(l.rank===2||l.rank===1,function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+l.rank+"."}),A(c.rank===2||c.rank===1,function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."}),s!=null&&A(s.rank===2||s.rank===1,function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+s.rank+"."}),a!=null&&A(a.rank===2||a.rank===1,function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+a.rank+"."}),pp(u,l,c,a,s,o)}function $B(t,e,n,r,i,o){var s,a,u=k(t,"x","batchNorm"),l=k(e,"mean","batchNorm"),c=k(n,"variance","batchNorm");return i!=null&&(s=k(i,"scale","batchNorm")),r!=null&&(a=k(r,"offset","batchNorm")),A(u.rank===3,function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+u.rank+"."}),A(l.rank===3||l.rank===1,function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+l.rank+"."}),A(c.rank===3||c.rank===1,function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."}),s!=null&&A(s.rank===3||s.rank===1,function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+s.rank+"."}),a!=null&&A(a.rank===3||a.rank===1,function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+a.rank+"."}),pp(u,l,c,a,s,o)}function BB(t,e,n,r,i,o){var s,a,u=k(t,"x","batchNorm"),l=k(e,"mean","batchNorm"),c=k(n,"variance","batchNorm");return i!=null&&(s=k(i,"scale","batchNorm")),r!=null&&(a=k(r,"offset","batchNorm")),A(u.rank===4,function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+u.rank+"."}),A(l.rank===4||l.rank===1,function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+l.rank+"."}),A(c.rank===4||c.rank===1,function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."}),s!=null&&A(s.rank===4||s.rank===1,function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+s.rank+"."}),a!=null&&A(a.rank===4||a.rank===1,function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+a.rank+"."}),pp(u,l,c,a,s,o)}function pp(t,e,n,r,i,o){o==null&&(o=.001);var s,a,u,l=k(t,"x","batchNorm"),c=k(e,"mean","batchNorm"),d=k(n,"variance","batchNorm");return i!=null&&(s=k(i,"scale","batchNorm")),r!=null&&(a=k(r,"offset","batchNorm")),A(c.rank===d.rank,function(){return"Batch normalization gradient requires mean and variance to have equal ranks."}),A(a==null||c.rank===a.rank,function(){return"Batch normalization gradient requires mean and offset to have equal ranks."}),A(s==null||c.rank===s.rank,function(){return"Batch normalization gradient requires mean and scale to have equal ranks."}),u=l.rank===0||l.rank===1?l.as4D(1,1,1,l.size):l.rank===2?l.as4D(1,1,l.shape[0],l.shape[1]):l.rank===3?l.as4D(1,l.shape[0],l.shape[1],l.shape[2]):l,O.runKernel(function(h,f){var m=h.batchNormalization(u,cm(c),cm(d),o,cm(s),cm(a));return f([l,c,d,s]),m},{$x:l,$mean:c,$variance:d,$scale:s,$offset:a},function(h,f){var m=f,v=m[0],y=m[1],g=m[2],w=m[3],b=w==null?ge(1):w,x=Ot(y.shape,u.shape),_=[];if(y.rank===1){for(var E=0;E<u.shape.length-1;++E)_.push(u.shape[E]);_.push(1)}var I=v.sub(y),C=h.mul(b),S=b0(g.add(ge(o))),N=S.mul(S).mul(S).mul(ge(-.5));return{$x:function(){return y.rank===1?h.mul(eu(S.as4D(1,1,1,y.shape[0]),_)).mul(b).reshape(v.shape):h.mul(S).mul(b).reshape(v.shape)},$mean:function(){var R=S.mul(ge(-1)).mul(C);return y.rank===1&&(R=R.sum(x)),R.reshape(y.shape)},$variance:function(){var R=N.mul(I).mul(C);return y.rank===1&&(R=R.sum(x)),R.reshape(y.shape)},$scale:function(){var R=I.mul(S),D=h.mul(R);return y.rank===1&&(D=D.sum(x)),D.reshape(y.shape)},$offset:function(){var R=h;return y.rank===1&&(R=R.sum(x)),R.reshape(y.shape)}}}).reshape(l.shape)}function cm(t){return t==null?null:t.rank===0?t.as1D():t.rank===1?t:t.rank===2?t.as4D(1,1,t.shape[0],t.shape[1]):t.rank===3?t.as4D(1,t.shape[0],t.shape[1],t.shape[2]):t}function x0(){zT("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var jB=P({batchNormalization2d_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),x0(),FB(t,e,n,o,i,r)}}),UB=P({batchNormalization3d_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),x0(),$B(t,e,n,o,i,r)}}),zB=P({batchNormalization4d_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),x0(),BB(t,e,n,o,i,r)}}),WB=P({batchNormalization_:function(t,e,n,r,i,o){return r===void 0&&(r=.001),x0(),pp(t,e,n,o,i,r)}}),$C=P({batchNorm_:pp}),qB=P({batchNorm2d_:FB}),HB=P({batchNorm3d_:$B}),GB=P({batchNorm4d_:BB}),mp=P({logicalAnd_:function(t,e){var n=k(t,"a","logicalAnd","bool"),r=k(e,"b","logicalAnd","bool");return De(n.shape,r.shape),O.runKernel(function(i){return i.logicalAnd(n,r)},{$a:n,$b:r})}}),BC=P({logicalNot_:function(t){var e=k(t,"x","logicalNot","bool");return O.runKernel(function(n){return n.logicalNot(e)},{$x:e})}}),_0=P({logicalOr_:function(t,e){var n=k(t,"a","logicalOr","bool"),r=k(e,"b","logicalOr","bool");return De(n.shape,r.shape),O.runKernel(function(i){return i.logicalOr(n,r)},{$a:n,$b:r})}}),KB=P({logicalXor_:function(t,e){var n=k(t,"a","logicalXor","bool"),r=k(e,"b","logicalXor","bool");return De(n.shape,r.shape),_0(t,e).logicalAnd(mp(t,e).logicalNot())}}),Cu=P({where_:function(t,e,n){var r=k(e,"a","where"),i=k(n,"b","where"),o=k(t,"condition","where","bool");return $e(r.shape,i.shape,"Error in where: "),o.rank===1?A(o.shape[0]===r.shape[0],function(){return"The first dimension of `a` must match the size of `condition`."}):$e(o.shape,i.shape,"Error in where: "),O.runKernel(function(s,a){var u=s.select(o,r,i);return a([o]),u},{$condition:o,$a:r,$b:i},function(s,a){var u=a[0];return{$condition:function(){return Ve(u).toFloat()},$a:function(){return s.mul(u.cast(s.dtype))},$b:function(){return s.mul(u.logicalNot().cast(s.dtype))}}})}}),E0=function(t){return pe(this,void 0,void 0,function(){var e,n,r;return me(this,function(i){switch(i.label){case 0:return[4,(e=k(t,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=aC(e.shape,n),t!==e&&e.dispose(),[2,r]}})})},_f=P({add_:function(t,e){var n,r=k(t,"a","add"),i=k(e,"b","add");n=Dt(r,i),r=n[0],i=n[1];var o=De(r.shape,i.shape);return O.runKernel(function(s){return s.add(r,i)},{$a:r,$b:i},function(s){return{$a:function(){var a=s,u=Ot(r.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},$b:function(){var a=s,u=Ot(i.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(i.shape)}}})}}),jC=P({addN_:function(t){A(Array.isArray(t),function(){return"The argument passed to tf.addN() must be a list of tensors"}),A(t.length>=1,function(){return"Must pass at least one tensor to tf.addN(), but got "+t.length});var e=t.map(function(i,o){return k(i,"tensors"+o,"addN")}),n=e[0];e.forEach(function(i){if(i.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")}),e.forEach(function(i){if(!an(i.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")});var r=e;return O.runKernel(function(i){return i.addN(e)},r,function(i){var o={};return e.forEach(function(s,a){o[a]=function(){return i.clone()}}),o})}}),YB=P({addStrict_:function(t,e){var n=k(t,"a","addStrict"),r=k(e,"b","addStrict");return $e(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),UC=P({atan2_:function(t,e){var n,r=k(t,"a","atan2"),i=k(e,"b","atan2");n=Dt(r,i),r=n[0],i=n[1];var o=De(r.shape,i.shape);return O.runKernel(function(s,a){var u=s.atan2(r,i);return a([r,i]),u},{$a:r,$b:i},function(s,a){var u=a[0],l=a[1];return{$a:function(){var c=_f(u.square(),l.square()),d=s.mul(l.div(c)),h=Ot(u.shape,o);return h.length>0&&(d=d.sum(h)),d.reshape(u.shape)},$b:function(){var c=_f(u.square(),l.square()),d=w0(s.mul(u.div(c))),h=Ot(l.shape,o);return h.length>0&&(d=d.sum(h)),d.reshape(l.shape)}}})}}),I0=P({div_:function(t,e){var n,r=k(t,"a","div"),i=k(e,"b","div");if(n=Dt(r,i),r=n[0],i=n[1],r.dtype==="int32"&&i.dtype==="int32")return T0(r,i);var o=De(r.shape,i.shape);return O.runKernel(function(s,a){var u=s.realDivide(r,i);return a([r,i]),u},{$a:r,$b:i},function(s,a){var u=a[0],l=a[1];return{$a:function(){var c=s.div(l.toFloat()),d=Ot(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c},$b:function(){var c=s.mul(u.toFloat()),d=Ot(l.shape,o);d.length>0&&(c=c.sum(d).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}})}}),XB=P({divStrict_:function(t,e){var n=k(t,"a","div"),r=k(e,"b","div");return $e(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),T0=P({floorDiv_:function(t,e){var n,r=k(t,"a","floorDiv"),i=k(e,"b","floorDiv");n=Dt(r,i),r=n[0],i=n[1];var o=De(r.shape,i.shape);return O.runKernel(function(s,a){var u=s.floorDiv(r,i);return a([r,i]),u},{$a:r,$b:i},function(s,a){var u=a[0],l=a[1];return{$a:function(){var c=s.div(l.toFloat()),d=Ot(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c},$b:function(){var c=s.mul(u.toFloat()),d=Ot(l.shape,o);d.length>0&&(c=c.sum(d).reshape(l.shape));var h=l.square();return c.div(h.toFloat()).neg()}}})}}),gp=P({maximum_:function(t,e){var n,r=k(t,"a","maximum"),i=k(e,"b","maximum");return n=Dt(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),De(r.shape,i.shape),O.runKernel(function(o,s){var a=o.maximum(r,i);return s([r,i]),a},{$a:r,$b:i},function(o,s){var a=s[0],u=s[1];return{$a:function(){return o.mul(a.greaterEqual(u).toFloat())},$b:function(){return o.mul(a.less(u).toFloat())}}})}}),QB=P({maximumStrict_:function(t,e){var n=k(t,"a","maximumStrict"),r=k(e,"b","maximumStrict");return $e(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),C0=P({minimum_:function(t,e){var n,r=k(t,"a","minimum"),i=k(e,"b","minimum");return n=Dt(r,i),r=n[0],i=n[1],r.dtype==="bool"&&(r=r.toInt(),i=i.toInt()),De(r.shape,i.shape),O.runKernel(function(o,s){var a=o.minimum(r,i);return s([r,i]),a},{$a:r,$b:i},function(o,s){var a=s[0],u=s[1];return{$a:function(){return o.mul(a.lessEqual(u).toFloat())},$b:function(){return o.mul(a.greater(u).toFloat())}}})}}),JB=P({minimumStrict_:function(t,e){var n=k(t,"a","minimumStrict"),r=k(e,"b","minimumStrict");return $e(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),zC=P({mod_:function(t,e){var n,r=k(t,"a","mod"),i=k(e,"b","mod");n=Dt(r,i),r=n[0],i=n[1];var o=De(r.shape,i.shape);return O.runKernel(function(s,a){var u=s.mod(r,i);return a([r,i]),u},{$a:r,$b:i},function(s,a){var u=a[0],l=a[1];return{$a:function(){var c=Ot(u.shape,o);return c.length>0?s.sum(c).reshape(u.shape):s},$b:function(){var c=s.mul(u.div(l).floor().neg()),d=Ot(l.shape,o);return d.length>0?c.sum(d).reshape(l.shape):c}}})}}),ZB=P({modStrict_:function(t,e){var n=k(t,"a","modStrict"),r=k(e,"b","modStrict");return $e(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),k0=P({mul_:function(t,e){var n,r=k(t,"a","mul"),i=k(e,"b","mul");n=Dt(r,i),r=n[0],i=n[1];var o=De(r.shape,i.shape);return O.runKernel(function(s,a){var u=s.multiply(r,i);return a([r,i]),u},{$a:r,$b:i},function(s,a){var u=a[0],l=a[1];return{$a:function(){var c=s.mul(l.toFloat()),d=Ot(u.shape,o);return d.length>0?c.sum(d).reshape(u.shape):c},$b:function(){var c=s.mul(u.toFloat()),d=Ot(l.shape,o);return d.length>0?c.sum(d).reshape(l.shape):c}}})}}),ej=P({mulStrict_:function(t,e){var n=k(t,"a","mul"),r=k(e,"b","mul");return $e(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),Ic=P({pow_:function(t,e){var n=k(t,"base","pow"),r=k(e,"exp","pow"),i=De(n.shape,r.shape);return t=n.cast(zt(n.dtype,r.dtype)),e=r.cast(zt(n.dtype,r.dtype)),O.runKernel(function(o,s){var a=o.pow(n,r);return s([n,r,a]),a},{$base:n,$exp:r},function(o,s){var a=s[0],u=s[1],l=s[2];return{$base:function(){var c=u.toFloat(),d=o.mul(c.mul(a.pow(c.sub(ge(1))))),h=Ot(a.shape,i);return h.length>0&&(d=d.sum(h)),d.reshape(a.shape)},$exp:function(){var c=a.greater(0),d=a.log().where(c,Ve(a)),h=o.mul(l.mul(d)),f=Ot(u.shape,i);return f.length>0&&(h=h.sum(f)),h.reshape(u.shape)}}})}}),tj=P({powStrict_:function(t,e){return $e(t.shape,e.shape,"Error in powStrict: "),t.pow(e)}}),WC=P({squaredDifference_:function(t,e){var n,r=k(t,"a","squaredDifference"),i=k(e,"b","squaredDifference");return n=Dt(r,i),r=n[0],i=n[1],De(r.shape,i.shape),O.runKernel(function(o,s){var a=o.squaredDifference(r,i);return s([r,i]),a},{$a:r,$b:i},function(o,s){var a=s[0],u=s[1],l=ge(2);return{$a:function(){return o.mul(a.sub(u).mul(l))},$b:function(){return o.mul(u.sub(a).mul(l))}}})}}),nj=P({squaredDifferenceStrict_:function(t,e){var n=k(t,"a","squaredDifferenceStrict"),r=k(e,"b","squaredDifferenceStrict");return $e(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),Tc=P({sub_:function(t,e){var n,r=k(t,"a","sub"),i=k(e,"b","sub");n=Dt(r,i),r=n[0],i=n[1];var o=De(r.shape,i.shape);return O.runKernel(function(s){return s.subtract(r,i)},{$a:r,$b:i},function(s){return{$a:function(){var a=s,u=Ot(r.shape,o);return u.length>0&&(a=a.sum(u)),a.reshape(r.shape)},$b:function(){var a=s,u=Ot(i.shape,o);return u.length>0&&(a=a.sum(u)),a.neg().reshape(i.shape)}}})}}),rj=P({subStrict_:function(t,e){var n=k(t,"a","subStrict"),r=k(e,"b","subStrict");return $e(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),S0=P({equal_:function(t,e){var n,r=k(t,"a","equal"),i=k(e,"b","equal");return n=Dt(r,i),r=n[0],i=n[1],De(r.shape,i.shape),O.runKernel(function(o){return o.equal(r,i)},{$a:r,$b:i})}}),ij=P({equalStrict_:function(t,e){var n=k(t,"a","equalStrict"),r=k(e,"b","equalStrict");return $e(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),qC=P({greater_:function(t,e){var n,r=k(t,"a","greater"),i=k(e,"b","greater");return n=Dt(r,i),r=n[0],i=n[1],De(r.shape,i.shape),O.runKernel(function(o){return o.greater(r,i)},{$a:r,$b:i})}}),A0=P({greaterEqual_:function(t,e){var n,r=k(t,"a","greaterEqual"),i=k(e,"b","greaterEqual");return n=Dt(r,i),r=n[0],i=n[1],De(r.shape,i.shape),O.runKernel(function(o,s){var a=o.greaterEqual(r,i);return s([r,i]),a},{$a:r,$b:i},function(o,s){var a=s[0],u=s[1];return{$a:function(){return Ve(a)},$b:function(){return Ve(u)}}})}}),oj=P({greaterEqualStrict_:function(t,e){var n=k(t,"a","greaterEqualStrict"),r=k(e,"b","greaterEqualStrict");return $e(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),sj=P({greaterStrict_:function(t,e){var n=k(t,"a","greaterStrict"),r=k(e,"b","greaterStrict");return $e(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),HC=P({less_:function(t,e){var n,r=k(t,"a","less"),i=k(e,"b","less");return n=Dt(r,i),r=n[0],i=n[1],De(r.shape,i.shape),O.runKernel(function(o){return o.less(r,i)},{$a:r,$b:i})}}),GC=P({lessEqual_:function(t,e){var n,r=k(t,"a","lessEqual"),i=k(e,"b","lessEqual");return n=Dt(r,i),r=n[0],i=n[1],De(r.shape,i.shape),O.runKernel(function(o){return o.lessEqual(r,i)},{$a:r,$b:i})}}),aj=P({lessEqualStrict_:function(t,e){var n=k(t,"a","lessEqualStrict"),r=k(e,"b","lessEqualStrict");return $e(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),uj=P({lessStrict_:function(t,e){var n=k(t,"a","lessStrict"),r=k(e,"b","lessStrict");return $e(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),KC=P({notEqual_:function(t,e){var n,r=k(t,"a","notEqual"),i=k(e,"b","notEqual");return n=Dt(r,i),r=n[0],i=n[1],De(r.shape,i.shape),O.runKernel(function(o){return o.notEqual(r,i)},{$a:r,$b:i})}}),lj=P({notEqualStrict_:function(t,e){var n=k(t,"a","notEqualStrict"),r=k(e,"b","notEqualStrict");return $e(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function N2(t,e){for(var n=[],r=t;r<e;++r)n.push(r);return n}function P2(t){for(var e=[],n=0;n<t.length;++n)for(var r=0;r<t[n].length;++r)e.push(t[n][r]);return e}var vp=P({gather_:function(t,e,n){n===void 0&&(n=0);var r=k(t,"x","gather"),i=k(e,"indices","gather","int32");n=gn(n,r.shape)[0];var o=function(s,a,u){for(var l=s.shape[u],c=[],d=1,h=1,f=0;f<u;f++)c.push(s.shape[f]),d*=s.shape[f];for(f=0;f<a.rank;f++)c.push(a.shape[f]);for(f=u+1;f<s.rank;f++)c.push(s.shape[f]),h*=s.shape[f];return{batchSize:d,sliceSize:h,dimSize:l,outputShape:c}}(r,i,n);return O.runKernel(function(s,a){var u=s.gather(r,i.flatten(),n);return a([i]),u},{$x:r},function(s,a){var u=a[0];return{$x:function(){var l=r.shape,c=u.size,d=l.slice(0,n),h=d.length,f=l.slice(n,l.length).slice(1),m=f.length,v=N2(0,h),y=N2(h+1,h+1+m),g=P2([d,[c],f]),w=s.reshape(g),b=u.reshape([c]),x=P2([[h],v,y]),_=w.transpose(x),E=YC(_,b,r.shape[n]),I=l0(x);return E=E.transpose(I)}}}).reshape(o.outputShape)}}),YC=P({unsortedSegmentSum_:function(t,e,n){var r=k(t,"x","unsortedSegmentSum"),i=k(e,"segmentIds","unsortedSegmentSum","int32");return A(Et(n),function(){return"numSegments must be of dtype int"}),O.runKernel(function(o,s){var a=o.unsortedSegmentSum(r,i,n);return s([i]),a},{$x:r},function(o,s){var a=s[0];return{$x:function(){return function(u,l){for(var c=gp(l,Ve(l)),d=vp(u,c),h=A0(l,ge(0,"int32")),f=d.rank-h.rank,m=0;m<f;++m)h=Oi(h,m+1);h=mp(h,la(d.shape,"bool"));var v=Ve(d);return Cu(h,d,v)}(o,a)}}})}}),cj=function(t,e,n){return pe(this,void 0,void 0,function(){var r,i,o,s,a,u,l,c,d,h,f,m,v;return me(this,function(y){switch(y.label){case 0:for(r=k(t,"tensor","boolMask"),i=k(e,"mask","boolMask","bool"),o=n==null?0:n,s=i.rank,a=r.shape,A(s>0,function(){return"mask cannot be scalar"}),$e(a.slice(o,o+s),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),u=1,l=o;l<o+s;l++)u*=a[l];return c=a.slice(0,o).concat([u],a.slice(o+s)),d=r.reshape(c),h=i.reshape([-1]),[4,E0(h)];case 1:return f=y.sent(),m=f.squeeze([1]),v=vp(d,m,o),t!==r&&r.dispose(),e!==i&&i.dispose(),m.dispose(),d.dispose(),h.dispose(),f.dispose(),[2,v]}})})};function dj(t,e,n,r,i,o,s){o===void 0&&(o="NHWC"),A(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var a=t,u=e,l=!1;e.rank===3&&(l=!0,u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]),a=[1,t[0],t[1],t[2]]),A(a.length===4,function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+a.length+"."}),A(u.rank===4,function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+u.rank}),A(n.rank===4,function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank});var c=o==="NHWC"?a[3]:a[1],d=o==="NHWC"?u.shape[3]:u.shape[1];A(c===n.shape[2],function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."}),A(d===n.shape[3],function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."}),s!=null&&A(Et(i),function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var h=y0(o),f=ca(a,n.shape,r,1,i,s,!1,h),m=O.runKernel(function(v,y){var g=v.conv2dDerInput(u,n,f);return y([n,u]),g},{dy4D:u,filter:n},function(v,y){var g=y[0],w=y[1];return{dy4D:function(){return ed(v,g,r,i,o,1,s)},filter:function(){return JC(v,w,g.shape,r,i,o,s)}}});return l?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}function hb(t){var e=function(o){return typeof o=="number"?[o,o,o]:o.length===2?[o[0],o[1],1]:o}(t),n=e[0],r=e[1],i=e[2];return n===1&&r===1&&i===1}function hj(t,e,n,r,i){A(t.length===e.rank,function(){return"Length of inShape ("+t.length+") and rank of dy ("+e.rank+") must match"});var o=t,s=e,a=!1;e.rank===4&&(a=!0,s=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]),o=[1,t[0],t[1],t[2],t[3]]);var u=o[4],l=s.shape[4];A(o.length===5,function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."}),A(s.rank===5,function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+s.rank}),A(n.rank===5,function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank}),A(u===n.shape[3],function(){return"Error in conv3dDerInput: depth of input ("+u+") must match input depth for filter "+n.shape[3]+"."}),A(l===n.shape[4],function(){return"Error in conv3dDerInput: depth of output ("+l+") must match output depth for filter "+n.shape[4]+"."});var c=xf(o,n.shape,r,1,i),d=O.runKernel(function(h){return h.conv3dDerInput(s,n,c)},{dy5D:s});return a?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var XC=P({conv1d_:function(t,e,n,r,i,o,s){i===void 0&&(i="NWC"),o===void 0&&(o=1);var a=k(t,"x","conv1d"),u=k(e,"filter","conv1d"),l=a,c=!1;a.rank===2&&(c=!0,l=a.as3D(1,a.shape[0],a.shape[1])),A(l.rank===3,function(){return"Error in conv1d: input must be rank 3, but got rank "+l.rank+"."}),A(u.rank===3,function(){return"Error in conv1d: filter must be rank 3, but got rank "+u.rank+"."}),s!=null&&A(Et(r),function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."}),A(l.shape[2]===u.shape[1],function(){return"Error in conv1d: depth of input ("+l.shape[2]+") must match input depth for filter "+u.shape[1]+"."}),A(tr(n,o),function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"}),A(i==="NWC",function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."});var d=u.as4D(1,u.shape[0],u.shape[1],u.shape[2]),h=l.as4D(l.shape[0],1,l.shape[1],l.shape[2]),f=ed(h,d,[1,n],r,"NHWC",[1,o],s);return c?f.as2D(f.shape[2],f.shape[3]):f.as3D(f.shape[0],f.shape[2],f.shape[3])}}),ed=P({conv2d_:function(t,e,n,r,i,o,s){i===void 0&&(i="NHWC"),o===void 0&&(o=[1,1]);var a=k(t,"x","conv2d"),u=k(e,"filter","conv2d"),l=a,c=!1;a.rank===3&&(c=!0,l=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),A(l.rank===4,function(){return"Error in conv2d: input must be rank 4, but got rank "+l.rank+"."}),A(u.rank===4,function(){return"Error in conv2d: filter must be rank 4, but got rank "+u.rank+"."}),s!=null&&A(Et(r),function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var d=i==="NHWC"?l.shape[3]:l.shape[1];A(d===u.shape[2],function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+u.shape[2]+"."}),A(tr(n,o),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"});var h=y0(i),f=ca(l.shape,u.shape,n,o,r,s,!1,h),m=O.runKernel(function(v,y){var g=v.conv2d(l,u,f);return y([u,l]),g},{x:l,$filter:u},function(v,y){var g=y,w=g[0],b=g[1];return A(Tu(o),function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}),{x:function(){return fj(b.shape,v,w,n,r,i)},$filter:function(){return JC(b,v,w.shape,n,r,i)}}});return c?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),QC=P({conv3d_:function(t,e,n,r,i,o){i===void 0&&(i="NDHWC"),o===void 0&&(o=[1,1,1]);var s=k(t,"x","conv3d"),a=k(e,"filter","conv3d"),u=s,l=!1;s.rank===4&&(l=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),A(u.rank===5,function(){return"Error in conv3d: input must be rank 5, but got rank "+u.rank+"."}),A(a.rank===5,function(){return"Error in conv3d: filter must be rank 5, but got rank "+a.rank+"."}),A(u.shape[4]===a.shape[3],function(){return"Error in conv3d: depth of input ("+u.shape[4]+") must match input depth for filter "+a.shape[3]+"."}),A(function(h,f){return hb(h)||hb(f)}(n,o),function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),A(i==="NDHWC",function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."});var c=xf(u.shape,a.shape,n,o,r),d=O.runKernel(function(h,f){var m=h.conv3d(u,a,c);return f([u,a]),m},{x:u,$filter:a},function(h,f){A(hb(o),function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"});var m=f[0],v=f[1];return{x:function(){return hj(m.shape,h,v,n,r)},$filter:function(){return function(y,g,w,b,x){var _=y;y.rank===4&&(_=y.as5D(1,y.shape[0],y.shape[1],y.shape[2],y.shape[3]));var E=g;E.rank===4&&(E=g.as5D(1,g.shape[0],g.shape[1],g.shape[2],g.shape[3])),A(_.rank===5,function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+_.shape+"."}),A(E.rank===5,function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+E.shape+"."}),A(w.length===5,function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+w+"."}),A(_.shape[4]===w[3],function(){return"Error in conv3dDerFilter: depth of input "+_.shape[4]+") must match input depth in filter ("+w[3]+"."}),A(E.shape[4]===w[4],function(){return"Error in conv3dDerFilter: depth of dy ("+E.shape[4]+") must match output depth for filter ("+w[4]+")."});var I=xf(_.shape,w,b,1,x);return O.runKernel(function(C){return C.conv3dDerFilter(_,E,I)},{x5D:_,dy5D:E})}(m,h,v.shape,n,r)}}});return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),JC=P({conv2dDerFilter_:function(t,e,n,r,i,o,s){o===void 0&&(o="NHWC");var a=t;t.rank===3&&(a=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var u=e;u.rank===3&&(u=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),A(a.rank===4,function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+a.shape+"."}),A(u.rank===4,function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+u.shape+"."}),A(n.length===4,function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."});var l=o==="NHWC"?a.shape[3]:a.shape[1],c=o==="NHWC"?u.shape[3]:u.shape[1];A(l===n[2],function(){return"Error in conv2dDerFilter: depth of input "+l+") must match input depth in filter ("+n[2]+"."}),A(c===n[3],function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."}),s!=null&&A(Et(i),function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+i+"."});var d=y0(o),h=ca(a.shape,n,r,1,i,s,!1,d);return O.runKernel(function(f){return f.conv2dDerFilter(a,u,h)},{x4D:a,dy4D:u})}}),fj=P({conv2dDerInput_:dj}),R0=P({depthwiseConv2d_:function(t,e,n,r,i,o,s){o===void 0&&(o=[1,1]);var a=k(t,"x","depthwiseConv2d"),u=k(e,"filter","depthwiseConv2d"),l=a,c=!1;a.rank===3&&(c=!0,l=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),A(l.rank===4,function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+l.rank+"."}),A(u.rank===4,function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+u.rank+"."}),A(l.shape[3]===u.shape[2],function(){return"Error in depthwiseConv2d: number of input channels ("+l.shape[3]+") must match the inChannels dimension in filter "+u.shape[2]+"."}),o==null&&(o=[1,1]),A(tr(n,o),function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}),s!=null&&A(Et(r),function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+r+"."});var d=ca(l.shape,u.shape,n,o,r,s,!0),h=O.runKernel(function(f,m){var v=f.depthwiseConv2D(l,u,d);return m([l,u]),v},{x:l,$filter:u},function(f,m){A(Tu(o),function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"});var v=m[0],y=m[1];return{x:function(){return pj(v.shape,f,y,d)},$filter:function(){return mj(v,f,y.shape,d)}}});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),pj=P({depthwiseConv2dDerInput_:function(t,e,n,r){var i=e,o=!1;e.rank===3&&(o=!0,i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var s=O.runKernel(function(a){return a.depthwiseConv2DDerInput(i,n,r)},{dy4D:i});return o?s.as3D(s.shape[1],s.shape[2],s.shape[3]):s}}),mj=P({depthwiseConv2dDerFilter_:function(t,e,n,r){var i=t;t.rank===3&&(i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var o=e;return o.rank===3&&(o=e.as4D(1,e.shape[0],e.shape[1],e.shape[2])),O.runKernel(function(s){return s.depthwiseConv2DDerFilter(i,o,r)},{x4D:i,dy4D:o})}}),gj=P({separableConv2d_:function(t,e,n,r,i,o,s){o===void 0&&(o=[1,1]),s===void 0&&(s="NHWC");var a=k(t,"x","separableConv2d"),u=k(e,"depthwiseFilter","separableConv2d"),l=k(n,"pointwiseFilter","separableConv2d"),c=a,d=!1;if(a.rank===3&&(d=!0,c=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),s==="NCHW")throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");A(c.rank===4,function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."}),A(u.rank===4,function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+u.rank+"."}),A(l.rank===4,function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+u.rank+"."}),A(l.shape[0]===1,function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+l.shape[0]+"."}),A(l.shape[1]===1,function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+l.shape[1]+"."});var h=u.shape[2],f=u.shape[3];A(l.shape[2]===h*f,function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*f+", but got "+l.shape[2]+"."});var m=R0(c,u,r,i,s,o),v=ed(m,l,1,"valid",s);return d?v.as3D(v.shape[1],v.shape[2],v.shape[3]):v}}),ZC=P({conv2dTranspose_:function(t,e,n,r,i,o){return dj(n,k(t,"x","conv2dTranspose"),k(e,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),vj=P({conv3dTranspose_:function(t,e,n,r,i){return hj(n,k(t,"x","conv3dTranspose"),k(e,"filter","conv3dTranspose"),r,i)}}),ek=P({matMul_:function(t,e,n,r){var i;n===void 0&&(n=!1),r===void 0&&(r=!1);var o=k(t,"a","matMul"),s=k(e,"b","matMul");i=Dt(o,s),o=i[0],s=i[1];var a=n?o.shape[o.rank-2]:o.shape[o.rank-1],u=r?s.shape[s.rank-1]:s.shape[s.rank-2],l=n?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?s.shape[s.rank-2]:s.shape[s.rank-1],d=o.shape.slice(0,-2),h=s.shape.slice(0,-2),f=ve(d),m=ve(h);A(o.rank>=2&&s.rank>=2&&o.rank===s.rank,function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+s.rank+"."}),A(an(d,h),function(){return"Error in matMul: outer dimensions ("+d+") and ("+h+") of Tensors with shapes "+o.shape+" and "+s.shape+" must match."}),A(a===u,function(){return"Error in matMul: inner shapes ("+a+") and ("+u+") of Tensors with shapes "+o.shape+" and "+s.shape+" and transposeA="+n+" and transposeB="+r+" must match."});var v=o.shape.slice(0,-2).concat([l,c]),y=n?o.as3D(f,a,l):o.as3D(f,l,a),g=r?s.as3D(m,c,u):s.as3D(m,u,c);return O.runKernel(function(w,b){var x=w.batchMatMul(y,g,n,r);return b([y,g]),x},{$a:y,$b:g},function(w,b){var x=b,_=x[0],E=x[1];return n||r?!n&&r?{$a:function(){return w.matMul(E,!1,!1)},$b:function(){return w.matMul(_,!0,!1)}}:n&&!r?{$a:function(){return E.matMul(w,!1,!0)},$b:function(){return _.matMul(w,!1,!1)}}:{$a:function(){return E.matMul(w,!0,!0)},$b:function(){return w.matMul(_,!0,!0)}}:{$a:function(){return w.matMul(E,!1,!0)},$b:function(){return _.matMul(w,!0,!1)}}}).reshape(v)}}),yj=P({dot_:function(t,e){var n=k(t,"t1","dot"),r=k(e,"t2","dot");A(!(n.rank!==1&&n.rank!==2||r.rank!==1&&r.rank!==2),function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."});var i=n.rank===1?n.size:n.shape[1],o=r.rank===1?r.size:r.shape[0];return A(i===o,function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."}),n.rank===1&&r.rank===1?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():n.rank===1&&r.rank===2?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():n.rank===2&&r.rank===1?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),wj=P({outerProduct_:function(t,e){var n=k(t,"v1","outerProduct"),r=k(e,"v2","outerProduct");return A(n.rank===1&&r.rank===1,function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."}),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),qu=P({reverse_:function(t,e){var n=k(t,"x","reverse");if(n.rank===0)return n.clone();var r=gn(e,n.shape);return O.runKernel(function(i){return i.reverse(n,r)},{$x:n},function(i){return{$x:function(){return i.reverse(r)}}}).reshapeAs(n)}}),bj=P({reverse1d_:function(t){var e=k(t,"x","reverse");return A(e.rank===1,function(){return"Error in reverse1D: x must be rank 1 but got rank "+e.rank+"."}),qu(e,0)}}),xj=P({reverse2d_:function(t,e){var n=k(t,"x","reverse");return A(n.rank===2,function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."}),qu(n,e)}}),_j=P({reverse3d_:function(t,e){var n=k(t,"x","reverse");return A(n.rank===3,function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."}),qu(n,e)}}),Ej=P({reverse4d_:function(t,e){var n=k(t,"x","reverse");return A(n.rank===4,function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."}),qu(n,e)}});function Ij(t,e,n,r,i,o){var s=k(t,"x","maxPool"),a=s,u=!1;s.rank===3&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),r==null&&(r=[1,1]),A(a.rank===4,function(){return"Error in maxPool: input must be rank 4 but got rank "+a.rank+"."}),A(tr(n,r),function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}),o!=null&&A(Et(i),function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=Ec(a.shape,e,n,r,i,o),c=O.runKernel(function(d,h){var f=d.maxPool(a,l);return h([a,f]),f},{x:a},function(d,h){var f=h[0],m=h[1];return{x:function(){return function(v,y,g,w,b,x,_,E){var I=k(v,"dy","maxPoolBackprop"),C=k(y,"input","maxPoolBackprop"),S=k(g,"output","maxPoolBackprop");A(C.rank===I.rank,function(){return"Rank of input ("+C.rank+") does not match rank of dy ("+I.rank+")"}),x==null&&(x=[1,1]),A(tr(b,x),function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+b+" and dilations '"+x+"'"}),A(I.rank===4,function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+I.rank+"."}),A(C.rank===4,function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+C.rank+"."}),E!=null&&A(Et(_),function(){return"Error in maxPoolBackprop: pad must be an integer when using, dimRoundingMode "+E+" but got pad "+_+"."});var N=Ec(C.shape,w,b,x,_,E);return O.runKernel(function(R){return R.maxPoolBackprop(I,C,S,N)},{$dy:I,$input:C})}(d,f,m,e,n,r,i)}}});return u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function Tj(t,e,n,r,i,o){var s=k(t,"x","avgPool","float32");r==null&&(r=[1,1]),A(tr(n,r),function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"});var a=s,u=!1;s.rank===3&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),A(a.rank===4,function(){return"Error in avgPool: x must be rank 4 but got rank "+a.rank+"."}),o!=null&&A(Et(i),function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."});var l=Ec(a.shape,e,n,r,i,o),c=O.runKernel(function(d){return d.avgPool(a,l)},{x:a},function(d){return{x:function(){return function(h,f,m,v,y,g){var w=k(h,"dy","avgPoolBackprop"),b=k(f,"input","avgPoolBackprop");A(b.rank===w.rank,function(){return"Rank of input ("+b.rank+") does not match rank of dy ("+w.rank+")"}),y==null&&(y=[1,1]),A(tr(v,y),function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+v+" and dilations '"+y+"'"});var x=b,_=w,E=!1;b.rank===3&&(E=!0,x=b.as4D(1,b.shape[0],b.shape[1],b.shape[2]),_=w.as4D(1,w.shape[0],w.shape[1],w.shape[2])),A(_.rank===4,function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+_.rank+"."}),A(x.rank===4,function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+x.rank+"."});var I=Ec(x.shape,m,v,y,g),C=O.runKernel(function(S){return S.avgPoolBackprop(_,x,I)},{dy4D:_,input4D:x});return E?C.as3D(C.shape[1],C.shape[2],C.shape[3]):C}(d,a,e,n,r,i)}}});return c=c.cast(s.dtype),u?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var tk=P({maxPool_:function(t,e,n,r,i){return Ij(t,e,n,1,r,i)}}),nk=P({avgPool_:function(t,e,n,r,i){return Tj(t,e,n,1,r,i)}}),Cj=P({pool_:function(t,e,n,r,i,o){i==null&&(i=[1,1]),o==null&&(o=1),r===0&&(r="valid");var s=k(t,"x","maxPool"),a=s,u=!1;s.rank===3&&(u=!0,a=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),A(tr(o,i),function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"});var l,c=Ec(a.shape,e,o,i,r),d=[c.dilationHeight,c.dilationWidth];l=r==="same"?function(x,_){var E=x.map(function(S,N){return S+(S-1)*(_[N]-1)}).map(function(S){return S-1}),I=E.map(function(S){return Math.floor(S/2)}),C=E.map(function(S,N){return S-I[N]});return E.map(function(S,N){return[I[N],C[N]]})}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var h=d[0]===1&&d[1]===1,f=function(x,_,E){var I=E.map(function(F){return F[0]}),C=E.map(function(F){return F[1]}),S=x.concat(I,C),N=_.map(function(F,G){return(F-S[G]%F)%F}),R=C.map(function(F,G){return F+N[G]}),D=_.map(function(F,G){return[I[G],R[G]]}),W=_.map(function(F,G){return[0,N[G]]});return[D,W]}([c.inHeight,c.inWidth],d,l),m=f[0],v=f[1],y=h?r:"valid",g=h?a:m0(a,d,m),w=(n==="avg"?function(){return Tj(g,e,o,1,y)}:function(){return Ij(g,e,o,1,y)})(),b=h?w:f0(w,d,v);return u?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),rk=P({maxPool3d_:function(t,e,n,r,i,o,s){o===void 0&&(o="NDHWC");var a=k(t,"x","maxPool3d"),u=a,l=!1;a.rank===4&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),s==null&&(s=[1,1,1]),A(u.rank===5,function(){return"Error in maxPool3d: x must be rank 5 but got rank "+u.rank+"."}),A(o==="NDHWC",function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),A(tr(n,s),function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+s+"'"}),i!=null&&A(Et(r),function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=bf(u.shape,e,n,s,r,i,o),d=O.runKernel(function(h,f){var m=h.maxPool3d(u,c);return f([u,m]),m},{x:u},function(h,f){var m=f[0],v=f[1];return{x:function(){return function(y,g,w,b,x,_,E,I){var C=k(y,"dy","maxPool3dBackprop"),S=k(g,"input","maxPool3dBackprop"),N=k(w,"output","maxPool3dBackprop"),R=C,D=S,W=N,F=!1;S.rank===4&&(F=!0,R=C.as5D(1,C.shape[0],C.shape[1],C.shape[2],C.shape[3]),D=S.as5D(1,S.shape[0],S.shape[1],S.shape[2],S.shape[3]),W=N.as5D(1,N.shape[0],N.shape[1],N.shape[2],N.shape[3])),A(R.rank===5,function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+R.rank+"."}),A(D.rank===5,function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+D.rank+"."}),A(W.rank===5,function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+W.rank+"."}),_==null&&(_=[1,1,1]),A(tr(x,_),function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+x+" and dilations '"+_+"'"}),I!=null&&A(Et(E),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+I+" but got pad "+E+"."});var G=bf(D.shape,b,x,_,E,I),K=O.runKernel(function(j){return j.maxPool3dBackprop(R,D,W,G)},{dy5D:R,input5D:D});return F?K.as4D(K.shape[1],K.shape[2],K.shape[3],K.shape[4]):K}(h,m,v,e,n,s,r,i)}}});return l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),ik=P({avgPool3d_:function(t,e,n,r,i,o,s){o===void 0&&(o="NDHWC");var a=k(t,"x","avgPool3d","float32"),u=a,l=!1;a.rank===4&&(l=!0,u=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),s==null&&(s=[1,1,1]),A(u.rank===5,function(){return"Error in avgPool3d: x must be rank 5 but got rank "+u.rank+"."}),A(o==="NDHWC",function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o}),A(tr(n,s),function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+s+"'"}),i!=null&&A(Et(r),function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."});var c=bf(u.shape,e,n,s,r,i,o),d=O.runKernel(function(h){return h.avgPool3d(u,c)},{x:u},function(h){return{x:function(){return function(f,m,v,y,g,w,b){var x=k(f,"dy","avgPool3dBackprop"),_=k(m,"input","avgPool3dBackprop"),E=x,I=_,C=!1;_.rank===4&&(C=!0,E=x.as5D(1,x.shape[0],x.shape[1],x.shape[2],x.shape[3]),I=_.as5D(1,_.shape[0],_.shape[1],_.shape[2],_.shape[3])),A(E.rank===5,function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+E.rank+"."}),A(I.rank===5,function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+I.rank+"."}),g==null&&(g=[1,1,1]),A(tr(y,g),function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+y+" and dilations '"+g+"'"}),b!=null&&A(Et(w),function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+b+" but got pad "+w+"."});var S=bf(I.shape,v,y,g,w,b),N=O.runKernel(function(R){return R.avgPool3dBackprop(E,I,S)},{dy5D:E,input5D:I});return C?N.as4D(N.shape[1],N.shape[2],N.shape[3],N.shape[4]):N}(h,u,e,n,s,r,i)}}});return d=d.cast(u.dtype),l?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),Ti=P({slice_:function(t,e,n){var r,i,o=k(t,"x","slice");if(o.rank===0)throw new Error("Slicing scalar is not possible");(r=typeof e=="number"?[e].concat(new Array(o.rank-1).fill(0)):e.length<o.rank?e.concat(new Array(o.rank-e.length).fill(0)):e.slice()).forEach(function(a){A(a!==-1,function(){return"slice() does not support negative begin indexing."})}),i=(i=n==null?new Array(o.rank).fill(-1):typeof n=="number"?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map(function(a,u){return a>=0?a:(A(a===-1,function(){return"Negative size values should be exactly -1 but got "+a+" for the slice() size at index "+u+"."}),o.shape[u]-r[u])}),function(a,u,l){A(a.rank===u.length,function(){return"Error in slice"+a.rank+"D: Length of begin "+u+" must match the rank of the array ("+a.rank+")."}),A(a.rank===l.length,function(){return"Error in slice"+a.rank+"D: Length of size "+l+" must match the rank of the array ("+a.rank+")."});for(var c=function(h){A(u[h]+l[h]<=a.shape[h],function(){return"Error in slice"+a.rank+"D: begin["+h+"] + size["+h+"] ("+(u[h]+l[h])+") would overflow input.shape["+h+"] ("+a.shape[h]+")"})},d=0;d<a.rank;++d)c(d)}(o,r,i);var s=o.shape;return O.runKernel(function(a){return a.slice(o,r,i)},{$x:o},function(a){for(var u=[],l=0;l<a.rank;l++)u.push([r[l],s[l]-r[l]-i[l]]);return{$x:function(){return a.pad(u)}}})}}),kj=P({slice1d_:function(t,e,n){var r=k(t,"x","slice1d");return A(r.rank===1,function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"}),Ti(r,[e],[n])}}),Sj=P({slice2d_:function(t,e,n){var r=k(t,"x","slice2d");return A(r.rank===2,function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"}),Ti(r,e,n)}}),Aj=P({slice3d_:function(t,e,n){var r=k(t,"x","slice3d");return A(r.rank===3,function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"}),Ti(r,e,n)}}),Rj=P({slice4d_:function(t,e,n){var r=k(t,"x","slice4d");return A(r.rank===4,function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"}),Ti(r,e,n)}});function Nj(t,e,n,r,i){return e.rank<n.rank&&(e=e.reshape(Mr(e.shape,r))),t.rank<n.rank&&(t=t.reshape(Mr(t.shape,r))),{$x:function(){var o=t.mul(n.equal(e).cast(t.dtype));return i==null?o:o.transpose(i)}}}var ok=P({all_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=k(t,"x","all","bool"),i=gn(e,r.shape),o=i,s=Ci(o,r.rank);s!=null&&(r=r.transpose(s),o=ki(o.length,r.rank));var a=O.runKernel(function(l){return l.all(r,o)},{$x:r});if(n){var u=Mr(a.shape,i);return a.reshape(u)}return a}}),sk=P({any_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=k(t,"x","any","bool"),i=gn(e,r.shape),o=i,s=Ci(o,r.rank);s!=null&&(r=r.transpose(s),o=ki(o.length,r.rank));var a=O.runKernel(function(l){return l.any(r,o)},{$x:r});if(n){var u=Mr(a.shape,i);return a.reshape(u)}return a}}),ak=P({argMax_:function(t,e){e===void 0&&(e=0);var n=k(t,"x","argMax");e==null&&(e=0);var r=gn(e,n.shape),i=Ci(r,n.rank);return i!=null&&(n=n.transpose(i),r=ki(r.length,n.rank)),O.runKernel(function(o,s){var a=o.argMax(n,r[0]);return s([n]),a},{$x:n},function(o,s){var a=s[0];return{$x:function(){return Ve(a)}}})}}),uk=P({argMin_:function(t,e){e===void 0&&(e=0);var n=k(t,"x","argMin");e==null&&(e=0);var r=gn(e,n.shape),i=Ci(r,n.rank);return i!=null&&(n=n.transpose(i),r=ki(r.length,n.rank)),O.runKernel(function(o,s){var a=o.argMin(n,r[0]);return s([n]),a},{$x:n},function(o,s){var a=s[0];return{$x:function(){return Ve(a)}}})}}),Pj=P({logSumExp_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=k(t,"x","logSumExp"),i=gn(e,r.shape),o=r.max(i,!0),s=r.sub(o).exp().sum(i).log(),a=o.reshape(s.shape).add(s);if(n){var u=Mr(a.shape,i);return a.reshape(u)}return a}}),lk=P({max_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=k(t,"x","max"),i=r,o=gn(e,r.shape),s=o,a=Ci(s,r.rank);a!=null&&(r=r.transpose(a),s=ki(s.length,r.rank));var u=O.runKernel(function(c,d){var h=c.max(r,s);return d([i,h]),h},{$x:r},function(c,d){return Nj(c,d[1],d[0],o,a)});if(n){var l=Mr(u.shape,o);u=u.reshape(l)}return u}}),ck=P({mean_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=k(t,"x","mean"),i=gn(e,r.shape),o=ve(wn(r.shape,i)[1]);return Zc(function(s){var a=ge(o);return{value:(a.dtype===s.dtype?s:s.cast(a.dtype)).div(a).sum(e,n),gradFunc:function(u){var l=s.shape.slice();return i.forEach(function(c){l[c]=1}),u.reshape(l).mul(la(s.shape,"float32")).div(o)}}})(r)}}),dk=P({min_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=k(t,"x","min"),i=r,o=gn(e,r.shape),s=o,a=Ci(s,r.rank);a!=null&&(r=r.transpose(a),s=ki(s.length,r.rank));var u=O.runKernel(function(c,d){var h=c.min(r,s);return d([i,h]),h},{$x:r},function(c,d){return Nj(c,d[1],d[0],o,a)});if(n){var l=Mr(u.shape,o);u=u.reshape(l)}return u}}),Dj=P({moments_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=gn(e,(t=k(t,"x","moments")).shape),i=t.mean(r,n),o=i.shape;n||(o=Mr(i.shape,r));var s=t.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:s.mean(r,n)}}}),N0=P({sum_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=k(t,"x","sum");r.dtype==="bool"&&(r=r.toInt());var i=gn(e,r.shape);return Zc(function(o){var s=Ci(i,o.rank),a=i,u=o;s!=null&&(u=o.transpose(s),a=ki(a.length,o.rank));var l=O.runKernel(function(d){return d.sum(u,a)},{permutedX:u});if(n){var c=Mr(l.shape,i);l=l.reshape(c)}return{value:l,gradFunc:function(d){var h=o.shape.slice();return i.forEach(function(f){h[f]=1}),d.reshape(h).mul(la(o.shape,"float32"))}}})(r)}}),P0=P({prod_:function(t,e,n){e===void 0&&(e=null),n===void 0&&(n=!1);var r=k(t,"x","prod");r.dtype==="bool"&&(r=r.toInt());var i=gn(e,r.shape),o=Ci(i,r.rank),s=i,a=r;o!=null&&(a=r.transpose(o),s=ki(s.length,r.rank));var u=O.runKernel(function(c){return c.prod(a,s)},{permutedX:a});if(n){var l=Mr(u.shape,i);u=u.reshape(l)}return u}}),hk=P({elu_:function(t){var e=k(t,"x","elu");return O.runKernel(function(n,r){var i=n.elu(e);return r([i]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return O.runKernel(function(o){return o.eluDer(n,i)},{dy:n,y:i})}}})}}),fk=P({leakyRelu_:function(t,e){e===void 0&&(e=.2);var n=k(t,"x","leakyRelu");return gp(ge(e).mul(n),n)}}),Oj=P({prelu_:function(t,e){var n=k(t,"x","prelu"),r=k(e,"alpha","prelu");return O.runKernel(function(i,o){var s=i.prelu(n,r);return o([n,r]),s},{$x:n,$alpha:r},function(i,o){var s=o[0],a=o[1],u=s.greater(0);return{$x:function(){return Cu(u,i,i.mul(a))},$alpha:function(){var l=Cu(u,Ve(i),i.mul(s)),c=Ot(a.shape,i.shape);return c.length>0&&(l=l.sum(c)),l.reshape(a.shape)}}})}}),pk=P({relu_:function(t){var e=k(t,"x","relu");return e.dtype==="bool"?e.toInt():O.runKernel(function(n,r){var i=n.relu(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){return n.mulStrict(i.step().toFloat())}}})}}),Lj=P({relu6_:function(t){var e=k(t,"x","relu6");return e.dtype==="bool"?e.toInt():O.runKernel(function(n,r){var i=n.relu6(e);return r([e]),i},{$x:e},function(n,r){var i=r[0],o=i.lessEqual(6).mul(i.step());return{$x:function(){return n.mulStrict(o.toFloat())}}})}}),mk=P({selu_:function(t){var e=k(t,"x","selu");return O.runKernel(function(n,r){var i=n.selu(e);return r([e]),i},{$x:e},function(n,r){var i=r[0];return{$x:function(){var o=i.greater(ge(0)),s=ge(lC),a=ge(cC),u=n.mul(a),l=n.mul(s).mul(i.toFloat().exp());return Cu(o,u,l)}}})}}),gk=P({transpose_:function(t,e){var n=k(t,"x","transpose");return e==null&&(e=n.shape.map(function(r,i){return i}).reverse()),A(n.rank===e.length,function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+e+"."}),e.forEach(function(r){A(r>=0&&r<n.rank,function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+e})}),n.rank<=1?n.clone():O.runKernel(function(r){return r.transpose(n,e)},{$x:n},function(r){var i=l0(e);return{$x:function(){return r.transpose(i)}}})}}),vk=P({localResponseNormalization_:function(t,e,n,r,i){e===void 0&&(e=5),n===void 0&&(n=1),r===void 0&&(r=1),i===void 0&&(i=.5);var o=k(t,"x","localResponseNormalization");A(o.rank===4||o.rank===3,function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+o.rank+"."}),A(Et(e),function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+e+"."});var s=o,a=!1;o.rank===3&&(a=!0,s=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var u=O.runKernel(function(l,c){var d=l.localResponseNormalization4D(s,e,n,r,i);return c([s,d]),d},{x4D:s},function(l,c){var d=c[0],h=c[1];return{x4D:function(){return O.runKernel(function(f){return f.LRNGrad(l,d,h,e,n,r,i)},{})}}});return a?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),yk=P({norm_:function(t,e,n,r){e===void 0&&(e="euclidean"),n===void 0&&(n=null),r===void 0&&(r=!1);var i=function a(u,l,c){if(c===void 0&&(c=null),u.rank===0)return u.abs();if(u.rank!==1&&c===null)return a(u.reshape([-1]),l,c);if(u.rank===1||typeof c=="number"||Array.isArray(c)&&c.length===1){if(l===1)return u.abs().sum(c);if(l===1/0)return u.abs().max(c);if(l===-1/0)return u.abs().min(c);if(l==="euclidean"||l===2)return u.abs().pow(ge(2,"int32")).sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}if(Array.isArray(c)&&c.length===2){if(l===1)return u.abs().sum(c[0]).max(c[1]-1);if(l===1/0)return u.abs().sum(c[1]).max(c[0]);if(l===-1/0)return u.abs().sum(c[1]).min(c[0]);if(l==="fro"||l==="euclidean")return u.square().sum(c).sqrt();throw new Error("Error in norm: invalid ord value: "+l)}throw new Error("Error in norm: invalid axis: "+c)}(t=k(t,"x","norm"),e,n),o=i.shape;if(r){var s=gn(n,t.shape);o=Mr(i.shape,s)}return i.reshape(o)}}),Mj=P({basicLSTMCell_:function(t,e,n,r,i,o){var s=k(t,"forgetBias","basicLSTMCell"),a=k(e,"lstmKernel","basicLSTMCell"),u=k(n,"lstmBias","basicLSTMCell"),l=k(r,"data","basicLSTMCell"),c=k(i,"c","basicLSTMCell"),d=k(o,"h","basicLSTMCell"),h=l.concat(d,1).matMul(a).add(u),f=h.shape[0],m=h.shape[1]/4,v=[f,m],y=h.slice([0,0],v),g=h.slice([0,m],v),w=h.slice([0,2*m],v),b=h.slice([0,3*m],v),x=y.sigmoid().mulStrict(g.tanh()).addStrict(c.mulStrict(s.add(w).sigmoid())),_=x.tanh().mulStrict(b.sigmoid());return[x,_]}}),Vj=P({multiRNNCell_:function(t,e,n,r){for(var i=k(e,"data","multiRNNCell"),o=yf(n,"c","multiRNNCell"),s=yf(r,"h","multiRNNCell"),a=i,u=[],l=0;l<t.length;l++){var c=t[l](a,o[l],s[l]);u.push(c[0]),u.push(c[1]),a=c[1]}var d=[],h=[];for(l=0;l<u.length;l+=2)d.push(u[l]),h.push(u[l+1]);return[d,h]}}),Fj=P({movingAverage_:function(t,e,n,r,i){i===void 0&&(i=!0);var o=k(t,"v","movingAverage"),s=k(e,"x","movingAverage"),a=k(n,"decay","movingAverage");t$(o,s),A(an(o.shape,s.shape),function(){return"Shape mismatch in v and x"});var u=ge(1),l=u.sub(a),c=s.sub(o).mul(l);if(i){A(r!=null,function(){return"When using zeroDebias: true, step is required."});var d=k(r,"step","movingAverage");c=c.div(u.sub(Ic(a,d)))}return o.add(c)}}),wk=P({stridedSlice_:function(t,e,n,r,i,o,s,a,u){if(i===void 0&&(i=0),o===void 0&&(o=0),s===void 0&&(s=0),a===void 0&&(a=0),u===void 0&&(u=0),r==null&&(r=new Array(e.length)),s!==0)throw new Error("ellipsis mask is not yet supported");var l=k(t,"x","stridedSlice"),c=h2(a),d=l.shape.slice();c.forEach(function(y){e[y]=0,n[y]=1,d.splice(y,0,1)}),l=l.reshape(d);for(var h=0;h<l.rank;h++)e[h]=Cse(i,e,r,l.shape,h),n[h]=kse(o,n,r,l.shape,h),r[h]=r[h]||1;var f=h2(u);f.forEach(function(y){n[y]=e[y]+1,r[y]=1});var m=eC(e,n,r),v=m.filter(function(y,g){return f.indexOf(g)===-1});return r.every(function(y){return y===1})?Ti(l,e,m).reshape(v):O.runKernel(function(y){return y.stridedSlice(l,e,n,r)},{$x:l}).reshape(v)}}),bk=P({topk_:function(t,e,n){e===void 0&&(e=1),n===void 0&&(n=!0);var r=k(t,"x","topk");if(r.rank===0)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(e>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+e);var o=O.runKernel(function(s){return s.topk(r,e,n)},{$x:r});return{values:o[0],indices:o[1]}}}),xk=P({scatterND_:function(t,e,n){var r=k(t,"indices","scatterND","int32"),i=k(e,"updates","scatterND");return Tse(i,r,n),O.runKernel(function(o){return o.scatterND(r,i,n)},{$indices:r,$updates:i})}}),yp=P({fft_:function(t){A(t.dtype==="complex64",function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return O.runKernel(function(i){return i.fft(r)},{input:t}).reshape(t.shape)}}),Cc=P({ifft_:function(t){A(t.dtype==="complex64",function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+t.dtype+"."});var e=t.shape[t.shape.length-1],n=t.size/e,r=t.as2D(n,e);return O.runKernel(function(i){return i.ifft(r)},{input:t}).reshape(t.shape)}}),wp=P({rfft_:function(t,e){A(t.dtype==="float32",function(){return"The dtype for rfft() must be real value but got "+t.dtype});var n,r=t.shape[t.shape.length-1],i=t.size/r;if(e!=null&&e<r){var o=t.shape.map(function(g){return 0}),s=t.shape.map(function(g){return g});s[t.shape.length-1]=e,n=t.slice(o,s),r=e}else if(e!=null&&e>r){var a=t.shape.map(function(g){return g});a[t.shape.length-1]=e-r,n=t.concat(ft(a),t.shape.length-1),r=e}else n=t;var u=n.zerosLike(),l=Kt(n,u).as2D(i,r),c=yp(l),d=Math.floor(r/2)+1,h=fr(c),f=Xr(c),m=h.split([d,r-d],h.shape.length-1),v=f.split([d,r-d],f.shape.length-1),y=n.shape.slice();return y[n.shape.length-1]=d,Kt(m[0],v[0]).reshape(y)}}),D0=P({irfft_:function(t){var e=t.shape[t.shape.length-1],n=t.size/e;if(e<=2){var r=t.as2D(n,e),i=Cc(r);return fr(i)}var o=[n,2*(e-1)],s=fr(t).as2D(n,e),a=Xr(t).as2D(n,e),u=s.slice([0,1],[n,e-2]).reverse(1),l=a.slice([0,1],[n,e-2]).reverse(1).mul(ge(-1)),c=s.concat(u,1),d=a.concat(l,1);return r=Kt(c,d).as2D(o[0],o[1]),i=Cc(r),fr(i)}}),$j=Object.freeze({fft:yp,ifft:Cc,rfft:wp,irfft:D0}),O0=P({sparseToDense_:function(t,e,n,r){r===void 0&&(r=0);var i=k(t,"sparseIndices","sparseToDense","int32"),o=k(e,"sparseValues","sparseToDense"),s=k(r,"defaultValue","sparseToDense",o.dtype);return function(a,u,l,c){if(a.dtype!=="int32")throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+a.dtype+".");if(a.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+a.shape+".");var d=a.rank>0?a.shape[0]:1,h=a.rank>1?a.shape[1]:1;if(l.length!==h)throw new Error("outputShape has incorrect number of elements:, "+l.length+", should be: "+h+".");var f=u.size;if(u.rank!==0&&(u.rank!==1||f!==d))throw new Error("sparseValues has incorrect shape "+u.shape+", should be [] or ["+d+"]");if(u.dtype!==c.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,n,s),O.runKernel(function(a){return a.sparseToDense(i,o,n,s)},{$sparseIndices:i,$sparseValues:o,$defaultValue:s})}}),_k=P({gatherND_:function(t,e){var n=k(e,"indices","gatherND","int32"),r=k(t,"x","gatherND");return O.runKernel(function(i){return i.gatherND(r,n)},{$x:r,$indices:n})}}),Bj=P({diag_:function(t){var e=k(t,"x","diag").flatten(),n=t.shape.concat(t.shape);return O.runKernel(function(r){return r.diag(e)},{$x:e}).reshape(n)}}),jj=P({dropout_:function(t,e,n,r){var i=k(t,"x","dropout");if(A(i.dtype==="float32",function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."}),A(e>=0&&e<1,function(){return"rate must be a float in the range [0, 1), but got "+e+"."}),e===0)return t instanceof ie?i.clone():i;var o=function(u,l){if(l==null)return u.shape.slice();if(an(u.shape,l))return l;if(u.shape.length===l.length){for(var c=[],d=0;d<u.shape.length;d++)l[d]==null&&u.shape[d]!=null?c.push(u.shape[d]):c.push(l[d]);return c}return l}(i,n),s=1-e,a=p0(o,0,1,"float32",r).add(s).floor().div(s);return i.mul(a)}});function Uj(t,e,n){for(var r=1-t%2,i=new Float32Array(t),o=0;o<t;++o){var s=2*Math.PI*o/(t+r-1);i[o]=e-n*Math.cos(s)}return Ys(i,"float32")}var L0=P({hannWindow_:function(t){return Uj(t,.5,.5)}}),Ek=P({hammingWindow_:function(t){return Uj(t,.54,.46)}}),M0=P({frame_:function(t,e,n,r,i){r===void 0&&(r=!1),i===void 0&&(i=0);for(var o=0,s=[];o+e<=t.size;)s.push(Ti(t,o,e)),o+=n;if(r)for(;o<t.size;){var a=o+e-t.size,u=Vr([Ti(t,o,e-a),up([a],i)]);s.push(u),o+=n}return s.length===0?Za([],[0,e]):Vr(s).as2D(s.length,e)}}),Ik=P({stft_:function(t,e,n,r,i){var o;i===void 0&&(i=L0),r==null&&(o=e,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var s=M0(t,e,n),a=k0(s,i(e)),u=[],l=0;l<s.shape[0];l++)u.push(wp(a.slice([l,0],[1,e]),r));return Vr(u)}}),zj=Object.freeze({hannWindow:L0,hammingWindow:Ek,frame:M0,stft:Ik}),En,Wj=function(t,e,n){return n===void 0&&(n=1),pe(this,void 0,void 0,function(){var r,i,o,s,a,u,l,c,d,h,f,m,v,y;return me(this,function(g){switch(g.label){case 0:return r=k(t,"predictions","inTopK"),i=k(e,"targets","inTopK"),A(r.rank>1,function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank}),A(r.rank-1===i.rank,function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank}),$e(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],A(n>0&&n<=o,function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+n}),[4,r.data()];case 1:return s=g.sent(),[4,i.data()];case 2:for(a=g.sent(),u=[s.length/o,o],c=u[1],d=ff("bool",l=u[0]),h=0;h<l;h++){for(f=h*c,m=s.subarray(f,f+c),v=[],y=0;y<m.length;y++)v.push({value:m[y],index:y});for(v.sort(function(w,b){return b.value-w.value}),d[h]=0,y=0;y<n;y++)if(v[y].index===a[h]){d[h]=1;break}}return t!==r&&r.dispose(),e!==i&&i.dispose(),[2,Xt(d,i.shape,"bool")]}})})};(function(t){t[t.NONE=0]="NONE",t[t.MEAN=1]="MEAN",t[t.SUM=2]="SUM",t[t.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"})(En||(En={}));var gue=P({absoluteDifference_:function(t,e,n,r){r===void 0&&(r=En.SUM_BY_NONZERO_WEIGHTS);var i=k(t,"labels","absoluteDifference"),o=k(e,"predictions","absoluteDifference"),s=null;n!=null&&(s=k(n,"weights","absoluteDifference")),$e(i.shape,o.shape,"Error in absoluteDifference: ");var a=i.sub(o).abs();return Jo(a,s,r)}}),Jo=P({computeWeightedLoss_:function(t,e,n){n===void 0&&(n=En.SUM_BY_NONZERO_WEIGHTS);var r=k(t,"losses","computeWeightedLoss"),i=null;e!=null&&(i=k(e,"weights","computeWeightedLoss"));var o=i==null?r:r.mul(i);if(n===En.NONE)return o;if(n===En.SUM)return o.sum();if(n===En.MEAN){if(i==null)return o.mean();var s=r.size/i.size,a=o.sum().div(i.sum());return s>1?a.div(ge(s)):a}if(n===En.SUM_BY_NONZERO_WEIGHTS){if(i==null)return o.sum().div(ge(r.size));var u=i.mul(la(r.shape)).notEqual(ge(0)).sum().toFloat();return o.sum().div(u)}throw Error("Unknown reduction: "+n)}}),vue=P({cosineDistance_:function(t,e,n,r,i){i===void 0&&(i=En.SUM_BY_NONZERO_WEIGHTS);var o=k(t,"labels","cosineDistance"),s=k(e,"predictions","cosineDistance"),a=null;r!=null&&(a=k(r,"weights","cosineDistance")),$e(o.shape,s.shape,"Error in cosineDistance: ");var u=ge(1).sub(o.mul(s).sum(n,!0));return Jo(u,a,i)}}),yue=P({hingeLoss_:function(t,e,n,r){r===void 0&&(r=En.SUM_BY_NONZERO_WEIGHTS);var i=k(t,"labels","hingeLoss"),o=k(e,"predictions","hingeLoss"),s=null;n!=null&&(s=k(n,"weights","hingeLoss")),$e(i.shape,o.shape,"Error in hingeLoss: ");var a=ge(1);i=ge(2).mul(i).sub(a);var u=a.sub(i.mul(o)).relu();return Jo(u,s,r)}}),wue=P({huberLoss_:function(t,e,n,r,i){r===void 0&&(r=1),i===void 0&&(i=En.SUM_BY_NONZERO_WEIGHTS);var o=k(t,"labels","huberLoss"),s=k(e,"predictions","huberLoss"),a=null;n!=null&&(a=k(n,"weights","huberLoss")),$e(o.shape,s.shape,"Error in huberLoss: ");var u=ge(r),l=s.sub(o).abs(),c=C0(l,u),d=l.sub(c),h=ge(.5).mul(c.square()).add(u.mul(d));return Jo(h,a,i)}}),bue=P({logLoss_:function(t,e,n,r,i){r===void 0&&(r=1e-7),i===void 0&&(i=En.SUM_BY_NONZERO_WEIGHTS);var o=k(t,"labels","logLoss"),s=k(e,"predictions","logLoss"),a=null;n!=null&&(a=k(n,"weights","logLoss")),$e(o.shape,s.shape,"Error in logLoss: ");var u=ge(1),l=ge(r),c=o.mul(s.add(l).log()).neg().sub(u.sub(o).mul(u.sub(s).add(l).log()));return Jo(c,a,i)}}),xue=P({meanSquaredError_:function(t,e,n,r){r===void 0&&(r=En.SUM_BY_NONZERO_WEIGHTS);var i=k(t,"labels","meanSquaredError"),o=k(e,"predictions","meanSquaredError"),s=null;n!=null&&(s=k(n,"weights","meanSquaredError")),$e(i.shape,o.shape,"Error in meanSquaredError: ");var a=i.squaredDifference(o);return Jo(a,s,r)}}),_ue=P({sigmoidCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=En.SUM_BY_NONZERO_WEIGHTS);var o=k(t,"multiClassLabels","sigmoidCrossEntropy"),s=k(e,"logits","sigmoidCrossEntropy"),a=null;if(n!=null&&(a=k(n,"weights","sigmoidCrossEntropy")),$e(o.shape,s.shape,"Error in sigmoidCrossEntropy: "),r>0){var u=ge(r),l=ge(1),c=ge(.5);o=o.mul(l.sub(u)).add(c.mul(u))}var d=function(h,f){var m=k(h,"labels","sigmoidCrossEntropyWithLogits"),v=k(f,"logits","sigmoidCrossEntropyWithLogits");$e(m.shape,v.shape,"Error in sigmoidCrossEntropyWithLogits: ");var y=v.relu(),g=v.mul(m),w=v.abs().neg().exp().log1p();return y.sub(g).add(w)}(o,s);return Jo(d,a,i)}}),Eue=P({softmaxCrossEntropy_:function(t,e,n,r,i){r===void 0&&(r=0),i===void 0&&(i=En.SUM_BY_NONZERO_WEIGHTS);var o=k(t,"onehotLabels","softmaxCrossEntropy"),s=k(e,"logits","softmaxCrossEntropy"),a=null;if(n!=null&&(a=k(n,"weights","softmaxCrossEntropy")),$e(o.shape,s.shape,"Error in softmaxCrossEntropy: "),r>0){var u=ge(r),l=ge(1),c=ge(o.shape[1]);o=o.mul(l.sub(u)).add(u.div(c))}var d=function(h,f,m){if(m===void 0&&(m=-1),m===-1&&(m=f.rank-1),m!==f.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+f.rank+" and dim was "+m);return Zc(function(v,y,g){var w=y.logSumExp([m],!0),b=y.toFloat().sub(w);return g([v,b]),{value:b.mul(v).neg().sum([m]),gradFunc:function(x,_){var E=_[0],I=_[1],C=Mr(x.shape,[m]);return[x.reshape(C).mul(E.toFloat().sub(I.exp())),x.reshape(C).mul(I.exp().sub(E.toFloat()))]}}})(h,f)}(o,s);return Jo(d,a,i)}}),qj=Object.freeze({get Reduction(){return En},absoluteDifference:gue,computeWeightedLoss:Jo,cosineDistance:vue,hingeLoss:yue,huberLoss:wue,logLoss:bue,meanSquaredError:xue,sigmoidCrossEntropy:_ue,softmaxCrossEntropy:Eue});function D2(t,e){return e===void 0&&(e=!1),O.tidy(function(){if(t.shape.length!==2)throw new Error("qr2d() requires a 2D Tensor, but got a "+t.shape.length+"D Tensor.");for(var n=t.shape[0],r=t.shape[1],i=XT(n),o=t.clone(),s=Za([[1]],[1,1]),a=s.clone(),u=n>=r?r:n,l=function(d){var h,f=o,m=a,v=i;h=O.tidy(function(){var y=o.slice([d,d],[n-d,1]),g=y.norm(),w=o.slice([d,d],[1,1]),b=Za([[-1]]).where(w.greater(0),Za([[1]])),x=w.sub(b.mul(g)),_=y.div(x);a=_.shape[0]===1?s.clone():s.concat(_.slice([1,0],[_.shape[0]-1,_.shape[1]]),0);var E=b.matMul(x).div(g).neg(),I=o.slice([d,0],[n-d,r]),C=E.mul(a);if(d===0)o=I.sub(C.matMul(a.transpose().matMul(I)));else{var S=I.sub(C.matMul(a.transpose().matMul(I)));o=o.slice([0,0],[d,r]).concat(S,0)}var N=i.slice([0,d],[n,i.shape[1]-d]);if(d===0)i=N.sub(N.matMul(a).matMul(C.transpose()));else{var R=N.sub(N.matMul(a).matMul(C.transpose()));i=i.slice([0,0],[n,d]).concat(R,1)}return[a,o,i]}),a=h[0],o=h[1],i=h[2],Jn([f,m,v])},c=0;c<u;++c)l(c);return!e&&n>r&&(i=i.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[i,o]})}var Iue=P({gramSchmidt_:function(t){var e;if(Array.isArray(t)){e=!1,A(t!=null&&t.length>0,function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"});for(var n=t[0].shape[0],r=function(u){A(t[u].shape[0]===n,function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+t[u].shape[0]+" vs. "+n+")"})},i=1;i<t.length;++i)r(i)}else e=!0,t=lp(t,t.shape[0],0).map(function(u){return g0(u,[0])});A(t.length<=t[0].shape[0],function(){return"Gram-Schmidt: Number of vectors ("+t.length+") exceeds number of dimensions ("+t[0].shape[0]+")."});var o=[],s=t,a=function(u){o.push(O.tidy(function(){var l=s[u];if(u>0)for(var c=0;c<u;++c){var d=N0(o[c].mulStrict(l)).mul(o[c]);l=l.sub(d)}return l.div(yk(l,"euclidean"))}))};for(i=0;i<t.length;++i)a(i);return e?Vo(o,0):o}}),Tue=P({qr_:function(t,e){if(e===void 0&&(e=!1),t.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+t.rank);if(t.rank===2)return D2(t,e);var n=t.shape.slice(0,t.shape.length-2).reduce(function(s,a){return s*a}),r=dp(t.reshape([n,t.shape[t.shape.length-2],t.shape[t.shape.length-1]]),0),i=[],o=[];return r.forEach(function(s){var a=D2(s,e),u=a[0],l=a[1];i.push(u),o.push(l)}),[Vo(i,0).reshape(t.shape),Vo(o,0).reshape(t.shape)]}}),Hj=Object.freeze({gramSchmidt:Iue,qr:Tue});function Gj(t,e,n,r,i){r==null&&(r=.5),i==null&&(i=Number.NEGATIVE_INFINITY);var o=t.shape[0];return n=Math.min(n,o),A(0<=r&&r<=1,function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"}),A(t.rank===2,function(){return"boxes must be a 2D tensor, but was of rank '"+t.rank+"'"}),A(t.shape[1]===4,function(){return"boxes must have 4 columns, but 2nd dimension was "+t.shape[1]}),A(e.rank===1,function(){return"scores must be a 1D tensor"}),A(e.shape[0]===o,function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+e.shape[0]}),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i}}var Cue=P({resizeBilinear_:function(t,e,n){n===void 0&&(n=!1);var r=k(t,"images","resizeBilinear");A(r.rank===3||r.rank===4,function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."}),A(e.length===2,function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+e+"."});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=e[0],a=e[1],u=O.runKernel(function(l,c){return c([i]),l.resizeBilinear(i,s,a,n)},{batchImages:i},function(l,c){return{batchImages:function(){return O.runKernel(function(d){return d.resizeBilinearBackprop(l,c[0],n)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),kue=P({resizeNearestNeighbor_:function(t,e,n){n===void 0&&(n=!1);var r=k(t,"images","resizeNearestNeighbor");A(r.rank===3||r.rank===4,function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."}),A(e.length===2,function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+e+"."}),A(r.dtype==="float32"||r.dtype==="int32",function(){return"`images` must have `int32` or `float32` as dtype"});var i=r,o=!1;r.rank===3&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var s=e[0],a=e[1],u=O.runKernel(function(l,c){return c([i]),l.resizeNearestNeighbor(i,s,a,n)},{batchImages:i},function(l,c){return{batchImages:function(){return O.runKernel(function(d){return d.resizeNearestNeighborBackprop(l,c[0],n)},{})}}});return o?u.as3D(u.shape[1],u.shape[2],u.shape[3]):u}}),Sue=P({nonMaxSuppression_:function(t,e,n,r,i){r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY);var o=k(t,"boxes","nonMaxSuppression"),s=k(e,"scores","nonMaxSuppression"),a=Gj(o,s,n,r,i);return n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold,O.runKernel(function(u){return u.nonMaxSuppression(o,s,n,r,i)},{$boxes:o})}}),Aue=function(t,e,n,r,i){return r===void 0&&(r=.5),i===void 0&&(i=Number.NEGATIVE_INFINITY),pe(this,void 0,void 0,function(){var o,s,a,u,l,c,d;return me(this,function(h){switch(h.label){case 0:return o=k(t,"boxes","nonMaxSuppressionAsync"),s=k(e,"scores","nonMaxSuppressionAsync"),a=Gj(o,s,n,r,i),n=a.maxOutputSize,r=a.iouThreshold,i=a.scoreThreshold,[4,Promise.all([o.data(),s.data()])];case 1:return u=h.sent(),l=u[0],c=u[1],d=sC(l,c,n,r,i),o!==t&&o.dispose(),s!==e&&s.dispose(),[2,d]}})})},Rue=P({cropAndResize_:function(t,e,n,r,i,o){var s=k(t,"image","cropAndResize","float32"),a=k(e,"boxes","cropAndResize","float32"),u=k(n,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var l=a.shape[0];return A(s.rank===4,function(){return"Error in cropAndResize: image must be rank 4,but got rank "+s.rank+"."}),A(a.rank===2&&a.shape[1]===4,function(){return"Error in cropAndResize: boxes must be have size ["+l+",4] but had shape "+a.shape+"."}),A(u.rank===1&&u.shape[0]===l,function(){return"Error in cropAndResize: boxInd must be have size ["+l+"] but had shape "+a.shape+"."}),A(r.length===2,function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."}),A(r[0]>=1&&r[1]>=1,function(){return"cropSize must be atleast [1,1], but was "+r}),A(i==="bilinear"||i==="nearest",function(){return"method must be bilinear or nearest, but was "+i}),O.runKernel(function(c,d){return c.cropAndResize(s,a,u,r,i,o)},{$image:s,$boxes:a})}}),tu=Object.freeze({resizeBilinear:Cue,resizeNearestNeighbor:kue,nonMaxSuppression:Sue,nonMaxSuppressionAsync:Aue,cropAndResize:Rue}),Nue=P({matMul_:function(t){var e,n=t.a,r=t.b,i=t.transposeA,o=i!==void 0&&i,s=t.transposeB,a=s!==void 0&&s,u=t.bias,l=t.activation,c=l===void 0?"linear":l,d=t.preluActivationWeights,h=k(n,"a","fused matMul"),f=k(r,"b","fused matMul");e=Dt(h,f),h=e[0],f=e[1];var m=o?h.shape[h.rank-2]:h.shape[h.rank-1],v=a?f.shape[f.rank-1]:f.shape[f.rank-2],y=o?h.shape[h.rank-1]:h.shape[h.rank-2],g=a?f.shape[f.rank-2]:f.shape[f.rank-1],w=h.shape.slice(0,-2),b=f.shape.slice(0,-2),x=ve(w),_=ve(b);A(h.rank>=2&&f.rank>=2&&h.rank===f.rank,function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+f.rank+"."}),A(an(w,b),function(){return"Error in fused matMul: outer dimensions ("+w+") and ("+b+") of Tensors with shapes "+h.shape+" and "+f.shape+" must match."}),A(m===v,function(){return"Error in fused matMul: inner shapes ("+m+") and ("+v+") of Tensors with shapes "+h.shape+" and "+f.shape+" and transposeA="+o+" and transposeB="+a+" must match."});var E,I,C=h.shape.slice(0,-2).concat([y,g]),S=o?h.as3D(x,m,y):h.as3D(x,y,m),N=a?f.as3D(_,g,v):f.as3D(_,v,g);u!=null&&De(C,(E=Dt(E=k(u,"bias","fused matMul"),h)[0]).shape),d!=null&&(I=k(d,"prelu weights","fused matMul"));var R={$a:S,$b:N};return u!=null&&(R.$bias=E),d!=null&&(R.$preluActivationWeights=I),O.runKernel(function(D,W){var F=D.fusedBatchMatMul({a:S,b:N,transposeA:o,transposeB:a,bias:E,activation:c,preluActivationWeights:I});return W([S,N,F]),F},R,function(D,W){var F,G=W[0],K=W[1],j=W[2];if(c==null||c==="linear")F=D;else{if(c!=="relu")throw new Error("Gradient for activation "+c+" has not been implemented yet.");F=D.mul(j.step())}var L={};return u!=null&&(L={$bias:function(){var V=F,M=Ot(E.shape,F.shape);return M.length>0&&(V=V.sum(M)),V.reshape(E.shape)}}),Object.assign(o||a?!o&&a?{$a:function(){return F.matMul(K,!1,!1)},$b:function(){return F.matMul(G,!0,!1)}}:o&&!a?{$a:function(){return K.matMul(F,!1,!0)},$b:function(){return G.matMul(F,!1,!1)}}:{$a:function(){return K.matMul(F,!0,!0)},$b:function(){return F.matMul(G,!0,!0)}}:{$a:function(){return F.matMul(K,!1,!0)},$b:function(){return G.matMul(F,!0,!1)}},L)}).reshape(C)}}),Pue=P({conv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,o=t.dataFormat,s=o===void 0?"NHWC":o,a=t.dilations,u=a===void 0?[1,1]:a,l=t.dimRoundingMode,c=t.bias,d=t.activation,h=d===void 0?"linear":d,f=t.preluActivationWeights,m=k(e,"x","conv2d"),v=k(n,"filter","conv2d"),y=m,g=!1;m.rank===3&&(g=!0,y=m.as4D(1,m.shape[0],m.shape[1],m.shape[2])),A(y.rank===4,function(){return"Error in fused conv2d: input must be rank 4, but got rank "+y.rank+"."}),A(v.rank===4,function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+v.rank+"."}),l!=null&&A(Et(i),function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+l+" but got pad "+i+"."}),A(y.shape[3]===v.shape[2],function(){return"Error in conv2d: depth of input ("+y.shape[3]+") must match input depth for filter "+v.shape[2]+"."}),A(tr(r,u),function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+u+"'"}),A(s==="NHWC",function(){return"Error in conv2d: got dataFormat of "+s+" but only NHWC is currently supported."});var w,b,x=ca(y.shape,v.shape,r,u,i,l);c!=null&&(w=Dt(w=k(c,"bias","fused conv2d"),m)[0],De(x.outShape,w.shape)),f!=null&&(b=k(f,"prelu weights","fused conv2d"));var _={x:y,$filter:v};c!=null&&(_.$bias=w),f!=null&&(_.$preluActivationWeights=b);var E=O.runKernel(function(I,C){var S=I.fusedConv2d({input:y,filter:v,convInfo:x,bias:w,activation:h,preluActivationWeights:b});return C([v,y,S]),S},_,function(I,C){var S,N=C,R=N[0],D=N[1],W=N[2];if(h==null||h==="linear")S=I;else{if(h!=="relu")throw new Error("Gradient for activation "+h+" has not been implemented yet.");S=I.mul(W.step())}A(Tu(u),function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+u+"'"});var F={};return c!=null&&(F={$bias:function(){var G=S,K=Ot(w.shape,S.shape);return K.length>0&&(G=G.sum(K)),G.reshape(w.shape)}}),Object.assign({x:function(){return fj(D.shape,S,R,r,i)},$filter:function(){return JC(D,S,R.shape,r,i)}},F)});return g?E.as3D(E.shape[1],E.shape[2],E.shape[3]):E}}),Due=P({depthwiseConv2d_:function(t){var e=t.x,n=t.filter,r=t.strides,i=t.pad,o=(t.dataFormat,t.dilations),s=o===void 0?[1,1]:o,a=t.dimRoundingMode,u=t.bias,l=t.activation,c=l===void 0?"linear":l,d=t.preluActivationWeights,h=k(e,"x","depthwiseConv2d"),f=k(n,"filter","depthwiseConv2d"),m=h,v=!1;h.rank===3&&(v=!0,m=h.as4D(1,h.shape[0],h.shape[1],h.shape[2])),A(m.rank===4,function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+m.rank+"."}),A(f.rank===4,function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+f.rank+"."}),A(m.shape[3]===f.shape[2],function(){return"Error in fused depthwiseConv2d: number of input channels ("+m.shape[3]+") must match the inChannels dimension in filter "+f.shape[2]+"."}),s==null&&(s=[1,1]),A(tr(r,s),function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+s+"'"}),a!=null&&A(Et(i),function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+a+" but got pad "+i+"."});var y,g,w=ca(m.shape,f.shape,r,s,i,a,!0);u!=null&&(y=Dt(y=k(u,"bias","fused conv2d"),h)[0],De(w.outShape,y.shape)),d!=null&&(g=k(d,"prelu weights","fused depthwiseConv2d"));var b={x:m,$filter:f};u!=null&&(b.$bias=y),d!=null&&(b.$preluActivationWeights=g);var x=O.runKernel(function(_,E){var I=_.fusedDepthwiseConv2D({input:m,filter:f,convInfo:w,bias:y,activation:c,preluActivationWeights:g});return E([m,f,I]),I},b,function(_,E){A(Tu(s),function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+s+"'"});var I,C=E[0],S=E[1],N=E[2];if(c==null||c==="linear")I=_;else{if(c!=="relu")throw new Error("Gradient for activation "+c+" has not been implemented yet.");I=_.mul(N.step())}var R={};return u!=null&&(R={$bias:function(){var D=I,W=Ot(y.shape,I.shape);return W.length>0&&(D=D.sum(W)),D.reshape(y.shape)}}),Object.assign({x:function(){return pj(C.shape,I,S,w)},$filter:function(){return mj(C,I,S.shape,w)}},R)});return v?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),Tk=Object.freeze({matMul:Nue,conv2d:Pue,depthwiseConv2d:Due}),Oue=Object.freeze({image:tu,linalg:Hj,losses:qj,spectral:$j,fused:Tk,signal:zj,conv1d:XC,conv2d:ed,conv3d:QC,depthwiseConv2d:R0,separableConv2d:gj,conv2dTranspose:ZC,conv3dTranspose:vj,op:P,batchNormalization2d:jB,batchNormalization3d:UB,batchNormalization4d:zB,batchNormalization:WB,batchNorm:$C,batchNorm2d:qB,batchNorm3d:HB,batchNorm4d:GB,booleanMaskAsync:cj,complex:Kt,real:fr,imag:Xr,concat:Vr,concat1d:O$,concat2d:L$,concat3d:M$,concat4d:V$,split:lp,matMul:ek,dot:yj,outerProduct:wj,reverse:qu,reverse1d:bj,reverse2d:xj,reverse3d:_j,reverse4d:Ej,maxPool:tk,avgPool:nk,pool:Cj,maxPool3d:rk,avgPool3d:ik,slice:Ti,slice1d:kj,slice2d:Sj,slice3d:Aj,slice4d:Rj,abs:dC,acos:hC,acosh:fC,asin:pC,asinh:mC,atan:gC,atanh:vC,ceil:yC,clipByValue:wC,cos:bC,cosh:xC,erf:_C,exp:EC,expm1:IC,floor:TC,log:CC,log1p:kC,logSigmoid:DB,neg:w0,reciprocal:SC,round:AC,rsqrt:b0,sigmoid:RC,sign:NC,isNaN:OB,isInf:LB,isFinite:MB,sin:PC,sinh:DC,softplus:OC,sqrt:LC,square:MC,step:VB,tan:VC,tanh:FC,all:ok,any:sk,argMax:ak,argMin:uk,logSumExp:Pj,max:lk,mean:ck,min:dk,moments:Dj,sum:N0,prod:P0,equal:S0,equalStrict:ij,greater:qC,greaterEqual:A0,greaterEqualStrict:oj,greaterStrict:sj,less:HC,lessEqual:GC,lessEqualStrict:aj,lessStrict:uj,notEqual:KC,notEqualStrict:lj,add:_f,addN:jC,addStrict:YB,atan2:UC,div:I0,divStrict:XB,floorDiv:T0,maximum:gp,maximumStrict:QB,minimum:C0,minimumStrict:JB,mod:zC,modStrict:ZB,mul:k0,mulStrict:ej,pow:Ic,powStrict:tj,squaredDifference:WC,squaredDifferenceStrict:nj,sub:Tc,subStrict:rj,elu:hk,leakyRelu:fk,prelu:Oj,relu:pk,relu6:Lj,selu:mk,logicalAnd:mp,logicalNot:BC,logicalOr:_0,logicalXor:KB,where:Cu,whereAsync:E0,buffer:ke,print:F$,batchToSpaceND:f0,cast:KT,clone:$$,cumsum:B$,depthToSpace:YT,expandDims:Oi,eye:XT,multinomial:QT,oneHot:wf,pad:Wu,pad1d:j$,pad2d:U$,pad3d:z$,pad4d:W$,rand:q$,randomNormal:H$,randomGamma:G$,randomUniform:p0,reshape:cp,spaceToBatchND:m0,squeeze:g0,stack:Vo,tile:eu,truncatedNormal:JT,unstack:dp,setdiff1dAsync:ZT,fill:up,linspace:HT,ones:la,range:c0,scalar:ge,tensor:Xt,tensor1d:Ys,tensor2d:Za,tensor3d:qT,tensor4d:ls,tensor5d:P$,tensor6d:D$,zeros:ft,onesLike:d0,zerosLike:Ve,transpose:gk,softmax:hp,logSoftmax:tC,localResponseNormalization:vk,norm:yk,gather:vp,unsortedSegmentSum:YC,basicLSTMCell:Mj,multiRNNCell:Vj,movingAverage:Fj,stridedSlice:wk,topk:bk,scatterND:xk,fft:yp,ifft:Cc,rfft:wp,irfft:D0,sparseToDense:O0,gatherND:_k,diag:Bj,dropout:jj,hannWindow:L0,hammingWindow:Ek,frame:M0,stft:Ik,inTopKAsync:Wj});function fb(t,e,n,r){if(n==="linear")return t.linear(e);if(n==="relu")return t.relu(e);if(n==="elu")return t.elu(e);if(n==="relu6")return t.relu6(e);if(n==="prelu")return t.prelu(e,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var Lue=function(){function t(){if(this.blockSize=48,this.firstUse=!0,q().get("IS_BROWSER")){var e=typeof OffscreenCanvas<"u"?new OffscreenCanvas(300,150):typeof document<"u"?document.createElement("canvas"):null;e!==null&&(this.fromPixels2DContext=e.getContext("2d"))}this.data=new nC(this,O)}return t.prototype.register=function(e,n,r){if(this.firstUse&&(this.firstUse=!1,q().get("IS_NODE")&&F_("\n============================\nHi there . Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(e))throw new Error("Data buffer is already registered");this.data.set(e,{dtype:r})},t.prototype.write=function(e,n){if(n==null)throw new Error("MathBackendCPU.write(): values can not be null");this.data.get(e).values=n},t.prototype.fromPixels=function(e,n){if(e==null)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var r,i,o=e.data instanceof Uint8Array,s=typeof ImageData<"u"&&e instanceof ImageData,a=typeof HTMLVideoElement<"u"&&e instanceof HTMLVideoElement,u=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,l=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],c=l[0],d=l[1];if(q().get("IS_NODE")&&e.getContext==null)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(e.getContext!=null)r=e.getContext("2d").getImageData(0,0,c,d).data;else if(s||o)r=e.data;else{if(!u&&!a)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);if(this.fromPixels2DContext==null)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=c,this.fromPixels2DContext.canvas.height=d,this.fromPixels2DContext.drawImage(e,0,0,c,d),r=this.fromPixels2DContext.getImageData(0,0,c,d).data}if(n===4)i=new Int32Array(r);else{var h=c*d;i=new Int32Array(h*n);for(var f=0;f<h;f++)for(var m=0;m<n;++m)i[f*n+m]=r[4*f+m]}return qT(i,[d,c,n],"int32")},t.prototype.read=function(e){return pe(this,void 0,void 0,function(){return me(this,function(n){return[2,this.readSync(e)]})})},t.prototype.readSync=function(e){var n=this.data.get(e),r=n.dtype,i=n.complexTensors;return r==="complex64"?B_(this.readSync(i.real.dataId),this.readSync(i.imag.dataId)):this.data.get(e).values},t.prototype.bufferSync=function(e){var n=this.readSync(e.dataId),r=n;if(e.dtype==="string")try{r=n.map(function(i){return mf(i)})}catch(i){throw new Error("Failed to decode encoded string bytes into utf-8")}return ke(e.shape,e.dtype,r)},t.prototype.disposeData=function(e){if(this.data.has(e)){var n=this.data.get(e).complexTensors;n!=null&&(n.real.dispose(),n.imag.dispose()),this.data.delete(e)}},t.prototype.time=function(e){return pe(this,void 0,void 0,function(){var n;return me(this,function(r){return n=mi(),e(),[2,{kernelMs:mi()-n}]})})},t.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},t.prototype.complex=function(e,n){var r=ie.make(e.shape,{},"complex64");return this.data.get(r.dataId).complexTensors={real:O.keep(e.clone()),imag:O.keep(n.clone())},r},t.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},t.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},t.prototype.assertNotComplex=function(e,n){Array.isArray(e)||(e=[e]),e.forEach(function(r){r!=null&&A(r.dtype!=="complex64",function(){return n+" does not support complex64 tensors."})})},t.prototype.slice=function(e,n,r){if(this.assertNotComplex(e,"slice"),J$(e.shape,n,r)){var i=Z$(n,e.strides),o=ve(r);return Xt(this.readSync(e.dataId).subarray(i,i+o),r,e.dtype)}for(var s=ke(r,e.dtype),a=this.bufferSync(e),u=0;u<s.size;++u){var l=s.indexToLoc(u).map(function(c,d){return c+n[d]});s.values[u]=a.get.apply(a,l)}return s.toTensor()},t.prototype.stridedSlice=function(e,n,r,i){this.assertNotComplex(e,"stridedSlice");var o=eC(n,r,i);if(o.some(function(h){return h===0}))return Xt([],o);for(var s=ke(o,e.dtype),a=this.bufferSync(e),u=0;u<s.size;u++){for(var l=s.indexToLoc(u),c=new Array(l.length),d=0;d<c.length;d++)c[d]=l[d]*i[d]+n[d];s.set.apply(s,[a.get.apply(a,c)].concat(l))}return s.toTensor()},t.prototype.diag=function(e){for(var n=this.readSync(e.dataId),r=ke([e.size,e.size],e.dtype),i=r.values,o=0;o<n.length;o++)i[o*e.size+o]=n[o];return r.toTensor()},t.prototype.unstack=function(e,n){for(var r=e.shape[n],i=new Array(e.rank-1),o=0,s=0;s<e.rank;s++)s!==n&&(i[o++]=e.shape[s]);var a=new Array(e.rank).fill(0),u=e.shape.slice();u[n]=1;var l=new Array(r);for(s=0;s<l.length;s++)a[n]=s,l[s]=this.slice(e,a,u).reshape(i);return l},t.prototype.reverse=function(e,n){this.assertNotComplex(e,"reverse");for(var r=ke(e.shape,e.dtype),i=this.bufferSync(e),o=function(a){var u=r.indexToLoc(a),l=u.slice();n.forEach(function(c){return l[c]=e.shape[c]-1-l[c]}),r.set.apply(r,[i.get.apply(i,l)].concat(u))},s=0;s<r.size;s++)o(s);return r.toTensor()},t.prototype.concat=function(e,n){var r=this;if(e[0].dtype==="complex64"){var i=e.map(function(h){return fr(h)}),o=e.map(function(h){return Xr(h)});return Kt(this.concat(i,n),this.concat(o,n))}var s=e.map(function(h){var f=ve(h.shape.slice(n));return h.as2D(-1,f)}),a=Iu(s.map(function(h){return h.shape}),1),u=ke(a,e[0].dtype).values;if(s[0].shape[0]===1){var l=0;s.forEach(function(h){u.set(r.readSync(h.dataId),l),l+=h.size})}else{var c=0;s.forEach(function(h){for(var f=r.readSync(h.dataId),m=0,v=0;v<h.shape[0];++v)for(var y=v*a[1]+c,g=0;g<h.shape[1];++g)u[y+g]=f[m++];c+=h.shape[1]})}var d=Iu(e.map(function(h){return h.shape}),n);return Xt(u,d,e[0].dtype)},t.prototype.neg=function(e){return this.assertNotComplex(e,"neg"),this.multiply(ge(-1),e)},t.prototype.add=function(e,n){return e.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),n.cast("complex64"),function(r,i,o,s){return{real:r+o,imag:i+s}}):this.broadcastedBinaryOp(e,n,zt(e.dtype,n.dtype),function(r,i){return r+i})},t.prototype.addN=function(e){var n=this;this.assertNotComplex(e,"addN");for(var r=e.map(function(l){return n.readSync(l.dataId)}),i=ke(e[0].shape,e[0].dtype),o=i.values,s=0;s<e.length;s++)for(var a=r[s],u=0;u<o.length;u++)o[u]+=a[u];return i.toTensor()},t.prototype.subtract=function(e,n){return e.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),n.cast("complex64"),function(r,i,o,s){return{real:r-o,imag:i-s}}):this.broadcastedBinaryOp(e,n,zt(e.dtype,n.dtype),function(r,i){return r-i})},t.prototype.pow=function(e,n){return this.assertNotComplex([e,n],"pow"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,i){return Math.pow(r,i)})},t.prototype.batchMatMul=function(e,n,r,i){this.assertNotComplex([e,n],"matMul");for(var o=r?e.shape[1]:e.shape[2],s=r?e.shape[2]:e.shape[1],a=i?n.shape[1]:n.shape[2],u=e.shape[0],l=this.readSync(e.dataId),c=this.readSync(n.dataId),d=r?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],h=d[0],f=d[1],m=d[2],v=i?[1,n.strides[1],n.strides[0]]:[n.strides[1],1,n.strides[0]],y=v[0],g=v[1],w=v[2],b=s*a,x=ke([u,s,a],e.dtype),_=x.values,E=this.blockSize,I=0;I<u;I++)for(var C=0;C<s;C+=E)for(var S=0;S<a;S+=E)for(var N=0;N<o;N+=E)for(var R=Math.min(C+E,s),D=Math.min(S+E,a),W=Math.min(N+E,o),F=C;F<R;F++)for(var G=S;G<D;G++){for(var K=0,j=N;j<W;j++)K+=l[I*h+F*f+j*m]*c[j*y+G*g+I*w];_[I*b+(F*a+G)]+=K}return x.toTensor()},t.prototype.fusedBatchMatMul=function(e){var n=e.a,r=e.b,i=e.transposeA,o=e.transposeB,s=e.bias,a=e.activation,u=e.preluActivationWeights,l=this.batchMatMul(n,r,i,o);return s&&(l=this.add(l,s)),a&&(l=fb(this,l,a,u)),l},t.prototype.multiply=function(e,n){return e.dtype==="complex64"||n.dtype==="complex64"?this.broadcastedBinaryComplexOp(e.cast("complex64"),n.cast("complex64"),function(r,i,o,s){return{real:r*o-i*s,imag:r*s+i*o}}):this.broadcastedBinaryOp(e,n,zt(e.dtype,n.dtype),function(r,i){return r*i})},t.prototype.realDivide=function(e,n){return this.assertNotComplex([e,n],"realDivide"),this.broadcastedBinaryOp(e,n,"float32",function(r,i){return r/i})},t.prototype.floorDiv=function(e,n){return this.assertNotComplex([e,n],"floorDiv"),this.broadcastedBinaryOp(e,n,"int32",function(r,i){return Math.floor(r/i)})},t.prototype.sum=function(e,n){this.assertNotComplex(e,"sum"),dr("sum",n,e.rank);for(var r=wn(e.shape,n),i=r[0],o=r[1],s=ft(i,zt(e.dtype,"int32")),a=ve(o),u=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*a,h=0,f=0;f<a;++f)h+=l[d+f];u[c]=h}return s},t.prototype.prod=function(e,n){this.assertNotComplex(e,"sum");for(var r=wn(e.shape,n),i=r[0],o=r[1],s=ft(i,zt(e.dtype,"int32")),a=ve(o),u=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*a,h=1,f=0;f<a;++f)h*=l[d+f];u[c]=h}return s},t.prototype.unsortedSegmentSum=function(e,n,r){this.assertNotComplex(e,"unsortedSegmentSum");for(var i=[],o=e.rank-n.rank,s=0;s<o;++s)n=n.expandDims(s+1);for(s=0;s<r;++s){var a=ge(s,"int32"),u=S0(a,n).asType("float32").mul(e).sum(0);i.push(u)}return Vo(i)},t.prototype.argMin=function(e,n){this.assertNotComplex(e,"argMin");var r=[n];dr("argMin",r,e.rank);for(var i=wn(e.shape,r),o=i[0],s=i[1],a=ft(o,"int32"),u=ve(s),l=this.readSync(a.dataId),c=this.readSync(e.dataId),d=0;d<l.length;++d){for(var h=d*u,f=c[h],m=0,v=0;v<u;++v){var y=c[h+v];y<f&&(f=y,m=v)}l[d]=m}return a},t.prototype.argMax=function(e,n){this.assertNotComplex(e,"argMax");var r=[n];dr("argMax",r,e.rank);for(var i=wn(e.shape,r),o=i[0],s=i[1],a=ft(o,"int32"),u=ve(s),l=this.readSync(a.dataId),c=this.readSync(e.dataId),d=0;d<l.length;++d){for(var h=d*u,f=c[h],m=0,v=0;v<u;++v){var y=c[h+v];y>f&&(f=y,m=v)}l[d]=m}return a},t.prototype.cumsum=function(e,n,r,i){if(this.assertNotComplex(e,"cumsum"),n!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+n);for(var o=zt(e.dtype,"int32"),s=ft(e.shape,o),a=this.readSync(s.dataId),u=this.readSync(e.dataId),l=e.shape[e.rank-1],c=i?function(v,y){return v+l-y-1}:function(v,y){return v+y},d=0;d<u.length;d+=l)for(var h=0;h<l;h++){var f=c(d,h);if(h===0)a[f]=r?0:u[f];else{var m=c(d,h-1);a[f]=r?u[m]+a[m]:u[f]+a[m]}}return s},t.prototype.equal=function(e,n){return this.assertNotComplex([e,n],"equal"),this.broadcastedBinaryOp(e,n,"bool",function(r,i){return r===i?1:0})},t.prototype.notEqual=function(e,n){return this.assertNotComplex([e,n],"notEqual"),this.broadcastedBinaryOp(e,n,"bool",function(r,i){return r!==i?1:0})},t.prototype.less=function(e,n){return this.assertNotComplex([e,n],"less"),this.broadcastedBinaryOp(e,n,"bool",function(r,i){return r<i?1:0})},t.prototype.lessEqual=function(e,n){return this.assertNotComplex([e,n],"lessEqual"),this.broadcastedBinaryOp(e,n,"bool",function(r,i){return r<=i?1:0})},t.prototype.greater=function(e,n){return this.assertNotComplex([e,n],"greater"),this.broadcastedBinaryOp(e,n,"bool",function(r,i){return r>i?1:0})},t.prototype.greaterEqual=function(e,n){return this.assertNotComplex([e,n],"greaterEqual"),this.broadcastedBinaryOp(e,n,"bool",function(r,i){return r>=i?1:0})},t.prototype.logicalNot=function(e){this.assertNotComplex(e,"logicalNot");for(var n=this.readSync(e.dataId),r=new Uint8Array(n.length),i=0;i<n.length;++i)r[i]=n[i]?0:1;return ie.make(e.shape,{values:r},"bool")},t.prototype.logicalAnd=function(e,n){return this.assertNotComplex([e,n],"logicalAnd"),this.broadcastedBinaryOp(e,n,"bool",function(r,i){return r&&i})},t.prototype.logicalOr=function(e,n){return this.assertNotComplex([e,n],"logicalOr"),this.broadcastedBinaryOp(e,n,"bool",function(r,i){return r||i})},t.prototype.select=function(e,n,r){this.assertNotComplex([e,n,r],"select");for(var i=this.readSync(e.dataId),o=this.readSync(n.dataId),s=this.readSync(r.dataId),a=ft(n.shape,zt(n.dtype,r.dtype)),u=this.readSync(a.dataId),l=0,c=e.rank===0||e.rank>1||n.rank===1?1:ve(n.shape.slice(1)),d=0;d<i.length;d++)for(var h=0;h<c;h++)i[d]===1?u[l++]=o[d]:u[l++]=s[d];return a},t.prototype.where=function(e){this.assertNotComplex([e],"where");var n=this.readSync(e.dataId);return aC(e.shape,n)},t.prototype.topk=function(e,n,r){return this.assertNotComplex(e,"topk"),rB(this.readSync(e.dataId),e.shape,e.dtype,n)},t.prototype.min=function(e,n){this.assertNotComplex(e,"min"),dr("min",n,e.rank);for(var r=wn(e.shape,n),i=r[0],o=r[1],s=ft(i,e.dtype),a=ve(o),u=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*a,h=l[d],f=0;f<a;++f){var m=l[d+f];m<h&&(h=m)}u[c]=h}return s},t.prototype.minimum=function(e,n){return this.assertNotComplex([e,n],"minimum"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,i){return Math.min(r,i)})},t.prototype.mod=function(e,n){return this.assertNotComplex([e,n],"mod"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,i){var o=r%i;return r<0&&i<0||r>=0&&i>=0?o:(o+i)%i})},t.prototype.max=function(e,n){this.assertNotComplex(e,"max"),dr("max",n,e.rank);for(var r=wn(e.shape,n),i=r[0],o=r[1],s=ft(i,e.dtype),a=ve(o),u=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*a,h=l[d],f=0;f<a;++f){var m=l[d+f];m>h&&(h=m)}u[c]=h}return s},t.prototype.maximum=function(e,n){return this.assertNotComplex([e,n],"maximum"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,i){return Math.max(r,i)})},t.prototype.all=function(e,n){this.assertNotComplex(e,"all"),dr("all",n,e.rank);for(var r=wn(e.shape,n),i=r[0],o=r[1],s=ft(i,e.dtype),a=ve(o),u=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*a,h=l[d],f=0;f<a;++f){var m=l[d+f];h=h&&m}u[c]=h}return s},t.prototype.any=function(e,n){this.assertNotComplex(e,"any"),dr("any",n,e.rank);for(var r=wn(e.shape,n),i=r[0],o=r[1],s=ft(i,e.dtype),a=ve(o),u=this.readSync(s.dataId),l=this.readSync(e.dataId),c=0;c<u.length;++c){for(var d=c*a,h=l[d],f=0;f<a;++f){var m=l[d+f];h=h||m}u[c]=h}return s},t.prototype.squaredDifference=function(e,n){return this.assertNotComplex([e,n],"squaredDifference"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,i){var o=r-i;return o*o})},t.prototype.ceil=function(e){this.assertNotComplex(e,"ceil");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)r[i]=Math.ceil(n[i]);return ie.make(e.shape,{values:r})},t.prototype.floor=function(e){this.assertNotComplex(e,"floor");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)r[i]=Math.floor(n[i]);return ie.make(e.shape,{values:r})},t.prototype.sign=function(e){this.assertNotComplex(e,"x");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)n[i]<0?r[i]=-1:n[i]>0?r[i]=1:r[i]=0;return ie.make(e.shape,{values:r})},t.prototype.isNaN=function(e){this.assertNotComplex(e,"x");for(var n=this.readSync(e.dataId),r=new Uint8Array(n.length),i=0;i<n.length;++i)Number.isNaN(n[i])&&(r[i]=1);return ie.make(e.shape,{values:r},"bool")},t.prototype.isInf=function(e){this.assertNotComplex(e,"x");for(var n=this.readSync(e.dataId),r=new Uint8Array(n.length),i=0;i<n.length;++i)Math.abs(n[i])===1/0&&(r[i]=1);return ie.make(e.shape,{values:r},"bool")},t.prototype.isFinite=function(e){this.assertNotComplex(e,"x");for(var n=this.readSync(e.dataId),r=new Uint8Array(n.length),i=0;i<n.length;++i)Number.isFinite(n[i])&&(r[i]=1);return ie.make(e.shape,{values:r},"bool")},t.prototype.round=function(e){this.assertNotComplex(e,"round");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i){var o=Math.floor(n[i]);n[i]-o<.5?r[i]=Math.floor(n[i]):n[i]-o>.5?r[i]=Math.ceil(n[i]):r[i]=o%2==0?o:o+1}return ie.make(e.shape,{values:r})},t.prototype.exp=function(e){this.assertNotComplex(e,"exp");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)r[i]=Math.exp(n[i]);return ie.make(e.shape,{values:r})},t.prototype.expm1=function(e){this.assertNotComplex(e,"expm1");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)r[i]=Math.expm1(n[i]);return ie.make(e.shape,{values:r})},t.prototype.log=function(e){this.assertNotComplex(e,"log");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];r[i]=Math.log(o)}return ie.make(e.shape,{values:r})},t.prototype.log1p=function(e){this.assertNotComplex(e,"log1p");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];r[i]=Math.log1p(o)}return ie.make(e.shape,{values:r})},t.prototype.sqrt=function(e){this.assertNotComplex(e,"sqrt");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];r[i]=Math.sqrt(o)}return ie.make(e.shape,{values:r})},t.prototype.rsqrt=function(e){this.assertNotComplex(e,"rsqrt");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];r[i]=1/Math.sqrt(o)}return ie.make(e.shape,{values:r})},t.prototype.square=function(e){this.assertNotComplex(e,"square");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i){var o=n[i];r[i]=o*o}return ie.make(e.shape,{values:r})},t.prototype.reciprocal=function(e){this.assertNotComplex(e,"reciprocal");for(var n=this.readSync(e.dataId),r=new Float32Array(n.length),i=0;i<n.length;++i)r[i]=1/n[i];return ie.make(e.shape,{values:r})},t.prototype.linear=function(e){return e},t.prototype.relu=function(e){this.assertNotComplex(e,"relu");for(var n=ft(e.shape,e.dtype),r=this.readSync(n.dataId),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.max(0,i[o]);return n},t.prototype.relu6=function(e){this.assertNotComplex(e,"relu");for(var n=ft(e.shape,e.dtype),r=this.readSync(n.dataId),i=this.readSync(e.dataId),o=0;o<i.length;++o)r[o]=Math.min(Math.max(0,i[o]),6);return n},t.prototype.prelu=function(e,n){return this.assertNotComplex([e,n],"prelu"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,i){return r<0?i*r:r})},t.prototype.elu=function(e){this.assertNotComplex(e,"elu");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var o=r[i];n[i]=o>=0?o:Math.exp(o)-1}return ie.make(e.shape,{values:n})},t.prototype.eluDer=function(e,n){this.assertNotComplex([e,n],"eluDer");for(var r=new Float32Array(n.size),i=this.readSync(n.dataId),o=this.readSync(e.dataId),s=0;s<i.length;++s){var a=i[s];r[s]=a>=1?o[s]:o[s]*(a+1)}return ie.make(n.shape,{values:r})},t.prototype.selu=function(e){this.assertNotComplex(e,"selu");for(var n=lC,r=cC,i=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var a=o[s];i[s]=a>=0?r*a:n*(Math.exp(a)-1)}return ie.make(e.shape,{values:i})},t.prototype.clip=function(e,n,r){this.assertNotComplex(e,"clip");for(var i=new Float32Array(e.size),o=this.readSync(e.dataId),s=0;s<o.length;++s){var a=o[s];i[s]=a>r?r:a<n?n:a}return ie.make(e.shape,{values:i})},t.prototype.abs=function(e){for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.abs(r[i]);return ie.make(e.shape,{values:n})},t.prototype.complexAbs=function(e){for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<e.size;++i){var o=r[2*i],s=r[2*i+1];n[i]=Math.hypot(o,s)}return ie.make(e.shape,{values:n})},t.prototype.int=function(e){this.assertNotComplex(e,"int");for(var n=new Int32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=r[i];return ie.make(e.shape,{values:n},"int32")},t.prototype.sigmoid=function(e){this.assertNotComplex(e,"sigmoid");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=1/(1+Math.exp(-r[i]));return ie.make(e.shape,{values:n})},t.prototype.softplus=function(e){this.assertNotComplex(e,"softplus");for(var n=Math.log(11920928955078125e-23)+2,r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var s=i[o]>-n,a=i[o]<n,u=Math.exp(i[o]),l=void 0;l=a?u:s?i[o]:Math.log(1+u),r[o]=l}return ie.make(e.shape,{values:r})},t.prototype.sin=function(e){this.assertNotComplex(e,"sin");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.sin(r[i]);return ie.make(e.shape,{values:n})},t.prototype.cos=function(e){this.assertNotComplex(e,"cos");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.cos(r[i]);return ie.make(e.shape,{values:n})},t.prototype.tan=function(e){this.assertNotComplex(e,"tan");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.tan(r[i]);return ie.make(e.shape,{values:n})},t.prototype.asin=function(e){this.assertNotComplex(e,"asin");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.asin(r[i]);return ie.make(e.shape,{values:n})},t.prototype.acos=function(e){this.assertNotComplex(e,"acos");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.acos(r[i]);return ie.make(e.shape,{values:n})},t.prototype.atan=function(e){this.assertNotComplex(e,"atan");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.atan(r[i]);return ie.make(e.shape,{values:n})},t.prototype.atan2=function(e,n){return this.assertNotComplex([e,n],"atan2"),this.broadcastedBinaryOp(e,n,e.dtype,function(r,i){return Math.atan2(r,i)})},t.prototype.sinh=function(e){this.assertNotComplex(e,"sinh");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.sinh(r[i]);return ie.make(e.shape,{values:n})},t.prototype.cosh=function(e){this.assertNotComplex(e,"cosh");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.cosh(r[i]);return ie.make(e.shape,{values:n})},t.prototype.tanh=function(e){this.assertNotComplex(e,"tanh");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=W3(r[i]);return ie.make(e.shape,{values:n})},t.prototype.asinh=function(e){this.assertNotComplex(e,"asinh");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.asinh(r[i]);return ie.make(e.shape,{values:n})},t.prototype.acosh=function(e){this.assertNotComplex(e,"acosh");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.acosh(r[i]);return ie.make(e.shape,{values:n})},t.prototype.atanh=function(e){this.assertNotComplex(e,"atanh");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.atanh(r[i]);return ie.make(e.shape,{values:n})},t.prototype.erf=function(e){this.assertNotComplex(e,"erf");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var o=Math.sign(r[i]),s=Math.abs(r[i]),a=1/(1+.3275911*s);n[i]=o*(1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-s*s))}return ie.make(e.shape,{values:n})},t.prototype.step=function(e,n){n===void 0&&(n=0),this.assertNotComplex(e,"step");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var s=i[o];isNaN(s)?r[o]=NaN:r[o]=s>0?1:n}return ie.make(e.shape,{values:r})},t.prototype.fusedConv2d=function(e){var n=e.input,r=e.filter,i=e.convInfo,o=e.bias,s=e.activation,a=e.preluActivationWeights,u=this.conv2d(n,r,i);return o&&(u=this.add(u,o)),s&&(u=fb(this,u,s,a)),u},t.prototype.conv2d=function(e,n,r){this.assertNotComplex([e,n],"conv2d");for(var i=r.filterHeight,o=r.filterWidth,s=r.dilationHeight,a=r.dilationWidth,u=r.padInfo.left,l=r.padInfo.top,c=r.dataFormat==="channelsLast",d=ke(r.outShape,e.dtype),h=e.strides[0],f=c?e.strides[1]:e.strides[2],m=c?e.strides[2]:1,v=c?1:e.strides[1],y=d.strides[0],g=c?d.strides[1]:d.strides[2],w=c?d.strides[2]:1,b=c?1:d.strides[1],x=this.readSync(e.dataId),_=this.readSync(n.dataId),E=d.values,I=0;I<r.batchSize;++I)for(var C=I*h,S=I*y,N=0;N<r.outHeight;++N)for(var R=S+N*g,D=N*r.strideHeight-l,W=0;W<i;W++){var F=D+W*s;if(!(F<0||F>=r.inHeight))for(var G=W*n.strides[0],K=C+F*f,j=0;j<r.outWidth;++j)for(var L=R+j*w,V=j*r.strideWidth-u,M=0;M<o;M++){var Y=V+M*a;if(!(Y<0||Y>=r.inWidth))for(var X=K+Y*m,se=G+M*n.strides[1],re=0;re<r.inChannels;++re){for(var xe=x[X+re*v],ce=0;ce<r.outChannels;++ce)E[L+ce*b]+=xe*_[se+ce];se+=r.outChannels}}}return d.toTensor()},t.prototype.conv3d=function(e,n,r){for(var i=r.filterDepth,o=r.filterHeight,s=r.filterWidth,a=r.dilationDepth,u=r.dilationHeight,l=r.dilationWidth,c=r.padInfo.front,d=r.padInfo.left,h=r.padInfo.top,f=ke(r.outShape,e.dtype),m=this.readSync(e.dataId),v=this.readSync(n.dataId),y=f.values,g=0;g<r.batchSize;++g)for(var w=g*e.strides[0],b=g*f.strides[0],x=0;x<r.outDepth;++x)for(var _=b+x*f.strides[1],E=x*r.strideDepth-c,I=0;I<i;I++){var C=E+I*a;if(!(C<0||C>=r.inDepth))for(var S=I*n.strides[0],N=w+C*e.strides[1],R=0;R<r.outHeight;++R)for(var D=_+R*f.strides[2],W=R*r.strideHeight-h,F=0;F<o;F++){var G=W+F*u;if(!(G<0||G>=r.inHeight))for(var K=S+F*n.strides[1],j=N+G*e.strides[2],L=0;L<r.outWidth;++L)for(var V=D+L*r.outChannels,M=L*r.strideWidth-d,Y=0;Y<s;Y++){var X=M+Y*l;if(!(X<0||X>=r.inWidth))for(var se=K+Y*n.strides[2],re=j+X*r.inChannels,xe=se,ce=0;ce<r.inChannels;++ce){for(var _e=m[re+ce],Ce=0;Ce<r.outChannels;++Ce)y[V+Ce]+=_e*v[xe+Ce];xe+=r.outChannels}}}}return f.toTensor()},t.prototype.conv2dDerInput=function(e,n,r){this.assertNotComplex([e,n],"conv2dDerInput");for(var i=ke(r.inShape,"float32"),o=i.values,s=this.readSync(e.dataId),a=this.readSync(n.dataId),u=n.strides,l=u[0],c=u[1],d=u[2],h=r.batchSize,f=r.filterHeight,m=r.filterWidth,v=r.inChannels,y=r.inHeight,g=r.inWidth,w=r.outChannels,b=r.outHeight,x=r.outWidth,_=r.strideHeight,E=r.strideWidth,I=r.dataFormat,C=f-1-r.padInfo.top,S=m-1-r.padInfo.left,N=I==="channelsLast",R=i.strides[0],D=N?i.strides[1]:i.strides[2],W=N?i.strides[2]:1,F=N?1:i.strides[1],G=e.strides[0],K=N?e.strides[1]:e.strides[2],j=N?e.strides[2]:1,L=N?1:e.strides[1],V=0;V<h;++V)for(var M=0;M<v;++M)for(var Y=0;Y<y;++Y)for(var X=Y-C,se=Math.max(0,Math.ceil(X/_)),re=Math.min(b,(f+X)/_),xe=0;xe<g;++xe){for(var ce=xe-S,_e=Math.max(0,Math.ceil(ce/E)),Ce=Math.min(x,(m+ce)/E),tt=0,Ue=se;Ue<re;++Ue)for(var Ke=Ue*_-X,ze=_e;ze<Ce;++ze)for(var dt=G*V+K*Ue+j*ze,Ye=l*(f-1-Ke)+c*(m-1-(ze*E-ce))+d*M,Xe=0;Xe<w;++Xe)tt+=s[dt+L*Xe]*a[Ye+Xe];o[R*V+D*Y+W*xe+F*M]=tt}return i.toTensor()},t.prototype.conv3dDerInput=function(e,n,r){for(var i=ke(r.inShape,"float32"),o=i.values,s=i.strides,a=s[0],u=s[1],l=s[2],c=s[3],d=this.readSync(e.dataId),h=e.strides,f=h[0],m=h[1],v=h[2],y=h[3],g=this.readSync(n.dataId),w=n.strides,b=w[0],x=w[1],_=w[2],E=w[3],I=r.batchSize,C=r.filterDepth,S=r.filterHeight,N=r.filterWidth,R=r.inChannels,D=r.inDepth,W=r.inHeight,F=r.inWidth,G=r.outChannels,K=r.outDepth,j=r.outHeight,L=r.outWidth,V=r.strideDepth,M=r.strideHeight,Y=r.strideWidth,X=C-1-r.padInfo.front,se=S-1-r.padInfo.top,re=N-1-r.padInfo.left,xe=0;xe<I;++xe)for(var ce=0;ce<R;++ce)for(var _e=0;_e<D;++_e)for(var Ce=_e-X,tt=Math.max(0,Math.ceil(Ce/V)),Ue=Math.min(K,(C+Ce)/V),Ke=0;Ke<W;++Ke)for(var ze=Ke-se,dt=Math.max(0,Math.ceil(ze/M)),Ye=Math.min(j,(S+ze)/M),Xe=0;Xe<F;++Xe){for(var An=Xe-re,zr=Math.max(0,Math.ceil(An/Y)),ir=Math.min(L,(N+An)/Y),ai=0,Bn=tt;Bn<Ue;++Bn)for(var or=Bn*V-Ce,ui=dt;ui<Ye;++ui)for(var td=ui*M-ze,so=zr;so<ir;++so)for(var nd=f*xe+m*Bn+v*ui+y*so,Zo=b*(C-1-or)+x*(S-1-td)+_*(N-1-(so*Y-An))+E*ce,li=0;li<G;++li)ai+=d[nd+li]*g[Zo+li];o[a*xe+u*_e+l*Ke+c*Xe+ce]=ai}return i.toTensor()},t.prototype.conv2dDerFilter=function(e,n,r){this.assertNotComplex([e,n],"conv2dDerFilter");for(var i=r.strideHeight,o=r.strideWidth,s=r.filterHeight,a=r.filterWidth,u=r.dataFormat==="channelsLast",l=ke(r.filterShape,"float32"),c=r.padInfo.left,d=r.padInfo.top,h=this.bufferSync(e),f=this.bufferSync(n),m=0;m<s;++m)for(var v=Math.max(0,Math.ceil((d-m)/i)),y=Math.min(r.outHeight,(r.inHeight+d-m)/i),g=0;g<a;++g)for(var w=Math.max(0,Math.ceil((c-g)/o)),b=Math.min(r.outWidth,(r.inWidth+c-g)/o),x=0;x<r.inChannels;++x)for(var _=0;_<r.outChannels;++_){for(var E=0,I=0;I<r.batchSize;++I)for(var C=v;C<y;++C)for(var S=m+C*i-d,N=w;N<b;++N){var R=g+N*o-c;E+=u?h.get(I,S,R,x)*f.get(I,C,N,_):h.get(I,x,S,R)*f.get(I,_,C,N)}l.set(E,m,g,x,_)}return l.toTensor()},t.prototype.conv3dDerFilter=function(e,n,r){for(var i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,a=r.filterDepth,u=r.filterHeight,l=r.filterWidth,c=ke(r.filterShape,"float32"),d=c.values,h=c.strides,f=h[0],m=h[1],v=h[2],y=h[3],g=this.readSync(n.dataId),w=n.strides,b=w[0],x=w[1],_=w[2],E=w[3],I=this.readSync(e.dataId),C=e.strides,S=C[0],N=C[1],R=C[2],D=C[3],W=r.padInfo.front,F=r.padInfo.left,G=r.padInfo.top,K=0;K<a;++K)for(var j=Math.max(0,Math.ceil((W-K)/i)),L=Math.min(r.outDepth,(r.inDepth+W-K)/i),V=K*f,M=0;M<u;++M)for(var Y=Math.max(0,Math.ceil((G-M)/o)),X=Math.min(r.outHeight,(r.inHeight+G-M)/o),se=M*m+V,re=0;re<l;++re)for(var xe=Math.max(0,Math.ceil((F-re)/s)),ce=Math.min(r.outWidth,(r.inWidth+F-re)/s),_e=re*v+se,Ce=0;Ce<r.inChannels;++Ce)for(var tt=Ce*y+_e,Ue=0;Ue<r.outChannels;++Ue){for(var Ke=0,ze=0;ze<r.batchSize;++ze)for(var dt=ze*S,Ye=ze*b,Xe=j;Xe<L;++Xe)for(var An=(K+Xe*i-W)*N+dt,zr=Xe*x+Ye,ir=Y;ir<X;++ir)for(var ai=(M+ir*o-G)*R+An,Bn=ir*_+zr,or=xe;or<ce;++or){var ui=or*E+Bn;Ke+=I[(re+or*s-F)*D+ai+Ce]*g[ui+Ue]}d[tt+Ue]=Ke}return c.toTensor()},t.prototype.fusedDepthwiseConv2D=function(e){var n=e.input,r=e.filter,i=e.convInfo,o=e.bias,s=e.activation,a=e.preluActivationWeights,u=this.depthwiseConv2D(n,r,i);return o&&(u=this.add(u,o)),s&&(u=fb(this,u,s,a)),u},t.prototype.depthwiseConv2D=function(e,n,r){this.assertNotComplex([e,n],"depthwiseConv2D");for(var i=r.filterHeight,o=r.filterWidth,s=r.dilationHeight,a=r.dilationWidth,u=r.padInfo.left,l=r.padInfo.top,c=r.outChannels/r.inChannels,d=ke(r.outShape,e.dtype),h=this.readSync(e.dataId),f=this.readSync(n.dataId),m=d.values,v=0;v<r.batchSize;++v)for(var y=v*e.strides[0],g=v*d.strides[0],w=0;w<r.outHeight;++w)for(var b=g+w*d.strides[1],x=w*r.strideHeight-u,_=0;_<i;++_){var E=x+_*s;if(!(E<0||E>=r.inHeight))for(var I=_*n.strides[0],C=y+E*e.strides[1],S=0;S<r.outWidth;++S)for(var N=b+S*d.strides[2],R=S*r.strideWidth-l,D=0;D<o;++D){var W=R+D*a;if(!(W<0||W>=r.inWidth))for(var F=I+D*n.strides[1],G=C+W*r.inChannels,K=N,j=F,L=0;L<r.inChannels;++L){for(var V=h[G+L],M=0;M<c;++M)m[K+M]+=V*f[j+M];K+=c,j+=c}}}return d.toTensor()},t.prototype.depthwiseConv2DDerInput=function(e,n,r){this.assertNotComplex([e,n],"depthwiseConv2DDerInput");for(var i=ke(r.inShape,"float32"),o=i.values,s=i.strides,a=s[0],u=s[1],l=s[2],c=this.readSync(e.dataId),d=e.strides,h=d[0],f=d[1],m=d[2],v=this.readSync(n.dataId),y=n.strides,g=y[0],w=y[1],b=y[2],x=r.batchSize,_=r.filterHeight,E=r.filterWidth,I=r.inChannels,C=r.inHeight,S=r.inWidth,N=r.outChannels,R=r.outHeight,D=r.outWidth,W=r.strideHeight,F=r.strideWidth,G=_-1-r.padInfo.top,K=E-1-r.padInfo.left,j=N/I,L=0;L<x;++L)for(var V=0;V<I;++V)for(var M=0;M<C;++M)for(var Y=M-G,X=Math.max(0,Math.ceil(Y/W)),se=Math.min(R,(_+Y)/W),re=0;re<S;++re){for(var xe=re-K,ce=Math.max(0,Math.ceil(xe/F)),_e=Math.min(D,(E+xe)/F),Ce=0,tt=X;tt<se;++tt)for(var Ue=tt*W-Y,Ke=ce;Ke<_e;++Ke)for(var ze=h*L+f*tt+m*Ke,dt=g*(_-1-Ue)+w*(E-1-(Ke*F-xe))+b*V,Ye=0;Ye<j;++Ye)Ce+=c[ze+(V*j+Ye)]*v[dt+Ye];o[a*L+u*M+l*re+V]=Ce}return i.toTensor()},t.prototype.depthwiseConv2DDerFilter=function(e,n,r){this.assertNotComplex([e,n],"depthwiseConv2DDerFilter");for(var i=r.strideHeight,o=r.strideWidth,s=r.filterHeight,a=r.filterWidth,u=ke(r.filterShape,"float32"),l=r.padInfo.left,c=r.padInfo.top,d=r.outChannels/r.inChannels,h=this.bufferSync(e),f=this.bufferSync(n),m=0;m<s;++m)for(var v=Math.max(0,Math.ceil((c-m)/i)),y=Math.min(r.outHeight,(r.inHeight+c-m)/i),g=0;g<a;++g)for(var w=Math.max(0,Math.ceil((l-g)/o)),b=Math.min(r.outWidth,(r.inWidth+l-g)/o),x=0;x<r.outChannels;++x){for(var _=Math.trunc(x/d),E=x%d,I=0,C=0;C<r.batchSize;++C)for(var S=v;S<y;++S)for(var N=m+S*i-c,R=w;R<b;++R){var D=g+R*o-l;I+=h.get(C,N,D,_)*f.get(C,S,R,x)}u.set(I,m,g,_,E)}return u.toTensor()},t.prototype.tile=function(e,n){return this.assertNotComplex(e,"tile"),nB(this.bufferSync(e),n)},t.prototype.pad=function(e,n,r){this.assertNotComplex(e,"pad");var i=n.map(function(d,h){return d[0]+e.shape[h]+d[1]}),o=n.map(function(d){return d[0]}),s=this.bufferSync(e),a=ke(i,e.dtype);r!==0&&a.values.fill(r);for(var u=0;u<e.size;u++){var l=s.indexToLoc(u),c=l.map(function(d,h){return d+o[h]});a.set.apply(a,[s.get.apply(s,l)].concat(c))}return a.toTensor()},t.prototype.transpose=function(e,n){this.assertNotComplex(e,"transpose");for(var r=new Array(e.rank),i=0;i<r.length;i++)r[i]=e.shape[n[i]];var o=this.readSync(e.dataId),s=ke(r,e.dtype),a=this.bufferSync(e);for(i=0;i<e.size;++i){for(var u=a.indexToLoc(i),l=new Array(u.length),c=0;c<l.length;c++)l[c]=u[n[c]];var d=s.locToIndex(l);s.values[d]=o[i]}return s.toTensor()},t.prototype.gather=function(e,n,r){this.assertNotComplex([e,n],"gather");var i=e.shape.slice(),o=this.readSync(n.dataId);i[r]=o.length;for(var s=ke(i,e.dtype),a=this.bufferSync(e),u=0;u<s.size;++u){var l=s.indexToLoc(u),c=l.slice();c[r]=o[l[r]];var d=a.locToIndex(c);s.values[u]=a.values[d]}return s.toTensor()},t.prototype.batchToSpaceND=function(e,n,r){this.assertNotComplex([e],"batchToSpaceND");var i=n.reduce(function(c,d){return c*d}),o=lv(e.shape,n,i),s=cv(o.length,n.length),a=dv(e.shape,n,i),u=K$(r,n.length),l=Y$(a,r,n.length);return e.reshape(o).transpose(s).reshape(a).slice(u,l)},t.prototype.spaceToBatchND=function(e,n,r){this.assertNotComplex([e],"spaceToBatchND");var i=n.reduce(function(d,h){return d*h}),o=[[0,0]];o.push.apply(o,r);for(var s=1+n.length;s<e.shape.length;++s)o.push([0,0]);var a=e.pad(o),u=lv(a.shape,n,i,!1),l=cv(u.length,n.length,!1),c=dv(a.shape,n,i,!1);return a.reshape(u).transpose(l).reshape(c)},t.prototype.pool=function(e,n,r){this.assertNotComplex(e,"pool");for(var i=n.strideHeight,o=n.strideWidth,s=n.dilationHeight,a=n.dilationWidth,u=n.effectiveFilterHeight,l=n.effectiveFilterWidth,c=n.padInfo.top,d=n.padInfo.left,h=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,f=this.readSync(e.dataId),m=ke(n.outShape,e.dtype),v=m.values,y=n.outShape[1]*n.outShape[2]*n.outShape[3],g=n.outShape[2]*n.outShape[3],w=n.outShape[3],b=0;b<n.batchSize;++b)for(var x=b*y,_=b*e.strides[0],E=0;E<n.inChannels;++E)for(var I=0;I<n.outHeight;++I)for(var C=I*i-c,S=Math.max(0,C),N=Math.min(n.inHeight,u+C),R=x+I*g,D=0;D<n.outWidth;++D){for(var W=D*o-d,F=Math.max(0,W),G=Math.min(n.inWidth,l+W),K=h,j=0,L=0,V=S;V<N;V+=s){for(var M=_+V*e.strides[1],Y=F;Y<G;Y+=a){var X=f[M+Y*e.strides[2]+E];r==="max"&&X>K?K=X:r==="avg"&&(j+=X,L++)}if(isNaN(K))break}v[R+D*w+E]=r==="avg"?j/L:K}return m.toTensor()},t.prototype.maxPool=function(e,n){return this.pool(e,n,"max")},t.prototype.maxPoolPositions=function(e,n){for(var r=ke(n.outShape,"int32"),i=n.strideHeight,o=n.strideWidth,s=n.dilationHeight,a=n.dilationWidth,u=n.effectiveFilterHeight,l=n.effectiveFilterWidth,c=n.padInfo.top,d=n.padInfo.left,h=this.bufferSync(e),f=0;f<n.batchSize;++f)for(var m=0;m<n.inChannels;++m)for(var v=0;v<n.outHeight;++v){for(var y=v*i-c,g=y;g<0;)g+=s;for(var w=Math.min(n.inHeight,u+y),b=0;b<n.outWidth;++b){for(var x=b*o-d,_=x;_<0;)_+=a;for(var E=Math.min(n.inWidth,l+x),I=Number.NEGATIVE_INFINITY,C=-1,S=g;S<w;S+=s)for(var N=S-y,R=_;R<E;R+=a){var D=R-x,W=h.get(f,S,R,m);W>I&&(I=W,C=N*l+D)}r.set(C,f,v,b,m)}}return r.toTensor()},t.prototype.maxPoolBackprop=function(e,n,r,i){this.assertNotComplex([n,r],"maxPoolBackprop");for(var o=this.maxPoolPositions(n,i),s=i.strideHeight,a=i.strideWidth,u=i.dilationHeight,l=i.dilationWidth,c=i.effectiveFilterHeight,d=i.effectiveFilterWidth,h=d-1-i.padInfo.left,f=c-1-i.padInfo.top,m=ke(n.shape,"float32"),v=this.bufferSync(o),y=this.bufferSync(e),g=0;g<i.batchSize;++g)for(var w=0;w<i.inChannels;++w)for(var b=0;b<i.inHeight;++b)for(var x=0;x<i.inWidth;++x){for(var _=b-f,E=x-h,I=0,C=0;C<c;C+=u){var S=(_+C)/s;if(!(S<0||S>=i.outHeight||Math.floor(S)!==S))for(var N=0;N<d;N+=l){var R=(E+N)/a;if(!(R<0||R>=i.outWidth||Math.floor(R)!==R)){var D=c*d-1-v.get(g,S,R,w)===C*d+N?1:0;D!==0&&(I+=y.get(g,S,R,w)*D)}}}m.set(I,g,b,x,w)}return m.toTensor()},t.prototype.avgPoolBackprop=function(e,n,r){this.assertNotComplex([e,n],"avgPoolBackprop");for(var i=r.strideHeight,o=r.strideWidth,s=r.filterHeight,a=r.filterWidth,u=r.dilationHeight,l=r.dilationWidth,c=r.effectiveFilterHeight,d=r.effectiveFilterWidth,h=d-1-r.padInfo.left,f=c-1-r.padInfo.top,m=ke(n.shape,"float32"),v=1/(s*a),y=this.bufferSync(e),g=0;g<r.batchSize;++g)for(var w=0;w<r.inChannels;++w)for(var b=0;b<r.inHeight;++b)for(var x=0;x<r.inWidth;++x){for(var _=b-f,E=x-h,I=0,C=0;C<c;C+=u){var S=(_+C)/i;if(!(S<0||S>=r.outHeight||Math.floor(S)!==S))for(var N=0;N<d;N+=l){var R=(E+N)/o;R<0||R>=r.outWidth||Math.floor(R)!==R||(I+=y.get(g,S,R,w))}}m.set(I*v,g,b,x,w)}return m.toTensor()},t.prototype.pool3d=function(e,n,r){this.assertNotComplex(e,"pool3d");for(var i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,u=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterDepth,d=n.effectiveFilterHeight,h=n.effectiveFilterWidth,f=n.padInfo.front,m=n.padInfo.top,v=n.padInfo.left,y=r==="max"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=this.readSync(e.dataId),w=ke(n.outShape,e.dtype),b=w.values,x=n.outShape[1]*n.outShape[2]*n.outShape[3]*n.outShape[4],_=n.outShape[2]*n.outShape[3]*n.outShape[4],E=n.outShape[3]*n.outShape[4],I=n.outShape[4],C=0;C<n.batchSize;++C)for(var S=C*x,N=C*e.strides[0],R=0;R<n.inChannels;++R)for(var D=0;D<n.outDepth;++D){for(var W=D*i-f,F=W;F<0;)F+=a;for(var G=Math.min(n.inDepth,c+W),K=S+D*_,j=0;j<n.outHeight;++j){for(var L=j*o-m,V=L;V<0;)V+=u;for(var M=Math.min(n.inHeight,d+L),Y=K+j*E,X=0;X<n.outWidth;++X){for(var se=X*s-v,re=se;re<0;)re+=l;for(var xe=Math.min(n.inWidth,h+se),ce=Y+X*I,_e=y,Ce=0,tt=0,Ue=F;Ue<G;Ue+=a){for(var Ke=N+Ue*e.strides[1],ze=V;ze<M;ze+=u){for(var dt=Ke+ze*e.strides[2],Ye=re;Ye<xe;Ye+=l){var Xe=g[dt+Ye*e.strides[3]+R];if(r==="max"&&Xe>_e?_e=Xe:r==="avg"&&(Ce+=Xe,tt++),isNaN(_e))break}if(isNaN(_e))break}if(isNaN(_e))break}b[ce+R]=r==="avg"?Ce/tt:_e}}}return w.toTensor()},t.prototype.avgPool3d=function(e,n){return this.assertNotComplex(e,"avgPool3d"),this.pool3d(e,n,"avg").toFloat()},t.prototype.avgPool3dBackprop=function(e,n,r){this.assertNotComplex([e,n],"avgPool3dBackprop");for(var i=r.strideDepth,o=r.strideHeight,s=r.strideWidth,a=r.filterDepth,u=r.filterHeight,l=r.filterWidth,c=r.dilationDepth,d=r.dilationHeight,h=r.dilationWidth,f=r.effectiveFilterDepth,m=r.effectiveFilterHeight,v=r.effectiveFilterWidth,y=f-1-r.padInfo.front,g=v-1-r.padInfo.left,w=m-1-r.padInfo.top,b=ke(n.shape,"float32"),x=1/(a*u*l),_=this.bufferSync(e),E=0;E<r.batchSize;++E)for(var I=0;I<r.inChannels;++I)for(var C=0;C<r.inDepth;++C)for(var S=0;S<r.inHeight;++S)for(var N=0;N<r.inWidth;++N){for(var R=C-y,D=S-w,W=N-g,F=0,G=0;G<f;G+=c){var K=(R+G)/i;if(!(K<0||K>=r.outDepth||Math.floor(K)!==K))for(var j=0;j<m;j+=d){var L=(D+j)/o;if(!(L<0||L>=r.outHeight||Math.floor(L)!==L))for(var V=0;V<v;V+=h){var M=(W+V)/s;M<0||M>=r.outWidth||Math.floor(M)!==M||(F+=_.get(E,K,L,M,I))}}}b.set(F*x,E,C,S,N,I)}return b.toTensor()},t.prototype.maxPool3d=function(e,n){return this.assertNotComplex(e,"maxPool3d"),this.pool3d(e,n,"max").toFloat()},t.prototype.maxPool3dPositions=function(e,n){for(var r=ke(n.outShape,"int32"),i=n.strideDepth,o=n.strideHeight,s=n.strideWidth,a=n.dilationDepth,u=n.dilationHeight,l=n.dilationWidth,c=n.effectiveFilterDepth,d=n.effectiveFilterHeight,h=n.effectiveFilterWidth,f=n.padInfo.front,m=n.padInfo.top,v=n.padInfo.left,y=this.bufferSync(e),g=0;g<n.batchSize;++g)for(var w=0;w<n.inChannels;++w)for(var b=0;b<n.outDepth;++b){for(var x=b*i-f,_=x;_<0;)_+=a;for(var E=Math.min(n.inDepth,c+x),I=0;I<n.outHeight;++I){for(var C=I*o-m,S=C;S<0;)S+=u;for(var N=Math.min(n.inHeight,d+C),R=0;R<n.outWidth;++R){for(var D=R*s-v,W=D;W<0;)W+=l;for(var F=Math.min(n.inWidth,h+D),G=Number.NEGATIVE_INFINITY,K=-1,j=_;j<E;j+=a)for(var L=j-x,V=S;V<N;V+=u)for(var M=V-C,Y=W;Y<F;Y+=l){var X=Y-D,se=y.get(g,j,V,Y,w);se>=G&&(G=se,K=L*d*h+M*d+X)}r.set(K,g,b,I,R,w)}}}return r.toTensor()},t.prototype.maxPool3dBackprop=function(e,n,r,i){this.assertNotComplex([n,r],"maxPool3dBackprop");for(var o=this.maxPool3dPositions(n,i),s=i.strideDepth,a=i.strideHeight,u=i.strideWidth,l=i.dilationDepth,c=i.dilationHeight,d=i.dilationWidth,h=i.effectiveFilterDepth,f=i.effectiveFilterHeight,m=i.effectiveFilterWidth,v=h-1-i.padInfo.front,y=m-1-i.padInfo.left,g=f-1-i.padInfo.top,w=ke(n.shape,"float32"),b=this.bufferSync(o),x=this.bufferSync(e),_=0;_<i.batchSize;++_)for(var E=0;E<i.inChannels;++E)for(var I=0;I<i.inDepth;++I)for(var C=0;C<i.inHeight;++C)for(var S=0;S<i.inWidth;++S){for(var N=I-v,R=C-g,D=S-y,W=0,F=0;F<h;F+=l){var G=(N+F)/s;if(!(G<0||G>=i.outDepth||Math.floor(G)!==G))for(var K=0;K<f;K+=c){var j=(R+K)/a;if(!(j<0||j>=i.outHeight||Math.floor(j)!==j))for(var L=0;L<m;L+=d){var V=(D+L)/u;if(!(V<0||V>=i.outWidth||Math.floor(V)!==V)){var M=h*f*m-1-b.get(_,G,j,V,E)===F*f*m+K*m+L?1:0;M!==0&&(W+=x.get(_,G,j,V,E)*M)}}}}w.set(W,_,I,C,S,E)}return w.toTensor()},t.prototype.cast=function(e,n){return iC(e,n,this)},t.prototype.reshape=function(e,n){return pv(e,n)},t.prototype.avgPool=function(e,n){return this.assertNotComplex(e,"avgPool"),this.pool(e,n,"avg").toFloat()},t.prototype.resizeBilinear=function(e,n,r,i){this.assertNotComplex(e,"resizeBilinear");for(var o=e.shape,s=o[0],a=o[1],u=o[2],l=o[3],c=this.readSync(e.dataId),d=new Float32Array(ve([s,n,r,l])),h=[i&&n>1?a-1:a,i&&r>1?u-1:u],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],m=0,v=h[0]/f[0],y=h[1]/f[1],g=0;g<s;g++)for(var w=0;w<n;w++)for(var b=v*w,x=Math.floor(b),_=b-x,E=Math.min(a-1,Math.ceil(b)),I=g*e.strides[0]+x*e.strides[1],C=g*e.strides[0]+E*e.strides[1],S=0;S<r;S++)for(var N=y*S,R=Math.floor(N),D=N-R,W=Math.min(u-1,Math.ceil(N)),F=I+R*e.strides[2],G=C+R*e.strides[2],K=I+ +W*e.strides[2],j=C+W*e.strides[2],L=0;L<l;L++){var V=c[F+L],M=c[G+L],Y=V+(c[K+L]-V)*D,X=Y+(M+(c[j+L]-M)*D-Y)*_;d[m++]=X}return Xt(d,[s,n,r,l])},t.prototype.resizeBilinearBackprop=function(e,n,r){this.assertNotComplex([e,n],"resizeBilinearBackprop");for(var i=n.shape,o=i[0],s=i[1],a=i[2],u=i[3],l=e.shape,c=l[1],d=l[2],h=new Float32Array(o*s*a*u),f=[r&&c>1?s-1:s,r&&d>1?a-1:a],m=[r&&c>1?c-1:c,r&&d>1?d-1:d],v=f[0]/m[0],y=f[1]/m[1],g=this.readSync(e.dataId),w=0,b=0;b<o;b++)for(var x=b*n.strides[0],_=0;_<c;_++)for(var E=_*v,I=Math.floor(E),C=Math.min(Math.ceil(E),s-1),S=x+I*n.strides[1],N=x+C*n.strides[1],R=E-I,D=1-R,W=0;W<d;W++)for(var F=W*y,G=Math.floor(F),K=Math.min(Math.ceil(F),a-1),j=F-G,L=1-j,V=S+G*n.strides[2],M=S+K*n.strides[2],Y=N+G*n.strides[2],X=N+K*n.strides[2],se=D*L,re=D*j,xe=R*L,ce=R*j,_e=0;_e<u;_e++){var Ce=g[w++];h[V+_e]+=Ce*se,h[M+_e]+=Ce*re,h[Y+_e]+=Ce*xe,h[X+_e]+=Ce*ce}return ls(h,[o,a,s,u],n.dtype)},t.prototype.resizeNearestNeighbor=function(e,n,r,i){this.assertNotComplex(e,"resizeNearestNeighbor");for(var o=e.shape,s=o[0],a=o[1],u=o[2],l=o[3],c=this.readSync(e.dataId),d=new Float32Array(s*n*r*l),h=[i&&n>1?a-1:a,i&&r>1?u-1:u],f=[i&&n>1?n-1:n,i&&r>1?r-1:r],m=h[0]/f[0],v=h[1]/f[1],y=0,g=0;g<s;g++)for(var w=g*e.strides[0],b=0;b<n;b++)for(var x=m*b,_=w+Math.min(a-1,i?Math.round(x):Math.floor(x))*e.strides[1],E=0;E<r;E++)for(var I=v*E,C=_+Math.min(u-1,i?Math.round(I):Math.floor(I))*e.strides[2],S=0;S<l;S++){var N=c[C+S];d[y++]=N}return Xt(d,[s,n,r,l],e.dtype)},t.prototype.resizeNearestNeighborBackprop=function(e,n,r){this.assertNotComplex([e,n],"resizeNearestNeighborBackprop");for(var i=n.shape,o=i[0],s=i[1],a=i[2],u=i[3],l=e.shape,c=l[1],d=l[2],h=new Float32Array(o*s*a*u),f=this.readSync(e.dataId),m=[r&&c>1?s-1:s,r&&d>1?a-1:a],v=[r&&c>1?c-1:c,r&&d>1?d-1:d],y=m[0]/v[0],g=m[1]/v[1],w=1/y,b=1/g,x=2*Math.ceil(w)+2,_=2*Math.ceil(b)+2,E=0;E<o;E++)for(var I=E*n.strides[0],C=0;C<s;C++)for(var S=I+C*n.strides[1],N=Math.floor(C*w),R=Math.floor(N-x/2),D=0;D<a;D++)for(var W=S+D*n.strides[2],F=Math.floor(D*b),G=Math.floor(F-_/2),K=0;K<u;K++){for(var j=0,L=0;L<x;L++){var V=L+R;if(!(V<0||V>=c)){var M=I+V*e.strides[1],Y=V*y;if(C===Math.min(s-1,r?Math.round(Y):Math.floor(Y)))for(var X=0;X<_;X++){var se=X+G;if(!(se<0||se>=d)){var re=M+se*e.strides[2],xe=se*g;D===Math.min(a-1,r?Math.round(xe):Math.floor(xe))&&(j+=f[re+K])}}}}h[W+K]=j}return ls(h,n.shape,n.dtype)},t.prototype.batchNormalization=function(e,n,r,i,o,s){this.assertNotComplex([e,n,r,o,s],"batchNorm");for(var a=this.readSync(e.dataId),u=this.readSync(n.dataId),l=this.readSync(r.dataId),c=o?this.readSync(o.dataId):new Float32Array([1]),d=s?this.readSync(s.dataId):new Float32Array([0]),h=new Float32Array(a.length),f=d.length,m=c.length,v=l.length,y=u.length,g=0,w=0,b=0,x=0,_=0;_<a.length;++_)h[_]=d[g++]+(a[_]-u[w++])*c[b++]/Math.sqrt(l[x++]+i),g>=f&&(g=0),w>=y&&(w=0),b>=m&&(b=0),x>=v&&(x=0);return ls(h,e.shape)},t.prototype.localResponseNormalization4D=function(e,n,r,i,o){this.assertNotComplex(e,"localResponseNormalization4D");var s=e.shape[3],a=s-1,u=this.readSync(e.dataId),l=e.size,c=new Float32Array(l);function d(v){for(var y=v%s,g=v-y+Math.max(0,y-n),w=v-y+Math.min(y+n,a),b=0;g<=w;g++){var x=u[g];b+=x*x}return b}for(var h=0;h<l;h++){var f=d(h),m=u[h]*Math.pow(r+i*f,-o);c[h]=m}return ls(c,e.shape)},t.prototype.LRNGrad=function(e,n,r,i,o,s,a){this.assertNotComplex(e,"LRNGrad");for(var u=e.shape[3],l=this.readSync(e.dataId),c=this.readSync(n.dataId),d=this.readSync(r.dataId),h=new Float32Array(e.size),f=e.size,m=0;m<f;m++){for(var v=m%u,y=m-v+Math.max(0,v-i),g=m-v+Math.min(u,v+i+1),w=0,b=y;b<g;b++)w+=Math.pow(c[b],2);for(w=s*w+o,b=y;b<g;b++){var x=-2*s*a*c[b]*d[m]/w;m===b&&(x+=Math.pow(w,-a)),x*=l[m],h[b]+=x}}return ls(h,e.shape)},t.prototype.multinomial=function(e,n,r,i){this.assertNotComplex(e,"multinomial");for(var o=n?e:hp(e),s=o.shape[0],a=o.shape[1],u=ft([s,r],"int32"),l=this.readSync(u.dataId),c=this.readSync(o.dataId),d=0;d<s;++d){var h=d*a,f=new Float32Array(a-1);f[0]=c[h];for(var m=1;m<f.length;++m)f[m]=f[m-1]+c[h+m];for(var v=h0(i.toString()),y=d*r,g=0;g<r;++g){var w=v();l[y+g]=f.length;for(var b=0;b<f.length;b++)if(w<f[b]){l[y+g]=b;break}}}return u},t.prototype.oneHot=function(e,n,r,i){this.assertNotComplex(e,"oneHot");var o=new Float32Array(e.size*n);o.fill(i);for(var s=this.readSync(e.dataId),a=0;a<e.size;++a)s[a]>=0&&s[a]<n&&(o[a*n+s[a]]=r);return Za(o,[e.size,n],"int32")},t.prototype.nonMaxSuppression=function(e,n,r,i,o){return this.assertNotComplex(e,"nonMaxSuppression"),sC(this.readSync(e.dataId),this.readSync(n.dataId),r,i,o)},t.prototype.fft=function(e){return this.fftBatch(e,!1)},t.prototype.ifft=function(e){return this.fftBatch(e,!0)},t.prototype.fftBatch=function(e,n){for(var r=e.shape[0],i=e.shape[1],o=ke(e.shape,"float32"),s=ke(e.shape,"float32"),a=fr(e).as2D(r,i),u=Xr(e).as2D(r,i),l=0;l<r;l++)for(var c=a.slice([l,0],[1,i]),d=u.slice([l,0],[1,i]),h=Kt(c,d),f=this.readSync(this.fftImpl(h,n).dataId),m=0;m<i;m++){var v=f2(f,m);o.values[l*i+m]=v.real,s.values[l*i+m]=v.imag}return Kt(o.toTensor(),s.toTensor()).as2D(r,i)},t.prototype.fftImpl=function(e,n){var r=e.as1D(),i=r.size;if(this.isExponentOf2(i)){var o=this.fftRadix2(r,i,n).as2D(e.shape[0],e.shape[1]);return n&&(o=Kt(fr(o).div(ge(i)),Xr(o).div(ge(i)))),o}var s=this.readSync(e.dataId),a=function(u){for(var l=new Float32Array(u.length/2),c=new Float32Array(u.length/2),d=0;d<u.length;d+=2)l[d/2]=u[d],c[d/2]=u[d+1];return{real:l,imag:c}}(this.fourierTransformByMatmul(s,i,n));return Kt(a.real,a.imag).as2D(e.shape[0],e.shape[1])},t.prototype.isExponentOf2=function(e){return(e&e-1)==0},t.prototype.fftRadix2=function(e,n,r){if(n===1)return e;var i=this.readSync(e.dataId),o=n/2,s=function(y){for(var g=Math.ceil(y.length/4),w=new Float32Array(g),b=new Float32Array(g),x=0;x<y.length;x+=4)w[Math.floor(x/4)]=y[x],b[Math.floor(x/4)]=y[x+1];return{real:w,imag:b}}(i),a=Kt(s.real,s.imag).as1D(),u=function(y){for(var g=Math.floor(y.length/4),w=new Float32Array(g),b=new Float32Array(g),x=2;x<y.length;x+=4)w[Math.floor(x/4)]=y[x],b[Math.floor(x/4)]=y[x+1];return{real:w,imag:b}}(i),l=Kt(u.real,u.imag).as1D();a=this.fftRadix2(a,o,r),l=this.fftRadix2(l,o,r);var c=function(y,g){for(var w=new Float32Array(y/2),b=new Float32Array(y/2),x=0;x<Math.ceil(y/2);x++){var _=(g?2:-2)*Math.PI*(x/y);w[x]=Math.cos(_),b[x]=Math.sin(_)}return{real:w,imag:b}}(n,r),d=Kt(c.real,c.imag).mul(l),h=a.add(d),f=a.sub(d),m=fr(h).concat(fr(f)),v=Xr(h).concat(Xr(f));return Kt(m,v).as1D()},t.prototype.fourierTransformByMatmul=function(e,n,r){for(var i=new Float32Array(2*n),o=0;o<n;o++){for(var s=0,a=0,u=0;u<n;u++){var l=Lse(o*u,n,r),c=f2(e,u);s+=c.real*l.real-c.imag*l.imag,a+=c.real*l.imag+c.imag*l.real}r&&(s/=n,a/=n),Ose(i,s,a,o)}return i},t.prototype.depthToSpace=function(e,n,r){A(r==="NHWC",function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+r}),A(n>1,function(){return"blockSize should be > 1 for depthToSpace, but was: "+n});for(var i=e.shape[0],o=e.shape[1],s=e.shape[2],a=e.shape[3],u=o*n,l=s*n,c=a/(n*n),d=this.readSync(e.dataId),h=new Float32Array(i*u*l*c),f=0,m=0;m<i;++m)for(var v=0;v<u;++v)for(var y=Math.floor(v/n),g=v%n,w=0;w<l;++w)for(var b=Math.floor(w/n),x=(g*n+w%n)*c,_=0;_<c;++_){var E=_+x+a*(b+s*(y+o*m));h[f++]=d[E]}return ls(h,[i,u,l,c])},t.prototype.broadcastedBinaryOp=function(e,n,r,i){var o=De(e.shape,n.shape),s=ke(o,r),a=this.readSync(e.dataId),u=this.readSync(n.dataId),l=Ua(e.shape,o),c=Ua(n.shape,o),d=s.values;if(l.length+c.length===0)for(var h=0;h<d.length;++h)d[h]=i(a[h%a.length],u[h%u.length]);else{var f=this.bufferSync(e),m=this.bufferSync(n),v=function(y){var g=s.indexToLoc(y),w=g.slice(-e.rank);l.forEach(function(E){return w[E]=0});var b=f.locToIndex(w),x=g.slice(-n.rank);c.forEach(function(E){return x[E]=0});var _=m.locToIndex(x);d[y]=i(a[b],u[_])};for(h=0;h<d.length;++h)v(h)}return s.toTensor()},t.prototype.broadcastedBinaryComplexOp=function(e,n,r){var i=De(e.shape,n.shape),o=ke(i,"float32"),s=ke(i,"float32"),a=this.readSync(e.dataId),u=this.readSync(n.dataId),l=Ua(e.shape,i),c=Ua(n.shape,i),d=o.values,h=s.values;if(l.length+c.length===0)for(var f=0;f<d.length;f++){var m=f%a.length,v=f%u.length,y=r(a[2*m],a[2*m+1],u[2*v],u[2*v+1]);d[f]=y.real,h[f]=y.imag}else{var g=this.bufferSync(this.data.get(e.dataId).complexTensors.real),w=this.bufferSync(this.data.get(n.dataId).complexTensors.real),b=function(x){var _=o.indexToLoc(x),E=_.slice(-e.rank);l.forEach(function(R){return E[R]=0});var I=g.locToIndex(E),C=_.slice(-n.rank);c.forEach(function(R){return C[R]=0});var S=w.locToIndex(C),N=r(a[2*I],a[2*I+1],u[2*S],u[2*S+1]);d[x]=N.real,h[x]=N.imag};for(f=0;f<d.length;f++)b(f)}return this.complex(o.toTensor(),s.toTensor())},t.prototype.split=function(e,n,r){return tB(e,n,r)},t.prototype.dispose=function(){},t.prototype.floatPrecision=function(){return 32},t.prototype.epsilon=function(){return 1e-7},t.prototype.cropAndResize=function(e,n,r,i,o,s){for(var a=e.shape,u=a[0],l=a[1],c=a[2],d=a[3],h=n.shape[0],f=i[0],m=i[1],v=ke([h,f,m,d],e.dtype),y=this.readSync(n.dataId),g=this.readSync(r.dataId),w=this.readSync(e.dataId),b=e.strides,x=v.strides,_=0;_<h;_++){var E=4*_,I=y[E],C=y[E+1],S=y[E+2],N=y[E+3],R=g[_];if(!(R>=u))for(var D=f>1?(S-I)*(l-1)/(f-1):0,W=m>1?(N-C)*(c-1)/(m-1):0,F=0;F<f;F++){var G=f>1?I*(l-1)+F*D:.5*(I+S)*(l-1);if(G<0||G>l-1)for(var K=0;K<m;K++)for(var j=0;j<d;j++){var L=j+K*x[2]+F*x[1]+_*x[0];v.values[L]=s}else if(o==="bilinear"){var V=Math.floor(G),M=Math.ceil(G),Y=G-V;for(K=0;K<m;K++)if((Ue=m>1?C*(c-1)+K*W:.5*(C+N)*(c-1))<0||Ue>c-1)for(j=0;j<d;j++)L=j+K*x[2]+F*x[1]+_*x[0],v.values[L]=s;else{var X=Math.floor(Ue),se=Math.ceil(Ue),re=Ue-X;for(j=0;j<d;j++){var xe=w[L=j+X*b[2]+V*b[1]+R*b[0]],ce=w[L=j+se*b[2]+V*b[1]+R*b[0]],_e=w[L=j+X*b[2]+M*b[1]+R*b[0]],Ce=xe+(ce-xe)*re,tt=_e+(w[L=j+se*b[2]+M*b[1]+R*b[0]]-_e)*re;L=j+K*x[2]+F*x[1]+_*x[0],v.values[L]=Ce+(tt-Ce)*Y}}}else for(K=0;K<m;++K){var Ue;if((Ue=m>1?C*(c-1)+K*W:.5*(C+N)*(c-1))<0||Ue>c-1)for(j=0;j<d;j++)L=j+K*x[2]+F*x[1]+_*x[0],v.values[L]=s;else{var Ke=Math.round(Ue),ze=Math.round(G);for(j=0;j<d;j++){var dt=j+Ke*b[2]+ze*b[1]+R*b[0],Ye=j+K*x[2]+F*x[1]+_*x[0];v.values[Ye]=w[dt]}}}}}return v.toTensor()},t.prototype.sparseToDense=function(e,n,r,i){var o=hv(0,e,r),s=o.sliceRank,a=o.numUpdates,u=o.sliceSize,l=o.strides,c=o.outputSize;return this.scatter(e,n,r,c,u,a,s,l,i,!1)},t.prototype.gatherND=function(e,n){var r=n.shape,i=r[r.length-1],o=X$(e,n),s=o[0],a=o[1],u=o[2],l=o[3];if(a===0)return Xt([],s,e.dtype);for(var c=new _c([a,u],e.dtype),d=this.readSync(n.dataId),h=this.readSync(e.dataId),f=0;f<a;f++){for(var m=[],v=0,y=0;y<i;y++){var g=d[f*i+y];v+=g*l[y],m.push(g)}if(v<0||v>=e.size/u)throw new Error("Invalid indices: "+m+" does not index into "+e.shape);for(var w=0;w<u;w++)c.values[f*u+w]=h[v*u+w]}return c.toTensor().reshape(s)},t.prototype.scatterND=function(e,n,r){var i=hv(0,e,r),o=i.sliceRank,s=i.numUpdates,a=i.sliceSize,u=i.strides,l=i.outputSize,c=ge(0);return this.scatter(e,n,r,l,a,s,o,u,c,!0)},t.prototype.fill=function(e,n,r){var i=pf(r=r||Xc(n),ve(e));return i.fill(n),ie.make(e,{values:i},r)},t.prototype.onesLike=function(e){if(e.dtype==="string")throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},t.prototype.zerosLike=function(e){var n=pf(e.dtype,ve(e.shape));return ie.make(e.shape,{values:n},e.dtype)},t.prototype.linspace=function(e,n,r){return oC(e,n,r)},t.prototype.scatter=function(e,n,r,i,o,s,a,u,l,c){var d=[i/o,o],h=this.readSync(e.dataId),f=this.readSync(n.dataId);if(i===0)return Xt([],r,n.dtype);var m=new _c(d,n.dtype);m.values.fill(this.readSync(l.dataId)[0]);for(var v=0;v<s;v++){for(var y=[],g=0,w=0;w<a;w++){var b=h[v*a+w];y.push(b),g+=b*u[w]}if(g<0||g>=i/o)throw new Error("Invalid indices: "+y+" does not index into "+r);for(var x=0;x<o;x++)c?m.values[g*o+x]+=f[v*o+x]:m.values[g*o+x]=n.rank===0?f[0]:f[v*o+x]}return m.toTensor().reshape(r)},t}();O.registerBackend("cpu",function(){return new Lue},1);var Mue=function(){function t(){}return t.prototype.fetch=function(e,n){return fetch(e,n)},t.prototype.now=function(){return performance.now()},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Browser's encoder only supports utf-8, but got "+n);return this.textEncoder==null&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return new TextDecoder(n).decode(e)},t}();q().get("IS_BROWSER")&&q().setPlatform("browser",new Mue);var pb,Vue=function(){return require("node-fetch")},Fue=function(){function t(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return t.prototype.fetch=function(e,n){return q().global.fetch!=null?q().global.fetch(e,n):(pb==null&&(pb=Vue()),pb(e,n))},t.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},t.prototype.encode=function(e,n){if(n!=="utf-8"&&n!=="utf8")throw new Error("Node built-in encoder only supports utf-8, but got "+n);return this.textEncoder.encode(e)},t.prototype.decode=function(e,n){return e.length===0?"":new this.util.TextDecoder(n).decode(e)},t}();q().get("IS_NODE")&&q().setPlatform("node",new Fue);var j_={float32:4,int32:4,uint16:2,uint8:1,bool:1},mv=4;function Kj(t,e){for(var n={},r=0,i=function(a){var u=a.name,l=a.dtype,c=a.shape,d=ve(c),h=void 0;if("quantization"in a){var f=a.quantization;if(f.dtype!=="uint8"&&f.dtype!=="uint16")throw new Error("Weight "+a.name+" has unknown quantization dtype "+f.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var m=j_[f.dtype],v=t.slice(r,r+d*m),y=f.dtype==="uint8"?new Uint8Array(v):new Uint16Array(v);if(l==="float32")h=Float32Array.from(y,function(E){return E*f.scale+f.min});else{if(l!=="int32")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=Int32Array.from(y,function(E){return Math.round(E*f.scale+f.min)})}r+=d*m}else if(l==="string"){var g=ve(a.shape);h=[];for(var w=0;w<g;w++){var b=new Uint32Array(t.slice(r,r+mv))[0];r+=mv;var x=new Uint8Array(t.slice(r,r+b));h.push(x),r+=b}}else{var _=j_[l];if(v=t.slice(r,r+d*_),l==="float32")h=new Float32Array(v);else if(l==="int32")h=new Int32Array(v);else{if(l!=="bool")throw new Error("Unsupported dtype in weight '"+u+"': "+l);h=new Uint8Array(v)}r+=d*_}n[u]=Xt(h,c,l)},o=0,s=e;o<s.length;o++)i(s[o]);return n}function $ue(t){if(t===null)throw new Error("Invalid input value: "+JSON.stringify(t));var e=0,n=[];t.forEach(function(o){if(e+=o.byteLength,n.push(o.byteLength===o.buffer.byteLength?o:new o.constructor(o)),!(o instanceof Float32Array||o instanceof Int32Array||o instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+o.constructor.name)});var r=new Uint8Array(e),i=0;return n.forEach(function(o){r.set(new Uint8Array(o.buffer),i),i+=o.byteLength}),r.buffer}var U_=typeof Buffer<"u"&&(typeof Blob>"u"||typeof atob>"u"||typeof btoa>"u");function O2(t){return U_?Buffer.byteLength(t):new Blob([t]).size}function Ck(t){var e=0;t.forEach(function(i){e+=i.byteLength});var n=new Uint8Array(e),r=0;return t.forEach(function(i){n.set(new Uint8Array(i),r),r+=i.byteLength}),n.buffer}function L2(t){for(t=t.trim();t.endsWith("/");)t=t.slice(0,t.length-1);var e=t.split("/");return e[e.length-1]}function bp(t){if(t.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:t.modelTopology==null?0:O2(JSON.stringify(t.modelTopology)),weightSpecsBytes:t.weightSpecs==null?0:O2(JSON.stringify(t.weightSpecs)),weightDataBytes:t.weightData==null?0:t.weightData.byteLength}}var Nr=function(){function t(){this.saveRouters=[],this.loadRouters=[]}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerSaveRouter=function(e){t.getInstance().saveRouters.push(e)},t.registerLoadRouter=function(e){t.getInstance().loadRouters.push(e)},t.getSaveHandlers=function(e){return t.getHandlers(e,"save")},t.getLoadHandlers=function(e,n){return t.getHandlers(e,"load",n)},t.getHandlers=function(e,n,r){var i=[];return(n==="load"?t.getInstance().loadRouters:t.getInstance().saveRouters).forEach(function(o){var s=o(e,r);s!==null&&i.push(s)}),i},t}(),Hl="://",Os=function(){function t(){this.managers={}}return t.getInstance=function(){return t.instance==null&&(t.instance=new t),t.instance},t.registerManager=function(e,n){A(e!=null,function(){return"scheme must not be undefined or null."}),e.endsWith(Hl)&&(e=e.slice(0,e.indexOf(Hl))),A(e.length>0,function(){return"scheme must not be an empty string."});var r=t.getInstance();A(r.managers[e]==null,function(){return"A model store manager is already registered for scheme '"+e+"'."}),r.managers[e]=n},t.getManager=function(e){var n=this.getInstance().managers[e];if(n==null)throw new Error("Cannot find model manager for scheme '"+e+"'");return n},t.getSchemes=function(){return Object.keys(this.getInstance().managers)},t}();function Gm(t){if(t.indexOf(Hl)===-1)throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+Os.getSchemes().join(","));return{scheme:t.split(Hl)[0],path:t.split(Hl)[1]}}function M2(t,e,n){return n===void 0&&(n=!1),pe(this,void 0,void 0,function(){var r,i,o,s,a,u,l,c,d;return me(this,function(h){switch(h.label){case 0:return A(t!==e,function(){return"Old path and new path are the same: '"+t+"'"}),A((r=Nr.getLoadHandlers(t)).length>0,function(){return"Copying failed because no load handler is found for source URL "+t+"."}),A(r.length<2,function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+t+"."}),i=r[0],A((o=Nr.getSaveHandlers(e)).length>0,function(){return"Copying failed because no save handler is found for destination URL "+e+"."}),A(o.length<2,function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+e+"."}),s=o[0],a=Gm(t).scheme,u=Gm(t).path,l=a===Gm(t).scheme,[4,i.load()];case 1:return c=h.sent(),n&&l?[4,Os.getManager(a).removeModel(u)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,s.save(c)];case 4:return d=h.sent(),!n||l?[3,6]:[4,Os.getManager(a).removeModel(u)];case 5:h.sent(),h.label=6;case 6:return[2,d.modelArtifactsInfo]}})})}var Wa="models_store",Es="model_info_store";function Yj(){if(!q().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var t=window,e=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB||t.shimIndexedDB;if(e==null)throw new Error("The current browser does not appear to support IndexedDB.");return e}function z_(t){var e=t.result;e.createObjectStore(Wa,{keyPath:"modelPath"}),e.createObjectStore(Es,{keyPath:"modelPath"})}var Gl=function(){function t(e){if(this.indexedDB=Yj(),e==null||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return t.prototype.save=function(e){return pe(this,void 0,void 0,function(){return me(this,function(n){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]})})},t.prototype.load=function(){return pe(this,void 0,void 0,function(){return me(this,function(e){return[2,this.databaseAction(this.modelPath)]})})},t.prototype.databaseAction=function(e,n){var r=this;return new Promise(function(i,o){var s=r.indexedDB.open("tensorflowjs",1);s.onupgradeneeded=function(){return z_(s)},s.onsuccess=function(){var a=s.result;if(n==null){var u=a.transaction(Wa,"readonly"),l=u.objectStore(Wa).get(r.modelPath);l.onsuccess=function(){if(l.result==null)return a.close(),o(new Error("Cannot find model with path '"+r.modelPath+"' in IndexedDB."));i(l.result.modelArtifacts)},l.onerror=function(v){return a.close(),o(l.error)},u.oncomplete=function(){return a.close()}}else{var c,d=bp(n),h=a.transaction(Es,"readwrite"),f=h.objectStore(Es),m=f.put({modelPath:r.modelPath,modelArtifactsInfo:d});m.onsuccess=function(){var v=(c=a.transaction(Wa,"readwrite")).objectStore(Wa).put({modelPath:r.modelPath,modelArtifacts:n,modelArtifactsInfo:d});v.onsuccess=function(){return i({modelArtifactsInfo:d})},v.onerror=function(y){var g=(f=h.objectStore(Es)).delete(r.modelPath);g.onsuccess=function(){return a.close(),o(v.error)},g.onerror=function(w){return a.close(),o(v.error)}}},m.onerror=function(v){return a.close(),o(m.error)},h.oncomplete=function(){c==null?a.close():c.oncomplete=function(){return a.close()}}}},s.onerror=function(a){return o(s.error)}})},t.URL_SCHEME="indexeddb://",t}(),V2=function(t){return q().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Gl.URL_SCHEME)?(e=t.slice(Gl.URL_SCHEME.length),new Gl(e)):null;var e};Nr.registerSaveRouter(V2),Nr.registerLoadRouter(V2);var Bue=function(){function t(){this.indexedDB=Yj()}return t.prototype.listModels=function(){return pe(this,void 0,void 0,function(){var e=this;return me(this,function(n){return[2,new Promise(function(r,i){var o=e.indexedDB.open("tensorflowjs",1);o.onupgradeneeded=function(){return z_(o)},o.onsuccess=function(){var s=o.result,a=s.transaction(Es,"readonly"),u=a.objectStore(Es).getAll();u.onsuccess=function(){for(var l={},c=0,d=u.result;c<d.length;c++){var h=d[c];l[h.modelPath]=h.modelArtifactsInfo}r(l)},u.onerror=function(l){return s.close(),i(u.error)},a.oncomplete=function(){return s.close()}},o.onerror=function(s){return i(o.error)}})]})})},t.prototype.removeModel=function(e){return pe(this,void 0,void 0,function(){var n=this;return me(this,function(r){var i;return e=(i=e).startsWith(Gl.URL_SCHEME)?i.slice(Gl.URL_SCHEME.length):i,[2,new Promise(function(o,s){var a=n.indexedDB.open("tensorflowjs",1);a.onupgradeneeded=function(){return z_(a)},a.onsuccess=function(){var u,l=a.result,c=l.transaction(Es,"readwrite"),d=c.objectStore(Es),h=d.get(e);h.onsuccess=function(){if(h.result==null)return l.close(),s(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var f=d.delete(e),m=function(){var v=(u=l.transaction(Wa,"readwrite")).objectStore(Wa).delete(e);v.onsuccess=function(){return o(h.result.modelArtifactsInfo)},v.onerror=function(y){return s(h.error)}};f.onsuccess=m,f.onerror=function(v){return m(),l.close(),s(h.error)}},h.onerror=function(f){return l.close(),s(h.error)},c.oncomplete=function(){u==null?l.close():u.oncomplete=function(){return l.close()}}},a.onerror=function(u){return s(a.error)}})]})})},t}();if(q().getBool("IS_BROWSER"))try{Os.registerManager(Gl.URL_SCHEME,new Bue)}catch(t){}var go="/",pl="tensorflowjs_models",Xj="info",jue="model_topology",Uue="weight_specs",zue="weight_data",Wue="model_metadata";function Qj(t){return{info:[pl,t,Xj].join(go),topology:[pl,t,jue].join(go),weightSpecs:[pl,t,Uue].join(go),weightData:[pl,t,zue].join(go),modelMetadata:[pl,t,Wue].join(go)}}function que(t){var e=t.split(go);if(e.length<3)throw new Error("Invalid key format: "+t);return e.slice(1,e.length-1).join(go)}var Kl=function(){function t(e){if(!q().getBool("IS_BROWSER")||window.localStorage===void 0)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,e==null||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=Qj(this.modelPath)}return t.prototype.save=function(e){return pe(this,void 0,void 0,function(){var n,r,i;return me(this,function(o){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");n=JSON.stringify(e.modelTopology),r=JSON.stringify(e.weightSpecs),i=bp(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(i)),this.LS.setItem(this.keys.topology,n),this.LS.setItem(this.keys.weightSpecs,r),this.LS.setItem(this.keys.weightData,(s=e.weightData,U_?Buffer.from(s).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(s))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy})),[2,{modelArtifactsInfo:i}]}catch(a){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+i.modelTopologyBytes+", weightSpecsBytes="+i.weightSpecsBytes+", weightDataBytes="+i.weightDataBytes+".")}var s;return[2]})})},t.prototype.load=function(){return pe(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return me(this,function(u){if((e=JSON.parse(this.LS.getItem(this.keys.info)))==null)throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if(e.modelTopologyType!=="JSON")throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(n={},(r=JSON.parse(this.LS.getItem(this.keys.topology)))==null)throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(n.modelTopology=r,(i=JSON.parse(this.LS.getItem(this.keys.weightSpecs)))==null)throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(n.weightSpecs=i,(o=this.LS.getItem(this.keys.modelMetadata))!=null&&(s=JSON.parse(o),n.format=s.format,n.generatedBy=s.generatedBy,n.convertedBy=s.convertedBy),(a=this.LS.getItem(this.keys.weightData))==null)throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return n.weightData=function(l){if(U_){var c=Buffer.from(l,"base64");return c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)}for(var d=atob(l),h=new Uint8Array(d.length),f=0;f<d.length;++f)h.set([d.charCodeAt(f)],f);return h.buffer}(a),[2,n]})})},t.URL_SCHEME="localstorage://",t}(),F2=function(t){return q().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(Kl.URL_SCHEME)?(e=t.slice(Kl.URL_SCHEME.length),new Kl(e)):null;var e};Nr.registerSaveRouter(F2),Nr.registerLoadRouter(F2);var Hue=function(){function t(){A(q().getBool("IS_BROWSER"),function(){return"Current environment is not a web browser"}),A(window.localStorage!==void 0,function(){return"Current browser does not appear to support localStorage"}),this.LS=window.localStorage}return t.prototype.listModels=function(){return pe(this,void 0,void 0,function(){var e,n,r,i,o,s;return me(this,function(a){for(e={},n=pl+go,r=go+Xj,i=0;i<this.LS.length;++i)(o=this.LS.key(i)).startsWith(n)&&o.endsWith(r)&&(s=que(o),e[s]=JSON.parse(this.LS.getItem(o)));return[2,e]})})},t.prototype.removeModel=function(e){return pe(this,void 0,void 0,function(){var n,r;return me(this,function(i){var o;if(e=(o=e).startsWith(Kl.URL_SCHEME)?o.slice(Kl.URL_SCHEME.length):o,n=Qj(e),this.LS.getItem(n.info)==null)throw new Error("Cannot find model at path '"+e+"'");return r=JSON.parse(this.LS.getItem(n.info)),this.LS.removeItem(n.info),this.LS.removeItem(n.topology),this.LS.removeItem(n.weightSpecs),this.LS.removeItem(n.weightData),[2,r]})})},t}();if(q().getBool("IS_BROWSER"))try{Os.registerManager(Kl.URL_SCHEME,new Hue)}catch(t){}var Gue="model",Kue=".json",Yue=".weights.bin";function $2(t){return new Promise(function(e){return setTimeout(e)}).then(t)}var mb=function(){function t(e){if(!q().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");e.startsWith(t.URL_SCHEME)&&(e=e.slice(t.URL_SCHEME.length)),e!=null&&e.length!==0||(e=Gue),this.modelTopologyFileName=e+Kue,this.weightDataFileName=e+Yue}return t.prototype.save=function(e){return pe(this,void 0,void 0,function(){var n,r,i,o,s,a;return me(this,function(u){switch(u.label){case 0:if(typeof document>"u")throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(n=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return r=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:r},o=window.URL.createObjectURL(new Blob([JSON.stringify(i)],{type:"application/json"})),(s=this.jsonAnchor==null?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,s.href=o,[4,$2(function(){return s.dispatchEvent(new MouseEvent("click"))})];case 2:return u.sent(),e.weightData==null?[3,4]:((a=this.weightDataAnchor==null?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=n,[4,$2(function(){return a.dispatchEvent(new MouseEvent("click"))})]);case 3:u.sent(),u.label=4;case 4:return[2,{modelArtifactsInfo:bp(e)}]}})})},t.URL_SCHEME="downloads://",t}(),Xue=function(){function t(e){if(e==null||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return t.prototype.load=function(){return pe(this,void 0,void 0,function(){var e,n,r=this;return me(this,function(i){return e=this.files[0],n=this.files.slice(1),[2,new Promise(function(o,s){var a=new FileReader;a.onload=function(u){var l=JSON.parse(u.target.result),c=l.modelTopology;if(c!=null){n.length===0&&o({modelTopology:c});var d=l.weightsManifest;if(d!=null){var h;try{h=r.checkManifestAndWeightFiles(d,n)}catch(y){return void s(y)}var f=[],m=[],v=[];d.forEach(function(y){y.paths.forEach(function(g){m.push(g),v.push(null)}),f.push.apply(f,y.weights)}),d.forEach(function(y){y.paths.forEach(function(g){var w=new FileReader;w.onload=function(b){var x=b.target.result,_=m.indexOf(g);v[_]=x,v.indexOf(null)===-1&&o({modelTopology:c,weightSpecs:f,weightData:Ck(v)})},w.onerror=function(b){return s("Failed to weights data from file of path '"+g+"'.")},w.readAsArrayBuffer(h[g])})})}else s(new Error("weightManifest field is missing from file "+e.name))}else s(new Error("modelTopology field is missing from file "+e.name))},a.onerror=function(u){return s("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},a.readAsText(e)})]})})},t.prototype.checkManifestAndWeightFiles=function(e,n){for(var r=[],i=n.map(function(u){return L2(u.name)}),o={},s=0,a=e;s<a.length;s++)a[s].paths.forEach(function(u){var l=L2(u);if(r.indexOf(l)!==-1)throw new Error("Duplicate file basename found in weights manifest: '"+l+"'");if(r.push(l),i.indexOf(l)===-1)throw new Error("Weight file with basename '"+l+"' is not provided.");o[u]=n[i.indexOf(l)]});if(r.length!==n.length)throw new Error("Mismatch in the number of files in weights manifest ("+r.length+") and the number of weight files provided ("+n.length+").");return o},t}();function B2(t,e,n,r){(function(o){A(o!=null&&Array.isArray(o)&&o.length>0,function(){return"promises must be a none empty array"})})(t),function(o,s){A(o>=0&&o<=1,function(){return"Progress fraction must be in range [0, 1], but got startFraction "+o}),A(s>=0&&s<=1,function(){return"Progress fraction must be in range [0, 1], but got endFraction "+s}),A(s>=o,function(){return"startFraction must be no more than endFraction, but got startFraction "+o+" and endFraction "+s})}(n=n==null?0:n,r=r==null?1:r);var i=0;return Promise.all(t.map(function(o){return o.then(function(s){var a=n+ ++i/t.length*(r-n);return e(a),s}),o}))}function Jj(t,e){return pe(this,void 0,void 0,function(){var n,r,i,o,s,a,u,l,c;return me(this,function(d){switch(d.label){case 0:return e==null&&(e={}),n=e.fetchFunc==null?q().platform.fetch:e.fetchFunc,r=t.map(function(h){return n(h,e.requestInit,{isBinary:!0})}),i=0,o=.5,e.onProgress!=null?[3,2]:[4,Promise.all(r)];case 1:return s=d.sent(),[3,4];case 2:return[4,B2(r,e.onProgress,i,o)];case 3:s=d.sent(),d.label=4;case 4:return a=s.map(function(h){return h.arrayBuffer()}),u=.5,l=1,e.onProgress!=null?[3,6]:[4,Promise.all(a)];case 5:return c=d.sent(),[3,8];case 6:return[4,B2(a,e.onProgress,u,l)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}})})}function j2(t){var e=this;return function(n,r,i){return r===void 0&&(r=""),pe(e,void 0,void 0,function(){var o,s,a,u,l,c,d,h,f,m;return me(this,function(v){switch(v.label){case 0:if(o=n.map(function(){return!1}),s={},a=i!=null?i.map(function(){return!1}):[],u=[],n.forEach(function(y,g){var w=0;y.weights.forEach(function(b){var x="quantization"in b?b.quantization.dtype:b.dtype,_=j_[x]*ve(b.shape),E=function(){o[g]=!0,s[g]==null&&(s[g]=[]),s[g].push({manifestEntry:b,groupOffset:w,sizeBytes:_})};i!=null?i.forEach(function(I,C){I===b.name&&(E(),a[C]=!0)}):E(),u.push(b.name),w+=_})}),!a.every(function(y){return y}))throw l=i.filter(function(y,g){return!a[g]}),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+u.join(", ")+".");return c=o.reduce(function(y,g,w){return g&&y.push(w),y},[]),d=[],c.forEach(function(y){n[y].paths.forEach(function(g){var w=r+(r.endsWith("/")?"":"/")+g;d.push(w)})}),[4,t(d)];case 1:return h=v.sent(),f={},m=0,c.forEach(function(y){for(var g=n[y].paths.length,w=0,b=0;b<g;b++)w+=h[m+b].byteLength;for(var x=new ArrayBuffer(w),_=new Uint8Array(x),E=0,I=0;I<g;I++){var C=new Uint8Array(h[m+I]);_.set(C,E),E+=C.byteLength}s[y].forEach(function(S){var N=Kj(x.slice(S.groupOffset,S.groupOffset+S.sizeBytes),[S.manifestEntry]);for(var R in N)f[R]=N[R]}),m+=g}),[2,f]}})})}}Nr.registerSaveRouter(function(t){return q().getBool("IS_BROWSER")&&!Array.isArray(t)&&t.startsWith(mb.URL_SCHEME)?(e=t.slice(mb.URL_SCHEME.length),e===void 0&&(e="model"),new mb(e)):null;var e});var Zj=function(){function t(e,n){if(this.DEFAULT_METHOD="POST",n==null&&(n={}),this.weightPathPrefix=n.weightPathPrefix,this.onProgress=n.onProgress,n.fetchFunc!=null?(A(typeof n.fetchFunc=="function",function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"}),this.fetch=n.fetchFunc):this.fetch=q().platform.fetch,A(e!=null&&e.length>0,function(){return"URL path for http must not be null, undefined or empty."}),Array.isArray(e)&&A(e.length===2,function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."}),this.path=e,n.requestInit!=null&&n.requestInit.body!=null)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=n.requestInit||{}}return t.prototype.save=function(e){return pe(this,void 0,void 0,function(){var n,r,i,o;return me(this,function(s){switch(s.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(n=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,r=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],i={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:r},n.body.append("model.json",new Blob([JSON.stringify(i)],{type:"application/json"}),"model.json"),e.weightData!=null&&n.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,n)];case 1:if((o=s.sent()).ok)return[2,{modelArtifactsInfo:bp(e),responses:[o]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+o.status+".")}})})},t.prototype.load=function(){return pe(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u;return me(this,function(l){switch(l.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=l.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");l.label=2;case 2:return l.trys.push([2,4,,5]),[4,e.json()];case 3:return n=l.sent(),[3,5];case 4:throw l.sent(),r="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?r+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":r+=" Please make sure the server is serving valid JSON for this request.",new Error(r);case 5:if(i=n.modelTopology,o=n.weightsManifest,i==null&&o==null)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return o==null?[3,7]:[4,this.loadWeights(o)];case 6:u=l.sent(),s=u[0],a=u[1],l.label=7;case 7:return[2,{modelTopology:i,weightSpecs:s,weightData:a}]}})})},t.prototype.loadWeights=function(e){return pe(this,void 0,void 0,function(){var n,r,i,o,s,a,u,l,c,d,h;return me(this,function(f){switch(f.label){case 0:for(n=Array.isArray(this.path)?this.path[1]:this.path,r=function(m){var v=m.lastIndexOf("/"),y=m.lastIndexOf("?"),g=m.substring(0,v),w=y>v?m.substring(y):"";return[g+"/",w]}(n),i=r[0],o=r[1],s=this.weightPathPrefix||i,a=[],u=0,l=e;u<l.length;u++)c=l[u],a.push.apply(a,c.weights);return d=[],e.forEach(function(m){m.paths.forEach(function(v){d.push(s+v+o)})}),[4,Jj(d,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return h=f.sent(),[2,[a,Ck(h)]]}})})},t.URL_SCHEME_REGEX=/^https?:\/\//,t}();function W_(t){return t.match(Zj.URL_SCHEME_REGEX)!=null}var U2=function(t,e){return typeof fetch>"u"?null:(Array.isArray(t)?t.every(function(n){return W_(n)}):W_(t))?q_(t,{onProgress:e}):null};function q_(t,e){return new Zj(t,e)}Nr.registerSaveRouter(U2),Nr.registerLoadRouter(U2);var gb=function(){function t(e){this.modelArtifacts=e}return t.prototype.load=function(){return pe(this,void 0,void 0,function(){return me(this,function(e){return[2,this.modelArtifacts]})})},t}(),Que=function(){function t(e){this.saveHandler=e}return t.prototype.save=function(e){return pe(this,void 0,void 0,function(){return me(this,function(n){return[2,this.saveHandler(e)]})})},t}(),zd=Object.freeze({browserFiles:function(t){return new Xue(t)},browserHTTPRequest:function(t,e){return q_(t,e)},concatenateArrayBuffers:Ck,decodeWeights:Kj,encodeWeights:function(t,e){return pe(this,void 0,void 0,function(){var n,r,i,o,s,a=this;return me(this,function(u){switch(u.label){case 0:for(n=[],r=[],i=Array.isArray(t)?t.map(function(l){return l.name}):Object.keys(t),o=function(l){var c=i[l],d=Array.isArray(t)?t[l].tensor:t[c];if(d.dtype!=="float32"&&d.dtype!=="int32"&&d.dtype!=="bool"&&d.dtype!=="string")throw new Error("Unsupported dtype in weight '"+c+"': "+d.dtype);var h={name:c,shape:d.shape,dtype:d.dtype};if(d.dtype==="string"){var f=new Promise(function(m){return pe(a,void 0,void 0,function(){var v,y,g,w,b,x,_;return me(this,function(E){switch(E.label){case 0:return[4,d.bytes()];case 1:for(v=E.sent(),y=v.reduce(function(I,C){return I+C.length},0)+mv*v.length,g=new Uint8Array(y),w=0,b=0;b<v.length;b++)x=v[b],_=new Uint8Array(new Uint32Array([x.length]).buffer),g.set(_,w),w+=mv,g.set(x,w),w+=x.length;return m(g),[2]}})})});r.push(f)}else r.push(d.data());e!=null&&(h.group=e),n.push(h)},s=0;s<i.length;++s)o(s);return[4,Promise.all(r)];case 1:return[2,{data:$ue(u.sent()),specs:n}]}})})},fromMemory:function(t,e,n,r){return arguments.length===1?t.modelTopology!=null||t.weightSpecs!=null?new gb(t):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new gb({modelTopology:t})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new gb({modelTopology:t,weightSpecs:e,weightData:n,trainingConfig:r}))},getLoadHandlers:function(t,e){return Nr.getLoadHandlers(t,e)},getModelArtifactsInfoForJSON:bp,getSaveHandlers:function(t){return Nr.getSaveHandlers(t)},http:q_,isHTTPScheme:W_,loadWeights:function(t,e,n,r){return e===void 0&&(e=""),pe(this,void 0,void 0,function(){return me(this,function(i){return[2,j2(function(o){return Jj(o,{requestInit:r})})(t,e,n)]})})},registerLoadRouter:function(t){return Nr.registerLoadRouter(t)},registerSaveRouter:function(t){return Nr.registerSaveRouter(t)},weightsLoaderFactory:j2,withSaveHandler:function(t){return new Que(t)},copyModel:function(t,e){return pe(this,void 0,void 0,function(){return me(this,function(n){return[2,M2(t,e,!1)]})})},listModels:function(){return pe(this,void 0,void 0,function(){var t,e,n,r,i,o,s;return me(this,function(a){switch(a.label){case 0:t=Os.getSchemes(),e={},n=0,r=t,a.label=1;case 1:return n<r.length?(i=r[n],[4,Os.getManager(i).listModels()]):[3,4];case 2:for(s in o=a.sent())e[i+Hl+s]=o[s];a.label=3;case 3:return n++,[3,1];case 4:return[2,e]}})})},moveModel:function(t,e){return pe(this,void 0,void 0,function(){return me(this,function(n){return[2,M2(t,e,!0)]})})},removeModel:function(t){return pe(this,void 0,void 0,function(){var e;return me(this,function(n){return e=Gm(t),[2,Os.getManager(e.scheme).removeModel(e.path)]})})}}),Jue=P({confusionMatrix_:function(t,e,n){var r=k(t,"labels","confusionMatrix"),i=k(e,"predictions","confusionMatrix");A(n==null||n>0&&Number.isInteger(n),function(){return"If provided, numClasses must be a positive integer, but got "+n}),A(r.rank===1,function(){return"Expected the rank of labels to be 1, but got "+r.rank}),A(i.rank===1,function(){return"Expected the rank of predictions to be 1, but got "+i.rank}),A(r.shape[0]===i.shape[0],function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."}),A(n>0&&Number.isInteger(n),function(){return"numClasses is required to be a positive integer, but got "+n});var o=wf(r.asType("int32"),n),s=wf(i.asType("int32"),n);return o.transpose().matMul(s).asType("int32")}}),Zue=Object.freeze({confusionMatrix:Jue}),ele=P({fromPixels_:function(t,e){if(e===void 0&&(e=3),e>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");var n=typeof HTMLVideoElement<"u"&&t instanceof HTMLVideoElement;if(n&&n&&t.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");return O.fromPixels(t,e)}}),eU=Object.freeze({toPixels:function(t,e){return pe(this,void 0,void 0,function(){var n,r,i,o,s,a,u,l,c,d,h,f,m,v,y,g,w,b,x,_,E,I,C;return me(this,function(S){switch(S.label){case 0:if(n=k(t,"img","toPixels"),t instanceof ie||(n=n.toInt()),n.rank!==2&&n.rank!==3)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],o=r[1],(s=n.rank===2?1:n.shape[2])>4||s===2)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+s);return[4,n.data()];case 1:return a=S.sent(),u=n.min(),l=n.max(),[4,Promise.all([u.data(),l.data()])];case 2:if(c=S.sent(),d=c[0],h=c[1],f=d[0],m=h[0],u.dispose(),l.dispose(),n.dtype==="float32"){if(f<0||m>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+f+" - "+m+"].")}else{if(n.dtype!=="int32")throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(f<0||m>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+f+" - "+m+"].")}for(v=n.dtype==="float32"?255:1,y=new Uint8ClampedArray(o*i*4),g=0;g<i*o;++g)w=void 0,b=void 0,x=void 0,_=void 0,s===1?(w=a[g]*v,b=a[g]*v,x=a[g]*v,_=255):s===3?(w=a[3*g]*v,b=a[3*g+1]*v,x=a[3*g+2]*v,_=255):s===4&&(w=a[4*g]*v,b=a[4*g+1]*v,x=a[4*g+2]*v,_=a[4*g+3]*v),y[0+(E=4*g)]=Math.round(w),y[E+1]=Math.round(b),y[E+2]=Math.round(x),y[E+3]=Math.round(_);return e!=null&&(e.width=o,e.height=i,I=e.getContext("2d"),C=new ImageData(y,o,i),I.putImageData(C,0,0)),n!==t&&n.dispose(),[2,y]}})})},fromPixels:ele}),tU=function(){function t(){}return t.prototype.getClassName=function(){return this.constructor.className},t.fromConfig=function(e,n){return new e(n)},t}(),nU=function(){function t(){this.classNameMap={}}return t.getMap=function(){return t.instance==null&&(t.instance=new t),t.instance},t.register=function(e){t.getMap().classNameMap[e.className]=[e,e.fromConfig]},t}();function da(t){A(t.className!=null,function(){return"Class being registered does not have the static className property defined."}),A(typeof t.className=="string",function(){return"className is required to be a string, but got type "+typeof t.className}),A(t.className.length>0,function(){return"Class being registered has an empty-string as its className, which is disallowed."}),nU.register(t)}var tle=Object.freeze({Serializable:tU,SerializationMap:nU,registerClass:da}),nle=.001,rU=.1;function vb(){return O.backend.floatPrecision()===32?nle:rU}function yb(t,e,n){var r=!0;if((xn(t)||xn(e))&&(r=!1),xn(t)&&xn(e)&&(r=!0),r){var i=t.constructor.name,o=e.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(t)&&Array.isArray(e)){var s=io(t),a=io(e);if(!an(s,a))throw new Error("Arrays have different shapes. Actual: ["+s+"]. Expected: ["+a+"]")}var u=xn(t)?t:Mo(t),l=xn(e)?e:Mo(e);if(u.length!==l.length)throw new Error("Arrays have different lengths actual: "+u.length+" vs expected: "+l.length+".\nActual:   "+u+".\nExpected: "+l+".");for(var c=0;c<l.length;++c){var d=u[c],h=l[c];if(!n(d,h))throw new Error("Arrays differ: actual["+c+"] = "+d+", expected["+c+"] = "+h+".\nActual:   "+u+".\nExpected: "+l+".")}}function wb(t,e,n){return!isFinite(t)&&!isFinite(e)||!(isNaN(t)||isNaN(e)||Math.abs(t-e)>n)}var rle=Object.freeze({TEST_EPSILON_FLOAT16:rU,expectArraysClose:function(t,e,n){return n==null&&(n=vb()),yb(t,e,function(r,i){return wb(r,i,n)})},testEpsilon:vb,expectPromiseToFail:function(t,e){t().then(function(){return e.fail()},function(){return e()})},expectArraysEqual:function(t,e){var n=typeof e=="string"||typeof e=="number"||typeof e=="boolean"?[e]:e;return _s(t)||_s(t[0])||_s(e)||_s(e[0])?yb(t,n,function(r,i){return r==i}):yb(t,e,function(r,i){return wb(r,i,0)})},expectNumbersClose:function(t,e,n){if(n==null&&(n=vb()),!wb(t,e,n))throw new Error("Numbers differ: actual === "+t+", expected === "+e)},expectValuesInRange:function(t,e,n){for(var r=0;r<t.length;r++)if(t[r]<e||t[r]>n)throw new Error("Value out of range:"+t[r]+" low: "+e+", high: "+n)},expectArrayBuffersEqual:function(t,e){expect(new Float32Array(t)).toEqual(new Float32Array(e))}}),ile="1.2.11",ole=Object.freeze({gpgpu_util:kae,webgl_util:Zoe,forceHalfFloat:function(){q().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:PB,setWebGLContext:r$,GPGPUContext:TB}),ha=function(t){function e(){return t!==null&&t.apply(this,arguments)||this}return Xo(e,t),e.prototype.minimize=function(n,r,i){r===void 0&&(r=!1);var o=this.computeGradients(n,i),s=o.value,a=o.grads;if(i!=null){var u=i.map(function(l){return{name:l.name,tensor:a[l.name]}});this.applyGradients(u)}else this.applyGradients(a);return Jn(a),r?s:(s.dispose(),null)},Object.defineProperty(e.prototype,"iterations",{get:function(){return this.iterations_==null&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),e.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},e.prototype.computeGradients=function(n,r){return eB(n,r)},e.prototype.dispose=function(){this.iterations_!=null&&Jn(this.iterations_)},e.prototype.saveIterations=function(){return pe(this,void 0,void 0,function(){return me(this,function(n){return this.iterations_==null&&(this.iterations_=0),[2,{name:"iter",tensor:ge(this.iterations_,"int32")}]})})},e.prototype.getWeights=function(){return pe(this,void 0,void 0,function(){return me(this,function(n){throw new Error("getWeights() is not implemented for this optimizer yet.")})})},e.prototype.setWeights=function(n){return pe(this,void 0,void 0,function(){return me(this,function(r){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())})})},e.prototype.extractIterations=function(n){return pe(this,void 0,void 0,function(){var r;return me(this,function(i){switch(i.label){case 0:return r=this,[4,n[0].tensor.data()];case 1:return r.iterations_=i.sent()[0],[2,n.slice(1)]}})})},e}(tU);Object.defineProperty(ha,Symbol.hasInstance,{value:function(t){return t.minimize!=null&&t.computeGradients!=null&&t.applyGradients!=null}});var kk=function(t){function e(n,r,i){i===void 0&&(i=null);var o=t.call(this)||this;return o.learningRate=n,o.rho=r,o.epsilon=i,o.accumulatedGrads=[],o.accumulatedUpdates=[],i==null&&(o.epsilon=O.backend.epsilon()),o}return Xo(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var s=O.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accum_grad",variable:Je(function(){return Ve(s).variable(!1)})}),r.accumulatedUpdates[o]==null&&(r.accumulatedUpdates[o]={originalName:i+"/accum_var",variable:Je(function(){return Ve(s).variable(!1)})});var a=Array.isArray(n)?n[o].tensor:n[i];if(a!=null){var u=r.accumulatedGrads[o].variable,l=r.accumulatedUpdates[o].variable;Je(function(){var c=u.mul(r.rho).add(a.square().mul(1-r.rho)),d=l.add(r.epsilon).sqrt().div(u.add(r.epsilon).sqrt()).mul(a),h=l.mul(r.rho).add(d.square().mul(1-r.rho));u.assign(c),l.assign(h);var f=d.mul(-r.learningRate).add(s);s.assign(f)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedUpdates!=null&&(Jn(this.accumulatedGrads.map(function(n){return n.variable})),Jn(this.accumulatedUpdates.map(function(n){return n.variable})))},e.prototype.getWeights=function(){return pe(this,void 0,void 0,function(){var n;return me(this,function(r){switch(r.label){case 0:return n=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return pe(this,void 0,void 0,function(){var r;return me(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=n.length/2,this.accumulatedGrads=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedUpdates=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.rho,r.epsilon)},e.className="Adadelta",e}(ha);da(kk);var Sk=function(t){function e(n,r){r===void 0&&(r=.1);var i=t.call(this)||this;return i.learningRate=n,i.initialAccumulatorValue=r,i.accumulatedGrads=[],i}return Xo(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var s=O.registeredVariables[i];r.accumulatedGrads[o]==null&&(r.accumulatedGrads[o]={originalName:i+"/accumulator",variable:Je(function(){return up(s.shape,r.initialAccumulatorValue).variable(!1)})});var a=Array.isArray(n)?n[o].tensor:n[i];if(a!=null){var u=r.accumulatedGrads[o].variable;Je(function(){var l=u.add(a.square());u.assign(l);var c=a.div(l.add(O.backend.epsilon()).sqrt()).mul(-r.learningRate).add(s);s.assign(c)})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedGrads!=null&&Jn(this.accumulatedGrads.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return pe(this,void 0,void 0,function(){return me(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulatedGrads.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return pe(this,void 0,void 0,function(){return me(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulatedGrads=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},e.fromConfig=function(n,r){return new n(r.learningRate,r.initialAccumulatorValue)},e.className="Adagrad",e}(ha);da(Sk);var Ak=function(t){function e(n,r,i,o){o===void 0&&(o=null);var s=t.call(this)||this;return s.learningRate=n,s.beta1=r,s.beta2=i,s.epsilon=o,s.accumulatedFirstMoment=[],s.accumulatedSecondMoment=[],Je(function(){s.accBeta1=ge(r).variable(),s.accBeta2=ge(i).variable()}),o==null&&(s.epsilon=O.backend.epsilon()),s}return Xo(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n);Je(function(){var o=Tc(1,r.accBeta1),s=Tc(1,r.accBeta2);i.forEach(function(a,u){var l=O.registeredVariables[a];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:Je(function(){return Ve(l).variable(!1)})}),r.accumulatedSecondMoment[u]==null&&(r.accumulatedSecondMoment[u]={originalName:a+"/v",variable:Je(function(){return Ve(l).variable(!1)})});var c=Array.isArray(n)?n[u].tensor:n[a];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,h=r.accumulatedSecondMoment[u].variable,f=d.mul(r.beta1).add(c.mul(1-r.beta1)),m=h.mul(r.beta2).add(c.square().mul(1-r.beta2)),v=f.div(o),y=m.div(s);d.assign(f),h.assign(m);var g=v.div(y.sqrt().add(r.epsilon)).mul(-r.learningRate).add(l);l.assign(g)}}),r.accBeta1.assign(r.accBeta1.mul(r.beta1)),r.accBeta2.assign(r.accBeta2.mul(r.beta2))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),this.accumulatedFirstMoment!=null&&Jn(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedSecondMoment!=null&&Jn(this.accumulatedSecondMoment.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return pe(this,void 0,void 0,function(){var n;return me(this,function(r){switch(r.label){case 0:return n=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return pe(this,void 0,void 0,function(){var r,i=this;return me(this,function(o){switch(o.label){case 0:return[4,this.extractIterations(n)];case 1:return n=o.sent(),Je(function(){i.accBeta1.assign(Ic(i.beta1,i.iterations_+1)),i.accBeta2.assign(Ic(i.beta2,i.iterations_+1))}),r=n.length/2,this.accumulatedFirstMoment=n.slice(0,r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),this.accumulatedSecondMoment=n.slice(r,2*r).map(function(s){return{originalName:s.name,variable:s.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon)},e.className="Adam",e}(ha);da(Ak);var Rk=function(t){function e(n,r,i,o,s){o===void 0&&(o=null),s===void 0&&(s=0);var a=t.call(this)||this;return a.learningRate=n,a.beta1=r,a.beta2=i,a.epsilon=o,a.decay=s,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],Je(function(){a.iteration=ge(0).variable(),a.accBeta1=ge(r).variable()}),o==null&&(a.epsilon=O.backend.epsilon()),a}return Xo(e,t),e.prototype.applyGradients=function(n){var r=this,i=Array.isArray(n)?n.map(function(o){return o.name}):Object.keys(n);Je(function(){var o=Tc(1,r.accBeta1),s=I0(-r.learningRate,r.iteration.mul(r.decay).add(1));i.forEach(function(a,u){var l=O.registeredVariables[a];r.accumulatedFirstMoment[u]==null&&(r.accumulatedFirstMoment[u]={originalName:a+"/m",variable:Ve(l).variable(!1)}),r.accumulatedWeightedInfNorm[u]==null&&(r.accumulatedWeightedInfNorm[u]={originalName:a+"/v",variable:Ve(l).variable(!1)});var c=Array.isArray(n)?n[u].tensor:n[a];if(c!=null){var d=r.accumulatedFirstMoment[u].variable,h=r.accumulatedWeightedInfNorm[u].variable,f=d.mul(r.beta1).add(c.mul(1-r.beta1)),m=h.mul(r.beta2),v=c.abs(),y=m.maximum(v);d.assign(f),h.assign(y);var g=s.div(o).mul(f.div(y.add(r.epsilon))).add(l);l.assign(g)}}),r.iteration.assign(r.iteration.add(1)),r.accBeta1.assign(r.accBeta1.mul(r.beta1))}),this.incrementIterations()},e.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),this.accumulatedFirstMoment!=null&&Jn(this.accumulatedFirstMoment.map(function(n){return n.variable})),this.accumulatedWeightedInfNorm!=null&&Jn(this.accumulatedWeightedInfNorm.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return pe(this,void 0,void 0,function(){return me(this,function(n){throw new Error("getWeights() is not implemented for Adamax yet.")})})},e.prototype.setWeights=function(n){return pe(this,void 0,void 0,function(){return me(this,function(r){throw new Error("setWeights() is not implemented for Adamax yet.")})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},e.fromConfig=function(n,r){return new n(r.learningRate,r.beta1,r.beta2,r.epsilon,r.decay)},e.className="Adamax",e}(ha);da(Rk);var V0=function(t){function e(n){var r=t.call(this)||this;return r.learningRate=n,r.setLearningRate(n),r}return Xo(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var s=Array.isArray(n)?n[o].tensor:n[i];if(s!=null){var a=O.registeredVariables[i];Je(function(){var u=r.c.mul(s).add(a);a.assign(u)})}}),this.incrementIterations()},e.prototype.setLearningRate=function(n){this.learningRate=n,this.c!=null&&this.c.dispose(),this.c=A$(ge(-n))},e.prototype.dispose=function(){this.c.dispose()},e.prototype.getWeights=function(){return pe(this,void 0,void 0,function(){return me(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()]]}})})},e.prototype.setWeights=function(n){return pe(this,void 0,void 0,function(){return me(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:if((n=r.sent()).length!==0)throw new Error("SGD optimizer does not have settable weights.");return[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate}},e.fromConfig=function(n,r){return new n(r.learningRate)},e.className="SGD",e}(ha);da(V0);var Nk=function(t){function e(n,r,i){i===void 0&&(i=!1);var o=t.call(this,n)||this;return o.learningRate=n,o.momentum=r,o.useNesterov=i,o.accumulations=[],o.m=ge(o.momentum),o}return Xo(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var s=O.registeredVariables[i];r.accumulations[o]==null&&(r.accumulations[o]={originalName:i+"/momentum",variable:Je(function(){return Ve(s).variable(!1)})});var a=r.accumulations[o].variable,u=Array.isArray(n)?n[o].tensor:n[i];u!=null&&Je(function(){var l,c=r.m.mul(a).add(u);l=r.useNesterov?r.c.mul(u.add(c.mul(r.m))).add(s):r.c.mul(c).add(s),a.assign(c),s.assign(l)})}),this.incrementIterations()},e.prototype.dispose=function(){this.m.dispose(),this.accumulations!=null&&Jn(this.accumulations.map(function(n){return n.variable}))},e.prototype.setMomentum=function(n){this.momentum=n},e.prototype.getWeights=function(){return pe(this,void 0,void 0,function(){return me(this,function(n){switch(n.label){case 0:return[4,this.saveIterations()];case 1:return[2,[n.sent()].concat(this.accumulations.map(function(r){return{name:r.originalName,tensor:r.variable}}))]}})})},e.prototype.setWeights=function(n){return pe(this,void 0,void 0,function(){return me(this,function(r){switch(r.label){case 0:return[4,this.extractIterations(n)];case 1:return n=r.sent(),this.accumulations=n.map(function(i){return{originalName:i.name,variable:i.tensor.variable(!1)}}),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},e.fromConfig=function(n,r){return new n(r.learningRate,r.momentum,r.useNesterov)},e.className="Momentum",e}(V0);da(Nk);var Pk=function(t){function e(n,r,i,o,s){r===void 0&&(r=.9),i===void 0&&(i=0),o===void 0&&(o=null),s===void 0&&(s=!1);var a=t.call(this)||this;return a.learningRate=n,a.decay=r,a.momentum=i,a.epsilon=o,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=s,o==null&&(a.epsilon=O.backend.epsilon()),a}return Xo(e,t),e.prototype.applyGradients=function(n){var r=this;(Array.isArray(n)?n.map(function(i){return i.name}):Object.keys(n)).forEach(function(i,o){var s=O.registeredVariables[i];r.accumulatedMeanSquares[o]==null&&(r.accumulatedMeanSquares[o]={originalName:i+"/rms",variable:Je(function(){return Ve(s).variable(!1)})}),r.accumulatedMoments[o]==null&&(r.accumulatedMoments[o]={originalName:i+"/momentum",variable:Je(function(){return Ve(s).variable(!1)})}),r.accumulatedMeanGrads[o]==null&&r.centered&&(r.accumulatedMeanGrads[o]={originalName:i+"/mg",variable:Je(function(){return Ve(s).variable(!1)})});var a=Array.isArray(n)?n[o].tensor:n[i];if(a!=null){var u=r.accumulatedMeanSquares[o].variable,l=r.accumulatedMoments[o].variable;Je(function(){var c=u.mul(r.decay).add(a.square().mul(1-r.decay));if(r.centered){var d=r.accumulatedMeanGrads[o].variable,h=d.mul(r.decay).add(a.mul(1-r.decay)),f=l.mul(r.momentum).add(a.mul(r.learningRate).div(c.sub(h.square().add(r.epsilon)).sqrt()));u.assign(c),d.assign(h),l.assign(f);var m=s.sub(f);s.assign(m)}else{var v=u.mul(r.decay).add(a.square().mul(1-r.decay));f=l.mul(r.momentum).add(a.mul(r.learningRate).div(v.add(r.epsilon).sqrt())),u.assign(v),l.assign(f),m=s.sub(f),s.assign(m)}})}}),this.incrementIterations()},e.prototype.dispose=function(){this.accumulatedMeanSquares!=null&&Jn(this.accumulatedMeanSquares.map(function(n){return n.variable})),this.accumulatedMeanGrads!=null&&this.centered&&Jn(this.accumulatedMeanGrads.map(function(n){return n.variable})),this.accumulatedMoments!=null&&Jn(this.accumulatedMoments.map(function(n){return n.variable}))},e.prototype.getWeights=function(){return pe(this,void 0,void 0,function(){var n;return me(this,function(r){switch(r.label){case 0:return n=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&n.push.apply(n,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[r.sent()].concat(n.map(function(i){return{name:i.originalName,tensor:i.variable}}))]}})})},e.prototype.setWeights=function(n){return pe(this,void 0,void 0,function(){var r;return me(this,function(i){switch(i.label){case 0:return[4,this.extractIterations(n)];case 1:return n=i.sent(),r=this.centered?n.length/3:n.length/2,this.accumulatedMeanSquares=n.slice(0,r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.accumulatedMoments=n.slice(r,2*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}}),this.centered&&(this.accumulatedMeanGrads=n.slice(2*r,3*r).map(function(o){return{originalName:o.name,variable:o.tensor.variable(!1)}})),[2]}})})},e.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},e.fromConfig=function(n,r){return new n(r.learningRate,r.decay,r.momentum,r.epsilon,r.centered)},e.className="RMSProp",e}(ha);da(Pk);var ba=function(){function t(){}return t.sgd=function(e){return new V0(e)},t.momentum=function(e,n,r){return r===void 0&&(r=!1),new Nk(e,n,r)},t.rmsprop=function(e,n,r,i,o){return n===void 0&&(n=.9),r===void 0&&(r=0),i===void 0&&(i=null),o===void 0&&(o=!1),new Pk(e,n,r,i,o)},t.adam=function(e,n,r,i){return e===void 0&&(e=.001),n===void 0&&(n=.9),r===void 0&&(r=.999),i===void 0&&(i=null),new Ak(e,n,r,i)},t.adadelta=function(e,n,r){return e===void 0&&(e=.001),n===void 0&&(n=.95),r===void 0&&(r=null),new kk(e,n,r)},t.adamax=function(e,n,r,i,o){return e===void 0&&(e=.002),n===void 0&&(n=.9),r===void 0&&(r=.999),i===void 0&&(i=null),o===void 0&&(o=0),new Rk(e,n,r,i,o)},t.adagrad=function(e,n){return n===void 0&&(n=.1),new Sk(e,n)},t}(),sle={sgd:ba.sgd,momentum:ba.momentum,adadelta:ba.adadelta,adagrad:ba.adagrad,rmsprop:ba.rmsprop,adamax:ba.adamax,adam:ba.adam},ale=typeof requestAnimationFrame<"u"?requestAnimationFrame:typeof setImmediate<"u"?setImmediate:function(t){return t()};function ule(){return new Promise(function(t){return ale(function(){return t()})})}U=Oue;const lle=Object.freeze(Object.defineProperty({__proto__:null,AdadeltaOptimizer:kk,AdagradOptimizer:Sk,AdamOptimizer:Ak,AdamaxOptimizer:Rk,DataStorage:nC,get ENV(){return a0},Environment:U3,KernelBackend:Pse,MomentumOptimizer:Nk,Optimizer:ha,RMSPropOptimizer:Pk,get Rank(){return A_},get Reduction(){return En},SGDOptimizer:V0,Tensor:ie,TensorBuffer:_c,Variable:Jc,abs:dC,acos:hC,acosh:fC,add:_f,addN:jC,addStrict:YB,all:ok,any:sk,argMax:ak,argMin:uk,asin:pC,asinh:mC,atan:gC,atan2:UC,atanh:vC,avgPool:nk,avgPool3d:ik,backend:mse,backend_util:Dse,basicLSTMCell:Mj,batchNorm:$C,batchNorm2d:qB,batchNorm3d:HB,batchNorm4d:GB,batchNormalization:WB,batchNormalization2d:jB,batchNormalization3d:UB,batchNormalization4d:zB,batchToSpaceND:f0,booleanMaskAsync:cj,browser:eU,buffer:ke,cast:KT,ceil:yC,clipByValue:wC,clone:$$,complex:Kt,concat:Vr,concat1d:O$,concat2d:L$,concat3d:M$,concat4d:V$,conv1d:XC,conv2d:ed,conv2dTranspose:ZC,conv3d:QC,conv3dTranspose:vj,cos:bC,cosh:xC,cumsum:B$,customGrad:Zc,deprecationWarn:zT,depthToSpace:YT,depthwiseConv2d:R0,diag:Bj,disableDeprecationWarnings:nse,dispose:Jn,disposeVariables:rse,div:I0,divStrict:XB,dot:yj,dropout:jj,elu:hk,enableDebugMode:tse,enableProdMode:ese,engine:ise,env:q,equal:S0,equalStrict:ij,erf:_C,exp:EC,expandDims:Oi,expm1:IC,eye:XT,fft:yp,fill:up,findBackend:hse,findBackendFactory:fse,floor:TC,floorDiv:T0,frame:M0,fused:Tk,gather:vp,gatherND:_k,getBackend:cse,grad:Sse,grads:Ase,greater:qC,greaterEqual:A0,greaterEqualStrict:oj,greaterStrict:sj,hammingWindow:Ek,hannWindow:L0,ifft:Cc,imag:Xr,image:tu,inTopKAsync:Wj,io:zd,irfft:D0,isFinite:MB,isInf:LB,isNaN:OB,keep:A$,leakyRelu:fk,less:HC,lessEqual:GC,lessEqualStrict:aj,lessStrict:uj,linalg:Hj,linspace:HT,localResponseNormalization:vk,log:CC,log1p:kC,logSigmoid:DB,logSoftmax:tC,logSumExp:Pj,logicalAnd:mp,logicalNot:BC,logicalOr:_0,logicalXor:KB,losses:qj,matMul:ek,math:Zue,max:lk,maxPool:tk,maxPool3d:rk,maximum:gp,maximumStrict:QB,mean:ck,memory:ose,min:dk,minimum:C0,minimumStrict:JB,mod:zC,modStrict:ZB,moments:Dj,movingAverage:Fj,mul:k0,mulStrict:ej,multiRNNCell:Vj,multinomial:QT,neg:w0,nextFrame:ule,norm:yk,notEqual:KC,notEqualStrict:lj,oneHot:wf,ones:la,onesLike:d0,op:P,outerProduct:wj,pad:Wu,pad1d:j$,pad2d:U$,pad3d:z$,pad4d:W$,pool:Cj,pow:Ic,powStrict:tj,prelu:Oj,print:F$,prod:P0,profile:sse,rand:q$,randomGamma:G$,randomNormal:H$,randomUniform:p0,range:c0,ready:lse,real:fr,reciprocal:SC,registerBackend:pse,relu:pk,relu6:Lj,removeBackend:dse,reshape:cp,reverse:qu,reverse1d:bj,reverse2d:xj,reverse3d:_j,reverse4d:Ej,rfft:wp,round:AC,rsqrt:b0,scalar:ge,scatterND:xk,selu:mk,separableConv2d:gj,serialization:tle,setBackend:use,setPlatform:gse,setdiff1dAsync:ZT,sigmoid:RC,sign:NC,signal:zj,sin:PC,sinh:DC,slice:Ti,slice1d:kj,slice2d:Sj,slice3d:Aj,slice4d:Rj,softmax:hp,softplus:OC,spaceToBatchND:m0,sparseToDense:O0,spectral:$j,split:lp,sqrt:LC,square:MC,squaredDifference:WC,squaredDifferenceStrict:nj,squeeze:g0,stack:Vo,step:VB,stft:Ik,stridedSlice:wk,sub:Tc,subStrict:rj,sum:N0,tan:VC,tanh:FC,tensor:Xt,tensor1d:Ys,tensor2d:Za,tensor3d:qT,tensor4d:ls,tensor5d:P$,tensor6d:D$,tensor_util:Koe,test_util:rle,tidy:Je,tile:eu,time:ase,topk:bk,train:sle,transpose:gk,truncatedNormal:JT,unsortedSegmentSum:YC,unstack:dp,util:xc,valueAndGrad:Rse,valueAndGrads:Nse,variable:Hoe,variableGrads:eB,version_core:ile,webgl:ole,where:Cu,whereAsync:E0,zeros:ft,zerosLike:Ve},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2019 Google LLC. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */var cs,z2,H_=function(){return(H_=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function ku(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})}function Su(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(d){c=[6,d],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}(function(t){t[t.DT_INVALID=0]="DT_INVALID",t[t.DT_FLOAT=1]="DT_FLOAT",t[t.DT_DOUBLE=2]="DT_DOUBLE",t[t.DT_INT32=3]="DT_INT32",t[t.DT_UINT8=4]="DT_UINT8",t[t.DT_INT16=5]="DT_INT16",t[t.DT_INT8=6]="DT_INT8",t[t.DT_STRING=7]="DT_STRING",t[t.DT_COMPLEX64=8]="DT_COMPLEX64",t[t.DT_INT64=9]="DT_INT64",t[t.DT_BOOL=10]="DT_BOOL",t[t.DT_QINT8=11]="DT_QINT8",t[t.DT_QUINT8=12]="DT_QUINT8",t[t.DT_QINT32=13]="DT_QINT32",t[t.DT_BFLOAT16=14]="DT_BFLOAT16",t[t.DT_FLOAT_REF=101]="DT_FLOAT_REF",t[t.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",t[t.DT_INT32_REF=103]="DT_INT32_REF",t[t.DT_UINT8_REF=104]="DT_UINT8_REF",t[t.DT_INT16_REF=105]="DT_INT16_REF",t[t.DT_INT8_REF=106]="DT_INT8_REF",t[t.DT_STRING_REF=107]="DT_STRING_REF",t[t.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",t[t.DT_INT64_REF=109]="DT_INT64_REF",t[t.DT_BOOL_REF=110]="DT_BOOL_REF",t[t.DT_QINT8_REF=111]="DT_QINT8_REF",t[t.DT_QUINT8_REF=112]="DT_QUINT8_REF",t[t.DT_QINT32_REF=113]="DT_QINT32_REF",t[t.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"})(cs||(cs={})),function(t){(function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"})(t.CheckpointFormatVersion||(t.CheckpointFormatVersion={}))}(z2||(z2={}));var cle={};function iU(t){return cle[t]}function T(t,e,n,r){var i=e.inputParams[t];if(i&&i.inputIndexStart!==void 0){var o=i.inputIndexStart,s=i.inputIndexEnd===0?void 0:i.inputIndexEnd===void 0?o+1:i.inputIndexEnd;if(i.type==="tensor")return Hn(e.inputNames[i.inputIndexStart],n,r);if(i.type==="tensors")return e.inputNames.slice(o,s).map(function(l){return Hn(l,n,r)});var a=Array.prototype.slice.call(Hn(e.inputNames.slice(o)[0],n,r).dataSync());return i.type==="number"?a[0]:a}var u=e.attrParams[t];return u&&u.value}function Hn(t,e,n){var r=hh(t),i=r[0],o=r[1],s=n.currentContextIds.find(function(a){return!!e[gv(i,a)]});return s!==void 0?e[gv(i,s)][o]:void 0}function dle(t,e,n){return e[gv(t,n.currentContextId)]}function Km(t,e){var n=hh(t),r=n[0],i=n[1];return[gv(r,e&&e.currentContextId),i]}function gv(t,e){return e?t+"-"+e:t}function hh(t){var e=t.lastIndexOf(":");return e===-1?[t,0]:[t.substring(0,e),Number(t.substring(e+1))]}function bb(t,e){for(var n=[],r=0;r<t.length;r+=e)n.push(t.slice(r,r+e));return n}var hle=[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],fle=Object.freeze({json:hle}),ple=[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],mle=Object.freeze({json:ple}),gle=[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}],vle=Object.freeze({json:gle}),yle=[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}],wle=Object.freeze({json:yle}),ble=[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}],xle=Object.freeze({json:ble}),_le=[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Ele=Object.freeze({json:_le}),Ile=[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}],Tle=Object.freeze({json:Ile}),Cle=[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}],kle=Object.freeze({json:Cle}),Sle=[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}],Ale=Object.freeze({json:Sle}),Rle=[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Nle=Object.freeze({json:Rle}),Ple=[{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}],Dle=Object.freeze({json:Ple}),Ole=[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}],Lle=Object.freeze({json:Ole}),Mle=[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}],Vle=Object.freeze({json:Mle}),Fle=[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}],$le=Object.freeze({json:Fle}),Ble=[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}],jle=Object.freeze({json:Ble}),Ule=[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}],zle=Object.freeze({json:Ule}),Wle=function(){function t(){var e=[fle,mle,vle,wle,xle,Ele,Tle,Nle,Ale,kle,Dle,Lle,Vle,$le,jle,zle],n=[].concat.apply([],e.map(function(r){return r.json}));this.opMappers=n.reduce(function(r,i){return r[i.tfOpName]=i,r},{})}return Object.defineProperty(t,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),t.prototype.transformGraph=function(e){var n=this,r=[],i=[],o=e.node.reduce(function(l,c){return l[c.name]=n.mapNode(c),c.op==="Placeholder"&&r.push(l[c.name]),c.op==="Const"&&i.push(l[c.name]),l},{}),s=[],a=[],u=Object.keys(o);return u.forEach(function(l){var c=o[l];c.inputNames.forEach(function(d){var h=Km(d)[0];c.inputs.push(o[h]),o[h].children.push(c)}),c.inputs.length===0&&s.push(c)}),u.forEach(function(l){var c=o[l];c.children.length===0&&a.push(c)}),{nodes:o,inputs:s,outputs:a,weights:i,placeholders:r}},t.prototype.mapNode=function(e){var n=iU(e.op)||this.opMappers[e.op]||{};e.attr==null&&(e.attr={});var r={name:e.name,op:e.op,category:n.category,inputNames:(e.input||[]).map(function(i){return i.startsWith("^")?i.substr(1):i}),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return n.inputs!=null&&(r.inputParams=n.inputs.reduce(function(i,o){return i[o.name]={type:o.type,inputIndexStart:o.start,inputIndexEnd:o.end},i},{})),n.attrs!=null&&(r.attrParams=n.attrs.reduce(function(i,o){var s=o.type,a=void 0;switch(o.type){case"string":(a=G_(e.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(a=G_(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"string[]":(a=e1(e.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(a=e1(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"number":(a=Y_(e.attr,o.tfName,o.defaultValue||0))===void 0&&o.tfDeprecatedName&&(a=Y_(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"number[]":(a=Z_(e.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(a=Z_(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool":(a=K_(e.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(a=K_(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"bool[]":(a=n1(e.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(a=n1(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape":(a=J_(e.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(a=J_(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"shape[]":(a=t1(e.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(a=t1(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype":(a=X_(e.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(a=X_(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"dtype[]":(a=Q_(e.attr,o.tfName,o.defaultValue))===void 0&&o.tfDeprecatedName&&(a=Q_(e.attr,o.tfDeprecatedName,o.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+o.type+" for op: "+e.op)}return i[o.name]={value:a,type:s},i},{})),r},t}();function qle(t){var e=a0.global;if(e.atob!==void 0)return e.atob(t);if(typeof Buffer<"u")return new Buffer(t,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}function oU(t,e){var n=Array.isArray(t)?String.fromCharCode.apply(null,t):qle(t);return e?n:n.toLowerCase()}function G_(t,e,n,r){r===void 0&&(r=!1);var i=t[e];return i!=null?oU(i.s,r):n}function K_(t,e,n){var r=t[e];return r?r.b:n}function Y_(t,e,n){var r=t[e]||{},i=r.i!=null?r.i:r.f!=null?r.f:n;return typeof i=="number"?i:parseInt(i,10)}function sU(t){switch(typeof t=="string"&&(t=cs[t]),t){case cs.DT_FLOAT:return"float32";case cs.DT_INT32:return"int32";case cs.DT_BOOL:return"bool";case cs.DT_DOUBLE:return"float32";case cs.DT_STRING:return"string";default:return null}}function X_(t,e,n){var r=t[e];return r&&r.type?sU(r.type):n}function Q_(t,e,n){var r=t[e];return r&&r.list&&r.list.type?r.list.type.map(function(i){return sU(i)}):n}function aU(t){if(!t.unknownRank)return t.dim!=null?t.dim.map(function(e){return typeof e.size=="number"?e.size:parseInt(e.size,10)}):[]}function J_(t,e,n){var r=t[e];return r&&r.shape?aU(r.shape):n}function Z_(t,e,n){var r=t[e];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map(function(i){return typeof i=="number"?i:parseInt(i,10)}):n}function e1(t,e,n,r){r===void 0&&(r=!1);var i=t[e];return i&&i.list&&i.list.s?i.list.s.map(function(o){return oU(o,r)}):n}function t1(t,e,n){var r=t[e];return r&&r.list&&r.list.shape?r.list.shape.map(function(i){return aU(i)}):n}function n1(t,e,n){var r=t[e];return r&&r.list&&r.list.b?r.list.b:n}var Hle=function(){function t(e,n,r){var i=this;this.node=e,this.tensorMap=n,this.context=r,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map(function(o){return i.getInput(o)}),e.rawAttrs!=null&&(this.attrs=Object.keys(e.rawAttrs).reduce(function(o,s){return o[s]=i.getAttr(s),o},{}))}return t.prototype.getInput=function(e){return Hn(e,this.tensorMap,this.context)},t.prototype.getAttr=function(e,n){var r=this.node.rawAttrs[e];if(r.tensor!=null)return Hn(e,this.tensorMap,this.context);if(r.i!=null||r.f!=null)return Y_(this.node.rawAttrs,e,n);if(r.s!=null)return G_(this.node.rawAttrs,e,n);if(r.b!=null)return K_(this.node.rawAttrs,e,n);if(r.shape!=null)return J_(this.node.rawAttrs,e,n);if(r.type!=null)return X_(this.node.rawAttrs,e,n);if(r.list!=null){if(r.list.i!=null||r.list.f!=null)return Z_(this.node.rawAttrs,e,n);if(r.list.s!=null)return e1(this.node.rawAttrs,e,n);if(r.list.shape!=null)return t1(this.node.rawAttrs,e,n);if(r.list.b!=null)return n1(this.node.rawAttrs,e,n);if(r.list.type!=null)return Q_(this.node.rawAttrs,e,n)}return n},t}(),Gle=function(t,e,n){switch(t.op){case"BiasAdd":case"AddV2":case"Add":return[_f(T("a",t,e,n),T("b",t,e,n))];case"AddN":return[jC(T("tensors",t,e,n))];case"FloorMod":case"Mod":return[zC(T("a",t,e,n),T("b",t,e,n))];case"Mul":return[k0(T("a",t,e,n),T("b",t,e,n))];case"RealDiv":case"Div":return[I0(T("a",t,e,n),T("b",t,e,n))];case"FloorDiv":return[T0(T("a",t,e,n),T("b",t,e,n))];case"Sub":return[Tc(T("a",t,e,n),T("b",t,e,n))];case"Minimum":return[C0(T("a",t,e,n),T("b",t,e,n))];case"Maximum":return[gp(T("a",t,e,n),T("b",t,e,n))];case"Pow":return[Ic(T("a",t,e,n),T("b",t,e,n))];case"SquaredDifference":return[WC(T("a",t,e,n),T("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},Kle=function(t,e,n){switch(t.op){case"Abs":case"ComplexAbs":return[dC(T("x",t,e,n))];case"Acos":return[hC(T("x",t,e,n))];case"Acosh":return[fC(T("x",t,e,n))];case"Asin":return[pC(T("x",t,e,n))];case"Asinh":return[mC(T("x",t,e,n))];case"Atan":return[gC(T("x",t,e,n))];case"Atan2":return[UC(T("x",t,e,n),T("y",t,e,n))];case"Atanh":return[vC(T("x",t,e,n))];case"Ceil":return[yC(T("x",t,e,n))];case"Complex":return[Kt(T("real",t,e,n),T("imag",t,e,n))];case"Cos":return[bC(T("x",t,e,n))];case"Cosh":return[xC(T("x",t,e,n))];case"Elu":return[hk(T("x",t,e,n))];case"Erf":return[_C(T("x",t,e,n))];case"Exp":return[EC(T("x",t,e,n))];case"Expm1":return[IC(T("x",t,e,n))];case"Floor":return[TC(T("x",t,e,n))];case"Log":return[CC(T("x",t,e,n))];case"Log1p":return[kC(T("x",t,e,n))];case"Imag":return[Xr(T("x",t,e,n))];case"Neg":return[w0(T("x",t,e,n))];case"Reciprocal":return[SC(T("x",t,e,n))];case"Real":return[fr(T("x",t,e,n))];case"Relu":return[pk(T("x",t,e,n))];case"Round":return[AC(T("x",t,e,n))];case"Selu":return[mk(T("x",t,e,n))];case"Sigmoid":return[RC(T("x",t,e,n))];case"Sin":return[PC(T("x",t,e,n))];case"Sign":return[NC(T("x",t,e,n))];case"Sinh":return[DC(T("x",t,e,n))];case"Softplus":return[OC(T("x",t,e,n))];case"Sqrt":return[LC(T("x",t,e,n))];case"Square":return[MC(T("x",t,e,n))];case"Tanh":return[FC(T("x",t,e,n))];case"Tan":return[VC(T("x",t,e,n))];case"Relu6":case"ClipByValue":return[wC(T("x",t,e,n),T("clipValueMin",t,e,n),T("clipValueMax",t,e,n))];case"Rsqrt":return[b0(Hn(t.inputNames[0],e,n))];case"Prod":return[P0(T("x",t,e,n),T("axes",t,e,n))];case"LeakyRelu":return[fk(T("x",t,e,n),T("alpha",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},Yle=function(){function t(e,n,r,i,o,s,a){this.name=e,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=o,this.dynamicSize=s,this.clearAfterRead=a,this.tensors=[],this.closed_=!1,this.id=t.nextId++}return Object.defineProperty(t.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),t.prototype.clearAndClose=function(){this.tensors.forEach(function(e){return e.tensor.dispose()}),this.tensors=[],this.closed_=!0},t.prototype.size=function(){return this.tensors.length},t.prototype.read=function(e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||e>=this.tensors.length)throw new Error("Tried to read from index "+e+", but array size is: "+this.tensors.length);var n=this.tensors[e];if(n.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+e+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(n.cleared=!0),n.read=!0,n.tensor},t.prototype.readMany=function(e){var n=this;return e.map(function(r){return n.read(r)})},t.prototype.write=function(e,n){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index "+e+", but array is not resizeable and size is: "+this.maxSize);var r=this.tensors[e]||{};if(n.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+",\n          because the value dtype is "+n.dtype+", but TensorArray dtype is "+this.dtype+".");if(this.size()!==0||this.elementShape!=null&&this.elementShape.length!==0||(this.elementShape=n.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,n.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+e+"."),r&&r.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been read.");if(r&&r.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been written.");r.tensor=n,r.written=!0,this.tensors[e]=r},t.prototype.writeMany=function(e,n){var r=this;if(e.length!==n.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+e.length+" is not the same as tensors size: "+n.length+".");e.forEach(function(i,o){return r.write(i,n[o])})},t.prototype.gather=function(e,n){if(n&&n!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+n);if(!e){e=[];for(var r=0;r<this.size();r++)e.push(r)}if(e.length===0)return Xt([],[0].concat(this.elementShape));var i=this.readMany(e);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,i[0].shape,"TensorArray shape mismatch: "),Vo(i,0)},t.prototype.concat=function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+e);if(this.size()===0)return Xt([],[0].concat(this.elementShape));for(var n=[],r=0;r<this.size();r++)n.push(r);var i=this.readMany(n);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,i[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+i[0].shape+")"),Vr(i,0)},t.prototype.scatter=function(e,n){if(n.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+n.dtype);if(e.length!==n.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+n.shape[0]);var r=Math.max.apply(Math,e);if(!this.dynamicSize&&r>=this.maxSize)throw new Error("Max index must be < array size ("+r+"  vs. "+this.maxSize+")");this.writeMany(e,dp(n,0))},t.prototype.split=function(e,n){var r=this;if(n.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+n.dtype);var i=0,o=e.map(function(c){return i+=c});if(i!==n.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+i+", and tensor's shape is: "+n.shape);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+e.length+"), and the TensorArray is not marked as dynamically resizeable");var s=i===0?0:n.size/i,a=[];Je(function(){n=n.reshape([1,i,s]);for(var c=0;c<e.length;++c){var d=[0,c===0?0:o[c-1],0],h=[1,e[c],s];a[c]=Ti(n,d,h).reshape(r.elementShape)}return a});for(var u=[],l=0;l<e.length;l++)u[l]=l;this.writeMany(u,a)},t.prototype.assertShapesMatchAllowUndefinedSize=function(e,n,r){r===void 0&&(r=""),xc.assert(this.shapesEqualAllowUndefinedSize(e,n),function(){return r+" Shapes "+e+" and "+n+" must match"})},t.prototype.shapesEqualAllowUndefinedSize=function(e,n){if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==-1&&n[r]!==-1&&e[r]!==n[r])return!1;return!0},t.nextId=0,t}();function Xle(t,e,n){return ku(this,void 0,void 0,function(){var r,i,o,s,a,u,l,c,d,h,f,m,v,y,g,w,b,x,_,E,I,C,S,N,R,D,W,F,G,K,j,L,V,M,Y;return Su(this,function(X){switch(X.label){case 0:switch(t.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[T("pred",t,e,n).clone()]];case 2:return r=T("pred",t,e,n),i=T("data",t,e,n),[4,r.data()];case 3:return[2,X.sent()[0]?[void 0,i.clone()]:[i.clone(),void 0]];case 4:return[2,(o=t.inputNames.find(function(se){return Hn(se,e,n)!==void 0}))?[Hn(o,e,n).clone()]:void 0];case 5:return s=T("frameName",t,e,n),a=T("tensor",t,e,n),n.enterFrame(s),[2,[a.clone()]];case 6:return u=T("tensor",t,e,n),n.exitFrame(),[2,[u.clone()]];case 7:return l=T("tensor",t,e,n),n.nextIteration(),[2,[l.clone()]];case 8:return c=T("size",t,e,n),d=T("dtype",t,e,n),h=T("elementShape",t,e,n),f=T("dynamicSize",t,e,n),m=T("clearAfterRead",t,e,n),v=T("identicalElementShapes",t,e,n),y=T("name",t,e,n),g=new Yle(y,d,c,h,v,f,m),n.addTensorArray(g),[2,[ge(g.id),ge(1)]];case 9:return w=T("tensorArrayId",t,e,n),b=T("index",t,e,n),x=T("tensor",t,e,n),n.getTensorArray(w).write(b,x),[2,[ge(1)]];case 10:return _=T("tensorArrayId",t,e,n),E=T("index",t,e,n),[2,[n.getTensorArray(_).read(E)]];case 11:return I=T("tensorArrayId",t,e,n),C=T("indices",t,e,n),S=T("dtype",t,e,n),[2,[n.getTensorArray(I).gather(C,S)]];case 12:return N=T("tensorArrayId",t,e,n),R=T("indices",t,e,n),D=T("tensor",t,e,n),n.getTensorArray(N).scatter(R,D),[2,[ge(1)]];case 13:return W=T("tensorArrayId",t,e,n),F=n.getTensorArray(W),G=T("dtype",t,e,n),[2,[F.concat(G)]];case 14:return K=T("tensorArrayId",t,e,n),j=T("tensor",t,e,n),L=T("lengths",t,e,n),n.getTensorArray(K).split(L,j),[2,[ge(1)]];case 15:return V=T("tensorArrayId",t,e,n),M=n.getTensorArray(V),[2,[ge(M.size(),"int32")]];case 16:return Y=T("tensorArrayId",t,e,n),n.getTensorArray(Y).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+t.op+" is not implemented")}})})}var Qle=function(t,e,n){var r,i;switch(t.op){case"Conv1D":var o=T("stride",t,e,n),s=T("pad",t,e,n),a=T("dataFormat",t,e,n).toUpperCase(),u=T("dilation",t,e,n);return[XC(T("x",t,e,n),T("filter",t,e,n),o,s,a,u)];case"Conv2D":o=T("strides",t,e,n),s=T("pad",t,e,n),a=T("dataFormat",t,e,n).toUpperCase();var l=T("dilations",t,e,n);return[ed(T("x",t,e,n),T("filter",t,e,n),[o[1],o[2]],s,a,[l[1],l[2]])];case"_FusedConv2D":var c=(r=T("fusedOps",t,e,n))[0],d=r[1],h=c==="biasadd",f=d==="prelu",m=c==="fusedbatchnorm",v=T("numArgs",t,e,n);if(h){if(f&&v!==2)throw new Error("Fused Conv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!f&&v!==1)throw new Error("Fused Conv2d with BiasAdd must have one extra argument: bias.")}if(m)throw new Error("Fused Conv2d with FusedBatchNorm is not supported.");o=T("strides",t,e,n),s=T("pad",t,e,n),a=T("dataFormat",t,e,n).toUpperCase(),l=T("dilations",t,e,n);var y=(i=T("args",t,e,n))[0],g=i[1];return[Tk.conv2d({x:T("x",t,e,n),filter:T("filter",t,e,n),strides:[o[1],o[2]],pad:s,dataFormat:a,dilations:[l[1],l[2]],bias:y,activation:d,preluActivationWeights:g})];case"Conv2DBackpropInput":case"Conv2dTranspose":var w=T("outputShape",t,e,n);return o=T("strides",t,e,n),s=T("pad",t,e,n),[ZC(T("x",t,e,n),T("filter",t,e,n),w,[o[1],o[2]],s)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":return o=T("strides",t,e,n),s=T("pad",t,e,n),l=T("dilations",t,e,n),a=T("dataFormat",t,e,n).toUpperCase(),[R0(T("input",t,e,n),T("filter",t,e,n),[o[1],o[2]],s,a,[l[1],l[2]])];case"Conv3D":return o=T("strides",t,e,n),s=T("pad",t,e,n),a=T("dataFormat",t,e,n).toUpperCase(),l=T("dilations",t,e,n),[QC(T("x",t,e,n),T("filter",t,e,n),[o[1],o[2],o[3]],s,a,[l[1],l[2],l[3]])];case"AvgPool":o=T("strides",t,e,n),s=T("pad",t,e,n);var b=T("kernelSize",t,e,n);return[nk(T("x",t,e,n),[b[1],b[2]],[o[1],o[2]],s)];case"MaxPool":return o=T("strides",t,e,n),s=T("pad",t,e,n),b=T("kernelSize",t,e,n),[tk(T("x",t,e,n),[b[1],b[2]],[o[1],o[2]],s)];case"AvgPool3D":return o=T("strides",t,e,n),s=T("pad",t,e,n),b=T("kernelSize",t,e,n),[ik(T("x",t,e,n),[b[1],b[2],b[3]],[o[1],o[2],o[3]],s)];case"MaxPool3D":return o=T("strides",t,e,n),s=T("pad",t,e,n),b=T("kernelSize",t,e,n),[rk(T("x",t,e,n),[b[1],b[2],b[3]],[o[1],o[2],o[3]],s)];default:throw TypeError("Node type "+t.op+" is not implemented")}},Jle=function(t,e,n){switch(t.op){case"Fill":var r=T("shape",t,e,n),i=T("dtype",t,e,n),o=T("value",t,e,n);return[up(r,o,i)];case"LinSpace":var s=T("start",t,e,n),a=T("stop",t,e,n),u=T("num",t,e,n);return[HT(s,a,u)];case"Multinomial":var l=T("logits",t,e,n),c=T("numSamples",t,e,n),d=T("seed",t,e,n);return[QT(l,c,d)];case"OneHot":var h=T("indices",t,e,n),f=T("depth",t,e,n),m=T("onValue",t,e,n),v=T("offValue",t,e,n);return[wf(h,f,m,v)];case"Ones":return[la(T("shape",t,e,n),T("dtype",t,e,n))];case"OnesLike":return[d0(T("x",t,e,n))];case"RandomUniform":return[p0(T("shape",t,e,n),T("minval",t,e,n),T("maxval",t,e,n),T("dtype",t,e,n))];case"Range":s=T("start",t,e,n);var y=T("stop",t,e,n),g=T("step",t,e,n);return[c0(s,y,g,T("dtype",t,e,n))];case"TruncatedNormal":r=T("shape",t,e,n);var w=T("mean",t,e,n),b=T("stdDev",t,e,n);return d=T("seed",t,e,n),[JT(r,w,b,T("dtype",t,e,n),d)];case"Zeros":return[ft(T("shape",t,e,n),T("dtype",t,e,n))];case"ZerosLike":return[Ve(T("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}};function Zle(t,e,n){return ku(this,void 0,void 0,function(){var r,i,o,s,a;return Su(this,function(u){switch(u.label){case 0:switch(t.op){case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,3];case"ListDiff":return[3,5]}return[3,6];case 1:return r=T("boxes",t,e,n),i=T("scores",t,e,n),o=T("maxOutputSize",t,e,n),s=T("iouThreshold",t,e,n),a=T("scoreThreshold",t,e,n),[4,tu.nonMaxSuppressionAsync(r,i,o,s,a)];case 2:return[2,[u.sent()]];case 3:return[4,E0(T("condition",t,e,n))];case 4:return[2,[u.sent()]];case 5:return[2,ZT(T("x",t,e,n),T("y",t,e,n))];case 6:throw TypeError("Node type "+t.op+" is not implemented")}})})}var ece=function(t,e,n){switch(t.op){case"TopKV2":var r=T("x",t,e,n),i=T("k",t,e,n),o=T("sorted",t,e,n),s=bk(r,i,o);return[s.values,s.indices];default:throw TypeError("Node type "+t.op+" is not implemented")}},tce=function(t,e,n){switch(t.op){case"Const":return e[t.name];case"PlaceholderWithDefault":var r=T("default",t,e,n);return[Hn(t.name,e,n)||r];case"Placeholder":return[Hn(t.name,e,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":return[T("x",t,e,n).clone()];case"IdentityN":return T("x",t,e,n).map(function(l){return l.clone()});case"Snapshot":return[T("x",t,e,n).clone()];case"Shape":return[Ys(T("x",t,e,n).shape,"int32")];case"ShapeN":return T("x",t,e,n).map(function(l){return Ys(l.shape)});case"Size":return[ge(T("x",t,e,n).size,"int32")];case"Rank":return[ge(T("x",t,e,n).rank,"int32")];case"NoOp":return[];case"Print":var i=T("x",t,e,n),o=T("data",t,e,n),s=T("message",t,e,n),a=T("summarize",t,e,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(s);for(var u=0;u<o.length;u++)console.log(Array.prototype.slice.call(o[u].dataSync()).slice(0,a));return[i];default:throw TypeError("Node type "+t.op+" is not implemented")}},nce=function(t,e,n){switch(t.op){case"ResizeBilinear":var r=T("images",t,e,n),i=T("size",t,e,n),o=T("alignCorners",t,e,n);return[tu.resizeBilinear(r,[i[0],i[1]],o)];case"ResizeNearestNeighbor":return r=T("images",t,e,n),i=T("size",t,e,n),o=T("alignCorners",t,e,n),[tu.resizeNearestNeighbor(r,[i[0],i[1]],o)];case"CropAndResize":var s=T("image",t,e,n),a=T("boxes",t,e,n),u=T("boxInd",t,e,n),l=T("cropSize",t,e,n),c=T("method",t,e,n),d=T("extrapolationValue",t,e,n);return[tu.cropAndResize(s,a,u,l,c,d)];default:throw TypeError("Node type "+t.op+" is not implemented")}},rce=function(t,e,n){switch(t.op){case"Equal":return[S0(T("a",t,e,n),T("b",t,e,n))];case"NotEqual":return[KC(T("a",t,e,n),T("b",t,e,n))];case"Greater":return[qC(T("a",t,e,n),T("b",t,e,n))];case"GreaterEqual":return[A0(T("a",t,e,n),T("b",t,e,n))];case"Less":return[HC(T("a",t,e,n),T("b",t,e,n))];case"LessEqual":return[GC(T("a",t,e,n),T("b",t,e,n))];case"LogicalAnd":return[mp(T("a",t,e,n),T("b",t,e,n))];case"LogicalNot":return[BC(T("a",t,e,n))];case"LogicalOr":return[_0(T("a",t,e,n),T("b",t,e,n))];case"Select":return[Cu(T("condition",t,e,n),T("a",t,e,n),T("b",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},ice=function(t,e,n){switch(t.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[ek(T("a",t,e,n),T("b",t,e,n),T("transposeA",t,e,n),T("transposeB",t,e,n))];case"Transpose":return[gk(T("x",t,e,n),T("perm",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},oce=function(t,e,n){switch(t.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[$C(T("x",t,e,n),T("mean",t,e,n),T("variance",t,e,n),T("offset",t,e,n),T("scale",t,e,n),T("epsilon",t,e,n))];case"LRN":return[vk(T("x",t,e,n),T("radius",t,e,n),T("bias",t,e,n),T("alpha",t,e,n),T("beta",t,e,n))];case"Softmax":return[hp(T("x",t,e,n))];case"LogSoftmax":return[tC(T("x",t,e,n))];case"SparseToDense":return[O0(T("sparseIndices",t,e,n),T("outputShape",t,e,n),T("sparseValues",t,e,n),T("defaultValue",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},sce=function(t,e,n){switch(t.op){case"Max":var r=T("axis",t,e,n),i=T("keepDims",t,e,n);return[lk(T("x",t,e,n),r,i)];case"Mean":return r=T("axis",t,e,n),i=T("keepDims",t,e,n),[ck(T("x",t,e,n),r,i)];case"Min":return r=T("axis",t,e,n),i=T("keepDims",t,e,n),[dk(T("x",t,e,n),r,i)];case"Sum":return r=T("axis",t,e,n),i=T("keepDims",t,e,n),[N0(T("x",t,e,n),r,i)];case"All":return r=T("axis",t,e,n),i=T("keepDims",t,e,n),[ok(T("x",t,e,n),r,i)];case"Any":return r=T("axis",t,e,n),i=T("keepDims",t,e,n),[sk(T("x",t,e,n),r,i)];case"ArgMax":return r=T("axis",t,e,n),[ak(T("x",t,e,n),r)];case"ArgMin":return r=T("axis",t,e,n),[uk(T("x",t,e,n),r)];case"Prod":return r=T("axis",t,e,n),i=T("keepDims",t,e,n),[P0(T("x",t,e,n),r,i)];default:throw TypeError("Node type "+t.op+" is not implemented")}},ace=function(t,e,n){switch(t.op){case"ConcatV2":case"Concat":var r=T("axis",t,e,n),i=T("tensors",t,e,n);return[Vr(i,r)];case"GatherV2":case"Gather":r=T("axis",t,e,n);var o=T("x",t,e,n),s=T("indices",t,e,n);return[vp(o,s.asType("int32"),r)];case"ReverseV2":case"Reverse":return r=T("axis",t,e,n),o=T("x",t,e,n),[qu(o,r)];case"Slice":var a=T("begin",t,e,n),u=T("size",t,e,n);return[Ti(T("x",t,e,n),a,u)];case"StridedSlice":a=T("begin",t,e,n);var l=T("end",t,e,n),c=T("strides",t,e,n),d=T("beginMask",t,e,n),h=T("endMask",t,e,n),f=T("ellipsisMask",t,e,n),m=T("newAxisMask",t,e,n),v=T("shrinkAxisMask",t,e,n),y=T("x",t,e,n);if(a.length===1&&y.shape.length>1)for(var g=1;g<y.shape.length;g++)a.push(0),l.push(y.shape[g]),c.push(c[0]);return[wk(y,a,l,c,d,h,f,m,v)];case"Pack":return Je(function(){var S=T("axis",t,e,n),N=T("tensors",t,e,n),R=N[0].shape,D=N[0].squeeze().shape,W=N.map(function(F){var G=xc.arraysEqual(F.shape,R);if(!G&&!xc.arraysEqual(F.squeeze().shape,D))throw new Error("the input tensors shape does not match");return G?F:F.reshape(R)});return[Vo(W,S)]});case"Unpack":return Je(function(){var S=T("axis",t,e,n),N=T("tensor",t,e,n);return dp(N,S)});case"Tile":var w=T("reps",t,e,n);return[eu(T("x",t,e,n),w)];case"Split":case"SplitV":r=T("axis",t,e,n);var b=T("numOrSizeSplits",t,e,n);return lp(T("x",t,e,n),b,r);case"ScatterNd":s=T("indices",t,e,n);var x=T("values",t,e,n),_=T("shape",t,e,n);return[xk(s,x,_)];case"GatherNd":var E=T("x",t,e,n);return s=T("indices",t,e,n),[_k(E,s)];case"SparseToDense":s=T("sparseIndices",t,e,n),_=T("outputShape",t,e,n);var I=T("sparseValues",t,e,n),C=T("defaultValue",t,e,n);return[O0(s,I,_,I.dtype===C.dtype?C:C.asType(I.dtype))];default:throw TypeError("Node type "+t.op+" is not implemented")}},uce=function(t,e,n){switch(t.op){case"FFT":return[yp(T("x",t,e,n))];case"IFFT":return[Cc(T("x",t,e,n))];case"RFFT":return[wp(T("x",t,e,n))];case"IRFFT":return[D0(T("x",t,e,n))];default:throw TypeError("Node type "+t.op+" is not implemented")}},lce=function(t,e,n){switch(t.op){case"Cast":return[KT(T("x",t,e,n),T("dtype",t,e,n))];case"ExpandDims":var r=T("axis",t,e,n);return[Oi(T("x",t,e,n),r)];case"Squeeze":return r=T("axis",t,e,n),[g0(T("x",t,e,n),r)];case"Reshape":return[cp(T("x",t,e,n),T("shape",t,e,n))];case"PadV2":case"Pad":return[Wu(T("x",t,e,n),bb(T("padding",t,e,n),2),T("constantValue",t,e,n))];case"SpaceToBatchND":var i=T("blockShape",t,e,n),o=bb(T("paddings",t,e,n),2);return[m0(T("x",t,e,n),i,o)];case"BatchToSpaceND":i=T("blockShape",t,e,n);var s=bb(T("crops",t,e,n),2);return[f0(T("x",t,e,n),i,s)];case"DepthToSpace":var a=T("blockSize",t,e,n),u=T("dataFormat",t,e,n).toUpperCase();return[YT(T("x",t,e,n),a,u)];default:throw TypeError("Node type "+t.op+" is not implemented")}};function W2(t,e,n){var r=function(i,o,s){switch(i.category){case"arithmetic":return Gle(i,o,s);case"basic_math":return Kle(i,o,s);case"control":return Xle(i,o,s);case"convolution":return Qle(i,o,s);case"creation":return Jle(i,o,s);case"dynamic":return Zle(i,o,s);case"evaluation":return ece(i,o,s);case"image":return nce(i,o,s);case"graph":return tce(i,o,s);case"logical":return rce(i,o,s);case"matrices":return ice(i,o,s);case"normalization":return oce(i,o,s);case"reduction":return sce(i,o,s);case"slice_join":return ace(i,o,s);case"spectral":return uce(i,o,s);case"transformation":return lce(i,o,s);case"custom":var a=iU(i.op);if(a&&a.customExecutor)return a.customExecutor(new Hle(i,o,s));throw TypeError("Custom op "+i.op+" is not registered.");default:throw TypeError("Unknown op '"+i.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(t,e,n);return r instanceof Promise?r.then(function(i){return[].concat(i)}):[].concat(r)}var q2=function(){function t(e,n){this.weightMap=e,this.tensorArrayMap=n,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return t.prototype.newFrame=function(e,n){return{id:e,frameName:n,iterationId:0}},Object.defineProperty(t.prototype,"currentContext",{get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),t.prototype.generateCurrentContextIds=function(){for(var e=[],n=0;n<this.contexts.length-1;n++){var r=this.contexts.slice(0,this.contexts.length-n);e.push(this.contextIdforContexts(r))}e.push(""),this._currentContextIds=e},t.prototype.contextIdforContexts=function(e){return e?e.map(function(n){return n.id===0&&n.iterationId===0?"":n.frameName+"-"+n.iterationId}).join("/"):""},t.prototype.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},t.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},t.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},t.prototype.getWeight=function(e){return this.weightMap[e]},t.prototype.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},t.prototype.getTensorArray=function(e){return this.tensorArrayMap[e]},t}();function H2(t,e,n){for(var r=new Set,i=[],o=null,s=null,a=new Set,u=e.slice();u.length>0;){var l=u.pop();(uU(l)||fce(l))&&o==null&&(s=(o=l).children.map(function(c){return c.name}).filter(function(c){return r.has(c)})),r.add(l.name),n[l.name]==null&&t[l.name]==null&&(l.inputs.length!==0?l.inputs.forEach(function(c){a.has(c.name)||(a.add(c.name),u.push(c))}):i.push(l.name))}return{inputs:t,outputs:e,usedNodes:r,missingInputs:i,dynamicNode:o,syncInputs:s}}function cce(t,e,n){var r=n.usedNodes,i=n.inputs,o=[];Object.keys(i).map(function(l){return t.nodes[l]}).forEach(function(l){r.has(l.name)&&o.push(l)}),t.weights.forEach(function(l){r.has(l.name)&&o.push(l)});for(var s=new Set,a=[];o.length>0;){var u=o.pop();s.add(u.name),e[u.name]||a.push(u),u.children.forEach(function(l){!s.has(l.name)&&r.has(l.name)&&l.inputs.every(function(c){return s.has(c.name)})&&o.push(l)})}return a}var dce=["Switch","Merge","Enter","Exit","NextIteration"],hce=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"];function uU(t){return dce.indexOf(t.op)>=0}function fce(t){return hce.indexOf(t.op)>=0}var pce=function(){function t(e){this.graph=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this.placeholders=e.placeholders,this._outputs=e.outputs}return Object.defineProperty(t.prototype,"weightMap",{get:function(){return this._weightMap},set:function(e){var n=Object.keys(e).map(function(r){return e[r].map(function(i){return i.id})});this.weightIds=[].concat.apply([],n),this._weightMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.placeholders.map(function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this._outputs.map(function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.placeholders.map(function(e){return e.name})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.outputs.map(function(e){return e.name})},enumerable:!0,configurable:!0}),t.prototype.getCompilationKey=function(e,n){var r=e.map(function(o){return o.name}).sort(),i=n.map(function(o){return o.name}).sort();return r.join(this.SEPERATOR)+"--"+i.join(this.SEPERATOR)},t.prototype.compile=function(e,n){var r=H2(e,n,this.weightMap),i=r.missingInputs,o=r.dynamicNode,s=r.syncInputs;if(o!=null)throw new Error("This execution contains the node '"+o.name+"', which has the dynamic op '"+o.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+s+"]");if(i.length>0){var a=n.map(function(l){return l.name}),u=Object.keys(e);throw new Error("Cannot compute the outputs ["+a+"] from the provided inputs ["+u+"]. Missing the following inputs: ["+i+"]")}return cce(this.graph,this.weightMap,r)},t.prototype.execute=function(e,n){var r=this,i=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),this.checkOutputs(n);var o=i.map(function(c){return r.graph.nodes[c]}),s=n.map(function(c){return r.graph.nodes[hh(c)[0]]}),a=this.getCompilationKey(o,s),u=this.compiledMap.get(a);u==null&&(u=this.compile(e,s),this.compiledMap.set(a,u));var l={};return Je(function(){var c=new q2(r._weightMap,l),d=H_({},r.weightMap);Object.keys(e).forEach(function(g){d[g]=[e[g]]});for(var h=r.getFrozenTensorIds(d),f={},m=0;m<u.length;m++){var v=u[m];if(!d[v.name]){var y=W2(v,d,c);if(y instanceof Promise)throw new Error("The execution of the op '"+v.op+"' returned a promise. Please use model.executeAsync() instead.");d[v.name]=y,r.checkTensorForDisposal(v.name,v,d,c,h,n,f)}}return n.map(function(g){return Hn(g,d,c)})})},t.prototype.getFrozenTensorIds=function(e){var n=[].concat.apply([],Object.keys(e).map(function(r){return e[r]}).map(function(r){return r.map(function(i){return i.id})}));return new Set(n)},t.prototype.checkTensorForDisposal=function(e,n,r,i,o,s,a){n.category!=="control"&&s.indexOf(e)===-1&&(r[e].forEach(function(u){u!=null&&(a[u.id]=(a[u.id]||0)+n.children.length)}),n.inputs.forEach(function(u){if(u.category!=="control"){var l=dle(u.name,r,i);l!=null&&l.forEach(function(c){if(c&&!o.has(c.id)){var d=a[c.id];d===1?(c.dispose(),delete a[c.id]):d!=null&&a[c.id]--}})}}))},t.prototype.executeAsync=function(e,n){return ku(this,void 0,void 0,function(){var r,i,o,s,a,u,l=this;return Su(this,function(c){switch(c.label){case 0:return this.checkInputs(e),this.checkInputShapeAndType(e),this.checkOutputs(n),r={},i=new q2(this._weightMap,r),[4,this.executeWithControlFlow(e,i,n)];case 1:return o=c.sent(),s=n.map(function(d){return Hn(d,o,i)}),a=new Set(s.map(function(d){return d.id})),u=new Set(Object.keys(e).map(function(d){return e[d].id})),Object.keys(o).forEach(function(d){o[d].forEach(function(h){!h||h.isDisposed||a.has(h.id)||u.has(h.id)||l.weightIds.indexOf(h.id)!==-1||h.dispose()})}),[2,s]}})})},t.prototype.executeWithControlFlow=function(e,n,r){return ku(this,void 0,void 0,function(){var i,o,s,a,u,l,c,d,h,f,m,v,y,g,w,b,x=this;return Su(this,function(_){switch(_.label){case 0:i=Object.keys(e),o=i.map(function(E){return x.graph.nodes[E]}),s=r.map(function(E){return x.graph.nodes[hh(E)[0]]}),a=H2(e,s,this.weightMap),u=a.usedNodes,l=a.missingInputs,c=a.dynamicNode,d=a.syncInputs,h=o.concat(this.graph.weights).map(function(E){return{node:E,contexts:n.currentContext}}),f=H_({},this.weightMap),Object.keys(e).forEach(function(E){f[E]=[e[E]]}),m={},v=this.getFrozenTensorIds(f),y={},_.label=1;case 1:return h.length>0?(g=this.processStack(o,h,n,f,y,v,r,m,u),[4,Promise.all(g)]):[3,3];case 2:return _.sent(),[3,1];case 3:if(c==null&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),(w=s.filter(function(E){return!uU(E)&&!Hn(E.name,f,n)}).map(function(E){return E.name})).length>0)throw b="",c!=null&&(b="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+d+"]"),new Error("Cannot compute the outputs ["+w+"] from the provided inputs ["+i+"]. Consider providing the following inputs: ["+l+"]. "+b);return[2,f]}})})},t.prototype.processStack=function(e,n,r,i,o,s,a,u,l){for(var c=this,d=[],h=function(){var m=n.pop();r.currentContext=m.contexts;var v="";if(m.node.op==="Enter"&&T("isConstant",m.node,i,r)&&(v=Km(m.node.name,r)[0]),e.indexOf(m.node)===-1){var y=W2(m.node,i,r);v||(v=Km(m.node.name,r)[0]);var g=r.currentContext;y instanceof Promise?d.push(y.then(function(w){return i[v]=w,r.currentContext=g,c.checkTensorForDisposal(v,m.node,i,r,s,a,u),c.processChildNodes(m.node,n,r,i,o,l),w})):(i[v]=y,f.checkTensorForDisposal(v,m.node,i,r,s,a,u),f.processChildNodes(m.node,n,r,i,o,l))}else f.processChildNodes(m.node,n,r,i,o,l)},f=this;n.length>0;)h();return d},t.prototype.processChildNodes=function(e,n,r,i,o,s){e.children.forEach(function(a){var u=Km(a.name,r)[0];!o[u]&&s.has(a.name)&&(a.op==="Merge"?a.inputNames.some(function(l){return!!Hn(l,i,r)})&&(o[u]=!0,n.push({contexts:r.currentContext,node:a})):a.inputNames.every(function(l){return!!Hn(l,i,r)})&&(o[u]=!0,n.push({contexts:r.currentContext,node:a})))})},t.prototype.dispose=function(){var e=this;Object.keys(this.weightMap).forEach(function(n){return e.weightMap[n].forEach(function(r){return r.dispose()})})},t.prototype.checkInputShapeAndType=function(e){var n=this;Object.keys(e).forEach(function(r){var i=e[r],o=n.graph.nodes[r];if(o.attrParams.shape&&o.attrParams.shape.value){var s=o.attrParams.shape.value,a=s.length===i.shape.length&&i.shape.every(function(u,l){return s[l]===-1||s[l]===u});xc.assert(a,function(){return"The shape of dict['"+o.name+"'] provided in model.execute(dict) must be ["+s+"], but was ["+i.shape+"]"})}o.attrParams.dtype&&o.attrParams.dtype.value&&xc.assert(i.dtype===o.attrParams.dtype.value,function(){return"The dtype of dict['"+o.name+"'] provided in model.execute(dict) must be "+o.attrParams.dtype.value+", but was "+i.dtype})})},t.prototype.checkInputs=function(e){var n=this,r=Object.keys(e).filter(function(i){return!n.graph.nodes[i]});if(r.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+r+"] that are not part of graph")},t.prototype.checkOutputs=function(e){var n=this;e.forEach(function(r){var i=hh(r)[0];if(!n.graph.nodes[i])throw new Error("The output '"+r+"' is not found in the graph")})},t}(),mce="?tfjs-format=file",gce="model.json",vce=function(){function t(e,n){n===void 0&&(n={}),this.modelUrl=e,this.loadOptions=n,this.version="n/a",n==null&&(this.loadOptions={})}return Object.defineProperty(t.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),t.prototype.findIOHandler=function(){var e=this.modelUrl;if(e.load!=null)this.handler=e;else if(this.loadOptions.requestInit!=null)this.handler=zd.browserHTTPRequest(e,this.loadOptions);else{var n=zd.getLoadHandlers(e,this.loadOptions.onProgress);if(n.length===0)n.push(zd.browserHTTPRequest(e,this.loadOptions));else if(n.length>1)throw new Error("Found more than one ("+n.length+") load handlers for URL '"+[e]+"'");this.handler=n[0]}},t.prototype.load=function(){return ku(this,void 0,void 0,function(){var e,n,r;return Su(this,function(i){switch(i.label){case 0:if(this.findIOHandler(),this.handler.load==null)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return e=i.sent(),n=e.modelTopology,this.version=n.versions.producer+"."+n.versions.minConsumer,r=zd.decodeWeights(e.weightData,e.weightSpecs),this.executor=new pce(Wle.Instance.transformGraph(n)),this.executor.weightMap=this.convertTensorMapToTensorsMap(r),[2,!0]}})})},t.prototype.predict=function(e,n){return this.execute(e,this.outputNodes)},t.prototype.normalizeInputs=function(e){if(!(e instanceof ie||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+e.length+" input tensors.");return this.inputNodes.reduce(function(n,r,i){return n[r]=e[i],n},{})},t.prototype.normalizeOutputs=function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]},t.prototype.execute=function(e,n){e=this.normalizeInputs(e),n=this.normalizeOutputs(n);var r=this.executor.execute(e,n);return r.length>1?r:r[0]},t.prototype.executeAsync=function(e,n){return ku(this,void 0,void 0,function(){var r;return Su(this,function(i){switch(i.label){case 0:return e=this.normalizeInputs(e),n=this.normalizeOutputs(n),[4,this.executor.executeAsync(e,n)];case 1:return[2,(r=i.sent()).length>1?r:r[0]]}})})},t.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce(function(n,r){return n[r]=[e[r]],n},{})},t.prototype.dispose=function(){this.executor.dispose()},t}();function G2(t,e){return e===void 0&&(e={}),ku(this,void 0,void 0,function(){var n;return Su(this,function(r){switch(r.label){case 0:if(t==null)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");return e==null&&(e={}),e.fromTFHub&&t.load==null&&(t.endsWith("/")||(t+="/"),t=""+t+gce+mce),[4,(n=new vce(t,e)).load()];case 1:return r.sent(),[2,n]}})})}/**
    * @license
    * Copyright 2019 Google LLC. All Rights Reserved.
    * Licensed under the Apache License, Version 2.0 (the "License");
    * you may not use this file except in compliance with the License.
    * You may obtain a copy of the License at
    *
    * http://www.apache.org/licenses/LICENSE-2.0
    *
    * Unless required by applicable law or agreed to in writing, software
    * distributed under the License is distributed on an "AS IS" BASIS,
    * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
    * See the License for the specific language governing permissions and
    * limitations under the License.
    * =============================================================================
    */function vv(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(l){try{u(r.next(l))}catch(c){o(c)}}function a(l){try{u(r.throw(l))}catch(c){o(c)}}function u(l){l.done?i(l.value):new n(function(c){c(l.value)}).then(s,a)}u((r=r.apply(t,e||[])).next())})}function yv(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(l){return function(c){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return s.label++,{value:c[1],done:!1};case 5:s.label++,r=c[1],c=[0];continue;case 7:c=s.ops.pop(),s.trys.pop();continue;default:if(!(i=(i=s.trys).length>0&&i[i.length-1])&&(c[0]===6||c[0]===2)){s=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){s.label=c[1];break}if(c[0]===6&&s.label<i[1]){s.label=i[1],i=c;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(c);break}i[2]&&s.ops.pop(),s.trys.pop();continue}c=e.call(t,s)}catch(d){c=[6,d],r=0}finally{n=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([u,l])}}}var yce={0:"tench, Tinca tinca",1:"goldfish, Carassius auratus",2:"great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",3:"tiger shark, Galeocerdo cuvieri",4:"hammerhead, hammerhead shark",5:"electric ray, crampfish, numbfish, torpedo",6:"stingray",7:"cock",8:"hen",9:"ostrich, Struthio camelus",10:"brambling, Fringilla montifringilla",11:"goldfinch, Carduelis carduelis",12:"house finch, linnet, Carpodacus mexicanus",13:"junco, snowbird",14:"indigo bunting, indigo finch, indigo bird, Passerina cyanea",15:"robin, American robin, Turdus migratorius",16:"bulbul",17:"jay",18:"magpie",19:"chickadee",20:"water ouzel, dipper",21:"kite",22:"bald eagle, American eagle, Haliaeetus leucocephalus",23:"vulture",24:"great grey owl, great gray owl, Strix nebulosa",25:"European fire salamander, Salamandra salamandra",26:"common newt, Triturus vulgaris",27:"eft",28:"spotted salamander, Ambystoma maculatum",29:"axolotl, mud puppy, Ambystoma mexicanum",30:"bullfrog, Rana catesbeiana",31:"tree frog, tree-frog",32:"tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui",33:"loggerhead, loggerhead turtle, Caretta caretta",34:"leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea",35:"mud turtle",36:"terrapin",37:"box turtle, box tortoise",38:"banded gecko",39:"common iguana, iguana, Iguana iguana",40:"American chameleon, anole, Anolis carolinensis",41:"whiptail, whiptail lizard",42:"agama",43:"frilled lizard, Chlamydosaurus kingi",44:"alligator lizard",45:"Gila monster, Heloderma suspectum",46:"green lizard, Lacerta viridis",47:"African chameleon, Chamaeleo chamaeleon",48:"Komodo dragon, Komodo lizard, dragon lizard, giant lizard, Varanus komodoensis",49:"African crocodile, Nile crocodile, Crocodylus niloticus",50:"American alligator, Alligator mississipiensis",51:"triceratops",52:"thunder snake, worm snake, Carphophis amoenus",53:"ringneck snake, ring-necked snake, ring snake",54:"hognose snake, puff adder, sand viper",55:"green snake, grass snake",56:"king snake, kingsnake",57:"garter snake, grass snake",58:"water snake",59:"vine snake",60:"night snake, Hypsiglena torquata",61:"boa constrictor, Constrictor constrictor",62:"rock python, rock snake, Python sebae",63:"Indian cobra, Naja naja",64:"green mamba",65:"sea snake",66:"horned viper, cerastes, sand viper, horned asp, Cerastes cornutus",67:"diamondback, diamondback rattlesnake, Crotalus adamanteus",68:"sidewinder, horned rattlesnake, Crotalus cerastes",69:"trilobite",70:"harvestman, daddy longlegs, Phalangium opilio",71:"scorpion",72:"black and gold garden spider, Argiope aurantia",73:"barn spider, Araneus cavaticus",74:"garden spider, Aranea diademata",75:"black widow, Latrodectus mactans",76:"tarantula",77:"wolf spider, hunting spider",78:"tick",79:"centipede",80:"black grouse",81:"ptarmigan",82:"ruffed grouse, partridge, Bonasa umbellus",83:"prairie chicken, prairie grouse, prairie fowl",84:"peacock",85:"quail",86:"partridge",87:"African grey, African gray, Psittacus erithacus",88:"macaw",89:"sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita",90:"lorikeet",91:"coucal",92:"bee eater",93:"hornbill",94:"hummingbird",95:"jacamar",96:"toucan",97:"drake",98:"red-breasted merganser, Mergus serrator",99:"goose",100:"black swan, Cygnus atratus",101:"tusker",102:"echidna, spiny anteater, anteater",103:"platypus, duckbill, duckbilled platypus, duck-billed platypus, Ornithorhynchus anatinus",104:"wallaby, brush kangaroo",105:"koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus",106:"wombat",107:"jelly fish",108:"sea anemone, anemone",109:"brain coral",110:"flatworm, platyhelminth",111:"nematode, nematode worm, roundworm",112:"conch",113:"snail",114:"slug",115:"sea slug, nudibranch",116:"chiton, coat-of-mail shell, sea cradle, polyplacophore",117:"chambered nautilus, pearly nautilus, nautilus",118:"Dungeness crab, Cancer magister",119:"rock crab, Cancer irroratus",120:"fiddler crab",121:"king crab, Alaska crab, Alaskan king crab, Alaska king crab, Paralithodes camtschatica",122:"American lobster, Northern lobster, Maine lobster, Homarus americanus",123:"spiny lobster, langouste, rock lobster, crawfish, crayfish, sea crawfish",124:"crayfish, crawfish, crawdad, crawdaddy",125:"hermit crab",126:"isopod",127:"white stork, Ciconia ciconia",128:"black stork, Ciconia nigra",129:"spoonbill",130:"flamingo",131:"little blue heron, Egretta caerulea",132:"American egret, great white heron, Egretta albus",133:"bittern",134:"crane",135:"limpkin, Aramus pictus",136:"European gallinule, Porphyrio porphyrio",137:"American coot, marsh hen, mud hen, water hen, Fulica americana",138:"bustard",139:"ruddy turnstone, Arenaria interpres",140:"red-backed sandpiper, dunlin, Erolia alpina",141:"redshank, Tringa totanus",142:"dowitcher",143:"oystercatcher, oyster catcher",144:"pelican",145:"king penguin, Aptenodytes patagonica",146:"albatross, mollymawk",147:"grey whale, gray whale, devilfish, Eschrichtius gibbosus, Eschrichtius robustus",148:"killer whale, killer, orca, grampus, sea wolf, Orcinus orca",149:"dugong, Dugong dugon",150:"sea lion",151:"Chihuahua",152:"Japanese spaniel",153:"Maltese dog, Maltese terrier, Maltese",154:"Pekinese, Pekingese, Peke",155:"Shih-Tzu",156:"Blenheim spaniel",157:"papillon",158:"toy terrier",159:"Rhodesian ridgeback",160:"Afghan hound, Afghan",161:"basset, basset hound",162:"beagle",163:"bloodhound, sleuthhound",164:"bluetick",165:"black-and-tan coonhound",166:"Walker hound, Walker foxhound",167:"English foxhound",168:"redbone",169:"borzoi, Russian wolfhound",170:"Irish wolfhound",171:"Italian greyhound",172:"whippet",173:"Ibizan hound, Ibizan Podenco",174:"Norwegian elkhound, elkhound",175:"otterhound, otter hound",176:"Saluki, gazelle hound",177:"Scottish deerhound, deerhound",178:"Weimaraner",179:"Staffordshire bullterrier, Staffordshire bull terrier",180:"American Staffordshire terrier, Staffordshire terrier, American pit bull terrier, pit bull terrier",181:"Bedlington terrier",182:"Border terrier",183:"Kerry blue terrier",184:"Irish terrier",185:"Norfolk terrier",186:"Norwich terrier",187:"Yorkshire terrier",188:"wire-haired fox terrier",189:"Lakeland terrier",190:"Sealyham terrier, Sealyham",191:"Airedale, Airedale terrier",192:"cairn, cairn terrier",193:"Australian terrier",194:"Dandie Dinmont, Dandie Dinmont terrier",195:"Boston bull, Boston terrier",196:"miniature schnauzer",197:"giant schnauzer",198:"standard schnauzer",199:"Scotch terrier, Scottish terrier, Scottie",200:"Tibetan terrier, chrysanthemum dog",201:"silky terrier, Sydney silky",202:"soft-coated wheaten terrier",203:"West Highland white terrier",204:"Lhasa, Lhasa apso",205:"flat-coated retriever",206:"curly-coated retriever",207:"golden retriever",208:"Labrador retriever",209:"Chesapeake Bay retriever",210:"German short-haired pointer",211:"vizsla, Hungarian pointer",212:"English setter",213:"Irish setter, red setter",214:"Gordon setter",215:"Brittany spaniel",216:"clumber, clumber spaniel",217:"English springer, English springer spaniel",218:"Welsh springer spaniel",219:"cocker spaniel, English cocker spaniel, cocker",220:"Sussex spaniel",221:"Irish water spaniel",222:"kuvasz",223:"schipperke",224:"groenendael",225:"malinois",226:"briard",227:"kelpie",228:"komondor",229:"Old English sheepdog, bobtail",230:"Shetland sheepdog, Shetland sheep dog, Shetland",231:"collie",232:"Border collie",233:"Bouvier des Flandres, Bouviers des Flandres",234:"Rottweiler",235:"German shepherd, German shepherd dog, German police dog, alsatian",236:"Doberman, Doberman pinscher",237:"miniature pinscher",238:"Greater Swiss Mountain dog",239:"Bernese mountain dog",240:"Appenzeller",241:"EntleBucher",242:"boxer",243:"bull mastiff",244:"Tibetan mastiff",245:"French bulldog",246:"Great Dane",247:"Saint Bernard, St Bernard",248:"Eskimo dog, husky",249:"malamute, malemute, Alaskan malamute",250:"Siberian husky",251:"dalmatian, coach dog, carriage dog",252:"affenpinscher, monkey pinscher, monkey dog",253:"basenji",254:"pug, pug-dog",255:"Leonberg",256:"Newfoundland, Newfoundland dog",257:"Great Pyrenees",258:"Samoyed, Samoyede",259:"Pomeranian",260:"chow, chow chow",261:"keeshond",262:"Brabancon griffon",263:"Pembroke, Pembroke Welsh corgi",264:"Cardigan, Cardigan Welsh corgi",265:"toy poodle",266:"miniature poodle",267:"standard poodle",268:"Mexican hairless",269:"timber wolf, grey wolf, gray wolf, Canis lupus",270:"white wolf, Arctic wolf, Canis lupus tundrarum",271:"red wolf, maned wolf, Canis rufus, Canis niger",272:"coyote, prairie wolf, brush wolf, Canis latrans",273:"dingo, warrigal, warragal, Canis dingo",274:"dhole, Cuon alpinus",275:"African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus",276:"hyena, hyaena",277:"red fox, Vulpes vulpes",278:"kit fox, Vulpes macrotis",279:"Arctic fox, white fox, Alopex lagopus",280:"grey fox, gray fox, Urocyon cinereoargenteus",281:"tabby, tabby cat",282:"tiger cat",283:"Persian cat",284:"Siamese cat, Siamese",285:"Egyptian cat",286:"cougar, puma, catamount, mountain lion, painter, panther, Felis concolor",287:"lynx, catamount",288:"leopard, Panthera pardus",289:"snow leopard, ounce, Panthera uncia",290:"jaguar, panther, Panthera onca, Felis onca",291:"lion, king of beasts, Panthera leo",292:"tiger, Panthera tigris",293:"cheetah, chetah, Acinonyx jubatus",294:"brown bear, bruin, Ursus arctos",295:"American black bear, black bear, Ursus americanus, Euarctos americanus",296:"ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus",297:"sloth bear, Melursus ursinus, Ursus ursinus",298:"mongoose",299:"meerkat, mierkat",300:"tiger beetle",301:"ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle",302:"ground beetle, carabid beetle",303:"long-horned beetle, longicorn, longicorn beetle",304:"leaf beetle, chrysomelid",305:"dung beetle",306:"rhinoceros beetle",307:"weevil",308:"fly",309:"bee",310:"ant, emmet, pismire",311:"grasshopper, hopper",312:"cricket",313:"walking stick, walkingstick, stick insect",314:"cockroach, roach",315:"mantis, mantid",316:"cicada, cicala",317:"leafhopper",318:"lacewing, lacewing fly",319:"dragonfly, darning needle, devil's darning needle, sewing needle, snake feeder, snake doctor, mosquito hawk, skeeter hawk",320:"damselfly",321:"admiral",322:"ringlet, ringlet butterfly",323:"monarch, monarch butterfly, milkweed butterfly, Danaus plexippus",324:"cabbage butterfly",325:"sulphur butterfly, sulfur butterfly",326:"lycaenid, lycaenid butterfly",327:"starfish, sea star",328:"sea urchin",329:"sea cucumber, holothurian",330:"wood rabbit, cottontail, cottontail rabbit",331:"hare",332:"Angora, Angora rabbit",333:"hamster",334:"porcupine, hedgehog",335:"fox squirrel, eastern fox squirrel, Sciurus niger",336:"marmot",337:"beaver",338:"guinea pig, Cavia cobaya",339:"sorrel",340:"zebra",341:"hog, pig, grunter, squealer, Sus scrofa",342:"wild boar, boar, Sus scrofa",343:"warthog",344:"hippopotamus, hippo, river horse, Hippopotamus amphibius",345:"ox",346:"water buffalo, water ox, Asiatic buffalo, Bubalus bubalis",347:"bison",348:"ram, tup",349:"bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky Mountain sheep, Ovis canadensis",350:"ibex, Capra ibex",351:"hartebeest",352:"impala, Aepyceros melampus",353:"gazelle",354:"Arabian camel, dromedary, Camelus dromedarius",355:"llama",356:"weasel",357:"mink",358:"polecat, fitch, foulmart, foumart, Mustela putorius",359:"black-footed ferret, ferret, Mustela nigripes",360:"otter",361:"skunk, polecat, wood pussy",362:"badger",363:"armadillo",364:"three-toed sloth, ai, Bradypus tridactylus",365:"orangutan, orang, orangutang, Pongo pygmaeus",366:"gorilla, Gorilla gorilla",367:"chimpanzee, chimp, Pan troglodytes",368:"gibbon, Hylobates lar",369:"siamang, Hylobates syndactylus, Symphalangus syndactylus",370:"guenon, guenon monkey",371:"patas, hussar monkey, Erythrocebus patas",372:"baboon",373:"macaque",374:"langur",375:"colobus, colobus monkey",376:"proboscis monkey, Nasalis larvatus",377:"marmoset",378:"capuchin, ringtail, Cebus capucinus",379:"howler monkey, howler",380:"titi, titi monkey",381:"spider monkey, Ateles geoffroyi",382:"squirrel monkey, Saimiri sciureus",383:"Madagascar cat, ring-tailed lemur, Lemur catta",384:"indri, indris, Indri indri, Indri brevicaudatus",385:"Indian elephant, Elephas maximus",386:"African elephant, Loxodonta africana",387:"lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens",388:"giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca",389:"barracouta, snoek",390:"eel",391:"coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus kisutch",392:"rock beauty, Holocanthus tricolor",393:"anemone fish",394:"sturgeon",395:"gar, garfish, garpike, billfish, Lepisosteus osseus",396:"lionfish",397:"puffer, pufferfish, blowfish, globefish",398:"abacus",399:"abaya",400:"academic gown, academic robe, judge's robe",401:"accordion, piano accordion, squeeze box",402:"acoustic guitar",403:"aircraft carrier, carrier, flattop, attack aircraft carrier",404:"airliner",405:"airship, dirigible",406:"altar",407:"ambulance",408:"amphibian, amphibious vehicle",409:"analog clock",410:"apiary, bee house",411:"apron",412:"ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, dustbin, trash barrel, trash bin",413:"assault rifle, assault gun",414:"backpack, back pack, knapsack, packsack, rucksack, haversack",415:"bakery, bakeshop, bakehouse",416:"balance beam, beam",417:"balloon",418:"ballpoint, ballpoint pen, ballpen, Biro",419:"Band Aid",420:"banjo",421:"bannister, banister, balustrade, balusters, handrail",422:"barbell",423:"barber chair",424:"barbershop",425:"barn",426:"barometer",427:"barrel, cask",428:"barrow, garden cart, lawn cart, wheelbarrow",429:"baseball",430:"basketball",431:"bassinet",432:"bassoon",433:"bathing cap, swimming cap",434:"bath towel",435:"bathtub, bathing tub, bath, tub",436:"beach wagon, station wagon, wagon, estate car, beach waggon, station waggon, waggon",437:"beacon, lighthouse, beacon light, pharos",438:"beaker",439:"bearskin, busby, shako",440:"beer bottle",441:"beer glass",442:"bell cote, bell cot",443:"bib",444:"bicycle-built-for-two, tandem bicycle, tandem",445:"bikini, two-piece",446:"binder, ring-binder",447:"binoculars, field glasses, opera glasses",448:"birdhouse",449:"boathouse",450:"bobsled, bobsleigh, bob",451:"bolo tie, bolo, bola tie, bola",452:"bonnet, poke bonnet",453:"bookcase",454:"bookshop, bookstore, bookstall",455:"bottlecap",456:"bow",457:"bow tie, bow-tie, bowtie",458:"brass, memorial tablet, plaque",459:"brassiere, bra, bandeau",460:"breakwater, groin, groyne, mole, bulwark, seawall, jetty",461:"breastplate, aegis, egis",462:"broom",463:"bucket, pail",464:"buckle",465:"bulletproof vest",466:"bullet train, bullet",467:"butcher shop, meat market",468:"cab, hack, taxi, taxicab",469:"caldron, cauldron",470:"candle, taper, wax light",471:"cannon",472:"canoe",473:"can opener, tin opener",474:"cardigan",475:"car mirror",476:"carousel, carrousel, merry-go-round, roundabout, whirligig",477:"carpenter's kit, tool kit",478:"carton",479:"car wheel",480:"cash machine, cash dispenser, automated teller machine, automatic teller machine, automated teller, automatic teller, ATM",481:"cassette",482:"cassette player",483:"castle",484:"catamaran",485:"CD player",486:"cello, violoncello",487:"cellular telephone, cellular phone, cellphone, cell, mobile phone",488:"chain",489:"chainlink fence",490:"chain mail, ring mail, mail, chain armor, chain armour, ring armor, ring armour",491:"chain saw, chainsaw",492:"chest",493:"chiffonier, commode",494:"chime, bell, gong",495:"china cabinet, china closet",496:"Christmas stocking",497:"church, church building",498:"cinema, movie theater, movie theatre, movie house, picture palace",499:"cleaver, meat cleaver, chopper",500:"cliff dwelling",501:"cloak",502:"clog, geta, patten, sabot",503:"cocktail shaker",504:"coffee mug",505:"coffeepot",506:"coil, spiral, volute, whorl, helix",507:"combination lock",508:"computer keyboard, keypad",509:"confectionery, confectionary, candy store",510:"container ship, containership, container vessel",511:"convertible",512:"corkscrew, bottle screw",513:"cornet, horn, trumpet, trump",514:"cowboy boot",515:"cowboy hat, ten-gallon hat",516:"cradle",517:"crane",518:"crash helmet",519:"crate",520:"crib, cot",521:"Crock Pot",522:"croquet ball",523:"crutch",524:"cuirass",525:"dam, dike, dyke",526:"desk",527:"desktop computer",528:"dial telephone, dial phone",529:"diaper, nappy, napkin",530:"digital clock",531:"digital watch",532:"dining table, board",533:"dishrag, dishcloth",534:"dishwasher, dish washer, dishwashing machine",535:"disk brake, disc brake",536:"dock, dockage, docking facility",537:"dogsled, dog sled, dog sleigh",538:"dome",539:"doormat, welcome mat",540:"drilling platform, offshore rig",541:"drum, membranophone, tympan",542:"drumstick",543:"dumbbell",544:"Dutch oven",545:"electric fan, blower",546:"electric guitar",547:"electric locomotive",548:"entertainment center",549:"envelope",550:"espresso maker",551:"face powder",552:"feather boa, boa",553:"file, file cabinet, filing cabinet",554:"fireboat",555:"fire engine, fire truck",556:"fire screen, fireguard",557:"flagpole, flagstaff",558:"flute, transverse flute",559:"folding chair",560:"football helmet",561:"forklift",562:"fountain",563:"fountain pen",564:"four-poster",565:"freight car",566:"French horn, horn",567:"frying pan, frypan, skillet",568:"fur coat",569:"garbage truck, dustcart",570:"gasmask, respirator, gas helmet",571:"gas pump, gasoline pump, petrol pump, island dispenser",572:"goblet",573:"go-kart",574:"golf ball",575:"golfcart, golf cart",576:"gondola",577:"gong, tam-tam",578:"gown",579:"grand piano, grand",580:"greenhouse, nursery, glasshouse",581:"grille, radiator grille",582:"grocery store, grocery, food market, market",583:"guillotine",584:"hair slide",585:"hair spray",586:"half track",587:"hammer",588:"hamper",589:"hand blower, blow dryer, blow drier, hair dryer, hair drier",590:"hand-held computer, hand-held microcomputer",591:"handkerchief, hankie, hanky, hankey",592:"hard disc, hard disk, fixed disk",593:"harmonica, mouth organ, harp, mouth harp",594:"harp",595:"harvester, reaper",596:"hatchet",597:"holster",598:"home theater, home theatre",599:"honeycomb",600:"hook, claw",601:"hoopskirt, crinoline",602:"horizontal bar, high bar",603:"horse cart, horse-cart",604:"hourglass",605:"iPod",606:"iron, smoothing iron",607:"jack-o'-lantern",608:"jean, blue jean, denim",609:"jeep, landrover",610:"jersey, T-shirt, tee shirt",611:"jigsaw puzzle",612:"jinrikisha, ricksha, rickshaw",613:"joystick",614:"kimono",615:"knee pad",616:"knot",617:"lab coat, laboratory coat",618:"ladle",619:"lampshade, lamp shade",620:"laptop, laptop computer",621:"lawn mower, mower",622:"lens cap, lens cover",623:"letter opener, paper knife, paperknife",624:"library",625:"lifeboat",626:"lighter, light, igniter, ignitor",627:"limousine, limo",628:"liner, ocean liner",629:"lipstick, lip rouge",630:"Loafer",631:"lotion",632:"loudspeaker, speaker, speaker unit, loudspeaker system, speaker system",633:"loupe, jeweler's loupe",634:"lumbermill, sawmill",635:"magnetic compass",636:"mailbag, postbag",637:"mailbox, letter box",638:"maillot",639:"maillot, tank suit",640:"manhole cover",641:"maraca",642:"marimba, xylophone",643:"mask",644:"matchstick",645:"maypole",646:"maze, labyrinth",647:"measuring cup",648:"medicine chest, medicine cabinet",649:"megalith, megalithic structure",650:"microphone, mike",651:"microwave, microwave oven",652:"military uniform",653:"milk can",654:"minibus",655:"miniskirt, mini",656:"minivan",657:"missile",658:"mitten",659:"mixing bowl",660:"mobile home, manufactured home",661:"Model T",662:"modem",663:"monastery",664:"monitor",665:"moped",666:"mortar",667:"mortarboard",668:"mosque",669:"mosquito net",670:"motor scooter, scooter",671:"mountain bike, all-terrain bike, off-roader",672:"mountain tent",673:"mouse, computer mouse",674:"mousetrap",675:"moving van",676:"muzzle",677:"nail",678:"neck brace",679:"necklace",680:"nipple",681:"notebook, notebook computer",682:"obelisk",683:"oboe, hautboy, hautbois",684:"ocarina, sweet potato",685:"odometer, hodometer, mileometer, milometer",686:"oil filter",687:"organ, pipe organ",688:"oscilloscope, scope, cathode-ray oscilloscope, CRO",689:"overskirt",690:"oxcart",691:"oxygen mask",692:"packet",693:"paddle, boat paddle",694:"paddlewheel, paddle wheel",695:"padlock",696:"paintbrush",697:"pajama, pyjama, pj's, jammies",698:"palace",699:"panpipe, pandean pipe, syrinx",700:"paper towel",701:"parachute, chute",702:"parallel bars, bars",703:"park bench",704:"parking meter",705:"passenger car, coach, carriage",706:"patio, terrace",707:"pay-phone, pay-station",708:"pedestal, plinth, footstall",709:"pencil box, pencil case",710:"pencil sharpener",711:"perfume, essence",712:"Petri dish",713:"photocopier",714:"pick, plectrum, plectron",715:"pickelhaube",716:"picket fence, paling",717:"pickup, pickup truck",718:"pier",719:"piggy bank, penny bank",720:"pill bottle",721:"pillow",722:"ping-pong ball",723:"pinwheel",724:"pirate, pirate ship",725:"pitcher, ewer",726:"plane, carpenter's plane, woodworking plane",727:"planetarium",728:"plastic bag",729:"plate rack",730:"plow, plough",731:"plunger, plumber's helper",732:"Polaroid camera, Polaroid Land camera",733:"pole",734:"police van, police wagon, paddy wagon, patrol wagon, wagon, black Maria",735:"poncho",736:"pool table, billiard table, snooker table",737:"pop bottle, soda bottle",738:"pot, flowerpot",739:"potter's wheel",740:"power drill",741:"prayer rug, prayer mat",742:"printer",743:"prison, prison house",744:"projectile, missile",745:"projector",746:"puck, hockey puck",747:"punching bag, punch bag, punching ball, punchball",748:"purse",749:"quill, quill pen",750:"quilt, comforter, comfort, puff",751:"racer, race car, racing car",752:"racket, racquet",753:"radiator",754:"radio, wireless",755:"radio telescope, radio reflector",756:"rain barrel",757:"recreational vehicle, RV, R.V.",758:"reel",759:"reflex camera",760:"refrigerator, icebox",761:"remote control, remote",762:"restaurant, eating house, eating place, eatery",763:"revolver, six-gun, six-shooter",764:"rifle",765:"rocking chair, rocker",766:"rotisserie",767:"rubber eraser, rubber, pencil eraser",768:"rugby ball",769:"rule, ruler",770:"running shoe",771:"safe",772:"safety pin",773:"saltshaker, salt shaker",774:"sandal",775:"sarong",776:"sax, saxophone",777:"scabbard",778:"scale, weighing machine",779:"school bus",780:"schooner",781:"scoreboard",782:"screen, CRT screen",783:"screw",784:"screwdriver",785:"seat belt, seatbelt",786:"sewing machine",787:"shield, buckler",788:"shoe shop, shoe-shop, shoe store",789:"shoji",790:"shopping basket",791:"shopping cart",792:"shovel",793:"shower cap",794:"shower curtain",795:"ski",796:"ski mask",797:"sleeping bag",798:"slide rule, slipstick",799:"sliding door",800:"slot, one-armed bandit",801:"snorkel",802:"snowmobile",803:"snowplow, snowplough",804:"soap dispenser",805:"soccer ball",806:"sock",807:"solar dish, solar collector, solar furnace",808:"sombrero",809:"soup bowl",810:"space bar",811:"space heater",812:"space shuttle",813:"spatula",814:"speedboat",815:"spider web, spider's web",816:"spindle",817:"sports car, sport car",818:"spotlight, spot",819:"stage",820:"steam locomotive",821:"steel arch bridge",822:"steel drum",823:"stethoscope",824:"stole",825:"stone wall",826:"stopwatch, stop watch",827:"stove",828:"strainer",829:"streetcar, tram, tramcar, trolley, trolley car",830:"stretcher",831:"studio couch, day bed",832:"stupa, tope",833:"submarine, pigboat, sub, U-boat",834:"suit, suit of clothes",835:"sundial",836:"sunglass",837:"sunglasses, dark glasses, shades",838:"sunscreen, sunblock, sun blocker",839:"suspension bridge",840:"swab, swob, mop",841:"sweatshirt",842:"swimming trunks, bathing trunks",843:"swing",844:"switch, electric switch, electrical switch",845:"syringe",846:"table lamp",847:"tank, army tank, armored combat vehicle, armoured combat vehicle",848:"tape player",849:"teapot",850:"teddy, teddy bear",851:"television, television system",852:"tennis ball",853:"thatch, thatched roof",854:"theater curtain, theatre curtain",855:"thimble",856:"thresher, thrasher, threshing machine",857:"throne",858:"tile roof",859:"toaster",860:"tobacco shop, tobacconist shop, tobacconist",861:"toilet seat",862:"torch",863:"totem pole",864:"tow truck, tow car, wrecker",865:"toyshop",866:"tractor",867:"trailer truck, tractor trailer, trucking rig, rig, articulated lorry, semi",868:"tray",869:"trench coat",870:"tricycle, trike, velocipede",871:"trimaran",872:"tripod",873:"triumphal arch",874:"trolleybus, trolley coach, trackless trolley",875:"trombone",876:"tub, vat",877:"turnstile",878:"typewriter keyboard",879:"umbrella",880:"unicycle, monocycle",881:"upright, upright piano",882:"vacuum, vacuum cleaner",883:"vase",884:"vault",885:"velvet",886:"vending machine",887:"vestment",888:"viaduct",889:"violin, fiddle",890:"volleyball",891:"waffle iron",892:"wall clock",893:"wallet, billfold, notecase, pocketbook",894:"wardrobe, closet, press",895:"warplane, military plane",896:"washbasin, handbasin, washbowl, lavabo, wash-hand basin",897:"washer, automatic washer, washing machine",898:"water bottle",899:"water jug",900:"water tower",901:"whiskey jug",902:"whistle",903:"wig",904:"window screen",905:"window shade",906:"Windsor tie",907:"wine bottle",908:"wing",909:"wok",910:"wooden spoon",911:"wool, woolen, woollen",912:"worm fence, snake fence, snake-rail fence, Virginia fence",913:"wreck",914:"yawl",915:"yurt",916:"web site, website, internet site, site",917:"comic book",918:"crossword puzzle, crossword",919:"street sign",920:"traffic light, traffic signal, stoplight",921:"book jacket, dust cover, dust jacket, dust wrapper",922:"menu",923:"plate",924:"guacamole",925:"consomme",926:"hot pot, hotpot",927:"trifle",928:"ice cream, icecream",929:"ice lolly, lolly, lollipop, popsicle",930:"French loaf",931:"bagel, beigel",932:"pretzel",933:"cheeseburger",934:"hotdog, hot dog, red hot",935:"mashed potato",936:"head cabbage",937:"broccoli",938:"cauliflower",939:"zucchini, courgette",940:"spaghetti squash",941:"acorn squash",942:"butternut squash",943:"cucumber, cuke",944:"artichoke, globe artichoke",945:"bell pepper",946:"cardoon",947:"mushroom",948:"Granny Smith",949:"strawberry",950:"orange",951:"lemon",952:"fig",953:"pineapple, ananas",954:"banana",955:"jackfruit, jak, jack",956:"custard apple",957:"pomegranate",958:"hay",959:"carbonara",960:"chocolate sauce, chocolate syrup",961:"dough",962:"meat loaf, meatloaf",963:"pizza, pizza pie",964:"potpie",965:"burrito",966:"red wine",967:"espresso",968:"cup",969:"eggnog",970:"alp",971:"bubble",972:"cliff, drop, drop-off",973:"coral reef",974:"geyser",975:"lakeside, lakeshore",976:"promontory, headland, head, foreland",977:"sandbar, sand bar",978:"seashore, coast, seacoast, sea-coast",979:"valley, vale",980:"volcano",981:"ballplayer, baseball player",982:"groom, bridegroom",983:"scuba diver",984:"rapeseed",985:"daisy",986:"yellow lady's slipper, yellow lady-slipper, Cypripedium calceolus, Cypripedium parviflorum",987:"corn",988:"acorn",989:"hip, rose hip, rosehip",990:"buckeye, horse chestnut, conker",991:"coral fungus",992:"agaric",993:"gyromitra",994:"stinkhorn, carrion fungus",995:"earthstar",996:"hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola frondosa",997:"bolete",998:"ear, spike, capitulum",999:"toilet tissue, toilet paper, bathroom tissue"},ss=224,wce={"1.00":"module_apply_default/MobilenetV1/Logits/global_pool","2.00":"module_apply_default/MobilenetV2/Logits/AvgPool"},ml={"1.00":{.25:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_025_224/classification/1",inputRange:[0,1]},"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_050_224/classification/1",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_075_224/classification/1",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_100_224/classification/1",inputRange:[0,1]}},"2.00":{"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_050_224/classification/2",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_075_224/classification/2",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_100_224/classification/2",inputRange:[0,1]}}};function Dk(t){return t===void 0&&(t={version:1,alpha:1}),vv(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return yv(this,function(u){switch(u.label){case 0:if(lle==null)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(r=t.version.toFixed(2),i=t.alpha?t.alpha.toFixed(2):"",o=-1,s=1,t.modelUrl==null){if(!(r in ml))throw new Error("Invalid version of MobileNet. Valid versions are: "+Object.keys(ml));if(!(i in ml[r]))throw new Error("MobileNet constructed with invalid alpha "+t.alpha+". Valid multipliers for this version are: "+Object.keys(ml[r])+".");e=ml[r][i].inputRange,o=e[0],s=e[1]}return t.inputRange!=null&&(n=t.inputRange,o=n[0],s=n[1]),[4,(a=new bce(r,i,t.modelUrl,o,s)).load()];case 1:return u.sent(),[2,a]}})})}var bce=function(){function t(e,n,r,i,o){i===void 0&&(i=-1),o===void 0&&(o=1),this.version=e,this.alpha=n,this.modelUrl=r,this.inputMin=i,this.inputMax=o,this.normalizationConstant=(o-i)/255}return t.prototype.load=function(){return vv(this,void 0,void 0,function(){var e,n,r,i,o=this;return yv(this,function(s){switch(s.label){case 0:return this.modelUrl?(e=this,[4,G2(this.modelUrl)]):[3,2];case 1:return e.model=s.sent(),[3,4];case 2:return n=ml[this.version][this.alpha].url,r=this,[4,G2(n,{fromTFHub:!0})];case 3:r.model=s.sent(),s.label=4;case 4:return[4,(i=Je(function(){return o.model.predict(ft([1,ss,ss,3]))})).data()];case 5:return s.sent(),i.dispose(),[2]}})})},t.prototype.infer=function(e,n){var r=this;return n===void 0&&(n=!1),Je(function(){e instanceof ie||(e=eU.fromPixels(e));var i=e.toFloat().mul(r.normalizationConstant).add(r.inputMin),o=i;(e.shape[0]!==ss||e.shape[1]!==ss)&&(o=tu.resizeBilinear(i,[ss,ss],!0));var s,a=o.reshape([-1,ss,ss,3]);if(n){var u=wce[r.version];s=r.model.execute(a,u).squeeze([1,2])}else s=r.model.predict(a).slice([0,1],[-1,1e3]);return s})},t.prototype.classify=function(e,n){return n===void 0&&(n=3),vv(this,void 0,void 0,function(){var r,i;return yv(this,function(o){switch(o.label){case 0:return[4,xce(r=this.infer(e),n)];case 1:return i=o.sent(),r.dispose(),[2,i]}})})},t}();function xce(t,e){return vv(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return yv(this,function(l){switch(l.label){case 0:return[4,(n=t.softmax()).data()];case 1:for(r=l.sent(),n.dispose(),i=[],u=0;u<r.length;u++)i.push({value:r[u],index:u});for(i.sort(function(c,d){return d.value-c.value}),o=new Float32Array(e),s=new Int32Array(e),u=0;u<e;u++)o[u]=i[u].value,s[u]=i[u].index;for(a=[],u=0;u<s.length;u++)a.push({className:yce[s[u]],probability:o[u]});return[2,a]}})})}const dm={initial:"initial",states:{initial:{on:{next:"loadingModel"}},loadingModel:{on:{next:"modelReady"}},modelReady:{on:{next:"imageReady"}},imageReady:{on:{next:"identifying"},showImage:!0},identifying:{on:{next:"complete"}},complete:{on:{next:"modelReady"},showImage:!0,showResults:!0}}},_ce=()=>{const[t,e]=Q.useState([]),[n,r]=Q.useState(null),[i,o]=Q.useState(null),s=Q.useRef(null),a=Q.useRef(null),u=(x,_)=>dm.states[x].on[_]||dm.initial,[l,c]=Q.useReducer(u,dm.initial),d=()=>c("next"),h=async()=>{d();const x=await Dk();o(x),d()},f=async()=>{if(d(),s.current){const x=await i.classify(s.current);e(x)}d()},m=async()=>{e([]),d()},v=()=>{var x;return(x=a.current)==null?void 0:x.click()},y=x=>{const{files:_}=x.target;if(_&&_.length>0){const E=URL.createObjectURL(_[0]);r(E),d()}},g={initial:{action:h,text:"Load Model"},loadingModel:{action:()=>{},text:"Loading Model..."},modelReady:{action:v,text:"Upload Image"},imageReady:{action:f,text:"Identify Breed"},identifying:{action:()=>{},text:"Identifying..."},complete:{action:m,text:"Reset"}},{showImage:w,showResults:b}=dm.states[l];return p.jsx("div",{className:"adminHome",children:p.jsxs("div",{className:"grid-container",children:[p.jsx("div",{className:"menu-icon",children:p.jsx("strong",{children:" "})}),p.jsxs("header",{className:"header",children:[p.jsx("div",{className:"header_title",children:p.jsx("h2",{children:"Identify Breeds"})}),p.jsx("div",{className:"header_avatar",children:p.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),p.jsxs("aside",{className:"aside",children:[p.jsx("div",{className:"aside_close-icon",children:p.jsx("strong",{children:""})}),p.jsxs("h2",{className:"menu_title",children:[p.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),p.jsxs("ul",{className:"aside_list",children:[p.jsx("a",{href:"/adminHome",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-users fw"})," Users"]})}),p.jsx("a",{href:"/adminPetList",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),p.jsx("a",{href:"/adminAppointments",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),p.jsx("a",{href:"/petIdentifier",children:p.jsxs("li",{className:"aside_list-item active-list",children:[p.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),p.jsx("ul",{className:"aside_footer",children:p.jsx("li",{className:"aside_list-item",children:p.jsx("a",{href:"/login",children:"Logout"})})})]}),p.jsx("main",{className:"main",children:p.jsx("div",{className:"petIdentifierBody2",children:p.jsxs("div",{className:"petIdentifierDiv",children:[w&&p.jsx("img",{className:"petIdentifierImg",src:n||void 0,alt:"upload-preview",ref:s}),p.jsx("input",{className:"petIdentifierInput",type:"file",accept:"image/*",capture:"environment",onChange:y,ref:a}),b&&p.jsx("ul",{className:"petIdentifierUl",children:t.map(({className:x,probability:_})=>p.jsx("li",{className:"petIdentifierLi",children:"".concat(x,": %").concat((_*100).toFixed(2))},x))}),p.jsx("button",{className:"petIdentifierButton",onClick:g[l].action||(()=>{}),children:g[l].text})]})})})]})})},Ece=()=>{const[t,e]=Q.useState(!1),[n,r]=Q.useState([]);Q.useEffect(()=>{(async()=>{const u=await Ie.firestore().collection("users").get();r(u.docs.map(l=>({...l.data(),id:l.id})))})()},[]);const i=async(s,a,u)=>{const c=Ie.firestore().collection("users").doc(s);window.confirm("Are you sure you want to delete this user?")&&(await c.delete(),r(n.filter(d=>d.id!==s)))},o=()=>{e(!t)};return p.jsx(Ht,{children:p.jsx(qt,{children:p.jsx("div",{className:"adminHome",children:p.jsxs("div",{className:"grid-container",children:[p.jsx("div",{className:"menu-icon",onClick:o,children:p.jsx("strong",{children:" "})}),p.jsxs("header",{className:"header",children:[p.jsx("div",{className:"header_title",children:p.jsx("h2",{children:"Users"})}),p.jsx("div",{className:"header_avatar",children:p.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),p.jsxs("aside",{className:"aside ".concat(t?"active":""),children:[p.jsx("div",{className:"aside_close-icon",children:p.jsx("strong",{children:""})}),p.jsxs("h2",{className:"menu_title",children:[p.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),p.jsxs("ul",{className:"aside_list",children:[p.jsx("a",{href:"/adminHome",children:p.jsxs("li",{className:"aside_list-item active-list",children:[p.jsx("i",{className:"fas fa-users fw"})," Users"]})}),p.jsx("a",{href:"/adminPetList",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),p.jsx("a",{href:"/adminAppointments",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),p.jsx("a",{href:"/petIdentifier",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),p.jsx("ul",{className:"aside_footer",children:p.jsx("li",{className:"aside_list-item",children:p.jsx("a",{href:"/login",children:"Logout"})})})]}),p.jsx("main",{className:"main",children:n.map(s=>p.jsx(zi,{className:"card",children:p.jsxs(Df,{children:["Email: ",s.email,p.jsx("br",{}),"Role: ",s.role,p.jsx("br",{}),p.jsx(lu,{color:"danger",onClick:()=>i(s.id,s.email,s.role),children:"Delete"})]})},s.id))})]})})})})},Ice=()=>{const[t,e]=Q.useState(!1),[n,r]=Q.useState([]),i=Ie.storage().ref(),[o,s]=Q.useState(0),[a,u]=Q.useState(0);Q.useEffect(()=>{const f=async()=>{const y=(await i.child("images").listAll()).items.map(g=>g.getDownloadURL());return Promise.all(y)};(async()=>{const v=await f();r(v)})()},[]);const[l,c]=Q.useState([]);Q.useEffect(()=>{(async()=>{const b=(await Ie.firestore().collection("pets").orderBy("index").get()).docs.map(x=>({...x.data(),id:x.id}));c(b)})();const m=l.filter(y=>y.status==="Available"),v=l.filter(y=>y.status==="Adopted");s(m.length),u(v.length)},[l]);const d=async(f,m)=>{const y=Ie.firestore().collection("pets").doc(f),w=Ie.storage().ref().child("images/".concat(m));window.confirm("Are you sure you want to delete this pet?")&&(w.delete().then(()=>{console.log("Image deleted from Firebase Storage.")}).catch(b=>{console.error("Error deleting image from Firebase Storage:",b)}),await y.delete(),c(l.filter(b=>b.id!==f)))},h=()=>{e(!t)};return p.jsx(Ht,{children:p.jsx(qt,{children:p.jsx("div",{className:"adminHome",children:p.jsxs("div",{className:"grid-container",children:[p.jsx("div",{className:"menu-icon",onClick:h,children:p.jsx("strong",{children:" "})}),p.jsxs("header",{className:"header",children:[p.jsx("div",{className:"header_title",children:p.jsx("h2",{children:"Pets"})}),p.jsx("div",{className:"header_avatar",children:p.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),p.jsxs("aside",{className:"aside ".concat(t?"active":""),children:[p.jsx("div",{className:"aside_close-icon",children:p.jsx("strong",{children:""})}),p.jsxs("h2",{className:"menu_title",children:[p.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),p.jsxs("ul",{className:"aside_list",children:[p.jsx("a",{href:"/adminHome",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-users fw"})," Users"]})}),p.jsx("a",{href:"/adminPetList",children:p.jsxs("li",{className:"aside_list-item active-list",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),p.jsx("a",{href:"/adminAppointments",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),p.jsx("a",{href:"/petIdentifier",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),p.jsx("ul",{className:"aside_footer",children:p.jsx("li",{className:"aside_list-item",children:p.jsx("a",{href:"/login",children:"Logout"})})})]}),p.jsxs("main",{className:"main",children:[p.jsxs(zi,{className:"countbox",children:[p.jsx("strong",{children:"Available:"})," ",o]}),p.jsxs(zi,{className:"countbox1",children:[p.jsx("strong",{children:"Adopted:"})," ",a]}),l.map((f,m)=>p.jsx(zi,{className:"card3",children:p.jsxs(Df,{children:[p.jsx("img",{className:"document_img2",src:n[m],alt:f.name},m),p.jsx("br",{}),"Pet Name: ",f.name,p.jsx("br",{}),"Owner Information: ",f.caretakerInfo,p.jsx("br",{}),"Address: ",f.location,p.jsx("br",{}),"Neutered: ",f.neutered,p.jsx("br",{}),"Pet Status: ",f.status,p.jsx("br",{}),p.jsx(lu,{color:"light",children:p.jsx(Bo,{to:"/adminUpdatePet/".concat(f.id),children:"Select Status"})}),p.jsx(lu,{color:"danger",onClick:()=>d(f.id,f.index),children:" Delete "})]})}))]})]})})})})},Tce=()=>{const t=Pu(),[e,n]=Q.useState(!1),{id:r}=Nc(),[i,o]=Q.useState({index:Date.now(),name:"",age:"",breed:"",location:"",about:"",caretakerInfo:"",caretakerNumber:"",weight:"",gender:"male",neutered:"yes",type:"cat",status:"available",address:""});Q.useEffect(()=>{(async()=>{const d=await Ie.firestore().collection("pets").doc(r).get();o(d.data())})()},[r]);const s=l=>{o({...i,[l.target.name]:l.target.value})},a=async(l,c)=>{l.preventDefault(),await Ie.firestore().collection("pets").doc(r).set(c),t.push("/adminPetList")};if(!i)return p.jsx("div",{children:"Loading..."});const u=()=>{n(!e)};return p.jsx(Ht,{children:p.jsx(qt,{children:p.jsx("div",{className:"adminHome",children:p.jsxs("div",{className:"grid-container",children:[p.jsx("div",{className:"menu-icon",onClick:u,children:p.jsx("strong",{children:" "})}),p.jsxs("header",{className:"header",children:[p.jsx("div",{className:"header_title",children:p.jsx("h2",{children:"Edit Appointment"})}),p.jsx("div",{className:"header_avatar",children:p.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),p.jsxs("aside",{className:"aside ".concat(e?"active":""),children:[p.jsx("div",{className:"aside_close-icon",children:p.jsx("strong",{children:""})}),p.jsxs("h2",{className:"menu_title",children:[p.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),p.jsxs("ul",{className:"aside_list",children:[p.jsx("a",{href:"/adminHome",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-users fw"})," Users"]})}),p.jsx("a",{href:"/adminPetList",children:p.jsxs("li",{className:"aside_list-item active-list",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),p.jsx("a",{href:"/adminAppointments",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),p.jsx("a",{href:"/petIdentifier",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),p.jsx("ul",{className:"aside_footer",children:p.jsx("li",{className:"aside_list-item",children:p.jsx("a",{href:"/login",children:"Logout"})})})]}),p.jsx("main",{className:"main",children:p.jsx(zi,{children:p.jsx(Df,{className:"card",children:p.jsxs("form",{onSubmit:l=>a(l,i),children:["Pet Name: ",i.name,p.jsx("br",{}),"Age: ",i.age,p.jsx("br",{}),"Gender: ",i.gender,p.jsx("br",{}),"Neutered: ",i.neutered,p.jsx("br",{}),"Type: ",i.type,p.jsx("br",{}),"Breed: ",i.breed,p.jsx("br",{}),"Weight: ",i.weight,p.jsx("br",{}),"Address: ",i.address,p.jsx("br",{}),"About: ",i.about,p.jsx("br",{}),"Breed: ",i.breed,p.jsx("br",{}),"Caretaker Name: ",i.caretakerInfo,p.jsx("br",{}),"Caretaker Contact Number: ",i.caretakerNumber,p.jsx("br",{}),"Caretaker Location: ",i.location,p.jsx("br",{}),p.jsxs("label",{children:["Status:",p.jsxs("select",{name:"status",value:i.status,onChange:s,children:[p.jsx("option",{value:"Available",children:"Available"}),p.jsx("option",{value:"Adopted",children:"Adopted"})]})]}),p.jsx("br",{}),p.jsx(lu,{type:"submit",children:"Update Pet"}),p.jsx("br",{}),p.jsx("br",{})]})})})})]})})})})},Cce=()=>{const[t,e]=Q.useState(!1),[n,r]=Q.useState([]),i=Ie.storage().ref(),[o,s]=Q.useState([]),[a,u]=Q.useState(0),[l,c]=Q.useState(0),[d,h]=Q.useState(0);Q.useEffect(()=>{const v=async()=>{const w=(await i.child("documents").listAll()).items.map(b=>b.getDownloadURL());return Promise.all(w)};(async()=>{const g=await v();r(g)})()},[]),Q.useEffect(()=>{(async()=>{const _=await Ie.firestore().collection("appointment").orderBy("index").get(),E=await Promise.all(_.docs.map(async I=>{var N;const C=I.data(),S=await i.child("documents/".concat(C.index)).getDownloadURL();return{...C,id:I.id,imageUrl:S,index:(N=C.index)!=null?N:""}}));s(E)})();const y=o.filter(b=>b.status==="Pending"),g=o.filter(b=>b.status==="Confirmed"),w=o.filter(b=>b.status==="Deny");u(y.length),c(g.length),h(w.length)},[o]);const f=async(v,y)=>{const w=Ie.firestore().collection("appointment").doc(v),x=Ie.storage().ref().child("documents/".concat(y));window.confirm("Are you sure you want to delete this appointment?")&&(x.delete().then(()=>{console.log("Image deleted from Firebase Storage.")}).catch(_=>{console.error("Error deleting image from Firebase Storage:",_)}),await w.delete(),s(o.filter(_=>_.id!==v)))},m=()=>{e(!t)};return p.jsx(Ht,{children:p.jsx(qt,{children:p.jsx("div",{className:"adminHome",children:p.jsxs("div",{className:"grid-container",children:[p.jsx("div",{className:"menu-icon",onClick:m,children:p.jsx("strong",{children:" "})}),p.jsxs("header",{className:"header",children:[p.jsx("div",{className:"header_title",children:p.jsx("h2",{children:"Appointments"})}),p.jsx("div",{className:"header_avatar",children:p.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),p.jsxs("aside",{className:"aside ".concat(t?"active":""),children:[p.jsx("div",{className:"aside_close-icon",children:p.jsx("strong",{children:""})}),p.jsxs("h2",{className:"menu_title",children:[p.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),p.jsxs("ul",{className:"aside_list",children:[p.jsx("a",{href:"/adminHome",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-users fw"})," Users"]})}),p.jsx("a",{href:"/adminPetList",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),p.jsx("a",{href:"/adminAppointments",children:p.jsxs("li",{className:"aside_list-item active-list",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),p.jsx("a",{href:"/petIdentifier",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),p.jsx("ul",{className:"aside_footer",children:p.jsx("li",{className:"aside_list-item",children:p.jsx("a",{href:"/login",children:"Logout"})})})]}),p.jsxs("main",{className:"main",children:[p.jsxs(zi,{className:"countbox",children:[p.jsx("strong",{children:"Pending Appointments:"})," ",a]}),p.jsxs(zi,{className:"countbox1",children:[p.jsx("strong",{children:"Confirmed Appointments:"})," ",l]}),p.jsxs(zi,{className:"countbox2",children:[p.jsx("strong",{children:"Denied Appointments:"})," ",d]}),o.map((v,y)=>p.jsx(zi,{className:"card2",children:p.jsxs(Df,{children:[p.jsx("img",{className:"document_img2   ",src:v.imageUrl,alt:v.index},y),p.jsx("br",{}),"Pet Name: ",v.pet_name,p.jsx("br",{}),"Owner Information: ",v.pet_name,p.jsx("br",{}),"Owner Number: ",v.pet_number,p.jsx("br",{}),"Address: ",v.pet_location,p.jsx("br",{}),"Your Name: ",v.appoint_name,p.jsx("br",{}),"Your Number: ",v.appoint_number,p.jsx("br",{}),"Your Email: ",v.appoint_email,p.jsx("br",{}),"Status: ",v.status,p.jsx("br",{}),p.jsx(lu,{color:"light",children:p.jsx(Bo,{to:"/selectStatus/".concat(v.id),children:"View and Select Status"})}),p.jsx(lu,{color:"danger",onClick:()=>f(v.id,v.index),children:" Delete "})]})}))]})]})})})})},kce=()=>{const t=Pu(),[e,n]=Q.useState(!1),{id:r}=Nc(),[i,o]=Q.useState({id:"",appoint_name:"",appoint_number:"",appoint_email:"",appoint_address:"",appoint_date:"",pet_name:"",pet_caretaker:"",pet_location:"",pet_index:"",status:"Pending",q1:"",q2:"",q3:"",q4:"",q5:"",q6:"",q7:"",q8:"",q9:"",q10:"",q11:"",q12:"",q13:"",q14:"",q15:"",q16:"",q17:"",q18:"",q19:""});Q.useEffect(()=>{(async()=>{const d=await Ie.firestore().collection("appointment").doc(r).get();o(d.data())})()},[r]);const s=l=>{o({...i,[l.target.name]:l.target.value})},a=async(l,c)=>{l.preventDefault(),await Ie.firestore().collection("appointment").doc(r).set(c),t.push("/adminAppointments")},u=()=>{n(!e)};return i?p.jsx(Ht,{children:p.jsx(qt,{children:p.jsx("div",{className:"adminHome",children:p.jsxs("div",{className:"grid-container",children:[p.jsx("div",{className:"menu-icon",onClick:u,children:p.jsx("strong",{children:" "})}),p.jsxs("header",{className:"header",children:[p.jsx("div",{className:"header_title",children:p.jsx("h2",{children:"Edit Appointment"})}),p.jsx("div",{className:"header_avatar",children:p.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),p.jsxs("aside",{className:"aside ".concat(e?"active":""),children:[p.jsx("div",{className:"aside_close-icon",children:p.jsx("strong",{children:""})}),p.jsxs("h2",{className:"menu_title",children:[p.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),p.jsxs("ul",{className:"aside_list",children:[p.jsx("a",{href:"/adminHome",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-users fw"})," Users"]})}),p.jsx("a",{href:"/adminPetList",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),p.jsx("a",{href:"/adminAppointments",children:p.jsxs("li",{className:"aside_list-item active-list",children:[p.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),p.jsx("a",{href:"/petIdentifier",children:p.jsxs("li",{className:"aside_list-item",children:[p.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),p.jsx("ul",{className:"aside_footer",children:p.jsx("li",{className:"aside_list-item",children:p.jsx("a",{href:"/login",children:"Logout"})})})]}),p.jsx("main",{className:"main",children:p.jsx(zi,{children:p.jsx(Df,{className:"card",children:p.jsxs("form",{onSubmit:l=>a(l,i),children:["Pet Name: ",i.pet_name,p.jsx("br",{}),"Owner Information: ",i.appoint_name,p.jsx("br",{}),"Address: ",i.appoint_address,p.jsx("br",{}),"Your Name: ",i.appoint_name,p.jsx("br",{}),"Your Number: ",i.appoint_number,p.jsx("br",{}),"Your Email: ",i.appoint_email,p.jsx("br",{}),p.jsxs("label",{children:["Status:",p.jsxs("select",{name:"status",value:i.status,onChange:s,children:[p.jsx("option",{value:"Pending",children:"Pending"}),p.jsx("option",{value:"Confirmed",children:"Confirmed"}),p.jsx("option",{value:"Deny",children:"Deny"})]})]}),p.jsx("br",{}),p.jsx(lu,{type:"submit",children:"Update Appointment"}),p.jsx("br",{}),p.jsx("br",{}),p.jsx("strong",{children:"Question and Answer"}),p.jsx("br",{}),"1. Do you own your home? ",p.jsx("p",{style:{color:"blue"},children:i.q1}),p.jsx("br",{}),"2. If renting, do you have permission from your landlord to have pets? ",p.jsx("p",{style:{color:"blue"},children:i.q2}),p.jsx("br",{}),"3. Are there children in your household? ",p.jsx("p",{style:{color:"blue"},children:i.q3}),p.jsx("br",{}),"4. Do you have other pets at home? ",p.jsx("p",{style:{color:"blue"},children:i.q4}),p.jsx("br",{}),"5. Do you have other pets at home? ",p.jsx("p",{style:{color:"blue"},children:i.q5}),p.jsx("br",{}),"6. Are you familiar with the specific needs of the chosen pet type/breed? ",p.jsx("p",{style:{color:"blue"},children:i.q6}),p.jsx("br",{}),"7. Do you have a stable daily routine? ",p.jsx("p",{style:{color:"blue"},children:i.q7}),p.jsx("br",{}),"8. Are you away from home for long periods during the day? ",p.jsx("p",{style:{color:"blue"},children:i.q8}),p.jsx("br",{}),"9. Can you afford the costs associated with pet ownership, including food, veterinary care, and unexpected expenses? ",p.jsx("p",{style:{color:"blue"},children:i.q9}),p.jsx("br",{}),"10. Do you have a regular veterinarian? ",p.jsx("p",{style:{color:"blue"},children:i.q10}),p.jsx("br",{}),"11. Are you willing to provide regular veterinary care, including vaccinations and routine check-ups? ",p.jsx("p",{style:{color:"blue"},children:i.q11}),p.jsx("br",{}),"12. Are you willing to attend training classes if necessary? ",p.jsx("p",{style:{color:"blue"},children:i.q12}),p.jsx("br",{}),"13. Do you have experience in training pets? ",p.jsx("p",{style:{color:"blue"},children:i.q13}),p.jsx("br",{}),"14. Will the pet primarily be kept indoors? ",p.jsx("p",{style:{color:"blue"},children:i.q14}),p.jsx("br",{}),"15. Do you have a secure, fenced yard? ",p.jsx("p",{style:{color:"blue"},children:i.q15}),p.jsx("br",{}),"16. Do you have a plan for emergencies or unforeseen circumstances? ",p.jsx("p",{style:{color:"blue"},children:i.q16}),p.jsx("br",{}),"17. Are you willing to spay/neuter your pet if it is not already done? ",p.jsx("p",{style:{color:"blue"},children:i.q17}),p.jsx("br",{}),"18. Can you provide personal or veterinarian references? ",p.jsx("p",{style:{color:"blue"},children:i.q18}),p.jsx("br",{}),"19. Are you willing to allow a representative from the pet owner to conduct a home visit? ",p.jsx("p",{style:{color:"blue"},children:i.q19}),p.jsx("br",{})]})})})})]})})})}):p.jsx("div",{children:"Loading..."})},hm={initial:"initial",states:{initial:{on:{next:"loadingModel"}},loadingModel:{on:{next:"modelReady"}},modelReady:{on:{next:"imageReady"}},imageReady:{on:{next:"identifying"},showImage:!0},identifying:{on:{next:"complete"}},complete:{on:{next:"modelReady"},showImage:!0,showResults:!0}}},Sce=()=>{const[t,e]=Q.useState([]),[n,r]=Q.useState(null),[i,o]=Q.useState(null),s=Q.useRef(null),a=Q.useRef(null),u=(x,_)=>hm.states[x].on[_]||hm.initial,[l,c]=Q.useReducer(u,hm.initial),d=()=>c("next"),h=async()=>{d();const x=await Dk();o(x),d()},f=async()=>{if(d(),s.current){const x=await i.classify(s.current);e(x)}d()},m=async()=>{e([]),d()},v=()=>{var x;return(x=a.current)==null?void 0:x.click()},y=x=>{const{files:_}=x.target;if(_&&_.length>0){const E=URL.createObjectURL(_[0]);r(E),d()}},g={initial:{action:h,text:"Load Model"},loadingModel:{action:()=>{},text:"Loading Model..."},modelReady:{action:v,text:"Upload Image"},imageReady:{action:f,text:"Identify Breed"},identifying:{action:()=>{},text:"Identifying..."},complete:{action:m,text:"Reset"}},{showImage:w,showResults:b}=hm.states[l];return p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/petOwnerHome",children:"Home"}),p.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),p.jsx("a",{href:"/rehome",children:"Rehome"}),p.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsx("main",{className:"main",children:p.jsx("div",{className:"petIdentifierBody",children:p.jsxs("div",{className:"petIdentifierDiv",children:[w&&p.jsx("img",{className:"petIdentifierImg",src:n||void 0,alt:"upload-preview",ref:s}),p.jsx("input",{className:"petIdentifierInput",type:"file",accept:"image/*",capture:"environment",onChange:y,ref:a}),b&&p.jsx("ul",{className:"petIdentifierUl",children:t.map(({className:x,probability:_})=>p.jsx("li",{className:"petIdentifierLi",children:"".concat(x,": %").concat((_*100).toFixed(2))},x))}),p.jsx("button",{className:"petIdentifierButton",onClick:g[l].action||(()=>{}),children:g[l].text})]})})})]})})},fm={initial:"initial",states:{initial:{on:{next:"loadingModel"}},loadingModel:{on:{next:"modelReady"}},modelReady:{on:{next:"imageReady"}},imageReady:{on:{next:"identifying"},showImage:!0},identifying:{on:{next:"complete"}},complete:{on:{next:"modelReady"},showImage:!0,showResults:!0}}},Ace=()=>{const[t,e]=Q.useState([]),[n,r]=Q.useState(null),[i,o]=Q.useState(null),s=Q.useRef(null),a=Q.useRef(null),u=(x,_)=>fm.states[x].on[_]||fm.initial,[l,c]=Q.useReducer(u,fm.initial),d=()=>c("next"),h=async()=>{d();const x=await Dk();o(x),d()},f=async()=>{if(d(),s.current){const x=await i.classify(s.current);e(x)}d()},m=async()=>{e([]),d()},v=()=>{var x;return(x=a.current)==null?void 0:x.click()},y=x=>{const{files:_}=x.target;if(_&&_.length>0){const E=URL.createObjectURL(_[0]);r(E),d()}},g={initial:{action:h,text:"Load Model"},loadingModel:{action:()=>{},text:"Loading Model..."},modelReady:{action:v,text:"Upload Image"},imageReady:{action:f,text:"Identify Breed"},identifying:{action:()=>{},text:"Identifying..."},complete:{action:m,text:"Reset"}},{showImage:w,showResults:b}=fm.states[l];return p.jsx(Ht,{children:p.jsxs(qt,{children:[p.jsxs("nav",{children:[p.jsxs("div",{className:"logo1",children:[p.jsx("img",{className:"navLogo1",src:Er,alt:""}),p.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),p.jsxs("div",{className:"nav-links1",children:[p.jsx("a",{href:"/adopterHome",children:"Home"}),p.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),p.jsx("a",{href:"/appointmentlist",children:"Appointments"}),p.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),p.jsx("a",{href:"/login",children:"Log Out"})]})]}),p.jsx("main",{className:"main",children:p.jsx("div",{className:"petIdentifierBody",children:p.jsxs("div",{className:"petIdentifierDiv",children:[w&&p.jsx("img",{className:"petIdentifierImg",src:n||void 0,alt:"upload-preview",ref:s}),p.jsx("input",{className:"petIdentifierInput",type:"file",accept:"image/*",capture:"environment",onChange:y,ref:a}),b&&p.jsx("ul",{className:"petIdentifierUl",children:t.map(({className:x,probability:_})=>p.jsx("li",{className:"petIdentifierLi",children:"".concat(x,": %").concat((_*100).toFixed(2))},x))}),p.jsx("button",{className:"petIdentifierButton",onClick:g[l].action||(()=>{}),children:g[l].text})]})})})]})})};PG();const fa=document.createElement("link");fa.href="https://fonts.googleapis.com/css2?family=Aclonica&display=swap";fa.href="https://fonts.googleapis.com/css2?family=Odor+Mean+Chey&display=swap";fa.href="https://fonts.googleapis.com/css2?family=Forum&display=swap";fa.href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@700&display=swap";fa.href="https://fonts.googleapis.com/css2?family=Acme&display=swap";fa.href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap";fa.rel="stylesheet";document.head.appendChild(fa);const Rce=()=>p.jsx(mG,{children:p.jsx(zG,{children:p.jsxs(EG,{children:[p.jsx(wt,{exact:!0,path:"/petIdentifier",children:p.jsx(_ce,{})}),p.jsx(wt,{exact:!0,path:"/petOwnerPetIdentifier",children:p.jsx(Sce,{})}),p.jsx(wt,{exact:!0,path:"/adopterPetIdentifier",children:p.jsx(Ace,{})}),p.jsx(wt,{exact:!0,path:"/signup",children:p.jsx(Toe,{})}),p.jsx(wt,{exact:!0,path:"/login",children:p.jsx(koe,{})}),p.jsx(wt,{exact:!0,path:"/adopterHome",children:p.jsx(Soe,{})}),p.jsx(wt,{exact:!0,path:"/petOwnerHome",children:p.jsx(Aoe,{})}),p.jsx(wt,{exact:!0,path:"/adopterAdopt",children:p.jsx(Roe,{})}),p.jsx(wt,{exact:!0,path:"/petOwnerAdopt",children:p.jsx(Noe,{})}),p.jsx(wt,{exact:!0,path:"/adopterAdoptme/:id",children:p.jsx(Poe,{})}),p.jsx(wt,{exact:!0,path:"/petOwnerAdoptme/:id",children:p.jsx(Doe,{})}),p.jsx(wt,{exact:!0,path:"/appointmentlist",children:p.jsx(Uoe,{})}),p.jsx(wt,{exact:!0,path:"/appointment/:id",children:p.jsx(Loe,{})}),p.jsx(wt,{exact:!0,path:"/rehome",children:p.jsx(Voe,{})}),p.jsx(wt,{exact:!0,path:"/addpet",children:p.jsx(Boe,{})}),p.jsx(wt,{exact:!0,path:"/updatepet/:id",children:p.jsx(joe,{})}),p.jsx(wt,{exact:!0,path:"/adminHome",children:p.jsx(Ece,{})}),p.jsx(wt,{exact:!0,path:"/adminAppointments",children:p.jsx(Cce,{})}),p.jsx(wt,{exact:!0,path:"/selectStatus/:id",children:p.jsx(kce,{})}),p.jsx(wt,{exact:!0,path:"/adminPetList",children:p.jsx(Ice,{})}),p.jsx(wt,{exact:!0,path:"/adminUpdatePet/:id",children:p.jsx(Tce,{})}),p.jsx(wt,{exact:!0,path:"/",children:p.jsx(sW,{to:"/login"})})]})})}),Nce=document.getElementById("root"),Pce=aO(Nce);Pce.render(p.jsx(H.StrictMode,{children:p.jsx(Rce,{})}));export{D9 as K,Lce as __vite_legacy_guard,Mce as a,rc as b,qq as c,wo as d,cq as e,dq as f,Rx as g,Vt as h,y9 as i,Pi as j,eo as k,$ce as l,Vce as n,Fce as p,bx as r,vE as w};
