System.register([],(function(e,t){"use strict";return{execute:function(){var n=document.createElement("style");function r(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}n.textContent='.signup_box{height:738px;width:565px}.signup_box .rectangle_box{border:1px solid;border-color:#393c49;border-radius:20px;height:658px;left:200px;position:fixed;top:30px;width:465px;background-color:rgba(255,255,255,.5)}.signup_box .h1_signUp{font-family:Odor Mean Chey,serif;font-size:40px;font-weight:400px;position:relative;top:30px;left:80px}.signup_form{max-width:50%;position:relative;top:50px}.signup_form>.input_signUp{height:71px;width:415px;margin-top:5px;margin-bottom:5px;border:1px solid;border-color:#393c49;border-radius:20px;position:relative;right:95px;padding:10px;font-size:13px}.submit_signUp{height:61px;background-color:#fff;border:1px solid;border-color:#393c49;border-radius:20px;position:fixed;width:292px;left:290px;top:600px;font-family:Odor Mean Chey,serif;font-size:40px;font-weight:400px}.image_SignUp{position:fixed;object-fit:cover;right:0%;width:50%;height:100%;z-index:-1}.signup_form>a{text-decoration:none;color:inherit;cursor:pointer}@media only screen and (max-width: 1025px){.signup_box .rectangle_box{height:600px;left:28px}.submit_signUp{left:128px;top:542px}}@media only screen and (max-width: 620px){.signup_box{height:100%;width:100%}.signup_box .rectangle_box{height:90%;left:5%;position:relative;top:5%;width:90%;background-color:rgba(255,255,255,.5)}.signup_box .h1_signUp{font-size:20px;top:15px;left:50%;transform:translate(-50%)}.signup_form{max-width:100%;top:30px}.signup_form>.input_signUp{height:35px;width:80%;margin-top:2px;margin-bottom:2px;position:relative;right:0}.submit_signUp{height:30px;width:146px;position:relative;left:0;top:150px;font-size:20px}.image_SignUp{position:fixed;right:0;top:-30px;width:100%;height:150%;object-fit:cover}.signup_form>a{font-size:16px}}.login_box{height:738px;width:565px;position:absolute;right:0%}.login_box .rectangle_box{border:1px solid;border-color:#393c49;border-radius:20px;position:absolute;height:658px;left:-50px;top:30px;width:465px;background-color:rgba(255,255,255,.5)}.login_box .h1_login{font-family:Odor Mean Chey,serif;font-size:40px;font-weight:400px;position:relative;top:50px;left:180px}.image_Logo{width:100px;height:100px;border-radius:50px;position:relative;left:177px;top:38px}.login_form{max-width:50%;position:relative;top:40px}.login_form>.input_login{height:71px;width:415px;margin-top:5px;margin-bottom:5px;border:1px solid;border-color:#393c49;border-radius:20px;position:relative;right:95px;padding:10px;font-size:13px}.submit_login{height:61px;background-color:#fff;border:1px solid;border-color:#393c49;border-radius:50px;position:absolute;width:292px;left:-20px;top:300px;font-family:Odor Mean Chey,serif;font-size:40px;font-weight:400px}.image_Login{position:fixed;object-fit:cover;left:0%;width:50%;height:100%;z-index:-1}.login_form>a{text-decoration:none;color:inherit;cursor:pointer}@media only screen and (max-width: 1025px){.login_box{width:438px;position:fixed;right:0%}.login_box .rectangle_box{height:600px}}@media only screen and (max-width: 516px){.image_Logo{left:30px}.login_box{height:100%;width:100%;position:relative;right:0}.login_box .rectangle_box{height:90%;left:20px;top:5%;width:90%;background-color:rgba(255,255,255,.5)}.login_box .h1_login{font-size:20px;top:25px;left:50%;transform:translate(-50%)}.login_form{max-width:100%;top:50px}.login_form>.input_login{height:35px;width:80%;margin-top:2px;margin-bottom:2px;position:relative;right:0}.submit_login{height:30px;width:146px;position:relative;left:0;top:150px;font-size:20px}.image_Login{width:100%;height:100%;object-fit:cover}.login_form>a{font-size:16px}}.logo1{display:flex;align-items:center}.navLogo1{width:50px;height:50px;border-radius:50px}.h1_logo1{color:#fff;font-size:48px;font-weight:400;font-family:Aclonica,sans-serif}.nav-links1{display:flex;align-items:center;margin-right:0}.nav-links1 a{color:#fff;text-decoration:none;padding:14px 16px;display:inline-block;margin:0 10px}.welcomeText{position:relative;top:200px;left:80px;color:#000;font-family:Forum,serif;font-size:96px;font-weight:400}.AdoptAPet{height:94px;width:360px;background-color:#393c49;border-radius:50px;position:absolute;top:750px;left:150px}.AdoptAPet2{color:#fff;font-family:Forum,serif;font-size:48px;font-weight:400;position:absolute;top:-25px;left:70px}.welcomeBanner .welcomeImg{position:absolute;width:100%;height:827px;top:108px;object-fit:cover;z-index:-1}.categories1{position:relative;top:280px;background-color:#fff;width:100%;height:500px}.categories2{position:relative;top:100px;background-color:#fff;width:100%;height:500px}.categories_h1{color:#000;font-family:Aclonica,sans-serif;font-size:48px;font-weight:400;position:absolute;top:30px;left:70px}.categories_container{display:flex;justify-content:center;background-color:#fff;position:relative;top:150px}.categories_container>.categories_box{border:1px solid;border-color:#393c49;border-radius:20px;height:250px;width:250px;margin-top:10px;margin-left:30px;margin-right:30px;padding-top:50px;padding-left:0;padding-right:0;text-align:center;line-height:75px;font-size:30px;cursor:pointer}.categories_text{position:relative;top:-60px;left:-1px}.adoption1{position:relative;top:200px;background-color:#fff;width:100%;height:500px}.adoption2{position:relative;top:50px;background-color:#fff;width:100%;height:500px}.adpotion_h1{color:#000;font-family:Acme,sans-serif;font-size:48px;font-weight:400;position:absolute;top:30px;left:70px}.adoption_container{display:flex;flex-wrap:wrap;justify-content:center;background-color:#fff;position:relative;top:165px}.adoption_container>.adoption_box{border:1px solid;border-color:#393c49;border-radius:20px;height:420px;width:250px;margin-top:10px;margin-left:30px;margin-right:30px;padding-top:10px;padding-left:10px;padding-right:10px;text-align:left;font-size:30px}.adoption_container>.adoption_box2{border:1px solid;border-color:#393c49;border-radius:20px;height:400px;width:250px;margin-top:10px;margin-left:30px;margin-right:30px;padding-top:10px;padding-left:50px;padding-right:50px;text-align:center;font-size:30px}.adoption_box2>img{width:200px;height:150px}.adoption_image{position:relative;left:35px;width:150px;height:150px;object-fit:cover}.adoption_text{position:relative;color:#000;font-family:Roboto,sans-serif;font-size:24px;font-weight:700}.adoption_desc{line-height:10px;font-family:Roboto,sans-serif;font-size:12px}.adoptMe{height:50px;width:200px;background-color:#393c49;border-radius:50px;position:relative;left:10px}.adoptMe2{height:50px;width:200px;background-color:#393c49;border-radius:50px;position:relative;left:-30px;top:50px}.adoption_button{color:#fff;font-family:Lexend Deca,sans-serif;font-size:24px;font-weight:400;position:absolute;top:-15px;left:50px}.adoptionProcess{position:relative;top:400px;width:100%;height:600px;background-color:#ddd6ce}.adoptionProcessText{position:absolute;top:0;left:80px;color:#000;font-family:Acme,sans-serif;font-size:150px;font-weight:400}.adoptionProcess_img{width:427;height:172;position:absolute;right:100px;top:100px}.adoptionProcessBtn{height:94px;width:360px;background-color:#393c49;border-radius:50px;position:absolute;top:400px;right:100px}.adoptionProcessBtn2{color:#fff;font-family:Forum,serif;font-size:30px;font-weight:400;position:absolute;top:0;left:70px}.welcomeText>a{text-decoration:none;color:inherit;cursor:pointer}.adoption_box>a{text-decoration:none;color:inherit;cursor:pointer}.adoption_box2>link{text-decoration:none;color:inherit;cursor:pointer}@media only screen and (max-width: 1329px){.adoptionProcessText{font-size:100px}}@media only screen and (max-width: 1240px){.adoptionProcess{height:500px;top:750px}}@media only screen and (max-width: 1330px){.adoptionProcessText{font-size:75px}}@media only screen and (max-width: 1024px){.adoptionProcessText{top:76px;font-size:65px}}@media only screen and (max-width: 930px){.adoptionProcess{top:750px}.adoptionProcessText{display:none}}@media only screen and (max-width: 850px){nav{flex-direction:column;align-items:flex-start}nav>.nav-links1 a{flex-direction:row;margin:0}.nav-links1{flex-direction:row;position:relative;left:50px;font-size:2vw;margin-right:100px}}@media only screen and (max-width: 620px){.welcomeBanner{height:auto;position:relative;top:38px}.welcomeText{position:absolute;top:100px;left:20px;font-size:48px}.AdoptAPet{height:47px;width:180px;top:425px;left:75px}.AdoptAPet2{font-size:24px;top:-12px;left:35px}.welcomeBanner .welcomeImg{height:413px}.categories1{position:relative;top:0;height:400px}.categories2{position:relative;top:150px;height:800px}.categories_h1{font-size:36px;top:20px;left:30px}.categories_container{flex-direction:column;align-items:center;top:80px}.categories_container>.categories_box{width:80%;height:180px;margin:10px 0;padding:20px;font-size:24px;line-height:normal;cursor:pointer}.categories_text{position:relative;top:-30px;left:0}.adoption1{position:relative;top:300px}.adoptionProcess{height:300px;top:1683px}}.details{position:relative;top:100px;background-color:#fff;width:100%;height:500px}.details_textSquare{position:relative;left:778px;top:75px}.details_h1{color:#000;font-family:Aclonica,sans-serif;font-size:48px;font-weight:400;position:absolute;top:30px;left:70px}.details_h2{color:#000;font-family:Roboto,sans-serif;font-size:24px;font-weight:400;position:relative;top:150px;left:70px}.details_img{position:absolute;object-fit:cover;width:500px;height:500px;top:100px;left:150px}.details_appointment{height:82px;width:360px;background-color:#393c49;border-radius:50px;position:absolute;top:410px;left:60px}.details_appointment2{color:#fff;font-family:Forum,serif;font-size:24px;font-weight:400;position:absolute;top:0;left:70px}.details_aboutme{color:#000;font-family:Aclonica,sans-serif;font-size:48px;font-weight:400;position:relative;top:429px;left:150px}.details_desc{color:#000;font-family:Roboto,sans-serif;font-size:24px;font-weight:400;position:relative;top:415px;left:150px}.details_caretaker{color:#000;font-family:Aclonica,sans-serif;font-size:48px;font-weight:400;position:relative;top:634px;left:150px}.caretaker_container{display:flex;justify-content:center;flex-wrap:wrap;background-color:#fff;position:relative;top:613px}.caretaker_container>.caretaker_box{border:1px solid;border-color:#393c49;border-radius:20px;height:150px;width:1000px;margin-top:10px;margin-left:30px;margin-right:30px;padding-top:10px;padding-left:20px;padding-right:0;text-align:left;line-height:75px}.caretaker_h1,.caretaker_h2{position:relative}.caretaker_h1{color:#000;font-family:Aclonica,sans-serif;font-size:48px;font-weight:400}.caretaker_h2{color:#000;font-family:Roboto,sans-serif;font-size:24px;font-weight:400}.space2{background-color:#fff;position:relative;top:662px;width:100%;height:1px}@media only screen and (max-width: 1024px){.details_img{width:400px;height:400px;left:100px}.details_textSquare{left:520px}.details_aboutme,.details_desc,.details_caretaker{left:100px}}@media only screen and (max-width: 768px){.details_img{width:350px;height:350px;left:213px}.details_textSquare{position:relative;left:142px;top:421px}.details_appointment{top:390px;left:60px;z-index:1}.details_caretaker{top:964px;left:38px}.caretaker_container{top:954px}.caretaker_container>.caretaker_box{height:207px;margin-bottom:20px;margin-top:20px}.details_aboutme{left:37px;top:697px}.details_desc{left:36px;top:670px}.caretaker_h1{font-size:32px}.space2{height:0px}}@media only screen and (max-width: 620px){.details_img{width:350px;height:350px;left:30px}.details_textSquare{position:relative;left:-40px;top:421px}.details_appointment{top:390px;left:70px;z-index:1}.details_caretaker{top:964px;left:38px}.caretaker_container{top:954px}.caretaker_container>.caretaker_box{height:207px;margin-bottom:20px;margin-top:20px}.details_aboutme{left:37px;top:697px}.details_desc{left:36px;top:670px}.caretaker_h1{font-size:32px}.space2{height:0px}}@media only screen and (max-width: 376px){.details_img{width:300px;height:300px;left:40px}.details_appointment{left:48px}}.appointment{position:relative;top:120px;background-color:#fff;width:100%;height:500px}.appointment_h1{color:#000;font-family:Aclonica,sans-serif;font-size:20px;font-weight:400;position:absolute;top:50px;left:70px}.appointment_box>img{width:212px;height:227px;object-fit:cover}.appointment_container{display:flex;justify-content:center;flex-wrap:wrap;background-color:#fff;position:relative;top:150px;left:0}.appointment_container>.appointment_box{border:1px solid;border-color:#393c49;border-radius:20px;height:250px;width:800px;margin-top:10px;margin-left:30px;margin-right:30px;padding-top:10px;padding-left:20px;padding-right:0;text-align:left;line-height:75px;font-size:30px}.appointment_box>h1{color:#000;font-family:Aclonica,sans-serif;font-size:48px;font-weight:400;position:relative;top:-270px;left:250px}.appointment_box>h2{color:#000;font-family:Roboto,sans-serif;font-size:24px;font-weight:400;position:relative;top:-250px;left:270px}.scheduleBox1{display:flex;justify-content:center;flex-wrap:wrap;background-color:#fff;position:relative;top:-76px;left:0}.qnaBox{display:flex;justify-content:center;flex-wrap:wrap;background-color:#fff;position:relative;width:100%;top:150px;left:0}.scheduleform{position:relative;top:120px;right:10px;background-color:#fff;width:100%;height:500px;margin-top:10px;margin-left:30px;margin-right:30px;padding-top:10px;padding-left:20px;padding-right:0;text-align:center;line-height:75px;font-size:30px}.schedule_file{height:70px;width:325px;background-color:#393c49;color:#fff;border:1px solid;border-radius:20px;font-family:Roboto,sans-serif;font-size:25px;font-weight:400px;position:relative}.schedule_input1{height:71px;width:700px;margin-top:5px;margin-bottom:5px;border:1px solid;border-color:#393c49;border-radius:20px;justify-content:center;position:relative;right:180px;padding:20px}.qnaform>p{font-size:medium;margin-top:0;margin-bottom:0}.qnaform{position:relative;top:120px;background-color:#fff;width:100%;height:500px;margin-top:10px;margin-left:30px;margin-right:30px;padding-top:10px;padding-left:20px;padding-right:0;text-align:center;line-height:75px;font-size:30px}hr{border:none;border-top:2px solid #333;color:#333;overflow:visible;text-align:center;height:5px;width:100%}.schedule_submit1{height:70px;width:100%;background-color:#393c49;color:#fff;border:1px solid;border-radius:20px;font-family:Roboto,sans-serif;font-size:40px;position:relative;top:300px}.hidden_input{display:none;pointer-events:none}.AddPet_radio{position:relative;top:-50px}.radioMargin{margin:10px;font-size:20px}@media only screen and (max-width: 1025px){.scheduleform>.schedule_input1{width:580px}.schedule_file{position:relative;right:50px}}@media only screen and (max-width: 769px){.schedule_file{position:relative;right:60px}.qnaform>p{display:inline-block}.details_textBox{right:250px;top:25px}.appointment_box>img{width:106px;height:113.5px}.appointment_container{top:100px}.appointment_container>.appointment_box{height:200px;width:400px;margin-left:15px;margin-right:15px;padding-left:10px;line-height:37.5px;font-size:15px}.appointment_box>h1{font-size:24px;top:-135px;left:125px}.appointment_box>h2{font-size:12px;top:-125px;left:135px}}@media only screen and (max-width: 621px){.AddPet_radio{top:-12px}.schedule_file{height:50px;width:200px;font-size:20px;right:0}.scheduleform>.schedule_input1{height:50px;width:78%;margin-top:2.5px;margin-bottom:2.5px;right:0}.appointment{top:150px;height:250px}.scheduleBox1,.qnaBox{top:75px}.scheduleform,.qnaform{top:60px;width:100%;height:250px;margin-left:15px;margin-right:15px;padding-left:10px;line-height:37.5px;font-size:15px}.schedule_submit1{top:350px}.schedule_file,.schedule_next{height:50px;width:200px;font-size:20px}hr{height:2.5px}}@media only screen and (max-width: 597px){.schedule_submit1{top:400px}}@media only screen and (max-width: 375px){.details_img{width:300px;height:300px;left:40px}.details_appointment{width:335px}.details_appointment2{left:60px}}@media only screen and (max-width: 320px){.details_img{width:250px;height:250px}.details_appointment{width:273px}.details_appointment2{left:25px}.appointment_box>h2{font-size:9px;top:-125px;left:126px}}.welcomeBanner{width:100%;height:567px}.rehome{position:relative;top:120px;background-color:#fff;width:100%;height:500px}.details_textBox{position:absolute;right:500px;top:50px}.rehome_h1{color:#000;font-family:Aclonica,sans-serif;font-size:48px;font-weight:400;position:absolute;top:50px;left:180px}.addnewpet{color:#00f;font-family:Aclonica,sans-serif;font-size:48px;font-weight:400;position:absolute;top:50px;right:180px}.rehome_box>.rehome_img{width:212px;height:227px;object-fit:cover}.rehome_container{display:flex;justify-content:center;flex-wrap:wrap;background-color:#fff;position:relative;top:150px;left:0}.rehome_container>.rehome_box{border:1px solid;border-color:#393c49;border-radius:20px;height:300px;width:1100px;margin-top:10px;margin-left:30px;margin-right:30px;padding-top:10px;padding-left:20px;padding-right:0;text-align:left;line-height:75px;font-size:30px}.rehome_box>h1{color:#000;font-family:Aclonica,sans-serif;font-size:48px;font-weight:400;position:relative;top:-270px;left:250px}.rehome_box>h2{color:#000;font-family:Roboto,sans-serif;font-size:24px;font-weight:400;position:relative;top:-250px;left:270px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:500px}.scheduleBox{display:flex;justify-content:center;flex-wrap:wrap;background-color:#fff;position:relative;top:150px;left:0}.scheduleform{position:relative;top:120px;background-color:#fff;width:25%;height:500px;margin-top:10px;margin-left:30px;margin-right:30px;padding-top:10px;padding-left:20px;padding-right:0;text-align:center;line-height:75px;font-size:30px}.scheduleform>.schedule_input{height:71px;width:700px;margin-top:5px;margin-bottom:5px;border:1px solid;border-color:#393c49;border-radius:20px;justify-content:center;position:relative;right:150px}.schedule_submit{height:70px;background-color:#393c49;color:#fff;border:1px solid;border-radius:20px;width:292px;left:290px;top:600px;font-family:Roboto,sans-serif;font-size:40px;font-weight:400px}.rehome_box>.edit{position:relative;left:800px;top:-330px}.rehome_box>.delete{position:relative;left:800px;top:-320px}.rehome_container>.appointment_outerbox{border:1px solid;border-color:#393c49;border-radius:20px;height:410px;width:1100px;margin-top:10px;margin-left:30px;margin-right:30px;padding-top:10px;padding-left:20px;padding-right:0;text-align:left;line-height:75px;font-size:30px}.document_img{width:350px;height:350px}.appointment_innerbox2{position:relative;top:-400px;right:-400px}.appointment_innerbox2>h1{color:#000;font-family:Aclonica,sans-serif;font-size:48px;font-weight:400;position:relative}.appointment_innerbox2>h2{color:#000;font-family:Roboto,sans-serif;font-size:24px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:500px}.appointment_outerbox>.deleteImg2{position:relative;object-fit:none;left:900px;top:-500px}.appointment_innerbox>h1{color:#000;font-family:Aclonica,sans-serif;font-size:48px;font-weight:400;position:relative}.appointment_innerbox>h2{color:#000;font-family:Roboto,sans-serif;font-size:24px}.appointment_outerbox>.deleteImg{position:relative;right:-900px;top:-100px}.appointment_innerbox{position:relative;top:-20px;right:0}.space3{background-color:#fff;position:relative;top:500px;width:100%;height:50px}@media only screen and (max-width: 1025px){.appointment_outerbox>.deleteImg2{top:-450px;left:750px}.rehome_h1{font-size:48px;top:25px;left:20px}.addnewpet{font-size:48px;top:25px;right:20px}.rehome_box>h2{left:252px;max-width:300px}.rehome_box>.edit{position:relative;left:550px;top:-330px}.appointment_innerbox2>h2{max-width:400px}.rehome_box>.delete{position:relative;left:550px;top:-320px}}@media only screen and (max-width: 896px){.appointment_innerbox2{position:relative;top:-400px;right:-400px}.appointment_innerbox2{position:relative;top:-344px;right:-322px}.appointment_innerbox2>h2{font-size:17px;max-width:350px}.document_img{width:300px;height:300px}.appointment_outerbox>.deleteImg2{top:-450px;left:620px}}@media only screen and (max-width: 769px){.rehome_h1{font-size:24px;top:25px;left:20px}.appointment_innerbox2>h2{max-width:200px}.addnewpet{font-size:24px;top:25px;right:20px}.document_img{width:250px;height:250px}.appointment_innerbox2{position:relative;top:-290px;right:-285px}.rehome_box>h1{left:215px}.rehome_box>h2{font-size:15px;left:215px;max-width:200px}.appointment_outerbox>.deleteImg2{position:relative;top:-320px;left:100px}.rehome_box>.edit{position:relative;left:400px;top:-330px}.rehome_box>.delete{position:relative;left:400px;top:-320px}}@media only screen and (max-width: 597px){.rehome{top:150px;height:250px}.details_textBox{right:250px;top:25px}.rehome_box>.rehome_img{width:106px;height:113.5px}.rehome_container{top:75px}.rehome_container>.rehome_box{height:200px;width:550px;margin-left:15px;margin-right:15px;padding-left:10px;line-height:37.5px;font-size:15px}.rehome_box>h1{font-size:24px;top:-135px;left:110px}.rehome_box>h2{font-size:10px;top:-125px;left:110px}.scheduleBox{top:75px}.scheduleform{top:60px;width:100%;height:250px;margin-left:15px;margin-right:15px;padding-left:10px;line-height:37.5px;font-size:15px}.scheduleform>.schedule_input{height:35.5px;width:350px;margin-top:2.5px;margin-bottom:2.5px;right:75px}.schedule_submit{height:35px;width:146px;left:145px;top:300px;font-size:20px}.rehome_box>.edit,.rehome_box>.delete{left:0;top:-200px}.rehome_container>.appointment_outerbox{height:250px;width:550px;margin-left:15px;margin-right:15px;padding-left:10px;line-height:37.5px;font-size:15px}.document_img{width:150px;height:150px}.appointment_innerbox2{top:-180px;right:-152px}.appointment_innerbox2>h1,.appointment_innerbox2>h2{font-size:24px}.appointment_innerbox2>h2{font-size:11px;max-width:300px}.appointment_outerbox>.deleteImg,.appointment_outerbox>.deleteImg2{right:0}.appointment_innerbox{top:-10px}.appointment_innerbox>h1,.appointment_innerbox>h2{font-size:24px}.appointment_innerbox>h2{font-size:12px}.appointment_outerbox>.deleteImg2{top:-250px;left:41px}}@media only screen and (max-width: 426px){.appointment_outerbox>.deleteImg2{top:-250px;left:32px}.appointment_innerbox2>h2{max-width:180px}}@media only screen and (max-width: 320px){.document_img{width:100px;height:100px}.appointment_innerbox2{top:-132px;right:-108px}.appointment_innerbox2>h2{font-size:8px;max-width:140px}.rehome_box>h2{font-size:8px;top:-125px;left:110px;max-width:150px}.rehome_box>.edit,.rehome_box>.delete{left:0;top:-190px}.appointment_outerbox>.deleteImg2{top:-200px;left:15px}}.AddPet{position:relative;top:150px;background-color:#fff;width:100%;height:1325px;display:flex;justify-content:center}.AddPetBox{display:flex;justify-content:center;border:1px solid;border-color:#393c49;border-radius:20px;width:720px;position:relative;left:0}.AddPetBox>h1{font-family:Aclonica,sans-serif;font-size:40px;font-weight:400px;text-align:center;position:relative;width:900px;top:0;left:290px}.AddPetBox>img{width:100px;height:100px;position:relative;top:170px;right:-175px;object-fit:contain}.AddPetform{position:relative;top:300px;right:70px;height:10px}.UpdatePetform{position:relative;top:300px;right:-10px;height:10px}.AddPetForm_input{height:71px;width:415px;margin-top:5px;margin-bottom:5px;border:1px solid;border-color:#393c49;border-radius:20px}.AddPet_dropbtn{background-color:#767a8e;color:#fff;border-radius:50px;padding:16px;font-size:16px;width:410px;border:none;cursor:pointer;position:relative;left:0;top:0;margin-top:5px;margin-bottom:5px}.AddPet_dropdown{position:relative;display:inline-block}.AddPet_dropdown-content{display:none;position:relative;left:0;top:0;background-color:#f9f9f9;min-width:160px;box-shadow:0 8px 16px rgba(0,0,0,.2);z-index:1}.AddPet_dropdown-content a:hover{background-color:#f1f1f1}.AddPet_dropdown:hover .AddPet_dropdown-content{display:block}.AddPet_dropdown:hover .AddPet_dropbtn{background-color:#888}.AddPet_submit{height:70px;width:292px;background-color:#393c49;color:#fff;border:1px solid;border-radius:20px;width:415px;left:290px;top:600px;font-family:Roboto,sans-serif;font-size:40px;font-weight:400px}.space4{background-color:#fff;position:relative;top:1200px;width:100%;height:50px}@media only screen and (max-width: 620px){.UpdatePetform{position:relative;top:300px;left:65px}.AddPetform{position:relative;top:300px;right:10px}.AddPetForm_input{height:50px;width:300px;margin-top:5px;margin-bottom:5px;border:1px solid;border-color:#393c49;border-radius:20px}.AddPet_dropbtn{background-color:#767a8e;color:#fff;border-radius:50px;padding:16px;font-size:16px;width:300px;border:none;cursor:pointer;position:relative;left:0;top:0;margin-top:5px;margin-bottom:5px}.AddPet_submit{height:70px;width:300px;background-color:#393c49;color:#fff;border:1px solid;border-radius:20px;left:290px;top:600px;font-family:Roboto,sans-serif;font-size:40px;font-weight:400px}};.petIdentifierBody{color:#fff;background:#000}.petIdentifierBody2{color:#fff;background:#000;position:relative;left:0;top:-50px}@media only screen and (min-width: 750px){.petIdentifierBody2{color:#fff;background:#000;position:relative;left:150px;top:-50px}}.adminHome{margin:0;padding:0;color:#fff;box-sizing:border-box;font-family:monospace;font-size:15px}.grid-container{display:grid;grid-template-columns:1fr;grid-template-rows:50px 1fr 50px;grid-template-areas:"header" "main" "footer";height:100vh}.header{grid-area:header;background-color:#f5f5f5}.aside{grid-area:aside;background-color:#393c49}.main{grid-area:main;background-color:#fff;position:relative;top:100px}.footer{grid-area:footer;background-color:#f5f5f5}.document_img2{width:100px;height:100px}.header,.footer{display:flex;align-items:center;justify-content:space-between;color:#393c49;padding:0 15px}.aside{display:flex;flex-direction:column;height:100%;width:240px;position:fixed;overflow-y:auto;z-index:2;transform:translate(-245px)}.aside.active{transform:translate(0)}.menu_title{padding:20px 20px 20px 40px}.aside_list{padding:0;margin-top:50px;list-style-type:none}.aside_footer{padding:0;margin-top:auto;list-style-type:none}.aside_list-item{padding:20px 20px 20px 40px;color:#ddd}.active-list,.aside_list-item:hover{background-color:#dcdcdc;cursor:pointer;color:#393c49}a{color:unset;text-decoration:none}.card{position:relative;left:0}.card2{position:relative;left:0;top:-200px;width:1230px}.card3{position:relative;left:0;top:-100px;width:1230px}.countbox{position:relative;left:0;width:100px;height:100px}.countbox1{position:relative;top:-109px;left:115px;width:100px;height:100px}.countbox2{position:relative;top:-218px;left:230px;width:100px;height:100px}@media only screen and (min-width: 750px){.grid-container{display:grid;grid-template-columns:240px 1fr;grid-template-rows:50px 1fr 50px;grid-template-areas:"aside header" "aside main" "aside footer";height:100vh}.main{position:relative;top:0}.aside{display:flex;flex-direction:column;position:fixed;transform:translate(0)}.main_cards{margin:10px;display:grid;grid-template-columns:2fr 1fr;grid-template-rows:200px 300px;grid-template-areas:"card1 card2" "card1 card3";grid-gap:10px}.countbox{position:relative;left:250px;width:100px;height:100px}.countbox1{position:relative;top:-109px;left:365px;width:100px;height:100px}.countbox2{position:relative;top:-218px;left:480px;width:100px;height:100px}.card{position:relative;left:250px}.card2{position:relative;left:250px;top:-200px;width:1230px}.card3{position:relative;left:250px;top:-100px;width:1230px}}.menu-icon{position:fixed;display:flex;top:2px;left:8px;align-items:center;justify-content:center;z-index:1;cursor:pointer;padding:12px;color:#000}.header_title{margin-left:35px}.aside_close-icon{position:absolute;visibility:visible;top:20px;right:20px;cursor:pointer}@media only screen and (min-width: 750px){.aside_close-icon{display:none}}nav{background-color:#393c49;overflow:hidden;color:#fff;padding:10px;display:flex;justify-content:space-between;align-items:center;font-size:25px;position:fixed;width:100%;z-index:2}nav a:hover{color:#000}.main{position:absolute;top:100px;width:100%}.logo{display:flex;align-items:center}.h1_logo{color:#fff;font-size:48px;font-weight:400;font-family:Aclonica,sans-serif}.nav-links{display:flex;align-items:center;margin-right:100px}.nav-links a{color:#fff;text-decoration:none;padding:14px 16px;display:inline-block;margin:0 10px}.petIdentifierBody{color:#fff;background:#000}.petIdentifierDiv{display:flex;flex-direction:column;text-align:center;align-items:center;padding:30px}.petIdentifierInput{width:.1px;height:.1px;opacity:0;overflow:hidden;position:absolute;z-index:-1}.petIdentifierButton,.petIdentifierUl{width:300px;box-sizing:border-box;border:solid 1px white;background:#000;color:#fff;font-size:24px;margin:auto;padding:10px}.petIdentifierImg{width:300px;margin-bottom:25px}.petIdentifierUl{list-style:none;padding:10px;margin-bottom:25px}.petIdentifierLi:not(:last-child){padding:10px;border-bottom:solid 1px}@media only screen and (max-width: 769px){.petIdentifierBody{position:relative;top:50px}}@media only screen and (max-width: 320px){.petIdentifierButton,.petIdentifierUl{width:250px;box-sizing:border-box;border:solid 1px white;background:#000;color:#fff;font-size:24px;margin:auto;padding:10px}}html.ios{--ion-default-font: -apple-system, BlinkMacSystemFont, "Helvetica Neue", "Roboto", sans-serif}html.md{--ion-default-font: "Roboto", "Helvetica Neue", sans-serif}html{--ion-default-dynamic-font: -apple-system-body;--ion-font-family: var(--ion-default-font)}body{background:var(--ion-background-color)}body.backdrop-no-scroll{overflow:hidden}html.ios ion-modal.modal-card ion-header ion-toolbar:first-of-type,html.ios ion-modal.modal-sheet ion-header ion-toolbar:first-of-type,html.ios ion-modal ion-footer ion-toolbar:first-of-type{padding-top:6px}html.ios ion-modal.modal-card ion-header ion-toolbar:last-of-type,html.ios ion-modal.modal-sheet ion-header ion-toolbar:last-of-type{padding-bottom:6px}html.ios ion-modal ion-toolbar{padding-right:calc(var(--ion-safe-area-right) + 8px);padding-left:calc(var(--ion-safe-area-left) + 8px)}@media screen and (min-width: 768px){html.ios ion-modal.modal-card:first-of-type{--backdrop-opacity: .18}}ion-modal.modal-default.show-modal~ion-modal.modal-default{--backdrop-opacity: 0;--box-shadow: none}html.ios ion-modal.modal-card .ion-page{border-top-left-radius:var(--border-radius)}.ion-color-primary{--ion-color-base: var(--ion-color-primary, #3880ff) !important;--ion-color-base-rgb: var(--ion-color-primary-rgb, 56, 128, 255) !important;--ion-color-contrast: var(--ion-color-primary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-primary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-primary-shade, #3171e0) !important;--ion-color-tint: var(--ion-color-primary-tint, #4c8dff) !important}.ion-color-secondary{--ion-color-base: var(--ion-color-secondary, #3dc2ff) !important;--ion-color-base-rgb: var(--ion-color-secondary-rgb, 61, 194, 255) !important;--ion-color-contrast: var(--ion-color-secondary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-secondary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-secondary-shade, #36abe0) !important;--ion-color-tint: var(--ion-color-secondary-tint, #50c8ff) !important}.ion-color-tertiary{--ion-color-base: var(--ion-color-tertiary, #5260ff) !important;--ion-color-base-rgb: var(--ion-color-tertiary-rgb, 82, 96, 255) !important;--ion-color-contrast: var(--ion-color-tertiary-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-tertiary-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-tertiary-shade, #4854e0) !important;--ion-color-tint: var(--ion-color-tertiary-tint, #6370ff) !important}.ion-color-success{--ion-color-base: var(--ion-color-success, #2dd36f) !important;--ion-color-base-rgb: var(--ion-color-success-rgb, 45, 211, 111) !important;--ion-color-contrast: var(--ion-color-success-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-success-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-success-shade, #28ba62) !important;--ion-color-tint: var(--ion-color-success-tint, #42d77d) !important}.ion-color-warning{--ion-color-base: var(--ion-color-warning, #ffc409) !important;--ion-color-base-rgb: var(--ion-color-warning-rgb, 255, 196, 9) !important;--ion-color-contrast: var(--ion-color-warning-contrast, #000) !important;--ion-color-contrast-rgb: var(--ion-color-warning-contrast-rgb, 0, 0, 0) !important;--ion-color-shade: var(--ion-color-warning-shade, #e0ac08) !important;--ion-color-tint: var(--ion-color-warning-tint, #ffca22) !important}.ion-color-danger{--ion-color-base: var(--ion-color-danger, #eb445a) !important;--ion-color-base-rgb: var(--ion-color-danger-rgb, 235, 68, 90) !important;--ion-color-contrast: var(--ion-color-danger-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-danger-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-danger-shade, #cf3c4f) !important;--ion-color-tint: var(--ion-color-danger-tint, #ed576b) !important}.ion-color-light{--ion-color-base: var(--ion-color-light, #f4f5f8) !important;--ion-color-base-rgb: var(--ion-color-light-rgb, 244, 245, 248) !important;--ion-color-contrast: var(--ion-color-light-contrast, #000) !important;--ion-color-contrast-rgb: var(--ion-color-light-contrast-rgb, 0, 0, 0) !important;--ion-color-shade: var(--ion-color-light-shade, #d7d8da) !important;--ion-color-tint: var(--ion-color-light-tint, #f5f6f9) !important}.ion-color-medium{--ion-color-base: var(--ion-color-medium, #92949c) !important;--ion-color-base-rgb: var(--ion-color-medium-rgb, 146, 148, 156) !important;--ion-color-contrast: var(--ion-color-medium-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-medium-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-medium-shade, #808289) !important;--ion-color-tint: var(--ion-color-medium-tint, #9d9fa6) !important}.ion-color-dark{--ion-color-base: var(--ion-color-dark, #222428) !important;--ion-color-base-rgb: var(--ion-color-dark-rgb, 34, 36, 40) !important;--ion-color-contrast: var(--ion-color-dark-contrast, #fff) !important;--ion-color-contrast-rgb: var(--ion-color-dark-contrast-rgb, 255, 255, 255) !important;--ion-color-shade: var(--ion-color-dark-shade, #1e2023) !important;--ion-color-tint: var(--ion-color-dark-tint, #383a3e) !important}.ion-page{left:0;right:0;top:0;bottom:0;display:flex;position:absolute;flex-direction:column;justify-content:space-between;contain:layout size style;z-index:0}ion-modal>.ion-page{position:relative;contain:layout style;height:100%}.split-pane-visible>.ion-page.split-pane-main{position:relative}ion-route,ion-route-redirect,ion-router,ion-select-option,ion-nav-controller,ion-menu-controller,ion-action-sheet-controller,ion-alert-controller,ion-loading-controller,ion-modal-controller,ion-picker-controller,ion-popover-controller,ion-toast-controller,.ion-page-hidden{display:none!important}.ion-page-invisible{opacity:0}.can-go-back>ion-header ion-back-button{display:block}html.plt-ios.plt-hybrid,html.plt-ios.plt-pwa{--ion-statusbar-padding: 20px}@supports (padding-top: 20px){html{--ion-safe-area-top: var(--ion-statusbar-padding)}}@supports (padding-top: env(safe-area-inset-top)){html{--ion-safe-area-top: env(safe-area-inset-top);--ion-safe-area-bottom: env(safe-area-inset-bottom);--ion-safe-area-left: env(safe-area-inset-left);--ion-safe-area-right: env(safe-area-inset-right)}}ion-card.ion-color .ion-inherit-color,ion-card-header.ion-color .ion-inherit-color{color:inherit}.menu-content{transform:translateZ(0)}.menu-content-open{cursor:pointer;touch-action:manipulation;pointer-events:none;overflow-y:hidden}.menu-content-open ion-content{--overflow: hidden}.menu-content-open .ion-content-scroll-host{overflow:hidden}.ios .menu-content-reveal{box-shadow:-8px 0 42px rgba(0,0,0,.08)}[dir=rtl].ios .menu-content-reveal{box-shadow:8px 0 42px rgba(0,0,0,.08)}.md .menu-content-reveal,.md .menu-content-push{box-shadow:4px 0 16px rgba(0,0,0,.18)}ion-accordion-group.accordion-group-expand-inset>ion-accordion:first-of-type{border-top-left-radius:8px;border-top-right-radius:8px}ion-accordion-group.accordion-group-expand-inset>ion-accordion:last-of-type{border-bottom-left-radius:8px;border-bottom-right-radius:8px}ion-accordion-group>ion-accordion:last-of-type ion-item[slot=header]{--border-width: 0px}ion-accordion.accordion-animated>[slot=header] .ion-accordion-toggle-icon{transition:.3s transform cubic-bezier(.25,.8,.5,1)}@media (prefers-reduced-motion: reduce){ion-accordion .ion-accordion-toggle-icon{transition:none!important}}ion-accordion.accordion-expanding>[slot=header] .ion-accordion-toggle-icon,ion-accordion.accordion-expanded>[slot=header] .ion-accordion-toggle-icon{transform:rotate(180deg)}ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-previous ion-item[slot=header]{--border-width: 0px;--inner-border-width: 0px}ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-expanding:first-of-type,ion-accordion-group.accordion-group-expand-inset.md>ion-accordion.accordion-expanded:first-of-type{margin-top:0}ion-input input::-webkit-date-and-time-value{text-align:start}.ion-datetime-button-overlay{--width: fit-content;--height: fit-content}.ion-datetime-button-overlay ion-datetime.datetime-grid{width:320px;min-height:320px}audio,canvas,progress,video{vertical-align:baseline}audio:not([controls]){display:none;height:0}b,strong{font-weight:700}img{max-width:100%}hr{height:1px;border-width:0;box-sizing:content-box}pre{overflow:auto}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}label,input,select,textarea{font-family:inherit;line-height:normal}textarea{overflow:auto;height:auto;font:inherit;color:inherit}textarea::placeholder{padding-left:2px}form,input,optgroup,select{margin:0;font:inherit;color:inherit}html input[type=button],input[type=reset],input[type=submit]{cursor:pointer;-webkit-appearance:button}a,a div,a span,a ion-icon,a ion-label,button,button div,button span,button ion-icon,button ion-label,.ion-tappable,[tappable],[tappable] div,[tappable] span,[tappable] ion-icon,[tappable] ion-label,input,textarea{touch-action:manipulation}a ion-label,button ion-label{pointer-events:none}button{padding:0;border:0;border-radius:0;font-family:inherit;font-style:inherit;font-variant:inherit;line-height:1;text-transform:none;cursor:pointer;-webkit-appearance:button}[tappable]{cursor:pointer}a[disabled],button[disabled],html input[disabled]{cursor:default}button::-moz-focus-inner,input::-moz-focus-inner{padding:0;border:0}input[type=number]::-webkit-inner-spin-button,input[type=number]::-webkit-outer-spin-button{height:auto}input[type=search]::-webkit-search-cancel-button,input[type=search]::-webkit-search-decoration{-webkit-appearance:none}table{border-collapse:collapse;border-spacing:0}td,th{padding:0}*{box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0);-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}html{width:100%;height:100%;-webkit-text-size-adjust:100%;text-size-adjust:100%}html:not(.hydrated) body{display:none}html.ion-ce body{display:block}html.plt-pwa{height:100vh}body{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin:0;padding:0;position:fixed;width:100%;max-width:100%;height:100%;max-height:100%;transform:translateZ(0);text-rendering:optimizeLegibility;overflow:hidden;touch-action:manipulation;-webkit-user-drag:none;-ms-content-zooming:none;word-wrap:break-word;overscroll-behavior-y:none;-webkit-text-size-adjust:none;text-size-adjust:none}html{font-family:var(--ion-font-family)}@supports (-webkit-touch-callout: none){html{font:var(--ion-dynamic-font, 16px var(--ion-font-family))}}a{background-color:transparent;color:var(--ion-color-primary, #3880ff)}h1,h2,h3,h4,h5,h6{margin-top:16px;margin-bottom:10px;font-weight:500;line-height:1.2}h1{margin-top:20px;font-size:1.625rem}h2{margin-top:18px;font-size:1.5rem}h3{font-size:1.375rem}h4{font-size:1.25rem}h5{font-size:1.125rem}h6{font-size:1rem}small{font-size:75%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sup{top:-.5em}sub{bottom:-.25em}.ion-no-padding{--padding-start: 0;--padding-end: 0;--padding-top: 0;--padding-bottom: 0;padding:0}.ion-padding{--padding-start: var(--ion-padding, 16px);--padding-end: var(--ion-padding, 16px);--padding-top: var(--ion-padding, 16px);--padding-bottom: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-top{--padding-top: var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px)}.ion-padding-start{--padding-start: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px)}.ion-padding-end{--padding-end: var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px)}.ion-padding-bottom{--padding-bottom: var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-vertical{--padding-top: var(--ion-padding, 16px);--padding-bottom: var(--ion-padding, 16px);padding-top:var(--ion-padding, 16px);padding-bottom:var(--ion-padding, 16px)}.ion-padding-horizontal{--padding-start: var(--ion-padding, 16px);--padding-end: var(--ion-padding, 16px);-webkit-padding-start:var(--ion-padding, 16px);padding-inline-start:var(--ion-padding, 16px);-webkit-padding-end:var(--ion-padding, 16px);padding-inline-end:var(--ion-padding, 16px)}.ion-no-margin{--margin-start: 0;--margin-end: 0;--margin-top: 0;--margin-bottom: 0;margin:0}.ion-margin{--margin-start: var(--ion-margin, 16px);--margin-end: var(--ion-margin, 16px);--margin-top: var(--ion-margin, 16px);--margin-bottom: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-top{--margin-top: var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px)}.ion-margin-start{--margin-start: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px)}.ion-margin-end{--margin-end: var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px)}.ion-margin-bottom{--margin-bottom: var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-vertical{--margin-top: var(--ion-margin, 16px);--margin-bottom: var(--ion-margin, 16px);margin-top:var(--ion-margin, 16px);margin-bottom:var(--ion-margin, 16px)}.ion-margin-horizontal{--margin-start: var(--ion-margin, 16px);--margin-end: var(--ion-margin, 16px);-webkit-margin-start:var(--ion-margin, 16px);margin-inline-start:var(--ion-margin, 16px);-webkit-margin-end:var(--ion-margin, 16px);margin-inline-end:var(--ion-margin, 16px)}.ion-float-left{float:left!important}.ion-float-right{float:right!important}.ion-float-start{float:left!important}:host-context([dir=rtl]) .ion-float-start{float:right!important}[dir=rtl] .ion-float-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-start:dir(rtl){float:right!important}}.ion-float-end{float:right!important}:host-context([dir=rtl]) .ion-float-end{float:left!important}[dir=rtl] .ion-float-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-end:dir(rtl){float:left!important}}@media (min-width: 576px){.ion-float-sm-left{float:left!important}.ion-float-sm-right{float:right!important}.ion-float-sm-start{float:left!important}:host-context([dir=rtl]) .ion-float-sm-start{float:right!important}[dir=rtl] .ion-float-sm-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-sm-start:dir(rtl){float:right!important}}.ion-float-sm-end{float:right!important}:host-context([dir=rtl]) .ion-float-sm-end{float:left!important}[dir=rtl] .ion-float-sm-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-sm-end:dir(rtl){float:left!important}}}@media (min-width: 768px){.ion-float-md-left{float:left!important}.ion-float-md-right{float:right!important}.ion-float-md-start{float:left!important}:host-context([dir=rtl]) .ion-float-md-start{float:right!important}[dir=rtl] .ion-float-md-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-md-start:dir(rtl){float:right!important}}.ion-float-md-end{float:right!important}:host-context([dir=rtl]) .ion-float-md-end{float:left!important}[dir=rtl] .ion-float-md-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-md-end:dir(rtl){float:left!important}}}@media (min-width: 992px){.ion-float-lg-left{float:left!important}.ion-float-lg-right{float:right!important}.ion-float-lg-start{float:left!important}:host-context([dir=rtl]) .ion-float-lg-start{float:right!important}[dir=rtl] .ion-float-lg-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-lg-start:dir(rtl){float:right!important}}.ion-float-lg-end{float:right!important}:host-context([dir=rtl]) .ion-float-lg-end{float:left!important}[dir=rtl] .ion-float-lg-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-lg-end:dir(rtl){float:left!important}}}@media (min-width: 1200px){.ion-float-xl-left{float:left!important}.ion-float-xl-right{float:right!important}.ion-float-xl-start{float:left!important}:host-context([dir=rtl]) .ion-float-xl-start{float:right!important}[dir=rtl] .ion-float-xl-start{float:right!important}@supports selector(:dir(rtl)){.ion-float-xl-start:dir(rtl){float:right!important}}.ion-float-xl-end{float:right!important}:host-context([dir=rtl]) .ion-float-xl-end{float:left!important}[dir=rtl] .ion-float-xl-end{float:left!important}@supports selector(:dir(rtl)){.ion-float-xl-end:dir(rtl){float:left!important}}}.ion-text-center{text-align:center!important}.ion-text-justify{text-align:justify!important}.ion-text-start{text-align:start!important}.ion-text-end{text-align:end!important}.ion-text-left{text-align:left!important}.ion-text-right{text-align:right!important}.ion-text-nowrap{white-space:nowrap!important}.ion-text-wrap{white-space:normal!important}@media (min-width: 576px){.ion-text-sm-center{text-align:center!important}.ion-text-sm-justify{text-align:justify!important}.ion-text-sm-start{text-align:start!important}.ion-text-sm-end{text-align:end!important}.ion-text-sm-left{text-align:left!important}.ion-text-sm-right{text-align:right!important}.ion-text-sm-nowrap{white-space:nowrap!important}.ion-text-sm-wrap{white-space:normal!important}}@media (min-width: 768px){.ion-text-md-center{text-align:center!important}.ion-text-md-justify{text-align:justify!important}.ion-text-md-start{text-align:start!important}.ion-text-md-end{text-align:end!important}.ion-text-md-left{text-align:left!important}.ion-text-md-right{text-align:right!important}.ion-text-md-nowrap{white-space:nowrap!important}.ion-text-md-wrap{white-space:normal!important}}@media (min-width: 992px){.ion-text-lg-center{text-align:center!important}.ion-text-lg-justify{text-align:justify!important}.ion-text-lg-start{text-align:start!important}.ion-text-lg-end{text-align:end!important}.ion-text-lg-left{text-align:left!important}.ion-text-lg-right{text-align:right!important}.ion-text-lg-nowrap{white-space:nowrap!important}.ion-text-lg-wrap{white-space:normal!important}}@media (min-width: 1200px){.ion-text-xl-center{text-align:center!important}.ion-text-xl-justify{text-align:justify!important}.ion-text-xl-start{text-align:start!important}.ion-text-xl-end{text-align:end!important}.ion-text-xl-left{text-align:left!important}.ion-text-xl-right{text-align:right!important}.ion-text-xl-nowrap{white-space:nowrap!important}.ion-text-xl-wrap{white-space:normal!important}}.ion-text-uppercase{text-transform:uppercase!important}.ion-text-lowercase{text-transform:lowercase!important}.ion-text-capitalize{text-transform:capitalize!important}@media (min-width: 576px){.ion-text-sm-uppercase{text-transform:uppercase!important}.ion-text-sm-lowercase{text-transform:lowercase!important}.ion-text-sm-capitalize{text-transform:capitalize!important}}@media (min-width: 768px){.ion-text-md-uppercase{text-transform:uppercase!important}.ion-text-md-lowercase{text-transform:lowercase!important}.ion-text-md-capitalize{text-transform:capitalize!important}}@media (min-width: 992px){.ion-text-lg-uppercase{text-transform:uppercase!important}.ion-text-lg-lowercase{text-transform:lowercase!important}.ion-text-lg-capitalize{text-transform:capitalize!important}}@media (min-width: 1200px){.ion-text-xl-uppercase{text-transform:uppercase!important}.ion-text-xl-lowercase{text-transform:lowercase!important}.ion-text-xl-capitalize{text-transform:capitalize!important}}.ion-align-self-start{align-self:flex-start!important}.ion-align-self-end{align-self:flex-end!important}.ion-align-self-center{align-self:center!important}.ion-align-self-stretch{align-self:stretch!important}.ion-align-self-baseline{align-self:baseline!important}.ion-align-self-auto{align-self:auto!important}.ion-wrap{flex-wrap:wrap!important}.ion-nowrap{flex-wrap:nowrap!important}.ion-wrap-reverse{flex-wrap:wrap-reverse!important}.ion-justify-content-start{justify-content:flex-start!important}.ion-justify-content-center{justify-content:center!important}.ion-justify-content-end{justify-content:flex-end!important}.ion-justify-content-around{justify-content:space-around!important}.ion-justify-content-between{justify-content:space-between!important}.ion-justify-content-evenly{justify-content:space-evenly!important}.ion-align-items-start{align-items:flex-start!important}.ion-align-items-center{align-items:center!important}.ion-align-items-end{align-items:flex-end!important}.ion-align-items-stretch{align-items:stretch!important}.ion-align-items-baseline{align-items:baseline!important}.ion-hide,.ion-hide-up,.ion-hide-down{display:none!important}@media (min-width: 576px){.ion-hide-sm-up{display:none!important}}@media (max-width: 575.98px){.ion-hide-sm-down{display:none!important}}@media (min-width: 768px){.ion-hide-md-up{display:none!important}}@media (max-width: 767.98px){.ion-hide-md-down{display:none!important}}@media (min-width: 992px){.ion-hide-lg-up{display:none!important}}@media (max-width: 991.98px){.ion-hide-lg-down{display:none!important}}@media (min-width: 1200px){.ion-hide-xl-up{display:none!important}}@media (max-width: 1199.98px){.ion-hide-xl-down{display:none!important}}:root{--ion-color-primary: #3880ff;--ion-color-primary-rgb: 56, 128, 255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255, 255, 255;--ion-color-primary-shade: #3171e0;--ion-color-primary-tint: #4c8dff;--ion-color-secondary: #3dc2ff;--ion-color-secondary-rgb: 61, 194, 255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255, 255, 255;--ion-color-secondary-shade: #36abe0;--ion-color-secondary-tint: #50c8ff;--ion-color-tertiary: #5260ff;--ion-color-tertiary-rgb: 82, 96, 255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255, 255, 255;--ion-color-tertiary-shade: #4854e0;--ion-color-tertiary-tint: #6370ff;--ion-color-success: #2dd36f;--ion-color-success-rgb: 45, 211, 111;--ion-color-success-contrast: #ffffff;--ion-color-success-contrast-rgb: 255, 255, 255;--ion-color-success-shade: #28ba62;--ion-color-success-tint: #42d77d;--ion-color-warning: #ffc409;--ion-color-warning-rgb: 255, 196, 9;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0, 0, 0;--ion-color-warning-shade: #e0ac08;--ion-color-warning-tint: #ffca22;--ion-color-danger: #eb445a;--ion-color-danger-rgb: 235, 68, 90;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255, 255, 255;--ion-color-danger-shade: #cf3c4f;--ion-color-danger-tint: #ed576b;--ion-color-dark: #222428;--ion-color-dark-rgb: 34, 36, 40;--ion-color-dark-contrast: #ffffff;--ion-color-dark-contrast-rgb: 255, 255, 255;--ion-color-dark-shade: #1e2023;--ion-color-dark-tint: #383a3e;--ion-color-medium: #92949c;--ion-color-medium-rgb: 146, 148, 156;--ion-color-medium-contrast: #ffffff;--ion-color-medium-contrast-rgb: 255, 255, 255;--ion-color-medium-shade: #808289;--ion-color-medium-tint: #9d9fa6;--ion-color-light: #f4f5f8;--ion-color-light-rgb: 244, 245, 248;--ion-color-light-contrast: #000000;--ion-color-light-contrast-rgb: 0, 0, 0;--ion-color-light-shade: #d7d8da;--ion-color-light-tint: #f5f6f9}@media (prefers-color-scheme: dark){body{--ion-color-primary: #428cff;--ion-color-primary-rgb: 66,140,255;--ion-color-primary-contrast: #ffffff;--ion-color-primary-contrast-rgb: 255,255,255;--ion-color-primary-shade: #3a7be0;--ion-color-primary-tint: #5598ff;--ion-color-secondary: #50c8ff;--ion-color-secondary-rgb: 80,200,255;--ion-color-secondary-contrast: #ffffff;--ion-color-secondary-contrast-rgb: 255,255,255;--ion-color-secondary-shade: #46b0e0;--ion-color-secondary-tint: #62ceff;--ion-color-tertiary: #6a64ff;--ion-color-tertiary-rgb: 106,100,255;--ion-color-tertiary-contrast: #ffffff;--ion-color-tertiary-contrast-rgb: 255,255,255;--ion-color-tertiary-shade: #5d58e0;--ion-color-tertiary-tint: #7974ff;--ion-color-success: #2fdf75;--ion-color-success-rgb: 47,223,117;--ion-color-success-contrast: #000000;--ion-color-success-contrast-rgb: 0,0,0;--ion-color-success-shade: #29c467;--ion-color-success-tint: #44e283;--ion-color-warning: #ffd534;--ion-color-warning-rgb: 255,213,52;--ion-color-warning-contrast: #000000;--ion-color-warning-contrast-rgb: 0,0,0;--ion-color-warning-shade: #e0bb2e;--ion-color-warning-tint: #ffd948;--ion-color-danger: #ff4961;--ion-color-danger-rgb: 255,73,97;--ion-color-danger-contrast: #ffffff;--ion-color-danger-contrast-rgb: 255,255,255;--ion-color-danger-shade: #e04055;--ion-color-danger-tint: #ff5b71;--ion-color-dark: #f4f5f8;--ion-color-dark-rgb: 244,245,248;--ion-color-dark-contrast: #000000;--ion-color-dark-contrast-rgb: 0,0,0;--ion-color-dark-shade: #d7d8da;--ion-color-dark-tint: #f5f6f9;--ion-color-medium: #989aa2;--ion-color-medium-rgb: 152,154,162;--ion-color-medium-contrast: #000000;--ion-color-medium-contrast-rgb: 0,0,0;--ion-color-medium-shade: #86888f;--ion-color-medium-tint: #a2a4ab;--ion-color-light: #222428;--ion-color-light-rgb: 34,36,40;--ion-color-light-contrast: #ffffff;--ion-color-light-contrast-rgb: 255,255,255;--ion-color-light-shade: #1e2023;--ion-color-light-tint: #383a3e}.ios body{--ion-background-color: #000000;--ion-background-color-rgb: 0,0,0;--ion-text-color: #ffffff;--ion-text-color-rgb: 255,255,255;--ion-color-step-50: #0d0d0d;--ion-color-step-100: #1a1a1a;--ion-color-step-150: #262626;--ion-color-step-200: #333333;--ion-color-step-250: #404040;--ion-color-step-300: #4d4d4d;--ion-color-step-350: #595959;--ion-color-step-400: #666666;--ion-color-step-450: #737373;--ion-color-step-500: #808080;--ion-color-step-550: #8c8c8c;--ion-color-step-600: #999999;--ion-color-step-650: #a6a6a6;--ion-color-step-700: #b3b3b3;--ion-color-step-750: #bfbfbf;--ion-color-step-800: #cccccc;--ion-color-step-850: #d9d9d9;--ion-color-step-900: #e6e6e6;--ion-color-step-950: #f2f2f2;--ion-item-background: #000000;--ion-card-background: #1c1c1d}.ios ion-modal{--ion-background-color: var(--ion-color-step-100);--ion-toolbar-background: var(--ion-color-step-150);--ion-toolbar-border-color: var(--ion-color-step-250)}.md body{--ion-background-color: #121212;--ion-background-color-rgb: 18,18,18;--ion-text-color: #ffffff;--ion-text-color-rgb: 255,255,255;--ion-border-color: #222222;--ion-color-step-50: #1e1e1e;--ion-color-step-100: #2a2a2a;--ion-color-step-150: #363636;--ion-color-step-200: #414141;--ion-color-step-250: #4d4d4d;--ion-color-step-300: #595959;--ion-color-step-350: #656565;--ion-color-step-400: #717171;--ion-color-step-450: #7d7d7d;--ion-color-step-500: #898989;--ion-color-step-550: #949494;--ion-color-step-600: #a0a0a0;--ion-color-step-650: #acacac;--ion-color-step-700: #b8b8b8;--ion-color-step-750: #c4c4c4;--ion-color-step-800: #d0d0d0;--ion-color-step-850: #dbdbdb;--ion-color-step-900: #e7e7e7;--ion-color-step-950: #f3f3f3;--ion-item-background: #1e1e1e;--ion-toolbar-background: #1f1f1f;--ion-tab-bar-background: #1f1f1f;--ion-card-background: #1e1e1e}}html{--ion-dynamic-font: var(--ion-default-dynamic-font)}\n',document.head.appendChild(n);var i={exports:{}},o={},a={exports:{}},s={},l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),p=Symbol.for("react.provider"),f=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),v=Symbol.for("react.memo"),y=Symbol.for("react.lazy"),b=Symbol.iterator,x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,k={};function _(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||x}function E(){}function C(e,t,n){this.props=e,this.context=t,this.refs=k,this.updater=n||x}_.prototype.isReactComponent={},_.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},_.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},E.prototype=_.prototype;var I=C.prototype=new E;I.constructor=C,w(I,_.prototype),I.isPureReactComponent=!0;var S=Array.isArray,N=Object.prototype.hasOwnProperty,T={current:null},A={key:!0,ref:!0,__self:!0,__source:!0};function R(e,t,n){var r,i={},o=null,a=null;if(null!=t)for(r in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(o=""+t.key),t)N.call(t,r)&&!A.hasOwnProperty(r)&&(i[r]=t[r]);var s=arguments.length-2;if(1===s)i.children=n;else if(1<s){for(var u=Array(s),c=0;c<s;c++)u[c]=arguments[c+2];i.children=u}if(e&&e.defaultProps)for(r in s=e.defaultProps)void 0===i[r]&&(i[r]=s[r]);return{$$typeof:l,type:e,key:o,ref:a,props:i,_owner:T.current}}function D(e){return"object"==typeof e&&null!==e&&e.$$typeof===l}var O=/\/+/g;function P(e,t){return"object"==typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function L(e,t,n,r,i){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var a=!1;if(null===e)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(e.$$typeof){case l:case u:a=!0}}if(a)return i=i(a=e),e=""===r?"."+P(a,0):r,S(i)?(n="",null!=e&&(n=e.replace(O,"$&/")+"/"),L(i,t,n,"",(function(e){return e}))):null!=i&&(D(i)&&(i=function(e,t){return{$$typeof:l,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,n+(!i.key||a&&a.key===i.key?"":(""+i.key).replace(O,"$&/")+"/")+e)),t.push(i)),1;if(a=0,r=""===r?".":r+":",S(e))for(var s=0;s<e.length;s++){var c=r+P(o=e[s],s);a+=L(o,t,n,c,i)}else if(c=function(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=b&&e[b]||e["@@iterator"])?e:null}(e),"function"==typeof c)for(e=c.call(e),s=0;!(o=e.next()).done;)a+=L(o=o.value,t,n,c=r+P(o,s++),i);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return a}function M(e,t,n){if(null==e)return e;var r=[],i=0;return L(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function F(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var j={current:null},B={transition:null},V={ReactCurrentDispatcher:j,ReactCurrentBatchConfig:B,ReactCurrentOwner:T};s.Children={map:M,forEach:function(e,t,n){M(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return M(e,(function(){t++})),t},toArray:function(e){return M(e,(function(e){return e}))||[]},only:function(e){if(!D(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},s.Component=_,s.Fragment=c,s.Profiler=h,s.PureComponent=C,s.StrictMode=d,s.Suspense=g,s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=V,s.cloneElement=function(e,t,n){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=w({},e.props),i=e.key,o=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,a=T.current),void 0!==t.key&&(i=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(u in t)N.call(t,u)&&!A.hasOwnProperty(u)&&(r[u]=void 0===t[u]&&void 0!==s?s[u]:t[u])}var u=arguments.length-2;if(1===u)r.children=n;else if(1<u){s=Array(u);for(var c=0;c<u;c++)s[c]=arguments[c+2];r.children=s}return{$$typeof:l,type:e.type,key:i,ref:o,props:r,_owner:a}},s.createContext=function(e){return(e={$$typeof:f,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:p,_context:e},e.Consumer=e},s.createElement=R,s.createFactory=function(e){var t=R.bind(null,e);return t.type=e,t},s.createRef=function(){return{current:null}},s.forwardRef=function(e){return{$$typeof:m,render:e}},s.isValidElement=D,s.lazy=function(e){return{$$typeof:y,_payload:{_status:-1,_result:e},_init:F}},s.memo=function(e,t){return{$$typeof:v,type:e,compare:void 0===t?null:t}},s.startTransition=function(e){var t=B.transition;B.transition={};try{e()}finally{B.transition=t}},s.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},s.useCallback=function(e,t){return j.current.useCallback(e,t)},s.useContext=function(e){return j.current.useContext(e)},s.useDebugValue=function(){},s.useDeferredValue=function(e){return j.current.useDeferredValue(e)},s.useEffect=function(e,t){return j.current.useEffect(e,t)},s.useId=function(){return j.current.useId()},s.useImperativeHandle=function(e,t,n){return j.current.useImperativeHandle(e,t,n)},s.useInsertionEffect=function(e,t){return j.current.useInsertionEffect(e,t)},s.useLayoutEffect=function(e,t){return j.current.useLayoutEffect(e,t)},s.useMemo=function(e,t){return j.current.useMemo(e,t)},s.useReducer=function(e,t,n){return j.current.useReducer(e,t,n)},s.useRef=function(e){return j.current.useRef(e)},s.useState=function(e){return j.current.useState(e)},s.useSyncExternalStore=function(e,t,n){return j.current.useSyncExternalStore(e,t,n)},s.useTransition=function(){return j.current.useTransition()},s.version="18.2.0",a.exports=s;var z=a.exports;const U=r(z);
/**
             * @license React
             * react-jsx-runtime.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */var $=z,q=Symbol.for("react.element"),W=Symbol.for("react.fragment"),H=Object.prototype.hasOwnProperty,G=$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,K={key:!0,ref:!0,__self:!0,__source:!0};function Y(e,t,n){var r,i={},o=null,a=null;for(r in void 0!==n&&(o=""+n),void 0!==t.key&&(o=""+t.key),void 0!==t.ref&&(a=t.ref),t)H.call(t,r)&&!K.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===i[r]&&(i[r]=t[r]);return{$$typeof:q,type:e,key:o,ref:a,props:i,_owner:G.current}}o.Fragment=W,o.jsx=Y,o.jsxs=Y,i.exports=o;var X=i.exports,Q={exports:{}},J={},Z={exports:{}},ee={};
/**
             * @license React
             * scheduler.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */
!function(e){function t(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,o=e[r];if(!(0<i(o,t)))break e;e[r]=t,e[n]=o,n=r}}function n(e){return 0===e.length?null:e[0]}function r(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,o=e.length,a=o>>>1;r<a;){var s=2*(r+1)-1,l=e[s],u=s+1,c=e[u];if(0>i(l,n))u<o&&0>i(c,l)?(e[r]=c,e[u]=n,r=u):(e[r]=l,e[s]=n,r=s);else{if(!(u<o&&0>i(c,n)))break e;e[r]=c,e[u]=n,r=u}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"==typeof performance&&"function"==typeof performance.now){var o=performance;e.unstable_now=function(){return o.now()}}else{var a=Date,s=a.now();e.unstable_now=function(){return a.now()-s}}var l=[],u=[],c=1,d=null,h=3,p=!1,f=!1,m=!1,g="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function b(e){for(var i=n(u);null!==i;){if(null===i.callback)r(u);else{if(!(i.startTime<=e))break;r(u),i.sortIndex=i.expirationTime,t(l,i)}i=n(u)}}function x(e){if(m=!1,b(e),!f)if(null!==n(l))f=!0,D(w);else{var t=n(u);null!==t&&O(x,t.startTime-e)}}function w(t,i){f=!1,m&&(m=!1,v(C),C=-1),p=!0;var o=h;try{for(b(i),d=n(l);null!==d&&(!(d.expirationTime>i)||t&&!N());){var a=d.callback;if("function"==typeof a){d.callback=null,h=d.priorityLevel;var s=a(d.expirationTime<=i);i=e.unstable_now(),"function"==typeof s?d.callback=s:d===n(l)&&r(l),b(i)}else r(l);d=n(l)}if(null!==d)var c=!0;else{var g=n(u);null!==g&&O(x,g.startTime-i),c=!1}return c}finally{d=null,h=o,p=!1}}"undefined"!=typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,_=!1,E=null,C=-1,I=5,S=-1;function N(){return!(e.unstable_now()-S<I)}function T(){if(null!==E){var t=e.unstable_now();S=t;var n=!0;try{n=E(!0,t)}finally{n?k():(_=!1,E=null)}}else _=!1}if("function"==typeof y)k=function(){y(T)};else if("undefined"!=typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=T,k=function(){R.postMessage(null)}}else k=function(){g(T,0)};function D(e){E=e,_||(_=!0,k())}function O(t,n){C=g((function(){t(e.unstable_now())}),n)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_continueExecution=function(){f||p||(f=!0,D(w))},e.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(l)},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var n=h;h=t;try{return e()}finally{h=n}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=h;h=e;try{return t()}finally{h=n}},e.unstable_scheduleCallback=function(r,i,o){var a=e.unstable_now();switch(o="object"==typeof o&&null!==o&&"number"==typeof(o=o.delay)&&0<o?a+o:a,r){case 1:var s=-1;break;case 2:s=250;break;case 5:s=1073741823;break;case 4:s=1e4;break;default:s=5e3}return r={id:c++,callback:i,priorityLevel:r,startTime:o,expirationTime:s=o+s,sortIndex:-1},o>a?(r.sortIndex=o,t(u,r),null===n(l)&&r===n(u)&&(m?(v(C),C=-1):m=!0,O(x,o-a))):(r.sortIndex=s,t(l,r),f||p||(f=!0,D(w))),r},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(e){var t=h;return function(){var n=h;h=t;try{return e.apply(this,arguments)}finally{h=n}}}}(ee),Z.exports=ee;var te=Z.exports,ne=z,re=te;
/**
             * @license React
             * react-dom.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */function ie(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var oe=new Set,ae={};function se(e,t){le(e,t),le(e+"Capture",t)}function le(e,t){for(ae[e]=t,e=0;e<t.length;e++)oe.add(t[e])}var ue=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),ce=Object.prototype.hasOwnProperty,de=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,he={},pe={};function fe(e,t,n,r,i,o,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=a}var me={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){me[e]=new fe(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];me[t]=new fe(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){me[e]=new fe(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){me[e]=new fe(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){me[e]=new fe(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){me[e]=new fe(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){me[e]=new fe(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){me[e]=new fe(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){me[e]=new fe(e,5,!1,e.toLowerCase(),null,!1,!1)}));var ge=/[\-:]([a-z])/g;function ve(e){return e[1].toUpperCase()}function ye(e,t,n,r){var i=me.hasOwnProperty(t)?me[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null==t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!ce.call(pe,e)||!ce.call(he,e)&&(de.test(e)?pe[e]=!0:(he[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(ge,ve);me[t]=new fe(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(ge,ve);me[t]=new fe(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(ge,ve);me[t]=new fe(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){me[e]=new fe(e,1,!1,e.toLowerCase(),null,!1,!1)})),me.xlinkHref=new fe("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){me[e]=new fe(e,1,!1,e.toLowerCase(),null,!0,!0)}));var be=ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xe=Symbol.for("react.element"),we=Symbol.for("react.portal"),ke=Symbol.for("react.fragment"),_e=Symbol.for("react.strict_mode"),Ee=Symbol.for("react.profiler"),Ce=Symbol.for("react.provider"),Ie=Symbol.for("react.context"),Se=Symbol.for("react.forward_ref"),Ne=Symbol.for("react.suspense"),Te=Symbol.for("react.suspense_list"),Ae=Symbol.for("react.memo"),Re=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),Oe=Symbol.iterator;function Pe(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=Oe&&e[Oe]||e["@@iterator"])?e:null}var Le,Me=Object.assign;function Fe(e){if(void 0===Le)try{throw Error()}catch(BW){var t=BW.stack.trim().match(/\n( *(at )?)/);Le=t&&t[1]||""}return"\n"+Le+e}var je=!1;function Be(e,t){if(!e||je)return"";je=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(jW){var r=jW}Reflect.construct(e,[],t)}else{try{t.call()}catch(jW){r=jW}e.call(t.prototype)}else{try{throw Error()}catch(jW){r=jW}e()}}catch(jW){if(jW&&r&&"string"==typeof jW.stack){for(var i=jW.stack.split("\n"),o=r.stack.split("\n"),a=i.length-1,s=o.length-1;1<=a&&0<=s&&i[a]!==o[s];)s--;for(;1<=a&&0<=s;a--,s--)if(i[a]!==o[s]){if(1!==a||1!==s)do{if(a--,0>--s||i[a]!==o[s]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=s);break}}}finally{je=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Fe(e):""}function Ve(e){switch(e.tag){case 5:return Fe(e.type);case 16:return Fe("Lazy");case 13:return Fe("Suspense");case 19:return Fe("SuspenseList");case 0:case 2:case 15:return e=Be(e.type,!1);case 11:return e=Be(e.type.render,!1);case 1:return e=Be(e.type,!0);default:return""}}function ze(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case ke:return"Fragment";case we:return"Portal";case Ee:return"Profiler";case _e:return"StrictMode";case Ne:return"Suspense";case Te:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case Ie:return(e.displayName||"Context")+".Consumer";case Ce:return(e._context.displayName||"Context")+".Provider";case Se:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case Ae:return null!==(t=e.displayName||null)?t:ze(e.type)||"Memo";case Re:t=e._payload,e=e._init;try{return ze(e(t))}catch(BW){}}return null}function Ue(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ze(t);case 8:return t===_e?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"==typeof t)return t.displayName||t.name||null;if("string"==typeof t)return t}return null}function $e(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function qe(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function We(e){e._valueTracker||(e._valueTracker=function(e){var t=qe(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var i=n.get,o=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,o.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function He(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=qe(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Ge(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(YW){return e.body}}function Ke(e,t){var n=t.checked;return Me({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Ye(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=$e(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function Xe(e,t){null!=(t=t.checked)&&ye(e,"checked",t,!1)}function Qe(e,t){Xe(e,t);var n=$e(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?Ze(e,t.type,n):t.hasOwnProperty("defaultValue")&&Ze(e,t.type,$e(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Je(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function Ze(e,t,n){"number"===t&&Ge(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var et=Array.isArray;function tt(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$e(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function nt(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(ie(91));return Me({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rt(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(ie(92));if(et(n)){if(1<n.length)throw Error(ie(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:$e(n)}}function it(e,t){var n=$e(t.value),r=$e(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ot(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function at(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function st(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?at(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var lt,ut=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction((function(){return e(t,n)}))}:e}((function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((lt=lt||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=lt.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}}));function ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ht=["Webkit","ms","Moz","O"];function pt(e,t,n){return null==t||"boolean"==typeof t||""===t?"":n||"number"!=typeof t||0===t||dt.hasOwnProperty(e)&&dt[e]?(""+t).trim():t+"px"}function ft(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pt(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(dt).forEach((function(e){ht.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),dt[t]=dt[e]}))}));var mt=Me({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gt(e,t){if(t){if(mt[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(ie(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(ie(60));if("object"!=typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(ie(61))}if(null!=t.style&&"object"!=typeof t.style)throw Error(ie(62))}}function vt(e,t){if(-1===e.indexOf("-"))return"string"==typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var yt=null;function bt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xt=null,wt=null,kt=null;function _t(e){if(e=yo(e)){if("function"!=typeof xt)throw Error(ie(280));var t=e.stateNode;t&&(t=xo(t),xt(e.stateNode,e.type,t))}}function Et(e){wt?kt?kt.push(e):kt=[e]:wt=e}function Ct(){if(wt){var e=wt,t=kt;if(kt=wt=null,_t(e),t)for(e=0;e<t.length;e++)_t(t[e])}}function It(e,t){return e(t)}function St(){}var Nt=!1;function Tt(e,t,n){if(Nt)return e(t,n);Nt=!0;try{return It(e,t,n)}finally{Nt=!1,(null!==wt||null!==kt)&&(St(),Ct())}}function At(e,t){var n=e.stateNode;if(null===n)return null;var r=xo(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!=typeof n)throw Error(ie(231,t,typeof n));return n}var Rt=!1;if(ue)try{var Dt={};Object.defineProperty(Dt,"passive",{get:function(){Rt=!0}}),window.addEventListener("test",Dt,Dt),window.removeEventListener("test",Dt,Dt)}catch(PW){Rt=!1}function Ot(e,t,n,r,i,o,a,s,l){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(WW){this.onError(WW)}}var Pt=!1,Lt=null,Mt=!1,Ft=null,jt={onError:function(e){Pt=!0,Lt=e}};function Bt(e,t,n,r,i,o,a,s,l){Pt=!1,Lt=null,Ot.apply(jt,arguments)}function Vt(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function zt(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&null!==(e=e.alternate)&&(t=e.memoizedState),null!==t)return t.dehydrated}return null}function Ut(e){if(Vt(e)!==e)throw Error(ie(188))}function $t(e){return e=function(e){var t=e.alternate;if(!t){if(null===(t=Vt(e)))throw Error(ie(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ut(i),e;if(o===r)return Ut(i),t;o=o.sibling}throw Error(ie(188))}if(n.return!==r.return)n=i,r=o;else{for(var a=!1,s=i.child;s;){if(s===n){a=!0,n=i,r=o;break}if(s===r){a=!0,r=i,n=o;break}s=s.sibling}if(!a){for(s=o.child;s;){if(s===n){a=!0,n=o,r=i;break}if(s===r){a=!0,r=o,n=i;break}s=s.sibling}if(!a)throw Error(ie(189))}}if(n.alternate!==r)throw Error(ie(190))}if(3!==n.tag)throw Error(ie(188));return n.stateNode.current===n?e:t}(e),null!==e?qt(e):null}function qt(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=qt(e);if(null!==t)return t;e=e.sibling}return null}var Wt=re.unstable_scheduleCallback,Ht=re.unstable_cancelCallback,Gt=re.unstable_shouldYield,Kt=re.unstable_requestPaint,Yt=re.unstable_now,Xt=re.unstable_getCurrentPriorityLevel,Qt=re.unstable_ImmediatePriority,Jt=re.unstable_UserBlockingPriority,Zt=re.unstable_NormalPriority,en=re.unstable_LowPriority,tn=re.unstable_IdlePriority,nn=null,rn=null,on=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(an(e)/sn|0)|0},an=Math.log,sn=Math.LN2,ln=64,un=4194304;function cn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dn(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,o=e.pingedLanes,a=268435455&n;if(0!==a){var s=a&~i;0!==s?r=cn(s):0!=(o&=a)&&(r=cn(o))}else 0!=(a=n&~i)?r=cn(a):0!==o&&(r=cn(o));if(0===r)return 0;if(0!==t&&t!==r&&!(t&i)&&((i=r&-r)>=(o=t&-t)||16===i&&4194240&o))return t;if(4&r&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-on(t)),r|=e[n],t&=~i;return r}function hn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pn(e){return 0!=(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function fn(){var e=ln;return!(4194240&(ln<<=1))&&(ln=64),e}function mn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function gn(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-on(t)]=n}function vn(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-on(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var yn=0;function bn(e){return 1<(e&=-e)?4<e?268435455&e?16:536870912:4:1}var xn,wn,kn,_n,En,Cn=!1,In=[],Sn=null,Nn=null,Tn=null,An=new Map,Rn=new Map,Dn=[],On="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pn(e,t){switch(e){case"focusin":case"focusout":Sn=null;break;case"dragenter":case"dragleave":Nn=null;break;case"mouseover":case"mouseout":Tn=null;break;case"pointerover":case"pointerout":An.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rn.delete(t.pointerId)}}function Ln(e,t,n,r,i,o){return null===e||e.nativeEvent!==o?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},null!==t&&null!==(t=yo(t))&&wn(t),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Mn(e){var t=vo(e.target);if(null!==t){var n=Vt(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=zt(n)))return e.blockedOn=t,void En(e.priority,(function(){kn(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Fn(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Kn(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=yo(n))&&wn(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);yt=r,n.target.dispatchEvent(r),yt=null,t.shift()}return!0}function jn(e,t,n){Fn(e)&&n.delete(t)}function Bn(){Cn=!1,null!==Sn&&Fn(Sn)&&(Sn=null),null!==Nn&&Fn(Nn)&&(Nn=null),null!==Tn&&Fn(Tn)&&(Tn=null),An.forEach(jn),Rn.forEach(jn)}function Vn(e,t){e.blockedOn===t&&(e.blockedOn=null,Cn||(Cn=!0,re.unstable_scheduleCallback(re.unstable_NormalPriority,Bn)))}function zn(e){function t(t){return Vn(t,e)}if(0<In.length){Vn(In[0],e);for(var n=1;n<In.length;n++){var r=In[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Sn&&Vn(Sn,e),null!==Nn&&Vn(Nn,e),null!==Tn&&Vn(Tn,e),An.forEach(t),Rn.forEach(t),n=0;n<Dn.length;n++)(r=Dn[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dn.length&&null===(n=Dn[0]).blockedOn;)Mn(n),null===n.blockedOn&&Dn.shift()}var Un=be.ReactCurrentBatchConfig,$n=!0;function qn(e,t,n,r){var i=yn,o=Un.transition;Un.transition=null;try{yn=1,Hn(e,t,n,r)}finally{yn=i,Un.transition=o}}function Wn(e,t,n,r){var i=yn,o=Un.transition;Un.transition=null;try{yn=4,Hn(e,t,n,r)}finally{yn=i,Un.transition=o}}function Hn(e,t,n,r){if($n){var i=Kn(e,t,n,r);if(null===i)Ui(e,t,r,Gn,n),Pn(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Sn=Ln(Sn,e,t,n,r,i),!0;case"dragenter":return Nn=Ln(Nn,e,t,n,r,i),!0;case"mouseover":return Tn=Ln(Tn,e,t,n,r,i),!0;case"pointerover":var o=i.pointerId;return An.set(o,Ln(An.get(o)||null,e,t,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,Rn.set(o,Ln(Rn.get(o)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Pn(e,r),4&t&&-1<On.indexOf(e)){for(;null!==i;){var o=yo(i);if(null!==o&&xn(o),null===(o=Kn(e,t,n,r))&&Ui(e,t,r,Gn,n),o===i)break;i=o}null!==i&&r.stopPropagation()}else Ui(e,t,r,null,n)}}var Gn=null;function Kn(e,t,n,r){if(Gn=null,null!==(e=vo(e=bt(r))))if(null===(t=Vt(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=zt(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Gn=e,null}function Yn(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xt()){case Qt:return 1;case Jt:return 4;case Zt:case en:return 16;case tn:return 536870912;default:return 16}default:return 16}}var Xn=null,Qn=null,Jn=null;function Zn(){if(Jn)return Jn;var e,t,n=Qn,r=n.length,i="value"in Xn?Xn.value:Xn.textContent,o=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[o-t];t++);return Jn=i.slice(e,1<t?1-t:void 0)}function er(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function tr(){return!0}function nr(){return!1}function rr(e){function t(t,n,r,i,o){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?tr:nr,this.isPropagationStopped=nr,this}return Me(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=tr)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=tr)},persist:function(){},isPersistent:tr}),t}var ir,or,ar,sr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lr=rr(sr),ur=Me({},sr,{view:0,detail:0}),cr=rr(ur),dr=Me({},ur,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_r,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ar&&(ar&&"mousemove"===e.type?(ir=e.screenX-ar.screenX,or=e.screenY-ar.screenY):or=ir=0,ar=e),ir)},movementY:function(e){return"movementY"in e?e.movementY:or}}),hr=rr(dr),pr=rr(Me({},dr,{dataTransfer:0})),fr=rr(Me({},ur,{relatedTarget:0})),mr=rr(Me({},sr,{animationName:0,elapsedTime:0,pseudoElement:0})),gr=Me({},sr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vr=rr(gr),yr=rr(Me({},sr,{data:0})),br={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kr(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=wr[e])&&!!t[e]}function _r(){return kr}var Er=Me({},ur,{key:function(e){if(e.key){var t=br[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=er(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_r,charCode:function(e){return"keypress"===e.type?er(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?er(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Cr=rr(Er),Ir=rr(Me({},dr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Sr=rr(Me({},ur,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_r})),Nr=rr(Me({},sr,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tr=Me({},dr,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ar=rr(Tr),Rr=[9,13,27,32],Dr=ue&&"CompositionEvent"in window,Or=null;ue&&"documentMode"in document&&(Or=document.documentMode);var Pr=ue&&"TextEvent"in window&&!Or,Lr=ue&&(!Dr||Or&&8<Or&&11>=Or),Mr=String.fromCharCode(32),Fr=!1;function jr(e,t){switch(e){case"keyup":return-1!==Rr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Br(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Vr=!1,zr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ur(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!zr[e.type]:"textarea"===t}function $r(e,t,n,r){Et(r),0<(t=qi(t,"onChange")).length&&(n=new lr("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var qr=null,Wr=null;function Hr(e){Mi(e,0)}function Gr(e){if(He(bo(e)))return e}function Kr(e,t){if("change"===e)return t}var Yr=!1;if(ue){var Xr;if(ue){var Qr="oninput"in document;if(!Qr){var Jr=document.createElement("div");Jr.setAttribute("oninput","return;"),Qr="function"==typeof Jr.oninput}Xr=Qr}else Xr=!1;Yr=Xr&&(!document.documentMode||9<document.documentMode)}function Zr(){qr&&(qr.detachEvent("onpropertychange",ei),Wr=qr=null)}function ei(e){if("value"===e.propertyName&&Gr(Wr)){var t=[];$r(t,Wr,e,bt(e)),Tt(Hr,t)}}function ti(e,t,n){"focusin"===e?(Zr(),Wr=n,(qr=t).attachEvent("onpropertychange",ei)):"focusout"===e&&Zr()}function ni(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Gr(Wr)}function ri(e,t){if("click"===e)return Gr(t)}function ii(e,t){if("input"===e||"change"===e)return Gr(t)}var oi="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function ai(e,t){if(oi(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ce.call(t,i)||!oi(e[i],t[i]))return!1}return!0}function si(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function li(e,t){var n,r=si(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=si(r)}}function ui(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ui(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function ci(){for(var e=window,t=Ge();t instanceof e.HTMLIFrameElement;){try{var n="string"==typeof t.contentWindow.location.href}catch($W){n=!1}if(!n)break;t=Ge((e=t.contentWindow).document)}return t}function di(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function hi(e){var t=ci(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ui(n.ownerDocument.documentElement,n)){if(null!==r&&di(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=void 0===r.end?o:Math.min(r.end,i),!e.extend&&o>r&&(i=r,r=o,o=i),i=li(n,o);var a=li(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),o>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"==typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pi=ue&&"documentMode"in document&&11>=document.documentMode,fi=null,mi=null,gi=null,vi=!1;function yi(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vi||null==fi||fi!==Ge(r)||(r="selectionStart"in(r=fi)&&di(r)?{start:r.selectionStart,end:r.selectionEnd}:{anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gi&&ai(gi,r)||(gi=r,0<(r=qi(mi,"onSelect")).length&&(t=new lr("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=fi)))}function bi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xi={animationend:bi("Animation","AnimationEnd"),animationiteration:bi("Animation","AnimationIteration"),animationstart:bi("Animation","AnimationStart"),transitionend:bi("Transition","TransitionEnd")},wi={},ki={};function _i(e){if(wi[e])return wi[e];if(!xi[e])return e;var t,n=xi[e];for(t in n)if(n.hasOwnProperty(t)&&t in ki)return wi[e]=n[t];return e}ue&&(ki=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);var Ei=_i("animationend"),Ci=_i("animationiteration"),Ii=_i("animationstart"),Si=_i("transitionend"),Ni=new Map,Ti="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(e,t){Ni.set(e,t),se(t,[e])}for(var Ri=0;Ri<Ti.length;Ri++){var Di=Ti[Ri];Ai(Di.toLowerCase(),"on"+(Di[0].toUpperCase()+Di.slice(1)))}Ai(Ei,"onAnimationEnd"),Ai(Ci,"onAnimationIteration"),Ai(Ii,"onAnimationStart"),Ai("dblclick","onDoubleClick"),Ai("focusin","onFocus"),Ai("focusout","onBlur"),Ai(Si,"onTransitionEnd"),le("onMouseEnter",["mouseout","mouseover"]),le("onMouseLeave",["mouseout","mouseover"]),le("onPointerEnter",["pointerout","pointerover"]),le("onPointerLeave",["pointerout","pointerover"]),se("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),se("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),se("onBeforeInput",["compositionend","keypress","textInput","paste"]),se("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),se("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),se("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oi="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pi=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oi));function Li(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,a,s,l){if(Bt.apply(this,arguments),Pt){if(!Pt)throw Error(ie(198));var u=Lt;Pt=!1,Lt=null,Mt||(Mt=!0,Ft=u)}}(r,t,void 0,e),e.currentTarget=null}function Mi(e,t){t=!!(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var o=void 0;if(t)for(var a=r.length-1;0<=a;a--){var s=r[a],l=s.instance,u=s.currentTarget;if(s=s.listener,l!==o&&i.isPropagationStopped())break e;Li(i,s,u),o=l}else for(a=0;a<r.length;a++){if(l=(s=r[a]).instance,u=s.currentTarget,s=s.listener,l!==o&&i.isPropagationStopped())break e;Li(i,s,u),o=l}}}if(Mt)throw e=Ft,Mt=!1,Ft=null,e}function Fi(e,t){var n=t[fo];void 0===n&&(n=t[fo]=new Set);var r=e+"__bubble";n.has(r)||(zi(t,e,2,!1),n.add(r))}function ji(e,t,n){var r=0;t&&(r|=4),zi(n,e,r,t)}var Bi="_reactListening"+Math.random().toString(36).slice(2);function Vi(e){if(!e[Bi]){e[Bi]=!0,oe.forEach((function(t){"selectionchange"!==t&&(Pi.has(t)||ji(t,!1,e),ji(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Bi]||(t[Bi]=!0,ji("selectionchange",!1,t))}}function zi(e,t,n,r){switch(Yn(t)){case 1:var i=qn;break;case 4:i=Wn;break;default:i=Hn}n=i.bind(null,t,n,e),i=void 0,!Rt||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Ui(e,t,n,r,i){var o=r;if(!(1&t||2&t||null===r))e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var s=r.stateNode.containerInfo;if(s===i||8===s.nodeType&&s.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==s;){if(null===(a=vo(s)))return;if(5===(l=a.tag)||6===l){r=o=a;continue e}s=s.parentNode}}r=r.return}Tt((function(){var r=o,i=bt(n),a=[];e:{var s=Ni.get(e);if(void 0!==s){var l=lr,u=e;switch(e){case"keypress":if(0===er(n))break e;case"keydown":case"keyup":l=Cr;break;case"focusin":u="focus",l=fr;break;case"focusout":u="blur",l=fr;break;case"beforeblur":case"afterblur":l=fr;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=hr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=pr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=Sr;break;case Ei:case Ci:case Ii:l=mr;break;case Si:l=Nr;break;case"scroll":l=cr;break;case"wheel":l=Ar;break;case"copy":case"cut":case"paste":l=vr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Ir}var c=!!(4&t),d=!c&&"scroll"===e,h=c?null!==s?s+"Capture":null:s;c=[];for(var p,f=r;null!==f;){var m=(p=f).stateNode;if(5===p.tag&&null!==m&&(p=m,null!==h&&null!=(m=At(f,h))&&c.push($i(f,m,p))),d)break;f=f.return}0<c.length&&(s=new l(s,u,null,n,i),a.push({event:s,listeners:c}))}}if(!(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(s="mouseover"===e||"pointerover"===e)||n===yt||!(u=n.relatedTarget||n.fromElement)||!vo(u)&&!u[po])&&(l||s)&&(s=i.window===i?i:(s=i.ownerDocument)?s.defaultView||s.parentWindow:window,l?(l=r,null!==(u=(u=n.relatedTarget||n.toElement)?vo(u):null)&&(u!==(d=Vt(u))||5!==u.tag&&6!==u.tag)&&(u=null)):(l=null,u=r),l!==u)){if(c=hr,m="onMouseLeave",h="onMouseEnter",f="mouse","pointerout"!==e&&"pointerover"!==e||(c=Ir,m="onPointerLeave",h="onPointerEnter",f="pointer"),d=null==l?s:bo(l),p=null==u?s:bo(u),(s=new c(m,f+"leave",l,n,i)).target=d,s.relatedTarget=p,m=null,vo(i)===r&&((c=new c(h,f+"enter",u,n,i)).target=p,c.relatedTarget=d,m=c),d=m,l&&u)e:{for(h=u,f=0,p=c=l;p;p=Wi(p))f++;for(p=0,m=h;m;m=Wi(m))p++;for(;0<f-p;)c=Wi(c),f--;for(;0<p-f;)h=Wi(h),p--;for(;f--;){if(c===h||null!==h&&c===h.alternate)break e;c=Wi(c),h=Wi(h)}c=null}else c=null;null!==l&&Hi(a,s,l,c,!1),null!==u&&null!==d&&Hi(a,d,u,c,!0)}if("select"===(l=(s=r?bo(r):window).nodeName&&s.nodeName.toLowerCase())||"input"===l&&"file"===s.type)var g=Kr;else if(Ur(s))if(Yr)g=ii;else{g=ni;var v=ti}else(l=s.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===s.type||"radio"===s.type)&&(g=ri);switch(g&&(g=g(e,r))?$r(a,g,n,i):(v&&v(e,s,r),"focusout"===e&&(v=s._wrapperState)&&v.controlled&&"number"===s.type&&Ze(s,"number",s.value)),v=r?bo(r):window,e){case"focusin":(Ur(v)||"true"===v.contentEditable)&&(fi=v,mi=r,gi=null);break;case"focusout":gi=mi=fi=null;break;case"mousedown":vi=!0;break;case"contextmenu":case"mouseup":case"dragend":vi=!1,yi(a,n,i);break;case"selectionchange":if(pi)break;case"keydown":case"keyup":yi(a,n,i)}var y;if(Dr)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Vr?jr(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Lr&&"ko"!==n.locale&&(Vr||"onCompositionStart"!==b?"onCompositionEnd"===b&&Vr&&(y=Zn()):(Qn="value"in(Xn=i)?Xn.value:Xn.textContent,Vr=!0)),0<(v=qi(r,b)).length&&(b=new yr(b,e,null,n,i),a.push({event:b,listeners:v}),(y||null!==(y=Br(n)))&&(b.data=y))),(y=Pr?function(e,t){switch(e){case"compositionend":return Br(t);case"keypress":return 32!==t.which?null:(Fr=!0,Mr);case"textInput":return(e=t.data)===Mr&&Fr?null:e;default:return null}}(e,n):function(e,t){if(Vr)return"compositionend"===e||!Dr&&jr(e,t)?(e=Zn(),Jn=Qn=Xn=null,Vr=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Lr&&"ko"!==t.locale?null:t.data}}(e,n))&&0<(r=qi(r,"onBeforeInput")).length&&(i=new yr("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y)}Mi(a,t)}))}function $i(e,t,n){return{instance:e,listener:t,currentTarget:n}}function qi(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,o=i.stateNode;5===i.tag&&null!==o&&(i=o,null!=(o=At(e,n))&&r.unshift($i(e,o,i)),null!=(o=At(e,t))&&r.push($i(e,o,i))),e=e.return}return r}function Wi(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Hi(e,t,n,r,i){for(var o=t._reactName,a=[];null!==n&&n!==r;){var s=n,l=s.alternate,u=s.stateNode;if(null!==l&&l===r)break;5===s.tag&&null!==u&&(s=u,i?null!=(l=At(n,o))&&a.unshift($i(n,l,s)):i||null!=(l=At(n,o))&&a.push($i(n,l,s))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Gi=/\r\n?/g,Ki=/\u0000|\uFFFD/g;function Yi(e){return("string"==typeof e?e:""+e).replace(Gi,"\n").replace(Ki,"")}function Xi(e,t,n){if(t=Yi(t),Yi(e)!==t&&n)throw Error(ie(425))}function Qi(){}var Ji=null,Zi=null;function eo(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var to="function"==typeof setTimeout?setTimeout:void 0,no="function"==typeof clearTimeout?clearTimeout:void 0,ro="function"==typeof Promise?Promise:void 0,io="function"==typeof queueMicrotask?queueMicrotask:void 0!==ro?function(e){return ro.resolve(null).then(e).catch(oo)}:to;function oo(e){setTimeout((function(){throw e}))}function ao(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zn(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zn(t)}function so(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function lo(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var uo=Math.random().toString(36).slice(2),co="__reactFiber$"+uo,ho="__reactProps$"+uo,po="__reactContainer$"+uo,fo="__reactEvents$"+uo,mo="__reactListeners$"+uo,go="__reactHandles$"+uo;function vo(e){var t=e[co];if(t)return t;for(var n=e.parentNode;n;){if(t=n[po]||n[co]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=lo(e);null!==e;){if(n=e[co])return n;e=lo(e)}return t}n=(e=n).parentNode}return null}function yo(e){return!(e=e[co]||e[po])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bo(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(ie(33))}function xo(e){return e[ho]||null}var wo=[],ko=-1;function _o(e){return{current:e}}function Eo(e){0>ko||(e.current=wo[ko],wo[ko]=null,ko--)}function Co(e,t){ko++,wo[ko]=e.current,e.current=t}var Io={},So=_o(Io),No=_o(!1),To=Io;function Ao(e,t){var n=e.type.contextTypes;if(!n)return Io;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,o={};for(i in n)o[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=o),o}function Ro(e){return null!=(e=e.childContextTypes)}function Do(){Eo(No),Eo(So)}function Oo(e,t,n){if(So.current!==Io)throw Error(ie(168));Co(So,t),Co(No,n)}function Po(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!=typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(ie(108,Ue(e)||"Unknown",i));return Me({},n,r)}function Lo(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Io,To=So.current,Co(So,e),Co(No,No.current),!0}function Mo(e,t,n){var r=e.stateNode;if(!r)throw Error(ie(169));n?(e=Po(e,t,To),r.__reactInternalMemoizedMergedChildContext=e,Eo(No),Eo(So),Co(So,e)):Eo(No),Co(No,n)}var Fo=null,jo=!1,Bo=!1;function Vo(e){null===Fo?Fo=[e]:Fo.push(e)}function zo(){if(!Bo&&null!==Fo){Bo=!0;var e=0,t=yn;try{var n=Fo;for(yn=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fo=null,jo=!1}catch(AW){throw null!==Fo&&(Fo=Fo.slice(e+1)),Wt(Qt,zo),AW}finally{yn=t,Bo=!1}}return null}var Uo=[],$o=0,qo=null,Wo=0,Ho=[],Go=0,Ko=null,Yo=1,Xo="";function Qo(e,t){Uo[$o++]=Wo,Uo[$o++]=qo,qo=e,Wo=t}function Jo(e,t,n){Ho[Go++]=Yo,Ho[Go++]=Xo,Ho[Go++]=Ko,Ko=e;var r=Yo;e=Xo;var i=32-on(r)-1;r&=~(1<<i),n+=1;var o=32-on(t)+i;if(30<o){var a=i-i%5;o=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Yo=1<<32-on(t)+i|n<<i|r,Xo=o+e}else Yo=1<<o|n<<i|r,Xo=e}function Zo(e){null!==e.return&&(Qo(e,1),Jo(e,1,0))}function ea(e){for(;e===qo;)qo=Uo[--$o],Uo[$o]=null,Wo=Uo[--$o],Uo[$o]=null;for(;e===Ko;)Ko=Ho[--Go],Ho[Go]=null,Xo=Ho[--Go],Ho[Go]=null,Yo=Ho[--Go],Ho[Go]=null}var ta=null,na=null,ra=!1,ia=null;function oa(e,t){var n=Ac(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function aa(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ta=e,na=so(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ta=e,na=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ko?{id:Yo,overflow:Xo}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Ac(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ta=e,na=null,!0);default:return!1}}function sa(e){return!(!(1&e.mode)||128&e.flags)}function la(e){if(ra){var t=na;if(t){var n=t;if(!aa(e,t)){if(sa(e))throw Error(ie(418));t=so(n.nextSibling);var r=ta;t&&aa(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ra=!1,ta=e)}}else{if(sa(e))throw Error(ie(418));e.flags=-4097&e.flags|2,ra=!1,ta=e}}}function ua(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ta=e}function ca(e){if(e!==ta)return!1;if(!ra)return ua(e),ra=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!eo(e.type,e.memoizedProps)),t&&(t=na)){if(sa(e))throw da(),Error(ie(418));for(;t;)oa(e,t),t=so(t.nextSibling)}if(ua(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(ie(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){na=so(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}na=null}}else na=ta?so(e.stateNode.nextSibling):null;return!0}function da(){for(var e=na;e;)e=so(e.nextSibling)}function ha(){na=ta=null,ra=!1}function pa(e){null===ia?ia=[e]:ia.push(e)}var fa=be.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=Me({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ga=_o(null),va=null,ya=null,ba=null;function xa(){ba=ya=va=null}function wa(e){var t=ga.current;Eo(ga),e._currentValue=t}function ka(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function _a(e,t){va=e,ba=ya=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(!!(e.lanes&t)&&(yl=!0),e.firstContext=null)}function Ea(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ya){if(null===va)throw Error(ie(308));ya=e,va.dependencies={lanes:0,firstContext:e}}else ya=ya.next=e;return t}var Ca=null;function Ia(e){null===Ca?Ca=[e]:Ca.push(e)}function Sa(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Na(e,r)}function Na(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Ta=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Da(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,2&Su){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Na(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Na(e,n)}function Pa(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vn(e,n)}}function La(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,o=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===o?i=o=a:o=o.next=a,n=n.next}while(null!==n);null===o?i=o=t:o=o.next=t}else i=o=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ma(e,t,n,r){var i=e.updateQueue;Ta=!1;var o=i.firstBaseUpdate,a=i.lastBaseUpdate,s=i.shared.pending;if(null!==s){i.shared.pending=null;var l=s,u=l.next;l.next=null,null===a?o=u:a.next=u,a=l;var c=e.alternate;null!==c&&(s=(c=c.updateQueue).lastBaseUpdate)!==a&&(null===s?c.firstBaseUpdate=u:s.next=u,c.lastBaseUpdate=l)}if(null!==o){var d=i.baseState;for(a=0,c=u=l=null,s=o;;){var h=s.lane,p=s.eventTime;if((r&h)===h){null!==c&&(c=c.next={eventTime:p,lane:0,tag:s.tag,payload:s.payload,callback:s.callback,next:null});e:{var f=e,m=s;switch(h=t,p=n,m.tag){case 1:if("function"==typeof(f=m.payload)){d=f.call(p,d,h);break e}d=f;break e;case 3:f.flags=-65537&f.flags|128;case 0:if(null==(h="function"==typeof(f=m.payload)?f.call(p,d,h):f))break e;d=Me({},d,h);break e;case 2:Ta=!0}}null!==s.callback&&0!==s.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[s]:h.push(s))}else p={eventTime:p,lane:h,tag:s.tag,payload:s.payload,callback:s.callback,next:null},null===c?(u=c=p,l=d):c=c.next=p,a|=h;if(null===(s=s.next)){if(null===(s=i.shared.pending))break;s=(h=s).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===c&&(l=d),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===o&&(i.shared.lanes=0);Lu|=a,e.lanes=a,e.memoizedState=d}}function Fa(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!=typeof i)throw Error(ie(191,i));i.call(r)}}}var ja=(new ne.Component).refs;function Ba(e,t,n,r){n=null==(n=n(r,t=e.memoizedState))?t:Me({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var Va={isMounted:function(e){return!!(e=e._reactInternals)&&Vt(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Zu(),i=ec(e),o=Da(r,i);o.payload=t,null!=n&&(o.callback=n),null!==(t=Oa(e,o,i))&&(tc(t,e,i,r),Pa(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Zu(),i=ec(e),o=Da(r,i);o.tag=1,o.payload=t,null!=n&&(o.callback=n),null!==(t=Oa(e,o,i))&&(tc(t,e,i,r),Pa(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Zu(),r=ec(e),i=Da(n,r);i.tag=2,null!=t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(tc(t,e,r,n),Pa(t,e,r))}};function za(e,t,n,r,i,o,a){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,o,a):!(t.prototype&&t.prototype.isPureReactComponent&&ai(n,r)&&ai(i,o))}function Ua(e,t,n){var r=!1,i=Io,o=t.contextType;return"object"==typeof o&&null!==o?o=Ea(o):(i=Ro(t)?To:So.current,o=(r=null!=(r=t.contextTypes))?Ao(e,i):Io),t=new t(n,o),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=Va,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=o),t}function $a(e,t,n,r){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Va.enqueueReplaceState(t,t.state,null)}function qa(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=ja,Aa(e);var o=t.contextType;"object"==typeof o&&null!==o?i.context=Ea(o):(o=Ro(t)?To:So.current,i.context=Ao(e,o)),i.state=e.memoizedState,"function"==typeof(o=t.getDerivedStateFromProps)&&(Ba(e,t,o,n),i.state=e.memoizedState),"function"==typeof t.getDerivedStateFromProps||"function"==typeof i.getSnapshotBeforeUpdate||"function"!=typeof i.UNSAFE_componentWillMount&&"function"!=typeof i.componentWillMount||(t=i.state,"function"==typeof i.componentWillMount&&i.componentWillMount(),"function"==typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&Va.enqueueReplaceState(i,i.state,null),Ma(e,n,i,r),i.state=e.memoizedState),"function"==typeof i.componentDidMount&&(e.flags|=4194308)}function Wa(e,t,n){if(null!==(e=n.ref)&&"function"!=typeof e&&"object"!=typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(ie(309));var r=n.stateNode}if(!r)throw Error(ie(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"==typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===ja&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!=typeof e)throw Error(ie(284));if(!n._owner)throw Error(ie(290,e))}return e}function Ha(e,t){throw e=Object.prototype.toString.call(t),Error(ie(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ga(e){return(0,e._init)(e._payload)}function Ka(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function a(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function l(e,t,n,r){var o=n.type;return o===ke?c(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===o||"object"==typeof o&&null!==o&&o.$$typeof===Re&&Ga(o)===t.type)?((r=i(t,n.props)).ref=Wa(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=Wa(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function c(e,t,n,r,o){return null===t||7!==t.tag?((t=Pc(n,e.mode,r,o)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"==typeof t&&""!==t||"number"==typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case xe:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=Wa(e,null,t),n.return=e,n;case we:return(t=Fc(t,e.mode,n)).return=e,t;case Re:return d(e,(0,t._init)(t._payload),n)}if(et(t)||Pe(t))return(t=Pc(t,e.mode,n,null)).return=e,t;Ha(e,t)}return null}function h(e,t,n,r){var i=null!==t?t.key:null;if("string"==typeof n&&""!==n||"number"==typeof n)return null!==i?null:s(e,t,""+n,r);if("object"==typeof n&&null!==n){switch(n.$$typeof){case xe:return n.key===i?l(e,t,n,r):null;case we:return n.key===i?u(e,t,n,r):null;case Re:return h(e,t,(i=n._init)(n._payload),r)}if(et(n)||Pe(n))return null!==i?null:c(e,t,n,r,null);Ha(e,n)}return null}function p(e,t,n,r,i){if("string"==typeof r&&""!==r||"number"==typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"==typeof r&&null!==r){switch(r.$$typeof){case xe:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case we:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case Re:return p(e,t,n,(0,r._init)(r._payload),i)}if(et(r)||Pe(r))return c(t,e=e.get(n)||null,r,i,null);Ha(t,r)}return null}function f(i,a,s,l){for(var u=null,c=null,f=a,m=a=0,g=null;null!==f&&m<s.length;m++){f.index>m?(g=f,f=null):g=f.sibling;var v=h(i,f,s[m],l);if(null===v){null===f&&(f=g);break}e&&f&&null===v.alternate&&t(i,f),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v,f=g}if(m===s.length)return n(i,f),ra&&Qo(i,m),u;if(null===f){for(;m<s.length;m++)null!==(f=d(i,s[m],l))&&(a=o(f,a,m),null===c?u=f:c.sibling=f,c=f);return ra&&Qo(i,m),u}for(f=r(i,f);m<s.length;m++)null!==(g=p(f,i,m,s[m],l))&&(e&&null!==g.alternate&&f.delete(null===g.key?m:g.key),a=o(g,a,m),null===c?u=g:c.sibling=g,c=g);return e&&f.forEach((function(e){return t(i,e)})),ra&&Qo(i,m),u}function m(i,a,s,l){var u=Pe(s);if("function"!=typeof u)throw Error(ie(150));if(null==(s=u.call(s)))throw Error(ie(151));for(var c=u=null,f=a,m=a=0,g=null,v=s.next();null!==f&&!v.done;m++,v=s.next()){f.index>m?(g=f,f=null):g=f.sibling;var y=h(i,f,v.value,l);if(null===y){null===f&&(f=g);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,m),null===c?u=y:c.sibling=y,c=y,f=g}if(v.done)return n(i,f),ra&&Qo(i,m),u;if(null===f){for(;!v.done;m++,v=s.next())null!==(v=d(i,v.value,l))&&(a=o(v,a,m),null===c?u=v:c.sibling=v,c=v);return ra&&Qo(i,m),u}for(f=r(i,f);!v.done;m++,v=s.next())null!==(v=p(f,i,m,v.value,l))&&(e&&null!==v.alternate&&f.delete(null===v.key?m:v.key),a=o(v,a,m),null===c?u=v:c.sibling=v,c=v);return e&&f.forEach((function(e){return t(i,e)})),ra&&Qo(i,m),u}return function e(r,o,s,l){if("object"==typeof s&&null!==s&&s.type===ke&&null===s.key&&(s=s.props.children),"object"==typeof s&&null!==s){switch(s.$$typeof){case xe:e:{for(var u=s.key,c=o;null!==c;){if(c.key===u){if((u=s.type)===ke){if(7===c.tag){n(r,c.sibling),(o=i(c,s.props.children)).return=r,r=o;break e}}else if(c.elementType===u||"object"==typeof u&&null!==u&&u.$$typeof===Re&&Ga(u)===c.type){n(r,c.sibling),(o=i(c,s.props)).ref=Wa(r,c,s),o.return=r,r=o;break e}n(r,c);break}t(r,c),c=c.sibling}s.type===ke?((o=Pc(s.props.children,r.mode,l,s.key)).return=r,r=o):((l=Oc(s.type,s.key,s.props,null,r.mode,l)).ref=Wa(r,o,s),l.return=r,r=l)}return a(r);case we:e:{for(c=s.key;null!==o;){if(o.key===c){if(4===o.tag&&o.stateNode.containerInfo===s.containerInfo&&o.stateNode.implementation===s.implementation){n(r,o.sibling),(o=i(o,s.children||[])).return=r,r=o;break e}n(r,o);break}t(r,o),o=o.sibling}(o=Fc(s,r.mode,l)).return=r,r=o}return a(r);case Re:return e(r,o,(c=s._init)(s._payload),l)}if(et(s))return f(r,o,s,l);if(Pe(s))return m(r,o,s,l);Ha(r,s)}return"string"==typeof s&&""!==s||"number"==typeof s?(s=""+s,null!==o&&6===o.tag?(n(r,o.sibling),(o=i(o,s)).return=r,r=o):(n(r,o),(o=Mc(s,r.mode,l)).return=r,r=o),a(r)):n(r,o)}}var Ya=Ka(!0),Xa=Ka(!1),Qa={},Ja=_o(Qa),Za=_o(Qa),es=_o(Qa);function ts(e){if(e===Qa)throw Error(ie(174));return e}function ns(e,t){switch(Co(es,t),Co(Za,e),Co(Ja,Qa),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:st(null,"");break;default:t=st(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Eo(Ja),Co(Ja,t)}function rs(){Eo(Ja),Eo(Za),Eo(es)}function is(e){ts(es.current);var t=ts(Ja.current),n=st(t,e.type);t!==n&&(Co(Za,e),Co(Ja,n))}function os(e){Za.current===e&&(Eo(Ja),Eo(Za))}var as=_o(0);function ss(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(128&t.flags)return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ls=[];function us(){for(var e=0;e<ls.length;e++)ls[e]._workInProgressVersionPrimary=null;ls.length=0}var cs=be.ReactCurrentDispatcher,ds=be.ReactCurrentBatchConfig,hs=0,ps=null,fs=null,ms=null,gs=!1,vs=!1,ys=0,bs=0;function xs(){throw Error(ie(321))}function ws(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!oi(e[n],t[n]))return!1;return!0}function ks(e,t,n,r,i,o){if(hs=o,ps=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,cs.current=null===e||null===e.memoizedState?ol:al,e=n(r,i),vs){o=0;do{if(vs=!1,ys=0,25<=o)throw Error(ie(301));o+=1,ms=fs=null,t.updateQueue=null,cs.current=sl,e=n(r,i)}while(vs)}if(cs.current=il,t=null!==fs&&null!==fs.next,hs=0,ms=fs=ps=null,gs=!1,t)throw Error(ie(300));return e}function _s(){var e=0!==ys;return ys=0,e}function Es(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===ms?ps.memoizedState=ms=e:ms=ms.next=e,ms}function Cs(){if(null===fs){var e=ps.alternate;e=null!==e?e.memoizedState:null}else e=fs.next;var t=null===ms?ps.memoizedState:ms.next;if(null!==t)ms=t,fs=e;else{if(null===e)throw Error(ie(310));e={memoizedState:(fs=e).memoizedState,baseState:fs.baseState,baseQueue:fs.baseQueue,queue:fs.queue,next:null},null===ms?ps.memoizedState=ms=e:ms=ms.next=e}return ms}function Is(e,t){return"function"==typeof t?t(e):t}function Ss(e){var t=Cs(),n=t.queue;if(null===n)throw Error(ie(311));n.lastRenderedReducer=e;var r=fs,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var a=i.next;i.next=o.next,o.next=a}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=a=null,l=null,u=o;do{var c=u.lane;if((hs&c)===c)null!==l&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===l?(s=l=d,a=r):l=l.next=d,ps.lanes|=c,Lu|=c}u=u.next}while(null!==u&&u!==o);null===l?a=r:l.next=s,oi(r,t.memoizedState)||(yl=!0),t.memoizedState=r,t.baseState=a,t.baseQueue=l,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,ps.lanes|=o,Lu|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ns(e){var t=Cs(),n=t.queue;if(null===n)throw Error(ie(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var a=i=i.next;do{o=e(o,a.action),a=a.next}while(a!==i);oi(o,t.memoizedState)||(yl=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ts(){}function As(e,t){var n=ps,r=Cs(),i=t(),o=!oi(r.memoizedState,i);if(o&&(r.memoizedState=i,yl=!0),r=r.queue,Us(Os.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==ms&&1&ms.memoizedState.tag){if(n.flags|=2048,Fs(9,Ds.bind(null,n,r,i,t),void 0,null),null===Nu)throw Error(ie(349));30&hs||Rs(n,t,i)}return i}function Rs(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=ps.updateQueue)?(t={lastEffect:null,stores:null},ps.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ds(e,t,n,r){t.value=n,t.getSnapshot=r,Ps(t)&&Ls(e)}function Os(e,t,n){return n((function(){Ps(t)&&Ls(e)}))}function Ps(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!oi(e,n)}catch($W){return!0}}function Ls(e){var t=Na(e,1);null!==t&&tc(t,e,1,-1)}function Ms(e){var t=Es();return"function"==typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Is,lastRenderedState:e},t.queue=e,e=e.dispatch=el.bind(null,ps,e),[t.memoizedState,e]}function Fs(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=ps.updateQueue)?(t={lastEffect:null,stores:null},ps.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function js(){return Cs().memoizedState}function Bs(e,t,n,r){var i=Es();ps.flags|=e,i.memoizedState=Fs(1|t,n,void 0,void 0===r?null:r)}function Vs(e,t,n,r){var i=Cs();r=void 0===r?null:r;var o=void 0;if(null!==fs){var a=fs.memoizedState;if(o=a.destroy,null!==r&&ws(r,a.deps))return void(i.memoizedState=Fs(t,n,o,r))}ps.flags|=e,i.memoizedState=Fs(1|t,n,o,r)}function zs(e,t){return Bs(8390656,8,e,t)}function Us(e,t){return Vs(2048,8,e,t)}function $s(e,t){return Vs(4,2,e,t)}function qs(e,t){return Vs(4,4,e,t)}function Ws(e,t){return"function"==typeof t?(e=e(),t(e),function(){t(null)}):null!=t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Hs(e,t,n){return n=null!=n?n.concat([e]):null,Vs(4,4,Ws.bind(null,t,e),n)}function Gs(){}function Ks(e,t){var n=Cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ys(e,t){var n=Cs();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ws(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Xs(e,t,n){return 21&hs?(oi(n,t)||(n=fn(),ps.lanes|=n,Lu|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,yl=!0),e.memoizedState=n)}function Qs(e,t){var n=yn;yn=0!==n&&4>n?n:4,e(!0);var r=ds.transition;ds.transition={};try{e(!1),t()}finally{yn=n,ds.transition=r}}function Js(){return Cs().memoizedState}function Zs(e,t,n){var r=ec(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},tl(e)?nl(t,n):null!==(n=Sa(e,t,n,r))&&(tc(n,e,r,Zu()),rl(n,t,r))}function el(e,t,n){var r=ec(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(tl(e))nl(t,i);else{var o=e.alternate;if(0===e.lanes&&(null===o||0===o.lanes)&&null!==(o=t.lastRenderedReducer))try{var a=t.lastRenderedState,s=o(a,n);if(i.hasEagerState=!0,i.eagerState=s,oi(s,a)){var l=t.interleaved;return null===l?(i.next=i,Ia(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(jW){}null!==(n=Sa(e,t,i,r))&&(tc(n,e,r,i=Zu()),rl(n,t,r))}}function tl(e){var t=e.alternate;return e===ps||null!==t&&t===ps}function nl(e,t){vs=gs=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function rl(e,t,n){if(4194240&n){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vn(e,n)}}var il={readContext:Ea,useCallback:xs,useContext:xs,useEffect:xs,useImperativeHandle:xs,useInsertionEffect:xs,useLayoutEffect:xs,useMemo:xs,useReducer:xs,useRef:xs,useState:xs,useDebugValue:xs,useDeferredValue:xs,useTransition:xs,useMutableSource:xs,useSyncExternalStore:xs,useId:xs,unstable_isNewReconciler:!1},ol={readContext:Ea,useCallback:function(e,t){return Es().memoizedState=[e,void 0===t?null:t],e},useContext:Ea,useEffect:zs,useImperativeHandle:function(e,t,n){return n=null!=n?n.concat([e]):null,Bs(4194308,4,Ws.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Bs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Bs(4,2,e,t)},useMemo:function(e,t){var n=Es();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Es();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Zs.bind(null,ps,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Es().memoizedState=e},useState:Ms,useDebugValue:Gs,useDeferredValue:function(e){return Es().memoizedState=e},useTransition:function(){var e=Ms(!1),t=e[0];return e=Qs.bind(null,e[1]),Es().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=ps,i=Es();if(ra){if(void 0===n)throw Error(ie(407));n=n()}else{if(n=t(),null===Nu)throw Error(ie(349));30&hs||Rs(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,zs(Os.bind(null,r,o,e),[e]),r.flags|=2048,Fs(9,Ds.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Es(),t=Nu.identifierPrefix;if(ra){var n=Xo;t=":"+t+"R"+(n=(Yo&~(1<<32-on(Yo)-1)).toString(32)+n),0<(n=ys++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=bs++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},al={readContext:Ea,useCallback:Ks,useContext:Ea,useEffect:Us,useImperativeHandle:Hs,useInsertionEffect:$s,useLayoutEffect:qs,useMemo:Ys,useReducer:Ss,useRef:js,useState:function(){return Ss(Is)},useDebugValue:Gs,useDeferredValue:function(e){return Xs(Cs(),fs.memoizedState,e)},useTransition:function(){return[Ss(Is)[0],Cs().memoizedState]},useMutableSource:Ts,useSyncExternalStore:As,useId:Js,unstable_isNewReconciler:!1},sl={readContext:Ea,useCallback:Ks,useContext:Ea,useEffect:Us,useImperativeHandle:Hs,useInsertionEffect:$s,useLayoutEffect:qs,useMemo:Ys,useReducer:Ns,useRef:js,useState:function(){return Ns(Is)},useDebugValue:Gs,useDeferredValue:function(e){var t=Cs();return null===fs?t.memoizedState=e:Xs(t,fs.memoizedState,e)},useTransition:function(){return[Ns(Is)[0],Cs().memoizedState]},useMutableSource:Ts,useSyncExternalStore:As,useId:Js,unstable_isNewReconciler:!1};function ll(e,t){try{var n="",r=t;do{n+=Ve(r),r=r.return}while(r);var i=n}catch(UW){i="\nError generating stack: "+UW.message+"\n"+UW.stack}return{value:e,source:t,stack:i,digest:null}}function ul(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function cl(e,t){try{console.error(t.value)}catch(BW){setTimeout((function(){throw BW}))}}var dl="function"==typeof WeakMap?WeakMap:Map;function hl(e,t,n){(n=Da(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){$u||($u=!0,qu=r),cl(0,t)},n}function pl(e,t,n){(n=Da(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"==typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){cl(0,t)}}var o=e.stateNode;return null!==o&&"function"==typeof o.componentDidCatch&&(n.callback=function(){cl(0,t),"function"!=typeof r&&(null===Wu?Wu=new Set([this]):Wu.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new dl;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function ml(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gl(e,t,n,r,i){return 1&e.mode?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Da(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e)}var vl=be.ReactCurrentOwner,yl=!1;function bl(e,t,n,r){t.child=null===e?Xa(t,null,n,r):Ya(t,e.child,n,r)}function xl(e,t,n,r,i){n=n.render;var o=t.ref;return _a(t,i),r=ks(e,t,n,r,o,i),n=_s(),null===e||yl?(ra&&n&&Zo(t),t.flags|=1,bl(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$l(e,t,i))}function wl(e,t,n,r,i){if(null===e){var o=n.type;return"function"!=typeof o||Rc(o)||void 0!==o.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=o,kl(e,t,o,r,i))}if(o=e.child,!(e.lanes&i)){var a=o.memoizedProps;if((n=null!==(n=n.compare)?n:ai)(a,r)&&e.ref===t.ref)return $l(e,t,i)}return t.flags|=1,(e=Dc(o,r)).ref=t.ref,e.return=t,t.child=e}function kl(e,t,n,r,i){if(null!==e){var o=e.memoizedProps;if(ai(o,r)&&e.ref===t.ref){if(yl=!1,t.pendingProps=r=o,!(e.lanes&i))return t.lanes=e.lanes,$l(e,t,i);131072&e.flags&&(yl=!0)}}return Cl(e,t,n,r,i)}function _l(e,t,n){var r=t.pendingProps,i=r.children,o=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(1&t.mode){if(!(1073741824&n))return e=null!==o?o.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Co(Du,Ru),Ru|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==o?o.baseLanes:n,Co(Du,Ru),Ru|=r}else t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Co(Du,Ru),Ru|=n;else null!==o?(r=o.baseLanes|n,t.memoizedState=null):r=n,Co(Du,Ru),Ru|=r;return bl(e,t,i,n),t.child}function El(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cl(e,t,n,r,i){var o=Ro(n)?To:So.current;return o=Ao(t,o),_a(t,i),n=ks(e,t,n,r,o,i),r=_s(),null===e||yl?(ra&&r&&Zo(t),t.flags|=1,bl(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,$l(e,t,i))}function Il(e,t,n,r,i){if(Ro(n)){var o=!0;Lo(t)}else o=!1;if(_a(t,i),null===t.stateNode)Ul(e,t),Ua(t,n,r),qa(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,s=t.memoizedProps;a.props=s;var l=a.context,u=n.contextType;u="object"==typeof u&&null!==u?Ea(u):Ao(t,u=Ro(n)?To:So.current);var c=n.getDerivedStateFromProps,d="function"==typeof c||"function"==typeof a.getSnapshotBeforeUpdate;d||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==r||l!==u)&&$a(t,a,r,u),Ta=!1;var h=t.memoizedState;a.state=h,Ma(t,r,a,i),l=t.memoizedState,s!==r||h!==l||No.current||Ta?("function"==typeof c&&(Ba(t,n,c,r),l=t.memoizedState),(s=Ta||za(t,n,s,r,h,l,u))?(d||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=u,r=s):("function"==typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ra(e,t),s=t.memoizedProps,u=t.type===t.elementType?s:ma(t.type,s),a.props=u,d=t.pendingProps,h=a.context,l="object"==typeof(l=n.contextType)&&null!==l?Ea(l):Ao(t,l=Ro(n)?To:So.current);var p=n.getDerivedStateFromProps;(c="function"==typeof p||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(s!==d||h!==l)&&$a(t,a,r,l),Ta=!1,h=t.memoizedState,a.state=h,Ma(t,r,a,i);var f=t.memoizedState;s!==d||h!==f||No.current||Ta?("function"==typeof p&&(Ba(t,n,p,r),f=t.memoizedState),(u=Ta||za(t,n,u,r,h,f,l)||!1)?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(r,f,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,f,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),a.props=r,a.state=f,a.context=l,r=u):("function"!=typeof a.componentDidUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||s===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Sl(e,t,n,r,o,i)}function Sl(e,t,n,r,i,o){El(e,t);var a=!!(128&t.flags);if(!r&&!a)return i&&Mo(t,n,!1),$l(e,t,o);r=t.stateNode,vl.current=t;var s=a&&"function"!=typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=Ya(t,e.child,null,o),t.child=Ya(t,null,s,o)):bl(e,t,s,o),t.memoizedState=r.state,i&&Mo(t,n,!0),t.child}function Nl(e){var t=e.stateNode;t.pendingContext?Oo(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oo(0,t.context,!1),ns(e,t.containerInfo)}function Tl(e,t,n,r,i){return ha(),pa(i),t.flags|=256,bl(e,t,n,r),t.child}var Al,Rl,Dl,Ol,Pl={dehydrated:null,treeContext:null,retryLane:0};function Ll(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ml(e,t,n){var r,i=t.pendingProps,o=as.current,a=!1,s=!!(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&!!(2&o)),r?(a=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Co(as,1&o),null===e)return la(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(1&t.mode?"$!"===e.data?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(s=i.children,e=i.fallback,a?(i=t.mode,a=t.child,s={mode:"hidden",children:s},1&i||null===a?a=Lc(s,i,0,null):(a.childLanes=0,a.pendingProps=s),e=Pc(e,i,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Ll(n),t.memoizedState=Pl,e):Fl(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,a){if(n)return 256&t.flags?(t.flags&=-257,jl(e,t,a,r=ul(Error(ie(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Lc({mode:"visible",children:r.children},i,0,null),(o=Pc(o,i,a,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,1&t.mode&&Ya(t,e.child,null,a),t.child.memoizedState=Ll(a),t.memoizedState=Pl,o);if(!(1&t.mode))return jl(e,t,a,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,jl(e,t,a,r=ul(o=Error(ie(419)),r,void 0))}if(s=!!(a&e.childLanes),yl||s){if(null!==(r=Nu)){switch(a&-a){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=i&(r.suspendedLanes|a)?0:i)&&i!==o.retryLane&&(o.retryLane=i,Na(e,i),tc(r,e,i,-1))}return fc(),jl(e,t,a,r=ul(Error(ie(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,na=so(i.nextSibling),ta=t,ra=!0,ia=null,null!==e&&(Ho[Go++]=Yo,Ho[Go++]=Xo,Ho[Go++]=Ko,Yo=e.id,Xo=e.overflow,Ko=t),(t=Fl(t,r.children)).flags|=4096,t)}(e,t,s,i,r,o,n);if(a){a=i.fallback,s=t.mode,r=(o=e.child).sibling;var l={mode:"hidden",children:i.children};return 1&s||t.child===o?(i=Dc(o,l)).subtreeFlags=14680064&o.subtreeFlags:((i=t.child).childLanes=0,i.pendingProps=l,t.deletions=null),null!==r?a=Dc(r,a):(a=Pc(a,s,n,null)).flags|=2,a.return=t,i.return=t,i.sibling=a,t.child=i,i=a,a=t.child,s=null===(s=e.child.memoizedState)?Ll(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~n,t.memoizedState=Pl,i}return e=(a=e.child).sibling,i=Dc(a,{mode:"visible",children:i.children}),!(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fl(e,t){return(t=Lc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function jl(e,t,n,r){return null!==r&&pa(r),Ya(t,e.child,null,n),(e=Fl(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Bl(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),ka(e.return,t,n)}function Vl(e,t,n,r,i){var o=e.memoizedState;null===o?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function zl(e,t,n){var r=t.pendingProps,i=r.revealOrder,o=r.tail;if(bl(e,t,r.children,n),2&(r=as.current))r=1&r|2,t.flags|=128;else{if(null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Bl(e,n,t);else if(19===e.tag)Bl(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Co(as,r),1&t.mode)switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ss(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Vl(t,!1,i,n,o);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ss(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Vl(t,!0,n,null,o);break;case"together":Vl(t,!1,null,null,void 0);break;default:t.memoizedState=null}else t.memoizedState=null;return t.child}function Ul(e,t){!(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function $l(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Lu|=t.lanes,!(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(ie(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function ql(e,t){if(!ra)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Hl(e,t,n){var r=t.pendingProps;switch(ea(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wl(t),null;case 1:case 17:return Ro(t.type)&&Do(),Wl(t),null;case 3:return r=t.stateNode,rs(),Eo(No),Eo(So),us(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(ca(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,null!==ia&&(oc(ia),ia=null))),Rl(e,t),Wl(t),null;case 5:os(t);var i=ts(es.current);if(n=t.type,null!==e&&null!=t.stateNode)Dl(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(ie(166));return Wl(t),null}if(e=ts(Ja.current),ca(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[co]=t,r[ho]=o,e=!!(1&t.mode),n){case"dialog":Fi("cancel",r),Fi("close",r);break;case"iframe":case"object":case"embed":Fi("load",r);break;case"video":case"audio":for(i=0;i<Oi.length;i++)Fi(Oi[i],r);break;case"source":Fi("error",r);break;case"img":case"image":case"link":Fi("error",r),Fi("load",r);break;case"details":Fi("toggle",r);break;case"input":Ye(r,o),Fi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Fi("invalid",r);break;case"textarea":rt(r,o),Fi("invalid",r)}for(var a in gt(n,o),i=null,o)if(o.hasOwnProperty(a)){var s=o[a];"children"===a?"string"==typeof s?r.textContent!==s&&(!0!==o.suppressHydrationWarning&&Xi(r.textContent,s,e),i=["children",s]):"number"==typeof s&&r.textContent!==""+s&&(!0!==o.suppressHydrationWarning&&Xi(r.textContent,s,e),i=["children",""+s]):ae.hasOwnProperty(a)&&null!=s&&"onScroll"===a&&Fi("scroll",r)}switch(n){case"input":We(r),Je(r,o,!0);break;case"textarea":We(r),ot(r);break;case"select":case"option":break;default:"function"==typeof o.onClick&&(r.onclick=Qi)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{a=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=at(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=a.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"==typeof r.is?e=a.createElement(n,{is:r.is}):(e=a.createElement(n),"select"===n&&(a=e,r.multiple?a.multiple=!0:r.size&&(a.size=r.size))):e=a.createElementNS(e,n),e[co]=t,e[ho]=r,Al(e,t,!1,!1),t.stateNode=e;e:{switch(a=vt(n,r),n){case"dialog":Fi("cancel",e),Fi("close",e),i=r;break;case"iframe":case"object":case"embed":Fi("load",e),i=r;break;case"video":case"audio":for(i=0;i<Oi.length;i++)Fi(Oi[i],e);i=r;break;case"source":Fi("error",e),i=r;break;case"img":case"image":case"link":Fi("error",e),Fi("load",e),i=r;break;case"details":Fi("toggle",e),i=r;break;case"input":Ye(e,r),i=Ke(e,r),Fi("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Me({},r,{value:void 0}),Fi("invalid",e);break;case"textarea":rt(e,r),i=nt(e,r),Fi("invalid",e)}for(o in gt(n,i),s=i)if(s.hasOwnProperty(o)){var l=s[o];"style"===o?ft(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&ut(e,l):"children"===o?"string"==typeof l?("textarea"!==n||""!==l)&&ct(e,l):"number"==typeof l&&ct(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(ae.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Fi("scroll",e):null!=l&&ye(e,o,l,a))}switch(n){case"input":We(e),Je(e,r,!1);break;case"textarea":We(e),ot(e);break;case"option":null!=r.value&&e.setAttribute("value",""+$e(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?tt(e,!!r.multiple,o,!1):null!=r.defaultValue&&tt(e,!!r.multiple,r.defaultValue,!0);break;default:"function"==typeof i.onClick&&(e.onclick=Qi)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wl(t),null;case 6:if(e&&null!=t.stateNode)Ol(e,t,e.memoizedProps,r);else{if("string"!=typeof r&&null===t.stateNode)throw Error(ie(166));if(n=ts(es.current),ts(Ja.current),ca(t)){if(r=t.stateNode,n=t.memoizedProps,r[co]=t,(o=r.nodeValue!==n)&&null!==(e=ta))switch(e.tag){case 3:Xi(r.nodeValue,n,!!(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Xi(r.nodeValue,n,!!(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[co]=t,t.stateNode=r}return Wl(t),null;case 13:if(Eo(as),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ra&&null!==na&&1&t.mode&&!(128&t.flags))da(),ha(),t.flags|=98560,o=!1;else if(o=ca(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(ie(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(ie(317));o[co]=t}else ha(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wl(t),o=!1}else null!==ia&&(oc(ia),ia=null),o=!0;if(!o)return 65536&t.flags?t:null}return 128&t.flags?(t.lanes=n,t):((r=null!==r)!=(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,1&t.mode&&(null===e||1&as.current?0===Ou&&(Ou=3):fc())),null!==t.updateQueue&&(t.flags|=4),Wl(t),null);case 4:return rs(),Rl(e,t),null===e&&Vi(t.stateNode.containerInfo),Wl(t),null;case 10:return wa(t.type._context),Wl(t),null;case 19:if(Eo(as),null===(o=t.memoizedState))return Wl(t),null;if(r=!!(128&t.flags),null===(a=o.rendering))if(r)ql(o,!1);else{if(0!==Ou||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(a=ss(e))){for(t.flags|=128,ql(o,!1),null!==(r=a.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(a=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=a.childLanes,o.lanes=a.lanes,o.child=a.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=a.memoizedProps,o.memoizedState=a.memoizedState,o.updateQueue=a.updateQueue,o.type=a.type,e=a.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Co(as,1&as.current|2),t.child}e=e.sibling}null!==o.tail&&Yt()>zu&&(t.flags|=128,r=!0,ql(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ss(a))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),ql(o,!0),null===o.tail&&"hidden"===o.tailMode&&!a.alternate&&!ra)return Wl(t),null}else 2*Yt()-o.renderingStartTime>zu&&1073741824!==n&&(t.flags|=128,r=!0,ql(o,!1),t.lanes=4194304);o.isBackwards?(a.sibling=t.child,t.child=a):(null!==(n=o.last)?n.sibling=a:t.child=a,o.last=a)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Yt(),t.sibling=null,n=as.current,Co(as,r?1&n|2:1&n),t):(Wl(t),null);case 22:case 23:return cc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&1&t.mode?!!(1073741824&Ru)&&(Wl(t),6&t.subtreeFlags&&(t.flags|=8192)):Wl(t),null;case 24:case 25:return null}throw Error(ie(156,t.tag))}function Gl(e,t){switch(ea(t),t.tag){case 1:return Ro(t.type)&&Do(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return rs(),Eo(No),Eo(So),us(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 5:return os(t),null;case 13:if(Eo(as),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(ie(340));ha()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Eo(as),null;case 4:return rs(),null;case 10:return wa(t.type._context),null;case 22:case 23:return cc(),null;default:return null}}Al=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Rl=function(){},Dl=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,ts(Ja.current);var o,a=null;switch(n){case"input":i=Ke(e,i),r=Ke(e,r),a=[];break;case"select":i=Me({},i,{value:void 0}),r=Me({},r,{value:void 0}),a=[];break;case"textarea":i=nt(e,i),r=nt(e,r),a=[];break;default:"function"!=typeof i.onClick&&"function"==typeof r.onClick&&(e.onclick=Qi)}for(u in gt(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var s=i[u];for(o in s)s.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(ae.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(s=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&l!==s&&(null!=l||null!=s))if("style"===u)if(s){for(o in s)!s.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&s[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(a||(a=[]),a.push(u,n)),n=l;else"dangerouslySetInnerHTML"===u?(l=l?l.__html:void 0,s=s?s.__html:void 0,null!=l&&s!==l&&(a=a||[]).push(u,l)):"children"===u?"string"!=typeof l&&"number"!=typeof l||(a=a||[]).push(u,""+l):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(ae.hasOwnProperty(u)?(null!=l&&"onScroll"===u&&Fi("scroll",e),a||s===l||(a=[])):(a=a||[]).push(u,l))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ol=function(e,t,n,r){n!==r&&(t.flags|=4)};var Kl=!1,Yl=!1,Xl="function"==typeof WeakSet?WeakSet:Set,Ql=null;function Jl(e,t){var n=e.ref;if(null!==n)if("function"==typeof n)try{n(null)}catch($W){_c(e,t,$W)}else n.current=null}function Zl(e,t,n){try{n()}catch($W){_c(e,t,$W)}}var eu=!1;function tu(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var o=i.destroy;i.destroy=void 0,void 0!==o&&Zl(t,n,o)}i=i.next}while(i!==r)}}function nu(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function ru(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"==typeof t?t(e):t.current=e}}function iu(e){var t=e.alternate;null!==t&&(e.alternate=null,iu(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&null!==(t=e.stateNode)&&(delete t[co],delete t[ho],delete t[fo],delete t[mo],delete t[go]),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ou(e){return 5===e.tag||3===e.tag||4===e.tag}function au(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ou(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function su(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!=(n=n._reactRootContainer)||null!==t.onclick||(t.onclick=Qi));else if(4!==r&&null!==(e=e.child))for(su(e,t,n),e=e.sibling;null!==e;)su(e,t,n),e=e.sibling}function lu(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(lu(e,t,n),e=e.sibling;null!==e;)lu(e,t,n),e=e.sibling}var uu=null,cu=!1;function du(e,t,n){for(n=n.child;null!==n;)hu(e,t,n),n=n.sibling}function hu(e,t,n){if(rn&&"function"==typeof rn.onCommitFiberUnmount)try{rn.onCommitFiberUnmount(nn,n)}catch(VW){}switch(n.tag){case 5:Yl||Jl(n,t);case 6:var r=uu,i=cu;uu=null,du(e,t,n),cu=i,null!==(uu=r)&&(cu?(e=uu,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):uu.removeChild(n.stateNode));break;case 18:null!==uu&&(cu?(e=uu,n=n.stateNode,8===e.nodeType?ao(e.parentNode,n):1===e.nodeType&&ao(e,n),zn(e)):ao(uu,n.stateNode));break;case 4:r=uu,i=cu,uu=n.stateNode.containerInfo,cu=!0,du(e,t,n),uu=r,cu=i;break;case 0:case 11:case 14:case 15:if(!Yl&&null!==(r=n.updateQueue)&&null!==(r=r.lastEffect)){i=r=r.next;do{var o=i,a=o.destroy;o=o.tag,void 0!==a&&(2&o||4&o)&&Zl(n,t,a),i=i.next}while(i!==r)}du(e,t,n);break;case 1:if(!Yl&&(Jl(n,t),"function"==typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(VW){_c(n,t,VW)}du(e,t,n);break;case 21:du(e,t,n);break;case 22:1&n.mode?(Yl=(r=Yl)||null!==n.memoizedState,du(e,t,n),Yl=r):du(e,t,n);break;default:du(e,t,n)}}function pu(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Xl),t.forEach((function(t){var r=Sc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function fu(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,a=t,s=a;e:for(;null!==s;){switch(s.tag){case 5:uu=s.stateNode,cu=!1;break e;case 3:case 4:uu=s.stateNode.containerInfo,cu=!0;break e}s=s.return}if(null===uu)throw Error(ie(160));hu(o,a,i),uu=null,cu=!1;var l=i.alternate;null!==l&&(l.return=null),i.return=null}catch(jW){_c(i,t,jW)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)mu(t,e),t=t.sibling}function mu(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fu(t,e),gu(e),4&r){try{tu(3,e,e.return),nu(3,e)}catch(TW){_c(e,e.return,TW)}try{tu(5,e,e.return)}catch(TW){_c(e,e.return,TW)}}break;case 1:fu(t,e),gu(e),512&r&&null!==n&&Jl(n,n.return);break;case 5:if(fu(t,e),gu(e),512&r&&null!==n&&Jl(n,n.return),32&e.flags){var i=e.stateNode;try{ct(i,"")}catch(TW){_c(e,e.return,TW)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,a=null!==n?n.memoizedProps:o,s=e.type,l=e.updateQueue;if(e.updateQueue=null,null!==l)try{"input"===s&&"radio"===o.type&&null!=o.name&&Xe(i,o),vt(s,a);var u=vt(s,o);for(a=0;a<l.length;a+=2){var c=l[a],d=l[a+1];"style"===c?ft(i,d):"dangerouslySetInnerHTML"===c?ut(i,d):"children"===c?ct(i,d):ye(i,c,d,u)}switch(s){case"input":Qe(i,o);break;case"textarea":it(i,o);break;case"select":var h=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var p=o.value;null!=p?tt(i,!!o.multiple,p,!1):h!==!!o.multiple&&(null!=o.defaultValue?tt(i,!!o.multiple,o.defaultValue,!0):tt(i,!!o.multiple,o.multiple?[]:"",!1))}i[ho]=o}catch(TW){_c(e,e.return,TW)}}break;case 6:if(fu(t,e),gu(e),4&r){if(null===e.stateNode)throw Error(ie(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(TW){_c(e,e.return,TW)}}break;case 3:if(fu(t,e),gu(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zn(t.containerInfo)}catch(TW){_c(e,e.return,TW)}break;case 4:default:fu(t,e),gu(e);break;case 13:fu(t,e),gu(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(Vu=Yt())),4&r&&pu(e);break;case 22:if(c=null!==n&&null!==n.memoizedState,1&e.mode?(Yl=(u=Yl)||c,fu(t,e),Yl=u):fu(t,e),gu(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!c&&1&e.mode)for(Ql=e,c=e.child;null!==c;){for(d=Ql=c;null!==Ql;){switch(p=(h=Ql).child,h.tag){case 0:case 11:case 14:case 15:tu(4,h,h.return);break;case 1:Jl(h,h.return);var f=h.stateNode;if("function"==typeof f.componentWillUnmount){r=h,n=h.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(TW){_c(r,n,TW)}}break;case 5:Jl(h,h.return);break;case 22:if(null!==h.memoizedState){xu(d);continue}}null!==p?(p.return=h,Ql=p):xu(d)}c=c.sibling}e:for(c=null,d=e;;){if(5===d.tag){if(null===c){c=d;try{i=d.stateNode,u?"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=d.stateNode,a=null!=(l=d.memoizedProps.style)&&l.hasOwnProperty("display")?l.display:null,s.style.display=pt("display",a))}catch(TW){_c(e,e.return,TW)}}}else if(6===d.tag){if(null===c)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(TW){_c(e,e.return,TW)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;c===d&&(c=null),d=d.return}c===d&&(c=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:fu(t,e),gu(e),4&r&&pu(e);case 21:}}function gu(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ou(n)){var r=n;break e}n=n.return}throw Error(ie(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(ct(i,""),r.flags&=-33),lu(e,au(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;su(e,au(e),o);break;default:throw Error(ie(161))}}catch(tH){_c(e,e.return,tH)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vu(e,t,n){Ql=e,yu(e)}function yu(e,t,n){for(var r=!!(1&e.mode);null!==Ql;){var i=Ql,o=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Kl;if(!a){var s=i.alternate,l=null!==s&&null!==s.memoizedState||Yl;s=Kl;var u=Yl;if(Kl=a,(Yl=l)&&!u)for(Ql=i;null!==Ql;)l=(a=Ql).child,22===a.tag&&null!==a.memoizedState?wu(i):null!==l?(l.return=a,Ql=l):wu(i);for(;null!==o;)Ql=o,yu(o),o=o.sibling;Ql=i,Kl=s,Yl=u}bu(e)}else 8772&i.subtreeFlags&&null!==o?(o.return=i,Ql=o):bu(e)}}function bu(e){for(;null!==Ql;){var t=Ql;if(8772&t.flags){var n=t.alternate;try{if(8772&t.flags)switch(t.tag){case 0:case 11:case 15:Yl||nu(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Yl)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Fa(t,o,r);break;case 3:var a=t.updateQueue;if(null!==a){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Fa(t,a,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var c=u.memoizedState;if(null!==c){var d=c.dehydrated;null!==d&&zn(d)}}}break;default:throw Error(ie(163))}Yl||512&t.flags&&ru(t)}catch(DW){_c(t,t.return,DW)}}if(t===e){Ql=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ql=n;break}Ql=t.return}}function xu(e){for(;null!==Ql;){var t=Ql;if(t===e){Ql=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ql=n;break}Ql=t.return}}function wu(e){for(;null!==Ql;){var t=Ql;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{nu(4,t)}catch(tH){_c(t,n,tH)}break;case 1:var r=t.stateNode;if("function"==typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(tH){_c(t,i,tH)}}var o=t.return;try{ru(t)}catch(tH){_c(t,o,tH)}break;case 5:var a=t.return;try{ru(t)}catch(tH){_c(t,a,tH)}}}catch(tH){_c(t,t.return,tH)}if(t===e){Ql=null;break}var s=t.sibling;if(null!==s){s.return=t.return,Ql=s;break}Ql=t.return}}var ku,_u=Math.ceil,Eu=be.ReactCurrentDispatcher,Cu=be.ReactCurrentOwner,Iu=be.ReactCurrentBatchConfig,Su=0,Nu=null,Tu=null,Au=0,Ru=0,Du=_o(0),Ou=0,Pu=null,Lu=0,Mu=0,Fu=0,ju=null,Bu=null,Vu=0,zu=1/0,Uu=null,$u=!1,qu=null,Wu=null,Hu=!1,Gu=null,Ku=0,Yu=0,Xu=null,Qu=-1,Ju=0;function Zu(){return 6&Su?Yt():-1!==Qu?Qu:Qu=Yt()}function ec(e){return 1&e.mode?2&Su&&0!==Au?Au&-Au:null!==fa.transition?(0===Ju&&(Ju=fn()),Ju):0!==(e=yn)?e:e=void 0===(e=window.event)?16:Yn(e.type):1}function tc(e,t,n,r){if(50<Yu)throw Yu=0,Xu=null,Error(ie(185));gn(e,n,r),2&Su&&e===Nu||(e===Nu&&(!(2&Su)&&(Mu|=n),4===Ou&&ac(e,Au)),nc(e,r),1===n&&0===Su&&!(1&t.mode)&&(zu=Yt()+500,jo&&zo()))}function nc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,o=e.pendingLanes;0<o;){var a=31-on(o),s=1<<a,l=i[a];-1===l?s&n&&!(s&r)||(i[a]=hn(s,t)):l<=t&&(e.expiredLanes|=s),o&=~s}}(e,t);var r=dn(e,e===Nu?Au:0);if(0===r)null!==n&&Ht(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ht(n),1===t)0===e.tag?function(e){jo=!0,Vo(e)}(sc.bind(null,e)):Vo(sc.bind(null,e)),io((function(){!(6&Su)&&zo()})),n=null;else{switch(bn(r)){case 1:n=Qt;break;case 4:n=Jt;break;case 16:default:n=Zt;break;case 536870912:n=tn}n=Nc(n,rc.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function rc(e,t){if(Qu=-1,Ju=0,6&Su)throw Error(ie(327));var n=e.callbackNode;if(wc()&&e.callbackNode!==n)return null;var r=dn(e,e===Nu?Au:0);if(0===r)return null;if(30&r||r&e.expiredLanes||t)t=mc(e,r);else{t=r;var i=Su;Su|=2;var o=pc();for(Nu===e&&Au===t||(Uu=null,zu=Yt()+500,dc(e,t));;)try{vc();break}catch(VW){hc(e,VW)}xa(),Eu.current=o,Su=i,null!==Tu?t=0:(Nu=null,Au=0,t=Ou)}if(0!==t){if(2===t&&0!==(i=pn(e))&&(r=i,t=ic(e,i)),1===t)throw n=Pu,dc(e,0),ac(e,r),nc(e,Yt()),n;if(6===t)ac(e,r);else{if(i=e.current.alternate,!(30&r||function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!oi(o(),i))return!1}catch(a){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)||(t=mc(e,r),2===t&&(o=pn(e),0!==o&&(r=o,t=ic(e,o))),1!==t)))throw n=Pu,dc(e,0),ac(e,r),nc(e,Yt()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(ie(345));case 2:case 5:xc(e,Bu,Uu);break;case 3:if(ac(e,r),(130023424&r)===r&&10<(t=Vu+500-Yt())){if(0!==dn(e,0))break;if(((i=e.suspendedLanes)&r)!==r){Zu(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=to(xc.bind(null,e,Bu,Uu),t);break}xc(e,Bu,Uu);break;case 4:if(ac(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var a=31-on(r);o=1<<a,(a=t[a])>i&&(i=a),r&=~o}if(r=i,10<(r=(120>(r=Yt()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*_u(r/1960))-r)){e.timeoutHandle=to(xc.bind(null,e,Bu,Uu),r);break}xc(e,Bu,Uu);break;default:throw Error(ie(329))}}}return nc(e,Yt()),e.callbackNode===n?rc.bind(null,e):null}function ic(e,t){var n=ju;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=Bu,Bu=n,null!==t&&oc(t)),e}function oc(e){null===Bu?Bu=e:Bu.push.apply(Bu,e)}function ac(e,t){for(t&=~Fu,t&=~Mu,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-on(t),r=1<<n;e[n]=-1,t&=~r}}function sc(e){if(6&Su)throw Error(ie(327));wc();var t=dn(e,0);if(!(1&t))return nc(e,Yt()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pn(e);0!==r&&(t=r,n=ic(e,r))}if(1===n)throw n=Pu,dc(e,0),ac(e,t),nc(e,Yt()),n;if(6===n)throw Error(ie(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,Bu,Uu),nc(e,Yt()),null}function lc(e,t){var n=Su;Su|=1;try{return e(t)}finally{0===(Su=n)&&(zu=Yt()+500,jo&&zo())}}function uc(e){null!==Gu&&0===Gu.tag&&!(6&Su)&&wc();var t=Su;Su|=1;var n=Iu.transition,r=yn;try{if(Iu.transition=null,yn=1,e)return e()}finally{yn=r,Iu.transition=n,!(6&(Su=t))&&zo()}}function cc(){Ru=Du.current,Eo(Du)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,no(n)),null!==Tu)for(n=Tu.return;null!==n;){var r=n;switch(ea(r),r.tag){case 1:null!=(r=r.type.childContextTypes)&&Do();break;case 3:rs(),Eo(No),Eo(So),us();break;case 5:os(r);break;case 4:rs();break;case 13:case 19:Eo(as);break;case 10:wa(r.type._context);break;case 22:case 23:cc()}n=n.return}if(Nu=e,Tu=e=Dc(e.current,null),Au=Ru=t,Ou=0,Pu=null,Fu=Mu=Lu=0,Bu=ju=null,null!==Ca){for(t=0;t<Ca.length;t++)if(null!==(r=(n=Ca[t]).interleaved)){n.interleaved=null;var i=r.next,o=n.pending;if(null!==o){var a=o.next;o.next=i,r.next=a}n.pending=r}Ca=null}return e}function hc(e,t){for(;;){var n=Tu;try{if(xa(),cs.current=il,gs){for(var r=ps.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}gs=!1}if(hs=0,ms=fs=ps=null,vs=!1,ys=0,Cu.current=null,null===n||null===n.return){Ou=1,Pu=t,Tu=null;break}e:{var o=e,a=n.return,s=n,l=t;if(t=Au,s.flags|=32768,null!==l&&"object"==typeof l&&"function"==typeof l.then){var u=l,c=s,d=c.tag;if(!(1&c.mode||0!==d&&11!==d&&15!==d)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=ml(a);if(null!==p){p.flags&=-257,gl(p,a,s,0,t),1&p.mode&&fl(o,u,t),l=u;var f=(t=p).updateQueue;if(null===f){var m=new Set;m.add(l),t.updateQueue=m}else f.add(l);break e}if(!(1&t)){fl(o,u,t),fc();break e}l=Error(ie(426))}else if(ra&&1&s.mode){var g=ml(a);if(null!==g){!(65536&g.flags)&&(g.flags|=256),gl(g,a,s,0,t),pa(ll(l,s));break e}}o=l=ll(l,s),4!==Ou&&(Ou=2),null===ju?ju=[o]:ju.push(o),o=a;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,La(o,hl(0,l,t));break e;case 1:s=l;var v=o.type,y=o.stateNode;if(!(128&o.flags||"function"!=typeof v.getDerivedStateFromError&&(null===y||"function"!=typeof y.componentDidCatch||null!==Wu&&Wu.has(y)))){o.flags|=65536,t&=-t,o.lanes|=t,La(o,pl(o,s,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(tQ){t=tQ,Tu===n&&null!==n&&(Tu=n=n.return);continue}break}}function pc(){var e=Eu.current;return Eu.current=il,null===e?il:e}function fc(){0!==Ou&&3!==Ou&&2!==Ou||(Ou=4),null===Nu||!(268435455&Lu)&&!(268435455&Mu)||ac(Nu,Au)}function mc(e,t){var n=Su;Su|=2;var r=pc();for(Nu===e&&Au===t||(Uu=null,dc(e,t));;)try{gc();break}catch(AW){hc(e,AW)}if(xa(),Su=n,Eu.current=r,null!==Tu)throw Error(ie(261));return Nu=null,Au=0,Ou}function gc(){for(;null!==Tu;)yc(Tu)}function vc(){for(;null!==Tu&&!Gt();)yc(Tu)}function yc(e){var t=ku(e.alternate,e,Ru);e.memoizedProps=e.pendingProps,null===t?bc(e):Tu=t,Cu.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,32768&t.flags){if(null!==(n=Gl(n,t)))return n.flags&=32767,void(Tu=n);if(null===e)return Ou=6,void(Tu=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}else if(null!==(n=Hl(n,t,Ru)))return void(Tu=n);if(null!==(t=t.sibling))return void(Tu=t);Tu=t=e}while(null!==t);0===Ou&&(Ou=5)}function xc(e,t,n){var r=yn,i=Iu.transition;try{Iu.transition=null,yn=1,function(e,t,n,r){do{wc()}while(null!==Gu);if(6&Su)throw Error(ie(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(ie(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-on(n),o=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~o}}(e,o),e===Nu&&(Tu=Nu=null,Au=0),!(2064&n.subtreeFlags)&&!(2064&n.flags)||Hu||(Hu=!0,Nc(Zt,(function(){return wc(),null}))),o=!!(15990&n.flags),15990&n.subtreeFlags||o){o=Iu.transition,Iu.transition=null;var a=yn;yn=1;var s=Su;Su|=4,Cu.current=null,function(e,t){if(Ji=$n,di(e=ci())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(uH){n=null;break e}var a=0,s=-1,l=-1,u=0,c=0,d=e,h=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(s=a+i),d!==o||0!==r&&3!==d.nodeType||(l=a+r),3===d.nodeType&&(a+=d.nodeValue.length),null!==(p=d.firstChild);)h=d,d=p;for(;;){if(d===e)break t;if(h===n&&++u===i&&(s=a),h===o&&++c===r&&(l=a),null!==(p=d.nextSibling))break;h=(d=h).parentNode}d=p}n=-1===s||-1===l?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(Zi={focusedElem:e,selectionRange:n},$n=!1,Ql=t;null!==Ql;)if(e=(t=Ql).child,1028&t.subtreeFlags&&null!==e)e.return=t,Ql=e;else for(;null!==Ql;){t=Ql;try{var f=t.alternate;if(1024&t.flags)switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var m=f.memoizedProps,g=f.memoizedState,v=t.stateNode,y=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),g);v.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(ie(163))}}catch(uH){_c(t,t.return,uH)}if(null!==(e=t.sibling)){e.return=t.return,Ql=e;break}Ql=t.return}f=eu,eu=!1}(e,n),mu(n,e),hi(Zi),$n=!!Ji,Zi=Ji=null,e.current=n,vu(n),Kt(),Su=s,yn=a,Iu.transition=o}else e.current=n;if(Hu&&(Hu=!1,Gu=e,Ku=i),0===(o=e.pendingLanes)&&(Wu=null),function(e){if(rn&&"function"==typeof rn.onCommitFiberRoot)try{rn.onCommitFiberRoot(nn,e,void 0,!(128&~e.current.flags))}catch(t){}}(n.stateNode),nc(e,Yt()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if($u)throw $u=!1,e=qu,qu=null,e;!!(1&Ku)&&0!==e.tag&&wc(),1&(o=e.pendingLanes)?e===Xu?Yu++:(Yu=0,Xu=e):Yu=0,zo()}(e,t,n,r)}finally{Iu.transition=i,yn=r}return null}function wc(){if(null!==Gu){var e=bn(Ku),t=Iu.transition,n=yn;try{if(Iu.transition=null,yn=16>e?16:e,null===Gu)var r=!1;else{if(e=Gu,Gu=null,Ku=0,6&Su)throw Error(ie(331));var i=Su;for(Su|=4,Ql=e.current;null!==Ql;){var o=Ql,a=o.child;if(16&Ql.flags){var s=o.deletions;if(null!==s){for(var l=0;l<s.length;l++){var u=s[l];for(Ql=u;null!==Ql;){var c=Ql;switch(c.tag){case 0:case 11:case 15:tu(8,c,o)}var d=c.child;if(null!==d)d.return=c,Ql=d;else for(;null!==Ql;){var h=(c=Ql).sibling,p=c.return;if(iu(c),c===u){Ql=null;break}if(null!==h){h.return=p,Ql=h;break}Ql=p}}}var f=o.alternate;if(null!==f){var m=f.child;if(null!==m){f.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(null!==m)}}Ql=o}}if(2064&o.subtreeFlags&&null!==a)a.return=o,Ql=a;else e:for(;null!==Ql;){if(2048&(o=Ql).flags)switch(o.tag){case 0:case 11:case 15:tu(9,o,o.return)}var v=o.sibling;if(null!==v){v.return=o.return,Ql=v;break e}Ql=o.return}}var y=e.current;for(Ql=y;null!==Ql;){var b=(a=Ql).child;if(2064&a.subtreeFlags&&null!==b)b.return=a,Ql=b;else e:for(a=y;null!==Ql;){if(2048&(s=Ql).flags)try{switch(s.tag){case 0:case 11:case 15:nu(9,s)}}catch(tQ){_c(s,s.return,tQ)}if(s===a){Ql=null;break e}var x=s.sibling;if(null!==x){x.return=s.return,Ql=x;break e}Ql=s.return}}if(Su=i,zo(),rn&&"function"==typeof rn.onPostCommitFiberRoot)try{rn.onPostCommitFiberRoot(nn,e)}catch(tQ){}r=!0}return r}finally{yn=n,Iu.transition=t}}return!1}function kc(e,t,n){e=Oa(e,t=hl(0,t=ll(n,t),1),1),t=Zu(),null!==e&&(gn(e,1,t),nc(e,t))}function _c(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof r.componentDidCatch&&(null===Wu||!Wu.has(r))){t=Oa(t,e=pl(t,e=ll(n,e),1),1),e=Zu(),null!==t&&(gn(t,1,e),nc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Zu(),e.pingedLanes|=e.suspendedLanes&n,Nu===e&&(Au&n)===n&&(4===Ou||3===Ou&&(130023424&Au)===Au&&500>Yt()-Vu?dc(e,0):Fu|=n),nc(e,t)}function Cc(e,t){0===t&&(1&e.mode?(t=un,!(130023424&(un<<=1))&&(un=4194304)):t=1);var n=Zu();null!==(e=Na(e,t))&&(gn(e,t,n),nc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Cc(e,n)}function Sc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(ie(314))}null!==r&&r.delete(t),Cc(e,n)}function Nc(e,t){return Wt(e,t)}function Tc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ac(e,t,n,r){return new Tc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Ac(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,o){var a=2;if(r=e,"function"==typeof e)Rc(e)&&(a=1);else if("string"==typeof e)a=5;else e:switch(e){case ke:return Pc(n.children,i,o,t);case _e:a=8,i|=8;break;case Ee:return(e=Ac(12,n,t,2|i)).elementType=Ee,e.lanes=o,e;case Ne:return(e=Ac(13,n,t,i)).elementType=Ne,e.lanes=o,e;case Te:return(e=Ac(19,n,t,i)).elementType=Te,e.lanes=o,e;case De:return Lc(n,i,o,t);default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case Ce:a=10;break e;case Ie:a=9;break e;case Se:a=11;break e;case Ae:a=14;break e;case Re:a=16,r=null;break e}throw Error(ie(130,null==e?e:typeof e,""))}return(t=Ac(a,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Pc(e,t,n,r){return(e=Ac(7,e,r,t)).lanes=n,e}function Lc(e,t,n,r){return(e=Ac(22,e,r,t)).elementType=De,e.lanes=n,e.stateNode={isHidden:!1},e}function Mc(e,t,n){return(e=Ac(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Ac(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function jc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mn(0),this.expirationTimes=mn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mn(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Bc(e,t,n,r,i,o,a,s,l){return e=new jc(e,t,n,s,l),1===t?(t=1,!0===o&&(t|=8)):t=0,o=Ac(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(o),e}function Vc(e){if(!e)return Io;e:{if(Vt(e=e._reactInternals)!==e||1!==e.tag)throw Error(ie(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ro(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(ie(171))}if(1===e.tag){var n=e.type;if(Ro(n))return Po(e,n,t)}return t}function zc(e,t,n,r,i,o,a,s,l){return(e=Bc(n,r,!0,e,0,o,0,s,l)).context=Vc(null),n=e.current,(o=Da(r=Zu(),i=ec(n))).callback=null!=t?t:null,Oa(n,o,i),e.current.lanes=i,gn(e,i,r),nc(e,r),e}function Uc(e,t,n,r){var i=t.current,o=Zu(),a=ec(i);return n=Vc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Da(o,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,a))&&(tc(e,i,a,o),Pa(e,i,a)),a}function $c(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}ku=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||No.current)yl=!0;else{if(!(e.lanes&n||128&t.flags))return yl=!1,function(e,t,n){switch(t.tag){case 3:Nl(t),ha();break;case 5:is(t);break;case 1:Ro(t.type)&&Lo(t);break;case 4:ns(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Co(ga,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Co(as,1&as.current),t.flags|=128,null):n&t.child.childLanes?Ml(e,t,n):(Co(as,1&as.current),null!==(e=$l(e,t,n))?e.sibling:null);Co(as,1&as.current);break;case 19:if(r=!!(n&t.childLanes),128&e.flags){if(r)return zl(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Co(as,as.current),r)break;return null;case 22:case 23:return t.lanes=0,_l(e,t,n)}return $l(e,t,n)}(e,t,n);yl=!!(131072&e.flags)}else yl=!1,ra&&1048576&t.flags&&Jo(t,Wo,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ul(e,t),e=t.pendingProps;var i=Ao(t,So.current);_a(t,n),i=ks(null,t,r,e,i,n);var o=_s();return t.flags|=1,"object"==typeof i&&null!==i&&"function"==typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ro(r)?(o=!0,Lo(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=Va,t.stateNode=i,i._reactInternals=t,qa(t,r,e,n),t=Sl(null,t,r,!0,o,n)):(t.tag=0,ra&&o&&Zo(t),bl(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ul(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"==typeof e)return Rc(e)?1:0;if(null!=e){if((e=e.$$typeof)===Se)return 11;if(e===Ae)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Cl(null,t,r,e,n);break e;case 1:t=Il(null,t,r,e,n);break e;case 11:t=xl(null,t,r,e,n);break e;case 14:t=wl(null,t,r,ma(r.type,e),n);break e}throw Error(ie(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Cl(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Il(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Nl(t),null===e)throw Error(ie(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Ma(t,r,null,n);var a=t.memoizedState;if(r=a.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Tl(e,t,r,n,i=ll(Error(ie(423)),t));break e}if(r!==i){t=Tl(e,t,r,n,i=ll(Error(ie(424)),t));break e}for(na=so(t.stateNode.containerInfo.firstChild),ta=t,ra=!0,ia=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ha(),r===i){t=$l(e,t,n);break e}bl(e,t,r,n)}t=t.child}return t;case 5:return is(t),null===e&&la(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,a=i.children,eo(r,i)?a=null:null!==o&&eo(r,o)&&(t.flags|=32),El(e,t),bl(e,t,a,n),t.child;case 6:return null===e&&la(t),null;case 13:return Ml(e,t,n);case 4:return ns(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ya(t,null,r,n):bl(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xl(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return bl(e,t,t.pendingProps,n),t.child;case 8:case 12:return bl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,a=i.value,Co(ga,r._currentValue),r._currentValue=a,null!==o)if(oi(o.value,a)){if(o.children===i.children&&!No.current){t=$l(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){a=o.child;for(var l=s.firstContext;null!==l;){if(l.context===r){if(1===o.tag){(l=Da(-1,n&-n)).tag=2;var u=o.updateQueue;if(null!==u){var c=(u=u.shared).pending;null===c?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),ka(o.return,n,t),s.lanes|=n;break}l=l.next}}else if(10===o.tag)a=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(a=o.return))throw Error(ie(341));a.lanes|=n,null!==(s=a.alternate)&&(s.lanes|=n),ka(a,n,t),a=o.sibling}else a=o.child;if(null!==a)a.return=o;else for(a=o;null!==a;){if(a===t){a=null;break}if(null!==(o=a.sibling)){o.return=a.return,a=o;break}a=a.return}o=a}bl(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,_a(t,n),r=r(i=Ea(i)),t.flags|=1,bl(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),wl(e,t,r,i=ma(r.type,i),n);case 15:return kl(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Ul(e,t),t.tag=1,Ro(r)?(e=!0,Lo(t)):e=!1,_a(t,n),Ua(t,r,i),qa(t,r,i,n),Sl(null,t,r,!0,e,n);case 19:return zl(e,t,n);case 22:return _l(e,t,n)}throw Error(ie(156,t.tag))};var Hc="function"==typeof reportError?reportError:function(e){console.error(e)};function Gc(e){this._internalRoot=e}function Kc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Jc(e,t,n,r,i){var o=n._reactRootContainer;if(o){var a=o;if("function"==typeof i){var s=i;i=function(){var e=$c(a);s.call(e)}}Uc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"==typeof r){var o=r;r=function(){var e=$c(a);o.call(e)}}var a=zc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[po]=a.current,Vi(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"==typeof r){var s=r;r=function(){var e=$c(l);s.call(e)}}var l=Bc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[po]=l.current,Vi(8===e.nodeType?e.parentNode:e),uc((function(){Uc(t,l,n,r)})),l}(n,t,e,i,r);return $c(a)}Kc.prototype.render=Gc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(ie(409));Uc(e,t,null,null)},Kc.prototype.unmount=Gc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc((function(){Uc(null,e,null,null)})),t[po]=null}},Kc.prototype.unstable_scheduleHydration=function(e){if(e){var t=_n();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dn.length&&0!==t&&t<Dn[n].priority;n++);Dn.splice(n,0,e),0===n&&Mn(e)}},xn=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=cn(t.pendingLanes);0!==n&&(vn(t,1|n),nc(t,Yt()),!(6&Su)&&(zu=Yt()+500,zo()))}break;case 13:uc((function(){var t=Na(e,1);if(null!==t){var n=Zu();tc(t,e,1,n)}})),Wc(e,1)}},wn=function(e){if(13===e.tag){var t=Na(e,134217728);null!==t&&tc(t,e,134217728,Zu()),Wc(e,134217728)}},kn=function(e){if(13===e.tag){var t=ec(e),n=Na(e,t);null!==n&&tc(n,e,t,Zu()),Wc(e,t)}},_n=function(){return yn},En=function(e,t){var n=yn;try{return yn=e,t()}finally{yn=n}},xt=function(e,t,n){switch(t){case"input":if(Qe(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xo(r);if(!i)throw Error(ie(90));He(r),Qe(r,i)}}}break;case"textarea":it(e,n);break;case"select":null!=(t=n.value)&&tt(e,!!n.multiple,t,!1)}},It=lc,St=uc;var Zc={usingClientEntryPoint:!1,Events:[yo,bo,xo,Et,Ct,lc]},ed={findFiberByHostInstance:vo,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},td={bundleType:ed.bundleType,version:ed.version,rendererPackageName:ed.rendererPackageName,rendererConfig:ed.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:be.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=$t(e))?null:e.stateNode},findFiberByHostInstance:ed.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nd.isDisabled&&nd.supportsFiber)try{nn=nd.inject(td),rn=nd}catch(PW){}}J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zc,J.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(ie(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:we,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},J.createRoot=function(e,t){if(!Yc(e))throw Error(ie(299));var n=!1,r="",i=Hc;return null!=t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=Bc(e,1,!1,null,0,n,0,r,i),e[po]=t.current,Vi(8===e.nodeType?e.parentNode:e),new Gc(t)},J.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(ie(188));throw e=Object.keys(e).join(","),Error(ie(268,e))}return e=null===(e=$t(t))?null:e.stateNode},J.flushSync=function(e){return uc(e)},J.hydrate=function(e,t,n){if(!Xc(t))throw Error(ie(200));return Jc(null,e,t,!0,n)},J.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(ie(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",a=Hc;if(null!=n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(a=n.onRecoverableError)),t=zc(t,null,e,1,null!=n?n:null,i,0,o,a),e[po]=t.current,Vi(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Kc(t)},J.render=function(e,t,n){if(!Xc(t))throw Error(ie(200));return Jc(null,e,t,!1,n)},J.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(ie(40));return!!e._reactRootContainer&&(uc((function(){Jc(null,null,e,!1,(function(){e._reactRootContainer=null,e[po]=null}))})),!0)},J.unstable_batchedUpdates=lc,J.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(ie(200));if(null==e||void 0===e._reactInternals)throw Error(ie(38));return Jc(e,t,n,!1,r)},J.version="18.2.0-next-9e3b772b8-20220608",function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),Q.exports=J;var rd=Q.exports;const id=r(rd);var od,ad=rd;function sd(e,t){return sd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},sd(e,t)}function ld(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,sd(e,t)}od=ad.createRoot,ad.hydrateRoot;var ud={exports:{}};function cd(){}function dd(){}dd.resetWarningCache=cd,ud.exports=function(){function e(e,t,n,r,i,o){if("SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"!==o){var a=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw a.name="Invariant Violation",a}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:dd,resetWarningCache:cd};return n.PropTypes=n,n}();const hd=r(ud.exports);function pd(){return pd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},pd.apply(this,arguments)}function fd(e){return"/"===e.charAt(0)}function md(e,t){for(var n=t,r=n+1,i=e.length;r<i;n+=1,r+=1)e[n]=e[r];e.pop()}function gd(e){return e.valueOf?e.valueOf():Object.prototype.valueOf.call(e)}function vd(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(Array.isArray(e))return Array.isArray(t)&&e.length===t.length&&e.every((function(e,n){return vd(e,t[n])}));if("object"==typeof e||"object"==typeof t){var n=gd(e),r=gd(t);return n!==e||r!==t?vd(n,r):Object.keys(Object.assign({},e,t)).every((function(n){return vd(e[n],t[n])}))}return!1}var yd="Invariant failed";function bd(e,t){if(!e)throw new Error(yd)}function xd(e){return"/"===e.charAt(0)?e:"/"+e}function wd(e,t){return function(e,t){return 0===e.toLowerCase().indexOf(t.toLowerCase())&&-1!=="/?#".indexOf(e.charAt(t.length))}(e,t)?e.substr(t.length):e}function kd(e){return"/"===e.charAt(e.length-1)?e.slice(0,-1):e}function _d(e){var t=e.pathname,n=e.search,r=e.hash,i=t||"/";return n&&"?"!==n&&(i+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(i+="#"===r.charAt(0)?r:"#"+r),i}function Ed(e,t,n,r){var i;"string"==typeof e?(i=function(e){var t=e||"/",n="",r="",i=t.indexOf("#");-1!==i&&(r=t.substr(i),t=t.substr(0,i));var o=t.indexOf("?");return-1!==o&&(n=t.substr(o),t=t.substr(0,o)),{pathname:t,search:"?"===n?"":n,hash:"#"===r?"":r}}(e),i.state=t):(void 0===(i=pd({},e)).pathname&&(i.pathname=""),i.search?"?"!==i.search.charAt(0)&&(i.search="?"+i.search):i.search="",i.hash?"#"!==i.hash.charAt(0)&&(i.hash="#"+i.hash):i.hash="",void 0!==t&&void 0===i.state&&(i.state=t));try{i.pathname=decodeURI(i.pathname)}catch(AW){throw AW instanceof URIError?new URIError('Pathname "'+i.pathname+'" could not be decoded. This is likely caused by an invalid percent-encoding.'):AW}return n&&(i.key=n),r?i.pathname?"/"!==i.pathname.charAt(0)&&(i.pathname=function(e,t){void 0===t&&(t="");var n,r=e&&e.split("/")||[],i=t&&t.split("/")||[],o=e&&fd(e),a=t&&fd(t),s=o||a;if(e&&fd(e)?i=r:r.length&&(i.pop(),i=i.concat(r)),!i.length)return"/";if(i.length){var l=i[i.length-1];n="."===l||".."===l||""===l}else n=!1;for(var u=0,c=i.length;c>=0;c--){var d=i[c];"."===d?md(i,c):".."===d?(md(i,c),u++):u&&(md(i,c),u--)}if(!s)for(;u--;u)i.unshift("..");!s||""===i[0]||i[0]&&fd(i[0])||i.unshift("");var h=i.join("/");return n&&"/"!==h.substr(-1)&&(h+="/"),h}(i.pathname,r.pathname)):i.pathname=r.pathname:i.pathname||(i.pathname="/"),i}function Cd(e,t){return e.pathname===t.pathname&&e.search===t.search&&e.hash===t.hash&&e.key===t.key&&vd(e.state,t.state)}function Id(){var e=null,t=[];return{setPrompt:function(t){return e=t,function(){e===t&&(e=null)}},confirmTransitionTo:function(t,n,r,i){if(null!=e){var o="function"==typeof e?e(t,n):e;"string"==typeof o?"function"==typeof r?r(o,i):i(!0):i(!1!==o)}else i(!0)},appendListener:function(e){var n=!0;function r(){n&&e.apply(void 0,arguments)}return t.push(r),function(){n=!1,t=t.filter((function(e){return e!==r}))}},notifyListeners:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.forEach((function(e){return e.apply(void 0,n)}))}}}var Sd=!("undefined"==typeof window||!window.document||!window.document.createElement);function Nd(e,t){t(window.confirm(e))}var Td="popstate",Ad="hashchange";function Rd(){try{return window.history.state||{}}catch(AW){return{}}}function Dd(e){void 0===e&&(e={}),Sd||bd(!1);var t=window.history,n=function(){var e=window.navigator.userAgent;return(-1===e.indexOf("Android 2.")&&-1===e.indexOf("Android 4.0")||-1===e.indexOf("Mobile Safari")||-1!==e.indexOf("Chrome")||-1!==e.indexOf("Windows Phone"))&&window.history&&"pushState"in window.history}(),r=!(-1===window.navigator.userAgent.indexOf("Trident")),i=e,o=i.forceRefresh,a=void 0!==o&&o,s=i.getUserConfirmation,l=void 0===s?Nd:s,u=i.keyLength,c=void 0===u?6:u,d=e.basename?kd(xd(e.basename)):"";function h(e){var t=e||{},n=t.key,r=t.state,i=window.location,o=i.pathname+i.search+i.hash;return d&&(o=wd(o,d)),Ed(o,r,n)}function p(){return Math.random().toString(36).substr(2,c)}var f=Id();function m(e){pd(S,e),S.length=t.length,f.notifyListeners(S.location,S.action)}function g(e){(function(e){return void 0===e.state&&-1===navigator.userAgent.indexOf("CriOS")})(e)||b(h(e.state))}function v(){b(h(Rd()))}var y=!1;function b(e){y?(y=!1,m()):f.confirmTransitionTo(e,"POP",l,(function(t){t?m({action:"POP",location:e}):function(e){var t=S.location,n=w.indexOf(t.key);-1===n&&(n=0);var r=w.indexOf(e.key);-1===r&&(r=0);var i=n-r;i&&(y=!0,_(i))}(e)}))}var x=h(Rd()),w=[x.key];function k(e){return d+_d(e)}function _(e){t.go(e)}var E=0;function C(e){1===(E+=e)&&1===e?(window.addEventListener(Td,g),r&&window.addEventListener(Ad,v)):0===E&&(window.removeEventListener(Td,g),r&&window.removeEventListener(Ad,v))}var I=!1,S={length:t.length,action:"POP",location:x,createHref:k,push:function(e,r){var i="PUSH",o=Ed(e,r,p(),S.location);f.confirmTransitionTo(o,i,l,(function(e){if(e){var r=k(o),s=o.key,l=o.state;if(n)if(t.pushState({key:s,state:l},null,r),a)window.location.href=r;else{var u=w.indexOf(S.location.key),c=w.slice(0,u+1);c.push(o.key),w=c,m({action:i,location:o})}else window.location.href=r}}))},replace:function(e,r){var i="REPLACE",o=Ed(e,r,p(),S.location);f.confirmTransitionTo(o,i,l,(function(e){if(e){var r=k(o),s=o.key,l=o.state;if(n)if(t.replaceState({key:s,state:l},null,r),a)window.location.replace(r);else{var u=w.indexOf(S.location.key);-1!==u&&(w[u]=o.key),m({action:i,location:o})}else window.location.replace(r)}}))},go:_,goBack:function(){_(-1)},goForward:function(){_(1)},block:function(e){void 0===e&&(e=!1);var t=f.setPrompt(e);return I||(C(1),I=!0),function(){return I&&(I=!1,C(-1)),t()}},listen:function(e){var t=f.appendListener(e);return C(1),function(){C(-1),t()}}};return S}var Od={exports:{}},Pd=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)};Od.exports=qd,Od.exports.parse=Md,Od.exports.compile=function(e,t){return jd(Md(e,t),t)},Od.exports.tokensToFunction=jd,Od.exports.tokensToRegExp=$d;var Ld=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function Md(e,t){for(var n,r=[],i=0,o=0,a="",s=t&&t.delimiter||"/";null!=(n=Ld.exec(e));){var l=n[0],u=n[1],c=n.index;if(a+=e.slice(o,c),o=c+l.length,u)a+=u[1];else{var d=e[o],h=n[2],p=n[3],f=n[4],m=n[5],g=n[6],v=n[7];a&&(r.push(a),a="");var y=null!=h&&null!=d&&d!==h,b="+"===g||"*"===g,x="?"===g||"*"===g,w=n[2]||s,k=f||m;r.push({name:p||i++,prefix:h||"",delimiter:w,optional:x,repeat:b,partial:y,asterisk:!!v,pattern:k?Vd(k):v?".*":"[^"+Bd(w)+"]+?"})}}return o<e.length&&(a+=e.substr(o)),a&&r.push(a),r}function Fd(e){return encodeURI(e).replace(/[\/?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()}))}function jd(e,t){for(var n=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(n[r]=new RegExp("^(?:"+e[r].pattern+")$",Ud(t)));return function(t,r){for(var i="",o=t||{},a=(r||{}).pretty?Fd:encodeURIComponent,s=0;s<e.length;s++){var l=e[s];if("string"!=typeof l){var u,c=o[l.name];if(null==c){if(l.optional){l.partial&&(i+=l.prefix);continue}throw new TypeError('Expected "'+l.name+'" to be defined')}if(Pd(c)){if(!l.repeat)throw new TypeError('Expected "'+l.name+'" to not repeat, but received `'+JSON.stringify(c)+"`");if(0===c.length){if(l.optional)continue;throw new TypeError('Expected "'+l.name+'" to not be empty')}for(var d=0;d<c.length;d++){if(u=a(c[d]),!n[s].test(u))throw new TypeError('Expected all "'+l.name+'" to match "'+l.pattern+'", but received `'+JSON.stringify(u)+"`");i+=(0===d?l.prefix:l.delimiter)+u}}else{if(u=l.asterisk?encodeURI(c).replace(/[?#]/g,(function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})):a(c),!n[s].test(u))throw new TypeError('Expected "'+l.name+'" to match "'+l.pattern+'", but received "'+u+'"');i+=l.prefix+u}}else i+=l}return i}}function Bd(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function Vd(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function zd(e,t){return e.keys=t,e}function Ud(e){return e&&e.sensitive?"":"i"}function $d(e,t,n){Pd(t)||(n=t||n,t=[]);for(var r=(n=n||{}).strict,i=!1!==n.end,o="",a=0;a<e.length;a++){var s=e[a];if("string"==typeof s)o+=Bd(s);else{var l=Bd(s.prefix),u="(?:"+s.pattern+")";t.push(s),s.repeat&&(u+="(?:"+l+u+")*"),o+=u=s.optional?s.partial?l+"("+u+")?":"(?:"+l+"("+u+"))?":l+"("+u+")"}}var c=Bd(n.delimiter||"/"),d=o.slice(-c.length)===c;return r||(o=(d?o.slice(0,-c.length):o)+"(?:"+c+"(?=$))?"),o+=i?"$":r&&d?"":"(?="+c+"|$)",zd(new RegExp("^"+o,Ud(n)),t)}function qd(e,t,n){return Pd(t)||(n=t||n,t=[]),n=n||{},e instanceof RegExp?function(e,t){var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return zd(e,t)}(e,t):Pd(e)?function(e,t,n){for(var r=[],i=0;i<e.length;i++)r.push(qd(e[i],t,n).source);return zd(new RegExp("(?:"+r.join("|")+")",Ud(n)),t)}(e,t,n):function(e,t,n){return $d(Md(e,n),t,n)}(e,t,n)}const Wd=r(Od.exports);var Hd={},Gd="function"==typeof Symbol&&Symbol.for,Kd=Gd?Symbol.for("react.element"):60103,Yd=Gd?Symbol.for("react.portal"):60106,Xd=Gd?Symbol.for("react.fragment"):60107,Qd=Gd?Symbol.for("react.strict_mode"):60108,Jd=Gd?Symbol.for("react.profiler"):60114,Zd=Gd?Symbol.for("react.provider"):60109,eh=Gd?Symbol.for("react.context"):60110,th=Gd?Symbol.for("react.async_mode"):60111,nh=Gd?Symbol.for("react.concurrent_mode"):60111,rh=Gd?Symbol.for("react.forward_ref"):60112,ih=Gd?Symbol.for("react.suspense"):60113,oh=Gd?Symbol.for("react.suspense_list"):60120,ah=Gd?Symbol.for("react.memo"):60115,sh=Gd?Symbol.for("react.lazy"):60116,lh=Gd?Symbol.for("react.block"):60121,uh=Gd?Symbol.for("react.fundamental"):60117,ch=Gd?Symbol.for("react.responder"):60118,dh=Gd?Symbol.for("react.scope"):60119;
/** @license React v16.13.1
             * react-is.production.min.js
             *
             * Copyright (c) Facebook, Inc. and its affiliates.
             *
             * This source code is licensed under the MIT license found in the
             * LICENSE file in the root directory of this source tree.
             */function hh(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case Kd:switch(e=e.type){case th:case nh:case Xd:case Jd:case Qd:case ih:return e;default:switch(e=e&&e.$$typeof){case eh:case rh:case sh:case ah:case Zd:return e;default:return t}}case Yd:return t}}}function ph(e){return hh(e)===nh}function fh(e,t){if(null==e)return{};var n,r,i={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}Hd.AsyncMode=th,Hd.ConcurrentMode=nh,Hd.ContextConsumer=eh,Hd.ContextProvider=Zd,Hd.Element=Kd,Hd.ForwardRef=rh,Hd.Fragment=Xd,Hd.Lazy=sh,Hd.Memo=ah,Hd.Portal=Yd,Hd.Profiler=Jd,Hd.StrictMode=Qd,Hd.Suspense=ih,Hd.isAsyncMode=function(e){return ph(e)||hh(e)===th},Hd.isConcurrentMode=ph,Hd.isContextConsumer=function(e){return hh(e)===eh},Hd.isContextProvider=function(e){return hh(e)===Zd},Hd.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===Kd},Hd.isForwardRef=function(e){return hh(e)===rh},Hd.isFragment=function(e){return hh(e)===Xd},Hd.isLazy=function(e){return hh(e)===sh},Hd.isMemo=function(e){return hh(e)===ah},Hd.isPortal=function(e){return hh(e)===Yd},Hd.isProfiler=function(e){return hh(e)===Jd},Hd.isStrictMode=function(e){return hh(e)===Qd},Hd.isSuspense=function(e){return hh(e)===ih},Hd.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===Xd||e===nh||e===Jd||e===Qd||e===ih||e===oh||"object"==typeof e&&null!==e&&(e.$$typeof===sh||e.$$typeof===ah||e.$$typeof===Zd||e.$$typeof===eh||e.$$typeof===rh||e.$$typeof===uh||e.$$typeof===ch||e.$$typeof===dh||e.$$typeof===lh)},Hd.typeOf=hh;var mh={exports:{}},gh={},vh="function"==typeof Symbol&&Symbol.for,yh=vh?Symbol.for("react.element"):60103,bh=vh?Symbol.for("react.portal"):60106,xh=vh?Symbol.for("react.fragment"):60107,wh=vh?Symbol.for("react.strict_mode"):60108,kh=vh?Symbol.for("react.profiler"):60114,_h=vh?Symbol.for("react.provider"):60109,Eh=vh?Symbol.for("react.context"):60110,Ch=vh?Symbol.for("react.async_mode"):60111,Ih=vh?Symbol.for("react.concurrent_mode"):60111,Sh=vh?Symbol.for("react.forward_ref"):60112,Nh=vh?Symbol.for("react.suspense"):60113,Th=vh?Symbol.for("react.suspense_list"):60120,Ah=vh?Symbol.for("react.memo"):60115,Rh=vh?Symbol.for("react.lazy"):60116,Dh=vh?Symbol.for("react.block"):60121,Oh=vh?Symbol.for("react.fundamental"):60117,Ph=vh?Symbol.for("react.responder"):60118,Lh=vh?Symbol.for("react.scope"):60119;function Mh(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case yh:switch(e=e.type){case Ch:case Ih:case xh:case kh:case wh:case Nh:return e;default:switch(e=e&&e.$$typeof){case Eh:case Sh:case Rh:case Ah:case _h:return e;default:return t}}case bh:return t}}}function Fh(e){return Mh(e)===Ih}gh.AsyncMode=Ch,gh.ConcurrentMode=Ih,gh.ContextConsumer=Eh,gh.ContextProvider=_h,gh.Element=yh,gh.ForwardRef=Sh,gh.Fragment=xh,gh.Lazy=Rh,gh.Memo=Ah,gh.Portal=bh,gh.Profiler=kh,gh.StrictMode=wh,gh.Suspense=Nh,gh.isAsyncMode=function(e){return Fh(e)||Mh(e)===Ch},gh.isConcurrentMode=Fh,gh.isContextConsumer=function(e){return Mh(e)===Eh},gh.isContextProvider=function(e){return Mh(e)===_h},gh.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===yh},gh.isForwardRef=function(e){return Mh(e)===Sh},gh.isFragment=function(e){return Mh(e)===xh},gh.isLazy=function(e){return Mh(e)===Rh},gh.isMemo=function(e){return Mh(e)===Ah},gh.isPortal=function(e){return Mh(e)===bh},gh.isProfiler=function(e){return Mh(e)===kh},gh.isStrictMode=function(e){return Mh(e)===wh},gh.isSuspense=function(e){return Mh(e)===Nh},gh.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===xh||e===Ih||e===kh||e===wh||e===Nh||e===Th||"object"==typeof e&&null!==e&&(e.$$typeof===Rh||e.$$typeof===Ah||e.$$typeof===_h||e.$$typeof===Eh||e.$$typeof===Sh||e.$$typeof===Oh||e.$$typeof===Ph||e.$$typeof===Lh||e.$$typeof===Dh)},gh.typeOf=Mh,mh.exports=gh;var jh=mh.exports,Bh={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},Vh={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},zh={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Uh={};function $h(e){return jh.isMemo(e)?zh:Uh[e.$$typeof]||Bh}Uh[jh.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},Uh[jh.Memo]=zh;var qh=Object.defineProperty,Wh=Object.getOwnPropertyNames,Hh=Object.getOwnPropertySymbols,Gh=Object.getOwnPropertyDescriptor,Kh=Object.getPrototypeOf,Yh=Object.prototype,Xh=function e(t,n,r){if("string"!=typeof n){if(Yh){var i=Kh(n);i&&i!==Yh&&e(t,i,r)}var o=Wh(n);Hh&&(o=o.concat(Hh(n)));for(var a=$h(t),s=$h(n),l=0;l<o.length;++l){var u=o[l];if(!(Vh[u]||r&&r[u]||s&&s[u]||a&&a[u])){var c=Gh(n,u);try{qh(t,u,c)}catch(AW){}}}}return t};const Qh=r(Xh);var Jh=1073741823,Zh="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},ep=U.createContext||function(e,t){var n,r,i,o="__create-react-context-"+(Zh[i="__global_unique_id__"]=(Zh[i]||0)+1)+"__",a=function(e){function n(){for(var t,n,r,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))||this).emitter=(n=t.props.value,r=[],{on:function(e){r.push(e)},off:function(e){r=r.filter((function(t){return t!==e}))},get:function(){return n},set:function(e,t){n=e,r.forEach((function(e){return e(n,t)}))}}),t}ld(n,e);var r=n.prototype;return r.getChildContext=function(){var e;return(e={})[o]=this.emitter,e},r.componentWillReceiveProps=function(e){if(this.props.value!==e.value){var n,r=this.props.value,i=e.value;!function(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}(r,i)?(n="function"==typeof t?t(r,i):Jh,0!=(n|=0)&&this.emitter.set(e.value,n)):n=0}},r.render=function(){return this.props.children},n}(U.Component);a.childContextTypes=((n={})[o]=hd.object.isRequired,n);var s=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))||this).observedBits=void 0,e.state={value:e.getValue()},e.onUpdate=function(t,n){e.observedBits&n&&e.setState({value:e.getValue()})},e}ld(n,t);var r=n.prototype;return r.componentWillReceiveProps=function(e){var t=e.observedBits;this.observedBits=null==t?Jh:t},r.componentDidMount=function(){this.context[o]&&this.context[o].on(this.onUpdate);var e=this.props.observedBits;this.observedBits=null==e?Jh:e},r.componentWillUnmount=function(){this.context[o]&&this.context[o].off(this.onUpdate)},r.getValue=function(){return this.context[o]?this.context[o].get():e},r.render=function(){return(e=this.props.children,Array.isArray(e)?e[0]:e)(this.state.value);var e},n}(U.Component);return s.contextTypes=((r={})[o]=hd.object,r),{Provider:a,Consumer:s}},tp=function(e){var t=ep();return t.displayName=e,t},np=tp("Router-History"),rp=tp("Router"),ip=function(e){function t(t){var n;return(n=e.call(this,t)||this).state={location:t.history.location},n._isMounted=!1,n._pendingLocation=null,t.staticContext||(n.unlisten=t.history.listen((function(e){n._pendingLocation=e}))),n}ld(t,e),t.computeRootMatch=function(e){return{path:"/",url:"/",params:{},isExact:"/"===e}};var n=t.prototype;return n.componentDidMount=function(){var e=this;this._isMounted=!0,this.unlisten&&this.unlisten(),this.props.staticContext||(this.unlisten=this.props.history.listen((function(t){e._isMounted&&e.setState({location:t})}))),this._pendingLocation&&this.setState({location:this._pendingLocation})},n.componentWillUnmount=function(){this.unlisten&&(this.unlisten(),this._isMounted=!1,this._pendingLocation=null)},n.render=function(){return U.createElement(rp.Provider,{value:{history:this.props.history,location:this.state.location,match:t.computeRootMatch(this.state.location.pathname),staticContext:this.props.staticContext}},U.createElement(np.Provider,{children:this.props.children||null,value:this.props.history}))},t}(U.Component);U.Component;var op=function(e){function t(){return e.apply(this,arguments)||this}ld(t,e);var n=t.prototype;return n.componentDidMount=function(){this.props.onMount&&this.props.onMount.call(this,this)},n.componentDidUpdate=function(e){this.props.onUpdate&&this.props.onUpdate.call(this,this,e)},n.componentWillUnmount=function(){this.props.onUnmount&&this.props.onUnmount.call(this,this)},n.render=function(){return null},t}(U.Component),ap={},sp=1e4,lp=0;function up(e,t){return void 0===e&&(e="/"),void 0===t&&(t={}),"/"===e?e:function(e){if(ap[e])return ap[e];var t=Wd.compile(e);return lp<sp&&(ap[e]=t,lp++),t}(e)(t,{pretty:!0})}function cp(e){var t=e.computedMatch,n=e.to,r=e.push,i=void 0!==r&&r;return U.createElement(rp.Consumer,null,(function(e){e||bd(!1);var r=e.history,o=e.staticContext,a=i?r.push:r.replace,s=Ed(t?"string"==typeof n?up(n,t.params):pd({},n,{pathname:up(n.pathname,t.params)}):n);return o?(a(s),null):U.createElement(op,{onMount:function(){a(s)},onUpdate:function(e,t){var n=Ed(t.to);Cd(n,pd({},s,{key:n.key}))||a(s)},to:n})}))}var dp={},hp=1e4,pp=0;function fp(e,t){void 0===t&&(t={}),("string"==typeof t||Array.isArray(t))&&(t={path:t});var n=t,r=n.path,i=n.exact,o=void 0!==i&&i,a=n.strict,s=void 0!==a&&a,l=n.sensitive,u=void 0!==l&&l;return[].concat(r).reduce((function(t,n){if(!n&&""!==n)return null;if(t)return t;var r=function(e,t){var n=""+t.end+t.strict+t.sensitive,r=dp[n]||(dp[n]={});if(r[e])return r[e];var i=[],o={regexp:Wd(e,i,t),keys:i};return pp<hp&&(r[e]=o,pp++),o}(n,{end:o,strict:s,sensitive:u}),i=r.regexp,a=r.keys,l=i.exec(e);if(!l)return null;var c=l[0],d=l.slice(1),h=e===c;return o&&!h?null:{path:n,url:"/"===n&&""===c?"/":c,isExact:h,params:a.reduce((function(e,t,n){return e[t.name]=d[n],e}),{})}}),null)}var mp=function(e){function t(){return e.apply(this,arguments)||this}return ld(t,e),t.prototype.render=function(){var e=this;return U.createElement(rp.Consumer,null,(function(t){t||bd(!1);var n=e.props.location||t.location,r=pd({},t,{location:n,match:e.props.computedMatch?e.props.computedMatch:e.props.path?fp(n.pathname,e.props):t.match}),i=e.props,o=i.children,a=i.component,s=i.render;return Array.isArray(o)&&function(e){return 0===U.Children.count(e)}(o)&&(o=null),U.createElement(rp.Provider,{value:r},r.match?o?"function"==typeof o?o(r):o:a?U.createElement(a,r):s?s(r):null:"function"==typeof o?o(r):null)}))},t}(U.Component);U.Component,U.Component;var gp=U.useContext;function vp(){return gp(np)}function yp(){var e=gp(rp).match;return e?e.params:{}}U.Component,U.Component;var bp=function(e,t){return"function"==typeof e?e(t):e},xp=function(e,t){return"string"==typeof e?Ed(e,null,null,t):e},wp=function(e){return e},kp=U.forwardRef;void 0===kp&&(kp=wp);var _p=kp((function(e,t){var n=e.innerRef,r=e.navigate,i=e.onClick,o=fh(e,["innerRef","navigate","onClick"]),a=o.target,s=pd({},o,{onClick:function(e){try{i&&i(e)}catch(t){throw e.preventDefault(),t}e.defaultPrevented||0!==e.button||a&&"_self"!==a||function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)||(e.preventDefault(),r())}});return s.ref=wp!==kp&&t||n,U.createElement("a",s)})),Ep=kp((function(e,t){var n=e.component,r=void 0===n?_p:n,i=e.replace,o=e.to,a=e.innerRef,s=fh(e,["component","replace","to","innerRef"]);return U.createElement(rp.Consumer,null,(function(e){e||bd(!1);var n=e.history,l=xp(bp(o,e.location),e.location),u=l?n.createHref(l):"",c=pd({},s,{href:u,navigate:function(){var t=bp(o,e.location),r=_d(e.location)===_d(xp(t));(i||r?n.replace:n.push)(t)}});return wp!==kp?c.ref=t||a:c.innerRef=a,U.createElement(r,c)}))})),Cp=function(e){return e},Ip=U.forwardRef;void 0===Ip&&(Ip=Cp),Ip((function(e,t){var n=e["aria-current"],r=void 0===n?"page":n,i=e.activeClassName,o=void 0===i?"active":i,a=e.activeStyle,s=e.className,l=e.exact,u=e.isActive,c=e.location,d=e.sensitive,h=e.strict,p=e.style,f=e.to,m=e.innerRef,g=fh(e,["aria-current","activeClassName","activeStyle","className","exact","isActive","location","sensitive","strict","style","to","innerRef"]);return U.createElement(rp.Consumer,null,(function(e){e||bd(!1);var n=c||e.location,i=xp(bp(f,n),n),v=i.pathname,y=v&&v.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1"),b=y?fp(n.pathname,{path:y,exact:l,sensitive:d,strict:h}):null,x=!!(u?u(b,n):b),w="function"==typeof s?s(x):s,k="function"==typeof p?p(x):p;x&&(w=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((function(e){return e})).join(" ")}(w,o),k=pd({},k,a));var _=pd({"aria-current":x&&r||null,className:w,style:k,to:i},g);return Cp!==Ip?_.ref=t||m:_.innerRef=m,U.createElement(Ep,_)}))}));const Sp=function(e,t,n){let r=Promise.resolve();return r.then((()=>e())).catch((e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}))},Np={allRenderFn:!1,cmpDidLoad:!0,cmpDidUnload:!1,cmpDidUpdate:!0,cmpDidRender:!0,cmpWillLoad:!0,cmpWillUpdate:!0,cmpWillRender:!0,connectedCallback:!0,disconnectedCallback:!0,element:!0,event:!0,hasRenderFn:!0,lifecycle:!0,hostListener:!0,hostListenerTargetWindow:!0,hostListenerTargetDocument:!0,hostListenerTargetBody:!0,hostListenerTargetParent:!1,hostListenerTarget:!0,member:!0,method:!0,mode:!0,observeAttribute:!0,prop:!0,propMutable:!0,reflect:!0,scoped:!0,shadowDom:!0,slot:!0,cssAnnotations:!0,state:!0,style:!0,formAssociated:!1,svg:!0,updatable:!0,vdomAttribute:!0,vdomXlink:!0,vdomClass:!0,vdomFunctional:!0,vdomKey:!0,vdomListener:!0,vdomRef:!0,vdomPropOrAttr:!0,vdomRender:!0,vdomStyle:!0,vdomText:!0,watchCallback:!0,taskQueue:!0,hotModuleReplacement:!1,isDebug:!1,isDev:!1,isTesting:!1,hydrateServerSide:!1,hydrateClientSide:!1,lifecycleDOMEvents:!1,lazyLoad:!1,profile:!1,slotRelocation:!0,appendChildSlotFix:!1,cloneNodeFix:!1,hydratedAttribute:!1,hydratedClass:!0,scriptDataOpts:!1,scopedSlotTextContentFix:!1,shadowDomShim:!1,slotChildNodesFix:!1,invisiblePrehydration:!0,propBoolean:!0,propNumber:!0,propString:!0,constructableCSS:!0,cmpShouldUpdate:!0,devTools:!1,shadowDelegatesFocus:!0,initializeNextTick:!1,asyncLoading:!1,asyncQueue:!1,transformTagName:!1,attachStyles:!0,experimentalSlotFixes:!1};let Tp,Ap,Rp,Dp=!1,Op=!1,Pp=!1,Lp=!1,Mp=null,Fp=!1;const jp=!0,Bp=e=>{const t=new URL(e,Yf.$resourcesUrl$);return t.origin!==Hf.location.origin?t.href:t.pathname},Vp="http://www.w3.org/1999/xlink",zp={},Up=e=>"object"==(e=typeof e)||"function"===e,$p=(e,t,...n)=>{let r=null,i=null,o=null,a=!1,s=!1;const l=[],u=t=>{for(let n=0;n<t.length;n++)r=t[n],Array.isArray(r)?u(r):null!=r&&"boolean"!=typeof r&&((a="function"!=typeof e&&!Up(r))&&(r=String(r)),a&&s?l[l.length-1].$text$+=r:l.push(a?qp(null,r):r),s=a)};if(u(n),t){t.key&&(i=t.key),t.name&&(o=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter((t=>e[t])).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,l,Hp);const c=qp(e,null);return c.$attrs$=t,l.length>0&&(c.$children$=l),c.$key$=i,c.$name$=o,c},qp=(e,t)=>{const n={$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null};return n},Wp={},Hp={forEach:(e,t)=>e.map(Gp).forEach(t),map:(e,t)=>e.map(Gp).map(t).map(Kp)},Gp=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),Kp=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),$p(e.vtag,t,...e.vchildren||[])}const t=qp(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},Yp=(e,t,n)=>{const r=e;return{emit:e=>Xp(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e})}},Xp=(e,t,n)=>{const r=Yf.ce(t,n);return e.dispatchEvent(r),r},Qp=new WeakMap,Jp=e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,i=(t.$tagName$,()=>{}),o=((e,t,n)=>{var r;const i=Zp(t,n),o=qf.get(i);if(e=11===e.nodeType?e:Gf,o)if("string"==typeof o){e=e.head||e;let n,a=Qp.get(e);if(a||Qp.set(e,a=new Set),!a.has(i)){{n=Gf.createElement("style"),n.innerHTML=o;const t=null!==(r=Yf.$nonce$)&&void 0!==r?r:function(e){var t,n,r;return null!==(r=null===(n=null===(t=e.head)||void 0===t?void 0:t.querySelector('meta[name="csp-nonce"]'))||void 0===n?void 0:n.getAttribute("content"))&&void 0!==r?r:void 0}(Gf);null!=t&&n.setAttribute("nonce",t),e.insertBefore(n,e.querySelector("link"))}4&t.$flags$&&(n.innerHTML+="slot-fb{display:contents}slot-fb[hidden]{display:none}"),a&&a.add(i)}}else e.adoptedStyleSheets.includes(o)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,o]);return i})(n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$);10&r&&(n["s-sc"]=o,n.classList.add(o+"-h"),2&r&&n.classList.add(o+"-s")),i()},Zp=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),ef=(e,t,n,r,i,o)=>{if(n!==r){let a=Uf(e,t),s=t.toLowerCase();if("class"===t){const t=e.classList,i=nf(n),o=nf(r);t.remove(...i.filter((e=>e&&!o.includes(e)))),t.add(...o.filter((e=>e&&!i.includes(e))))}else if("style"===t){for(const t in n)r&&null!=r[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in r)n&&r[t]===n[t]||(t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if("key"===t);else if("ref"===t)r&&r(e);else if(e.__lookupSetter__(t)||"o"!==t[0]||"n"!==t[1]){const l=Up(r);if((a||l&&null!==r)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{const i=null==r?"":r;"list"===t?a=!1:null!=n&&e[t]==i||(e[t]=i)}}catch(AW){}let u=!1;s!==(s=s.replace(/^xlink\:?/,""))&&(t=s,u=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(u?e.removeAttributeNS(Vp,t):e.removeAttribute(t)):(!a||4&o||i)&&!l&&(r=!0===r?"":r,u?e.setAttributeNS(Vp,t,r):e.setAttribute(t,r))}else if(t="-"===t[2]?t.slice(3):Uf(Hf,s)?s.slice(2):s[2]+t.slice(3),n||r){const i=t.endsWith(rf);t=t.replace(of,""),n&&Yf.rel(e,t,n,i),r&&Yf.ael(e,t,r,i)}}},tf=/\s/,nf=e=>e?e.split(tf):[],rf="Capture",of=new RegExp(rf+"$"),af=(e,t,n,r)=>{const i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,o=e&&e.$attrs$||zp,a=t.$attrs$||zp;for(r in o)r in a||ef(i,r,o[r],void 0,n,t.$flags$);for(r in a)ef(i,r,o[r],a[r],n,t.$flags$)},sf=(e,t,n,r)=>{const i=t.$children$[n];let o,a,s,l=0;if(Dp||(Pp=!0,"slot"===i.$tag$&&(Tp&&r.classList.add(Tp+"-s"),i.$flags$|=i.$children$?2:1)),null!==i.$text$)o=i.$elm$=Gf.createTextNode(i.$text$);else if(1&i.$flags$)o=i.$elm$=Gf.createTextNode("");else{if(Lp||(Lp="svg"===i.$tag$),o=i.$elm$=Gf.createElementNS(Lp?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&i.$flags$?"slot-fb":i.$tag$),Lp&&"foreignObject"===i.$tag$&&(Lp=!1),af(null,i,Lp),(e=>null!=e)(Tp)&&o["s-si"]!==Tp&&o.classList.add(o["s-si"]=Tp),i.$children$)for(l=0;l<i.$children$.length;++l)a=sf(e,i,l,o),a&&o.appendChild(a);"svg"===i.$tag$?Lp=!1:"foreignObject"===o.tagName&&(Lp=!0)}return o["s-hn"]=Rp,3&i.$flags$&&(o["s-sr"]=!0,o["s-cr"]=Ap,o["s-sn"]=i.$name$||"",s=e&&e.$children$&&e.$children$[n],s&&s.$tag$===i.$tag$&&e.$elm$&&lf(e.$elm$,!1)),o},lf=(e,t)=>{Yf.$flags$|=1;const n=e.childNodes;for(let r=n.length-1;r>=0;r--){const e=n[r];e["s-hn"]!==Rp&&e["s-ol"]&&(pf(e).insertBefore(e,hf(e)),e["s-ol"].remove(),e["s-ol"]=void 0,e["s-sh"]=void 0,Pp=!0),t&&lf(e,t)}Yf.$flags$&=-2},uf=(e,t,n,r,i,o)=>{let a,s=e["s-cr"]&&e["s-cr"].parentNode||e;for(s.shadowRoot&&s.tagName===Rp&&(s=s.shadowRoot);i<=o;++i)r[i]&&(a=sf(null,n,i,e),a&&(r[i].$elm$=a,s.insertBefore(a,hf(t))))},cf=(e,t,n)=>{for(let r=t;r<=n;++r){const t=e[r];if(t){const e=t.$elm$;bf(t),e&&(Op=!0,e["s-ol"]?e["s-ol"].remove():lf(e,!0),e.remove())}}},df=(e,t,n=!1)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:!!n||e.$key$===t.$key$),hf=e=>e&&e["s-ol"]||e,pf=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,ff=(e,t,n=!1)=>{const r=t.$elm$=e.$elm$,i=e.$children$,o=t.$children$,a=t.$tag$,s=t.$text$;let l;null===s?(Lp="svg"===a||"foreignObject"!==a&&Lp,("slot"!==a||Dp)&&af(e,t,Lp),null!==i&&null!==o?((e,t,n,r,i=!1)=>{let o,a,s=0,l=0,u=0,c=0,d=t.length-1,h=t[0],p=t[d],f=r.length-1,m=r[0],g=r[f];for(;s<=d&&l<=f;)if(null==h)h=t[++s];else if(null==p)p=t[--d];else if(null==m)m=r[++l];else if(null==g)g=r[--f];else if(df(h,m,i))ff(h,m,i),h=t[++s],m=r[++l];else if(df(p,g,i))ff(p,g,i),p=t[--d],g=r[--f];else if(df(h,g,i))"slot"!==h.$tag$&&"slot"!==g.$tag$||lf(h.$elm$.parentNode,!1),ff(h,g,i),e.insertBefore(h.$elm$,p.$elm$.nextSibling),h=t[++s],g=r[--f];else if(df(p,m,i))"slot"!==h.$tag$&&"slot"!==g.$tag$||lf(p.$elm$.parentNode,!1),ff(p,m,i),e.insertBefore(p.$elm$,h.$elm$),p=t[--d],m=r[++l];else{for(u=-1,c=s;c<=d;++c)if(t[c]&&null!==t[c].$key$&&t[c].$key$===m.$key$){u=c;break}u>=0?(a=t[u],a.$tag$!==m.$tag$?o=sf(t&&t[l],n,u,e):(ff(a,m,i),t[u]=void 0,o=a.$elm$),m=r[++l]):(o=sf(t&&t[l],n,l,e),m=r[++l]),o&&pf(h.$elm$).insertBefore(o,hf(h.$elm$))}s>d?uf(e,null==r[f+1]?null:r[f+1].$elm$,n,r,l,f):l>f&&cf(t,s,d)})(r,i,t,o,n):null!==o?(null!==e.$text$&&(r.textContent=""),uf(r,null,t,o,0,o.length-1)):null!==i&&cf(i,0,i.length-1),Lp&&"svg"===a&&(Lp=!1)):(l=r["s-cr"])?l.parentNode.textContent=s:e.$text$!==s&&(r.data=s)},mf=e=>{const t=e.childNodes;for(const n of t)if(1===n.nodeType){if(n["s-sr"]){const e=n["s-sn"];n.hidden=!1;for(const r of t)if(r!==n)if(r["s-hn"]!==n["s-hn"]||""!==e){if(1===r.nodeType&&(e===r.getAttribute("slot")||e===r["s-sn"])){n.hidden=!0;break}}else if(1===r.nodeType||3===r.nodeType&&""!==r.textContent.trim()){n.hidden=!0;break}}mf(n)}},gf=[],vf=e=>{let t,n,r;for(const i of e.childNodes){if(i["s-sr"]&&(t=i["s-cr"])&&t.parentNode){n=t.parentNode.childNodes;const e=i["s-sn"];for(r=n.length-1;r>=0;r--)if(t=n[r],!t["s-cn"]&&!t["s-nr"]&&t["s-hn"]!==i["s-hn"]&&!Np.experimentalSlotFixes)if(yf(t,e)){let n=gf.find((e=>e.$nodeToRelocate$===t));Op=!0,t["s-sn"]=t["s-sn"]||e,n?(n.$nodeToRelocate$["s-sh"]=i["s-hn"],n.$slotRefNode$=i):(t["s-sh"]=i["s-hn"],gf.push({$slotRefNode$:i,$nodeToRelocate$:t})),t["s-sr"]&&gf.map((e=>{yf(e.$nodeToRelocate$,t["s-sn"])&&(n=gf.find((e=>e.$nodeToRelocate$===t)),n&&!e.$slotRefNode$&&(e.$slotRefNode$=n.$slotRefNode$))}))}else gf.some((e=>e.$nodeToRelocate$===t))||gf.push({$nodeToRelocate$:t})}1===i.nodeType&&vf(i)}},yf=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,bf=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(bf)},xf=(e,t,n=!1)=>{var r,i,o,a,s;const l=e.$hostElement$,u=e.$cmpMeta$,c=e.$vnode$||qp(null,null),d=(h=t)&&h.$tag$===Wp?t:$p(null,null,t);var h;if(Rp=l.tagName,u.$attrsToReflect$&&(d.$attrs$=d.$attrs$||{},u.$attrsToReflect$.map((([e,t])=>d.$attrs$[t]=l[e]))),n&&d.$attrs$)for(const p of Object.keys(d.$attrs$))l.hasAttribute(p)&&!["key","ref","style","class"].includes(p)&&(d.$attrs$[p]=l[p]);if(d.$tag$=null,d.$flags$|=4,e.$vnode$=d,d.$elm$=c.$elm$=l.shadowRoot||l,Tp=l["s-sc"],Dp=!!(1&u.$flags$),Ap=l["s-cr"],Op=!1,ff(c,d,n),Yf.$flags$|=1,Pp){vf(d.$elm$);for(const e of gf){const t=e.$nodeToRelocate$;if(!t["s-ol"]){const e=Gf.createTextNode("");e["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=e,t)}}for(const e of gf){const t=e.$nodeToRelocate$,s=e.$slotRefNode$;if(s){const e=s.parentNode;let n=s.nextSibling;{let o=null===(r=t["s-ol"])||void 0===r?void 0:r.previousSibling;for(;o;){let r=null!==(i=o["s-nr"])&&void 0!==i?i:null;if(r&&r["s-sn"]===t["s-sn"]&&e===r.parentNode&&(r=r.nextSibling,!r||!r["s-nr"])){n=r;break}o=o.previousSibling}}(!n&&e!==t.parentNode||t.nextSibling!==n)&&t!==n&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),e.insertBefore(t,n),1===t.nodeType&&(t.hidden=null!==(o=t["s-ih"])&&void 0!==o&&o))}else 1===t.nodeType&&(n&&(t["s-ih"]=null!==(a=t.hidden)&&void 0!==a&&a),t.hidden=!0)}}if(Op&&mf(d.$elm$),Yf.$flags$&=-2,gf.length=0,Np.experimentalScopedSlotChanges&&2&u.$flags$)for(const p of d.$elm$.childNodes)p["s-hn"]===Rp||p["s-sh"]||(n&&null==p["s-ih"]&&(p["s-ih"]=null!==(s=p.hidden)&&void 0!==s&&s),p.hidden=!0);Ap=void 0},wf=(e,t)=>(e.$flags$|=16,e.$ancestorComponent$,om((()=>kf(e,t)))),kf=(e,t)=>{const n=e.$hostElement$,r=(e.$cmpMeta$.$tagName$,()=>{}),i=n;let o;return o=Tf(i,t?"componentWillLoad":"componentWillUpdate"),o=_f(o,(()=>Tf(i,"componentWillRender"))),r(),_f(o,(()=>Cf(e,i,t)))},_f=(e,t)=>Ef(e)?e.then(t):t(),Ef=e=>e instanceof Promise||e&&e.then&&"function"==typeof e.then,Cf=async(e,t,n)=>{const r=e.$hostElement$,i=(e.$cmpMeta$.$tagName$,()=>{});r["s-rc"],n&&Jp(e);const o=(e.$cmpMeta$.$tagName$,()=>{});If(e,t,r,n),o(),i(),Sf(e)},If=(e,t,n,r)=>{try{Mp=t,t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,(Np.hasRenderFn||Np.reflect)&&(Np.vdomRender||Np.reflect)&&(Np.hydrateServerSide||xf(e,t,r))}catch(AW){$f(AW,e.$hostElement$)}return Mp=null,null},Sf=e=>{e.$cmpMeta$.$tagName$;const t=()=>{},n=e.$hostElement$;e.$ancestorComponent$,Tf(n,"componentDidRender"),64&e.$flags$?(Tf(n,"componentDidUpdate"),t()):(e.$flags$|=64,Tf(n,"componentDidLoad"),t())},Nf=e=>{{const t=Vf(e),n=t.$hostElement$.isConnected;return n&&2==(18&t.$flags$)&&wf(t,!1),n}},Tf=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(AW){$f(AW)}},Af=(e,t,n,r)=>{const i=Vf(e),o=e,a=i.$instanceValues$.get(t),s=i.$flags$,l=o;var u,c;u=n,c=r.$members$[t][0],n=null==u||Up(u)?u:4&c?"false"!==u&&(""===u||!!u):2&c?parseFloat(u):1&c?String(u):u;const d=Number.isNaN(a)&&Number.isNaN(n);if(n!==a&&!d){if(i.$instanceValues$.set(t,n),r.$watchers$&&128&s){const e=r.$watchers$[t];e&&e.map((e=>{try{l[e](n,a,t)}catch(AW){$f(AW,o)}}))}if(2==(18&s)){if(l.componentShouldUpdate&&!1===l.componentShouldUpdate(n,a,t))return;wf(i,!1)}}},Rf=(e,t,n)=>{var r;const i=e.prototype;if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const n=Object.entries(t.$members$);n.map((([e,[n]])=>{(31&n||32&n)&&Object.defineProperty(i,e,{get(){return((e,t)=>Vf(e).$instanceValues$.get(t))(this,e)},set(n){Af(this,e,n,t)},configurable:!0,enumerable:!0})}));{const o=new Map;i.attributeChangedCallback=function(e,n,r){Yf.jmp((()=>{var a;const s=o.get(e);if(this.hasOwnProperty(s))r=this[s],delete this[s];else{if(i.hasOwnProperty(s)&&"number"==typeof this[s]&&this[s]==r)return;if(null==s){const i=Vf(this),o=null==i?void 0:i.$flags$;if(o&&!(8&o)&&128&o&&r!==n){const i=this,o=null===(a=t.$watchers$)||void 0===a?void 0:a[e];null==o||o.forEach((t=>{null!=i[t]&&i[t].call(i,r,n,e)}))}return}}this[s]=(null!==r||"boolean"!=typeof this[s])&&r}))},e.observedAttributes=Array.from(new Set([...Object.keys(null!==(r=t.$watchers$)&&void 0!==r?r:{}),...n.filter((([e,t])=>15&t[0])).map((([e,n])=>{var r;const i=n[1]||e;return o.set(i,e),512&n[0]&&(null===(r=t.$attrsToReflect$)||void 0===r||r.push([e,i])),i}))]))}}return e},Df=async(e,t,n,r)=>{let i;if(!(32&t.$flags$)&&(t.$flags$|=32,n.$lazyBundleId$,i=e.constructor,customElements.whenDefined(n.$tagName$).then((()=>t.$flags$|=128)),i.style)){let r=i.style;"string"!=typeof r&&(r=r[t.$modeName$=(e=>Wf.map((t=>t(e))).find((e=>!!e)))(e)]);const o=Zp(n,t.$modeName$);if(!qf.has(o)){const e=(n.$tagName$,()=>{});((e,t,n)=>{let r=qf.get(e);Qf&&n?(r=r||new CSSStyleSheet,"string"==typeof r?r=t:r.replaceSync(t)):r=t,qf.set(e,r)})(o,r,!!(1&n.$flags$)),e()}}t.$ancestorComponent$,wf(t,!0)},Of=e=>{const t=e["s-cr"]=Gf.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Pf=(e,t)=>{const n={$flags$:t[0],$tagName$:t[1]};n.$members$=t[2],n.$listeners$=t[3],n.$watchers$=e.$watchers$,n.$attrsToReflect$=[];const r=e.prototype.connectedCallback,i=e.prototype.disconnectedCallback;return Object.assign(e.prototype,{__registerHost(){zf(this,n)},connectedCallback(){(e=>{if(!(1&Yf.$flags$)){const t=Vf(e),n=t.$cmpMeta$,r=(n.$tagName$,()=>{});1&t.$flags$?(Lf(e,t,n.$listeners$),(null==t?void 0:t.$lazyInstance$)?t.$lazyInstance$:(null==t?void 0:t.$onReadyPromise$)&&t.$onReadyPromise$.then((()=>{t.$lazyInstance$}))):(t.$flags$|=1,12&n.$flags$&&Of(e),n.$members$&&Object.entries(n.$members$).map((([t,[n]])=>{if(31&n&&e.hasOwnProperty(t)){const n=e[t];delete e[t],e[t]=n}})),Df(e,t,n)),r()}})(this),r&&r.call(this)},disconnectedCallback(){(async e=>{if(!(1&Yf.$flags$)){const t=Vf(e);t.$rmListeners$&&(t.$rmListeners$.map((e=>e())),t.$rmListeners$=void 0)}})(this),i&&i.call(this)},__attachShadow(){this.attachShadow({mode:"open",delegatesFocus:!!(16&n.$flags$)})}}),e.is=n.$tagName$,Rf(e,n)},Lf=(e,t,n,r)=>{n&&n.map((([n,r,i])=>{const o=Ff(e,n),a=Mf(t,i),s=jf(n);Yf.ael(o,r,a,s),(t.$rmListeners$=t.$rmListeners$||[]).push((()=>Yf.rel(o,r,a,s)))}))},Mf=(e,t)=>n=>{try{Np.lazyLoad||e.$hostElement$[t](n)}catch(AW){$f(AW)}},Ff=(e,t)=>4&t?Gf:8&t?Hf:16&t?Gf.body:e,jf=e=>Xf?{passive:!!(1&e),capture:!!(2&e)}:!!(2&e),Bf=new WeakMap,Vf=e=>Bf.get(e),zf=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return Lf(e,n,t.$listeners$),Bf.set(e,n)},Uf=(e,t)=>t in e,$f=(e,t)=>(0,console.error)(e,t),qf=new Map,Wf=[],Hf="undefined"!=typeof window?window:{},Gf=Hf.document||{head:{}},Kf=Hf.HTMLElement||class{},Yf={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},Xf=(()=>{let e=!1;try{Gf.addEventListener("e",null,Object.defineProperty({},"passive",{get(){e=!0}}))}catch(AW){}return e})(),Qf=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replaceSync}catch(AW){}return!1})(),Jf=[],Zf=[],em=(e,t)=>n=>{e.push(n),Fp||(Fp=!0,t&&4&Yf.$flags$?rm(nm):Yf.raf(nm))},tm=e=>{for(let t=0;t<e.length;t++)try{e[t](performance.now())}catch(AW){$f(AW)}e.length=0},nm=()=>{tm(Jf),tm(Zf),(Fp=Jf.length>0)&&Yf.raf(nm)},rm=e=>(e=>Promise.resolve(e))().then(e),im=e("r",em(Jf,!1)),om=e("w",em(Zf,!0)),am=e("h","undefined"!=typeof window?window:void 0),sm=e("d","undefined"!=typeof document?document:void 0),lm=e("b",((e,t)=>{e.componentOnReady?e.componentOnReady().then((e=>t(e))):mm((()=>t(e)))})),um=e=>void 0!==e.componentOnReady,cm=(e,t=[])=>{const n={};return t.forEach((t=>{e.hasAttribute(t)&&(null!==e.getAttribute(t)&&(n[t]=e.getAttribute(t)),e.removeAttribute(t))})),n},dm=["role","aria-activedescendant","aria-atomic","aria-autocomplete","aria-braillelabel","aria-brailleroledescription","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colindextext","aria-colspan","aria-controls","aria-current","aria-describedby","aria-description","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowindextext","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext"],hm=e("e",((e,t,n,r)=>{var i;if("undefined"!=typeof window){const o=window,a=null===(i=null==o?void 0:o.Ionic)||void 0===i?void 0:i.config;if(a){const i=a.get("_ael");if(i)return i(e,t,n,r);if(a._ael)return a._ael(e,t,n,r)}}return e.addEventListener(t,n,r)})),pm=e("f",((e,t,n,r)=>{var i;if("undefined"!=typeof window){const o=window,a=null===(i=null==o?void 0:o.Ionic)||void 0===i?void 0:i.config;if(a){const i=a.get("_rel");if(i)return i(e,t,n,r);if(a._rel)return a._rel(e,t,n,r)}}return e.removeEventListener(t,n,r)})),fm=(e,t=e)=>e.shadowRoot||t,mm=e("j",(e=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(e):"function"==typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e))),gm=(e("a",((e,t,n)=>Math.max(e,Math.min(t,n)))),(e,t)=>{if(!e){const e="ASSERT: "+t;throw console.error(e),new Error(e)}}),vm=(e("n",(e=>e.timeStamp||Date.now())),e("p",(e=>{if(e){const t=e.changedTouches;if(t&&t.length>0){const e=t[0];return{x:e.clientX,y:e.clientY}}if(void 0!==e.pageX)return{x:e.pageX,y:e.pageY}}return{x:0,y:0}})),(e,t)=>{if(null!=e||(e={}),null!=t||(t={}),e===t)return!0;const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n){if(!(r in t))return!1;if(e[r]!==t[r])return!1}return!0});
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
let ym;const bm=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),xm=e=>{if(void 0===ym){const t=void 0!==e.style.animationName,n=void 0!==e.style.webkitAnimationName;ym=!t&&n?"-webkit-":""}return ym},wm=(e,t,n)=>{const r=t.startsWith("animation")?xm(e):"";e.style.setProperty(r+t,n)},km=(e,t)=>{const n=t.startsWith("animation")?xm(e):"";e.style.removeProperty(n+t)},_m=[],Em=(e=[],t)=>{if(void 0!==t){const n=Array.isArray(t)?t:[t];return[...e,...n]}return e},Cm=e("k",(e=>{let t,n,r,i,o,a,s,l,u,c,d,h,p,f=[],m=[],g=[],v=!1,y={},b=[],x=[],w={},k=0,_=!1,E=!1,C=!0,I=!1,S=!0,N=!1;const T=e,A=[],R=[],D=[],O=[],P=[],L=[],M=[],F=[],j=[],B=[],V=[],z="function"==typeof AnimationEffect||void 0!==am&&"function"==typeof am.AnimationEffect,U="function"==typeof Element&&"function"==typeof Element.prototype.animate&&z,$=()=>V,q=e=>{K(),e&&Y()},W=(e,t)=>{const n=t.findIndex((t=>t.c===e));n>-1&&t.splice(n,1)},H=(e,t)=>(((null==t?void 0:t.oneTimeCallback)?R:A).push({c:e,o:t}),p),G=()=>(A.length=0,R.length=0,p),K=()=>{if(U)V.forEach((e=>{e.cancel()})),V.length=0;else{const e=O.slice();mm((()=>{e.forEach((e=>{km(e,"animation-name"),km(e,"animation-duration"),km(e,"animation-timing-function"),km(e,"animation-iteration-count"),km(e,"animation-delay"),km(e,"animation-play-state"),km(e,"animation-fill-mode"),km(e,"animation-direction")}))}))}},Y=()=>{L.forEach((e=>{(null==e?void 0:e.parentNode)&&e.parentNode.removeChild(e)})),L.length=0},X=()=>void 0!==o?o:s?s.getFill():"both",Q=()=>void 0!==u?u:void 0!==a?a:s?s.getDirection():"normal",J=()=>_?"linear":void 0!==r?r:s?s.getEasing():"linear",Z=()=>E?0:void 0!==c?c:void 0!==n?n:s?s.getDuration():0,ee=()=>void 0!==i?i:s?s.getIterations():1,te=()=>void 0!==d?d:void 0!==t?t:s?s.getDelay():0,ne=e=>{U?$().forEach((t=>{const n=t.effect;if(n.setKeyframes)n.setKeyframes(e);else{const r=new KeyframeEffect(n.target,e,n.getTiming());t.effect=r}})):ie()},re=()=>{0!==k&&(k--,0===k&&((()=>{he(),j.forEach((e=>e())),B.forEach((e=>e()));const e=C?1:0,t=b,n=x,r=w;O.forEach((e=>{const i=e.classList;t.forEach((e=>i.add(e))),n.forEach((e=>i.remove(e)));for(const t in r)r.hasOwnProperty(t)&&wm(e,t,r[t])})),c=void 0,u=void 0,d=void 0,A.forEach((t=>t.c(e,p))),R.forEach((t=>t.c(e,p))),R.length=0,S=!0,C&&(I=!0),C=!0})(),s&&s.animationFinish()))},ie=(t=!0)=>{Y();const n=(e=>(e.forEach((e=>{for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];if("easing"===t)e["animation-timing-function"]=n,delete e[t];else{const r=bm(t);r!==t&&(e[r]=n,delete e[t])}}})),e))(f);O.forEach((r=>{if(n.length>0){const i=((e=[])=>e.map((e=>{const t=e.offset,n=[];for(const r in e)e.hasOwnProperty(r)&&"offset"!==r&&n.push(`${r}: ${e[r]};`);return`${100*t}% { ${n.join(" ")} }`})).join(" "))(n);h=void 0!==e?e:(e=>{let t=_m.indexOf(e);return t<0&&(t=_m.push(e)-1),`ion-animation-${t}`})(i);const o=((e,t,n)=>{var r;const i=(e=>{const t=void 0!==e.getRootNode?e.getRootNode():e;return t.head||t})(n),o=xm(n),a=i.querySelector("#"+e);if(a)return a;const s=(null!==(r=n.ownerDocument)&&void 0!==r?r:document).createElement("style");return s.id=e,s.textContent=`@${o}keyframes ${e} { ${t} } @${o}keyframes ${e}-alt { ${t} }`,i.appendChild(s),s})(h,i,r);L.push(o),wm(r,"animation-duration",`${Z()}ms`),wm(r,"animation-timing-function",J()),wm(r,"animation-delay",`${te()}ms`),wm(r,"animation-fill-mode",X()),wm(r,"animation-direction",Q());const a=ee()===1/0?"infinite":ee().toString();wm(r,"animation-iteration-count",a),wm(r,"animation-play-state","paused"),t&&wm(r,"animation-name",`${o.id}-alt`),mm((()=>{wm(r,"animation-name",o.id||null)}))}}))},oe=(e=!0)=>{(()=>{M.forEach((e=>e())),F.forEach((e=>e()));const e=m,t=g,n=y;O.forEach((r=>{const i=r.classList;e.forEach((e=>i.add(e))),t.forEach((e=>i.remove(e)));for(const e in n)n.hasOwnProperty(e)&&wm(r,e,n[e])}))})(),f.length>0&&(U?(O.forEach((e=>{const t=e.animate(f,{id:T,delay:te(),duration:Z(),easing:J(),iterations:ee(),fill:X(),direction:Q()});t.pause(),V.push(t)})),V.length>0&&(V[0].onfinish=()=>{re()})):ie(e)),v=!0},ae=e=>{if(e=Math.min(Math.max(e,0),.9999),U)V.forEach((t=>{t.currentTime=t.effect.getComputedTiming().delay+Z()*e,t.pause()}));else{const t=`-${Z()*e}ms`;O.forEach((e=>{f.length>0&&(wm(e,"animation-delay",t),wm(e,"animation-play-state","paused"))}))}},se=e=>{V.forEach((e=>{e.effect.updateTiming({delay:te(),duration:Z(),easing:J(),iterations:ee(),fill:X(),direction:Q()})})),void 0!==e&&ae(e)},le=(e=!0,t)=>{mm((()=>{O.forEach((n=>{wm(n,"animation-name",h||null),wm(n,"animation-duration",`${Z()}ms`),wm(n,"animation-timing-function",J()),wm(n,"animation-delay",void 0!==t?`-${t*Z()}ms`:`${te()}ms`),wm(n,"animation-fill-mode",X()||null),wm(n,"animation-direction",Q()||null);const r=ee()===1/0?"infinite":ee().toString();wm(n,"animation-iteration-count",r),e&&wm(n,"animation-name",`${h}-alt`),mm((()=>{wm(n,"animation-name",h||null)}))}))}))},ue=(e=!1,t=!0,n)=>(e&&P.forEach((r=>{r.update(e,t,n)})),U?se(n):le(t,n),p),ce=()=>{v&&(U?V.forEach((e=>{e.pause()})):O.forEach((e=>{wm(e,"animation-play-state","paused")})),N=!0)},de=()=>{l=void 0,re()},he=()=>{l&&clearTimeout(l)},pe=()=>{O.forEach((e=>{km(e,"animation-duration"),km(e,"animation-delay"),km(e,"animation-play-state")}))},fe=e=>new Promise((t=>{(null==e?void 0:e.sync)&&(E=!0,H((()=>E=!1),{oneTimeCallback:!0})),v||oe(),I&&(U?(ae(0),se()):le(),I=!1),S&&(k=P.length+1,S=!1);const n=()=>{W(r,R),t()},r=()=>{W(n,D),t()};H(r,{oneTimeCallback:!0}),((e,t)=>{D.push({c:e,o:t})})(n,{oneTimeCallback:!0}),P.forEach((e=>{e.play()})),U?(V.forEach((e=>{e.play()})),0!==f.length&&0!==O.length||re()):(()=>{if(he(),mm((()=>{O.forEach((e=>{f.length>0&&wm(e,"animation-play-state","running")}))})),0===f.length||0===O.length)re();else{const e=te()||0,t=Z()||0,n=ee()||1;isFinite(n)&&(l=setTimeout(de,e+t*n+100)),((e,t)=>{let n;const r={passive:!0},i=()=>{n&&n()},o=n=>{e===n.target&&(i(),t(n))};e&&(e.addEventListener("webkitAnimationEnd",o,r),e.addEventListener("animationend",o,r),n=()=>{e.removeEventListener("webkitAnimationEnd",o,r),e.removeEventListener("animationend",o,r)})})(O[0],(()=>{he(),mm((()=>{pe(),mm(re)}))}))}})(),N=!1})),me=(e,t)=>{const n=f[0];return void 0===n||void 0!==n.offset&&0!==n.offset?f=[{offset:0,[e]:t},...f]:n[e]=t,p};return p={parentAnimation:s,elements:O,childAnimations:P,id:T,animationFinish:re,from:me,to:(e,t)=>{const n=f[f.length-1];return void 0===n||void 0!==n.offset&&1!==n.offset?f=[...f,{offset:1,[e]:t}]:n[e]=t,p},fromTo:(e,t,n)=>me(e,t).to(e,n),parent:e=>(s=e,p),play:fe,pause:()=>(P.forEach((e=>{e.pause()})),ce(),p),stop:()=>{P.forEach((e=>{e.stop()})),v&&(K(),v=!1),_=!1,E=!1,S=!0,u=void 0,c=void 0,d=void 0,k=0,I=!1,C=!0,N=!1,D.forEach((e=>e.c(0,p))),D.length=0},destroy:e=>(P.forEach((t=>{t.destroy(e)})),q(e),O.length=0,P.length=0,f.length=0,G(),v=!1,S=!0,p),keyframes:e=>{const t=f!==e;return f=e,t&&ne(f),p},addAnimation:e=>{if(null!=e)if(Array.isArray(e))for(const t of e)t.parent(p),P.push(t);else e.parent(p),P.push(e);return p},addElement:e=>{if(null!=e)if(1===e.nodeType)O.push(e);else if(e.length>=0)for(let t=0;t<e.length;t++)O.push(e[t]);else console.error("Invalid addElement value");return p},update:ue,fill:e=>(o=e,ue(!0),p),direction:e=>(a=e,ue(!0),p),iterations:e=>(i=e,ue(!0),p),duration:e=>(U||0!==e||(e=1),n=e,ue(!0),p),easing:e=>(r=e,ue(!0),p),delay:e=>(t=e,ue(!0),p),getWebAnimations:$,getKeyframes:()=>f,getFill:X,getDirection:Q,getDelay:te,getIterations:ee,getEasing:J,getDuration:Z,afterAddRead:e=>(j.push(e),p),afterAddWrite:e=>(B.push(e),p),afterClearStyles:(e=[])=>{for(const t of e)w[t]="";return p},afterStyles:(e={})=>(w=e,p),afterRemoveClass:e=>(x=Em(x,e),p),afterAddClass:e=>(b=Em(b,e),p),beforeAddRead:e=>(M.push(e),p),beforeAddWrite:e=>(F.push(e),p),beforeClearStyles:(e=[])=>{for(const t of e)y[t]="";return p},beforeStyles:(e={})=>(y=e,p),beforeRemoveClass:e=>(g=Em(g,e),p),beforeAddClass:e=>(m=Em(m,e),p),onFinish:H,isRunning:()=>0!==k&&!N,progressStart:(e=!1,t)=>(P.forEach((n=>{n.progressStart(e,t)})),ce(),_=e,v||oe(),ue(!1,!0,t),p),progressStep:e=>(P.forEach((t=>{t.progressStep(e)})),ae(e),p),progressEnd:(e,t,n)=>(_=!1,P.forEach((r=>{r.progressEnd(e,t,n)})),void 0!==n&&(c=n),I=!1,C=!0,0===e?(u="reverse"===Q()?"normal":"reverse","reverse"===u&&(C=!1),U?(ue(),ae(1-t)):(d=(1-t)*Z()*-1,ue(!1,!1))):1===e&&(U?(ue(),ae(t)):(d=t*Z()*-1,ue(!1,!1))),void 0===e||s||fe(),p)}})),Im="ionViewWillLeave",Sm="ionViewDidLeave",Nm="ionViewWillUnload",Tm=e=>new Promise(((t,n)=>{om((()=>{Am(e),Rm(e).then((n=>{n.animation&&n.animation.destroy(),Dm(e),t(n)}),(t=>{Dm(e),n(t)}))}))})),Am=e=>{const t=e.enteringEl,n=e.leavingEl;qm(t,n,e.direction),e.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),$m(t,!1),t.style.setProperty("pointer-events","none"),n&&($m(n,!1),n.style.setProperty("pointer-events","none"))},Rm=async e=>{const t=await Om(e);return t&&jp?Pm(t,e):Lm(e)},Dm=e=>{const t=e.enteringEl,n=e.leavingEl;t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"),void 0!==n&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events"))},Om=async e=>{if(e.leavingEl&&e.animated&&0!==e.duration)return e.animationBuilder?e.animationBuilder:"ios"===e.mode?(await Sp((()=>t.import("./ios.transition-legacy-BpQUzS6x.js")))).iosTransitionAnimation:(await Sp((()=>t.import("./md.transition-legacy-C0iDRTJS.js")))).mdTransitionAnimation},Pm=async(e,t)=>{await Mm(t,!0);const n=e(t.baseEl,t);Bm(t.enteringEl,t.leavingEl);const r=await jm(n,t);return t.progressCallback&&t.progressCallback(void 0),r&&Vm(t.enteringEl,t.leavingEl),{hasCompleted:r,animation:n}},Lm=async e=>{const t=e.enteringEl,n=e.leavingEl;return await Mm(e,!1),Bm(t,n),Vm(t,n),{hasCompleted:!0}},Mm=async(e,t)=>{(void 0!==e.deepWait?e.deepWait:t)&&await Promise.all([Um(e.enteringEl),Um(e.leavingEl)]),await Fm(e.viewIsReady,e.enteringEl)},Fm=async(e,t)=>{e&&await e(t)},jm=(e,t)=>{const n=t.progressCallback,r=new Promise((t=>{e.onFinish((e=>t(1===e)))}));return n?(e.progressStart(!0),n(e)):e.play(),r},Bm=(e,t)=>{zm(t,Im),zm(e,"ionViewWillEnter")},Vm=(e,t)=>{zm(e,"ionViewDidEnter"),zm(t,Sm)},zm=(e,t)=>{if(e){const n=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}},Um=async e=>{const t=e;if(t){if(null!=t.componentOnReady){if(null!=await t.componentOnReady())return}else if(null!=t.__registerHost){const e=new Promise((e=>mm(e)));return void(await e)}await Promise.all(Array.from(t.children).map(Um))}},$m=(e,t)=>{t?(e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")):(e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden"))},qm=(e,t,n)=>{void 0!==e&&(e.style.zIndex="back"===n?"99":"101"),void 0!==t&&(t.style.zIndex="100")},Wm=(e("l",(e=>{if(e.classList.contains("ion-page"))return e;const t=e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs");return t||e})),(e,t,n,r,i)=>Gm(e[1],t[1],n[1],r[1],i).map((i=>Hm(e[0],t[0],n[0],r[0],i)))),Hm=(e,t,n,r,i)=>i*(3*t*Math.pow(i-1,2)+i*(-3*n*i+3*n+r*i))-e*Math.pow(i-1,3),Gm=(e,t,n,r,i)=>Km((r-=i)-3*(n-=i)+3*(t-=i)-(e-=i),3*n-6*t+3*e,3*t-3*e,e).filter((e=>e>=0&&e<=1)),Km=(e,t,n,r)=>{if(0===e)return((e,t,n)=>{const r=t*t-4*e*n;return r<0?[]:[(-t+Math.sqrt(r))/(2*e),(-t-Math.sqrt(r))/(2*e)]})(t,n,r);const i=(3*(n/=e)-(t/=e)*t)/3,o=(2*t*t*t-9*t*n+27*(r/=e))/27;if(0===i)return[Math.pow(-o,1/3)];if(0===o)return[Math.sqrt(-i),-Math.sqrt(-i)];const a=Math.pow(o/2,2)+Math.pow(i/3,3);if(0===a)return[Math.pow(o/2,.5)-t/3];if(a>0)return[Math.pow(-o/2+Math.sqrt(a),1/3)-Math.pow(o/2+Math.sqrt(a),1/3)-t/3];const s=Math.sqrt(Math.pow(-i/3,3)),l=Math.acos(-o/(2*Math.sqrt(Math.pow(-i/3,3)))),u=2*Math.pow(s,1/3);return[u*Math.cos(l/3)-t/3,u*Math.cos((l+2*Math.PI)/3)-t/3,u*Math.cos((l+4*Math.PI)/3)-t/3]};class Ym{constructor(e,t,n,r,i){this.id=t,this.name=n,this.disableScroll=i,this.priority=1e6*r+t,this.ctrl=e}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class Xm{constructor(e,t,n,r){this.id=t,this.disable=n,this.disableScroll=r,this.ctrl=e}block(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.disableGesture(e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.enableGesture(e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const Qm="backdrop-no-scroll",Jm=new
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(e){var t;return new Ym(this,this.newID(),e.name,null!==(t=e.priority)&&void 0!==t?t:0,!!e.disableScroll)}createBlocker(e={}){return new Xm(this,this.newID(),e.disable,!!e.disableScroll)}start(e,t,n){return this.canStart(e)?(this.requestedStart.set(t,n),!0):(this.requestedStart.delete(t),!1)}capture(e,t,n){if(!this.start(e,t,n))return!1;const r=this.requestedStart;let i=-1e4;if(r.forEach((e=>{i=Math.max(i,e)})),i===n){this.capturedId=t,r.clear();const n=new CustomEvent("ionGestureCaptured",{detail:{gestureName:e}});return document.dispatchEvent(n),!0}return r.delete(t),!1}release(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)}disableGesture(e,t){let n=this.disabledGestures.get(e);void 0===n&&(n=new Set,this.disabledGestures.set(e,n)),n.add(t)}enableGesture(e,t){const n=this.disabledGestures.get(e);void 0!==n&&n.delete(t)}disableScroll(e){this.disabledScroll.add(e),1===this.disabledScroll.size&&document.body.classList.add(Qm)}enableScroll(e){this.disabledScroll.delete(e),0===this.disabledScroll.size&&document.body.classList.remove(Qm)}canStart(e){return void 0===this.capturedId&&!this.isDisabled(e)}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(e){const t=this.disabledGestures.get(e);return!!(t&&t.size>0)}newID(){return this.gestureId++,this.gestureId}},Zm=(e,t,n,r)=>{const i=eg(e)?{capture:!!r.capture,passive:!!r.passive}:!!r.capture;let o,a;return e.__zone_symbol__addEventListener?(o="__zone_symbol__addEventListener",a="__zone_symbol__removeEventListener"):(o="addEventListener",a="removeEventListener"),e[o](t,n,i),()=>{e[a](t,n,i)}},eg=e=>{if(void 0===tg)try{const t=Object.defineProperty({},"passive",{get:()=>{tg=!0}});e.addEventListener("optsTest",(()=>{}),t)}catch(AW){tg=!1}return!!tg};let tg;const ng=e=>e instanceof Document?e:e.ownerDocument,rg=e("c",(e=>{let t=!1,n=!1,r=!0,i=!1;const o=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},e),a=o.canStart,s=o.onWillStart,l=o.onStart,u=o.onEnd,c=o.notCaptured,d=o.onMove,h=o.threshold,p=o.passive,f=o.blurOnStart,m={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},g=((e,t,n)=>{const r=n*(Math.PI/180),i="x"===e,o=Math.cos(r),a=t*t;let s=0,l=0,u=!1,c=0;return{start(e,t){s=e,l=t,c=0,u=!0},detect(e,t){if(!u)return!1;const n=e-s,r=t-l,d=n*n+r*r;if(d<a)return!1;const h=Math.sqrt(d),p=(i?n:r)/h;return c=p>o?1:p<-o?-1:0,u=!1,!0},isGesture:()=>0!==c,getDirection:()=>c}})(o.direction,o.threshold,o.maxAngle),v=Jm.createGesture({name:e.gestureName,priority:e.gesturePriority,disableScroll:e.disableScroll}),y=()=>{t&&(i=!1,d&&d(m))},b=()=>!!v.capture()&&(t=!0,r=!1,m.startX=m.currentX,m.startY=m.currentY,m.startTime=m.currentTime,s?s(m).then(x):x(),!0),x=()=>{f&&(()=>{if("undefined"!=typeof document){const e=document.activeElement;(null==e?void 0:e.blur)&&e.blur()}})(),l&&l(m),r=!0},w=()=>{t=!1,n=!1,i=!1,r=!0,v.release()},k=e=>{const n=t,i=r;w(),i&&(ig(m,e),n?u&&u(m):c&&c(m))},_=((e,t,n,r,i)=>{let o,a,s,l,u,c,d,h=0;const p=r=>{h=Date.now()+2e3,t(r)&&(!a&&n&&(a=Zm(e,"touchmove",n,i)),s||(s=Zm(r.target,"touchend",m,i)),l||(l=Zm(r.target,"touchcancel",m,i)))},f=r=>{h>Date.now()||t(r)&&(!c&&n&&(c=Zm(ng(e),"mousemove",n,i)),d||(d=Zm(ng(e),"mouseup",g,i)))},m=e=>{v(),r&&r(e)},g=e=>{y(),r&&r(e)},v=()=>{a&&a(),s&&s(),l&&l(),a=s=l=void 0},y=()=>{c&&c(),d&&d(),c=d=void 0},b=()=>{v(),y()},x=(t=!0)=>{t?(o||(o=Zm(e,"touchstart",p,i)),u||(u=Zm(e,"mousedown",f,i))):(o&&o(),u&&u(),o=u=void 0,b())};return{enable:x,stop:b,destroy:()=>{x(!1),r=n=t=void 0}}})(o.el,(e=>{const t=ag(e);return!(n||!r)&&(og(e,m),m.startX=m.currentX,m.startY=m.currentY,m.startTime=m.currentTime=t,m.velocityX=m.velocityY=m.deltaX=m.deltaY=0,m.event=e,(!a||!1!==a(m))&&(v.release(),!!v.start()&&(n=!0,0===h?b():(g.start(m.startX,m.startY),!0))))}),(e=>{t?!i&&r&&(i=!0,ig(m,e),requestAnimationFrame(y)):(ig(m,e),g.detect(m.currentX,m.currentY)&&(g.isGesture()&&b()||E()))}),k,{capture:!1,passive:p}),E=()=>{w(),_.stop(),c&&c(m)};return{enable(e=!0){e||(t&&k(void 0),w()),_.enable(e)},destroy(){v.destroy(),_.destroy()}}})),ig=(e,t)=>{if(!t)return;const n=e.currentX,r=e.currentY,i=e.currentTime;og(t,e);const o=e.currentX,a=e.currentY,s=(e.currentTime=ag(t))-i;if(s>0&&s<100){const t=(o-n)/s,i=(a-r)/s;e.velocityX=.7*t+.3*e.velocityX,e.velocityY=.7*i+.3*e.velocityY}e.deltaX=o-e.startX,e.deltaY=a-e.startY,e.event=t},og=(e,t)=>{let n=0,r=0;if(e){const t=e.changedTouches;if(t&&t.length>0){const e=t[0];n=e.clientX,r=e.clientY}else void 0!==e.pageX&&(n=e.pageX,r=e.pageY)}t.currentX=n,t.currentY=r},ag=e=>e.timeStamp||Date.now();
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
class sg{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const n=this.m.get(e);return void 0!==n?n:t}getBoolean(e,t=!1){const n=this.m.get(e);return void 0===n?t:"string"==typeof n?"true"===n:!!n}getNumber(e,t){const n=parseFloat(this.m.get(e));return isNaN(n)?void 0!==t?t:NaN:n}set(e,t){this.m.set(e,t)}}const lg=new sg,ug=(e,t)=>e.substr(0,t.length)===t,cg="ionic:",dg="ionic-persist-config",hg=(e,t)=>("string"==typeof e&&(t=e,e=void 0),(e=>pg(e))(e).includes(t)),pg=(e=window)=>{if(void 0===e)return[];e.Ionic=e.Ionic||{};let t=e.Ionic.platforms;return null==t&&(t=e.Ionic.platforms=fg(e),t.forEach((t=>e.document.documentElement.classList.add(`plt-${t}`)))),t},fg=e=>{const t=lg.get("platform");return Object.keys(_g).filter((n=>{const r=null==t?void 0:t[n];return"function"==typeof r?r(e):_g[n](e)}))},mg=e=>!!wg(e,/iPad/i)||!(!wg(e,/Macintosh/i)||!vg(e)),gg=e=>wg(e,/android|sink/i),vg=e=>kg(e,"(any-pointer:coarse)"),yg=e=>bg(e)||xg(e),bg=e=>!!(e.cordova||e.phonegap||e.PhoneGap),xg=e=>{const t=e.Capacitor;return!!(null==t?void 0:t.isNative)},wg=(e,t)=>t.test(e.navigator.userAgent),kg=(e,t)=>{var n;return null===(n=e.matchMedia)||void 0===n?void 0:n.call(e,t).matches},_g={ipad:mg,iphone:e=>wg(e,/iPhone/i),ios:e=>wg(e,/iPhone|iPod/i)||mg(e),android:gg,phablet:e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),i=Math.max(t,n);return r>390&&r<520&&i>620&&i<800},tablet:e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),i=Math.max(t,n);return mg(e)||(e=>gg(e)&&!wg(e,/mobile/i))(e)||r>460&&r<820&&i>780&&i<1400},cordova:bg,capacitor:xg,electron:e=>wg(e,/electron/i),pwa:e=>{var t;return!(!(null===(t=e.matchMedia)||void 0===t?void 0:t.call(e,"(display-mode: standalone)").matches)&&!e.navigator.standalone)},mobile:vg,mobileweb:e=>vg(e)&&!yg(e),desktop:e=>!vg(e),hybrid:yg};let Eg;const Cg=e=>e&&(e=>Vf(e).$modeName$)(e)||Eg,Ig=(e={})=>{if("undefined"==typeof window)return;const t=window.document,n=window,r=n.Ionic=n.Ionic||{},i={};var o;e._ael&&(i.ael=e._ael),e._rel&&(i.rel=e._rel),e._ce&&(i.ce=e._ce),o=i,Object.assign(Yf,o);const a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(e=>{try{const t=e.sessionStorage.getItem(dg);return null!==t?JSON.parse(t):{}}catch(AW){return{}}})(n)),{persistConfig:!1}),r.config),(e=>{const t={};return e.location.search.slice(1).split("&").map((e=>e.split("="))).map((([e,t])=>[decodeURIComponent(e),decodeURIComponent(t)])).filter((([e])=>ug(e,cg))).map((([e,t])=>[e.slice(cg.length),t])).forEach((([e,n])=>{t[e]=n})),t})(n)),e);lg.reset(a),lg.getBoolean("persistConfig")&&((e,t)=>{try{e.sessionStorage.setItem(dg,JSON.stringify(t))}catch(AW){return}})(n,a),pg(n),r.config=lg,r.mode=Eg=lg.get("mode",t.documentElement.getAttribute("mode")||(hg(n,"ios")?"ios":"md")),lg.set("mode",Eg),t.documentElement.setAttribute("mode",Eg),t.documentElement.classList.add(Eg),lg.getBoolean("_testing")&&lg.set("animated",!1);const s=e=>{var t;return null===(t=e.tagName)||void 0===t?void 0:t.startsWith("ION-")},l=e=>["ios","md"].includes(e);var u;u=e=>{for(;e;){const t=e.mode||e.getAttribute("mode");if(t){if(l(t))return t;s(e)&&console.warn('Invalid ionic mode: "'+t+'", expected: "ios" or "md"')}e=e.parentElement}return Eg},Wf.push(u)},Sg=e=>{try{if(e instanceof Og)return e.value;if(!Ag()||"string"!=typeof e||""===e)return e;if(e.includes("onload="))return"";const t=document.createDocumentFragment(),n=document.createElement("div");t.appendChild(n),n.innerHTML=e,Dg.forEach((e=>{const n=t.querySelectorAll(e);for(let r=n.length-1;r>=0;r--){const e=n[r];e.parentNode?e.parentNode.removeChild(e):t.removeChild(e);const i=Tg(e);for(let t=0;t<i.length;t++)Ng(i[t])}}));const r=Tg(t);for(let e=0;e<r.length;e++)Ng(r[e]);const i=document.createElement("div");i.appendChild(t);const o=i.querySelector("div");return null!==o?o.innerHTML:i.innerHTML}catch(t){return console.error(t),""}},Ng=e=>{if(e.nodeType&&1!==e.nodeType)return;if("undefined"!=typeof NamedNodeMap&&!(e.attributes instanceof NamedNodeMap))return void e.remove();for(let n=e.attributes.length-1;n>=0;n--){const t=e.attributes.item(n),r=t.name;if(!Rg.includes(r.toLowerCase())){e.removeAttribute(r);continue}const i=t.value,o=e[r];(null!=i&&i.toLowerCase().includes("javascript:")||null!=o&&o.toLowerCase().includes("javascript:"))&&e.removeAttribute(r)}const t=Tg(e);for(let n=0;n<t.length;n++)Ng(t[n])},Tg=e=>null!=e.children?e.children:e.childNodes,Ag=()=>{var e;const t=window,n=null===(e=null==t?void 0:t.Ionic)||void 0===e?void 0:e.config;return!n||(n.get?n.get("sanitizerEnabled",!0):!0===n.sanitizerEnabled||void 0===n.sanitizerEnabled)},Rg=["class","id","href","src","name","slot"],Dg=["script","style","iframe","meta","link","object","embed"];class Og{constructor(e){this.value=e}}const Pg=(e,t)=>null!==t.closest(e),Lg=(e,t)=>"string"==typeof e&&e.length>0?Object.assign({"ion-color":!0,[`ion-color-${e}`]:!0},t):t,Mg=e=>{const t={};return(e=>void 0!==e?(Array.isArray(e)?e:e.split(" ")).filter((e=>null!=e)).map((e=>e.trim())).filter((e=>""!==e)):[])(e).forEach((e=>t[e]=!0)),t},Fg=/^[a-z][a-z0-9+\-.]*:/,jg=async(e,t,n,r)=>{if(null!=e&&"#"!==e[0]&&!Fg.test(e)){const i=document.querySelector("ion-router");if(i)return null!=t&&t.preventDefault(),i.push(e,n,r)}return!1},Bg=()=>lg.get("experimentalCloseWatcher",!1)&&void 0!==am&&"CloseWatcher"in am,Vg=Object.freeze(Object.defineProperty({__proto__:null,MENU_BACK_BUTTON_PRIORITY:99,OVERLAY_BACK_BUTTON_PRIORITY:100,blockHardwareBackButton:()=>{document.addEventListener("backbutton",(()=>{}))},shoudUseCloseWatcher:Bg,startHardwareBackButton:()=>{const e=document;let t=!1;const n=()=>{if(t)return;let n=0,r=[];const i=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(e,t){r.push({priority:e,handler:t,id:n++})}}});e.dispatchEvent(i);const o=()=>{if(r.length>0){let e={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};r.forEach((t=>{t.priority>=e.priority&&(e=t)})),t=!0,r=r.filter((t=>t.id!==e.id)),(async e=>{try{if(null==e?void 0:e.handler){const t=e.handler(o);null!=t&&await t}}catch(AW){console.error(AW)}})(e).then((()=>t=!1))}};o()};if(Bg()){let e;const t=()=>{null==e||e.destroy(),e=new am.CloseWatcher,e.onclose=()=>{n(),t()}};t()}else e.addEventListener("backbutton",n)}},Symbol.toStringTag,{value:"Module"})),zg=(e,...t)=>console.warn(`[Ionic Warning]: ${e}`,...t),Ug=async(e,t,n,r,i,o)=>{var a;if(e)return e.attachViewToDom(t,n,i,r);if(!(o||"string"==typeof n||n instanceof HTMLElement))throw new Error("framework delegate is missing");const s="string"==typeof n?null===(a=t.ownerDocument)||void 0===a?void 0:a.createElement(n):n;return r&&r.forEach((e=>s.classList.add(e))),i&&Object.assign(s,i),t.appendChild(s),await new Promise((e=>lm(s,e))),s};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
let $g=0,qg=0;const Wg=new WeakMap,Hg=e=>({create:t=>Kg(e,t),dismiss:(t,n,r)=>tv(document,t,n,e,r),getTop:async()=>rv(document,e)}),Gg=Hg("ion-toast"),Kg=(e,t)=>"undefined"!=typeof window&&void 0!==window.customElements?window.customElements.whenDefined(e).then((()=>{const n=document.createElement(e);return n.classList.add("overlay-hidden"),Object.assign(n,Object.assign(Object.assign({},t),{hasController:!0})),av(document).appendChild(n),new Promise((e=>lm(n,e)))})):Promise.resolve(),Yg='[tabindex]:not([tabindex^="-"]):not([hidden]):not([disabled]), input:not([type=hidden]):not([tabindex^="-"]):not([hidden]):not([disabled]), textarea:not([tabindex^="-"]):not([hidden]):not([disabled]), button:not([tabindex^="-"]):not([hidden]):not([disabled]), select:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable:not([tabindex^="-"]):not([hidden]):not([disabled]), .ion-focusable[disabled="false"]:not([tabindex^="-"]):not([hidden])',Xg=(e,t)=>{const n=e.querySelector(Yg);Jg(n,t)},Qg=(e,t)=>{const n=Array.from(e.querySelectorAll(Yg)),r=n.length>0?n[n.length-1]:null;Jg(r,t)},Jg=(e,t)=>{let n=e;const r=null==e?void 0:e.shadowRoot;r&&(n=r.querySelector(Yg)||e),n?(e=>{if(e.focus(),e.classList.contains("ion-focusable")){const t=e.closest("ion-app");t&&t.setFocus([e])}})(n):t.focus()},Zg=(e,t)=>{const n=rv(t,"ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover"),r=e.target;n&&r&&(n.classList.contains("ion-disable-focus-trap")||(n.shadowRoot?(()=>{if(n.contains(r))n.lastFocus=r;else if("ION-TOAST"===r.tagName)Jg(n.lastFocus,n);else{const e=n.lastFocus;Xg(n,n),e===t.activeElement&&Qg(n,n),n.lastFocus=t.activeElement}})():(()=>{if(n===r)n.lastFocus=void 0;else if("ION-TOAST"===r.tagName)Jg(n.lastFocus,n);else{const e=fm(n);if(!e.contains(r))return;const i=e.querySelector(".ion-overlay-wrapper");if(!i)return;if(i.contains(r)||r===e.querySelector("ion-backdrop"))n.lastFocus=r;else{const e=n.lastFocus;Xg(i,n),e===t.activeElement&&Qg(i,n),n.lastFocus=t.activeElement}}})()))},ev=e=>{0===$g&&($g=1,e.addEventListener("focus",(t=>{Zg(t,e)}),!0),e.addEventListener("ionBackButton",(t=>{const n=rv(e);(null==n?void 0:n.backdropDismiss)&&t.detail.register(100,(()=>{n.dismiss(void 0,hv)}))})),Bg()||e.addEventListener("keydown",(t=>{if("Escape"===t.key){const t=rv(e);(null==t?void 0:t.backdropDismiss)&&t.dismiss(void 0,hv)}})))},tv=(e,t,n,r,i)=>{const o=rv(e,r,i);return o?o.dismiss(t,n):Promise.reject("overlay does not exist")},nv=(e,t)=>((e,t)=>(void 0===t&&(t="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(e.querySelectorAll(t)).filter((e=>e.overlayIndex>0))))(e,t).filter((e=>!e.classList.contains("overlay-hidden"))),rv=(e,t,n)=>{const r=nv(e,t);return void 0===n?r[r.length-1]:r.find((e=>e.id===n))},iv=(e=!1)=>{const t=av(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},ov=async e=>{let t=document.activeElement;if(!t)return;const n=null==t?void 0:t.shadowRoot;n&&(t=n.querySelector(Yg)||t),await e.onDidDismiss(),null!==document.activeElement&&document.activeElement!==document.body||t.focus()},av=e=>e.querySelector("ion-app")||e.body,sv=async(e,t,n,r)=>{n.classList.remove("overlay-hidden");const i=t(e.el,r);e.animated&&lg.getBoolean("animated",!0)||i.duration(0),e.keyboardClose&&i.beforeAddWrite((()=>{const e=n.ownerDocument.activeElement;(null==e?void 0:e.matches("input,ion-input, ion-textarea"))&&e.blur()}));const o=Wg.get(e)||[];return Wg.set(e,[...o,i]),await i.play(),!0},lv=(e,t)=>{let n;const r=new Promise((e=>n=e));return uv(e,t,(e=>{n(e.detail)})),r},uv=(e,t,n)=>{const r=i=>{pm(e,t,r),n(i)};hm(e,t,r)},cv=e=>"cancel"===e||e===hv,dv=e=>e(),hv="backdrop",pv="gesture",fv=e=>{let t,n=!1;const r=(()=>{let e,t;return{attachViewToDom:async(n,r,i={},o=[])=>{var a,s;let l;if(e=n,r){const t="string"==typeof r?null===(a=e.ownerDocument)||void 0===a?void 0:a.createElement(r):r;o.forEach((e=>t.classList.add(e))),Object.assign(t,i),e.appendChild(t),l=t,await new Promise((e=>lm(t,e)))}else if(e.children.length>0&&("ION-MODAL"===e.tagName||"ION-POPOVER"===e.tagName)&&!(l=e.children[0]).classList.contains("ion-delegate-host")){const t=null===(s=e.ownerDocument)||void 0===s?void 0:s.createElement("div");t.classList.add("ion-delegate-host"),o.forEach((e=>t.classList.add(e))),t.append(...e.children),e.appendChild(t),l=t}const u=document.querySelector("ion-app")||document.body;return t=document.createComment("ionic teleport"),e.parentNode.insertBefore(t,e),u.appendChild(e),null!=l?l:e},removeViewFromDom:()=>(e&&t&&(t.parentNode.insertBefore(e,t),t.remove()),Promise.resolve())}})(),i=(i=!1)=>{if(t&&!i)return{delegate:t,inline:n};const{el:o,hasController:a,delegate:s}=e,l=o.parentNode;return n=null!==l&&!a,t=n?s||r:s,{inline:n,delegate:t}};return{attachViewToDom:async t=>{const{delegate:n}=i(!0);if(n)return await n.attachViewToDom(e.el,t);const{hasController:r}=e;if(r&&void 0!==t)throw new Error("framework delegate is missing");return null},removeViewFromDom:()=>{const{delegate:t}=i();t&&void 0!==e.el&&t.removeViewFromDom(e.el.parentElement,e.el)}}};function mv(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
let gv;"function"==typeof SuppressedError&&SuppressedError;const vv=(e,t)=>{const n=(()=>{if("undefined"==typeof window)return new Map;if(!gv){const e=window;e.Ionicons=e.Ionicons||{},gv=e.Ionicons.map=e.Ionicons.map||new Map}return gv})().get(e);if(n)return n;try{return Bp(`svg/${e}.svg`)}catch(AW){console.warn(`[Ionicons Warning]: Could not load icon with name "${e}". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.`,t)}},yv=(e,t,n,r,i)=>(n="ios"===(n&&kv(n))?"ios":"md",r&&"ios"===n?e=kv(r):i&&"md"===n?e=kv(i):(e||!t||xv(t)||(e=t),wv(e)&&(e=kv(e))),wv(e)&&""!==e.trim()?""!==e.replace(/[a-z]|-|\d/gi,"")?null:e:null),bv=e=>wv(e)&&(e=e.trim(),xv(e))?e:null,xv=e=>e.length>0&&/(\/|\.)/.test(e),wv=e=>"string"==typeof e,kv=e=>e.toLowerCase(),_v=e=>{if(1===e.nodeType){if("script"===e.nodeName.toLowerCase())return!1;for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;if(wv(n)&&0===n.toLowerCase().indexOf("on"))return!1}for(let t=0;t<e.childNodes.length;t++)if(!_v(e.childNodes[t]))return!1}return!0},Ev=new Map,Cv=new Map;let Iv;const Sv=(e,t)=>{let n=Cv.get(e);if(!n){if("undefined"==typeof fetch||"undefined"==typeof document)return Ev.set(e,""),Promise.resolve();if((e=>e.startsWith("data:image/svg+xml"))(e)&&(e=>-1!==e.indexOf(";utf8,"))(e)){Iv||(Iv=new DOMParser);const t=Iv.parseFromString(e,"text/html").querySelector("svg");return t&&Ev.set(e,t.outerHTML),Promise.resolve()}n=fetch(e).then((n=>{if(n.ok)return n.text().then((n=>{n&&!1!==t&&(n=(e=>{const t=document.createElement("div");t.innerHTML=e;for(let r=t.childNodes.length-1;r>=0;r--)"svg"!==t.childNodes[r].nodeName.toLowerCase()&&t.removeChild(t.childNodes[r]);const n=t.firstElementChild;if(n&&"svg"===n.nodeName.toLowerCase()){const e=n.getAttribute("class")||"";if(n.setAttribute("class",(e+" s-ion-icon").trim()),_v(n))return t.innerHTML}return""})(n)),Ev.set(e,n||"")}));Ev.set(e,"")})),Cv.set(e,n)}return n},Nv=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.svgContent=void 0,this.isVisible=!1,this.mode=Tv(),this.color=void 0,this.ios=void 0,this.md=void 0,this.flipRtl=void 0,this.name=void 0,this.src=void 0,this.icon=void 0,this.size=void 0,this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=((e,t=[])=>{const n={};return t.forEach((t=>{e.hasAttribute(t)&&(null!==e.getAttribute(t)&&(n[t]=e.getAttribute(t)),e.removeAttribute(t))})),n})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",(()=>{this.isVisible=!0,this.loadIcon()}))}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,n){if(this.lazy&&"undefined"!=typeof window&&window.IntersectionObserver){const r=this.io=new window.IntersectionObserver((e=>{e[0].isIntersecting&&(r.disconnect(),this.io=void 0,n())}),{rootMargin:t});r.observe(e)}else n()}loadIcon(){if(this.isVisible){const e=(e=>{let t=bv(e.src);if(t)return t;if(t=yv(e.name,e.icon,e.mode,e.ios,e.md),t)return vv(t,e);if(e.icon){if(t=bv(e.icon),t)return t;if(t=bv(e.icon[e.mode]),t)return t}return null})(this);e&&(Ev.has(e)?this.svgContent=Ev.get(e):Sv(e,this.sanitize).then((()=>this.svgContent=Ev.get(e))),this.didLoadIcon=!0)}this.iconName=yv(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:t,inheritedAttributes:n,el:r}=this,i=this.mode||"md",o=!!t&&(t.includes("arrow")||t.includes("chevron"))&&!1!==e,a=e||o;return $p(Wp,Object.assign({role:"img",class:Object.assign(Object.assign({[i]:!0},Av(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":a,"icon-rtl":a&&(s=r,s&&""!==s.dir?"rtl"===s.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))})},n),this.svgContent?$p("div",{class:"icon-inner",innerHTML:this.svgContent}):$p("div",{class:"icon-inner"}));var s}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]},void 0,{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}]),Tv=()=>"undefined"!=typeof document&&document.documentElement.getAttribute("mode")||"md",Av=e=>e?{"ion-color":!0,[`ion-color-${e}`]:!0}:null,Rv=Pf(class extends Kf{constructor(){super(),this.__registerHost()}render(){const e=Cg(this);return $p(Wp,{key:"d4da147bb0b0b14684b54d37d04ba5a8f7a7d71d",class:{[e]:!0,[`card-content-${e}`]:!0}})}static get style(){return{ios:"ion-card-content{display:block;position:relative}.card-content-ios{-webkit-padding-start:20px;padding-inline-start:20px;-webkit-padding-end:20px;padding-inline-end:20px;padding-top:20px;padding-bottom:20px;font-size:1rem;line-height:1.4}.card-content-ios h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.5rem;font-weight:normal}.card-content-ios h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:1rem;font-weight:normal}.card-content-ios h3,.card-content-ios h4,.card-content-ios h5,.card-content-ios h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:0.875rem;font-weight:normal}.card-content-ios p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem}ion-card-header+.card-content-ios{padding-top:0}",md:"ion-card-content{display:block;position:relative}.card-content-md{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:13px;padding-bottom:13px;font-size:0.875rem;line-height:1.5}.card-content-md h1{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:1.5rem;font-weight:normal}.card-content-md h2{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:1rem;font-weight:normal}.card-content-md h3,.card-content-md h4,.card-content-md h5,.card-content-md h6{margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:0.875rem;font-weight:normal}.card-content-md p{margin-left:0;margin-right:0;margin-top:0;margin-bottom:2px;font-size:0.875rem;font-weight:normal;line-height:1.5}ion-card-header+.card-content-md{padding-top:0}"}}},[32,"ion-card-content"]),Dv=function(){"undefined"!=typeof customElements&&["ion-card-content"].forEach((e=>{"ion-card-content"===e&&(customElements.get(e)||customElements.define(e,Rv))}))},Ov=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.type="bounded"}async addRipple(e,t){return new Promise((n=>{im((()=>{const r=this.el.getBoundingClientRect(),i=r.width,o=r.height,a=Math.sqrt(i*i+o*o),s=Math.max(o,i),l=this.unbounded?s:a+Lv,u=Math.floor(s*Mv),c=l/u;let d=e-r.left,h=t-r.top;this.unbounded&&(d=.5*i,h=.5*o);const p=d-.5*u,f=h-.5*u,m=.5*i-d,g=.5*o-h;om((()=>{const e=document.createElement("div");e.classList.add("ripple-effect");const t=e.style;t.top=f+"px",t.left=p+"px",t.width=t.height=u+"px",t.setProperty("--final-scale",`${c}`),t.setProperty("--translate-end",`${m}px, ${g}px`),(this.el.shadowRoot||this.el).appendChild(e),setTimeout((()=>{n((()=>{Pv(e)}))}),325)}))}))}))}get unbounded(){return"unbounded"===this.type}render(){const e=Cg(this);return $p(Wp,{key:"a9ff1956627908ee4071002ca018eaa80f87cd59",role:"presentation",class:{[e]:!0,unbounded:this.unbounded}})}get el(){return this}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:strict;pointer-events:none}:host(.unbounded){contain:layout size style}.ripple-effect{border-radius:50%;position:absolute;background-color:currentColor;color:inherit;contain:strict;opacity:0;-webkit-animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;animation:225ms rippleAnimation forwards, 75ms fadeInAnimation forwards;will-change:transform, opacity;pointer-events:none}.fade-out{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1));-webkit-animation:150ms fadeOutAnimation forwards;animation:150ms fadeOutAnimation forwards}@-webkit-keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@keyframes rippleAnimation{from{-webkit-animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);animation-timing-function:cubic-bezier(0.4, 0, 0.2, 1);-webkit-transform:scale(1);transform:scale(1)}to{-webkit-transform:translate(var(--translate-end)) scale(var(--final-scale, 1));transform:translate(var(--translate-end)) scale(var(--final-scale, 1))}}@-webkit-keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@keyframes fadeInAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0}to{opacity:0.16}}@-webkit-keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}@keyframes fadeOutAnimation{from{-webkit-animation-timing-function:linear;animation-timing-function:linear;opacity:0.16}to{opacity:0}}"}},[1,"ion-ripple-effect",{type:[1],addRipple:[64]}]),Pv=e=>{e.classList.add("fade-out"),setTimeout((()=>{e.remove()}),200)},Lv=10,Mv=.5;function Fv(){"undefined"!=typeof customElements&&["ion-ripple-effect"].forEach((e=>{"ion-ripple-effect"===e&&(customElements.get(e)||customElements.define(e,Ov))}))}
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */const jv="undefined"!=typeof window?window:void 0;jv&&jv.CSS&&jv.CSS.supports&&jv.CSS.supports("--a: 0");
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
const Bv=e("i",(e=>e&&""!==e.dir?"rtl"===e.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))),Vv=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionScrollStart=Yp(this,"ionScrollStart",7),this.ionScroll=Yp(this,"ionScroll",7),this.ionScrollEnd=Yp(this,"ionScrollEnd",7),this.watchDog=null,this.isScrolling=!1,this.lastScroll=0,this.queued=!1,this.cTop=-1,this.cBottom=-1,this.isMainContent=!0,this.resizeTimeout=null,this.tabsElement=null,this.detail={scrollTop:0,scrollLeft:0,type:"scroll",event:void 0,startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,data:void 0,isScrolling:!0},this.color=void 0,this.fullscreen=!1,this.forceOverscroll=void 0,this.scrollX=!1,this.scrollY=!0,this.scrollEvents=!1}connectedCallback(){if(this.isMainContent=null===this.el.closest("ion-menu, ion-popover, ion-modal"),um(this.el)){const e=this.tabsElement=this.el.closest("ion-tabs");null!==e&&(this.tabsLoadCallback=()=>this.resize(),e.addEventListener("ionTabBarLoaded",this.tabsLoadCallback))}}disconnectedCallback(){if(this.onScrollEnd(),um(this.el)){const{tabsElement:e,tabsLoadCallback:t}=this;null!==e&&void 0!==t&&e.removeEventListener("ionTabBarLoaded",t),this.tabsElement=null,this.tabsLoadCallback=void 0}}onResize(){this.resizeTimeout&&(clearTimeout(this.resizeTimeout),this.resizeTimeout=null),this.resizeTimeout=setTimeout((()=>{null!==this.el.offsetParent&&this.resize()}),100)}shouldForceOverscroll(){const{forceOverscroll:e}=this,t=Cg(this);return void 0===e?"ios"===t&&hg("ios"):e}resize(){this.fullscreen?im((()=>this.readDimensions())):0===this.cTop&&0===this.cBottom||(this.cTop=this.cBottom=0,Nf(this))}readDimensions(){const e=zv(this.el),t=Math.max(this.el.offsetTop,0),n=Math.max(e.offsetHeight-t-this.el.offsetHeight,0);(t!==this.cTop||n!==this.cBottom)&&(this.cTop=t,this.cBottom=n,Nf(this))}onScroll(e){const t=Date.now(),n=!this.isScrolling;this.lastScroll=t,n&&this.onScrollStart(),!this.queued&&this.scrollEvents&&(this.queued=!0,im((t=>{this.queued=!1,this.detail.event=e,Uv(this.detail,this.scrollEl,t,n),this.ionScroll.emit(this.detail)})))}async getScrollElement(){return this.scrollEl||await new Promise((e=>lm(this.el,e))),Promise.resolve(this.scrollEl)}async getBackgroundElement(){return this.backgroundContentEl||await new Promise((e=>lm(this.el,e))),Promise.resolve(this.backgroundContentEl)}scrollToTop(e=0){return this.scrollToPoint(void 0,0,e)}async scrollToBottom(e=0){const t=await this.getScrollElement(),n=t.scrollHeight-t.clientHeight;return this.scrollToPoint(void 0,n,e)}async scrollByPoint(e,t,n){const r=await this.getScrollElement();return this.scrollToPoint(e+r.scrollLeft,t+r.scrollTop,n)}async scrollToPoint(e,t,n=0){const r=await this.getScrollElement();if(n<32)return null!=t&&(r.scrollTop=t),void(null!=e&&(r.scrollLeft=e));let i,o=0;const a=new Promise((e=>i=e)),s=r.scrollTop,l=r.scrollLeft,u=null!=t?t-s:0,c=null!=e?e-l:0,d=e=>{const t=Math.min(1,(e-o)/n)-1,a=Math.pow(t,3)+1;0!==u&&(r.scrollTop=Math.floor(a*u+s)),0!==c&&(r.scrollLeft=Math.floor(a*c+l)),a<1?requestAnimationFrame(d):i()};return requestAnimationFrame((e=>{o=e,d(e)})),a}onScrollStart(){this.isScrolling=!0,this.ionScrollStart.emit({isScrolling:!0}),this.watchDog&&clearInterval(this.watchDog),this.watchDog=setInterval((()=>{this.lastScroll<Date.now()-120&&this.onScrollEnd()}),100)}onScrollEnd(){this.watchDog&&clearInterval(this.watchDog),this.watchDog=null,this.isScrolling&&(this.isScrolling=!1,this.ionScrollEnd.emit({isScrolling:!1}))}render(){const{isMainContent:e,scrollX:t,scrollY:n,el:r}=this,i=Bv(r)?"rtl":"ltr",o=Cg(this),a=this.shouldForceOverscroll(),s="ios"===o,l=e?"main":"div";return this.resize(),$p(Wp,{key:"65d85e1f7f85876a76eec79addc4bd9f697a5d84",class:Lg(this.color,{[o]:!0,"content-sizing":Pg("ion-popover",this.el),overscroll:a,[`content-${i}`]:!0}),style:{"--offset-top":`${this.cTop}px`,"--offset-bottom":`${this.cBottom}px`}},$p("div",{key:"e2ac474a62cbc864772c497469100436f41289ff",ref:e=>this.backgroundContentEl=e,id:"background-content",part:"background"}),$p(l,{key:"567a4bc2bcb13adfd987b088f95ac4b20b789f2c",class:{"inner-scroll":!0,"scroll-x":t,"scroll-y":n,overscroll:(t||n)&&a},ref:e=>this.scrollEl=e,onScroll:this.scrollEvents?e=>this.onScroll(e):void 0,part:"scroll"},$p("slot",{key:"13909f87dd9f49bf1664ad95038499da376b9480"})),s?$p("div",{class:"transition-effect"},$p("div",{class:"transition-cover"}),$p("div",{class:"transition-shadow"})):null,$p("slot",{key:"05b56c139e203cfd1e3dd08054e99328e97e9243",name:"fixed"}))}get el(){return this}static get style(){return':host{--background:var(--ion-background-color, #fff);--color:var(--ion-text-color, #000);--padding-top:0px;--padding-bottom:0px;--padding-start:0px;--padding-end:0px;--keyboard-offset:0px;--offset-top:0px;--offset-bottom:0px;--overflow:auto;display:block;position:relative;-ms-flex:1;flex:1;width:100%;height:100%;margin:0 !important;padding:0 !important;font-family:var(--ion-font-family, inherit);contain:size style}:host(.ion-color) .inner-scroll{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.outer-content){--background:var(--ion-color-step-50, #f2f2f2)}#background-content{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);position:absolute;background:var(--background)}.inner-scroll{left:0px;right:0px;top:calc(var(--offset-top) * -1);bottom:calc(var(--offset-bottom) * -1);-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:calc(var(--padding-top) + var(--offset-top));padding-bottom:calc(var(--padding-bottom) + var(--keyboard-offset) + var(--offset-bottom));position:absolute;color:var(--color);-webkit-box-sizing:border-box;box-sizing:border-box;overflow:hidden;-ms-touch-action:pan-x pan-y pinch-zoom;touch-action:pan-x pan-y pinch-zoom}.scroll-y,.scroll-x{-webkit-overflow-scrolling:touch;z-index:0;will-change:scroll-position}.scroll-y{overflow-y:var(--overflow);overscroll-behavior-y:contain}.scroll-x{overflow-x:var(--overflow);overscroll-behavior-x:contain}.overscroll::before,.overscroll::after{position:absolute;width:1px;height:1px;content:""}.overscroll::before{bottom:-1px}.overscroll::after{top:-1px}:host(.content-sizing){display:-ms-flexbox;display:flex;-ms-flex-direction:column;flex-direction:column;min-height:0;contain:none}:host(.content-sizing) .inner-scroll{position:relative;top:0;bottom:0;margin-top:calc(var(--offset-top) * -1);margin-bottom:calc(var(--offset-bottom) * -1)}.transition-effect{display:none;position:absolute;width:100%;height:100vh;opacity:0;pointer-events:none}:host(.content-ltr) .transition-effect{left:-100%;}:host(.content-rtl) .transition-effect{right:-100%;}.transition-cover{position:absolute;right:0;width:100%;height:100%;background:black;opacity:0.1}.transition-shadow{display:block;position:absolute;width:100%;height:100%;-webkit-box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03);box-shadow:inset -9px 0 9px 0 rgba(0, 0, 100, 0.03)}:host(.content-ltr) .transition-shadow{right:0;}:host(.content-rtl) .transition-shadow{left:0;-webkit-transform:scaleX(-1);transform:scaleX(-1)}::slotted([slot=fixed]){position:absolute;-webkit-transform:translateZ(0);transform:translateZ(0)}'}},[1,"ion-content",{color:[513],fullscreen:[4],forceOverscroll:[1028,"force-overscroll"],scrollX:[4,"scroll-x"],scrollY:[4,"scroll-y"],scrollEvents:[4,"scroll-events"],getScrollElement:[64],getBackgroundElement:[64],scrollToTop:[64],scrollToBottom:[64],scrollByPoint:[64],scrollToPoint:[64]},[[9,"resize","onResize"]]]),zv=e=>{const t=e.closest("ion-tabs");if(t)return t;const n=e.closest("ion-app, ion-page, .ion-page, page-inner, .popover-content");return n||(e=>{var t;return e.parentElement?e.parentElement:(null===(t=e.parentNode)||void 0===t?void 0:t.host)?e.parentNode.host:null})(e)},Uv=(e,t,n,r)=>{const i=e.currentX,o=e.currentY,a=e.currentTime,s=t.scrollLeft,l=t.scrollTop,u=n-a;if(r&&(e.startTime=n,e.startX=s,e.startY=l,e.velocityX=e.velocityY=0),e.currentTime=n,e.currentX=e.scrollLeft=s,e.currentY=e.scrollTop=l,e.deltaX=s-e.startX,e.deltaY=l-e.startY,u>0&&u<100){const t=(s-i)/u,n=(l-o)/u;e.velocityX=.7*t+.3*e.velocityX,e.velocityY=.7*n+.3*e.velocityY}},$v=function(){"undefined"!=typeof customElements&&["ion-content"].forEach((e=>{"ion-content"===e&&(customElements.get(e)||customElements.define(e,Vv))}))},qv=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionFocus=Yp(this,"ionFocus",7),this.ionBlur=Yp(this,"ionBlur",7),this.inItem=!1,this.inListHeader=!1,this.inToolbar=!1,this.formButtonEl=null,this.formEl=null,this.inheritedAttributes={},this.handleClick=e=>{const{el:t}=this;"button"===this.type?jg(this.href,e,this.routerDirection,this.routerAnimation):(e=>!!e.shadowRoot&&!!e.attachShadow)(t)&&this.submitForm(e)},this.onFocus=()=>{this.ionFocus.emit()},this.onBlur=()=>{this.ionBlur.emit()},this.color=void 0,this.buttonType="button",this.disabled=!1,this.expand=void 0,this.fill=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.download=void 0,this.href=void 0,this.rel=void 0,this.shape=void 0,this.size=void 0,this.strong=!1,this.target=void 0,this.type="button",this.form=void 0}disabledChanged(){const{disabled:e}=this;this.formButtonEl&&(this.formButtonEl.disabled=e)}renderHiddenButton(){const e=this.formEl=this.findForm();if(e){const{formButtonEl:t}=this;if(null!==t&&e.contains(t))return;const n=this.formButtonEl=document.createElement("button");n.type=this.type,n.style.display="none",n.disabled=this.disabled,e.appendChild(n)}}componentWillLoad(){this.inToolbar=!!this.el.closest("ion-buttons"),this.inListHeader=!!this.el.closest("ion-list-header"),this.inItem=!!this.el.closest("ion-item")||!!this.el.closest("ion-item-divider"),this.inheritedAttributes=((e,t)=>{let n=dm;return t&&t.length>0&&(n=n.filter((e=>!t.includes(e)))),cm(e,n)})(this.el)}get hasIconOnly(){return!!this.el.querySelector('[slot="icon-only"]')}get rippleType(){return(void 0===this.fill||"clear"===this.fill)&&this.hasIconOnly&&this.inToolbar?"unbounded":"bounded"}findForm(){const{form:e}=this;if(e instanceof HTMLFormElement)return e;if("string"==typeof e){const t=document.getElementById(e);return t?t instanceof HTMLFormElement?t:(zg(`Form with selector: "#${e}" could not be found. Verify that the id is attached to a <form> element.`,this.el),null):(zg(`Form with selector: "#${e}" could not be found. Verify that the id is correct and the form is rendered in the DOM.`,this.el),null)}return void 0!==e?(zg('The provided "form" element is invalid. Verify that the form is a HTMLFormElement and rendered in the DOM.',this.el),null):this.el.closest("form")}submitForm(e){this.formEl&&this.formButtonEl&&(e.preventDefault(),this.formButtonEl.click())}render(){const e=Cg(this),{buttonType:t,type:n,disabled:r,rel:i,target:o,size:a,href:s,color:l,expand:u,hasIconOnly:c,shape:d,strong:h,inheritedAttributes:p}=this,f=void 0===a&&this.inItem?"small":a,m=void 0===s?"button":"a",g="button"===m?{type:n}:{download:this.download,href:s,rel:i,target:o};let v=this.fill;return null==v&&(v=this.inToolbar||this.inListHeader?"clear":"solid"),"button"!==n&&this.renderHiddenButton(),$p(Wp,{key:"8533314504b286ec10e26722f93376d86a7ca1c9",onClick:this.handleClick,"aria-disabled":r?"true":null,class:Lg(l,{[e]:!0,[t]:!0,[`${t}-${u}`]:void 0!==u,[`${t}-${f}`]:void 0!==f,[`${t}-${d}`]:void 0!==d,[`${t}-${v}`]:!0,[`${t}-strong`]:h,"in-toolbar":Pg("ion-toolbar",this.el),"in-toolbar-color":Pg("ion-toolbar[color]",this.el),"in-buttons":Pg("ion-buttons",this.el),"button-has-icon-only":c,"button-disabled":r,"ion-activatable":!0,"ion-focusable":!0})},$p(m,Object.assign({key:"79bf020fdac0c2ceb2b05547b3e5a9a11e60abb4"},g,{class:"button-native",part:"native",disabled:r,onFocus:this.onFocus,onBlur:this.onBlur},p),$p("span",{key:"109481ba86102647023b746b054b2718d3c9d92a",class:"button-inner"},$p("slot",{key:"f824ddd9f988b9bd33136555b16aa790d9291b49",name:"icon-only"}),$p("slot",{key:"d614f4e430792c5f93be4b3a8c57a826d74b9cfd",name:"start"}),$p("slot",{key:"95d00c8a980c31cc7f84732f51a17a0cd285a7cb"}),$p("slot",{key:"a228ff52cbe04dc9d2e22bb66611ecc96d130e6f",name:"end"})),"md"===e&&$p("ion-ripple-effect",{type:this.rippleType})))}get el(){return this}static get watchers(){return{disabled:["disabledChanged"]}}static get style(){return{ios:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:14px;--padding-top:13px;--padding-bottom:13px;--padding-start:1em;--padding-end:1em;--transition:background-color, opacity 100ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:3.1em;font-size:min(1rem, 48px);font-weight:500;letter-spacing:0}:host(.button-solid){--background-activated:var(--ion-color-primary-shade, #3171e0);--background-focused:var(--ion-color-primary-shade, #3171e0);--background-hover:var(--ion-color-primary-tint, #4c8dff);--background-activated-opacity:1;--background-focused-opacity:1;--background-hover-opacity:1}:host(.button-outline){--border-radius:14px;--border-width:1px;--border-style:solid;--background-activated:var(--ion-color-primary, #3880ff);--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;--color-activated:var(--ion-color-primary-contrast, #fff)}:host(.button-clear){--background-activated:transparent;--background-activated-opacity:0;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:transparent;--background-focused-opacity:.1;font-size:min(1.0625rem, 51px);font-weight:normal}:host(.in-buttons){font-size:clamp(17px, 1.0625rem, 21.08px);font-weight:400}:host(.button-large){--border-radius:16px;--padding-top:17px;--padding-start:1em;--padding-end:1em;--padding-bottom:17px;min-height:3.1em;font-size:min(1.25rem, 60px)}:host(.button-small){--border-radius:6px;--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:min(0.8125rem, 39px)}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-strong){font-weight:600}:host(.button-outline.ion-focused.ion-color) .button-native,:host(.button-clear.ion-focused.ion-color) .button-native{color:var(--ion-color-base)}:host(.button-outline.ion-focused.ion-color) .button-native::after,:host(.button-clear.ion-focused.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-shade)}@media (any-hover: hover){:host(.button-clear:not(.ion-activated):hover),:host(.button-outline:not(.ion-activated):hover){opacity:0.6}:host(.button-clear.ion-color:hover) .button-native,:host(.button-outline.ion-color:hover) .button-native{color:var(--ion-color-base)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:transparent}:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-tint)}:host(:hover.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color):not(.ion-activated)) .button-native::after{background:#fff;opacity:0.1}}:host(.button-clear.ion-activated){opacity:0.4}:host(.button-outline.ion-activated.ion-color) .button-native{color:var(--ion-color-contrast)}:host(.button-outline.ion-activated.ion-color) .button-native::after{background:var(--ion-color-base)}:host(.button-solid.ion-color.ion-activated) .button-native::after{background:var(--ion-color-shade)}',md:':host{--overflow:hidden;--ripple-color:currentColor;--border-width:initial;--border-color:initial;--border-style:initial;--color-activated:var(--color);--color-focused:var(--color);--color-hover:var(--color);--box-shadow:none;display:inline-block;width:auto;color:var(--color);font-family:var(--ion-font-family, inherit);text-align:center;text-decoration:none;white-space:nowrap;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;vertical-align:top;vertical-align:-webkit-baseline-middle;-webkit-font-kerning:none;font-kerning:none}:host(.button-disabled){cursor:default;opacity:0.5;pointer-events:none}:host(.button-solid){--background:var(--ion-color-primary, #3880ff);--color:var(--ion-color-primary-contrast, #fff)}:host(.button-outline){--border-color:var(--ion-color-primary, #3880ff);--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-clear){--border-width:0;--background:transparent;--color:var(--ion-color-primary, #3880ff)}:host(.button-block){display:block}:host(.button-block) .button-native{margin-left:0;margin-right:0;width:100%;clear:both;contain:content}:host(.button-block) .button-native::after{clear:both}:host(.button-full){display:block}:host(.button-full) .button-native{margin-left:0;margin-right:0;width:100%;contain:content}:host(.button-full:not(.button-round)) .button-native{border-radius:0;border-right-width:0;border-left-width:0}.button-native{border-radius:var(--border-radius);-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-align:center;align-items:center;width:100%;height:100%;min-height:inherit;-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:var(--background);line-height:1;-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow);contain:layout style;cursor:pointer;opacity:var(--opacity);overflow:var(--overflow);z-index:0;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-appearance:none;-moz-appearance:none;appearance:none}.button-native::-moz-focus-inner{border:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:row nowrap;flex-flow:row nowrap;-ms-flex-negative:0;flex-shrink:0;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:100%;height:100%;z-index:1}::slotted([slot=start]),::slotted([slot=end]){-ms-flex-negative:0;flex-shrink:0}::slotted(ion-icon){font-size:1.35em;pointer-events:none}::slotted(ion-icon[slot=start]){-webkit-margin-start:-0.3em;margin-inline-start:-0.3em;-webkit-margin-end:0.3em;margin-inline-end:0.3em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=end]){-webkit-margin-start:0.3em;margin-inline-start:0.3em;-webkit-margin-end:-0.2em;margin-inline-end:-0.2em;margin-top:0;margin-bottom:0}::slotted(ion-icon[slot=icon-only]){font-size:1.8em}ion-ripple-effect{color:var(--ripple-color)}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}:host(.ion-focused){color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){:host(:hover){color:var(--color-hover)}:host(:hover) .button-native::after{background:var(--background-hover);opacity:var(--background-hover-opacity)}}:host(.ion-activated){color:var(--color-activated)}:host(.ion-activated) .button-native::after{background:var(--background-activated);opacity:var(--background-activated-opacity)}:host(.button-solid.ion-color) .button-native{background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.button-outline.ion-color) .button-native{border-color:var(--ion-color-base);background:transparent;color:var(--ion-color-base)}:host(.button-clear.ion-color) .button-native{background:transparent;color:var(--ion-color-base)}:host(.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{color:var(--ion-toolbar-color, var(--color))}:host(.button-outline.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{border-color:var(--ion-toolbar-color, var(--color, var(--border-color)))}:host(.button-solid.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--background));color:var(--ion-toolbar-background, var(--color))}:host(.button-outline.ion-activated.in-toolbar:not(.ion-color):not(.in-toolbar-color)) .button-native{background:var(--ion-toolbar-color, var(--color));color:var(--ion-toolbar-background, var(--background), var(--ion-color-primary-contrast, #fff))}:host{--border-radius:4px;--padding-top:8px;--padding-bottom:8px;--padding-start:1.1em;--padding-end:1.1em;--transition:box-shadow 280ms cubic-bezier(.4, 0, .2, 1),\n                background-color 15ms linear,\n                color 15ms linear;-webkit-margin-start:2px;margin-inline-start:2px;-webkit-margin-end:2px;margin-inline-end:2px;margin-top:4px;margin-bottom:4px;min-height:36px;font-size:0.875rem;font-weight:500;letter-spacing:0.06em;text-transform:uppercase}:host(.button-solid){--background-activated:transparent;--background-hover:var(--ion-color-primary-contrast, #fff);--background-focused:var(--ion-color-primary-contrast, #fff);--background-activated-opacity:0;--background-focused-opacity:.24;--background-hover-opacity:.08;--box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}:host(.button-solid.ion-activated){--box-shadow:0 5px 5px -3px rgba(0, 0, 0, 0.2), 0 8px 10px 1px rgba(0, 0, 0, 0.14), 0 3px 14px 2px rgba(0, 0, 0, 0.12)}:host(.button-outline){--border-width:2px;--border-style:solid;--box-shadow:none;--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-outline.ion-activated.ion-color) .button-native{background:transparent}:host(.button-clear){--background-activated:transparent;--background-focused:var(--ion-color-primary, #3880ff);--background-hover:var(--ion-color-primary, #3880ff);--background-activated-opacity:0;--background-focused-opacity:.12;--background-hover-opacity:.04}:host(.button-round){--border-radius:64px;--padding-top:0;--padding-start:26px;--padding-end:26px;--padding-bottom:0}:host(.button-large){--padding-top:14px;--padding-start:1em;--padding-end:1em;--padding-bottom:14px;min-height:2.8em;font-size:1.25rem}:host(.button-small){--padding-top:4px;--padding-start:0.9em;--padding-end:0.9em;--padding-bottom:4px;min-height:2.1em;font-size:0.8125rem}:host(.button-has-icon-only){--padding-top:0;--padding-bottom:0}:host(.button-strong){font-weight:bold}::slotted(ion-icon[slot=icon-only]){padding-left:0;padding-right:0;padding-top:0;padding-bottom:0}:host(.button-solid.ion-color.ion-focused) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color.ion-focused) .button-native::after,:host(.button-outline.ion-color.ion-focused) .button-native::after{background:var(--ion-color-base)}@media (any-hover: hover){:host(.button-solid.ion-color:hover) .button-native::after{background:var(--ion-color-contrast)}:host(.button-clear.ion-color:hover) .button-native::after,:host(.button-outline.ion-color:hover) .button-native::after{background:var(--ion-color-base)}}'}}},[33,"ion-button",{color:[513],buttonType:[1025,"button-type"],disabled:[516],expand:[513],fill:[1537],routerDirection:[1,"router-direction"],routerAnimation:[16],download:[1],href:[1],rel:[1],shape:[513],size:[513],strong:[4],target:[1],type:[1],form:[1]},void 0,{disabled:["disabledChanged"]}]),Wv=()=>{let e;return{lock:async()=>{const t=e;let n;return e=new Promise((e=>n=e)),void 0!==t&&await t,n}}};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
var Hv,Gv;!function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(Hv||(Hv={})),e("g",Gv),function(e){e.Body="body",e.Ionic="ionic",e.Native="native",e.None="none"}(Gv||e("g",Gv={}));const Kv=e("K",{getEngine(){const e=(()=>{if(void 0!==am)return am.Capacitor})();if(null==e?void 0:e.isPluginAvailable("Keyboard"))return e.Plugins.Keyboard},getResizeMode(){const e=this.getEngine();return(null==e?void 0:e.getResizeMode)?e.getResizeMode().catch((e=>{if(e.code!==Hv.Unimplemented)throw e})):Promise.resolve(void 0)}}),Yv=e=>{if(void 0===sm||e===Gv.None||void 0===e)return null;const t=sm.querySelector("ion-app");return null!=t?t:sm.body},Xv=e=>{const t=Yv(e);return null===t?0:t.clientHeight},Qv=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.fixed=!1}render(){const e=Cg(this);return $p(Wp,{key:"03a8975bb9320192033219fc9e06fe7afa4fae4a",class:{[e]:!0,"grid-fixed":this.fixed}},$p("slot",{key:"8d95abb4614e73a46a274668c13fe7c7f011c537"}))}static get style(){return":host{-webkit-padding-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xs, var(--ion-grid-padding, 5px));-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;display:block;-ms-flex:1;flex:1}@media (min-width: 576px){:host{-webkit-padding-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-sm, var(--ion-grid-padding, 5px))}}@media (min-width: 768px){:host{-webkit-padding-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-md, var(--ion-grid-padding, 5px))}}@media (min-width: 992px){:host{-webkit-padding-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-lg, var(--ion-grid-padding, 5px))}}@media (min-width: 1200px){:host{-webkit-padding-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-start:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));-webkit-padding-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-inline-end:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-top:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px));padding-bottom:var(--ion-grid-padding-xl, var(--ion-grid-padding, 5px))}}:host(.grid-fixed){width:var(--ion-grid-width-xs, var(--ion-grid-width, 100%));max-width:100%}@media (min-width: 576px){:host(.grid-fixed){width:var(--ion-grid-width-sm, var(--ion-grid-width, 540px))}}@media (min-width: 768px){:host(.grid-fixed){width:var(--ion-grid-width-md, var(--ion-grid-width, 720px))}}@media (min-width: 992px){:host(.grid-fixed){width:var(--ion-grid-width-lg, var(--ion-grid-width, 960px))}}@media (min-width: 1200px){:host(.grid-fixed){width:var(--ion-grid-width-xl, var(--ion-grid-width, 1140px))}}:host(.ion-no-padding){--ion-grid-column-padding:0;--ion-grid-column-padding-xs:0;--ion-grid-column-padding-sm:0;--ion-grid-column-padding-md:0;--ion-grid-column-padding-lg:0;--ion-grid-column-padding-xl:0}"}},[1,"ion-grid",{fixed:[4]}]),Jv=function(){"undefined"!=typeof customElements&&["ion-grid"].forEach((e=>{"ion-grid"===e&&(customElements.get(e)||customElements.define(e,Qv))}))};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */class Zv{constructor(e,t){this.component=e,this.params=t,this.state=1}async init(e){if(this.state=2,!this.element){const t=this.component;this.element=await Ug(this.delegate,e,t,["ion-page","ion-page-invisible"],this.params)}}_destroy(){gm(3!==this.state,"view state must be ATTACHED");const e=this.element;e&&(this.delegate?this.delegate.removeViewFromDom(e.parentElement,e):e.remove()),this.nav=void 0,this.state=3}}const ey=(e,t,n)=>!!e&&e.component===t&&vm(e.params,n),ty=(e,t)=>e?e instanceof Zv?e:new Zv(e,t):null,ny=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Yp(this,"ionNavWillLoad",7),this.ionNavWillChange=Yp(this,"ionNavWillChange",3),this.ionNavDidChange=Yp(this,"ionNavDidChange",3),this.transInstr=[],this.gestureOrAnimationInProgress=!1,this.useRouter=!1,this.isTransitioning=!1,this.destroyed=!1,this.views=[],this.didLoad=!1,this.delegate=void 0,this.swipeGesture=void 0,this.animated=!0,this.animation=void 0,this.rootParams=void 0,this.root=void 0}swipeGestureChanged(){this.gesture&&this.gesture.enable(!0===this.swipeGesture)}rootChanged(){void 0!==this.root&&!1!==this.didLoad&&(this.useRouter||void 0!==this.root&&this.setRoot(this.root,this.rootParams))}componentWillLoad(){if(this.useRouter=null!==document.querySelector("ion-router")&&null===this.el.closest("[no-router]"),void 0===this.swipeGesture){const e=Cg(this);this.swipeGesture=lg.getBoolean("swipeBackEnabled","ios"===e)}this.ionNavWillLoad.emit()}async componentDidLoad(){this.didLoad=!0,this.rootChanged(),this.gesture=(await Sp((()=>t.import("./swipe-back-legacy-B-ys164z.js")))).createSwipeBackGesture(this.el,this.canStart.bind(this),this.onStart.bind(this),this.onMove.bind(this),this.onEnd.bind(this)),this.swipeGestureChanged()}connectedCallback(){this.destroyed=!1}disconnectedCallback(){for(const e of this.views)zm(e.element,Nm),e._destroy();this.gesture&&(this.gesture.destroy(),this.gesture=void 0),this.transInstr.length=0,this.views.length=0,this.destroyed=!0}push(e,t,n,r){return this.insert(-1,e,t,n,r)}insert(e,t,n,r,i){return this.insertPages(e,[{component:t,componentProps:n}],r,i)}insertPages(e,t,n,r){return this.queueTrns({insertStart:e,insertViews:t,opts:n},r)}pop(e,t){return this.removeIndex(-1,1,e,t)}popTo(e,t,n){const r={removeStart:-1,removeCount:-1,opts:t};return"object"==typeof e&&e.component?(r.removeView=e,r.removeStart=1):"number"==typeof e&&(r.removeStart=e+1),this.queueTrns(r,n)}popToRoot(e,t){return this.removeIndex(1,-1,e,t)}removeIndex(e,t=1,n,r){return this.queueTrns({removeStart:e,removeCount:t,opts:n},r)}setRoot(e,t,n,r){return this.setPages([{component:e,componentProps:t}],n,r)}setPages(e,t,n){return null!=t||(t={}),!0!==t.animated&&(t.animated=!1),this.queueTrns({insertStart:0,insertViews:e,removeStart:0,removeCount:-1,opts:t},n)}setRouteId(e,t,n,r){const i=this.getActiveSync();if(ey(i,e,t))return Promise.resolve({changed:!1,element:i.element});let o;const a=new Promise((e=>o=e));let s;const l={updateURL:!1,viewIsReady:e=>{let t;const n=new Promise((e=>t=e));return o({changed:!0,element:e,markVisible:async()=>{t(),await s}}),n}};if("root"===n)s=this.setRoot(e,t,l);else{const i=this.views.find((n=>ey(n,e,t)));i?s=this.popTo(i,Object.assign(Object.assign({},l),{direction:"back",animationBuilder:r})):"forward"===n?s=this.push(e,t,Object.assign(Object.assign({},l),{animationBuilder:r})):"back"===n&&(s=this.setRoot(e,t,Object.assign(Object.assign({},l),{direction:"back",animated:!0,animationBuilder:r})))}return a}async getRouteId(){const e=this.getActiveSync();if(e)return{id:e.element.tagName,params:e.params,element:e.element}}async getActive(){return this.getActiveSync()}async getByIndex(e){return this.views[e]}async canGoBack(e){return this.canGoBackSync(e)}async getPrevious(e){return this.getPreviousSync(e)}getLength(){return this.views.length}getActiveSync(){return this.views[this.views.length-1]}canGoBackSync(e=this.getActiveSync()){return!(!e||!this.getPreviousSync(e))}getPreviousSync(e=this.getActiveSync()){if(!e)return;const t=this.views,n=t.indexOf(e);return n>0?t[n-1]:void 0}async queueTrns(e,t){var n,r;if(this.isTransitioning&&(null===(n=e.opts)||void 0===n?void 0:n.skipIfBusy))return!1;const i=new Promise(((t,n)=>{e.resolve=t,e.reject=n}));if(e.done=t,e.opts&&!1!==e.opts.updateURL&&this.useRouter){const t=document.querySelector("ion-router");if(t){const n=await t.canTransition();if(!1===n)return!1;if("string"==typeof n)return t.push(n,e.opts.direction||"back"),!1}}return 0===(null===(r=e.insertViews)||void 0===r?void 0:r.length)&&(e.insertViews=void 0),this.transInstr.push(e),this.nextTrns(),i}success(e,t){if(this.destroyed)this.fireError("nav controller was destroyed",t);else if(t.done&&t.done(e.hasCompleted,e.requiresTransition,e.enteringView,e.leavingView,e.direction),t.resolve(e.hasCompleted),!1!==t.opts.updateURL&&this.useRouter){const t=document.querySelector("ion-router");if(t){const n="back"===e.direction?"back":"forward";t.navChanged(n)}}}failed(e,t){this.destroyed?this.fireError("nav controller was destroyed",t):(this.transInstr.length=0,this.fireError(e,t))}fireError(e,t){t.done&&t.done(!1,!1,e),t.reject&&!this.destroyed?t.reject(e):t.resolve(!1)}nextTrns(){if(this.isTransitioning)return!1;const e=this.transInstr.shift();return!!e&&(this.runTransition(e),!0)}async runTransition(e){try{this.ionNavWillChange.emit(),this.isTransitioning=!0,this.prepareTI(e);const t=this.getActiveSync(),n=this.getEnteringView(e,t);if(!t&&!n)throw new Error("no views in the stack to be removed");n&&1===n.state&&await n.init(this.el),this.postViewInit(n,t,e);const r=(e.enteringRequiresTransition||e.leavingRequiresTransition)&&n!==t;let i;r&&e.opts&&t&&("back"===e.opts.direction&&(e.opts.animationBuilder=e.opts.animationBuilder||(null==n?void 0:n.animationBuilder)),t.animationBuilder=e.opts.animationBuilder),i=r?await this.transition(n,t,e):{hasCompleted:!0,requiresTransition:!1},this.success(i,e),this.ionNavDidChange.emit()}catch(t){this.failed(t,e)}this.isTransitioning=!1,this.nextTrns()}prepareTI(e){var t,n,r;const i=this.views.length;if(null!==(t=e.opts)&&void 0!==t||(e.opts={}),null!==(n=(r=e.opts).delegate)&&void 0!==n||(r.delegate=this.delegate),void 0!==e.removeView){gm(void 0!==e.removeStart,"removeView needs removeStart"),gm(void 0!==e.removeCount,"removeView needs removeCount");const t=this.views.indexOf(e.removeView);if(t<0)throw new Error("removeView was not found");e.removeStart+=t}void 0!==e.removeStart&&(e.removeStart<0&&(e.removeStart=i-1),e.removeCount<0&&(e.removeCount=i-e.removeStart),e.leavingRequiresTransition=e.removeCount>0&&e.removeStart+e.removeCount===i),e.insertViews&&((e.insertStart<0||e.insertStart>i)&&(e.insertStart=i),e.enteringRequiresTransition=e.insertStart===i);const o=e.insertViews;if(!o)return;gm(o.length>0,"length can not be zero");const a=o.map((e=>e instanceof Zv?e:"component"in e?ty(e.component,null===e.componentProps?void 0:e.componentProps):ty(e,void 0))).filter((e=>null!==e));if(0===a.length)throw new Error("invalid views to insert");for(const s of a){s.delegate=e.opts.delegate;const t=s.nav;if(t&&t!==this)throw new Error("inserted view was already inserted");if(3===s.state)throw new Error("inserted view was already destroyed")}e.insertViews=a}getEnteringView(e,t){const n=e.insertViews;if(void 0!==n)return n[n.length-1];const r=e.removeStart;if(void 0!==r){const n=this.views,i=r+e.removeCount;for(let e=n.length-1;e>=0;e--){const o=n[e];if((e<r||e>=i)&&o!==t)return o}}}postViewInit(e,t,n){var r,i,o;gm(t||e,"Both leavingView and enteringView are null"),gm(n.resolve,"resolve must be valid"),gm(n.reject,"reject must be valid");const a=n.opts,{insertViews:s,removeStart:l,removeCount:u}=n;let c;if(void 0!==l&&void 0!==u){gm(l>=0,"removeStart can not be negative"),gm(u>=0,"removeCount can not be negative"),c=[];for(let n=l;n<l+u;n++){const r=this.views[n];void 0!==r&&r!==e&&r!==t&&c.push(r)}null!==(r=a.direction)&&void 0!==r||(a.direction="back")}const d=this.views.length+(null!==(i=null==s?void 0:s.length)&&void 0!==i?i:0)-(null!=u?u:0);if(gm(d>=0,"final balance can not be negative"),0===d)throw console.warn("You can't remove all the pages in the navigation stack. nav.pop() is probably called too many times.",this,this.el),new Error("navigation stack needs at least one root page");if(s){let e=n.insertStart;for(const t of s)this.insertViewAt(t,e),e++;n.enteringRequiresTransition&&(null!==(o=a.direction)&&void 0!==o||(a.direction="forward"))}if(c&&c.length>0){for(const e of c)zm(e.element,Im),zm(e.element,Sm),zm(e.element,Nm);for(const e of c)this.destroyView(e)}}async transition(e,t,n){const r=n.opts,i=r.progressAnimation?e=>{void 0===e||this.gestureOrAnimationInProgress?this.sbAni=e:(this.gestureOrAnimationInProgress=!0,e.onFinish((()=>{this.gestureOrAnimationInProgress=!1}),{oneTimeCallback:!0}),e.progressEnd(0,0,0))}:void 0,o=Cg(this),a=e.element,s=t&&t.element,l=Object.assign(Object.assign({mode:o,showGoBack:this.canGoBackSync(e),baseEl:this.el,progressCallback:i,animated:this.animated&&lg.getBoolean("animated",!0),enteringEl:a,leavingEl:s},r),{animationBuilder:r.animationBuilder||this.animation||lg.get("navAnimation")}),{hasCompleted:u}=await Tm(l);return this.transitionFinish(u,e,t,r)}transitionFinish(e,t,n,r){const i=e?t:n;return i&&this.unmountInactiveViews(i),{hasCompleted:e,requiresTransition:!0,enteringView:t,leavingView:n,direction:r.direction}}insertViewAt(e,t){const n=this.views,r=n.indexOf(e);r>-1?(gm(e.nav===this,"view is not part of the nav"),n.splice(r,1),n.splice(t,0,e)):(gm(!e.nav,"nav is used"),e.nav=this,n.splice(t,0,e))}removeView(e){gm(2===e.state||3===e.state,"view state should be loaded or destroyed");const t=this.views,n=t.indexOf(e);gm(n>-1,"view must be part of the stack"),n>=0&&t.splice(n,1)}destroyView(e){e._destroy(),this.removeView(e)}unmountInactiveViews(e){if(this.destroyed)return;const t=this.views,n=t.indexOf(e);for(let r=t.length-1;r>=0;r--){const e=t[r],i=e.element;i&&(r>n?(zm(i,Nm),this.destroyView(e)):r<n&&$m(i,!0))}}canStart(){return!this.gestureOrAnimationInProgress&&!!this.swipeGesture&&!this.isTransitioning&&0===this.transInstr.length&&this.canGoBackSync()}onStart(){this.gestureOrAnimationInProgress=!0,this.pop({direction:"back",progressAnimation:!0})}onMove(e){this.sbAni&&this.sbAni.progressStep(e)}onEnd(e,t,n){if(this.sbAni){this.sbAni.onFinish((()=>{this.gestureOrAnimationInProgress=!1}),{oneTimeCallback:!0});let r=e?-.001:.001;e?r+=Wm([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.sbAni.easing("cubic-bezier(1, 0, 0.68, 0.28)"),r+=Wm([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.sbAni.progressEnd(e?1:0,r,n)}else this.gestureOrAnimationInProgress=!1}render(){return $p("slot",{key:"654286a8a7ef03d4a22497eb51e781a9a8979774"})}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}"}},[1,"ion-nav",{delegate:[16],swipeGesture:[1028,"swipe-gesture"],animated:[4],animation:[16],rootParams:[16],root:[1],push:[64],insert:[64],insertPages:[64],pop:[64],popTo:[64],popToRoot:[64],removeIndex:[64],setRoot:[64],setPages:[64],setRouteId:[64],getRouteId:[64],getActive:[64],getByIndex:[64],canGoBack:[64],getPrevious:[64]},void 0,{swipeGesture:["swipeGestureChanged"],root:["rootChanged"]}]),ry=function(){"undefined"!=typeof customElements&&["ion-nav"].forEach((e=>{"ion-nav"===e&&(customElements.get(e)||customElements.define(e,ny))}))},iy=qv,oy=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.inheritedAriaAttributes={},this.color=void 0,this.button=!1,this.type="button",this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.routerDirection="forward",this.routerAnimation=void 0,this.target=void 0}componentWillLoad(){this.inheritedAriaAttributes=cm(this.el,["aria-label"])}isClickable(){return void 0!==this.href||this.button}renderCard(e){const t=this.isClickable();if(!t)return[$p("slot",null)];const{href:n,routerAnimation:r,routerDirection:i,inheritedAriaAttributes:o}=this,a=t?void 0===n?"button":"a":"div",s="button"===a?{type:this.type}:{download:this.download,href:this.href,rel:this.rel,target:this.target};return $p(a,Object.assign({},s,o,{class:"card-native",part:"native",disabled:this.disabled,onClick:e=>jg(n,e,i,r)}),$p("slot",null),t&&"md"===e&&$p("ion-ripple-effect",null))}render(){const e=Cg(this);return $p(Wp,{key:"9e35c114ce466623024b94dd6797118ad027417d",class:Lg(this.color,{[e]:!0,"card-disabled":this.disabled,"ion-activatable":this.isClickable()})},this.renderCard(e))}get el(){return this}static get style(){return{ios:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-600, #666666)));-webkit-margin-start:16px;margin-inline-start:16px;-webkit-margin-end:16px;margin-inline-end:16px;margin-top:24px;margin-bottom:24px;border-radius:8px;-webkit-transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:-webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);transition:transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1), -webkit-transform 500ms cubic-bezier(0.12, 0.72, 0.29, 1);font-size:0.875rem;-webkit-box-shadow:0 4px 16px rgba(0, 0, 0, 0.12);box-shadow:0 4px 16px rgba(0, 0, 0, 0.12)}:host(.ion-activated){-webkit-transform:scale3d(0.97, 0.97, 1);transform:scale3d(0.97, 0.97, 1)}",md:":host{--ion-safe-area-left:0px;--ion-safe-area-right:0px;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;display:block;position:relative;background:var(--background);color:var(--color);font-family:var(--ion-font-family, inherit);contain:content;overflow:hidden}:host(.ion-color){background:var(--ion-color-base);color:var(--ion-color-contrast)}:host(.card-disabled){cursor:default;opacity:0.3;pointer-events:none}.card-native{font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;padding-left:0;padding-right:0;padding-top:0;padding-bottom:0;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;display:block;width:100%;min-height:var(--min-height);-webkit-transition:var(--transition);transition:var(--transition);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);outline:none;background:inherit}.card-native::-moz-focus-inner{border:0}button,a{cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;-webkit-user-drag:none}ion-ripple-effect{color:var(--ripple-color)}:host{--background:var(--ion-card-background, var(--ion-item-background, var(--ion-background-color, #fff)));--color:var(--ion-card-color, var(--ion-item-color, var(--ion-color-step-550, #737373)));-webkit-margin-start:10px;margin-inline-start:10px;-webkit-margin-end:10px;margin-inline-end:10px;margin-top:10px;margin-bottom:10px;border-radius:4px;font-size:0.875rem;-webkit-box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12);box-shadow:0 3px 1px -2px rgba(0, 0, 0, 0.2), 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12)}"}}},[33,"ion-card",{color:[513],button:[4],type:[1],disabled:[4],download:[1],href:[1],rel:[1],routerDirection:[1,"router-direction"],routerAnimation:[16],target:[1]}]);
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
function ay(e,t,n,r){let i;if(i="md"===n?"top"===e?8:-8:"top"===e?10:-10,t&&am){!function(e,t){null===e.offsetParent&&zg("The positionAnchor element for ion-toast was found in the DOM, but appears to be hidden. This may lead to unexpected positioning of the toast.",t)}(t,r);const n=t.getBoundingClientRect();return"top"===e?i+=n.bottom:"bottom"===e&&(i-=am.innerHeight-n.top),{top:`${i}px`,bottom:`${i}px`}}return{top:`calc(${i}px + var(--ion-safe-area-top, 0px))`,bottom:`calc(${i}px - var(--ion-safe-area-bottom, 0px))`}}const sy=(e,t)=>Math.floor(e/2-t/2),ly=(e,t)=>{const n=Cm(),r=Cm(),{position:i,top:o,bottom:a}=t,s=fm(e).querySelector(".toast-wrapper");switch(r.addElement(s),i){case"top":r.fromTo("transform","translateY(-100%)",`translateY(${o})`);break;case"middle":const t=sy(e.clientHeight,s.clientHeight);s.style.top=`${t}px`,r.fromTo("opacity",.01,1);break;default:r.fromTo("transform","translateY(100%)",`translateY(${a})`)}return n.easing("cubic-bezier(.155,1.105,.295,1.12)").duration(400).addAnimation(r)},uy=(e,t)=>{const n=Cm(),r=Cm(),{position:i,top:o,bottom:a}=t,s=fm(e).querySelector(".toast-wrapper");switch(r.addElement(s),i){case"top":r.fromTo("transform",`translateY(${o})`,"translateY(-100%)");break;case"middle":r.fromTo("opacity",.99,0);break;default:r.fromTo("transform",`translateY(${a})`,"translateY(100%)")}return n.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(r)},cy=(e,t)=>{const n=Cm(),r=Cm(),{position:i,top:o,bottom:a}=t,s=fm(e).querySelector(".toast-wrapper");switch(r.addElement(s),i){case"top":s.style.setProperty("transform",`translateY(${o})`),r.fromTo("opacity",.01,1);break;case"middle":const t=sy(e.clientHeight,s.clientHeight);s.style.top=`${t}px`,r.fromTo("opacity",.01,1);break;default:s.style.setProperty("transform",`translateY(${a})`),r.fromTo("opacity",.01,1)}return n.easing("cubic-bezier(.36,.66,.04,1)").duration(400).addAnimation(r)},dy=e=>{const t=Cm(),n=Cm(),r=fm(e).querySelector(".toast-wrapper");return n.addElement(r).fromTo("opacity",.99,0),t.easing("cubic-bezier(.36,.66,.04,1)").duration(300).addAnimation(n)},hy=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.didPresent=Yp(this,"ionToastDidPresent",7),this.willPresent=Yp(this,"ionToastWillPresent",7),this.willDismiss=Yp(this,"ionToastWillDismiss",7),this.didDismiss=Yp(this,"ionToastDidDismiss",7),this.didPresentShorthand=Yp(this,"didPresent",7),this.willPresentShorthand=Yp(this,"willPresent",7),this.willDismissShorthand=Yp(this,"willDismiss",7),this.didDismissShorthand=Yp(this,"didDismiss",7),this.delegateController=fv(this),this.lockController=Wv(),this.triggerController=(()=>{let e;const t=()=>{e&&(e(),e=void 0)};return{addClickListener:(n,r)=>{t();const i=void 0!==r?document.getElementById(r):null;i?e=((e,t)=>{const n=()=>{t.present()};return e.addEventListener("click",n),()=>{e.removeEventListener("click",n)}})(i,n):zg(`A trigger element with the ID "${r}" was not found in the DOM. The trigger element must be in the DOM when the "trigger" property is set on an overlay component.`,n)},removeClickListener:t}})(),this.customHTMLEnabled=lg.get("innerHTMLTemplatesEnabled",!1),this.presented=!1,this.dispatchCancelHandler=e=>{const t=e.detail.role;if(cv(t)){const e=this.getButtons().find((e=>"cancel"===e.role));this.callButtonHandler(e)}},this.createSwipeGesture=e=>{const t=this.gesture=((e,t,n)=>{const r=fm(e).querySelector(".toast-wrapper"),i=e.clientHeight,o=r.getBoundingClientRect();let a=0;const s="middle"===e.position?.5:0,l="top"===e.position?-1:1,u=sy(i,o.height),c=[{offset:0,transform:`translateY(-${u+o.height}px)`},{offset:.5,transform:"translateY(0px)"},{offset:1,transform:`translateY(${u+o.height}px)`}],d=Cm("toast-swipe-to-dismiss-animation").addElement(r).duration(100);switch(e.position){case"middle":a=i+o.height,d.keyframes(c),d.progressStart(!0,.5);break;case"top":a=o.bottom,d.keyframes([{offset:0,transform:`translateY(${t.top})`},{offset:1,transform:"translateY(-100%)"}]),d.progressStart(!0,0);break;default:a=i-o.top,d.keyframes([{offset:0,transform:`translateY(${t.bottom})`},{offset:1,transform:"translateY(100%)"}]),d.progressStart(!0,0)}const h=e=>e*l/a,p=rg({el:r,gestureName:"toast-swipe-to-dismiss",gesturePriority:39,direction:"y",onMove:e=>{const t=s+h(e.deltaY);d.progressStep(t)},onEnd:t=>{const i=t.velocityY,o=(t.deltaY+1e3*i)/a*l;p.enable(!1);let s=!0,f=1,m=0,g=0;if("middle"===e.position){s=o>=.25||o<=-.25,f=1,m=0;const e=r.getBoundingClientRect(),n=e.top-u,i=`${n}px`,a=t.deltaY<=0?-1:1,l=(u+e.height)*a,c=[{offset:0,transform:`translateY(${i})`},{offset:1,transform:`translateY(${s?`${l}px`:"0px"})`}];d.keyframes(c),g=l-n}else s=o>=.5,f=s?1:0,m=h(t.deltaY),g=(s?1-m:m)*a;const v=Math.min(Math.abs(g)/Math.abs(i),200);d.onFinish((()=>{s?(n(),d.destroy()):("middle"===e.position?d.keyframes(c).progressStart(!0,.5):d.progressStart(!0,0),p.enable(!0))}),{oneTimeCallback:!0}).progressEnd(f,m,v)}});return p})(this.el,e,(()=>{this.dismiss(void 0,pv)}));t.enable(!0)},this.destroySwipeGesture=()=>{const{gesture:e}=this;void 0!==e&&(e.destroy(),this.gesture=void 0)},this.prefersSwipeGesture=()=>{const{swipeGesture:e}=this;return"vertical"===e},this.revealContentToScreenReader=!1,this.overlayIndex=void 0,this.delegate=void 0,this.hasController=!1,this.color=void 0,this.enterAnimation=void 0,this.leaveAnimation=void 0,this.cssClass=void 0,this.duration=lg.getNumber("toastDuration",0),this.header=void 0,this.layout="baseline",this.message=void 0,this.keyboardClose=!1,this.position="bottom",this.positionAnchor=void 0,this.buttons=void 0,this.translucent=!1,this.animated=!0,this.icon=void 0,this.htmlAttributes=void 0,this.swipeGesture=void 0,this.isOpen=!1,this.trigger=void 0}swipeGestureChanged(){this.destroySwipeGesture(),this.presented&&this.prefersSwipeGesture()&&this.createSwipeGesture(this.lastPresentedPosition)}onIsOpenChange(e,t){!0===e&&!1===t?this.present():!1===e&&!0===t&&this.dismiss()}triggerChanged(){const{trigger:e,el:t,triggerController:n}=this;e&&n.addClickListener(t,e)}connectedCallback(){(e=>{"undefined"!=typeof document&&ev(document);const t=$g++;e.overlayIndex=t})(this.el),this.triggerChanged()}disconnectedCallback(){this.triggerController.removeClickListener()}componentWillLoad(){(e=>{e.hasAttribute("id")||(e.id="ion-overlay-"+ ++qg),e.id})(this.el)}componentDidLoad(){!0===this.isOpen&&mm((()=>this.present())),this.triggerChanged()}async present(){const e=await this.lockController.lock();await this.delegateController.attachViewToDom();const{el:t,position:n}=this,r=ay(n,this.getAnchorElement(),Cg(this),t);this.lastPresentedPosition=r,await(async(e,t,n,r,i)=>{var o,a;if(e.presented)return;iv(!0),void 0!==sm&&nv(sm).forEach((e=>e.setAttribute("aria-hidden","true"))),e.presented=!0,e.willPresent.emit(),null===(o=e.willPresentShorthand)||void 0===o||o.emit();const s=Cg(e),l=e.enterAnimation?e.enterAnimation:lg.get(t,"ios"===s?n:r);await sv(e,l,e.el,i)&&(e.didPresent.emit(),null===(a=e.didPresentShorthand)||void 0===a||a.emit()),"ION-TOAST"!==e.el.tagName&&ov(e.el),!e.keyboardClose||null!==document.activeElement&&e.el.contains(document.activeElement)||e.el.focus(),e.el.removeAttribute("aria-hidden")})(this,"toastEnter",ly,cy,{position:n,top:r.top,bottom:r.bottom}),this.revealContentToScreenReader=!0,this.duration>0&&(this.durationTimeout=setTimeout((()=>this.dismiss(void 0,"timeout")),this.duration)),this.prefersSwipeGesture()&&this.createSwipeGesture(r),e()}async dismiss(e,t){var n,r;const i=await this.lockController.lock(),{durationTimeout:o,position:a,lastPresentedPosition:s}=this;o&&clearTimeout(o);const l=await(async(e,t,n,r,i,o,a)=>{var s,l,u;if(!e.presented)return!1;void 0!==sm&&1===nv(sm).length&&iv(!1),e.presented=!1;try{e.el.style.setProperty("pointer-events","none"),e.willDismiss.emit({data:t,role:n}),null===(s=e.willDismissShorthand)||void 0===s||s.emit({data:t,role:n});const u=Cg(e),c=e.leaveAnimation?e.leaveAnimation:lg.get(r,"ios"===u?i:o);n!==pv&&await sv(e,c,e.el,a),e.didDismiss.emit({data:t,role:n}),null===(l=e.didDismissShorthand)||void 0===l||l.emit({data:t,role:n}),(Wg.get(e)||[]).forEach((e=>e.destroy())),Wg.delete(e),e.el.classList.add("overlay-hidden"),e.el.style.removeProperty("pointer-events"),void 0!==e.el.lastFocus&&(e.el.lastFocus=void 0)}catch(c){console.error(c)}return e.el.remove(),void 0!==sm&&(null===(u=rv(sm))||void 0===u||u.removeAttribute("aria-hidden")),!0})(this,e,t,"toastLeave",uy,dy,{position:a,top:null!==(n=null==s?void 0:s.top)&&void 0!==n?n:"",bottom:null!==(r=null==s?void 0:s.bottom)&&void 0!==r?r:""});return l&&(this.delegateController.removeViewFromDom(),this.revealContentToScreenReader=!1),this.lastPresentedPosition=void 0,this.destroySwipeGesture(),i(),l}onDidDismiss(){return lv(this.el,"ionToastDidDismiss")}onWillDismiss(){return lv(this.el,"ionToastWillDismiss")}getButtons(){const e=this.buttons?this.buttons.map((e=>"string"==typeof e?{text:e}:e)):[];return e}getAnchorElement(){const{position:e,positionAnchor:t,el:n}=this;if(void 0!==t)if("middle"!==e||void 0===t){if("string"==typeof t){const e=document.getElementById(t);return null===e?void zg(`An anchor element with an ID of "${t}" was not found in the DOM.`,n):e}if(t instanceof Kf)return t;zg("Invalid positionAnchor value:",t,n)}else zg('The positionAnchor property is ignored when using position="middle".',this.el)}async buttonClick(e){const t=e.role;return cv(t)||await this.callButtonHandler(e)?this.dismiss(void 0,t):Promise.resolve()}async callButtonHandler(e){if(null==e?void 0:e.handler)try{const t=await((e,t)=>{if("function"==typeof e)return lg.get("_zoneGate",dv)((()=>{try{return e(t)}catch(AW){throw AW}}))})(e.handler);if(!1===t)return!1}catch(AW){console.error(AW)}return!0}renderButtons(e,t){if(0===e.length)return;const n=Cg(this);return $p("div",{class:{"toast-button-group":!0,[`toast-button-group-${t}`]:!0}},e.map((e=>$p("button",Object.assign({},e.htmlAttributes,{type:"button",class:py(e),tabIndex:0,onClick:()=>this.buttonClick(e),part:fy(e)}),$p("div",{class:"toast-button-inner"},e.icon&&$p("ion-icon",{"aria-hidden":"true",icon:e.icon,slot:void 0===e.text?"icon-only":void 0,class:"toast-button-icon"}),e.text),"md"===n&&$p("ion-ripple-effect",{type:void 0!==e.icon&&void 0===e.text?"unbounded":"bounded"})))))}renderToastMessage(e,t=null){const{customHTMLEnabled:n,message:r}=this;return n?$p("div",{key:e,"aria-hidden":t,class:"toast-message",part:"message",innerHTML:Sg(r)}):$p("div",{key:e,"aria-hidden":t,class:"toast-message",part:"message"},r)}renderHeader(e,t=null){return $p("div",{key:e,class:"toast-header","aria-hidden":t,part:"header"},this.header)}render(){const{layout:e,el:t,revealContentToScreenReader:n,header:r,message:i}=this,o=this.getButtons(),a=o.filter((e=>"start"===e.side)),s=o.filter((e=>"start"!==e.side)),l=Cg(this),u={"toast-wrapper":!0,[`toast-${this.position}`]:!0,[`toast-layout-${e}`]:!0};return"stacked"===e&&a.length>0&&s.length>0&&zg("This toast is using start and end buttons with the stacked toast layout. We recommend following the best practice of using either start or end buttons with the stacked toast layout.",t),$p(Wp,Object.assign({key:"c8d7e7d2baa01d3ed5d65a845bc61acf087c0b18",tabindex:"-1"},this.htmlAttributes,{style:{zIndex:`${6e4+this.overlayIndex}`},class:Lg(this.color,Object.assign(Object.assign({[l]:!0},Mg(this.cssClass)),{"overlay-hidden":!0,"toast-translucent":this.translucent})),onIonToastWillDismiss:this.dispatchCancelHandler}),$p("div",{key:"27c0feeb89c4efb47c42623a4b036ed84338ed10",class:u},$p("div",{key:"41d5a3069f92e4a6acef2793fa4e236cdbdaae88",class:"toast-container",part:"container"},this.renderButtons(a,"start"),void 0!==this.icon&&$p("ion-icon",{class:"toast-icon",part:"icon",icon:this.icon,lazy:!1,"aria-hidden":"true"}),$p("div",{key:"176f497bc990ef2ecc14c7fa90dd3a54a912030a",class:"toast-content",role:"status","aria-atomic":"true","aria-live":"polite"},!n&&void 0!==r&&this.renderHeader("oldHeader","true"),!n&&void 0!==i&&this.renderToastMessage("oldMessage","true"),n&&void 0!==r&&this.renderHeader("header"),n&&void 0!==i&&this.renderToastMessage("header")),this.renderButtons(s,"end"))))}get el(){return this}static get watchers(){return{swipeGesture:["swipeGestureChanged"],isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}}static get style(){return{ios:":host{--border-width:0;--border-style:none;--border-color:initial;--box-shadow:none;--min-width:auto;--width:auto;--min-height:auto;--height:auto;--max-height:auto;--white-space:normal;top:0;display:block;position:absolute;width:100%;height:100%;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);contain:strict;z-index:1001;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host(:dir(rtl)){left:unset;right:unset;right:0}}}:host(.overlay-hidden){display:none}:host(.ion-color){--button-color:inherit;color:var(--ion-color-contrast)}:host(.ion-color) .toast-button-cancel{color:inherit}:host(.ion-color) .toast-wrapper{background:var(--ion-color-base)}.toast-wrapper{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}@supports (inset-inline-start: 0){.toast-wrapper{inset-inline-start:var(--start);inset-inline-end:var(--end)}}@supports not (inset-inline-start: 0){.toast-wrapper{left:var(--start);right:var(--end)}:host-context([dir=rtl]) .toast-wrapper{left:unset;right:unset;left:var(--end);right:var(--start)}[dir=rtl] .toast-wrapper{left:unset;right:unset;left:var(--end);right:var(--start)}@supports selector(:dir(rtl)){.toast-wrapper:dir(rtl){left:unset;right:unset;left:var(--end);right:var(--start)}}}.toast-wrapper.toast-top{-webkit-transform:translate3d(0,  -100%,  0);transform:translate3d(0,  -100%,  0);top:0}.toast-wrapper.toast-bottom{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);bottom:0}.toast-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;pointer-events:auto;height:inherit;min-height:inherit;max-height:inherit;contain:content}.toast-layout-stacked .toast-container{-ms-flex-wrap:wrap;flex-wrap:wrap}.toast-layout-baseline .toast-content{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.toast-icon{-webkit-margin-start:16px;margin-inline-start:16px}.toast-content{min-width:0}.toast-message{-ms-flex:1;flex:1;white-space:var(--white-space)}.toast-button-group{display:-ms-flexbox;display:flex}.toast-layout-stacked .toast-button-group{-ms-flex-pack:end;justify-content:end;width:100%}.toast-button{border:0;outline:none;color:var(--button-color);z-index:0}.toast-icon,.toast-button-icon{font-size:1.4em}.toast-button-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}@media (any-hover: hover){.toast-button:hover{cursor:pointer}}:host{--background:var(--ion-color-step-50, #f2f2f2);--border-radius:14px;--button-color:var(--ion-color-primary, #3880ff);--color:var(--ion-color-step-850, #262626);--max-width:700px;--max-height:478px;--start:10px;--end:10px;font-size:clamp(14px, 0.875rem, 43.4px)}.toast-wrapper{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;display:block;position:absolute;z-index:10}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.toast-translucent) .toast-wrapper{background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(180%) blur(20px);backdrop-filter:saturate(180%) blur(20px)}:host(.ion-color.toast-translucent) .toast-wrapper{background:rgba(var(--ion-color-base-rgb), 0.8)}}.toast-wrapper.toast-middle{opacity:0.01}.toast-content{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:15px;padding-bottom:15px}.toast-header{margin-bottom:2px;font-weight:500}.toast-button{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:10px;padding-bottom:10px;min-height:44px;-webkit-transition:background-color, opacity 100ms linear;transition:background-color, opacity 100ms linear;border:0;background-color:transparent;font-family:var(--ion-font-family);font-size:clamp(17px, 1.0625rem, 21.998px);font-weight:500;overflow:hidden}.toast-button.ion-activated{opacity:0.4}@media (any-hover: hover){.toast-button:hover{opacity:0.6}}",md:":host{--border-width:0;--border-style:none;--border-color:initial;--box-shadow:none;--min-width:auto;--width:auto;--min-height:auto;--height:auto;--max-height:auto;--white-space:normal;top:0;display:block;position:absolute;width:100%;height:100%;outline:none;color:var(--color);font-family:var(--ion-font-family, inherit);contain:strict;z-index:1001;pointer-events:none}@supports (inset-inline-start: 0){:host{inset-inline-start:0}}@supports not (inset-inline-start: 0){:host{left:0}:host-context([dir=rtl]){left:unset;right:unset;right:0}@supports selector(:dir(rtl)){:host(:dir(rtl)){left:unset;right:unset;right:0}}}:host(.overlay-hidden){display:none}:host(.ion-color){--button-color:inherit;color:var(--ion-color-contrast)}:host(.ion-color) .toast-button-cancel{color:inherit}:host(.ion-color) .toast-wrapper{background:var(--ion-color-base)}.toast-wrapper{border-radius:var(--border-radius);width:var(--width);min-width:var(--min-width);max-width:var(--max-width);height:var(--height);min-height:var(--min-height);max-height:var(--max-height);border-width:var(--border-width);border-style:var(--border-style);border-color:var(--border-color);background:var(--background);-webkit-box-shadow:var(--box-shadow);box-shadow:var(--box-shadow)}@supports (inset-inline-start: 0){.toast-wrapper{inset-inline-start:var(--start);inset-inline-end:var(--end)}}@supports not (inset-inline-start: 0){.toast-wrapper{left:var(--start);right:var(--end)}:host-context([dir=rtl]) .toast-wrapper{left:unset;right:unset;left:var(--end);right:var(--start)}[dir=rtl] .toast-wrapper{left:unset;right:unset;left:var(--end);right:var(--start)}@supports selector(:dir(rtl)){.toast-wrapper:dir(rtl){left:unset;right:unset;left:var(--end);right:var(--start)}}}.toast-wrapper.toast-top{-webkit-transform:translate3d(0,  -100%,  0);transform:translate3d(0,  -100%,  0);top:0}.toast-wrapper.toast-bottom{-webkit-transform:translate3d(0,  100%,  0);transform:translate3d(0,  100%,  0);bottom:0}.toast-container{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;pointer-events:auto;height:inherit;min-height:inherit;max-height:inherit;contain:content}.toast-layout-stacked .toast-container{-ms-flex-wrap:wrap;flex-wrap:wrap}.toast-layout-baseline .toast-content{display:-ms-flexbox;display:flex;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-pack:center;justify-content:center}.toast-icon{-webkit-margin-start:16px;margin-inline-start:16px}.toast-content{min-width:0}.toast-message{-ms-flex:1;flex:1;white-space:var(--white-space)}.toast-button-group{display:-ms-flexbox;display:flex}.toast-layout-stacked .toast-button-group{-ms-flex-pack:end;justify-content:end;width:100%}.toast-button{border:0;outline:none;color:var(--button-color);z-index:0}.toast-icon,.toast-button-icon{font-size:1.4em}.toast-button-inner{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center}@media (any-hover: hover){.toast-button:hover{cursor:pointer}}:host{--background:var(--ion-color-step-800, #333333);--border-radius:4px;--box-shadow:0 3px 5px -1px rgba(0, 0, 0, 0.2), 0 6px 10px 0 rgba(0, 0, 0, 0.14), 0 1px 18px 0 rgba(0, 0, 0, 0.12);--button-color:var(--ion-color-primary, #3880ff);--color:var(--ion-color-step-50, #f2f2f2);--max-width:700px;--start:8px;--end:8px;font-size:0.875rem}.toast-wrapper{-webkit-margin-start:auto;margin-inline-start:auto;-webkit-margin-end:auto;margin-inline-end:auto;margin-top:auto;margin-bottom:auto;display:block;position:absolute;opacity:0.01;z-index:10}.toast-content{-webkit-padding-start:16px;padding-inline-start:16px;-webkit-padding-end:16px;padding-inline-end:16px;padding-top:14px;padding-bottom:14px}.toast-header{margin-bottom:2px;font-weight:500;line-height:1.25rem}.toast-message{line-height:1.25rem}.toast-layout-baseline .toast-button-group-start{-webkit-margin-start:8px;margin-inline-start:8px}.toast-layout-stacked .toast-button-group-start{-webkit-margin-end:8px;margin-inline-end:8px;margin-top:8px}.toast-layout-baseline .toast-button-group-end{-webkit-margin-end:8px;margin-inline-end:8px}.toast-layout-stacked .toast-button-group-end{-webkit-margin-end:8px;margin-inline-end:8px;margin-bottom:8px}.toast-button{-webkit-padding-start:15px;padding-inline-start:15px;-webkit-padding-end:15px;padding-inline-end:15px;padding-top:10px;padding-bottom:10px;position:relative;background-color:transparent;font-family:var(--ion-font-family);font-size:0.875rem;font-weight:500;letter-spacing:0.84px;text-transform:uppercase;overflow:hidden}.toast-button-cancel{color:var(--ion-color-step-100, #e6e6e6)}.toast-button-icon-only{border-radius:50%;-webkit-padding-start:9px;padding-inline-start:9px;-webkit-padding-end:9px;padding-inline-end:9px;padding-top:9px;padding-bottom:9px;width:36px;height:36px}@media (any-hover: hover){.toast-button:hover{background-color:rgba(var(--ion-color-primary-rgb, 56, 128, 255), 0.08)}.toast-button-cancel:hover{background-color:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.08)}}"}}},[33,"ion-toast",{overlayIndex:[2,"overlay-index"],delegate:[16],hasController:[4,"has-controller"],color:[513],enterAnimation:[16],leaveAnimation:[16],cssClass:[1,"css-class"],duration:[2],header:[1],layout:[1],message:[1],keyboardClose:[4,"keyboard-close"],position:[1],positionAnchor:[1,"position-anchor"],buttons:[16],translucent:[4],animated:[4],icon:[1],htmlAttributes:[16],swipeGesture:[1,"swipe-gesture"],isOpen:[4,"is-open"],trigger:[1],revealContentToScreenReader:[32],present:[64],dismiss:[64],onDidDismiss:[64],onWillDismiss:[64]},void 0,{swipeGesture:["swipeGestureChanged"],isOpen:["onIsOpenChange"],trigger:["triggerChanged"]}]),py=e=>Object.assign({"toast-button":!0,"toast-button-icon-only":void 0!==e.icon&&void 0===e.text,[`toast-button-${e.role}`]:void 0!==e.role,"ion-focusable":!0,"ion-activatable":!0},Mg(e.cssClass)),fy=e=>cv(e.role)?"button cancel":"button",my=function(){"undefined"!=typeof customElements&&["ion-toast","ion-icon","ion-ripple-effect"].forEach((e=>{switch(e){case"ion-toast":customElements.get(e)||customElements.define(e,hy);break;case"ion-icon":customElements.get(e)||"undefined"!=typeof customElements&&["ion-icon"].forEach((e=>{"ion-icon"===e&&(customElements.get(e)||customElements.define(e,Nv))}));break;case"ion-ripple-effect":customElements.get(e)||Fv()}}))};
/*!
             * (C) Ionic http://ionicframework.com - MIT License
             */
var gy;!function(e){e.Dark="DARK",e.Light="LIGHT",e.Default="DEFAULT"}(gy||(gy={}));const vy=Pf(class extends Kf{constructor(){super(),this.__registerHost()}componentDidLoad(){by((async()=>{const e=hg(window,"hybrid");if(lg.getBoolean("_testing")||Sp((()=>t.import("./index9-legacy-9mQOGYMo.js"))).then((e=>e.startTapClick(lg))),lg.getBoolean("statusTap",e)&&Sp((()=>t.import("./status-tap-legacy-D4gDLn9h.js"))).then((e=>e.startStatusTap())),lg.getBoolean("inputShims",yy())){const e=hg(window,"ios")?"ios":"android";Sp((()=>t.import("./input-shims-legacy-B-EE3ZMs.js"))).then((t=>t.startInputShims(lg,e)))}const n=await Sp((()=>Promise.resolve().then((()=>Vg)))),r=e||Bg();lg.getBoolean("hardwareBackButton",r)?n.startHardwareBackButton():(Bg()&&zg("experimentalCloseWatcher was set to `true`, but hardwareBackButton was set to `false`. Both config options must be `true` for the Close Watcher API to be used."),n.blockHardwareBackButton()),"undefined"!=typeof window&&Sp((()=>t.import("./keyboard2-legacy-DIkqtu6u.js"))).then((e=>e.startKeyboardAssist(window))),Sp((()=>t.import("./focus-visible-legacy-CdO5cX4I.js"))).then((e=>this.focusVisible=e.startFocusVisible()))}))}async setFocus(e){this.focusVisible&&this.focusVisible.setFocus(e)}render(){const e=Cg(this);return $p(Wp,{key:"3535eb5c0dab78a78011e552524a98599b2b650f",class:{[e]:!0,"ion-page":!0,"force-statusbar-padding":lg.getBoolean("_forceStatusbarPadding")}})}get el(){return this}static get style(){return"html.plt-mobile ion-app{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html.plt-mobile ion-app [contenteditable]{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}ion-app.force-statusbar-padding{--ion-safe-area-top:20px}"}},[0,"ion-app",{setFocus:[64]}]),yy=()=>!(!hg(window,"ios")||!hg(window,"mobile"))||!(!hg(window,"android")||!hg(window,"mobileweb")),by=e=>{"requestIdleCallback"in window?window.requestIdleCallback(e):setTimeout(e,32)},xy=function(){"undefined"!=typeof customElements&&["ion-app"].forEach((e=>{"ion-app"===e&&(customElements.get(e)||customElements.define(e,vy))}))},wy=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionNavWillLoad=Yp(this,"ionNavWillLoad",7),this.ionNavWillChange=Yp(this,"ionNavWillChange",3),this.ionNavDidChange=Yp(this,"ionNavDidChange",3),this.lockController=Wv(),this.gestureOrAnimationInProgress=!1,this.mode=Cg(this),this.delegate=void 0,this.animated=!0,this.animation=void 0,this.swipeHandler=void 0}swipeHandlerChanged(){this.gesture&&this.gesture.enable(void 0!==this.swipeHandler)}async connectedCallback(){const e=()=>{this.gestureOrAnimationInProgress=!0,this.swipeHandler&&this.swipeHandler.onStart()};this.gesture=(await Sp((()=>t.import("./swipe-back-legacy-B-ys164z.js")))).createSwipeBackGesture(this.el,(()=>!this.gestureOrAnimationInProgress&&!!this.swipeHandler&&this.swipeHandler.canStart()),(()=>e()),(e=>{var t;return null===(t=this.ani)||void 0===t?void 0:t.progressStep(e)}),((e,t,n)=>{if(this.ani){this.ani.onFinish((()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(e)}),{oneTimeCallback:!0});let r=e?-.001:.001;e?r+=Wm([0,0],[.32,.72],[0,1],[1,1],t)[0]:(this.ani.easing("cubic-bezier(1, 0, 0.68, 0.28)"),r+=Wm([0,0],[1,0],[.68,.28],[1,1],t)[0]),this.ani.progressEnd(e?1:0,r,n)}else this.gestureOrAnimationInProgress=!1})),this.swipeHandlerChanged()}componentWillLoad(){this.ionNavWillLoad.emit()}disconnectedCallback(){this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(e,t,n){const r=await this.lockController.lock();let i=!1;try{i=await this.transition(e,t,n)}catch(AW){console.error(AW)}return r(),i}async setRouteId(e,t,n,r){return{changed:await this.setRoot(e,t,{duration:"root"===n?0:void 0,direction:"back"===n?"back":"forward",animationBuilder:r}),element:this.activeEl}}async getRouteId(){const e=this.activeEl;return e?{id:e.tagName,element:e,params:this.activeParams}:void 0}async setRoot(e,t,n){if(this.activeComponent===e&&vm(t,this.activeParams))return!1;const r=this.activeEl,i=await Ug(this.delegate,this.el,e,["ion-page","ion-page-invisible"],t);return this.activeComponent=e,this.activeEl=i,this.activeParams=t,await this.commit(i,r,n),await((e,t)=>{if(t){if(e){const n=t.parentElement;return e.removeViewFromDom(n,t)}t.remove()}return Promise.resolve()})(this.delegate,r),!0}async transition(e,t,n={}){if(t===e)return!1;this.ionNavWillChange.emit();const{el:r,mode:i}=this,o=this.animated&&lg.getBoolean("animated",!0),a=n.animationBuilder||this.animation||lg.get("navAnimation");return await Tm(Object.assign(Object.assign({mode:i,animated:o,enteringEl:e,leavingEl:t,baseEl:r,deepWait:um(r),progressCallback:n.progressAnimation?e=>{void 0===e||this.gestureOrAnimationInProgress?this.ani=e:(this.gestureOrAnimationInProgress=!0,e.onFinish((()=>{this.gestureOrAnimationInProgress=!1,this.swipeHandler&&this.swipeHandler.onEnd(!1)}),{oneTimeCallback:!0}),e.progressEnd(0,0,0))}:void 0},n),{animationBuilder:a})),this.ionNavDidChange.emit(),!0}render(){return $p("slot",{key:"69b452a0dc0c10440bdd8700cf4843c43154c707"})}get el(){return this}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;z-index:0}"}},[1,"ion-router-outlet",{mode:[1025],delegate:[16],animated:[4],animation:[16],swipeHandler:[16],commit:[64],setRouteId:[64],getRouteId:[64]},void 0,{swipeHandler:["swipeHandlerChanged"]}]),ky=function(){"undefined"!=typeof customElements&&["ion-router-outlet"].forEach((e=>{"ion-router-outlet"===e&&(customElements.get(e)||customElements.define(e,wy))}))},_y=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabBarChanged=Yp(this,"ionTabBarChanged",7),this.ionTabBarLoaded=Yp(this,"ionTabBarLoaded",7),this.keyboardCtrl=null,this.keyboardVisible=!1,this.color=void 0,this.selectedTab=void 0,this.translucent=!1}selectedTabChanged(){void 0!==this.selectedTab&&this.ionTabBarChanged.emit({tab:this.selectedTab})}componentWillLoad(){this.selectedTabChanged()}async connectedCallback(){this.keyboardCtrl=await(async e=>{let t,n,r,i;const o=async()=>{const e=await Kv.getResizeMode(),o=void 0===e?void 0:e.mode;t=()=>{void 0===i&&(i=Xv(o)),r=!0,a(r,o)},n=()=>{r=!1,a(r,o)},null==am||am.addEventListener("keyboardWillShow",t),null==am||am.addEventListener("keyboardWillHide",n)},a=(t,n)=>{e&&e(t,s(n))},s=e=>{if(0===i||i===Xv(e))return;const t=Yv(e);return null!==t?new Promise((e=>{const n=new ResizeObserver((()=>{t.clientHeight===i&&(n.disconnect(),e())}));n.observe(t)})):void 0};return await o(),{init:o,destroy:()=>{null==am||am.removeEventListener("keyboardWillShow",t),null==am||am.removeEventListener("keyboardWillHide",n),t=n=void 0},isKeyboardVisible:()=>r}})((async(e,t)=>{!1===e&&void 0!==t&&await t,this.keyboardVisible=e}))}disconnectedCallback(){this.keyboardCtrl&&this.keyboardCtrl.destroy()}componentDidLoad(){this.ionTabBarLoaded.emit()}render(){const{color:e,translucent:t,keyboardVisible:n}=this,r=Cg(this),i=n&&"top"!==this.el.getAttribute("slot");return $p(Wp,{key:"e2b4b50270f171ed251359df6c65c5e7e4d526a4",role:"tablist","aria-hidden":i?"true":null,class:Lg(e,{[r]:!0,"tab-bar-translucent":t,"tab-bar-hidden":i})},$p("slot",{key:"37495b2eddd01a758ceaeb36426abc9bd20bcca3"}))}get el(){return this}static get watchers(){return{selectedTab:["selectedTabChanged"]}}static get style(){return{ios:":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-color-step-50, #f7f7f7));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:0.55px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.2))));--color:var(--ion-tab-bar-color, var(--ion-color-step-600, #666666));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:50px}@supports ((-webkit-backdrop-filter: blur(0)) or (backdrop-filter: blur(0))){:host(.tab-bar-translucent){--background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.8);-webkit-backdrop-filter:saturate(210%) blur(20px);backdrop-filter:saturate(210%) blur(20px)}:host(.ion-color.tab-bar-translucent){background:rgba(var(--ion-color-base-rgb), 0.8)}:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:rgba(var(--ion-background-color-rgb, 255, 255, 255), 0.6)}}",md:":host{display:-ms-flexbox;display:flex;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;width:auto;padding-right:var(--ion-safe-area-right);padding-bottom:var(--ion-safe-area-bottom, 0);padding-left:var(--ion-safe-area-left);border-top:var(--border);background:var(--background);color:var(--color);text-align:center;contain:strict;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;z-index:10;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host(.ion-color) ::slotted(ion-tab-button){--background-focused:var(--ion-color-shade);--color-selected:var(--ion-color-contrast)}:host(.ion-color) ::slotted(.tab-selected){color:var(--ion-color-contrast)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){color:rgba(var(--ion-color-contrast-rgb), 0.7)}:host(.ion-color),:host(.ion-color) ::slotted(ion-tab-button){background:var(--ion-color-base)}:host(.ion-color) ::slotted(ion-tab-button.ion-focused),:host(.tab-bar-translucent) ::slotted(ion-tab-button.ion-focused){background:var(--background-focused)}:host(.tab-bar-translucent) ::slotted(ion-tab-button){background:transparent}:host([slot=top]){padding-top:var(--ion-safe-area-top, 0);padding-bottom:0;border-top:0;border-bottom:var(--border)}:host(.tab-bar-hidden){display:none !important}:host{--background:var(--ion-tab-bar-background, var(--ion-background-color, #fff));--background-focused:var(--ion-tab-bar-background-focused, #e0e0e0);--border:1px solid var(--ion-tab-bar-border-color, var(--ion-border-color, var(--ion-color-step-150, rgba(0, 0, 0, 0.07))));--color:var(--ion-tab-bar-color, var(--ion-color-step-650, #595959));--color-selected:var(--ion-tab-bar-color-selected, var(--ion-color-primary, #3880ff));height:56px}"}}},[33,"ion-tab-bar",{color:[513],selectedTab:[1,"selected-tab"],translucent:[4],keyboardVisible:[32]},void 0,{selectedTab:["selectedTabChanged"]}]),Ey=function(){"undefined"!=typeof customElements&&["ion-tab-bar"].forEach((e=>{"ion-tab-bar"===e&&(customElements.get(e)||customElements.define(e,_y))}))},Cy=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.ionTabButtonClick=Yp(this,"ionTabButtonClick",7),this.inheritedAttributes={},this.onKeyUp=e=>{"Enter"!==e.key&&" "!==e.key||this.selectTab(e)},this.onClick=e=>{this.selectTab(e)},this.disabled=!1,this.download=void 0,this.href=void 0,this.rel=void 0,this.layout=void 0,this.selected=!1,this.tab=void 0,this.target=void 0}onTabBarChanged(e){const t=e.target,n=this.el.parentElement;(e.composedPath().includes(n)||(null==t?void 0:t.contains(this.el)))&&(this.selected=this.tab===e.detail.tab)}componentWillLoad(){this.inheritedAttributes=Object.assign({},cm(this.el,["aria-label"])),void 0===this.layout&&(this.layout=lg.get("tabButtonLayout","icon-top"))}selectTab(e){void 0!==this.tab&&(this.disabled||this.ionTabButtonClick.emit({tab:this.tab,href:this.href,selected:this.selected}),e.preventDefault())}get hasLabel(){return!!this.el.querySelector("ion-label")}get hasIcon(){return!!this.el.querySelector("ion-icon")}render(){const{disabled:e,hasIcon:t,hasLabel:n,href:r,rel:i,target:o,layout:a,selected:s,tab:l,inheritedAttributes:u}=this,c=Cg(this),d={download:this.download,href:r,rel:i,target:o};return $p(Wp,{key:"9926f9392e7910ff3159397e4f907e0d7d2cf5a0",onClick:this.onClick,onKeyup:this.onKeyUp,id:void 0!==l?`tab-button-${l}`:null,class:{[c]:!0,"tab-selected":s,"tab-disabled":e,"tab-has-label":n,"tab-has-icon":t,"tab-has-label-only":n&&!t,"tab-has-icon-only":t&&!n,[`tab-layout-${a}`]:!0,"ion-activatable":!0,"ion-selectable":!0,"ion-focusable":!0}},$p("a",Object.assign({key:"4b3ace749583a5502e94462f9a70c5158fe0194a"},d,{class:"button-native",part:"native",role:"tab","aria-selected":s?"true":null,"aria-disabled":e?"true":null,tabindex:e?"-1":void 0},u),$p("span",{key:"a2a30c02fbd5052da12586a5ab00a45f3bf53b88",class:"button-inner"},$p("slot",{key:"3fb22ffbb09000d99537b531220c029330ae6940"})),"md"===c&&$p("ion-ripple-effect",{type:"unbounded"})))}get el(){return this}static get style(){return{ios:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:2px;--padding-bottom:0;--padding-start:2px;max-width:240px;font-size:10px}::slotted(ion-badge){-webkit-padding-start:6px;padding-inline-start:6px;-webkit-padding-end:6px;padding-inline-end:6px;padding-top:1px;padding-bottom:1px;top:4px;height:auto;font-size:12px;line-height:16px}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-icon){margin-top:2px;margin-bottom:2px;font-size:30px}::slotted(ion-icon::before){vertical-align:top}::slotted(ion-label){margin-top:0;margin-bottom:1px;min-height:11px;font-weight:500}:host(.tab-has-label-only) ::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;font-size:12px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-label),:host(.tab-layout-icon-start) ::slotted(ion-label),:host(.tab-layout-icon-hide) ::slotted(ion-label){margin-top:2px;margin-bottom:2px;font-size:14px;line-height:1.1}:host(.tab-layout-icon-end) ::slotted(ion-icon),:host(.tab-layout-icon-start) ::slotted(ion-icon){min-width:24px;height:26px;margin-top:2px;margin-bottom:1px;font-size:24px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:calc(50% + 12px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:calc(50% + 12px)}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 12px)}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:1px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:4px}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:calc(50% + 35px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:calc(50% + 35px)}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start:dir(rtl)) ::slotted(ion-badge),:host(.tab-layout-icon-end:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 35px)}}}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:10px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:calc(50% + 30px)}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:calc(50% + 30px)}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide:dir(rtl)) ::slotted(ion-badge),:host(.tab-has-label-only:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 30px)}}}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:10px}:host(.tab-layout-label-hide) ::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:0;margin-bottom:0}',md:':host{--ripple-color:var(--color-selected);--background-focused-opacity:1;-ms-flex:1;flex:1;-ms-flex-direction:column;flex-direction:column;-ms-flex-align:center;align-items:center;-ms-flex-pack:center;justify-content:center;height:100%;outline:none;background:var(--background);color:var(--color)}.button-native{border-radius:inherit;margin-left:0;margin-right:0;margin-top:0;margin-bottom:0;-webkit-padding-start:var(--padding-start);padding-inline-start:var(--padding-start);-webkit-padding-end:var(--padding-end);padding-inline-end:var(--padding-end);padding-top:var(--padding-top);padding-bottom:var(--padding-bottom);font-family:inherit;font-size:inherit;font-style:inherit;font-weight:inherit;letter-spacing:inherit;text-decoration:inherit;text-indent:inherit;text-overflow:inherit;text-transform:inherit;text-align:inherit;white-space:inherit;color:inherit;display:-ms-flexbox;display:flex;position:relative;-ms-flex-direction:inherit;flex-direction:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;border:0;outline:none;background:transparent;text-decoration:none;cursor:pointer;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box;-webkit-user-drag:none}.button-native::after{left:0;right:0;top:0;bottom:0;position:absolute;content:"";opacity:0}.button-inner{display:-ms-flexbox;display:flex;position:relative;-ms-flex-flow:inherit;flex-flow:inherit;-ms-flex-align:inherit;align-items:inherit;-ms-flex-pack:inherit;justify-content:inherit;width:100%;height:100%;z-index:1}:host(.ion-focused) .button-native{color:var(--color-focused)}:host(.ion-focused) .button-native::after{background:var(--background-focused);opacity:var(--background-focused-opacity)}@media (any-hover: hover){a:hover{color:var(--color-selected)}}:host(.tab-selected){color:var(--color-selected)}:host(.tab-hidden){display:none !important}:host(.tab-disabled){pointer-events:none;opacity:0.4}::slotted(ion-label),::slotted(ion-icon){display:block;-ms-flex-item-align:center;align-self:center;max-width:100%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;-webkit-box-sizing:border-box;box-sizing:border-box}::slotted(ion-label){-ms-flex-order:0;order:0}::slotted(ion-icon){-ms-flex-order:-1;order:-1;height:1em}:host(.tab-has-label-only) ::slotted(ion-label){white-space:normal}::slotted(ion-badge){-webkit-box-sizing:border-box;box-sizing:border-box;position:absolute;z-index:1}:host(.tab-layout-icon-start){-ms-flex-direction:row;flex-direction:row}:host(.tab-layout-icon-end){-ms-flex-direction:row-reverse;flex-direction:row-reverse}:host(.tab-layout-icon-bottom){-ms-flex-direction:column-reverse;flex-direction:column-reverse}:host(.tab-layout-icon-hide) ::slotted(ion-icon){display:none}:host(.tab-layout-label-hide) ::slotted(ion-label){display:none}ion-ripple-effect{color:var(--ripple-color)}:host{--padding-top:0;--padding-end:12px;--padding-bottom:0;--padding-start:12px;max-width:168px;font-size:12px;font-weight:normal;letter-spacing:0.03em}::slotted(ion-label){margin-left:0;margin-right:0;margin-top:2px;margin-bottom:2px;text-transform:none}::slotted(ion-icon){margin-left:0;margin-right:0;margin-top:16px;margin-bottom:16px;-webkit-transform-origin:center center;transform-origin:center center;font-size:22px}:host-context([dir=rtl]) ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}[dir=rtl] ::slotted(ion-icon){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}@supports selector(:dir(rtl)){::slotted(ion-icon):dir(rtl){-webkit-transform-origin:calc(100% - center) center;transform-origin:calc(100% - center) center}}::slotted(ion-badge){border-radius:8px;-webkit-padding-start:2px;padding-inline-start:2px;-webkit-padding-end:2px;padding-inline-end:2px;padding-top:3px;padding-bottom:2px;top:8px;min-width:12px;font-size:8px;font-weight:normal}@supports (inset-inline-start: 0){::slotted(ion-badge){inset-inline-start:calc(50% + 6px)}}@supports not (inset-inline-start: 0){::slotted(ion-badge){left:calc(50% + 6px)}:host-context([dir=rtl]) ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}[dir=rtl] ::slotted(ion-badge){left:unset;right:unset;right:calc(50% + 6px)}@supports selector(:dir(rtl)){::slotted(ion-badge):dir(rtl){left:unset;right:unset;right:calc(50% + 6px)}}}::slotted(ion-badge:empty){display:block;min-width:8px;height:8px}:host(.tab-layout-icon-top) ::slotted(ion-icon){margin-top:6px;margin-bottom:2px}:host(.tab-layout-icon-top) ::slotted(ion-label){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-badge){top:8px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-bottom) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-bottom) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-bottom ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-bottom:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-bottom) ::slotted(ion-icon){margin-top:0;margin-bottom:6px}:host(.tab-layout-icon-bottom) ::slotted(ion-label){margin-top:6px;margin-bottom:0}:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){inset-inline-start:80%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-start) ::slotted(ion-badge),:host(.tab-layout-icon-end) ::slotted(ion-badge){left:80%}:host-context([dir=rtl]):host(.tab-layout-icon-start) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-start ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-layout-icon-end) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-end ::slotted(ion-badge){left:unset;right:unset;right:80%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-start:dir(rtl)) ::slotted(ion-badge),:host(.tab-layout-icon-end:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:80%}}}:host(.tab-layout-icon-start) ::slotted(ion-icon){-webkit-margin-end:6px;margin-inline-end:6px}:host(.tab-layout-icon-end) ::slotted(ion-icon){-webkit-margin-start:6px;margin-inline-start:6px}:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){top:16px}@supports (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){inset-inline-start:70%}}@supports not (inset-inline-start: 0){:host(.tab-layout-icon-hide) ::slotted(ion-badge),:host(.tab-has-label-only) ::slotted(ion-badge){left:70%}:host-context([dir=rtl]):host(.tab-layout-icon-hide) ::slotted(ion-badge),:host-context([dir=rtl]).tab-layout-icon-hide ::slotted(ion-badge),:host-context([dir=rtl]):host(.tab-has-label-only) ::slotted(ion-badge),:host-context([dir=rtl]).tab-has-label-only ::slotted(ion-badge){left:unset;right:unset;right:70%}@supports selector(:dir(rtl)){:host(.tab-layout-icon-hide:dir(rtl)) ::slotted(ion-badge),:host(.tab-has-label-only:dir(rtl)) ::slotted(ion-badge){left:unset;right:unset;right:70%}}}:host(.tab-layout-icon-hide) ::slotted(ion-label),:host(.tab-has-label-only) ::slotted(ion-label){margin-top:0;margin-bottom:0}:host(.tab-layout-label-hide) ::slotted(ion-badge),:host(.tab-has-icon-only) ::slotted(ion-badge){top:16px}:host(.tab-layout-label-hide) ::slotted(ion-icon),:host(.tab-has-icon-only) ::slotted(ion-icon){margin-top:0;margin-bottom:0;font-size:24px}'}}},[33,"ion-tab-button",{disabled:[4],download:[1],href:[1],rel:[1],layout:[1025],selected:[1028],tab:[1],target:[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]]),Iy=function(){"undefined"!=typeof customElements&&["ion-tab-button","ion-ripple-effect"].forEach((e=>{switch(e){case"ion-tab-button":customElements.get(e)||customElements.define(e,Cy);break;case"ion-ripple-effect":customElements.get(e)||Fv()}}))};let Sy;const Ny=(e,t)=>{const n=(()=>{if("undefined"==typeof window)return new Map;if(!Sy){const e=window;e.Ionicons=e.Ionicons||{},Sy=e.Ionicons.map=e.Ionicons.map||new Map}return Sy})().get(e);if(n)return n;try{return Bp(`svg/${e}.svg`)}catch(AW){console.warn(`[Ionicons Warning]: Could not load icon with name "${e}". Ensure that the icon is registered using addIcons or that the icon SVG data is passed directly to the icon component.`,t)}},Ty=(e,t,n,r,i)=>(n="ios"===(n&&Oy(n))?"ios":"md",r&&"ios"===n?e=Oy(r):i&&"md"===n?e=Oy(i):(e||!t||Ry(t)||(e=t),Dy(e)&&(e=Oy(e))),Dy(e)&&""!==e.trim()?""!==e.replace(/[a-z]|-|\d/gi,"")?null:e:null),Ay=e=>Dy(e)&&(e=e.trim(),Ry(e))?e:null,Ry=e=>e.length>0&&/(\/|\.)/.test(e),Dy=e=>"string"==typeof e,Oy=e=>e.toLowerCase(),Py=e=>{if(1===e.nodeType){if("script"===e.nodeName.toLowerCase())return!1;for(let t=0;t<e.attributes.length;t++){const n=e.attributes[t].name;if(Dy(n)&&0===n.toLowerCase().indexOf("on"))return!1}for(let t=0;t<e.childNodes.length;t++)if(!Py(e.childNodes[t]))return!1}return!0},Ly=new Map,My=new Map;let Fy;const jy=(e,t)=>{let n=My.get(e);if(!n){if("undefined"==typeof fetch||"undefined"==typeof document)return Ly.set(e,""),Promise.resolve();if((e=>e.startsWith("data:image/svg+xml"))(e)&&(e=>-1!==e.indexOf(";utf8,"))(e)){Fy||(Fy=new DOMParser);const t=Fy.parseFromString(e,"text/html").querySelector("svg");return t&&Ly.set(e,t.outerHTML),Promise.resolve()}n=fetch(e).then((n=>{if(n.ok)return n.text().then((n=>{n&&!1!==t&&(n=(e=>{const t=document.createElement("div");t.innerHTML=e;for(let r=t.childNodes.length-1;r>=0;r--)"svg"!==t.childNodes[r].nodeName.toLowerCase()&&t.removeChild(t.childNodes[r]);const n=t.firstElementChild;if(n&&"svg"===n.nodeName.toLowerCase()){const e=n.getAttribute("class")||"";if(n.setAttribute("class",(e+" s-ion-icon").trim()),Py(n))return t.innerHTML}return""})(n)),Ly.set(e,n||"")}));Ly.set(e,"")})),My.set(e,n)}return n},By=Pf(class extends Kf{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.iconName=null,this.inheritedAttributes={},this.didLoadIcon=!1,this.svgContent=void 0,this.isVisible=!1,this.mode=Vy(),this.color=void 0,this.ios=void 0,this.md=void 0,this.flipRtl=void 0,this.name=void 0,this.src=void 0,this.icon=void 0,this.size=void 0,this.lazy=!1,this.sanitize=!0}componentWillLoad(){this.inheritedAttributes=((e,t=[])=>{const n={};return t.forEach((t=>{e.hasAttribute(t)&&(null!==e.getAttribute(t)&&(n[t]=e.getAttribute(t)),e.removeAttribute(t))})),n})(this.el,["aria-label"])}connectedCallback(){this.waitUntilVisible(this.el,"50px",(()=>{this.isVisible=!0,this.loadIcon()}))}componentDidLoad(){this.didLoadIcon||this.loadIcon()}disconnectedCallback(){this.io&&(this.io.disconnect(),this.io=void 0)}waitUntilVisible(e,t,n){if(this.lazy&&"undefined"!=typeof window&&window.IntersectionObserver){const r=this.io=new window.IntersectionObserver((e=>{e[0].isIntersecting&&(r.disconnect(),this.io=void 0,n())}),{rootMargin:t});r.observe(e)}else n()}loadIcon(){if(this.isVisible){const e=(e=>{let t=Ay(e.src);if(t)return t;if(t=Ty(e.name,e.icon,e.mode,e.ios,e.md),t)return Ny(t,e);if(e.icon){if(t=Ay(e.icon),t)return t;if(t=Ay(e.icon[e.mode]),t)return t}return null})(this);e&&(Ly.has(e)?this.svgContent=Ly.get(e):jy(e,this.sanitize).then((()=>this.svgContent=Ly.get(e))),this.didLoadIcon=!0)}this.iconName=Ty(this.name,this.icon,this.mode,this.ios,this.md)}render(){const{flipRtl:e,iconName:t,inheritedAttributes:n,el:r}=this,i=this.mode||"md",o=!!t&&(t.includes("arrow")||t.includes("chevron"))&&!1!==e,a=e||o;return $p(Wp,Object.assign({role:"img",class:Object.assign(Object.assign({[i]:!0},zy(this.color)),{[`icon-${this.size}`]:!!this.size,"flip-rtl":a,"icon-rtl":a&&(s=r,s&&""!==s.dir?"rtl"===s.dir.toLowerCase():"rtl"===(null===document||void 0===document?void 0:document.dir.toLowerCase()))})},n),this.svgContent?$p("div",{class:"icon-inner",innerHTML:this.svgContent}):$p("div",{class:"icon-inner"}));var s}static get assetsDirs(){return["svg"]}get el(){return this}static get watchers(){return{name:["loadIcon"],src:["loadIcon"],icon:["loadIcon"],ios:["loadIcon"],md:["loadIcon"]}}static get style(){return":host{display:inline-block;width:1em;height:1em;contain:strict;fill:currentColor;-webkit-box-sizing:content-box !important;box-sizing:content-box !important}:host .ionicon{stroke:currentColor}.ionicon-fill-none{fill:none}.ionicon-stroke-width{stroke-width:32px;stroke-width:var(--ionicon-stroke-width, 32px)}.icon-inner,.ionicon,svg{display:block;height:100%;width:100%}@supports (background: -webkit-named-image(i)){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}@supports not selector(:dir(rtl)) and selector(:host-context([dir='rtl'])){:host(.icon-rtl) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}}:host(.flip-rtl):host-context([dir='rtl']) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}@supports selector(:dir(rtl)){:host(.flip-rtl:dir(rtl)) .icon-inner{-webkit-transform:scaleX(-1);transform:scaleX(-1)}:host(.flip-rtl:dir(ltr)) .icon-inner{-webkit-transform:scaleX(1);transform:scaleX(1)}}:host(.icon-small){font-size:1.125rem !important}:host(.icon-large){font-size:2rem !important}:host(.ion-color){color:var(--ion-color-base) !important}:host(.ion-color-primary){--ion-color-base:var(--ion-color-primary, #3880ff)}:host(.ion-color-secondary){--ion-color-base:var(--ion-color-secondary, #0cd1e8)}:host(.ion-color-tertiary){--ion-color-base:var(--ion-color-tertiary, #f4a942)}:host(.ion-color-success){--ion-color-base:var(--ion-color-success, #10dc60)}:host(.ion-color-warning){--ion-color-base:var(--ion-color-warning, #ffce00)}:host(.ion-color-danger){--ion-color-base:var(--ion-color-danger, #f14141)}:host(.ion-color-light){--ion-color-base:var(--ion-color-light, #f4f5f8)}:host(.ion-color-medium){--ion-color-base:var(--ion-color-medium, #989aa2)}:host(.ion-color-dark){--ion-color-base:var(--ion-color-dark, #222428)}"}},[1,"ion-icon",{mode:[1025],color:[1],ios:[1],md:[1],flipRtl:[4,"flip-rtl"],name:[513],src:[1],icon:[8],size:[1],lazy:[4],sanitize:[4],svgContent:[32],isVisible:[32]}]),Vy=()=>"undefined"!=typeof document&&document.documentElement.getAttribute("mode")||"md",zy=e=>e?{"ion-color":!0,[`ion-color-${e}`]:!0}:null,Uy=function(){"undefined"!=typeof customElements&&["ion-icon"].forEach((e=>{"ion-icon"===e&&(customElements.get(e)||customElements.define(e,By))}))},$y=U.createContext({onIonViewWillEnter:()=>{},ionViewWillEnter:()=>{},onIonViewDidEnter:()=>{},ionViewDidEnter:()=>{},onIonViewWillLeave:()=>{},ionViewWillLeave:()=>{},onIonViewDidLeave:()=>{},ionViewDidLeave:()=>{},cleanupIonViewWillEnter:()=>{},cleanupIonViewDidEnter:()=>{},cleanupIonViewWillLeave:()=>{},cleanupIonViewDidLeave:()=>{}}),qy=class{constructor(){this.ionViewWillEnterCallbacks=[],this.ionViewDidEnterCallbacks=[],this.ionViewWillLeaveCallbacks=[],this.ionViewDidLeaveCallbacks=[],this.ionViewWillEnterDestructorCallbacks=[],this.ionViewDidEnterDestructorCallbacks=[],this.ionViewWillLeaveDestructorCallbacks=[],this.ionViewDidLeaveDestructorCallbacks=[]}onIonViewWillEnter(e){if(e.id){const t=this.ionViewWillEnterCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewWillEnterCallbacks[t]=e:this.ionViewWillEnterCallbacks.push(e)}else this.ionViewWillEnterCallbacks.push(e)}teardownCallback(e,t){const n=t.filter((t=>t.id===e.id));0!==n.length&&(n.forEach((e=>{e&&"function"==typeof e.destructor&&e.destructor()})),t=t.filter((t=>t.id!==e.id)))}cleanupIonViewWillEnter(e){this.teardownCallback(e,this.ionViewWillEnterDestructorCallbacks)}cleanupIonViewDidEnter(e){this.teardownCallback(e,this.ionViewDidEnterDestructorCallbacks)}cleanupIonViewWillLeave(e){this.teardownCallback(e,this.ionViewWillLeaveDestructorCallbacks)}cleanupIonViewDidLeave(e){this.teardownCallback(e,this.ionViewDidLeaveDestructorCallbacks)}ionViewWillEnter(){this.ionViewWillEnterCallbacks.forEach((e=>{const t=e();e.id&&this.ionViewWillEnterDestructorCallbacks.push({id:e.id,destructor:t})}))}onIonViewDidEnter(e){if(e.id){const t=this.ionViewDidEnterCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewDidEnterCallbacks[t]=e:this.ionViewDidEnterCallbacks.push(e)}else this.ionViewDidEnterCallbacks.push(e)}ionViewDidEnter(){this.ionViewDidEnterCallbacks.forEach((e=>{const t=e();e.id&&this.ionViewDidEnterDestructorCallbacks.push({id:e.id,destructor:t})}))}onIonViewWillLeave(e){if(e.id){const t=this.ionViewWillLeaveCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewWillLeaveCallbacks[t]=e:this.ionViewWillLeaveCallbacks.push(e)}else this.ionViewWillLeaveCallbacks.push(e)}ionViewWillLeave(){this.ionViewWillLeaveCallbacks.forEach((e=>{const t=e();e.id&&this.ionViewWillLeaveDestructorCallbacks.push({id:e.id,destructor:t})}))}onIonViewDidLeave(e){if(e.id){const t=this.ionViewDidLeaveCallbacks.findIndex((t=>t.id===e.id));t>-1?this.ionViewDidLeaveCallbacks[t]=e:this.ionViewDidLeaveCallbacks.push(e)}else this.ionViewDidLeaveCallbacks.push(e)}ionViewDidLeave(){this.ionViewDidLeaveCallbacks.forEach((e=>{const t=e();e.id&&this.ionViewDidLeaveDestructorCallbacks.push({id:e.id,destructor:t})})),this.componentCanBeDestroyed()}onComponentCanBeDestroyed(e){this.componentCanBeDestroyedCallback=e}componentCanBeDestroyed(){this.componentCanBeDestroyedCallback&&this.componentCanBeDestroyedCallback()}},Wy=U.createContext({getIonRedirect:()=>{},getIonRoute:()=>{},getPageManager:()=>{},getStackManager:()=>{},goBack:e=>{"undefined"!=typeof window&&("string"==typeof e?window.location.pathname=e:window.history.back())},navigate:e=>{"undefined"!=typeof window&&(window.location.pathname=e)},hasIonicRouter:()=>!1,routeInfo:void 0,setCurrentTab:()=>{},changeTab:(e,t)=>{"undefined"!=typeof window&&(window.location.pathname=t)},resetTab:(e,t)=>{"undefined"!=typeof window&&(window.location.pathname=t)}}),Hy=e=>e.toLowerCase().split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(""),Gy=e=>e.replace(/([A-Z])/g,(e=>`-${e[0].toLowerCase()}`)),Ky=(e,t,n={})=>{if(e instanceof Element){const r=Yy(e.classList,t,n);""!==r&&(e.className=r),Object.keys(t).forEach((n=>{if("children"!==n&&"style"!==n&&"ref"!==n&&"class"!==n&&"className"!==n&&"forwardedRef"!==n)if(0===n.indexOf("on")&&n[2]===n[2].toUpperCase()){const r=n.substring(2),i=r[0].toLowerCase()+r.substring(1);Xy(i)||Qy(e,i,t[n])}else e[n]=t[n],"string"==typeof t[n]&&e.setAttribute(Gy(n),t[n])}))}},Yy=(e,t,n)=>{const r=t.className||t.class,i=n.className||n.class,o=Jy(e),a=Jy(r?r.split(" "):[]),s=Jy(i?i.split(" "):[]),l=[];return o.forEach((e=>{a.has(e)?(l.push(e),a.delete(e)):s.has(e)||l.push(e)})),a.forEach((e=>l.push(e))),l.join(" ")},Xy=e=>{if("undefined"==typeof document)return!0;{const t="on"+(e=>"doubleclick"===e?"dblclick":e)(e);let n=t in document;if(!n){const e=document.createElement("div");e.setAttribute(t,"return;"),n="function"==typeof e[t]}return n}},Qy=(e,t,n)=>{const r=e.__events||(e.__events={}),i=r[t];i&&e.removeEventListener(t,i),e.addEventListener(t,r[t]=function(e){n&&n.call(this,e)})},Jy=e=>{const t=new Map;return e.forEach((e=>t.set(e,e))),t},Zy=(...e)=>t=>{e.forEach((e=>{((e,t)=>{"function"==typeof e?e(t):null!=e&&(e.current=t)})(e,t)}))},eb=(e,t,n,r)=>{void 0!==r&&r();const i=Hy(e),o=class extends U.Component{constructor(e){super(e),this.setComponentElRef=e=>{this.componentEl=e}}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(e){Ky(this.componentEl,this.props,e)}render(){const t=this.props,{children:r,forwardedRef:i,style:o,className:a,ref:s}=t,l=mv(t,["children","forwardedRef","style","className","ref"]);let u=Object.keys(l).reduce(((e,t)=>{const n=l[t];if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const r=t.substring(2).toLowerCase();"undefined"!=typeof document&&Xy(r)&&(e[t]=n)}else{const r=typeof n;"string"!==r&&"boolean"!==r&&"number"!==r||(e[Gy(t)]=n)}return e}),{});n&&(u=n(this.props,u));const c=Object.assign(Object.assign({},u),{ref:Zy(i,this.setComponentElRef),style:o});return z.createElement(e,c,r)}static get displayName(){return i}};return t&&(o.contextType=t),((e,t)=>{const n=(t,n)=>U.createElement(e,Object.assign({},t,{forwardedRef:n}));return n.displayName=t,U.forwardRef(n)})(o,i)},tb=eb("ion-card-content",void 0,void 0,Dv),nb=eb("ion-content",void 0,void 0,$v),rb=eb("ion-grid",void 0,void 0,Jv),ib=(e,t)=>{const n=(t,n)=>U.createElement(e,Object.assign({},t,{forwardedRef:n}));return n.displayName=t,U.forwardRef(n)},ob=()=>{if("undefined"!=typeof window){const e=window.Ionic;if(e&&e.config)return e.config}return null},ab=(e,t)=>{((e,t)=>{void 0===t||"undefined"==typeof customElements||customElements.get(e)||customElements.define(e,t)})(e,t);const n=Hy(e),r=class extends U.Component{constructor(e){super(e),this.handleClick=e=>{const{routerLink:t,routerDirection:n,routerOptions:r,routerAnimation:i}=this.props;void 0!==t&&(e.preventDefault(),this.context.navigate(t,n,void 0,i,r))},this.ref=U.createRef(),this.stableMergedRefs=Zy(this.ref,this.props.forwardedRef)}componentDidMount(){this.componentDidUpdate(this.props)}componentDidUpdate(e){const t=this.ref.current;Ky(t,this.props,e)}render(){const t=this.props,{children:n,forwardedRef:r,style:i,className:o,ref:a}=t,s=mv(t,["children","forwardedRef","style","className","ref"]),l=Object.keys(s).reduce(((e,t)=>{if(0===t.indexOf("on")&&t[2]===t[2].toUpperCase()){const n=t.substring(2).toLowerCase();Xy(n)&&(e[t]=s[t])}else["string","boolean","number"].includes(typeof s[t])&&(e[Gy(t)]=s[t]);return e}),{}),u=Object.assign(Object.assign({},l),{ref:this.stableMergedRefs,style:i});if(this.props.routerLink&&!this.props.href&&(u.href=this.props.routerLink),u.onClick){const e=u.onClick;u.onClick=t=>{e(t),t.defaultPrevented||this.handleClick(t)}}else u.onClick=this.handleClick;return z.createElement(e,u,n)}static get displayName(){return n}static get contextType(){return Wy}};return ib(r,n)},sb=ab("ion-button",iy),lb=ab("ion-card",oy),ub=U.createContext({addOverlay:()=>{},removeOverlay:()=>{}}),cb=({onAddOverlay:e,onRemoveOverlay:t})=>{const[n,r]=z.useState({}),i=z.useRef({});z.useEffect((()=>{e(o),t(a)}),[]);const o=(e,t,n)=>{const o=Object.assign({},i.current);o[e]={component:t,containerElement:n},i.current=o,r(o)},a=e=>{const t=Object.assign({},i.current);delete t[e],i.current=t,r(t)},s=Object.keys(n);return U.createElement(U.Fragment,null,s.map((e=>{const t=n[e];return id.createPortal(t.component,t.containerElement,`overlay-${e}`)})))},db=eb("ion-tab-button",void 0,void 0,Iy),hb=eb("ion-tab-bar",void 0,void 0,Ey),pb=eb("ion-router-outlet",void 0,void 0,ky),fb=eb("ion-app",void 0,void 0,xy),mb=eb("ion-icon",void 0,void 0,Uy),gb=(()=>class extends U.Component{constructor(e){super(e),this.ionContext={addOverlay:(e,t,n)=>{this.addOverlayCallback&&this.addOverlayCallback(e,t,n)},removeOverlay:e=>{this.removeOverlayCallback&&this.removeOverlayCallback(e)}}}render(){return U.createElement(ub.Provider,{value:this.ionContext},U.createElement(fb,Object.assign({},this.props),this.props.children),U.createElement(cb,{onAddOverlay:e=>{this.addOverlayCallback=e},onRemoveOverlay:e=>{this.removeOverlayCallback=e}}))}static get displayName(){return"IonApp"}})(),vb=U.createContext({registerIonPage:()=>{},isInOutlet:()=>!1});class yb extends U.PureComponent{constructor(e){super(e),this.ionPageElementRef=U.createRef(),this.stableMergedRefs=Zy(this.ionPageElementRef,this.props.forwardedRef),this.ionViewWillEnterHandler=this.ionViewWillEnterHandler.bind(this),this.ionViewDidEnterHandler=this.ionViewDidEnterHandler.bind(this),this.ionViewWillLeaveHandler=this.ionViewWillLeaveHandler.bind(this),this.ionViewDidLeaveHandler=this.ionViewDidLeaveHandler.bind(this)}componentDidMount(){this.ionPageElementRef.current&&(this.context.isInOutlet()&&this.ionPageElementRef.current.classList.add("ion-page-invisible"),this.context.registerIonPage(this.ionPageElementRef.current,this.props.routeInfo),this.ionPageElementRef.current.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionPageElementRef.current.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionPageElementRef.current.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionPageElementRef.current.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}componentWillUnmount(){this.ionPageElementRef.current&&(this.ionPageElementRef.current.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionPageElementRef.current.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionPageElementRef.current.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{className:t,children:n,routeInfo:r,forwardedRef:i}=e,o=mv(e,["className","children","routeInfo","forwardedRef"]);return U.createElement($y.Consumer,null,(e=>(this.ionLifeCycleContext=e,U.createElement("div",Object.assign({className:t?`${t} ion-page`:"ion-page",ref:this.stableMergedRefs},o),n))))}static get contextType(){return vb}}class bb extends U.Component{constructor(e){super(e)}render(){const e=this.props,{className:t,children:n,forwardedRef:r}=e,i=mv(e,["className","children","forwardedRef"]);return this.context.hasIonicRouter()?U.createElement(yb,Object.assign({className:t?`${t}`:"",routeInfo:this.context.routeInfo,forwardedRef:r},i),n):U.createElement("div",Object.assign({className:t?`ion-page ${t}`:"ion-page",ref:r},i),n)}static get displayName(){return"IonPage"}static get contextType(){return Wy}}const xb=ib(bb,"IonPage"),wb={main:0},kb=(e="main")=>{var t;const n=(null!==(t=wb[e])&&void 0!==t?t:0)+1;return wb[e]=n,n.toString()},_b=eb("ion-nav",void 0,void 0,ry);ib((e=>{var{children:t,forwardedRef:n}=e,r=mv(e,["children","forwardedRef"]);const[i,o]=z.useState([]),a=e=>o((t=>[...t,e])),s=e=>o((t=>t.filter((t=>t!==e)))),l=z.useMemo((()=>((e,t)=>{const n=new WeakMap,r=`react-delegate-${kb()}`;let i=0;return{attachViewToDom:async(t,o,a,s)=>{const l=document.createElement("div");s&&l.classList.add(...s),t.appendChild(l);const u=o(a),c=`${r}-${i++}`,d=rd.createPortal(u,l,c);return n.set(l,d),e(d),Promise.resolve(l)},removeViewFromDom:(e,r)=>{const i=n.get(r);return i&&t(i),r.remove(),Promise.resolve()}}})(a,s)),[]);return U.createElement(_b,Object.assign({delegate:l,ref:n},r),i)}),"IonNav"),U.createContext({activeTab:void 0,selectTab:()=>!1});const Eb="undefined"!=typeof HTMLElement?HTMLElement:class{};class Cb extends U.Component{constructor(e){super(e),this.outletIsReady=!1,this.ionViewWillEnterHandler=this.ionViewWillEnterHandler.bind(this),this.ionViewDidEnterHandler=this.ionViewDidEnterHandler.bind(this),this.ionViewWillLeaveHandler=this.ionViewWillLeaveHandler.bind(this),this.ionViewDidLeaveHandler=this.ionViewDidLeaveHandler.bind(this)}componentDidMount(){this.ionRouterOutlet&&(this.outletIsReady||lm(this.ionRouterOutlet,(()=>{this.outletIsReady=!0,this.context.registerIonPage(this.ionRouterOutlet,this.props.routeInfo)})),this.ionRouterOutlet.addEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionRouterOutlet.addEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionRouterOutlet.addEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionRouterOutlet.addEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}componentWillUnmount(){this.ionRouterOutlet&&(this.ionRouterOutlet.removeEventListener("ionViewWillEnter",this.ionViewWillEnterHandler),this.ionRouterOutlet.removeEventListener("ionViewDidEnter",this.ionViewDidEnterHandler),this.ionRouterOutlet.removeEventListener("ionViewWillLeave",this.ionViewWillLeaveHandler),this.ionRouterOutlet.removeEventListener("ionViewDidLeave",this.ionViewDidLeaveHandler))}ionViewWillEnterHandler(){this.ionLifeCycleContext.ionViewWillEnter()}ionViewDidEnterHandler(){this.ionLifeCycleContext.ionViewDidEnter()}ionViewWillLeaveHandler(){this.ionLifeCycleContext.ionViewWillLeave()}ionViewDidLeaveHandler(){this.ionLifeCycleContext.ionViewDidLeave()}render(){const e=this.props,{StackManager:t,children:n,routeInfo:r}=e,i=mv(e,["StackManager","children","routeInfo"]);return U.createElement($y.Consumer,null,(e=>(this.ionLifeCycleContext=e,U.createElement(t,{routeInfo:r},U.createElement(pb,Object.assign({setRef:e=>this.ionRouterOutlet=e},i),n)))))}static get contextType(){return vb}}class Ib extends U.Component{constructor(e){super(e)}render(){const e=this.context.getStackManager(),t=this.props,{children:n,forwardedRef:r}=t,i=mv(t,["children","forwardedRef"]);return this.context.hasIonicRouter()?i.ionPage?U.createElement(Cb,Object.assign({StackManager:e,routeInfo:this.context.routeInfo},i),n):U.createElement(e,{routeInfo:this.context.routeInfo},U.createElement(pb,Object.assign({},i,{forwardedRef:r}),n)):U.createElement(pb,Object.assign({ref:r},this.props),this.props.children)}static get contextType(){return Wy}}const Sb=ib(Ib,"IonRouterOutlet"),Nb=(()=>class extends U.Component{constructor(e){super(e),this.handleIonTabButtonClick=this.handleIonTabButtonClick.bind(this)}handleIonTabButtonClick(){this.props.onClick&&this.props.onClick(new CustomEvent("ionTabButtonClick",{detail:{tab:this.props.tab,href:this.props.href,routeOptions:this.props.routerOptions}}))}render(){const e=mv(this.props,["onClick"]);return U.createElement(db,Object.assign({onIonTabButtonClick:this.handleIonTabButtonClick},e))}static get displayName(){return"IonTabButton"}})();class Tb extends U.PureComponent{constructor(e){super(e),this.setActiveTabOnContext=e=>{};const t={};U.Children.forEach(e.children,(n=>{var r,i,o,a;null!=n&&"object"==typeof n&&n.props&&(n.type===Nb||n.type.isTabButton)&&(t[n.props.tab]={originalHref:n.props.href,currentHref:n.props.href,originalRouteOptions:n.props.href===(null===(r=e.routeInfo)||void 0===r?void 0:r.pathname)?null===(i=e.routeInfo)||void 0===i?void 0:i.routeOptions:void 0,currentRouteOptions:n.props.href===(null===(o=e.routeInfo)||void 0===o?void 0:o.pathname)?null===(a=e.routeInfo)||void 0===a?void 0:a.routeOptions:void 0})})),this.state={tabs:t},this.onTabButtonClick=this.onTabButtonClick.bind(this),this.renderTabButton=this.renderTabButton.bind(this),this.setActiveTabOnContext=this.setActiveTabOnContext.bind(this),this.selectTab=this.selectTab.bind(this)}componentDidMount(){const e=this.state.tabs,t=Object.keys(e).find((t=>{const n=e[t].originalHref;return this.props.routeInfo.pathname.startsWith(n)}));t&&this.setState({activeTab:t})}componentDidUpdate(){this.state.activeTab&&this.setActiveTabOnContext(this.state.activeTab)}selectTab(e){const t=this.state.tabs[e];return!!t&&(this.onTabButtonClick(new CustomEvent("ionTabButtonClick",{detail:{href:t.currentHref,tab:e,selected:e===this.state.activeTab,routeOptions:void 0}})),!0)}static getDerivedStateFromProps(e,t){var n,r,i;const o=Object.assign({},t.tabs),a=Object.keys(t.tabs).find((n=>{const r=t.tabs[n].originalHref;return e.routeInfo.pathname.startsWith(r)}));U.Children.forEach(e.children,(e=>{if(null!=e&&"object"==typeof e&&e.props&&(e.type===Nb||e.type.isTabButton)){const t=o[e.props.tab];t&&t.originalHref===e.props.href||(o[e.props.tab]={originalHref:e.props.href,currentHref:e.props.href,originalRouteOptions:e.props.routeOptions,currentRouteOptions:e.props.routeOptions})}}));const{activeTab:s}=t;if(a&&s){const l=t.tabs[s].currentHref,u=t.tabs[s].currentRouteOptions;a===s&&l===(null===(n=e.routeInfo)||void 0===n?void 0:n.pathname)&&u===(null===(r=e.routeInfo)||void 0===r?void 0:r.routeOptions)||(o[a]={originalHref:o[a].originalHref,currentHref:e.routeInfo.pathname+(e.routeInfo.search||""),originalRouteOptions:o[a].originalRouteOptions,currentRouteOptions:null===(i=e.routeInfo)||void 0===i?void 0:i.routeOptions},"pop"===e.routeInfo.routeAction&&a!==s&&(o[s]={originalHref:o[s].originalHref,currentHref:o[s].originalHref,originalRouteOptions:o[s].originalRouteOptions,currentRouteOptions:o[s].currentRouteOptions}))}return a&&e.onSetCurrentTab(a,e.routeInfo),{activeTab:a,tabs:o}}onTabButtonClick(e,t){const n=this.state.tabs[e.detail.tab],r=n.originalHref,i=e.detail.href,{activeTab:o}=this.state;t&&t(e),o===e.detail.tab?r!==i&&this.context.resetTab(e.detail.tab,r,n.originalRouteOptions):(this.props.onIonTabsWillChange&&this.props.onIonTabsWillChange(new CustomEvent("ionTabWillChange",{detail:{tab:e.detail.tab}})),this.props.onIonTabsDidChange&&this.props.onIonTabsDidChange(new CustomEvent("ionTabDidChange",{detail:{tab:e.detail.tab}})),this.setActiveTabOnContext(e.detail.tab),this.context.changeTab(e.detail.tab,i,e.detail.routeOptions))}renderTabButton(e){return t=>{var n,r;if(null!=t&&t.props&&(t.type===Nb||t.type.isTabButton)){const i=t.props.tab===e?null===(n=this.props.routeInfo)||void 0===n?void 0:n.pathname:this.state.tabs[t.props.tab].currentHref,o=t.props.tab===e?null===(r=this.props.routeInfo)||void 0===r?void 0:r.routeOptions:this.state.tabs[t.props.tab].currentRouteOptions;return U.cloneElement(t,{href:i,routeOptions:o,onClick:e=>this.onTabButtonClick(e,t.props.onClick)})}return null}}render(){const{activeTab:e}=this.state;return U.createElement(hb,Object.assign({},this.props,{selectedTab:e}),U.Children.map(this.props.children,this.renderTabButton(e)))}static get contextType(){return Wy}}const Ab=U.memo((e=>{var{forwardedRef:t}=e,n=mv(e,["forwardedRef"]);const r=z.useContext(Wy);return U.createElement(Tb,Object.assign({ref:t},n,{routeInfo:n.routeInfo||r.routeInfo||{pathname:window.location.pathname},onSetCurrentTab:r.setCurrentTab}),n.children)}));ib(Ab,"IonTabBar");class Rb extends Eb{constructor(){super()}}"undefined"!=typeof window&&window.customElements&&(window.customElements.get("ion-tabs")||window.customElements.define("ion-tabs",Rb));class Db extends U.PureComponent{constructor(e){super(e),this.props.name&&console.warn('In Ionic React, you import icons from "ionicons/icons" and set the icon you imported to the "icon" property. Setting the "name" property has no effect.')}render(){var e,t;const n=this.props,{icon:r,ios:i,md:o,mode:a}=n,s=mv(n,["icon","ios","md","mode"]);let l;const u=ob(),c=a||(null==u?void 0:u.get("mode"));return l=i||o?"ios"===c?null!==(e=null!=i?i:o)&&void 0!==e?e:r:null!==(t=null!=o?o:i)&&void 0!==t?t:r:r,U.createElement(mb,Object.assign({ref:this.props.forwardedRef,icon:l},s),this.props.children)}static get contextType(){return Wy}}ib(Db,"IonIcon");class Ob extends U.PureComponent{render(){const e=this.context.getIonRoute();return this.context.hasIonicRouter()&&Ob?U.createElement(e,Object.assign({},this.props)):(console.error("You either do not have an Ionic Router package, or your router does not support using <IonRoute>"),null)}static get contextType(){return Wy}}U.PureComponent;const Pb=U.createContext({routeInfo:void 0,push:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},back:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},canGoBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")},nativeBack:()=>{throw new Error("An Ionic Router is required for IonRouterContext")}});function Lb(){const e=function(e,t,n){const r=z.useRef(),i=z.useMemo((()=>`on${e}DidDismiss`),[e]),o=z.useMemo((()=>`on${e}DidPresent`),[e]),a=z.useMemo((()=>`on${e}WillDismiss`),[e]),s=z.useMemo((()=>`on${e}WillPresent`),[e]);n();const l=z.useCallback((async e=>{if(r.current)return;const{onDidDismiss:n,onWillDismiss:l,onDidPresent:u,onWillPresent:c}=e,d=mv(e,["onDidDismiss","onWillDismiss","onDidPresent","onWillPresent"]);r.current=await t.create(Object.assign({},d)),Ky(r.current,{[i]:e=>{n&&n(e),r.current=void 0},[o]:e=>u&&u(e),[a]:e=>l&&l(e),[s]:e=>c&&c(e)}),r.current.present()}),[t]);return{present:l,dismiss:z.useCallback((async()=>{r.current&&await r.current.dismiss(),r.current=void 0}),[])}}("IonToast",Gg,my);return[z.useCallback(((t,n)=>"string"==typeof t?e.present({message:t,duration:n}):e.present(t)),[e.present]),e.dismiss]}U.PureComponent;const Mb=U.createContext({addViewItem:()=>{},canGoBack:()=>{},clearOutlet:()=>{},createViewItem:()=>{},findViewItemByPathname:()=>{},findLeavingViewItemByRouteInfo:()=>{},findViewItemByRouteInfo:()=>{},getChildrenToRender:()=>{},goBack:()=>{},unMountViewItem:()=>{}});class Fb extends U.Component{constructor(e){super(e),this.ionLifeCycleContext=new qy,this._isMounted=!1,this.ionLifeCycleContext.onComponentCanBeDestroyed((()=>{this.props.mount||this._isMounted&&this.setState({show:!1},(()=>this.props.removeView()))})),this.state={show:!0}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){const{show:e}=this.state;return U.createElement($y.Provider,{value:this.ionLifeCycleContext},e&&this.props.children)}}class jb{constructor(){this.locationHistory=[],this.tabHistory={}}add(e){"push"===e.routeAction||null==e.routeAction?this._add(e):"pop"===e.routeAction?this._pop(e):"replace"===e.routeAction&&this._replace(e),"root"===e.routeDirection&&(this._clear(),this._add(e))}clearTabStack(e){const t=this._getRouteInfosByKey(e);t&&(t.forEach((e=>{this.locationHistory=this.locationHistory.filter((t=>t.id!==e.id))})),this.tabHistory[e]=[])}update(e){const t=this.locationHistory.findIndex((t=>t.id===e.id));t>-1&&this.locationHistory.splice(t,1,e);const n=this.tabHistory[e.tab||""];if(n){const t=n.findIndex((t=>t.id===e.id));t>-1?n.splice(t,1,e):n.push(e)}else e.tab&&(this.tabHistory[e.tab]=[e])}_add(e){const t=this._getRouteInfosByKey(e.tab);t&&(this._areRoutesEqual(t[t.length-1],e)&&t.pop(),t.push(e)),this.locationHistory.push(e)}_areRoutesEqual(e,t){return!(!e||!t)&&e.pathname===t.pathname&&e.search===t.search}_pop(e){const t=this._getRouteInfosByKey(e.tab);t&&(t.pop(),t.pop(),t.push(e)),this.locationHistory.pop(),this.locationHistory.pop(),this.locationHistory.push(e)}_replace(e){const t=this._getRouteInfosByKey(e.tab);t&&t.pop(),this.locationHistory.pop(),this._add(e)}_clear(){Object.keys(this.tabHistory).forEach((e=>this.tabHistory[e]=[])),this.locationHistory=[]}_getRouteInfosByKey(e){let t;return e&&(t=this.tabHistory[e],t||(t=this.tabHistory[e]=[])),t}getFirstRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[0]}getCurrentRouteInfoForTab(e){const t=this._getRouteInfosByKey(e);if(t)return t[t.length-1]}findLastLocation(e){const t=this._getRouteInfosByKey(e.tab);if(t)for(let n=t.length-2;n>=0;n--){const r=t[n];if(r&&r.pathname===e.pushedByRoute)return r}for(let n=this.locationHistory.length-2;n>=0;n--){const t=this.locationHistory[n];if(t&&t.pathname===e.pushedByRoute)return t}}previous(){return this.locationHistory[this.locationHistory.length-2]||this.locationHistory[this.locationHistory.length-1]}current(){return this.locationHistory[this.locationHistory.length-1]}canGoBack(){return this.locationHistory.length>1}}class Bb extends U.PureComponent{constructor(e){super(e),this.ionRouterContextValue={push:(e,t,n,r,i)=>{this.navigate(e,t,n,i,r)},back:e=>{this.goBack(void 0,e)},canGoBack:()=>this.props.locationHistory.canGoBack(),nativeBack:()=>this.props.onNativeBack(),routeInfo:this.props.routeInfo},this.state={goBack:this.goBack.bind(this),hasIonicRouter:()=>!0,navigate:this.navigate.bind(this),getIonRedirect:this.getIonRedirect.bind(this),getIonRoute:this.getIonRoute.bind(this),getStackManager:this.getStackManager.bind(this),getPageManager:this.getPageManager.bind(this),routeInfo:this.props.routeInfo,setCurrentTab:this.props.onSetCurrentTab,changeTab:this.props.onChangeTab,resetTab:this.props.onResetTab}}componentDidMount(){"undefined"!=typeof document&&(this.handleHardwareBackButton=this.handleHardwareBackButton.bind(this),document.addEventListener("ionBackButton",this.handleHardwareBackButton))}componentWillUnmount(){"undefined"!=typeof document&&document.removeEventListener("ionBackButton",this.handleHardwareBackButton)}handleHardwareBackButton(e){e.detail.register(0,(e=>{this.nativeGoBack(),e()}))}goBack(e,t){this.props.onNavigateBack(e,t)}nativeGoBack(){this.props.onNativeBack()}navigate(e,t="forward",n="push",r,i,o){this.props.onNavigate(e,n,t,r,i,o)}getPageManager(){return yb}getIonRedirect(){return this.props.ionRedirect}getIonRoute(){return this.props.ionRoute}getStackManager(){return this.props.stackManager}render(){return U.createElement(Wy.Provider,{value:Object.assign(Object.assign({},this.state),{routeInfo:this.props.routeInfo})},U.createElement(Pb.Provider,{value:Object.assign(Object.assign({},this.ionRouterContextValue),{routeInfo:this.props.routeInfo})},this.props.children))}}class Vb{constructor(){this.viewStacks={},this.add=this.add.bind(this),this.clear=this.clear.bind(this),this.getViewItemsForOutlet=this.getViewItemsForOutlet.bind(this),this.remove=this.remove.bind(this)}add(e){const{outletId:t}=e;this.viewStacks[t]?this.viewStacks[t].push(e):this.viewStacks[t]=[e]}clear(e){return setTimeout((()=>{delete this.viewStacks[e]}),500)}getViewItemsForOutlet(e){return this.viewStacks[e]||[]}remove(e){const{outletId:t}=e,n=this.viewStacks[t];if(n){const r=n.find((t=>t.id===e.id));r&&(r.mount=!1,this.viewStacks[t]=n.filter((e=>e.id!==r.id)))}}getStackIds(){return Object.keys(this.viewStacks)}getAllViewItems(){const e=this.getStackIds(),t=[];return e.forEach((e=>{t.push(...this.viewStacks[e])})),t}}class zb extends U.PureComponent{render(){return U.createElement(mp,Object.assign({path:this.props.path,exact:this.props.exact,render:this.props.render},void 0!==this.props.computedMatch?{computedMatch:this.props.computedMatch}:{}))}}const Ub=({pathname:e,componentProps:t})=>{const{exact:n,component:r}=t,i=fp(e,{exact:n,path:t.path||t.from,component:r});return i||!1};class $b extends Vb{constructor(){super(),this.createViewItem=this.createViewItem.bind(this),this.findViewItemByRouteInfo=this.findViewItemByRouteInfo.bind(this),this.findLeavingViewItemByRouteInfo=this.findLeavingViewItemByRouteInfo.bind(this),this.getChildrenToRender=this.getChildrenToRender.bind(this),this.findViewItemByPathname=this.findViewItemByPathname.bind(this)}createViewItem(e,t,n,r){const i={id:kb("viewItem"),outletId:e,ionPageElement:r,reactElement:t,mount:!0,ionRoute:!1};return t.type===Ob&&(i.ionRoute=!0,i.disableIonPageManagement=t.props.disableIonPageManagement),i.routeData={match:Ub({pathname:n.pathname,componentProps:t.props}),childProps:t.props},i}getChildrenToRender(e,t,n){const r=this.getViewItemsForOutlet(e);return U.Children.forEach(t.props.children,(e=>{const t=r.find((t=>qb(e,t.routeData.childProps.path||t.routeData.childProps.from)));t&&(t.reactElement=e)})),r.map((e=>{let t;if(e.ionRoute&&!e.disableIonPageManagement)t=U.createElement(Fb,{key:`view-${e.id}`,mount:e.mount,removeView:()=>this.remove(e)},U.cloneElement(e.reactElement,{computedMatch:e.routeData.match}));else{const r=qb(e.reactElement,n.pathname);t=U.createElement(Fb,{key:`view-${e.id}`,mount:e.mount,removeView:()=>this.remove(e)},U.cloneElement(e.reactElement,{computedMatch:e.routeData.match})),!r&&e.routeData.match&&(e.routeData.match=void 0,e.mount=!1)}return t}))}findViewItemByRouteInfo(e,t,n){const{viewItem:r,match:i}=this.findViewItemByPath(e.pathname,t);return(void 0===n||!0===n)&&r&&i&&(r.routeData.match=i),r}findLeavingViewItemByRouteInfo(e,t,n=!0){const{viewItem:r}=this.findViewItemByPath(e.lastPathname,t,n);return r}findViewItemByPathname(e,t){const{viewItem:n}=this.findViewItemByPath(e,t);return n}findViewItemByPath(e,t,n){let r,i,o;if(t)o=this.getViewItemsForOutlet(t),o.some(a),r||o.some(s);else{const e=this.getAllViewItems();e.some(a),r||e.some(s)}return{viewItem:r,match:i};function a(t){var o,a;if(n&&!t.ionRoute)return!1;if(i=Ub({pathname:e,componentProps:t.routeData.childProps}),i){const e=i.path.includes(":");if(!e||e&&i.url===(null===(a=null===(o=t.routeData)||void 0===o?void 0:o.match)||void 0===a?void 0:a.url))return r=t,!0}return!1}function s(t){return!t.routeData.childProps.path&&!t.routeData.childProps.from&&(i={path:e,url:e,isExact:!0,params:{}},r=t,!0)}}}function qb(e,t){return Ub({pathname:t,componentProps:e.props})}const Wb=e=>!e.classList.contains("ion-page-invisible")&&!e.classList.contains("ion-page-hidden");class Hb extends U.PureComponent{constructor(e){super(e),this.stackContextValue={registerIonPage:this.registerIonPage.bind(this),isInOutlet:()=>!0},this.pendingPageTransition=!1,this.registerIonPage=this.registerIonPage.bind(this),this.transitionPage=this.transitionPage.bind(this),this.handlePageTransition=this.handlePageTransition.bind(this),this.id=kb("routerOutlet"),this.prevProps=void 0,this.skipTransition=!1}componentDidMount(){this.clearOutletTimeout&&clearTimeout(this.clearOutletTimeout),this.routerOutletElement&&(this.setupRouterOutlet(this.routerOutletElement),this.handlePageTransition(this.props.routeInfo))}componentDidUpdate(e){const{pathname:t}=this.props.routeInfo,{pathname:n}=e.routeInfo;t!==n?(this.prevProps=e,this.handlePageTransition(this.props.routeInfo)):this.pendingPageTransition&&(this.handlePageTransition(this.props.routeInfo),this.pendingPageTransition=!1)}componentWillUnmount(){this.clearOutletTimeout=this.context.clearOutlet(this.id)}async handlePageTransition(e){var t,n;if(this.routerOutletElement&&this.routerOutletElement.commit){let r=this.context.findViewItemByRouteInfo(e,this.id),i=this.context.findLeavingViewItemByRouteInfo(e,this.id);!i&&e.prevRouteLastPathname&&(i=this.context.findViewItemByPathname(e.prevRouteLastPathname,this.id)),i&&("replace"===e.routeAction?i.mount=!1:"push"!==e.routeAction||"forward"!==e.routeDirection?"none"!==e.routeDirection&&r!==i&&(i.mount=!1):(null===(t=e.routeOptions)||void 0===t?void 0:t.unmount)&&(i.mount=!1));const o=function(e,t){let n;return U.Children.forEach(e,(e=>{Ub({pathname:t.pathname,componentProps:e.props})&&(n=e)})),n||(U.Children.forEach(e,(e=>{e.props.path||e.props.from||(n=e)})),n)}(null===(n=this.ionRouterOutlet)||void 0===n?void 0:n.props.children,e);if(r?r.reactElement=o:o&&(r=this.context.createViewItem(this.id,o,e),this.context.addViewItem(r)),r&&r.ionPageElement){if(r===i&&r.routeData.match.url!==e.pathname)return;if(!i&&this.props.routeInfo.prevRouteLastPathname&&(i=this.context.findViewItemByPathname(this.props.routeInfo.prevRouteLastPathname,this.id)),Wb(r.ionPageElement)&&void 0!==i&&!Wb(i.ionPageElement))return;this.transitionPage(e,r,i)}else!i||o||r||i.ionPageElement&&(i.ionPageElement.classList.add("ion-page-hidden"),i.ionPageElement.setAttribute("aria-hidden","true"));this.forceUpdate()}else this.pendingPageTransition=!0}registerIonPage(e,t){const n=this.context.findViewItemByRouteInfo(t,this.id);if(n){const t=n.ionPageElement;if(n.ionPageElement=e,n.ionRoute=!0,t===e)return}this.handlePageTransition(t)}async setupRouterOutlet(e){e.swipeHandler={canStart:()=>{const t=ob();if(!t||!t.get("swipeBackEnabled","ios"===e.mode))return!1;const{routeInfo:n}=this.props,r=this.prevProps&&this.prevProps.routeInfo.pathname===n.pushedByRoute?this.prevProps.routeInfo:{pathname:n.pushedByRoute||""},i=this.context.findViewItemByRouteInfo(r,this.id,!1);return!!i&&i.mount&&i.routeData.match.path!==n.pathname},onStart:async()=>{const{routeInfo:e}=this.props,t=this.prevProps&&this.prevProps.routeInfo.pathname===e.pushedByRoute?this.prevProps.routeInfo:{pathname:e.pushedByRoute||""},n=this.context.findViewItemByRouteInfo(t,this.id,!1),r=this.context.findViewItemByRouteInfo(e,this.id,!1);return n&&r&&await this.transitionPage(e,n,r,"back",!0),Promise.resolve()},onEnd:e=>{if(e)this.skipTransition=!0,this.context.goBack();else{const{routeInfo:e}=this.props,t=this.prevProps&&this.prevProps.routeInfo.pathname===e.pushedByRoute?this.prevProps.routeInfo:{pathname:e.pushedByRoute||""},n=this.context.findViewItemByRouteInfo(t,this.id,!1);if(n!==this.context.findViewItemByRouteInfo(e,this.id,!1)&&void 0!==(null==n?void 0:n.ionPageElement)){const{ionPageElement:e}=n;e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")}}}}}async transitionPage(e,t,n,r,i=!1){const o=async(t,n)=>{const r=this.skipTransition;r?this.skipTransition=!1:(t.classList.add("ion-page"),t.classList.add("ion-page-invisible")),await a.commit(t,n,{duration:r||void 0===l?0:void 0,direction:l,showGoBack:!!e.pushedByRoute,progressAnimation:i,animationBuilder:e.routeAnimation})},a=this.routerOutletElement,s="none"===e.routeDirection||"root"===e.routeDirection?void 0:e.routeDirection,l=null!=r?r:s;if(t&&t.ionPageElement&&this.routerOutletElement)if(n&&n.ionPageElement&&t===n)if(u=n.reactElement,c=e.pathname,d=!0,Ub({pathname:c,componentProps:Object.assign(Object.assign({},u.props),{exact:d})})){const e=function(e){let t;if(t="string"==typeof e?e:e.outerHTML,document){const e=document.createElement("div");e.innerHTML=t,e.style.zIndex="";const n=e.getElementsByTagName("ion-back-button");return n[0]&&n[0].remove(),e.firstChild}}(n.ionPageElement.outerHTML);e&&(this.routerOutletElement.appendChild(e),await o(t.ionPageElement,e),this.routerOutletElement.removeChild(e))}else await o(t.ionPageElement,void 0);else await o(t.ionPageElement,null==n?void 0:n.ionPageElement),n&&n.ionPageElement&&!i&&(n.ionPageElement.classList.add("ion-page-hidden"),n.ionPageElement.setAttribute("aria-hidden","true"));var u,c,d}render(){const{children:e}=this.props,t=U.Children.only(e);this.ionRouterOutlet=t;const n=this.context.getChildrenToRender(this.id,this.ionRouterOutlet,this.props.routeInfo,(()=>{this.forceUpdate()}));return U.createElement(vb.Provider,{value:this.stackContextValue},U.cloneElement(t,{ref:e=>{t.props.setRef&&t.props.setRef(e),t.props.forwardedRef&&(t.props.forwardedRef.current=e),this.routerOutletElement=e;const{ref:n}=t;"function"==typeof n&&n(e)}},n))}static get contextType(){return Mb}}class Gb extends U.PureComponent{constructor(e){super(e),this.exitViewFromOtherOutletHandlers=[],this.locationHistory=new jb,this.viewStack=new $b,this.routeMangerContextState={canGoBack:()=>this.locationHistory.canGoBack(),clearOutlet:this.viewStack.clear,findViewItemByPathname:this.viewStack.findViewItemByPathname,getChildrenToRender:this.viewStack.getChildrenToRender,goBack:()=>this.handleNavigateBack(),createViewItem:this.viewStack.createViewItem,findViewItemByRouteInfo:this.viewStack.findViewItemByRouteInfo,findLeavingViewItemByRouteInfo:this.viewStack.findLeavingViewItemByRouteInfo,addViewItem:this.viewStack.add,unMountViewItem:this.viewStack.remove};const t={id:kb("routeInfo"),pathname:this.props.location.pathname,search:this.props.location.search};this.locationHistory.add(t),this.handleChangeTab=this.handleChangeTab.bind(this),this.handleResetTab=this.handleResetTab.bind(this),this.handleNativeBack=this.handleNativeBack.bind(this),this.handleNavigate=this.handleNavigate.bind(this),this.handleNavigateBack=this.handleNavigateBack.bind(this),this.props.registerHistoryListener(this.handleHistoryChange.bind(this)),this.handleSetCurrentTab=this.handleSetCurrentTab.bind(this),this.state={routeInfo:t}}handleChangeTab(e,t,n){if(!t)return;const r=this.locationHistory.getCurrentRouteInfoForTab(e),[i,o]=t.split("?");r?(this.incomingRouteParams=Object.assign(Object.assign({},r),{routeAction:"push",routeDirection:"none"}),r.pathname===i?(this.incomingRouteParams.routeOptions=n,this.props.history.push(r.pathname+(r.search||""))):(this.incomingRouteParams.pathname=i,this.incomingRouteParams.search=o?"?"+o:void 0,this.incomingRouteParams.routeOptions=n,this.props.history.push(i+(o?"?"+o:"")))):this.handleNavigate(i,"push","none",void 0,n,e)}handleHistoryChange(e,t){var n,r,i;let o;if(o=this.incomingRouteParams&&"replace"===this.incomingRouteParams.routeAction?this.locationHistory.previous():this.locationHistory.current(),o.pathname+o.search!==e.pathname){if(!this.incomingRouteParams){if("REPLACE"===t&&(this.incomingRouteParams={routeAction:"replace",routeDirection:"none",tab:this.currentTab}),"POP"===t){const e=this.locationHistory.current();if(e&&e.pushedByRoute){const t=this.locationHistory.findLastLocation(e);this.incomingRouteParams=Object.assign(Object.assign({},t),{routeAction:"pop",routeDirection:"back"})}else this.incomingRouteParams={routeAction:"pop",routeDirection:"none",tab:this.currentTab}}this.incomingRouteParams||(this.incomingRouteParams={routeAction:"push",routeDirection:(null===(n=e.state)||void 0===n?void 0:n.direction)||"forward",routeOptions:null===(r=e.state)||void 0===r?void 0:r.routerOptions,tab:this.currentTab})}let a;if(null===(i=this.incomingRouteParams)||void 0===i?void 0:i.id)a=Object.assign(Object.assign({},this.incomingRouteParams),{lastPathname:o.pathname}),this.locationHistory.add(a);else{const t="push"===this.incomingRouteParams.routeAction&&"forward"===this.incomingRouteParams.routeDirection;if(a=Object.assign(Object.assign({id:kb("routeInfo")},this.incomingRouteParams),{lastPathname:o.pathname,pathname:e.pathname,search:e.search,params:this.props.match.params,prevRouteLastPathname:o.lastPathname}),t)a.tab=o.tab,a.pushedByRoute=o.pathname;else if("pop"===a.routeAction){const e=this.locationHistory.findLastLocation(a);a.pushedByRoute=null==e?void 0:e.pushedByRoute}else if("push"===a.routeAction&&a.tab!==o.tab){const e=this.locationHistory.getCurrentRouteInfoForTab(a.tab);a.pushedByRoute=null==e?void 0:e.pushedByRoute}else if("replace"===a.routeAction){const e=this.locationHistory.current(),t=null==e?void 0:e.pushedByRoute,n=void 0!==t&&t!==a.pathname?t:a.pushedByRoute;a.lastPathname=(null==e?void 0:e.pathname)||a.lastPathname,a.prevRouteLastPathname=null==e?void 0:e.lastPathname,a.pushedByRoute=n,a.routeDirection=a.routeDirection||(null==e?void 0:e.routeDirection),a.routeAnimation=a.routeAnimation||(null==e?void 0:e.routeAnimation)}this.locationHistory.add(a)}this.setState({routeInfo:a})}this.incomingRouteParams=void 0}handleNativeBack(){const e=this.props.history;(e.goBack||e.back)()}handleNavigate(e,t,n,r,i,o){this.incomingRouteParams=Object.assign(this.incomingRouteParams||{},{routeAction:t,routeDirection:n,routeOptions:i,routeAnimation:r,tab:o}),"push"===t?this.props.history.push(e):this.props.history.replace(e)}handleNavigateBack(e="/",t){const n=ob();e=e||n&&n.get("backButtonDefaultHref");const r=this.locationHistory.current();if(r&&r.pushedByRoute){const n=this.locationHistory.findLastLocation(r);if(n){const e=t||r.routeAnimation;if(this.incomingRouteParams=Object.assign(Object.assign({},n),{routeAction:"pop",routeDirection:"back",routeAnimation:e}),r.lastPathname===r.pushedByRoute||n.pathname===r.pushedByRoute&&""===r.tab&&""===n.tab){const e=this.props.history;(e.goBack||e.back)()}else this.handleNavigate(n.pathname+(n.search||""),"pop","back",e)}else this.handleNavigate(e,"pop","back",t)}else this.handleNavigate(e,"pop","back",t)}handleResetTab(e,t,n){const r=this.locationHistory.getFirstRouteInfoForTab(e);if(r){const e=Object.assign({},r);e.pathname=t,e.routeOptions=n,this.incomingRouteParams=Object.assign(Object.assign({},e),{routeAction:"pop",routeDirection:"back"}),this.props.history.push(e.pathname+(e.search||""))}}handleSetCurrentTab(e){this.currentTab=e;const t=Object.assign({},this.locationHistory.current());t.tab!==e&&(t.tab=e,this.locationHistory.update(t))}render(){return U.createElement(Mb.Provider,{value:this.routeMangerContextState},U.createElement(Bb,{ionRoute:zb,ionRedirect:{},stackManager:Hb,routeInfo:this.state.routeInfo,onNativeBack:this.handleNativeBack,onNavigateBack:this.handleNavigateBack,onNavigate:this.handleNavigate,onSetCurrentTab:this.handleSetCurrentTab,onChangeTab:this.handleChangeTab,onResetTab:this.handleResetTab,locationHistory:this.locationHistory},this.props.children))}}const Kb=function(e){var t="withRouter("+(e.displayName||e.name)+")",n=function(t){var n=t.wrappedComponentRef,r=fh(t,["wrappedComponentRef"]);return U.createElement(rp.Consumer,null,(function(t){return t||bd(!1),U.createElement(e,pd({},r,t,{ref:n}))}))};return n.displayName=t,n.WrappedComponent=e,Qh(n,e)}(Gb);Kb.displayName="IonRouter";class Yb extends U.Component{constructor(e){super(e);const{history:t}=e,n=mv(e,["history"]);this.history=t||Dd(n),this.history.listen(this.handleHistoryChange.bind(this)),this.registerHistoryListener=this.registerHistoryListener.bind(this)}handleHistoryChange(e,t){const n=e.location||e,r=e.action||t;this.historyListenHandler&&this.historyListenHandler(n,r)}registerHistoryListener(e){this.historyListenHandler=e}render(){const e=this.props,{children:t}=e,n=mv(e,["children"]);return U.createElement(ip,Object.assign({history:this.history},n),U.createElement(Kb,{registerHistoryListener:this.registerHistoryListener},t))}}U.Component,U.Component;var Xb={};
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const Qb=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},Jb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],o=i+1<e.length,a=o?e[i+1]:0,s=i+2<e.length,l=s?e[i+2]:0,u=t>>2,c=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;s||(h=64,o||(d=64)),r.push(n[u],n[c],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Qb(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){const o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{const o=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0;++i;const a=i<e.length?n[e.charAt(i)]:64;++i;const s=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==o||null==a||null==s)throw new Zb;const l=t<<2|o>>4;if(r.push(l),64!==a){const e=o<<4&240|a>>2;if(r.push(e),64!==s){const e=a<<6&192|s;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class Zb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ex=function(e){return function(e){const t=Qb(e);return Jb.encodeByteArray(t,!0)}(e).replace(/\./g,"")},tx=function(e){try{return Jb.decodeString(e,!0)}catch(AW){console.error("base64Decode failed: ",AW)}return null};function nx(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=nx(e[n],t[n]));return e}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
const rx=()=>
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,ix=()=>{try{return rx()||(()=>{if("undefined"==typeof process||void 0===Xb)return;const e=Xb.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"==typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(AW){return}const t=e&&tx(e[1]);return t&&JSON.parse(t)})()}catch(AW){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${AW}`)}},ox=()=>{var e;return null===(e=ix())||void 0===e?void 0:e.config};
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class ax{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch((()=>{})),1===e.length?e(t):e(t,n))}}}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function sx(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[ex(JSON.stringify({alg:"none",type:"JWT"})),ex(JSON.stringify(o)),""].join(".")}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function lx(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function ux(){var e;const t=null===(e=ix())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(AW){return!1}}function cx(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function dx(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function hx(){const e=lx();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function px(){return!ux()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fx(){try{return"object"==typeof indexedDB}catch(AW){return!1}}class mx extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,mx.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,gx.prototype.create)}}class gx{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],o=i?function(e,t){return e.replace(vx,((e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`}))}(i,n):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new mx(r,a,n)}}const vx=/\{\$([^}]+)}/g;
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function yx(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function bx(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],o=t[i];if(xx(n)&&xx(o)){if(!bx(n,o))return!1}else if(n!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function xx(e){return null!==e&&"object"==typeof e}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function wx(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach((e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))})):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function kx(e){const t={};return e.replace(/^\?/,"").split("&").forEach((e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}})),t}function _x(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function Ex(e,t){const n=new Cx(e,t);return n.subscribe.bind(n)}class Cx{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then((()=>{e(this)})).catch((e=>{this.error(e)}))}next(e){this.forEachObserver((t=>{t.next(e)}))}error(e){this.forEachObserver((t=>{t.error(e)})),this.close(e)}complete(){this.forEachObserver((e=>{e.complete()})),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"==typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=Ix),void 0===r.error&&(r.error=Ix),void 0===r.complete&&(r.complete=Ix);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(AW){}})),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(AW){"undefined"!=typeof console&&console.error&&console.error(AW)}}))}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function Ix(){}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Sx(e){return e&&e._delegate?e._delegate:e}class Nx{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const Tx="[DEFAULT]";
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Ax{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new ax;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(AW){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(AW){if(r)return null;throw AW}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e))try{this.getOrInitializeService({instanceIdentifier:Tx})}catch(AW){}for(const[e,t]of this.instancesDeferred.entries()){const n=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:n});t.resolve(e)}catch(AW){}}}}clearInstance(e=Tx){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter((e=>"INTERNAL"in e)).map((e=>e.INTERNAL.delete())),...e.filter((e=>"_delete"in e)).map((e=>e._delete()))])}isComponentSet(){return null!=this.component}isInitialized(e=Tx){return this.instances.has(e)}getOptions(e=Tx){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,o]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&o.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const r of n)try{r(e,t)}catch(TQ){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===Tx?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(TQ){}var r;return n||null}normalizeInstanceIdentifier(e=Tx){return this.component?this.component.multipleInstances?e:Tx:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Rx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Ax(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const Dx=[];var Ox;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(Ox||(Ox={}));const Px={debug:Ox.DEBUG,verbose:Ox.VERBOSE,info:Ox.INFO,warn:Ox.WARN,error:Ox.ERROR,silent:Ox.SILENT},Lx=Ox.INFO,Mx={[Ox.DEBUG]:"log",[Ox.VERBOSE]:"log",[Ox.INFO]:"info",[Ox.WARN]:"warn",[Ox.ERROR]:"error"},Fx=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=Mx[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class jx{constructor(e){this.name=e,this._logLevel=Lx,this._logHandler=Fx,this._userLogHandler=null,Dx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Ox))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?Px[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Ox.DEBUG,...e),this._logHandler(this,Ox.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Ox.VERBOSE,...e),this._logHandler(this,Ox.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Ox.INFO,...e),this._logHandler(this,Ox.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Ox.WARN,...e),this._logHandler(this,Ox.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Ox.ERROR,...e),this._logHandler(this,Ox.ERROR,...e)}}const Bx=(e,t)=>t.some((t=>e instanceof t));let Vx,zx;const Ux=new WeakMap,$x=new WeakMap,qx=new WeakMap,Wx=new WeakMap,Hx=new WeakMap;let Gx={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return $x.get(e);if("objectStoreNames"===t)return e.objectStoreNames||qx.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xx(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function Kx(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(zx||(zx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...t){return e.apply(Qx(this),t),Xx(Ux.get(this))}:function(...t){return Xx(e.apply(Qx(this),t))}:function(t,...n){const r=e.call(Qx(this),t,...n);return qx.set(r,t.sort?t.sort():[t]),Xx(r)}}function Yx(e){return"function"==typeof e?Kx(e):(e instanceof IDBTransaction&&function(e){if($x.has(e))return;const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",o),e.removeEventListener("abort",o)},i=()=>{t(),r()},o=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",o),e.addEventListener("abort",o)}));$x.set(e,t)}(e),Bx(e,Vx||(Vx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Gx):e)}function Xx(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",o)},i=()=>{t(Xx(e.result)),r()},o=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",o)}));return t.then((t=>{t instanceof IDBCursor&&Ux.set(t,e)})).catch((()=>{})),Hx.set(t,e),t}(e);if(Wx.has(e))return Wx.get(e);const t=Yx(e);return t!==e&&(Wx.set(e,t),Hx.set(t,e)),t}const Qx=e=>Hx.get(e),Jx=["get","getKey","getAll","getAllKeys","count"],Zx=["put","add","delete","clear"],ew=new Map;function tw(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(ew.get(t))return ew.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=Zx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!Jx.includes(n))return;const o=async function(e,...t){const o=this.transaction(e,i?"readwrite":"readonly");let a=o.store;return r&&(a=a.index(t.shift())),(await Promise.all([a[n](...t),i&&o.done]))[0]};return ew.set(t,o),o}var nw;nw=Gx,Gx={...nw,get:(e,t,n)=>tw(e,t)||nw.get(e,t,n),has:(e,t)=>!!tw(e,t)||nw.has(e,t)};
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class rw{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map((e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null})).filter((e=>e)).join(" ")}}const iw="@firebase/app",ow="0.9.28",aw=new jx("@firebase/app"),sw="[DEFAULT]",lw={[iw]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},uw=new Map,cw=new Map;function dw(e,t){try{e.container.addComponent(t)}catch(AW){aw.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,AW)}}function hw(e,t){e.container.addOrOverwriteComponent(t)}function pw(e){const t=e.name;if(cw.has(t))return aw.debug(`There were multiple attempts to register component ${t}.`),!1;cw.set(t,e);for(const n of uw.values())dw(n,e);return!0}function fw(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
const mw=new gx("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
let gw=class{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Nx("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw mw.create("app-deleted",{appName:this._name})}};
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const vw="10.8.1";function yw(e,t={}){let n=e;"object"!=typeof t&&(t={name:t});const r=Object.assign({name:sw,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!=typeof i||!i)throw mw.create("bad-app-name",{appName:String(i)});if(n||(n=ox()),!n)throw mw.create("no-options");const o=uw.get(i);if(o){if(bx(n,o.options)&&bx(r,o.config))return o;throw mw.create("duplicate-app",{appName:i})}const a=new Rx(i);for(const l of cw.values())a.addComponent(l);const s=new gw(n,r,a);return uw.set(i,s),s}async function bw(e){const t=e.name;uw.has(t)&&(uw.delete(t),await Promise.all(e.container.getProviders().map((e=>e.delete()))),e.isDeleted=!0)}function xw(e,t,n){var r;let i=null!==(r=lw[e])&&void 0!==r?r:e;n&&(i+=`-${n}`);const o=i.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${i}" with version "${t}":`];return o&&e.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void aw.warn(e.join(" "))}pw(new Nx(`${i}-version`,(()=>({library:i,version:t})),"VERSION"))}function ww(e,t){if(null!==e&&"function"!=typeof e)throw mw.create("invalid-log-argument");!function(e,t){for(const n of Dx){let r=null;t&&t.level&&(r=Px[t.level]),n.userLogHandler=null===e?null:(t,n,...i)=>{const o=i.map((e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((e=>e)).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:Ox[n].toLowerCase(),message:o,args:i,type:t.name})}}}(e,t)}function kw(e){var t;t=e,Dx.forEach((e=>{e.setLogLevel(t)}))}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const _w="firebase-heartbeat-database",Ew=1,Cw="firebase-heartbeat-store";let Iw=null;function Sw(){return Iw||(Iw=function(e,t,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const a=indexedDB.open(e,t),s=Xx(a);return r&&a.addEventListener("upgradeneeded",(e=>{r(Xx(a.result),e.oldVersion,e.newVersion,Xx(a.transaction),e)})),n&&a.addEventListener("blocked",(e=>n(e.oldVersion,e.newVersion,e))),s.then((e=>{o&&e.addEventListener("close",(()=>o())),i&&e.addEventListener("versionchange",(e=>i(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),s}(_w,Ew,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(Cw)}catch(AW){console.warn(AW)}}}).catch((e=>{throw mw.create("idb-open",{originalErrorMessage:e.message})}))),Iw}async function Nw(e,t){try{const n=(await Sw()).transaction(Cw,"readwrite"),r=n.objectStore(Cw);await r.put(t,Tw(e)),await n.done}catch(AW){if(AW instanceof mx)aw.warn(AW.message);else{const t=mw.create("idb-set",{originalErrorMessage:null==AW?void 0:AW.message});aw.warn(t.message)}}}function Tw(e){return`${e.name}!${e.options.appId}`}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Aw{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Dw(t),this._heartbeatsCachePromise=this._storage.read().then((e=>(this._heartbeatsCache=e,e)))}async triggerHeartbeat(){var e,t;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Rw();if((null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((e=>e.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=Rw(),{heartbeatsToSend:n,unsentEntries:r}=function(e,t=1024){const n=[];let r=e.slice();for(const i of e){const e=n.find((e=>e.agent===i.agent));if(e){if(e.dates.push(i.date),Ow(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ow(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=ex(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function Rw(){return(new Date).toISOString().substring(0,10)}class Dw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!fx()&&new Promise(((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})).then((()=>!0)).catch((()=>!1))}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await Sw()).transaction(Cw),n=await t.objectStore(Cw).get(Tw(e));return await t.done,n}catch(AW){if(AW instanceof mx)aw.warn(AW.message);else{const t=mw.create("idb-get",{originalErrorMessage:null==AW?void 0:AW.message});aw.warn(t.message)}}}(this.app);return(null==e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nw(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return Nw(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function Ow(e){return ex(JSON.stringify({version:2,heartbeats:e})).length}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var Pw;Pw="",pw(new Nx("platform-logger",(e=>new rw(e)),"PRIVATE")),pw(new Nx("heartbeat",(e=>new Aw(e)),"PRIVATE")),xw(iw,ow,Pw),xw(iw,ow,"esm2017"),xw("fire-js","");const Lw=Object.freeze(Object.defineProperty({__proto__:null,FirebaseError:mx,SDK_VERSION:vw,_DEFAULT_ENTRY_NAME:sw,_addComponent:dw,_addOrOverwriteComponent:hw,_apps:uw,_clearComponents:function(){cw.clear()},_components:cw,_getProvider:fw,_registerComponent:pw,_removeServiceInstance:function(e,t,n=sw){fw(e,t).clearInstance(n)},deleteApp:bw,getApp:function(e=sw){const t=uw.get(e);if(!t&&e===sw&&ox())return yw();if(!t)throw mw.create("no-app",{appName:e});return t},getApps:function(){return Array.from(uw.values())},initializeApp:yw,onLog:ww,registerVersion:xw,setLogLevel:kw},Symbol.toStringTag,{value:"Module"}));
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Mw{constructor(e,t){this._delegate=e,this.firebase=t,dw(e,new Nx("app-compat",(()=>this),"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise((e=>{this._delegate.checkDestroyed(),e()})).then((()=>(this.firebase.INTERNAL.removeApp(this.name),bw(this._delegate))))}_getService(e,t=sw){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=sw){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){dw(this._delegate,e)}_addOrOverwriteComponent(e){hw(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const Fw=new gx("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),jw=
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function e(){const t=
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function(e){const t={},n={__esModule:!0,initializeApp:function(r,i={}){const o=yw(r,i);if(yx(t,o.name))return t[o.name];const a=new e(o,n);return t[o.name]=a,a},app:r,registerVersion:xw,setLogLevel:kw,onLog:ww,apps:null,SDK_VERSION:vw,INTERNAL:{registerComponent:function(t){const i=t.name,o=i.replace("-compat","");if(pw(t)&&"PUBLIC"===t.type){const a=(e=r())=>{if("function"!=typeof e[o])throw Fw.create("invalid-app-argument",{appName:i});return e[o]()};void 0!==t.serviceProps&&nx(a,t.serviceProps),n[o]=a,e.prototype[o]=function(...e){return this._getService.bind(this,i).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[o]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:Lw}};function r(e){if(!yx(t,e=e||sw))throw Fw.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map((e=>t[e]))}}),r.App=e,n}(Mw);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){nx(t,e)},createSubscribe:Ex,ErrorFactory:gx,deepExtend:nx}),t}(),Bw=new jx("@firebase/app-compat");
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
if("object"==typeof self&&self.self===self&&void 0!==self.firebase){Bw.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&Bw.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Vw=jw;!
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function(e){xw("@firebase/app-compat","0.2.28",e)}(),
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
Vw.registerVersion("firebase","10.8.1","app-compat");const zw={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Uw="EMAIL_SIGNIN",$w="PASSWORD_RESET",qw="RECOVER_EMAIL",Ww="REVERT_SECOND_FACTOR_ADDITION",Hw="VERIFY_AND_CHANGE_EMAIL",Gw="VERIFY_EMAIL";function Kw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Yw=
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is incorrect, malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend.","unsupported-password-policy-schema-version":"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.","password-does-not-meet-requirements":"The password does not meet the requirements."}},Xw=Kw,Qw=new gx("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Jw=new jx("@firebase/auth");function Zw(e,...t){Jw.logLevel<=Ox.ERROR&&Jw.error(`Auth (${vw}): ${e}`,...t)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function ek(e,...t){throw ik(e,...t)}function tk(e,...t){return ik(e,...t)}function nk(e,t,n){const r=Object.assign(Object.assign({},Xw()),{[t]:n});return new gx("auth","Firebase",r).create(t,{appName:e.name})}function rk(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&ek(e,"argument-error"),nk(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ik(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return Qw.create(e,...t)}function ok(e,t,...n){if(!e)throw ik(t,...n)}function ak(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Zw(t),new Error(t)}function sk(e,t){e||ak(t)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function lk(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function uk(){return"http:"===ck()||"https:"===ck()}function ck(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class dk{constructor(e,t){this.shortDelay=e,this.longDelay=t,sk(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(lx())||dx()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(uk()||cx()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function hk(e,t){sk(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class pk{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:"undefined"!=typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!=typeof fetch?fetch:void ak("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:"undefined"!=typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!=typeof Headers?Headers:void ak("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:"undefined"!=typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!=typeof Response?Response:void ak("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const fk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},mk=new dk(3e4,6e4);
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function gk(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function vk(e,t,n,r,i={}){return yk(e,i,(async()=>{let i={},o={};r&&("GET"===t?o=r:i={body:JSON.stringify(r)});const a=wx(Object.assign({key:e.config.apiKey},o)).slice(1),s=await e._getAdditionalHeaders();return s["Content-Type"]="application/json",e.languageCode&&(s["X-Firebase-Locale"]=e.languageCode),pk.fetch()(xk(e,e.config.apiHost,n,a),Object.assign({method:t,headers:s,referrerPolicy:"no-referrer"},i))}))}async function yk(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},fk),t);try{const t=new kk(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw _k(e,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const t=i.ok?o.errorMessage:o.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw _k(e,"credential-already-in-use",o);if("EMAIL_EXISTS"===n)throw _k(e,"email-already-in-use",o);if("USER_DISABLED"===n)throw _k(e,"user-disabled",o);const s=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw nk(e,s,a);ek(e,s)}}catch(AW){if(AW instanceof mx)throw AW;ek(e,"network-request-failed",{message:String(AW)})}}async function bk(e,t,n,r,i={}){const o=await vk(e,t,n,r,i);return"mfaPendingCredential"in o&&ek(e,"multi-factor-auth-required",{_serverResponse:o}),o}function xk(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?hk(e.config,i):`${e.config.apiScheme}://${i}`}function wk(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class kk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise(((e,t)=>{this.timer=setTimeout((()=>t(tk(this.auth,"network-request-failed"))),mk.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function _k(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=tk(e,t,r);return i.customData._tokenResponse=n,i}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Ek(e){return void 0!==e&&void 0!==e.getResponse}function Ck(e){return void 0!==e&&void 0!==e.enterprise}class Ik{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return wk(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function Sk(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(AW){}}function Nk(e){return 1e3*Number(e)}function Tk(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Zw("JWT malformed, contained fewer than 3 sections"),null;try{const e=tx(n);return e?JSON.parse(e):(Zw("Failed to decode base64 JWT payload"),null)}catch(AW){return Zw("Caught error parsing JWT payload as JSON",null==AW?void 0:AW.toString()),null}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
async function Ak(e,t,n=!1){if(n)return t;try{return await t}catch(AW){throw AW instanceof mx&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(AW)&&e.auth.currentUser===e&&await e.auth.signOut(),AW}}class Rk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout((async()=>{await this.iteration()}),t)}async iteration(){try{await this.user.getIdToken(!0)}catch(AW){return void("auth/network-request-failed"===(null==AW?void 0:AW.code)&&this.schedule(!0))}this.schedule()}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Dk{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sk(this.lastLoginAt),this.creationTime=Sk(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */async function Ok(e){var t;const n=e.auth,r=await e.getIdToken(),i=await Ak(e,async function(e,t){return vk(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));ok(null==i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map((e=>{var{providerId:t}=e,n=mv(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})):[],s=function(e,t){const n=e.filter((e=>!t.some((t=>t.providerId===e.providerId))));return[...n,...t]}(e.providerData,a),l=e.isAnonymous,u=!(e.email&&o.passwordHash||(null==s?void 0:s.length)),c=!!l&&u,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:s,metadata:new Dk(o.createdAt,o.lastLoginAt),isAnonymous:c};Object.assign(e,d)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class Pk{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ok(e.idToken,"internal-error"),ok(void 0!==e.idToken,"internal-error"),ok(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=Tk(e);return ok(t,"internal-error"),ok(void 0!==t.exp,"internal-error"),ok(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return ok(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */await async function(e,t){const n=await yk(e,{},(async()=>{const n=wx({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,o=xk(e,r,"/v1/token",`key=${i}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",pk.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,o=new Pk;return n&&(ok("string"==typeof n,"internal-error",{appName:e}),o.refreshToken=n),r&&(ok("string"==typeof r,"internal-error",{appName:e}),o.accessToken=r),i&&(ok("number"==typeof i,"internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Pk,this.toJSON())}_performRefresh(){return ak("not implemented")}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Lk(e,t){ok("string"==typeof e||void 0===e,"internal-error",{appName:t})}class Mk{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=mv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Dk(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await Ak(this,this.stsTokenManager.getToken(this.auth,e));return ok(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=Sx(e),r=await n.getIdToken(t),i=Tk(r);ok(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o="object"==typeof i.firebase?i.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Sk(Nk(i.auth_time)),issuedAtTime:Sk(Nk(i.iat)),expirationTime:Sk(Nk(i.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=Sx(e);await Ok(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(ok(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map((e=>Object.assign({},e))),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Mk(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){ok(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Ok(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await Ak(this,
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
async function(e,t){return vk(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((e=>Object.assign({},e))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,o,a,s,l,u;const c=null!==(n=t.displayName)&&void 0!==n?n:void 0,d=null!==(r=t.email)&&void 0!==r?r:void 0,h=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(o=t.photoURL)&&void 0!==o?o:void 0,f=null!==(a=t.tenantId)&&void 0!==a?a:void 0,m=null!==(s=t._redirectEventId)&&void 0!==s?s:void 0,g=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(u=t.lastLoginAt)&&void 0!==u?u:void 0,{uid:y,emailVerified:b,isAnonymous:x,providerData:w,stsTokenManager:k}=t;ok(y&&k,e,"internal-error");const _=Pk.fromJSON(this.name,k);ok("string"==typeof y,e,"internal-error"),Lk(c,e.name),Lk(d,e.name),ok("boolean"==typeof b,e,"internal-error"),ok("boolean"==typeof x,e,"internal-error"),Lk(h,e.name),Lk(p,e.name),Lk(f,e.name),Lk(m,e.name),Lk(g,e.name),Lk(v,e.name);const E=new Mk({uid:y,auth:e,email:d,emailVerified:b,displayName:c,isAnonymous:x,photoURL:p,phoneNumber:h,tenantId:f,stsTokenManager:_,createdAt:g,lastLoginAt:v});return w&&Array.isArray(w)&&(E.providerData=w.map((e=>Object.assign({},e)))),m&&(E._redirectEventId=m),E}static async _fromIdTokenResponse(e,t,n=!1){const r=new Pk;r.updateFromServerResponse(t);const i=new Mk({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Ok(i),i}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const Fk=new Map;function jk(e){sk(e instanceof Function,"Expected a class definition");let t=Fk.get(e);return t?(sk(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Fk.set(e,t),t)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Bk{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Bk.type="NONE";const Vk=Bk;
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function zk(e,t,n){return`firebase:${e}:${t}:${n}`}class Uk{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=zk(this.userKey,r.apiKey,i),this.fullPersistenceKey=zk("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Mk._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new Uk(jk(Vk),e,n);const r=(await Promise.all(t.map((async e=>{if(await e._isAvailable())return e})))).filter((e=>e));let i=r[0]||jk(Vk);const o=zk(n,e.config.apiKey,e.name);let a=null;for(const l of t)try{const t=await l._get(o);if(t){const n=Mk._fromJSON(e,t);l!==i&&(a=n),i=l;break}}catch(TQ){}const s=r.filter((e=>e._shouldAllowMigration));return i._shouldAllowMigration&&s.length?(i=s[0],a&&await i._set(o,a.toJSON()),await Promise.all(t.map((async e=>{if(e!==i)try{await e._remove(o)}catch(TQ){}}))),new Uk(i,e,n)):new Uk(i,e,n)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function $k(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Gk(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(qk(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Yk(t))return"Blackberry";if(Xk(t))return"Webos";if(Wk(t))return"Safari";if((t.includes("chrome/")||Hk(t))&&!t.includes("edge/"))return"Chrome";if(Kk(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null==n?void 0:n.length))return n[1]}return"Other"}function qk(e=lx()){return/firefox\//i.test(e)}function Wk(e=lx()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function Hk(e=lx()){return/crios\//i.test(e)}function Gk(e=lx()){return/iemobile/i.test(e)}function Kk(e=lx()){return/android/i.test(e)}function Yk(e=lx()){return/blackberry/i.test(e)}function Xk(e=lx()){return/webos/i.test(e)}function Qk(e=lx()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Jk(e=lx()){return Qk(e)||Kk(e)||Xk(e)||Yk(e)||/windows phone/i.test(e)||Gk(e)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function Zk(e,t=[]){let n;switch(e){case"Browser":n=$k(lx());break;case"Worker":n=`${$k(lx())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${vw}/${r}`}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class e_{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise(((n,r)=>{try{n(e(t))}catch(AW){r(AW)}}));n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(AW){t.reverse();for(const n of t)try{n()}catch(sH){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null==AW?void 0:AW.message})}}}
/**
             * @license
             * Copyright 2023 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class t_{constructor(e){var t,n,r,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=o.minPasswordLength)&&void 0!==t?t:6,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),void 0!==o.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),void 0!==o.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),void 0!==o.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),void 0!==o.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,o,a;const s={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,s),this.validatePasswordCharacterOptions(e,s),s.isValid&&(s.isValid=null===(t=s.meetsMinPasswordLength)||void 0===t||t),s.isValid&&(s.isValid=null===(n=s.meetsMaxPasswordLength)||void 0===n||n),s.isValid&&(s.isValid=null===(r=s.containsLowercaseLetter)||void 0===r||r),s.isValid&&(s.isValid=null===(i=s.containsUppercaseLetter)||void 0===i||i),s.isValid&&(s.isValid=null===(o=s.containsNumericCharacter)||void 0===o||o),s.isValid&&(s.isValid=null===(a=s.containsNonAlphanumericCharacter)||void 0===a||a),s}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class n_{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new i_(this),this.idTokenSubscription=new i_(this),this.beforeStateQueue=new e_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Qw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=jk(t)),this._initializationPromise=this.queue((async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Uk.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(AW){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e,!0)):void 0}async initializeCurrentUser(e){var t;const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,o=null==r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==o||!(null==a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(AW){r=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(AW)))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return ok(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(AW){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Ok(e)}catch(AW){if("auth/network-request-failed"!==(null==AW?void 0:AW.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?Sx(e):null;return t&&ok(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ok(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue((async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue((async()=>{await this.assertedPersistence.setPersistence(jk(e))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e,t={}){return vk(e,"GET","/v2/passwordPolicy",gk(e,t))}
/**
             * @license
             * Copyright 2023 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(this),t=new t_(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new gx("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise(((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged((()=>{n(),e()}),t)}}))}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return vk(e,"POST","/v2/accounts:revokeToken",gk(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&jk(e)||this._popupRedirectResolver;ok(t,this,"argument-error"),this.redirectPersistenceManager=await Uk.create(this,[jk(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(e)))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(ok(a,this,"internal-error"),a.then((()=>{o||i(this.currentUser)})),"function"==typeof t){const i=e.addObserver(t,n,r);return()=>{o=!0,i()}}{const n=e.addObserver(t);return()=>{o=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ok(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Zk(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null==t?void 0:t.error)&&function(e,...t){Jw.logLevel<=Ox.WARN&&Jw.warn(`Auth (${vw}): ${e}`,...t)}(`Error while retrieving App Check token: ${t.error}`),null==t?void 0:t.token}}function r_(e){return Sx(e)}class i_{constructor(e){this.auth=e,this.observer=null,this.addObserver=Ex((e=>this.observer=e))}get next(){return ok(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */let o_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function a_(e){return o_.loadJS(e)}function s_(e){return`__${e}${Math.floor(1e6*Math.random())}`}class l_{constructor(e){this.type="recaptcha-enterprise",this.auth=r_(e)}async verify(e="verify",t=!1){async function n(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise((async(t,n)=>{(async function(e,t){return vk(e,"GET","/v2/recaptchaConfig",gk(e,t))})(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((r=>{if(void 0!==r.recaptchaKey){const n=new Ik(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((e=>{n(e)}))}))}function r(t,n,r){const i=window.grecaptcha;Ck(i)?i.enterprise.ready((()=>{i.enterprise.execute(t,{action:e}).then((e=>{n(e)})).catch((()=>{n("NO_RECAPTCHA")}))})):r(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((e,i)=>{n(this.auth).then((n=>{if(!t&&Ck(window.grecaptcha))r(n,e,i);else{if("undefined"==typeof window)return void i(new Error("RecaptchaVerifier is only supported in browser"));let t=o_.recaptchaEnterpriseScript;0!==t.length&&(t+=n),a_(t).then((()=>{r(n,e,i)})).catch((e=>{i(e)}))}})).catch((e=>{i(e)}))}))}}async function u_(e,t,n,r=!1){const i=new l_(e);let o;try{o=await i.verify(n)}catch(s){o=await i.verify(n,!0)}const a=Object.assign({},t);return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function c_(e,t,n,r){var i;if(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await u_(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch((async i=>{if("auth/missing-recaptcha-token"===i.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const i=await u_(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)}))}function d_(e,t,n){const r=r_(e);ok(r._canInitEmulator,r,"emulator-config-failed"),ok(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),o=h_(t),{host:a,port:s}=function(e){const t=h_(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:p_(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:p_(t)}}}(t),l=null===s?"":`:${s}`;r.config.emulator={url:`${o}//${a}${l}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:s,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */()}function h_(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function p_(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class f_{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ak("not implemented")}_getIdTokenResponse(e){return ak("not implemented")}_linkToIdToken(e,t){return ak("not implemented")}_getReauthenticationResolver(e){return ak("not implemented")}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */async function m_(e,t){return vk(e,"POST","/v1/accounts:resetPassword",gk(e,t))}async function g_(e,t){return vk(e,"POST","/v1/accounts:signUp",t)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
async function v_(e,t){return bk(e,"POST","/v1/accounts:signInWithPassword",gk(e,t))}async function y_(e,t){return vk(e,"POST","/v1/accounts:sendOobCode",gk(e,t))}async function b_(e,t){return y_(e,t)}async function x_(e,t){return y_(e,t)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class w_ extends f_{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new w_(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new w_(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return c_(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",v_);case"emailLink":
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */return async function(e,t){return bk(e,"POST","/v1/accounts:signInWithEmailLink",gk(e,t))}(e,{email:this._email,oobCode:this._password});default:ek(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return c_(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",g_);case"emailLink":return async function(e,t){return bk(e,"POST","/v1/accounts:signInWithEmailLink",gk(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:ek(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */async function k_(e,t){return bk(e,"POST","/v1/accounts:signInWithIdp",gk(e,t))}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class __ extends f_{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new __(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):ek("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=mv(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new __(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return k_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,k_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,k_(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=wx(t)}return e}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const E_={USER_NOT_FOUND:"user-not-found"};
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class C_ extends f_{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new C_({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new C_({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return bk(e,"POST","/v1/accounts:signInWithPhoneNumber",gk(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await bk(e,"POST","/v1/accounts:signInWithPhoneNumber",gk(e,t));if(n.temporaryProof)throw _k(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return bk(e,"POST","/v1/accounts:signInWithPhoneNumber",gk(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),E_)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new C_({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class I_{constructor(e){var t,n,r,i,o,a;const s=kx(_x(e)),l=null!==(t=s.apiKey)&&void 0!==t?t:null,u=null!==(n=s.oobCode)&&void 0!==n?n:null,c=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=s.mode)&&void 0!==r?r:null);ok(l&&u&&c,"argument-error"),this.apiKey=l,this.operation=c,this.code=u,this.continueUrl=null!==(i=s.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(o=s.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=s.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=kx(_x(e)).link,n=t?kx(_x(t)).deep_link_id:null,r=kx(_x(e)).deep_link_id;return(r?kx(_x(r)).link:null)||r||n||t||e}(e);try{return new I_(t)}catch(TQ){return null}}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class S_{constructor(){this.providerId=S_.PROVIDER_ID}static credential(e,t){return w_._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=I_.parseLink(t);return ok(n,"argument-error"),w_._fromEmailAndCode(e,n.code,n.tenantId)}}S_.PROVIDER_ID="password",S_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",S_.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class N_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class T_ extends N_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class A_ extends T_{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return ok("providerId"in t&&"signInMethod"in t,"argument-error"),__._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return ok(e.idToken||e.accessToken,"argument-error"),__._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return A_.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return A_.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:o,providerId:a}=e;if(!(n||r||t||i))return null;if(!a)return null;try{return new A_(a)._credential({idToken:t,accessToken:n,nonce:o,pendingToken:i})}catch(AW){return null}}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class R_ extends T_{constructor(){super("facebook.com")}static credential(e){return __._fromParams({providerId:R_.PROVIDER_ID,signInMethod:R_.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return R_.credentialFromTaggedObject(e)}static credentialFromError(e){return R_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return R_.credential(e.oauthAccessToken)}catch(TQ){return null}}}R_.FACEBOOK_SIGN_IN_METHOD="facebook.com",R_.PROVIDER_ID="facebook.com";
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class D_ extends T_{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return __._fromParams({providerId:D_.PROVIDER_ID,signInMethod:D_.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return D_.credentialFromTaggedObject(e)}static credentialFromError(e){return D_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n}=e;if(!t&&!n)return null;try{return D_.credential(t,n)}catch(TQ){return null}}}D_.GOOGLE_SIGN_IN_METHOD="google.com",D_.PROVIDER_ID="google.com";
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class O_ extends T_{constructor(){super("github.com")}static credential(e){return __._fromParams({providerId:O_.PROVIDER_ID,signInMethod:O_.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return O_.credentialFromTaggedObject(e)}static credentialFromError(e){return O_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e))return null;if(!e.oauthAccessToken)return null;try{return O_.credential(e.oauthAccessToken)}catch(TQ){return null}}}O_.GITHUB_SIGN_IN_METHOD="github.com",O_.PROVIDER_ID="github.com";class P_ extends f_{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return k_(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,k_(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,k_(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new P_(n,i):null}static _create(e,t){return new P_(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class L_ extends N_{constructor(e){ok(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return L_.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return L_.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=P_.fromJSON(e);return ok(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return P_._create(n,t)}catch(AW){return null}}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class M_ extends T_{constructor(){super("twitter.com")}static credential(e,t){return __._fromParams({providerId:M_.PROVIDER_ID,signInMethod:M_.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return M_.credentialFromTaggedObject(e)}static credentialFromError(e){return M_.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:n}=e;if(!t||!n)return null;try{return M_.credential(t,n)}catch(TQ){return null}}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
async function F_(e,t){return bk(e,"POST","/v1/accounts:signUp",gk(e,t))}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */M_.TWITTER_SIGN_IN_METHOD="twitter.com",M_.PROVIDER_ID="twitter.com";class j_{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await Mk._fromIdTokenResponse(e,n,r),o=B_(n);return new j_({user:i,providerId:o,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=B_(n);return new j_({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function B_(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class V_ extends mx{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,V_.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new V_(e,t,n,r)}}function z_(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw V_._fromErrorAndOperation(e,n,t,r);throw n}))}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function U_(e){return new Set(e.map((({providerId:e})=>e)).filter((e=>!!e)))}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */async function $_(e,t){const n=Sx(e);await W_(!0,n,t);const{providerUserInfo:r}=await async function(e,t){return vk(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),i=U_(r||[]);return n.providerData=n.providerData.filter((e=>i.has(e.providerId))),i.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function q_(e,t,n=!1){const r=await Ak(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return j_._forOperation(e,"link",r)}async function W_(e,t,n){await Ok(t);const r=!1===e?"provider-already-linked":"no-such-provider";ok(U_(t.providerData).has(n)===e,t.auth,r)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */async function H_(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const o=await Ak(e,z_(r,i,t,e),n);ok(o.idToken,r,"internal-error");const a=Tk(o.idToken);ok(a,r,"internal-error");const{sub:s}=a;return ok(e.uid===s,r,"user-mismatch"),j_._forOperation(e,i,o)}catch(AW){throw"auth/user-not-found"===(null==AW?void 0:AW.code)&&ek(r,"user-mismatch"),AW}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */async function G_(e,t,n=!1){const r="signIn",i=await z_(e,r,t),o=await j_._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(o.user),o}async function K_(e,t){return G_(r_(e),t)}async function Y_(e,t){const n=Sx(e);return await W_(!1,n,t.providerId),q_(n,t)}async function X_(e,t){return H_(Sx(e),t)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
async function Q_(e,t){const n=r_(e),r=await async function(e,t){return bk(e,"POST","/v1/accounts:signInWithCustomToken",gk(e,t))}(n,{token:t,returnSecureToken:!0}),i=await j_._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class J_{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Z_._fromServerResponse(e,t):"totpInfo"in t?eE._fromServerResponse(e,t):ek(e,"internal-error")}}class Z_ extends J_{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Z_(t)}}class eE extends J_{constructor(e){super("totp",e)}static _fromServerResponse(e,t){return new eE(t)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function tE(e,t,n){var r;ok((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),ok(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(ok(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(ok(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */async function nE(e){const t=r_(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function rE(e,t){await async function(e,t){return vk(e,"POST","/v1/accounts:update",gk(e,t))}(Sx(e),{oobCode:t})}async function iE(e,t){const n=Sx(e),r=await m_(n,{oobCode:t}),i=r.requestType;switch(ok(i,n,"internal-error"),i){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ok(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ok(r.mfaInfo,n,"internal-error");default:ok(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=J_._fromServerResponse(r_(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:i}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
async function oE(e,t){const n={identifier:t,continueUri:uk()?lk():"http://localhost"},{signinMethods:r}=
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */await async function(e,t){return vk(e,"POST","/v1/accounts:createAuthUri",gk(e,t))}(Sx(e),n);return r||[]}async function aE(e,t){const n=Sx(e),r={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&tE(n.auth,r,t);const{email:i}=await async function(e,t){return y_(e,t)}(n.auth,r);i!==e.email&&await e.reload()}async function sE(e,t,n){const r=Sx(e),i={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&tE(r.auth,i,n);const{email:o}=await async function(e,t){return y_(e,t)}(r.auth,i);o!==e.email&&await e.reload()}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
async function lE(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const r=Sx(e),i={idToken:await r.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await Ak(r,async function(e,t){return vk(e,"POST","/v1/accounts:update",t)}(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const a=r.providerData.find((({providerId:e})=>"password"===e));a&&(a.displayName=r.displayName,a.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}async function uE(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const o=await Ak(e,async function(e,t){return vk(e,"POST","/v1/accounts:update",t)}(r,i));await e._updateTokensIfNecessary(o,!0)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class cE{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class dE extends cE{constructor(e,t,n,r){super(e,t,n),this.username=r}}class hE extends cE{constructor(e,t){super(e,"facebook.com",t)}}class pE extends dE{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class fE extends cE{constructor(e,t){super(e,"google.com",t)}}class mE extends dE{constructor(e,t,n){super(e,"twitter.com",t,n)}}function gE(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},o=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=Tk(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new cE(o,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new hE(o,i);case"github.com":return new pE(o,i);case"google.com":return new fE(o,i);case"twitter.com":return new mE(o,i,e.screenName||null);case"custom":case"anonymous":return new cE(o,null);default:return new cE(o,r,i)}}(n)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class vE{constructor(e,t,n){this.type=e,this.credential=t,this.user=n}static _fromIdtoken(e,t){return new vE("enroll",e,t)}static _fromMfaPendingCredential(e){return new vE("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return vE._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return vE._fromIdtoken(e.multiFactorSession.idToken)}return null}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class yE{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=r_(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map((e=>J_._fromServerResponse(n,e)));ok(r.mfaPendingCredential,n,"internal-error");const o=vE._fromMfaPendingCredential(r.mfaPendingCredential);return new yE(o,i,(async e=>{const i=await e._process(n,o);delete r.mfaInfo,delete r.mfaPendingCredential;const a=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await j_._fromIdTokenResponse(n,t.operationType,a);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return ok(t.user,n,"internal-error"),j_._forOperation(t.user,t.operationType,a);default:ek(n,"internal-error")}}))}async resolveSignIn(e){const t=e;return this.signInResolver(t)}}class bE{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload((t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map((t=>J_._fromServerResponse(e.auth,t))))}))}static _fromUser(e){return new bE(e)}async getSession(){return vE._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(e,t){const n=e,r=await this.getSession(),i=await Ak(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken();try{const e=await Ak(this.user,(r=this.user.auth,i={idToken:n,mfaEnrollmentId:t},vk(r,"POST","/v2/accounts/mfaEnrollment:withdraw",gk(r,i))));this.enrolledFactors=this.enrolledFactors.filter((({uid:e})=>e!==t)),await this.user._updateTokensIfNecessary(e),await this.user.reload()}catch(AW){throw AW}var r,i}}const xE=new WeakMap,wE="__sak";
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class kE{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(wE,"1"),this.storage.removeItem(wE),Promise.resolve(!0)):Promise.resolve(!1)}catch(TQ){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class _E extends kE{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=lx();return Wk(e)||Qk(e)}()&&function(){try{return!(!window||window===window.top)}catch(AW){return!1}}(),this.fallbackToPolling=Jk(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys(((e,t,n)=>{this.notifyListeners(e,n)}));const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);hx()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)}))}),1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}_E.type="LOCAL";const EE=_E;
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class CE extends kE{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(e,t){}_removeListener(e,t){}}CE.type="SESSION";const IE=CE;
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class SE{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find((t=>t.isListeningto(e)));if(t)return t;const n=new SE(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,o=this.handlersMap[r];if(!(null==o?void 0:o.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(o).map((async e=>e(t.origin,i))),s=await function(e){return Promise.all(e.map((async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}})))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:s})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function NE(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */SE.receivers=[];class TE{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,o;return new Promise(((a,s)=>{const l=NE("",20);r.port1.start();const u=setTimeout((()=>{s(new Error("unsupported_event"))}),n);o={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(u),i=setTimeout((()=>{s(new Error("timeout"))}),3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(u),clearTimeout(i),s(new Error("invalid_response"))}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])})).finally((()=>{o&&this.removeMessageHandler(o)}))}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function AE(){return window}
/**
             * @license
             * Copyright 2020 Google LLC.
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function RE(){return void 0!==AE().WorkerGlobalScope&&"function"==typeof AE().importScripts}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
const DE="firebaseLocalStorageDb",OE="firebaseLocalStorage",PE="fbase_key";class LE{constructor(e){this.request=e}toPromise(){return new Promise(((e,t)=>{this.request.addEventListener("success",(()=>{e(this.request.result)})),this.request.addEventListener("error",(()=>{t(this.request.error)}))}))}}function ME(e,t){return e.transaction([OE],t?"readwrite":"readonly").objectStore(OE)}function FE(){const e=indexedDB.open(DE,1);return new Promise(((t,n)=>{e.addEventListener("error",(()=>{n(e.error)})),e.addEventListener("upgradeneeded",(()=>{const t=e.result;try{t.createObjectStore(OE,{keyPath:PE})}catch(AW){n(AW)}})),e.addEventListener("success",(async()=>{const n=e.result;n.objectStoreNames.contains(OE)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(DE);return new LE(e).toPromise()}(),t(await FE()))}))}))}async function jE(e,t,n){const r=ME(e,!0).put({[PE]:t,value:n});return new LE(r).toPromise()}function BE(e,t){const n=ME(e,!0).delete(t);return new LE(n).toPromise()}class VE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await FE()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(AW){if(t++>3)throw AW;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return RE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=SE._getInstance(RE()?self:null),this.receiver._subscribe("keyChanged",(async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)}))),this.receiver._subscribe("ping",(async(e,t)=>["keyChanged"]))}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new TE(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(TQ){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await FE();return await jE(e,wE,"1"),await BE(e,wE),!0}catch(TQ){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite((async()=>(await this._withRetries((n=>jE(n,e,t))),this.localCache[e]=t,this.notifyServiceWorker(e))))}async _get(e){const t=await this._withRetries((t=>async function(e,t){const n=ME(e,!1).get(t),r=await new LE(n).toPromise();return void 0===r?null:r.value}(t,e)));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite((async()=>(await this._withRetries((t=>BE(t,e))),delete this.localCache[e],this.notifyServiceWorker(e))))}async _poll(){const e=await this._withRetries((e=>{const t=ME(e,!1).getAll();return new LE(t).toPromise()}));if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}VE.type="LOCAL";const zE=VE,UE=1e12;
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class $E{constructor(e){this.auth=e,this.counter=UE,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new qE(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||UE;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||UE;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||UE;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class qE{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;ok(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(AW){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(AW){}this.isVisible&&this.execute()}),6e4)}),500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const WE=s_("rcb"),HE=new dk(3e4,6e4);class GE{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(e=AE().grecaptcha)||void 0===e?void 0:e.render)}load(e,t=""){return ok(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Ek(AE().grecaptcha)?Promise.resolve(AE().grecaptcha):new Promise(((n,r)=>{const i=AE().setTimeout((()=>{r(tk(e,"network-request-failed"))}),HE.get());AE()[WE]=()=>{AE().clearTimeout(i),delete AE()[WE];const o=AE().grecaptcha;if(!o||!Ek(o))return void r(tk(e,"internal-error"));const a=o.render;o.render=(e,t)=>{const n=a(e,t);return this.counter++,n},this.hostLanguage=t,n(o)},a_(`${o_.recaptchaV2Script}?${wx({onload:WE,render:"explicit",hl:t})}`).catch((()=>{clearTimeout(i),r(tk(e,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!!(null===(t=AE().grecaptcha)||void 0===t?void 0:t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class KE{async load(e){return new $E(e)}clearedOneInstance(){}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const YE="recaptcha",XE={theme:"light",type:"image"};let QE=class{constructor(e,t,n=Object.assign({},XE)){this.parameters=n,this.type=YE,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=r_(e),this.isInvisible="invisible"===this.parameters.size,ok("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof t?document.getElementById(t):t;ok(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new KE:new GE,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise((n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)}))}render(){try{this.assertNotDestroyed()}catch(AW){return Promise.reject(AW)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((e=>{throw this.renderPromise=null,e}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((e=>{this.container.removeChild(e)}))}validateStartingState(){ok(!this.parameters.sitekey,this.auth,"argument-error"),ok(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ok("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach((e=>e(t))),"function"==typeof e)e(t);else if("string"==typeof e){const n=AE()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){ok(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){ok(uk()&&!RE(),this.auth,"internal-error"),await function(){let e=null;return new Promise((t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()})).catch((t=>{throw e&&window.removeEventListener("load",e),t}))}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await vk(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);ok(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return ok(this.recaptcha,this.auth,"internal-error"),this.recaptcha}};class JE{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=C_._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ZE(e,t,n){var r;const i=await n.verify();try{let o;if(ok("string"==typeof i,e,"argument-error"),ok(n.type===YE,e,"argument-error"),o="string"==typeof t?{phoneNumber:t}:t,"session"in o){const t=o.session;if("phoneNumber"in o){ok("enroll"===t.type,e,"internal-error");const n=
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */await function(e,t){return vk(e,"POST","/v2/accounts/mfaEnrollment:start",gk(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:o.phoneNumber,recaptchaToken:i}});return n.phoneSessionInfo.sessionInfo}{ok("signin"===t.type,e,"internal-error");const n=(null===(r=o.multiFactorHint)||void 0===r?void 0:r.uid)||o.multiFactorUid;ok(n,e,"missing-multi-factor-info");const a=await function(e,t){return vk(e,"POST","/v2/accounts/mfaSignIn:start",gk(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}});return a.phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return vk(e,"POST","/v1/accounts:sendVerificationCode",gk(e,t))}(e,{phoneNumber:o.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
let eC=class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=r_(t)}verifyPhoneNumber(e,t){return ZE(this.auth,e,Sx(t))}static credential(e,t){return C_._fromVerification(e,t)}static credentialFromResult(t){const n=t;return e.credentialFromTaggedObject(n)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?C_._fromTokenResponse(t,n):null}};
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function tC(e,t){return t?jk(t):(ok(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */eC.PROVIDER_ID="phone",eC.PHONE_SIGN_IN_METHOD="phone";class nC extends f_{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return k_(e,this._buildIdpRequest())}_linkToIdToken(e,t){return k_(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return k_(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function rC(e){return G_(e.auth,new nC(e),e.bypassAuthState)}function iC(e){const{auth:t,user:n}=e;return ok(n,t,"internal-error"),H_(n,new nC(e),e.bypassAuthState)}async function oC(e){const{auth:t,user:n}=e;return ok(n,t,"internal-error"),q_(n,new nC(e),e.bypassAuthState)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class aC{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(AW){this.reject(AW)}}))}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:o,type:a}=e;if(o)return void this.reject(o);const s={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(s))}catch(AW){this.reject(AW)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rC;case"linkViaPopup":case"linkViaRedirect":return oC;case"reauthViaPopup":case"reauthViaRedirect":return iC;default:ek(this.auth,"internal-error")}}resolve(e){sk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sk(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const sC=new dk(2e3,1e4);class lC extends aC{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,lC.currentPopupAction&&lC.currentPopupAction.cancel(),lC.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ok(e,this.auth,"internal-error"),e}async onExecution(){sk(1===this.filter.length,"Popup operations only handle one event");const e=NE();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch((e=>{this.reject(e)})),this.resolver._isIframeWebStorageSupported(this.auth,(e=>{e||this.reject(tk(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(tk(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,lC.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(tk(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(e,sC.get())};e()}}lC.currentPopupAction=null;
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
const uC="pendingRedirect",cC=new Map;class dC extends aC{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=cC.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=mC(t),r=fC(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(AW){e=()=>Promise.reject(AW)}cC.set(this.auth._key(),e)}return this.bypassAuthState||cC.set(this.auth._key(),(()=>Promise.resolve(null))),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function hC(e,t){return fC(e)._set(mC(t),"true")}function pC(e,t){cC.set(e._key(),t)}function fC(e){return jk(e._redirectPersistence)}function mC(e){return zk(uC,e.config.apiKey,e.name)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function gC(e,t,n){return async function(e,t,n){const r=r_(e);rk(e,t,N_),await r._initializationPromise;const i=tC(r,n);return await hC(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function vC(e,t,n){return async function(e,t,n){const r=Sx(e);rk(r.auth,t,N_),await r.auth._initializationPromise;const i=tC(r.auth,n);await hC(i,r.auth);const o=await xC(r);return i._openRedirect(r.auth,t,"reauthViaRedirect",o)}(e,t,n)}function yC(e,t,n){return async function(e,t,n){const r=Sx(e);rk(r.auth,t,N_),await r.auth._initializationPromise;const i=tC(r.auth,n);await W_(!1,r,t.providerId),await hC(i,r.auth);const o=await xC(r);return i._openRedirect(r.auth,t,"linkViaRedirect",o)}(e,t,n)}async function bC(e,t,n=!1){const r=r_(e),i=tC(r,t),o=new dC(r,i,n),a=await o.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}async function xC(e){const t=NE(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class wC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))})),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _C(e);default:return!1}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!_C(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(tk(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(kC(e))}saveEventToCache(e){this.cachedEventUids.add(kC(e)),this.lastProcessedEventTime=Date.now()}}function kC(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter((e=>e)).join("-")}function _C({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function EC(e,t={}){return vk(e,"GET","/v1/projects",t)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const CC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,IC=/^https?/;function SC(e){const t=lk(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!IC.test(n))return!1;if(CC.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}
/**
             * @license
             * Copyright 2020 Google LLC.
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const NC=new dk(3e4,6e4);function TC(){const e=AE().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function AC(e){return new Promise(((t,n)=>{var r,i,o;function a(){TC(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{TC(),n(tk(e,"network-request-failed"))},timeout:NC.get()})}if(null===(i=null===(r=AE().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(o=AE().gapi)||void 0===o?void 0:o.load)){const t=s_("iframefcb");return AE()[t]=()=>{gapi.load?a():n(tk(e,"network-request-failed"))},a_(`${o_.gapiScript}?onload=${t}`).catch((e=>n(e)))}a()}})).catch((e=>{throw RC=null,e}))}let RC=null;
/**
             * @license
             * Copyright 2020 Google LLC.
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
const DC=new dk(5e3,15e3),OC="__/auth/iframe",PC="emulator/auth/iframe",LC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},MC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function FC(e){const t=e.config;ok(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?hk(t,PC):`https://${e.config.authDomain}/${OC}`,r={apiKey:t.apiKey,appName:e.name,v:vw},i=MC.get(e.config.apiHost);i&&(r.eid=i);const o=e._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${wx(r).slice(1)}`}async function jC(e){const t=await function(e){return RC=RC||AC(e),RC}(e),n=AE().gapi;return ok(n,e,"internal-error"),t.open({where:document.body,url:FC(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:LC,dontclear:!0},(t=>new Promise((async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=tk(e,"network-request-failed"),o=AE().setTimeout((()=>{r(i)}),DC.get());function a(){AE().clearTimeout(o),n(t)}t.ping(a).then(a,(()=>{r(i)}))}))))}
/**
             * @license
             * Copyright 2020 Google LLC.
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const BC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class VC{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(AW){}}}function zC(e,t,n,r=500,i=600){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let s="";const l=Object.assign(Object.assign({},BC),{width:r.toString(),height:i.toString(),top:o,left:a}),u=lx().toLowerCase();n&&(s=Hk(u)?"_blank":n),qk(u)&&(t=t||"http://localhost",l.scrollbars="yes");const c=Object.entries(l).reduce(((e,[t,n])=>`${e}${t}=${n},`),"");if(function(e=lx()){var t;return Qk(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==s)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(t||"",s),new VC(null);const d=window.open(t||"",s,c);ok(d,e,"popup-blocked");try{d.focus()}catch(AW){}return new VC(d)}const UC="__/auth/handler",$C="emulator/auth/handler",qC=encodeURIComponent("fac");async function WC(e,t,n,r,i,o){ok(e.config.authDomain,e,"auth-domain-config-required"),ok(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:vw,eventId:i};if(t instanceof N_){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(o||{}))a[e]=t}if(t instanceof T_){const e=t.getScopes().filter((e=>""!==e));e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const s=a;for(const c of Object.keys(s))void 0===s[c]&&delete s[c];const l=await e._getAppCheckToken(),u=l?`#${qC}=${encodeURIComponent(l)}`:"";return`${function({config:e}){return e.emulator?hk(e,$C):`https://${e.authDomain}/${UC}`}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e)}?${wx(s).slice(1)}${u}`}const HC="webStorageSupport",GC=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=IE,this._completeRedirectFn=bC,this._overrideRedirectResult=pC}async _openPopup(e,t,n,r){var i;return sk(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()"),zC(e,await WC(e,t,n,lk(),r),NE())}async _openRedirect(e,t,n,r){return await this._originValidation(e),function(e){AE().location.href=e}(await WC(e,t,n,lk(),r)),new Promise((()=>{}))}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(sk(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch((()=>{delete this.eventManagers[t]})),n}async initAndGetManager(e){const t=await jC(e),n=new wC(e);return t.register("authEvent",(t=>(ok(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"})),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(HC,{type:HC},(n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r[HC];void 0!==i&&t(!!i),ek(e,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await EC(e);for(const n of t)try{if(SC(n))return}catch(TQ){}ek(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Jk()||Wk()||Qk()}};class KC{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return ak("unexpected MultiFactorSessionType")}}}class YC extends KC{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new YC(e)}_finalizeEnroll(e,t,n){return function(e,t){return vk(e,"POST","/v2/accounts/mfaEnrollment:finalize",gk(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return vk(e,"POST","/v2/accounts/mfaSignIn:finalize",gk(e,t))}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class XC{constructor(){}static assertion(e){return YC._fromCredential(e)}}XC.FACTOR_ID="phone";var QC,JC="@firebase/auth",ZC="1.6.1";
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class eI{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged((t=>{e((null==t?void 0:t.stsTokenManager.accessToken)||null)}));this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ok(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function tI(){return window}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */async function nI(e,t,n){var r;const{BuildInfo:i}=tI();sk(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if(sk(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map((e=>e.toString(16).padStart(2,"0"))).join("")}(t.sessionId),a={};return Qk()?a.ibi=i.packageName:Kk()?a.apn=i.packageName:ek(e,"operation-not-supported-in-this-environment"),i.displayName&&(a.appDisplayName=i.displayName),a.sessionId=o,WC(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,a)}function rI(e){const{cordova:t}=tI();return new Promise((n=>{t.plugins.browsertab.isAvailable((r=>{let i=null;r?t.plugins.browsertab.openUrl(e):i=t.InAppBrowser.open(e,function(e=lx()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}()?"_blank":"_system","location=yes"),n(i)}))}))}(e=>{var t;null===(t=ix())||void 0===t||t[`_${e}`]})("authIdTokenMaxAge"),function(e){o_=e}({loadJS:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=tk("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)})),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),QC="Browser",pw(new Nx("auth",((e,{options:t})=>{const n=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;ok(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const s={apiKey:o,authDomain:a,clientPlatform:QC,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Zk(QC)},l=new n_(n,r,i,s);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(jk);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(l,t),l}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((e,t,n)=>{e.getProvider("auth-internal").initialize()}))),pw(new Nx("auth-internal",(e=>(e=>new eI(e))(r_(e.getProvider("auth").getImmediate()))),"PRIVATE").setInstantiationMode("EXPLICIT")),xw(JC,ZC,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(QC)),xw(JC,ZC,"esm2017");const iI=20;class oI extends wC{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise((e=>{this.resolveInialized=e}))}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach((t=>t(e))),super.onEvent(e)}async initialized(){await this.initPromise}}async function aI(e){const t=await uI()._get(cI(e));return t&&await uI()._remove(cI(e)),t}function sI(e,t){var n,r;const i=function(e){const t=dI(e),n=t.link?decodeURIComponent(t.link):void 0,r=dI(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return dI(i).link||i||r||n||e}(t);if(i.includes("/__/auth/callback")){const t=dI(i),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(AW){return null}}(decodeURIComponent(t.firebaseError)):null,a=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],s=a?tk(a):null;return s?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:s,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:i,postBody:null}}return null}function lI(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<iI;n++){const n=Math.floor(62*Math.random());e.push(t.charAt(n))}return e.join("")}function uI(){return jk(EE)}function cI(e){return zk("authEvent",e.config.apiKey,e.name)}function dI(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return kx(n.join("?"))}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const hI=class{constructor(){this._redirectPersistence=IE,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=bC,this._overrideRedirectResult=pC}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new oI(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){ek(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,i,o,a,s,l,u,c;const d=tI();ok("function"==typeof(null===(t=null==d?void 0:d.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ok(void 0!==(null===(n=null==d?void 0:d.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ok("function"==typeof(null===(o=null===(i=null===(r=null==d?void 0:d.cordova)||void 0===r?void 0:r.plugins)||void 0===i?void 0:i.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ok("function"==typeof(null===(l=null===(s=null===(a=null==d?void 0:d.cordova)||void 0===a?void 0:a.plugins)||void 0===s?void 0:s.browsertab)||void 0===l?void 0:l.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ok("function"==typeof(null===(c=null===(u=null==d?void 0:d.cordova)||void 0===u?void 0:u.InAppBrowser)||void 0===c?void 0:c.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const i=await this._initialize(e);await i.initialized(),i.resetRedirect(),cC.clear(),await this._originValidation(e);const o=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:lI(),postBody:null,tenantId:e.tenantId,error:tk(e,"no-auth-event")}}(e,n,r);await function(e,t){return uI()._set(cI(e),t)}(e,o);const a=await nI(e,o,t);return async function(e,t,n){const{cordova:r}=tI();let i=()=>{};try{await new Promise(((o,a)=>{let s=null;function l(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){s||(s=window.setTimeout((()=>{a(tk(e,"redirect-cancelled-by-user"))}),2e3))}function c(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(l),document.addEventListener("resume",u,!1),Kk()&&document.addEventListener("visibilitychange",c,!1),i=()=>{t.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",c,!1),s&&window.clearTimeout(s)}}))}finally{i()}}(e,i,await rI(a))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=tI(),n={};Qk()?n.iosBundleId=t.packageName:Kk()?n.androidPackageName=t.packageName:ek(e,"operation-not-supported-in-this-environment"),await EC(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:i}=tI(),o=setTimeout((async()=>{await aI(e),t.onEvent(pI())}),500),a=async n=>{clearTimeout(o);const r=await aI(e);let i=null;r&&(null==n?void 0:n.url)&&(i=sI(r,n.url)),t.onEvent(i||pI())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,a);const s=r,l=`${i.packageName.toLowerCase()}://`;tI().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(l)&&a({url:e}),"function"==typeof s)try{s(e)}catch(AW){console.error(AW)}}}};function pI(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:tk("no-auth-event")}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function fI(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function mI(e=lx()){return!("file:"!==fI()&&"ionic:"!==fI()&&"capacitor:"!==fI()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function gI(e=lx()){return hx()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=lx()){return/Edge\/\d+/.test(e)}(e)}function vI(){try{const e=self.localStorage,t=NE();if(e)return e.setItem(t,"1"),e.removeItem(t),!gI()||fx()}catch(AW){return yI()&&fx()}return!1}function yI(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function bI(){return("http:"===fI()||"https:"===fI()||cx()||mI())&&!(dx()||ux())&&vI()&&!yI()}function xI(){return mI()&&"undefined"!=typeof document}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
const wI={LOCAL:"local",NONE:"none",SESSION:"session"},kI=ok,_I="persistence";async function EI(e){await e._initializationPromise;const t=CI(),n=zk(_I,e.config.apiKey,e.name);t&&t.setItem(n,e._getPersistence())}function CI(){var e;try{return(null===(e="undefined"!=typeof window?window:null)||void 0===e?void 0:e.sessionStorage)||null}catch(AW){return null}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const II=ok;class SI{constructor(){this.browserResolver=jk(GC),this.cordovaResolver=jk(hI),this.underlyingResolver=null,this._redirectPersistence=IE,this._completeRedirectFn=bC,this._overrideRedirectResult=pC}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return xI()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return II(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!xI()&&new Promise((e=>{const t=setTimeout((()=>{e(!1)}),1e3);document.addEventListener("deviceready",(()=>{clearTimeout(t),e(!0)}))}))}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function NI(e){return e.unwrap()}function TI(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===(null==t?void 0:t.code))t.resolver=new OI(e,function(e,t){var n;const r=Sx(e),i=t;return ok(t.customData.operationType,r,"argument-error"),ok(null===(n=i.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),yE._fromError(r,i)}(e,t));else if(r){const e=AI(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}function AI(e){const{_tokenResponse:t}=e instanceof mx?e.customData:e;if(!t)return null;if(!(e instanceof mx)&&"temporaryProof"in t&&"phoneNumber"in t)return eC.credentialFromResult(e);const n=t.providerId;if(!n||n===zw.PASSWORD)return null;let r;switch(n){case zw.GOOGLE:r=D_;break;case zw.FACEBOOK:r=R_;break;case zw.GITHUB:r=O_;break;case zw.TWITTER:r=M_;break;default:const{oauthIdToken:e,oauthAccessToken:i,oauthTokenSecret:o,pendingToken:a,nonce:s}=t;return i||o||e||a?a?n.startsWith("saml.")?P_._create(n,a):__._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:i}):new A_(n).credential({idToken:e,accessToken:i,rawNonce:s}):null}return e instanceof mx?r.credentialFromError(e):r.credentialFromResult(e)}function RI(e,t){return t.catch((t=>{throw t instanceof mx&&TI(e,t),t})).then((e=>{const t=e.operationType,n=e.user;return{operationType:t,credential:(r=e,AI(r)),additionalUserInfo:gE(e),user:PI.getOrCreate(n)};
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
var r}))}async function DI(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>RI(e,n.confirm(t))}}class OI{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return RI(NI(this.auth),this.resolver.resolveSignIn(e))}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */let PI=class e{constructor(e){this._delegate=e,this.multiFactor=function(e){const t=Sx(e);return xE.has(t)||xE.set(t,bE._fromUser(t)),xE.get(t)}(e)}static getOrCreate(t){return e.USER_MAP.has(t)||e.USER_MAP.set(t,new e(t)),e.USER_MAP.get(t)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return RI(this.auth,Y_(this._delegate,e))}async linkWithPhoneNumber(e,t){return DI(this.auth,async function(e,t,n){const r=Sx(e);await W_(!1,r,"phone");const i=await ZE(r.auth,t,Sx(n));return new JE(i,(e=>Y_(r,e)))}(this._delegate,e,t))}async linkWithPopup(e){return RI(this.auth,async function(e,t,n){const r=Sx(e);rk(r.auth,t,N_);const i=tC(r.auth,n);return new lC(r.auth,"linkViaPopup",t,i,r).executeNotNull()}(this._delegate,e,SI))}async linkWithRedirect(e){return await EI(r_(this.auth)),yC(this._delegate,e,SI)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return RI(this.auth,X_(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return DI(this.auth,async function(e,t,n){const r=Sx(e),i=await ZE(r.auth,t,Sx(n));return new JE(i,(e=>X_(r,e)))}(this._delegate,e,t))}reauthenticateWithPopup(e){return RI(this.auth,async function(e,t,n){const r=Sx(e);rk(r.auth,t,N_);const i=tC(r.auth,n);return new lC(r.auth,"reauthViaPopup",t,i,r).executeNotNull()}(this._delegate,e,SI))}async reauthenticateWithRedirect(e){return await EI(r_(this.auth)),vC(this._delegate,e,SI)}sendEmailVerification(e){return aE(this._delegate,e)}async unlink(e){return await $_(this._delegate,e),this}updateEmail(e){return function(e,t){return uE(Sx(e),t,null)}(this._delegate,e)}updatePassword(e){return function(e,t){return uE(Sx(e),null,t)}(this._delegate,e)}updatePhoneNumber(e){return async function(e,t){await q_(Sx(e),t)}(this._delegate,e)}updateProfile(e){return lE(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return sE(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}};PI.USER_MAP=new WeakMap;
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
const LI=ok;class MI{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;LI(n,"invalid-api-key",{appName:e.name}),LI(n,"invalid-api-key",{appName:e.name});const r="undefined"!=typeof window?SI:void 0;this._delegate=t.initialize({options:{persistence:jI(n,e.name),popupRedirectResolver:r}}),this._delegate._updateErrorMap(Yw),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?PI.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){d_(this._delegate,e,t)}applyActionCode(e){return rE(this._delegate,e)}checkActionCode(e){return iE(this._delegate,e)}confirmPasswordReset(e,t){return async function(e,t,n){await m_(Sx(e),{oobCode:t,newPassword:n}).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&nE(e),t}))}(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return RI(this._delegate,async function(e,t,n){const r=r_(e),i=c_(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",F_),o=await i.catch((t=>{throw"auth/password-does-not-meet-requirements"===t.code&&nE(e),t})),a=await j_._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(a.user),a}(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return oE(this._delegate,e)}isSignInWithEmailLink(e){return function(e,t){const n=I_.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}(this._delegate,e)}async getRedirectResult(){LI(bI(),this._delegate,"operation-not-supported-in-this-environment");const e=await async function(e,t){return await r_(e)._initializationPromise,bC(e,t,!1)}(this._delegate,SI);return e?RI(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){r_(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:o}=FI(e,t,n);return this._delegate.onAuthStateChanged(r,i,o)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:o}=FI(e,t,n);return this._delegate.onIdTokenChanged(r,i,o)}sendSignInLinkToEmail(e,t){
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */return async function(e,t,n){const r=r_(e),i={requestType:"EMAIL_SIGNIN",email:t,clientType:"CLIENT_TYPE_WEB"};!function(e,t){ok(t.handleCodeInApp,r,"argument-error"),t&&tE(r,e,t)}(i,n),await c_(r,i,"getOobCode",x_)}(this._delegate,e,t)}sendPasswordResetEmail(e,t){return async function(e,t,n){const r=r_(e),i={requestType:"PASSWORD_RESET",email:t,clientType:"CLIENT_TYPE_WEB"};n&&tE(r,i,n),await c_(r,i,"getOobCode",b_)}(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){kI(Object.values(wI).includes(t),e,"invalid-persistence-type"),dx()?kI(t!==wI.SESSION,e,"unsupported-persistence-type"):ux()?kI(t===wI.NONE,e,"unsupported-persistence-type"):yI()?kI(t===wI.NONE||t===wI.LOCAL&&fx(),e,"unsupported-persistence-type"):kI(t===wI.NONE||vI(),e,"unsupported-persistence-type")}(this._delegate,e),e){case wI.SESSION:t=IE;break;case wI.LOCAL:t=await jk(zE)._isAvailable()?zE:EE;break;case wI.NONE:t=Vk;break;default:return ek("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return RI(this._delegate,async function(e){var t;const n=r_(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new j_({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await F_(n,{returnSecureToken:!0}),i=await j_._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}(this._delegate))}signInWithCredential(e){return RI(this._delegate,K_(this._delegate,e))}signInWithCustomToken(e){return RI(this._delegate,Q_(this._delegate,e))}signInWithEmailAndPassword(e,t){return RI(this._delegate,function(e,t,n){return K_(Sx(e),S_.credential(t,n)).catch((async t=>{throw"auth/password-does-not-meet-requirements"===t.code&&nE(e),t}))}(this._delegate,e,t))}signInWithEmailLink(e,t){return RI(this._delegate,async function(e,t,n){const r=Sx(e),i=S_.credentialWithLink(t,n||lk());return ok(i._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),K_(r,i)}(this._delegate,e,t))}signInWithPhoneNumber(e,t){return DI(this._delegate,async function(e,t,n){const r=r_(e),i=await ZE(r,t,Sx(n));return new JE(i,(e=>K_(r,e)))}(this._delegate,e,t))}async signInWithPopup(e){return LI(bI(),this._delegate,"operation-not-supported-in-this-environment"),RI(this._delegate,async function(e,t,n){const r=r_(e);rk(e,t,N_);const i=tC(r,n);return new lC(r,"signInViaPopup",t,i).executeNotNull()}(this._delegate,e,SI))}async signInWithRedirect(e){return LI(bI(),this._delegate,"operation-not-supported-in-this-environment"),await EI(this._delegate),gC(this._delegate,e,SI)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return async function(e,t){const{data:n}=await iE(Sx(e),t);return n.email}(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}function FI(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&PI.getOrCreate(e)),error:t,complete:n}}function jI(e,t){const n=function(e,t){const n=CI();if(!n)return[];const r=zk(_I,e,t);switch(n.getItem(r)){case wI.NONE:return[Vk];case wI.LOCAL:return[zE,IE];case wI.SESSION:return[IE];default:return[]}}(e,t);if("undefined"==typeof self||n.includes(zE)||n.push(zE),"undefined"!=typeof window)for(const r of[EE,IE])n.includes(r)||n.push(r);return n.includes(Vk)||n.push(Vk),n}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */MI.Persistence=wI;class BI{constructor(){this.providerId="phone",this._delegate=new eC(NI(Vw.auth()))}static credential(e,t){return eC.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}BI.PHONE_SIGN_IN_METHOD=eC.PHONE_SIGN_IN_METHOD,BI.PROVIDER_ID=eC.PROVIDER_ID;
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
const VI=ok;class zI{constructor(e,t,n=Vw.app()){var r;VI(null===(r=n.options)||void 0===r?void 0:r.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new QE(n.auth(),e,t),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var UI;(UI=Vw).INTERNAL.registerComponent(new Nx("auth-compat",(e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new MI(t,n)}),"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Uw,PASSWORD_RESET:$w,RECOVER_EMAIL:qw,REVERT_SECOND_FACTOR_ADDITION:Ww,VERIFY_AND_CHANGE_EMAIL:Hw,VERIFY_EMAIL:Gw}},EmailAuthProvider:S_,FacebookAuthProvider:R_,GithubAuthProvider:O_,GoogleAuthProvider:D_,OAuthProvider:A_,SAMLAuthProvider:L_,PhoneAuthProvider:BI,PhoneMultiFactorGenerator:XC,RecaptchaVerifier:zI,TwitterAuthProvider:M_,Auth:MI,AuthCredential:f_,Error:mx}).setInstantiationMode("LAZY").setMultipleInstances(!1)),UI.registerVersion("@firebase/auth-compat","0.5.3");var $I,qI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},WI=WI||{},HI=qI||self;function GI(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function KI(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var YI="closure_uid_"+(1e9*Math.random()>>>0),XI=0;function QI(e,t,n){return e.call.apply(e.bind,arguments)}function JI(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function ZI(e,t,n){return(ZI=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?QI:JI).apply(null,arguments)}function eS(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function tS(e,t){function n(){}n.prototype=t.prototype,e.$=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.ac=function(e,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return t.prototype[n].apply(e,i)}}function nS(){this.s=this.s,this.o=this.o}nS.prototype.s=!1,nS.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function(e){Object.prototype.hasOwnProperty.call(e,YI)&&e[YI]||(e[YI]=++XI)}(this)},nS.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const rS=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function iS(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function oS(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(GI(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function aS(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}aS.prototype.h=function(){this.defaultPrevented=!0};var sS=function(){if(!HI.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};HI.addEventListener("test",e,t),HI.removeEventListener("test",e,t)}catch(BW){}return e}();function lS(e){return/^[\s\xa0]*$/.test(e)}function uS(){var e=HI.navigator;return e&&(e=e.userAgent)?e:""}function cS(e){return-1!=uS().indexOf(e)}function dS(e){return dS[" "](e),e}dS[" "]=function(){};var hS,pS,fS=cS("Opera"),mS=cS("Trident")||cS("MSIE"),gS=cS("Edge"),vS=gS||mS,yS=cS("Gecko")&&!(-1!=uS().toLowerCase().indexOf("webkit")&&!cS("Edge"))&&!(cS("Trident")||cS("MSIE"))&&!cS("Edge"),bS=-1!=uS().toLowerCase().indexOf("webkit")&&!cS("Edge");function xS(){var e=HI.document;return e?e.documentMode:void 0}e:{var wS="",kS=function(){var e=uS();return yS?/rv:([^\);]+)(\)|;)/.exec(e):gS?/Edge\/([\d\.]+)/.exec(e):mS?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):bS?/WebKit\/(\S+)/.exec(e):fS?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(kS&&(wS=kS?kS[1]:""),mS){var _S=xS();if(null!=_S&&_S>parseFloat(wS)){hS=String(_S);break e}}hS=wS}if(HI.document&&mS){var ES=xS();pS=ES||parseInt(hS,10)||void 0}else pS=void 0;var CS=pS;function IS(e,t){if(aS.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(yS){e:{try{dS(t.nodeName);var i=!0;break e}catch(UW){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:SS[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&IS.$.h.call(this)}}tS(IS,aS);var SS={2:"touch",3:"pen",4:"mouse"};IS.prototype.h=function(){IS.$.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var NS="closure_listenable_"+(1e6*Math.random()|0),TS=0;function AS(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.la=i,this.key=++TS,this.fa=this.ia=!1}function RS(e){e.fa=!0,e.listener=null,e.proxy=null,e.src=null,e.la=null}function DS(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function OS(e){const t={};for(const n in e)t[n]=e[n];return t}const PS="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function LS(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<PS.length;t++)n=PS[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function MS(e){this.src=e,this.g={},this.h=0}function FS(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],o=rS(i,t);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(RS(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function jS(e,t,n,r){for(var i=0;i<e.length;++i){var o=e[i];if(!o.fa&&o.listener==t&&o.capture==!!n&&o.la==r)return i}return-1}MS.prototype.add=function(e,t,n,r,i){var o=e.toString();(e=this.g[o])||(e=this.g[o]=[],this.h++);var a=jS(e,t,r,i);return-1<a?(t=e[a],n||(t.ia=!1)):((t=new AS(t,this.src,o,!!r,i)).ia=n,e.push(t)),t};var BS="closure_lm_"+(1e6*Math.random()|0),VS={};function zS(e,t,n,r,i){if(r&&r.once)return $S(e,t,n,r,i);if(Array.isArray(t)){for(var o=0;o<t.length;o++)zS(e,t[o],n,r,i);return null}return n=XS(n),e&&e[NS]?e.O(t,n,KI(r)?!!r.capture:!!r,i):US(e,t,n,!1,r,i)}function US(e,t,n,r,i,o){if(!t)throw Error("Invalid event type");var a=KI(i)?!!i.capture:!!i,s=KS(e);if(s||(e[BS]=s=new MS(e)),(n=s.add(t,n,r,a,o)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=GS;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)sS||(i=a),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(HS(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function $S(e,t,n,r,i){if(Array.isArray(t)){for(var o=0;o<t.length;o++)$S(e,t[o],n,r,i);return null}return n=XS(n),e&&e[NS]?e.P(t,n,KI(r)?!!r.capture:!!r,i):US(e,t,n,!0,r,i)}function qS(e,t,n,r,i){if(Array.isArray(t))for(var o=0;o<t.length;o++)qS(e,t[o],n,r,i);else r=KI(r)?!!r.capture:!!r,n=XS(n),e&&e[NS]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=jS(o=e.g[t],n,r,i))&&(RS(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete e.g[t],e.h--))):e&&(e=KS(e))&&(t=e.g[t.toString()],e=-1,t&&(e=jS(t,n,r,i)),(n=-1<e?t[e]:null)&&WS(n))}function WS(e){if("number"!=typeof e&&e&&!e.fa){var t=e.src;if(t&&t[NS])FS(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(HS(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=KS(t))?(FS(n,e),0==n.h&&(n.src=null,t[BS]=null)):RS(e)}}}function HS(e){return e in VS?VS[e]:VS[e]="on"+e}function GS(e,t){if(e.fa)e=!0;else{t=new IS(t,this);var n=e.listener,r=e.la||e.src;e.ia&&WS(e),e=n.call(r,t)}return e}function KS(e){return(e=e[BS])instanceof MS?e:null}var YS="__closure_events_fn_"+(1e9*Math.random()>>>0);function XS(e){return"function"==typeof e?e:(e[YS]||(e[YS]=function(t){return e.handleEvent(t)}),e[YS])}function QS(){nS.call(this),this.i=new MS(this),this.S=this,this.J=null}function JS(e,t){var n,r=e.J;if(r)for(n=[];r;r=r.J)n.push(r);if(e=e.S,r=t.type||t,"string"==typeof t)t=new aS(t,e);else if(t instanceof aS)t.target=t.target||e;else{var i=t;LS(t=new aS(r,e),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var a=t.g=n[o];i=ZS(a,r,!0,t)&&i}if(i=ZS(a=t.g=e,r,!0,t)&&i,i=ZS(a,r,!1,t)&&i,n)for(o=0;o<n.length;o++)i=ZS(a=t.g=n[o],r,!1,t)&&i}function ZS(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,o=0;o<t.length;++o){var a=t[o];if(a&&!a.fa&&a.capture==n){var s=a.listener,l=a.la||a.src;a.ia&&FS(e.i,a),i=!1!==s.call(l,r)&&i}}return i&&!r.defaultPrevented}tS(QS,nS),QS.prototype[NS]=!0,QS.prototype.removeEventListener=function(e,t,n,r){qS(this,e,t,n,r)},QS.prototype.N=function(){if(QS.$.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)RS(n[r]);delete t.g[e],t.h--}}this.J=null},QS.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},QS.prototype.P=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var eN=HI.JSON.stringify;function tN(){var e=lN;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var nN=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}((()=>new rN),(e=>e.reset()));class rN{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function iN(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function oN(e){HI.setTimeout((()=>{throw e}),0)}let aN,sN=!1,lN=new class{constructor(){this.h=this.g=null}add(e,t){const n=nN.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},uN=()=>{const e=HI.Promise.resolve(void 0);aN=()=>{e.then(cN)}};var cN=()=>{for(var e;e=tN();){try{e.h.call(e.g)}catch(BW){oN(BW)}var t=nN;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}sN=!1};function dN(e,t){QS.call(this),this.h=e||1,this.g=t||HI,this.j=ZI(this.qb,this),this.l=Date.now()}function hN(e){e.ga=!1,e.T&&(e.g.clearTimeout(e.T),e.T=null)}function pN(e,t,n){if("function"==typeof e)n&&(e=ZI(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=ZI(e.handleEvent,e)}return 2147483647<Number(t)?-1:HI.setTimeout(e,t||0)}function fN(e){e.g=pN((()=>{e.g=null,e.i&&(e.i=!1,fN(e))}),e.j);const t=e.h;e.h=null,e.m.apply(null,t)}tS(dN,QS),($I=dN.prototype).ga=!1,$I.T=null,$I.qb=function(){if(this.ga){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-e):(this.T&&(this.g.clearTimeout(this.T),this.T=null),JS(this,"tick"),this.ga&&(hN(this),this.start()))}},$I.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},$I.N=function(){dN.$.N.call(this),hN(this),delete this.g};class mN extends nS{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:fN(this)}N(){super.N(),this.g&&(HI.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function gN(e){nS.call(this),this.h=e,this.g={}}tS(gN,nS);var vN=[];function yN(e,t,n,r){Array.isArray(n)||(n&&(vN[0]=n.toString()),n=vN);for(var i=0;i<n.length;i++){var o=zS(t,n[i],r||e.handleEvent,!1,e.h||e);if(!o)break;e.g[o.key]=o}}function bN(e){DS(e.g,(function(e,t){this.g.hasOwnProperty(t)&&WS(e)}),e),e.g={}}function xN(){this.g=!0}function wN(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var a=1;a<i.length;a++)i[a]=""}}}return eN(n)}catch(RW){return t}}(e,n)+(r?" "+r:"")}))}gN.prototype.N=function(){gN.$.N.call(this),bN(this)},gN.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},xN.prototype.Ea=function(){this.g=!1},xN.prototype.info=function(){};var kN={},_N=null;function EN(){return _N=_N||new QS}function CN(e){aS.call(this,kN.Ta,e)}function IN(e){const t=EN();JS(t,new CN(t))}function SN(e,t){aS.call(this,kN.STAT_EVENT,e),this.stat=t}function NN(e){const t=EN();JS(t,new SN(t,e))}function TN(e,t){aS.call(this,kN.Ua,e),this.size=t}function AN(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return HI.setTimeout((function(){e()}),t)}kN.Ta="serverreachability",tS(CN,aS),kN.STAT_EVENT="statevent",tS(SN,aS),kN.Ua="timingevent",tS(TN,aS);var RN={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},DN={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ON(){}function PN(e){return e.h||(e.h=e.i())}function LN(){}ON.prototype.h=null;var MN,FN={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function jN(){aS.call(this,"d")}function BN(){aS.call(this,"c")}function VN(){}function zN(e,t,n,r){this.l=e,this.j=t,this.m=n,this.W=r||1,this.U=new gN(this),this.P=$N,e=vS?125:void 0,this.V=new dN(e),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new UN}function UN(){this.i=null,this.g="",this.h=!1}tS(jN,aS),tS(BN,aS),tS(VN,ON),VN.prototype.g=function(){return new XMLHttpRequest},VN.prototype.i=function(){return{}},MN=new VN;var $N=45e3,qN={},WN={};function HN(e,t,n){e.L=1,e.A=dT(aT(t)),e.u=n,e.S=!0,GN(e,null)}function GN(e,t){e.G=Date.now(),QN(e),e.B=aT(e.A);var n=e.B,r=e.W;Array.isArray(r)||(r=[String(r)]),ET(n.i,"t",r),e.o=0,n=e.l.J,e.h=new UN,e.g=EA(e.l,n?t:null,!e.u),0<e.O&&(e.M=new mN(ZI(e.Pa,e,e.g),e.O)),yN(e.U,e.g,"readystatechange",e.nb),t=e.I?OS(e.I):{},e.u?(e.v||(e.v="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ha(e.B,e.v,e.u,t)):(e.v="GET",e.g.ha(e.B,e.v,null,t)),IN(),function(e,t,n,r,i,o){e.info((function(){if(e.g)if(o)for(var a="",s=o.split("&"),l=0;l<s.length;l++){var u=s[l].split("=");if(1<u.length){var c=u[0];u=u[1];var d=c.split("_");a=2<=d.length&&"type"==d[1]?a+(c+"=")+u+"&":a+(c+"=redacted&")}}else a=null;else a=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a}))}(e.j,e.v,e.B,e.m,e.W,e.u)}function KN(e){return!!e.g&&"GET"==e.v&&2!=e.L&&e.l.Ha}function YN(e,t,n){let r,i=!0;for(;!e.J&&e.o<n.length;){if(r=XN(e,n),r==WN){4==t&&(e.s=4,NN(14),i=!1),wN(e.j,e.m,null,"[Incomplete Response]");break}if(r==qN){e.s=4,NN(15),wN(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}wN(e.j,e.m,r,null),nT(e,r)}KN(e)&&0!=e.o&&(e.h.g=e.h.g.slice(e.o),e.o=0),4!=t||0!=n.length||e.h.h||(e.s=1,NN(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.ba&&(e.ba=!0,(t=e.l).g==e&&t.ca&&!t.M&&(t.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),gA(t),t.M=!0,NN(11))):(wN(e.j,e.m,n,"[Invalid Chunked Response]"),tT(e),eT(e))}function XN(e,t){var n=e.o,r=t.indexOf("\n",n);return-1==r?WN:(n=Number(t.substring(n,r)),isNaN(n)?qN:(r+=1)+n>t.length?WN:(t=t.slice(r,r+n),e.o=r+n,t))}function QN(e){e.Y=Date.now()+e.P,JN(e,e.P)}function JN(e,t){if(null!=e.C)throw Error("WatchDog timer not null");e.C=AN(ZI(e.lb,e),t)}function ZN(e){e.C&&(HI.clearTimeout(e.C),e.C=null)}function eT(e){0==e.l.H||e.J||bA(e.l,e)}function tT(e){ZN(e);var t=e.M;t&&"function"==typeof t.sa&&t.sa(),e.M=null,hN(e.V),bN(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.sa())}function nT(e,t){try{var n=e.l;if(0!=n.H&&(n.g==e||RT(n.i,e)))if(!e.K&&RT(n.i,e)&&3==n.H){try{var r=n.Ja.g.parse(t)}catch(WW){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.G+3e3<e.G))break e;yA(n),lA(n)}mA(n),NN(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&0==n.A&&!n.v&&(n.v=AN(ZI(n.ib,n),6e3));if(1>=AT(n.i)&&n.oa){try{n.oa()}catch(WW){}n.oa=void 0}}else wA(n,11)}else if((e.K||n.g==e)&&yA(n),!lS(t))for(i=n.Ja.g.parse(t),t=0;t<i.length;t++){let u=i[t];if(n.V=u[0],u=u[1],2==n.H)if("c"==u[0]){n.K=u[1],n.pa=u[2];const t=u[3];null!=t&&(n.ra=t,n.l.info("VER="+n.ra));const i=u[4];null!=i&&(n.Ga=i,n.l.info("SVER="+n.Ga));const c=u[5];null!=c&&"number"==typeof c&&0<c&&(r=1.5*c,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var o=r.i;o.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(o.j=o.l,o.g=new Set,o.h&&(DT(o,o.h),o.h=null))}if(r.F){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.Da=e,cT(r.I,r.F,e))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-e.G,n.l.info("Handshake RTT: "+n.S+"ms"));var a=e;if((r=n).wa=_A(r,r.J?r.pa:null,r.Y),a.K){OT(r.i,a);var s=a,l=r.L;l&&s.setTimeout(l),s.C&&(ZN(s),QN(s)),r.g=a}else fA(r);0<n.j.length&&cA(n)}else"stop"!=u[0]&&"close"!=u[0]||wA(n,7);else 3==n.H&&("stop"==u[0]||"close"==u[0]?"stop"==u[0]?wA(n,7):sA(n):"noop"!=u[0]&&n.h&&n.h.Aa(u),n.A=0)}IN()}catch(WW){}}function rT(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(GI(e)||"string"==typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.ta&&"function"==typeof e.ta)return e.ta();if(!e.Z||"function"!=typeof e.Z){if("undefined"!=typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!=typeof Set&&e instanceof Set)){if(GI(e)||"string"==typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.Z&&"function"==typeof e.Z)return e.Z();if("undefined"!=typeof Map&&e instanceof Map||"undefined"!=typeof Set&&e instanceof Set)return Array.from(e.values());if("string"==typeof e)return e.split("");if(GI(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,o=0;o<i;o++)t.call(void 0,r[o],n&&n[o],e)}($I=zN.prototype).setTimeout=function(e){this.P=e},$I.nb=function(e){e=e.target;const t=this.M;t&&3==tA(e)?t.l():this.Pa(e)},$I.Pa=function(e){try{if(e==this.g)e:{const c=tA(this.g);var t=this.g.Ia();if(this.g.da(),!(3>c)&&(3!=c||vS||this.g&&(this.h.h||this.g.ja()||nA(this.g)))){this.J||4!=c||7==t||IN(),ZN(this);var n=this.g.da();this.ca=n;t:if(KN(this)){var r=nA(this.g);e="";var i=r.length,o=4==tA(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){tT(this),eT(this);var a="";break t}this.h.i=new HI.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:o&&t==i-1});r.length=0,this.h.g+=e,this.o=0,a=this.h.g}else a=this.g.ja();if(this.i=200==n,function(e,t,n,r,i,o,a){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+o+" "+a}))}(this.j,this.v,this.B,this.m,this.W,c,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var s,l=this.g;if((s=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!lS(s)){var u=s;break t}}u=null}if(!(n=u)){this.i=!1,this.s=3,NN(12),tT(this),eT(this);break e}wN(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,nT(this,n)}this.S?(YN(this,c,a),vS&&this.i&&3==c&&(yN(this.U,this.V,"tick",this.mb),this.V.start())):(wN(this.j,this.m,a,null),nT(this,a)),4==c&&tT(this),this.i&&!this.J&&(4==c?bA(this.l,this):(this.i=!1,QN(this)))}else(function(e){const t={};e=(e.g&&2<=tA(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(lS(e[r]))continue;var n=iN(e[r]);const i=n[0];if("string"!=typeof(n=n[1]))continue;n=n.trim();const o=t[i]||[];t[i]=o,o.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,(function(e){return e.join(", ")}))})(this.g),400==n&&0<a.indexOf("Unknown SID")?(this.s=3,NN(12)):(this.s=0,NN(13)),tT(this),eT(this)}}}catch(FW){}},$I.mb=function(){if(this.g){var e=tA(this.g),t=this.g.ja();this.o<t.length&&(ZN(this),YN(this,e,t),this.i&&4!=e&&QN(this))}},$I.cancel=function(){this.J=!0,tT(this)},$I.lb=function(){this.C=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.B),2!=this.L&&(IN(),NN(17)),tT(this),this.s=2,eT(this)):JN(this,this.Y-e)};var iT=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function oT(e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof oT){this.h=e.h,sT(this,e.j),this.s=e.s,this.g=e.g,lT(this,e.m),this.l=e.l;var t=e.i,n=new xT;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),uT(this,n),this.o=e.o}else e&&(t=String(e).match(iT))?(this.h=!1,sT(this,t[1]||"",!0),this.s=hT(t[2]||""),this.g=hT(t[3]||"",!0),lT(this,t[4]),this.l=hT(t[5]||"",!0),uT(this,t[6]||"",!0),this.o=hT(t[7]||"")):(this.h=!1,this.i=new xT(null,this.h))}function aT(e){return new oT(e)}function sT(e,t,n){e.j=n?hT(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lT(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function uT(e,t,n){t instanceof xT?(e.i=t,function(e,t){t&&!e.j&&(wT(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(kT(this,t),ET(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=pT(t,yT)),e.i=new xT(t,e.h))}function cT(e,t,n){e.i.set(t,n)}function dT(e){return cT(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function hT(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function pT(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,fT),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function fT(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}oT.prototype.toString=function(){var e=[],t=this.j;t&&e.push(pT(t,mT,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(pT(t,mT,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(pT(n,"/"==n.charAt(0)?vT:gT,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",pT(n,bT)),e.join("")};var mT=/[#\/\?@]/g,gT=/[#\?:]/g,vT=/[#\?]/g,yT=/[#\?@]/g,bT=/#/g;function xT(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function wT(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var o=e[n].substring(0,r);i=e[n].substring(r+1)}else o=e[n];t(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function kT(e,t){wT(e),t=CT(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function _T(e,t){return wT(e),t=CT(e,t),e.g.has(t)}function ET(e,t,n){kT(e,t),0<n.length&&(e.i=null,e.g.set(CT(e,t),iS(n)),e.h+=n.length)}function CT(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}($I=xT.prototype).add=function(e,t){wT(this),this.i=null,e=CT(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},$I.forEach=function(e,t){wT(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},$I.ta=function(){wT(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},$I.Z=function(e){wT(this);let t=[];if("string"==typeof e)_T(this,e)&&(t=t.concat(this.g.get(CT(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},$I.set=function(e,t){return wT(this),this.i=null,_T(this,e=CT(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},$I.get=function(e,t){return e&&0<(e=this.Z(e)).length?String(e[0]):t},$I.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const o=encodeURIComponent(String(r)),a=this.Z(r);for(r=0;r<a.length;r++){var i=o;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")};var IT=class{constructor(e,t){this.g=e,this.map=t}};function ST(e){this.l=e||NT,e=HI.PerformanceNavigationTiming?0<(e=HI.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(HI.g&&HI.g.Ka&&HI.g.Ka()&&HI.g.Ka().dc),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var NT=10;function TT(e){return!!e.h||!!e.g&&e.g.size>=e.j}function AT(e){return e.h?1:e.g?e.g.size:0}function RT(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function DT(e,t){e.g?e.g.add(t):e.h=t}function OT(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function PT(e){if(null!=e.h)return e.i.concat(e.h.F);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.F);return t}return iS(e.i)}ST.prototype.cancel=function(){if(this.i=PT(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var LT=class{stringify(e){return HI.JSON.stringify(e,void 0)}parse(e){return HI.JSON.parse(e,void 0)}};function MT(){this.g=new LT}function FT(e,t,n){const r=n||"";try{rT(e,(function(e,n){let i=e;KI(e)&&(i=eN(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(AW){throw t.push(r+"type="+encodeURIComponent("_badmap")),AW}}function jT(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(UW){}}function BT(e){this.l=e.ec||null,this.j=e.ob||!1}function VT(e,t){QS.call(this),this.F=e,this.u=t,this.m=void 0,this.readyState=zT,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}tS(BT,ON),BT.prototype.g=function(){return new VT(this.l,this.j)},BT.prototype.i=function(e){return function(){return e}}({}),tS(VT,QS);var zT=0;function UT(e){e.j.read().then(e.Xa.bind(e)).catch(e.ka.bind(e))}function $T(e){e.readyState=4,e.l=null,e.j=null,e.A=null,qT(e)}function qT(e){e.onreadystatechange&&e.onreadystatechange.call(e)}($I=VT.prototype).open=function(e,t){if(this.readyState!=zT)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,qT(this)},$I.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.F||HI).fetch(new Request(this.B,t)).then(this.$a.bind(this),this.ka.bind(this))},$I.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,$T(this)),this.readyState=zT},$I.$a=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,qT(this)),this.g&&(this.readyState=3,qT(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(void 0!==HI.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;UT(this)}else e.text().then(this.Za.bind(this),this.ka.bind(this))},$I.Xa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?$T(this):qT(this),3==this.readyState&&UT(this)}},$I.Za=function(e){this.g&&(this.response=this.responseText=e,$T(this))},$I.Ya=function(e){this.g&&(this.response=e,$T(this))},$I.ka=function(){this.g&&$T(this)},$I.setRequestHeader=function(e,t){this.v.append(e,t)},$I.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},$I.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(VT.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var WT=HI.JSON.parse;function HT(e){QS.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=GT,this.L=this.M=!1}tS(HT,QS);var GT="",KT=/^https?$/i,YT=["POST","PUT"];function XT(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,QT(e),ZT(e)}function QT(e){e.F||(e.F=!0,JS(e,"complete"),JS(e,"error"))}function JT(e){if(e.h&&void 0!==WI&&(!e.C[1]||4!=tA(e)||2!=e.da()))if(e.v&&4==tA(e))pN(e.La,0,e);else if(JS(e,"readystatechange"),4==tA(e)){e.h=!1;try{const a=e.da();e:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===a){var i=String(e.I).match(iT)[1]||null;!i&&HI.self&&HI.self.location&&(i=HI.self.location.protocol.slice(0,-1)),r=!KT.test(i?i.toLowerCase():"")}n=r}if(n)JS(e,"complete"),JS(e,"success");else{e.m=6;try{var o=2<tA(e)?e.g.statusText:""}catch(RW){o=""}e.j=o+" ["+e.da()+"]",QT(e)}}finally{ZT(e)}}}function ZT(e,t){if(e.g){eA(e);const n=e.g,r=e.C[0]?()=>{}:null;e.g=null,e.C=null,t||JS(e,"ready");try{n.onreadystatechange=r}catch(AW){}}}function eA(e){e.g&&e.L&&(e.g.ontimeout=null),e.A&&(HI.clearTimeout(e.A),e.A=null)}function tA(e){return e.g?e.g.readyState:0}function nA(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.K){case GT:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(YW){return null}}function rA(e){let t="";return DS(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function iA(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=rA(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):cT(e,t,n))}function oA(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function aA(e){this.Ga=0,this.j=[],this.l=new xN,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=oA("failFast",!1,e),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=oA("baseRetryDelayMs",5e3,e),this.hb=oA("retryDelaySeedMs",1e4,e),this.eb=oA("forwardChannelMaxRetries",2,e),this.xa=oA("forwardChannelRequestTimeoutMs",2e4,e),this.va=e&&e.xmlHttpFactory||void 0,this.Ha=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.i=new ST(e&&e.concurrentRequestLimit),this.Ja=new MT,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=e&&e.bc||!1,e&&e.Ea&&this.l.Ea(),e&&e.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&e&&e.detectBufferingProxy||!1,this.qa=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.qa=e.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function sA(e){if(uA(e),3==e.H){var t=e.W++,n=aT(e.I);if(cT(n,"SID",e.K),cT(n,"RID",t),cT(n,"TYPE","terminate"),hA(e,n),(t=new zN(e,e.l,t)).L=2,t.A=dT(aT(n)),n=!1,HI.navigator&&HI.navigator.sendBeacon)try{n=HI.navigator.sendBeacon(t.A.toString(),"")}catch($W){}!n&&HI.Image&&((new Image).src=t.A,n=!0),n||(t.g=EA(t.l,null),t.g.ha(t.A)),t.G=Date.now(),QN(t)}kA(e)}function lA(e){e.g&&(gA(e),e.g.cancel(),e.g=null)}function uA(e){lA(e),e.u&&(HI.clearTimeout(e.u),e.u=null),yA(e),e.i.cancel(),e.m&&("number"==typeof e.m&&HI.clearTimeout(e.m),e.m=null)}function cA(e){if(!TT(e.i)&&!e.m){e.m=!0;var t=e.Na;aN||uN(),sN||(aN(),sN=!0),lN.add(t,e),e.C=0}}function dA(e,t){var n;n=t?t.m:e.W++;const r=aT(e.I);cT(r,"SID",e.K),cT(r,"RID",n),cT(r,"AID",e.V),hA(e,r),e.o&&e.s&&iA(r,e.o,e.s),n=new zN(e,e.l,n,e.C+1),null===e.o&&(n.I=e.s),t&&(e.j=t.F.concat(e.j)),t=pA(e,n,1e3),n.setTimeout(Math.round(.5*e.xa)+Math.round(.5*e.xa*Math.random())),DT(e.i,n),HN(n,r,t)}function hA(e,t){e.na&&DS(e.na,(function(e,n){cT(t,n,e)})),e.h&&rT({},(function(e,n){cT(t,n,e)}))}function pA(e,t,n){n=Math.min(e.j.length,n);var r=e.h?ZI(e.h.Va,e.h,e):null;e:{var i=e.j;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let o=!0;for(let a=0;a<n;a++){let n=i[a].g;const s=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),o=!1;else try{FT(s,e,"req"+n+"_")}catch(pH){r&&r(s)}}if(o){r=e.join("&");break e}}}return e=e.j.splice(0,n),t.F=e,r}function fA(e){if(!e.g&&!e.u){e.ba=1;var t=e.Ma;aN||uN(),sN||(aN(),sN=!0),lN.add(t,e),e.A=0}}function mA(e){return!(e.g||e.u||3<=e.A||(e.ba++,e.u=AN(ZI(e.Ma,e),xA(e,e.A)),e.A++,0))}function gA(e){null!=e.B&&(HI.clearTimeout(e.B),e.B=null)}function vA(e){e.g=new zN(e,e.l,"rpc",e.ba),null===e.o&&(e.g.I=e.s),e.g.O=0;var t=aT(e.wa);cT(t,"RID","rpc"),cT(t,"SID",e.K),cT(t,"AID",e.V),cT(t,"CI",e.G?"0":"1"),!e.G&&e.qa&&cT(t,"TO",e.qa),cT(t,"TYPE","xmlhttp"),hA(e,t),e.o&&e.s&&iA(t,e.o,e.s),e.L&&e.g.setTimeout(e.L);var n=e.g;e=e.pa,n.L=1,n.A=dT(aT(t)),n.u=null,n.S=!0,GN(n,e)}function yA(e){null!=e.v&&(HI.clearTimeout(e.v),e.v=null)}function bA(e,t){var n=null;if(e.g==t){yA(e),gA(e),e.g=null;var r=2}else{if(!RT(e.i,t))return;n=t.F,OT(e.i,t),r=1}if(0!=e.H)if(t.i)if(1==r){n=t.u?t.u.length:0,t=Date.now()-t.G;var i=e.C;JS(r=EN(),new TN(r,n)),cA(e)}else fA(e);else if(3==(i=t.s)||0==i&&0<t.ca||!(1==r&&function(e,t){return!(AT(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.j=t.F.concat(e.j),0):1==e.H||2==e.H||e.C>=(e.cb?0:e.eb)||(e.m=AN(ZI(e.Na,e,t),xA(e,e.C)),e.C++,0)))}(e,t)||2==r&&mA(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:wA(e,5);break;case 4:wA(e,10);break;case 3:wA(e,6);break;default:wA(e,2)}}function xA(e,t){let n=e.ab+Math.floor(Math.random()*e.hb);return e.isActive()||(n*=2),n*t}function wA(e,t){if(e.l.info("Error code "+t),2==t){var n=null;e.h&&(n=null);var r=ZI(e.pb,e);n||(n=new oT("//www.google.com/images/cleardot.gif"),HI.location&&"http"==HI.location.protocol||sT(n,"https"),dT(n)),function(e,t){const n=new xN;if(HI.Image){const r=new Image;r.onload=eS(jT,n,r,"TestLoadImage: loaded",!0,t),r.onerror=eS(jT,n,r,"TestLoadImage: error",!1,t),r.onabort=eS(jT,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=eS(jT,n,r,"TestLoadImage: timeout",!1,t),HI.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else NN(2);e.H=0,e.h&&e.h.za(t),kA(e),uA(e)}function kA(e){if(e.H=0,e.ma=[],e.h){const t=PT(e.i);0==t.length&&0==e.j.length||(oS(e.ma,t),oS(e.ma,e.j),e.i.i.length=0,iS(e.j),e.j.length=0),e.h.ya()}}function _A(e,t,n){var r=n instanceof oT?aT(n):new oT(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lT(r,r.m);else{var i=HI.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var o=new oT(null);r&&sT(o,r),t&&(o.g=t),i&&lT(o,i),n&&(o.l=n),r=o}return n=e.F,t=e.Da,n&&t&&cT(r,n,t),cT(r,"VER",e.ra),hA(e,r),r}function EA(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ha&&!e.va?new HT(new BT({ob:n})):new HT(e.va)).Oa(e.J),t}function CA(){}function IA(){if(mS&&!(10<=Number(CS)))throw Error("Environmental error: no available transport.")}function SA(e,t){QS.call(this),this.g=new aA(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.Ca&&(e?e["X-WebChannel-Client-Profile"]=t.Ca:e={"X-WebChannel-Client-Profile":t.Ca}),this.g.U=e,(e=t&&t.cc)&&!lS(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!lS(t)&&(this.g.F=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new AA(this)}function NA(e){jN.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function TA(){BN.call(this),this.status=1}function AA(e){this.g=e}function RA(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function DA(e,t,n){n||(n=0);var r=Array(16);if("string"==typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var o=e.g[3],a=t+(o^n&(i^o))+r[0]+3614090360&4294967295;a=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=(n=(i=(o=(t=n+(a<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(o^n&(i^o))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=o+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^o&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(o^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^o&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^o&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=o+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(o^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(o^t&(i^o))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^o)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^o)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=o+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(o^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^o^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~o))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~o))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(o|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(o^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((o=(t=n+((a=t+(i^(n|~o))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=o+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=o+((a=i+(t^(o|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+o&4294967295}function OA(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var o=0|e[i];r&&o==t||(n[i]=o,r=!1)}this.g=n}($I=HT.prototype).Oa=function(e){this.M=e},$I.ha=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+e);t=t?t.toUpperCase():"GET",this.I=e,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():MN.g(),this.C=this.u?PN(this.u):PN(MN),this.g.onreadystatechange=ZI(this.La,this);try{this.G=!0,this.g.open(t,String(e),!0),this.G=!1}catch(UW){return void XT(this,UW)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find((e=>"content-type"==e.toLowerCase())),i=HI.FormData&&e instanceof HI.FormData,!(0<=rS(YT,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{eA(this),0<this.B&&((this.L=function(e){return mS&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=ZI(this.ua,this)):this.A=pN(this.ua,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(UW){XT(this,UW)}},$I.ua=function(){void 0!==WI&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,JS(this,"timeout"),this.abort(8))},$I.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,JS(this,"complete"),JS(this,"abort"),ZT(this))},$I.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),ZT(this,!0)),HT.$.N.call(this)},$I.La=function(){this.s||(this.G||this.v||this.l?JT(this):this.kb())},$I.kb=function(){JT(this)},$I.isActive=function(){return!!this.g},$I.da=function(){try{return 2<tA(this)?this.g.status:-1}catch(PW){return-1}},$I.ja=function(){try{return this.g?this.g.responseText:""}catch(PW){return""}},$I.Wa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),WT(t)}},$I.Ia=function(){return this.m},$I.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},($I=aA.prototype).ra=8,$I.H=1,$I.Na=function(e){if(this.m)if(this.m=null,1==this.H){if(!e){this.W=Math.floor(1e5*Math.random()),e=this.W++;const i=new zN(this,this.l,e);let o=this.s;if(this.U&&(o?(o=OS(o),LS(o,this.U)):o=this.U),null!==this.o||this.O||(i.I=o,o=null),this.P)e:{for(var t=0,n=0;n<this.j.length;n++){var r=this.j[n];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.j.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=pA(this,i,t),cT(n=aT(this.I),"RID",e),cT(n,"CVER",22),this.F&&cT(n,"X-HTTP-Session-Id",this.F),hA(this,n),o&&(this.O?t="headers="+encodeURIComponent(String(rA(o)))+"&"+t:this.o&&iA(n,this.o,o)),DT(this.i,i),this.bb&&cT(n,"TYPE","init"),this.P?(cT(n,"$req",t),cT(n,"SID","null"),i.aa=!0,HN(i,n,null)):HN(i,n,t),this.H=2}}else 3==this.H&&(e?dA(this,e):0==this.j.length||TT(this.i)||dA(this))},$I.Ma=function(){if(this.u=null,vA(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var e=2*this.S;this.l.info("BP detection timer enabled: "+e),this.B=AN(ZI(this.jb,this),e)}},$I.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,NN(10),lA(this),vA(this))},$I.ib=function(){null!=this.v&&(this.v=null,lA(this),mA(this),NN(19))},$I.pb=function(e){e?(this.l.info("Successfully pinged google.com"),NN(2)):(this.l.info("Failed to ping google.com"),NN(1))},$I.isActive=function(){return!!this.h&&this.h.isActive(this)},($I=CA.prototype).Ba=function(){},$I.Aa=function(){},$I.za=function(){},$I.ya=function(){},$I.isActive=function(){return!0},$I.Va=function(){},IA.prototype.g=function(e,t){return new SA(e,t)},tS(SA,QS),SA.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var e=this.g,t=this.l,n=this.h||void 0;NN(0),e.Y=t,e.na=n||{},e.G=e.aa,e.I=_A(e,null,e.Y),cA(e)},SA.prototype.close=function(){sA(this.g)},SA.prototype.u=function(e){var t=this.g;if("string"==typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=eN(e),e=n);t.j.push(new IT(t.fb++,e)),3==t.H&&cA(t)},SA.prototype.N=function(){this.g.h=null,delete this.j,sA(this.g),delete this.g,SA.$.N.call(this)},tS(NA,jN),tS(TA,BN),tS(AA,CA),AA.prototype.Ba=function(){JS(this.g,"a")},AA.prototype.Aa=function(e){JS(this.g,new NA(e))},AA.prototype.za=function(e){JS(this.g,new TA)},AA.prototype.ya=function(){JS(this.g,"b")},tS(RA,(function(){this.blockSize=-1})),RA.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},RA.prototype.j=function(e,t){void 0===t&&(t=e.length);for(var n=t-this.blockSize,r=this.m,i=this.h,o=0;o<t;){if(0==i)for(;o<=n;)DA(this,e,o),o+=this.blockSize;if("string"==typeof e){for(;o<t;)if(r[i++]=e.charCodeAt(o++),i==this.blockSize){DA(this,r),i=0;break}}else for(;o<t;)if(r[i++]=e[o++],i==this.blockSize){DA(this,r),i=0;break}}this.h=i,this.i+=t},RA.prototype.l=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.i;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.j(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var PA={};function LA(e){return-128<=e&&128>e?function(e,t){var n=PA;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,(function(e){return new OA([0|e],0>e?-1:0)})):new OA([0|e],0>e?-1:0)}function MA(e){if(isNaN(e)||!isFinite(e))return jA;if(0>e)return $A(MA(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=FA;return new OA(t,0)}var FA=4294967296,jA=LA(0),BA=LA(1),VA=LA(16777216);function zA(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function UA(e){return-1==e.h}function $A(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new OA(n,~e.h).add(BA)}function qA(e,t){return e.add($A(t))}function WA(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function HA(e,t){this.g=e,this.h=t}function GA(e,t){if(zA(t))throw Error("division by zero");if(zA(e))return new HA(jA,jA);if(UA(e))return t=GA($A(e),t),new HA($A(t.g),$A(t.h));if(UA(t))return t=GA(e,$A(t)),new HA($A(t.g),t.h);if(30<e.g.length){if(UA(e)||UA(t))throw Error("slowDivide_ only works with positive integers.");for(var n=BA,r=t;0>=r.X(e);)n=KA(n),r=KA(r);var i=YA(n,1),o=YA(r,1);for(r=YA(r,2),n=YA(n,2);!zA(r);){var a=o.add(r);0>=a.X(e)&&(i=i.add(n),o=a),r=YA(r,1),n=YA(n,1)}return t=qA(e,i.R(t)),new HA(i,t)}for(i=jA;0<=e.X(t);){for(n=Math.max(1,Math.floor(e.ea()/t.ea())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(o=MA(n)).R(t);UA(a)||0<a.X(e);)a=(o=MA(n-=r)).R(t);zA(o)&&(o=BA),i=i.add(o),e=qA(e,a)}return new HA(i,e)}function KA(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.D(r)<<1|e.D(r-1)>>>31;return new OA(n,e.h)}function YA(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],o=0;o<r;o++)i[o]=0<t?e.D(o+n)>>>t|e.D(o+n+1)<<32-t:e.D(o+n);return new OA(i,e.h)}($I=OA.prototype).ea=function(){if(UA(this))return-$A(this).ea();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.D(n);e+=(0<=r?r:FA+r)*t,t*=FA}return e},$I.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(zA(this))return"0";if(UA(this))return"-"+$A(this).toString(e);for(var t=MA(Math.pow(e,6)),n=this,r="";;){var i=GA(n,t).g,o=((0<(n=qA(n,i.R(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(zA(n=i))return o+r;for(;6>o.length;)o="0"+o;r=o+r}},$I.D=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},$I.X=function(e){return UA(e=qA(this,e))?-1:zA(e)?0:1},$I.abs=function(){return UA(this)?$A(this):this},$I.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var o=r+(65535&this.D(i))+(65535&e.D(i)),a=(o>>>16)+(this.D(i)>>>16)+(e.D(i)>>>16);r=a>>>16,o&=65535,a&=65535,n[i]=a<<16|o}return new OA(n,-2147483648&n[n.length-1]?-1:0)},$I.R=function(e){if(zA(this)||zA(e))return jA;if(UA(this))return UA(e)?$A(this).R($A(e)):$A($A(this).R(e));if(UA(e))return $A(this.R($A(e)));if(0>this.X(VA)&&0>e.X(VA))return MA(this.ea()*e.ea());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var o=this.D(r)>>>16,a=65535&this.D(r),s=e.D(i)>>>16,l=65535&e.D(i);n[2*r+2*i]+=a*l,WA(n,2*r+2*i),n[2*r+2*i+1]+=o*l,WA(n,2*r+2*i+1),n[2*r+2*i+1]+=a*s,WA(n,2*r+2*i+1),n[2*r+2*i+2]+=o*s,WA(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new OA(n,0)},$I.gb=function(e){return GA(this,e).h},$I.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)&e.D(r);return new OA(n,this.h&e.h)},$I.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)|e.D(r);return new OA(n,this.h|e.h)},$I.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.D(r)^e.D(r);return new OA(n,this.h^e.h)},IA.prototype.createWebChannel=IA.prototype.g,SA.prototype.send=SA.prototype.u,SA.prototype.open=SA.prototype.m,SA.prototype.close=SA.prototype.close,RN.NO_ERROR=0,RN.TIMEOUT=8,RN.HTTP_ERROR=6,DN.COMPLETE="complete",LN.EventType=FN,FN.OPEN="a",FN.CLOSE="b",FN.ERROR="c",FN.MESSAGE="d",QS.prototype.listen=QS.prototype.O,HT.prototype.listenOnce=HT.prototype.P,HT.prototype.getLastError=HT.prototype.Sa,HT.prototype.getLastErrorCode=HT.prototype.Ia,HT.prototype.getStatus=HT.prototype.da,HT.prototype.getResponseJson=HT.prototype.Wa,HT.prototype.getResponseText=HT.prototype.ja,HT.prototype.send=HT.prototype.ha,HT.prototype.setWithCredentials=HT.prototype.Oa,RA.prototype.digest=RA.prototype.l,RA.prototype.reset=RA.prototype.reset,RA.prototype.update=RA.prototype.j,OA.prototype.add=OA.prototype.add,OA.prototype.multiply=OA.prototype.R,OA.prototype.modulo=OA.prototype.gb,OA.prototype.compare=OA.prototype.X,OA.prototype.toNumber=OA.prototype.ea,OA.prototype.toString=OA.prototype.toString,OA.prototype.getBits=OA.prototype.D,OA.fromNumber=MA,OA.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return $A(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=MA(Math.pow(n,8)),i=jA,o=0;o<t.length;o+=8){var a=Math.min(8,t.length-o),s=parseInt(t.substring(o,o+a),n);8>a?(a=MA(Math.pow(n,a)),i=i.R(a).add(MA(s))):i=(i=i.R(r)).add(MA(s))}return i};var XA=RN,QA=DN,JA=kN,ZA=10,eR=11,tR=LN,nR=HT,rR=RA,iR=OA;const oR="@firebase/firestore";
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class aR{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}aR.UNAUTHENTICATED=new aR(null),aR.GOOGLE_CREDENTIALS=new aR("google-credentials-uid"),aR.FIRST_PARTY=new aR("first-party-uid"),aR.MOCK_USER=new aR("mock-user");
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
let sR="10.8.1";
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const lR=new jx("@firebase/firestore");function uR(){return lR.logLevel}function cR(e,...t){if(lR.logLevel<=Ox.DEBUG){const n=t.map(pR);lR.debug(`Firestore (${sR}): ${e}`,...n)}}function dR(e,...t){if(lR.logLevel<=Ox.ERROR){const n=t.map(pR);lR.error(`Firestore (${sR}): ${e}`,...n)}}function hR(e,...t){if(lR.logLevel<=Ox.WARN){const n=t.map(pR);lR.warn(`Firestore (${sR}): ${e}`,...n)}}function pR(e){if("string"==typeof e)return e;try{
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */return function(e){return JSON.stringify(e)}(e)}catch(TW){return e}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function fR(e="Unexpected state"){const t=`FIRESTORE (${sR}) INTERNAL ASSERTION FAILED: `+e;throw dR(t),new Error(t)}function mR(e,t){e||fR()}function gR(e,t){return e}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const vR={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yR extends mx{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class bR{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class xR{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(aR.UNAUTHENTICATED)))}shutdown(){}}class kR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class _R{constructor(e){this.t=e,this.currentUser=aR.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new bR;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new bR,e.enqueueRetryable((()=>r(this.currentUser)))};const o=()=>{const t=i;e.enqueueRetryable((async()=>{await t.promise,await r(this.currentUser)}))},a=e=>{cR("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit((e=>a(e))),setTimeout((()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(cR("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new bR)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((t=>this.i!==e?(cR("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(mR("string"==typeof t.accessToken),new xR(t.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return mR(null===e||"string"==typeof e),new aR(e)}}class ER{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=aR.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class CR{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new ER(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable((()=>t(aR.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class IR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class SR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){const n=e=>{null!=e.error&&cR("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${e.error.message}`);const n=e.token!==this.R;return this.R=e.token,cR("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable((()=>n(t)))};const r=e=>{cR("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.appCheck.addTokenListener(this.o)};this.A.onInit((e=>r(e))),setTimeout((()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):cR("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((e=>e?(mR("string"==typeof e.token),this.R=e.token,new IR(e.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function NR(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class TR{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=NR(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function AR(e,t){return e<t?-1:e>t?1:0}function RR(e,t,n){return e.length===t.length&&e.every(((e,r)=>n(e,t[r])))}function DR(e){return e+"\0"}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class OR{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yR(vR.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yR(vR.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new yR(vR.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yR(vR.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return OR.fromMillis(Date.now())}static fromDate(e){return OR.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new OR(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?AR(this.nanoseconds,e.nanoseconds):AR(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class PR{constructor(e){this.timestamp=e}static fromTimestamp(e){return new PR(e)}static min(){return new PR(new OR(0,0))}static max(){return new PR(new OR(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class LR{constructor(e,t,n){void 0===t?t=0:t>e.length&&fR(),void 0===n?n=e.length-t:n>e.length-t&&fR(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===LR.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof LR?e.forEach((e=>{t.push(e)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class MR extends LR{construct(e,t,n){return new MR(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new yR(vR.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter((e=>e.length>0)))}return new MR(t)}static emptyPath(){return new MR([])}}const FR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class jR extends LR{construct(e,t,n){return new jR(e,t,n)}static isValidIdentifier(e){return FR.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),jR.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new jR(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new yR(vR.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let o=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new yR(vR.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new yR(vR.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(o=!o,r++):"."!==t||o?(n+=t,r++):(i(),r++)}if(i(),o)throw new yR(vR.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new jR(t)}static emptyPath(){return new jR([])}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class BR{constructor(e){this.path=e}static fromPath(e){return new BR(MR.fromString(e))}static fromName(e){return new BR(MR.fromString(e).popFirst(5))}static empty(){return new BR(MR.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===MR.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return MR.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new BR(new MR(e.slice()))}}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class VR{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function zR(e){return e.fields.find((e=>2===e.kind))}function UR(e){return e.fields.filter((e=>2!==e.kind))}VR.UNKNOWN_ID=-1;class $R{constructor(e,t){this.fieldPath=e,this.kind=t}}class qR{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new qR(0,GR.min())}}function WR(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=PR.fromTimestamp(1e9===r?new OR(n+1,0):new OR(n,r));return new GR(i,BR.empty(),t)}function HR(e){return new GR(e.readTime,e.key,-1)}class GR{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new GR(PR.min(),BR.empty(),-1)}static max(){return new GR(PR.max(),BR.empty(),-1)}}function KR(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=BR.comparator(e.documentKey,t.documentKey),0!==n?n:AR(e.largestBatchId,t.largestBatchId)
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */)}const YR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class XR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */async function QR(e){if(e.code!==vR.FAILED_PRECONDITION||e.message!==YR)throw e;cR("LocalStore","Unexpectedly lost primary lease")}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class JR{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)}),(e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&fR(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new JR(((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof JR?t:JR.resolve(t)}catch(e){return JR.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):JR.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):JR.reject(t)}static resolve(e){return new JR(((t,n)=>{t(e)}))}static reject(e){return new JR(((t,n)=>{n(e)}))}static waitFor(e){return new JR(((t,n)=>{let r=0,i=0,o=!1;e.forEach((e=>{++r,e.next((()=>{++i,o&&i===r&&t()}),(e=>n(e)))})),o=!0,i===r&&t()}))}static or(e){let t=JR.resolve(!1);for(const n of e)t=t.next((e=>e?JR.resolve(e):n()));return t}static forEach(e,t){const n=[];return e.forEach(((e,r)=>{n.push(t.call(this,e,r))})),this.waitFor(n)}static mapArray(e,t){return new JR(((n,r)=>{const i=e.length,o=new Array(i);let a=0;for(let s=0;s<i;s++){const l=s;t(e[l]).next((e=>{o[l]=e,++a,a===i&&n(o)}),(e=>r(e)))}}))}static doWhile(e,t){return new JR(((n,r)=>{const i=()=>{!0===e()?t().next((()=>{i()}),r):n()};i()}))}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class ZR{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new bR,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new nD(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=sD(t.target.error);this.V.reject(new nD(e,n))}}static open(e,t,n,r){try{return new ZR(t,e.transaction(r,n))}catch(e){throw new nD(t,e)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(cR("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new iD(t)}}class eD{constructor(e,t,n){this.name=e,this.version=t,this.p=n,12.2===eD.S(lx())&&dR("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return cR("SimpleDb","Removing database:",e),oD(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!fx())return!1;if(eD.C())return!0;const e=lx(),t=eD.S(e),n=0<t&&t<10,r=eD.v(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static C(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.F)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(e){return this.db||(cR("SimpleDb","Opening database:",this.name),this.db=await new Promise(((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new nD(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new yR(vR.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new yR(vR.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new nD(e,r))},r.onupgradeneeded=e=>{cR("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.p.N(t,r.transaction,e.oldVersion,this.version).next((()=>{cR("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=e=>this.B(e)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let o=0;for(;;){++o;try{this.db=await this.O(e);const t=ZR.open(this.db,e,i?"readonly":"readwrite",n),o=r(t).next((e=>(t.g(),e))).catch((e=>(t.abort(e),JR.reject(e)))).toPromise();return o.catch((()=>{})),await t.m,o}catch(e){const t=e,n="FirebaseError"!==t.name&&o<3;if(cR("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}class tD{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return oD(this.k.delete())}}class nD extends yR{constructor(e,t){super(vR.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function rD(e){return"IndexedDbTransactionError"===e.name}class iD{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(cR("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(cR("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),oD(n)}add(e){return cR("SimpleDb","ADD",this.store.name,e,e),oD(this.store.add(e))}get(e){return oD(this.store.get(e)).next((t=>(void 0===t&&(t=null),cR("SimpleDb","GET",this.store.name,e,t),t)))}delete(e){return cR("SimpleDb","DELETE",this.store.name,e),oD(this.store.delete(e))}count(){return cR("SimpleDb","COUNT",this.store.name),oD(this.store.count())}W(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new JR(((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}}))}{const e=this.cursor(n),t=[];return this.G(e,((e,n)=>{t.push(n)})).next((()=>t))}}j(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new JR(((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}}))}H(e,t){cR("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.J=!1;const r=this.cursor(n);return this.G(r,((e,t,n)=>n.delete()))}Y(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.G(r,t)}Z(e){const t=this.cursor({});return new JR(((n,r)=>{t.onerror=e=>{const t=sD(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next((e=>{e?r.continue():n()})):n()}}))}G(e,t){const n=[];return new JR(((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const o=new tD(i),a=t(i.primaryKey,i.value,o);if(a instanceof JR){const e=a.catch((e=>(o.done(),JR.reject(e))));n.push(e)}o.isDone?r():null===o.$?i.continue():i.continue(o.$)}})).next((()=>JR.waitFor(n)))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.J?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function oD(e){return new JR(((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=sD(e.target.error);n(t)}}))}let aD=!1;function sD(e){const t=eD.S(lx());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new yR("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return aD||(aD=!0,setTimeout((()=>{throw e}),0)),e}}return e}class lD{constructor(e,t){this.asyncQueue=e,this.X=t,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(e){cR("IndexBackfiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(async()=>{this.task=null;try{cR("IndexBackfiller",`Documents written: ${await this.X.te()}`)}catch(e){rD(e)?cR("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await QR(e)}await this.ee(6e4)}))}}class uD{constructor(e,t){this.localStore=e,this.persistence=t}async te(e=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(t=>this.ne(t,e)))}ne(e,t){const n=new Set;let r=t,i=!0;return JR.doWhile((()=>!0===i&&r>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((t=>{if(null!==t&&!n.has(t))return cR("IndexBackfiller",`Processing collection: ${t}`),this.re(e,t,r).next((e=>{r-=e,n.add(t)}));i=!1})))).next((()=>t-r))}re(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next((n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next((()=>this.ie(r,n))).next((n=>(cR("IndexBackfiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(e,t,n)))).next((()=>i.size))}))))}ie(e,t){let n=e;return t.changes.forEach(((e,t)=>{const r=HR(t);KR(r,n)>0&&(n=r)})),new GR(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}
/**
             * @license
             * Copyright 2018 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class cD{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.se(e),this.oe=e=>t.writeSequenceNumber(e))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}function dD(e){return null==e}function hD(e){return 0===e&&1/e==-1/0}function pD(e){return"number"==typeof e&&Number.isInteger(e)&&!hD(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function fD(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=gD(t)),t=mD(e.get(n),t);return gD(t)}function mD(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="";break;case"":n+="";break;default:n+=t}}return n}function gD(e){return e+""}function vD(e){const t=e.length;if(mR(t>=2),2===t)return mR(""===e.charAt(0)&&""===e.charAt(1)),MR.emptyPath();const n=t-2,r=[];let i="";for(let o=0;o<t;){const t=e.indexOf("",o);switch((t<0||t>n)&&fR(),e.charAt(t+1)){case"":const n=e.substring(o,t);let a;0===i.length?a=n:(i+=n,a=i,i=""),r.push(a);break;case"":i+=e.substring(o,t),i+="\0";break;case"":i+=e.substring(o,t+1);break;default:fR()}o=t+2}return new MR(r)}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */cD._e=-1;const yD=["userId","batchId"];
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function bD(e,t){return[e,fD(t)]}function xD(e,t,n){return[e,fD(t),n]}const wD={},kD=["prefixPath","collectionGroup","readTime","documentId"],_D=["prefixPath","collectionGroup","documentId"],ED=["collectionGroup","readTime","prefixPath","documentId"],CD=["canonicalId","targetId"],ID=["targetId","path"],SD=["path","targetId"],ND=["collectionId","parent"],TD=["indexId","uid"],AD=["uid","sequenceNumber"],RD=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],DD=["indexId","uid","orderedDocumentKey"],OD=["userId","collectionPath","documentId"],PD=["userId","collectionPath","largestBatchId"],LD=["userId","collectionGroup","largestBatchId"],MD=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],FD=[...MD,"documentOverlays"],jD=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],BD=jD,VD=[...BD,"indexConfiguration","indexState","indexEntries"];
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class zD extends XR{constructor(e,t){super(),this.ae=e,this.currentSequenceNumber=t}}function UD(e,t){const n=gR(e);return eD.M(n.ae,t)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function $D(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function qD(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function WD(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class HD{constructor(e,t){this.comparator=e,this.root=t||KD.EMPTY}insert(e,t){return new HD(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,KD.BLACK,null,null))}remove(e){return new HD(this.comparator,this.root.remove(e,this.comparator).copy(null,null,KD.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,n)=>(e(t,n),!1)))}toString(){const e=[];return this.inorderTraversal(((t,n)=>(e.push(`${t}:${n}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new GD(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new GD(this.root,e,this.comparator,!1)}getReverseIterator(){return new GD(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new GD(this.root,e,this.comparator,!0)}}class GD{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class KD{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:KD.RED,this.left=null!=r?r:KD.EMPTY,this.right=null!=i?i:KD.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new KD(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return KD.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return KD.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,KD.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,KD.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw fR();if(this.right.isRed())throw fR();const e=this.left.check();if(e!==this.right.check())throw fR();return e+(this.isRed()?0:1)}}KD.EMPTY=null,KD.RED=!0,KD.BLACK=!1,KD.EMPTY=new class{constructor(){this.size=0}get key(){throw fR()}get value(){throw fR()}get color(){throw fR()}get left(){throw fR()}get right(){throw fR()}copy(e,t,n,r,i){return this}insert(e,t,n){return new KD(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class YD{constructor(e){this.comparator=e,this.data=new HD(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,n)=>(e(t),!1)))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new XD(this.data.getIterator())}getIteratorFrom(e){return new XD(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((e=>{t=t.add(e)})),t}isEqual(e){if(!(e instanceof YD))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new YD(this.comparator);return t.data=e,t}}class XD{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function QD(e){return e.hasNext()?e.getNext():void 0}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class JD{constructor(e){this.fields=e,e.sort(jR.comparator)}static empty(){return new JD([])}unionWith(e){let t=new YD(jR.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new JD(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return RR(this.fields,e.fields,((e,t)=>e.isEqual(t)))}}
/**
             * @license
             * Copyright 2023 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class ZD extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class eO{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new ZD("Invalid base64 string: "+e):e}}(e);return new eO(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new eO(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return AR(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}eO.EMPTY_BYTE_STRING=new eO("");const tO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nO(e){if(mR(!!e),"string"==typeof e){let t=0;const n=tO.exec(e);if(mR(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:rO(e.seconds),nanos:rO(e.nanos)}}function rO(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function iO(e){return"string"==typeof e?eO.fromBase64String(e):eO.fromUint8Array(e)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function oO(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function aO(e){const t=e.mapValue.fields.__previous_value__;return oO(t)?aO(t):t}function sO(e){const t=nO(e.mapValue.fields.__local_write_time__.timestampValue);return new OR(t.seconds,t.nanos)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class lO{constructor(e,t,n,r,i,o,a,s,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=s,this.useFetchStreams=l}}class uO{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new uO("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof uO&&e.projectId===this.projectId&&e.database===this.database}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const cO={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},dO={nullValue:"NULL_VALUE"};function hO(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oO(e)?4:IO(e)?9007199254740991:10:fR()}function pO(e,t){if(e===t)return!0;const n=hO(e);if(n!==hO(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return sO(e).isEqual(sO(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=nO(e.timestampValue),r=nO(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return iO(e.bytesValue).isEqual(iO(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return rO(e.geoPointValue.latitude)===rO(t.geoPointValue.latitude)&&rO(e.geoPointValue.longitude)===rO(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return rO(e.integerValue)===rO(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=rO(e.doubleValue),r=rO(t.doubleValue);return n===r?hD(n)===hD(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return RR(e.arrayValue.values||[],t.arrayValue.values||[],pO);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if($D(n)!==$D(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!pO(n[i],r[i])))return!1;return!0}(e,t);default:return fR()}}function fO(e,t){return void 0!==(e.values||[]).find((e=>pO(e,t)))}function mO(e,t){if(e===t)return 0;const n=hO(e),r=hO(t);if(n!==r)return AR(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return AR(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=rO(e.integerValue||e.doubleValue),r=rO(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return gO(e.timestampValue,t.timestampValue);case 4:return gO(sO(e),sO(t));case 5:return AR(e.stringValue,t.stringValue);case 6:return function(e,t){const n=iO(e),r=iO(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=AR(n[i],r[i]);if(0!==e)return e}return AR(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=AR(rO(e.latitude),rO(t.latitude));return 0!==n?n:AR(rO(e.longitude),rO(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=mO(n[i],r[i]);if(e)return e}return AR(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===cO.mapValue&&t===cO.mapValue)return 0;if(e===cO.mapValue)return 1;if(t===cO.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},o=Object.keys(i);r.sort(),o.sort();for(let a=0;a<r.length&&a<o.length;++a){const e=AR(r[a],o[a]);if(0!==e)return e;const t=mO(n[r[a]],i[o[a]]);if(0!==t)return t}return AR(r.length,o.length)}(e.mapValue,t.mapValue);default:throw fR()}}function gO(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return AR(e,t);const n=nO(e),r=nO(t),i=AR(n.seconds,r.seconds);return 0!==i?i:AR(n.nanos,r.nanos)}function vO(e){return yO(e)}function yO(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=nO(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return iO(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return BR.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return`geo(${e.latitude},${e.longitude})`}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=yO(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${yO(e.fields[i])}`;return n+"}"}(e.mapValue):fR()}function bO(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function xO(e){return!!e&&"integerValue"in e}function wO(e){return!!e&&"arrayValue"in e}function kO(e){return!!e&&"nullValue"in e}function _O(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function EO(e){return!!e&&"mapValue"in e}function CO(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return qD(e.mapValue.fields,((e,n)=>t.mapValue.fields[e]=CO(n))),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=CO(e.arrayValue.values[n]);return t}return Object.assign({},e)}function IO(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function SO(e){return"nullValue"in e?dO:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?bO(uO.empty(),BR.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:fR()}function NO(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?bO(uO.empty(),BR.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?cO:fR()}function TO(e,t){const n=mO(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function AO(e,t){const n=mO(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class RO{constructor(e){this.value=e}static empty(){return new RO({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!EO(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=CO(t)}setAll(e){let t=jR.emptyPath(),n={},r=[];e.forEach(((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=CO(e):r.push(i.lastSegment())}));const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());EO(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return pO(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];EO(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){qD(t,((t,n)=>e[t]=n));for(const r of n)delete e[r]}clone(){return new RO(CO(this.value))}}function DO(e){const t=[];return qD(e.fields,((e,n)=>{const r=new jR([e]);if(EO(n)){const e=DO(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)})),new JD(t)
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}class OO{constructor(e,t,n,r,i,o,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new OO(e,0,PR.min(),PR.min(),PR.min(),RO.empty(),0)}static newFoundDocument(e,t,n,r){return new OO(e,1,t,PR.min(),n,r,0)}static newNoDocument(e,t){return new OO(e,2,t,PR.min(),PR.min(),RO.empty(),0)}static newUnknownDocument(e,t){return new OO(e,3,t,PR.min(),PR.min(),RO.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(PR.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=RO.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=RO.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=PR.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof OO&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new OO(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class PO{constructor(e,t){this.position=e,this.inclusive=t}}function LO(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const o=t[i],a=e.position[i];if(r=o.field.isKeyField()?BR.comparator(BR.fromName(a.referenceValue),n.key):mO(a,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return r}function MO(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!pO(e.position[n],t.position[n]))return!1;return!0}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class FO{constructor(e,t="asc"){this.field=e,this.dir=t}}function jO(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class BO{}class VO extends BO{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new XO(e,t,n):"array-contains"===t?new eP(e,n):"in"===t?new tP(e,n):"not-in"===t?new nP(e,n):"array-contains-any"===t?new rP(e,n):new VO(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new QO(e,n):new JO(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(mO(t,this.value)):null!==t&&hO(this.value)===hO(t)&&this.matchesComparison(mO(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return fR()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class zO extends BO{constructor(e,t){super(),this.filters=e,this.op=t,this.ue=null}static create(e,t){return new zO(e,t)}matches(e){return UO(this)?void 0===this.filters.find((t=>!t.matches(e))):void 0!==this.filters.find((t=>t.matches(e)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function UO(e){return"and"===e.op}function $O(e){return"or"===e.op}function qO(e){return WO(e)&&UO(e)}function WO(e){for(const t of e.filters)if(t instanceof zO)return!1;return!0}function HO(e){if(e instanceof VO)return e.field.canonicalString()+e.op.toString()+vO(e.value);if(qO(e))return e.filters.map((e=>HO(e))).join(",");{const t=e.filters.map((e=>HO(e))).join(",");return`${e.op}(${t})`}}function GO(e,t){return e instanceof VO?function(e,t){return t instanceof VO&&e.op===t.op&&e.field.isEqual(t.field)&&pO(e.value,t.value)}(e,t):e instanceof zO?function(e,t){return t instanceof zO&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce(((e,n,r)=>e&&GO(n,t.filters[r])),!0)}(e,t):void fR()}function KO(e,t){const n=e.filters.concat(t);return zO.create(n,e.op)}function YO(e){return e instanceof VO?function(e){return`${e.field.canonicalString()} ${e.op} ${vO(e.value)}`}(e):e instanceof zO?function(e){return e.op.toString()+" {"+e.getFilters().map(YO).join(" ,")+"}"}(e):"Filter"}class XO extends VO{constructor(e,t,n){super(e,t,n),this.key=BR.fromName(n.referenceValue)}matches(e){const t=BR.comparator(e.key,this.key);return this.matchesComparison(t)}}class QO extends VO{constructor(e,t){super(e,"in",t),this.keys=ZO(0,t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class JO extends VO{constructor(e,t){super(e,"not-in",t),this.keys=ZO(0,t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ZO(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((e=>BR.fromName(e.referenceValue)))}class eP extends VO{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return wO(t)&&fO(t.arrayValue,this.value)}}class tP extends VO{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&fO(this.value.arrayValue,t)}}class nP extends VO{constructor(e,t){super(e,"not-in",t)}matches(e){if(fO(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!fO(this.value.arrayValue,t)}}class rP extends VO{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!wO(t)||!t.arrayValue.values)&&t.arrayValue.values.some((e=>fO(this.value.arrayValue,e)))}}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class iP{constructor(e,t=null,n=[],r=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=a,this.ce=null}}function oP(e,t=null,n=[],r=[],i=null,o=null,a=null){return new iP(e,t,n,r,i,o,a)}function aP(e){const t=gR(e);if(null===t.ce){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map((e=>HO(e))).join(","),e+="|ob:",e+=t.orderBy.map((e=>function(e){return e.field.canonicalString()+e.dir}(e))).join(","),dD(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((e=>vO(e))).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((e=>vO(e))).join(",")),t.ce=e}return t.ce}function sP(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!jO(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!GO(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!MO(e.startAt,t.startAt)&&MO(e.endAt,t.endAt)}function lP(e){return BR.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function uP(e,t){return e.filters.filter((e=>e instanceof VO&&e.field.isEqual(t)))}function cP(e,t,n){let r=dO,i=!0;for(const o of uP(e,t)){let e=dO,t=!0;switch(o.op){case"<":case"<=":e=SO(o.value);break;case"==":case"in":case">=":e=o.value;break;case">":e=o.value,t=!1;break;case"!=":case"not-in":e=dO}TO({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];TO({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function dP(e,t,n){let r=cO,i=!0;for(const o of uP(e,t)){let e=cO,t=!0;switch(o.op){case">=":case">":e=NO(o.value),t=!1;break;case"==":case"in":case"<=":e=o.value;break;case"<":e=o.value,t=!1;break;case"!=":case"not-in":e=cO}AO({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let o=0;o<e.orderBy.length;++o)if(e.orderBy[o].field.isEqual(t)){const e=n.position[o];AO({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class hP{constructor(e,t=null,n=[],r=[],i=null,o="F",a=null,s=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=s,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function pP(e,t,n,r,i,o,a,s){return new hP(e,t,n,r,i,o,a,s)}function fP(e){return new hP(e)}function mP(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function gP(e){return null!==e.collectionGroup}function vP(e){const t=gR(e);if(null===t.le){t.le=[];const e=new Set;for(const i of t.explicitOrderBy)t.le.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new YD(jR.comparator);return e.filters.forEach((e=>{e.getFlattenedFilters().forEach((e=>{e.isInequality()&&(t=t.add(e.field))}))})),t}(t);r.forEach((r=>{e.has(r.canonicalString())||r.isKeyField()||t.le.push(new FO(r,n))})),e.has(jR.keyField().canonicalString())||t.le.push(new FO(jR.keyField(),n))}return t.le}function yP(e){const t=gR(e);return t.he||(t.he=function(e,t){if("F"===e.limitType)return oP(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map((e=>{const t="desc"===e.dir?"asc":"desc";return new FO(e.field,t)}));const n=e.endAt?new PO(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new PO(e.startAt.position,e.startAt.inclusive):null;return oP(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}(t,vP(e))),t.he}function bP(e,t){const n=e.filters.concat([t]);return new hP(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function xP(e,t,n){return new hP(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function wP(e,t){return sP(yP(e),yP(t))&&e.limitType===t.limitType}function kP(e){return`${aP(yP(e))}|lt:${e.limitType}`}function _P(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map((e=>YO(e))).join(", ")}]`),dD(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map((e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e))).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((e=>vO(e))).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((e=>vO(e))).join(",")),`Target(${t})`}(yP(e))}; limitType=${e.limitType})`}function EP(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):BR.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of vP(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=LO(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,vP(e),t)||e.endAt&&!function(e,t,n){const r=LO(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,vP(e),t))}(e,t)}function CP(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function IP(e){return(t,n)=>{let r=!1;for(const i of vP(e)){const e=SP(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function SP(e,t,n){const r=e.field.isKeyField()?BR.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?mO(r,i):fR()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return fR()}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class NP{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){qD(this.inner,((t,n)=>{for(const[r,i]of n)e(r,i)}))}isEmpty(){return WD(this.inner)}size(){return this.innerSize}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const TP=new HD(BR.comparator);function AP(){return TP}const RP=new HD(BR.comparator);function DP(...e){let t=RP;for(const n of e)t=t.insert(n.key,n);return t}function OP(e){let t=RP;return e.forEach(((e,n)=>t=t.insert(e,n.overlayedDocument))),t}function PP(){return MP()}function LP(){return MP()}function MP(){return new NP((e=>e.toString()),((e,t)=>e.isEqual(t)))}const FP=new HD(BR.comparator),jP=new YD(BR.comparator);function BP(...e){let t=jP;for(const n of e)t=t.add(n);return t}const VP=new YD(AR);function zP(){return VP}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function UP(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:hD(t)?"-0":t}}function $P(e){return{integerValue:""+e}}function qP(e,t){return pD(t)?$P(t):UP(e,t)}
/**
             * @license
             * Copyright 2018 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class WP{constructor(){this._=void 0}}function HP(e,t,n){return e instanceof YP?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&oO(t)&&(t=aO(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof XP?QP(e,t):e instanceof JP?ZP(e,t):function(e,t){const n=KP(e,t),r=tL(n)+tL(e.Ie);return xO(n)&&xO(e.Ie)?$P(r):UP(e.serializer,r)}(e,t)}function GP(e,t,n){return e instanceof XP?QP(e,t):e instanceof JP?ZP(e,t):n}function KP(e,t){return e instanceof eL?function(e){return xO(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class YP extends WP{}class XP extends WP{constructor(e){super(),this.elements=e}}function QP(e,t){const n=nL(t);for(const r of e.elements)n.some((e=>pO(e,r)))||n.push(r);return{arrayValue:{values:n}}}class JP extends WP{constructor(e){super(),this.elements=e}}function ZP(e,t){let n=nL(t);for(const r of e.elements)n=n.filter((e=>!pO(e,r)));return{arrayValue:{values:n}}}class eL extends WP{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function tL(e){return rO(e.integerValue||e.doubleValue)}function nL(e){return wO(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class rL{constructor(e,t){this.field=e,this.transform=t}}class iL{constructor(e,t){this.version=e,this.transformResults=t}}class oL{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new oL}static exists(e){return new oL(void 0,e)}static updateTime(e){return new oL(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function aL(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class sL{}function lL(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new yL(e.key,oL.none()):new pL(e.key,e.data,oL.none());{const n=e.data,r=RO.empty();let i=new YD(jR.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new fL(e.key,r,new JD(i.toArray()),oL.none())}}function uL(e,t,n){e instanceof pL?function(e,t,n){const r=e.value.clone(),i=gL(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof fL?function(e,t,n){if(!aL(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=gL(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(mL(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function cL(e,t,n,r){return e instanceof pL?function(e,t,n,r){if(!aL(e.precondition,t))return n;const i=e.value.clone(),o=vL(e.fieldTransforms,r,t);return i.setAll(o),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof fL?function(e,t,n,r){if(!aL(e.precondition,t))return n;const i=vL(e.fieldTransforms,r,t),o=t.data;return o.setAll(mL(e)),o.setAll(i),t.convertToFoundDocument(t.version,o).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((e=>e.field)))}(e,t,n,r):function(e,t,n){return aL(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function dL(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=KP(r.transform,e||null);null!=i&&(null===n&&(n=RO.empty()),n.set(r.field,i))}return n||null}function hL(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&RR(e,t,((e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof XP&&t instanceof XP||e instanceof JP&&t instanceof JP?RR(e.elements,t.elements,pO):e instanceof eL&&t instanceof eL?pO(e.Ie,t.Ie):e instanceof YP&&t instanceof YP}(e.transform,t.transform)}(e,t)))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class pL extends sL{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class fL extends sL{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function mL(e){const t=new Map;return e.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}})),t}function gL(e,t,n){const r=new Map;mR(e.length===n.length);for(let i=0;i<n.length;i++){const o=e[i],a=o.transform,s=t.data.field(o.field);r.set(o.field,GP(a,s,n[i]))}return r}function vL(e,t,n){const r=new Map;for(const i of e){const e=i.transform,o=n.data.field(i.field);r.set(i.field,HP(e,o,t))}return r}class yL extends sL{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class bL extends sL{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class xL{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&uL(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=cL(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=cL(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=LP();return this.mutations.forEach((r=>{const i=e.get(r.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=t.has(r.key)?null:a;const s=lL(o,a);null!==s&&n.set(r.key,s),o.isValidDocument()||o.convertToNoDocument(PR.min())})),n}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),BP())}isEqual(e){return this.batchId===e.batchId&&RR(this.mutations,e.mutations,((e,t)=>hL(e,t)))&&RR(this.baseMutations,e.baseMutations,((e,t)=>hL(e,t)))}}class wL{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){mR(e.mutations.length===n.length);let r=FP;const i=e.mutations;for(let o=0;o<i.length;o++)r=r.insert(i[o].key,n[o].version);return new wL(e,t,n,r)}}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class kL{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class _L{constructor(e,t){this.count=e,this.unchangedNames=t}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */var EL,CL;function IL(e){switch(e){default:return fR();case vR.CANCELLED:case vR.UNKNOWN:case vR.DEADLINE_EXCEEDED:case vR.RESOURCE_EXHAUSTED:case vR.INTERNAL:case vR.UNAVAILABLE:case vR.UNAUTHENTICATED:return!1;case vR.INVALID_ARGUMENT:case vR.NOT_FOUND:case vR.ALREADY_EXISTS:case vR.PERMISSION_DENIED:case vR.FAILED_PRECONDITION:case vR.ABORTED:case vR.OUT_OF_RANGE:case vR.UNIMPLEMENTED:case vR.DATA_LOSS:return!0}}function SL(e){if(void 0===e)return dR("GRPC error has no .code"),vR.UNKNOWN;switch(e){case EL.OK:return vR.OK;case EL.CANCELLED:return vR.CANCELLED;case EL.UNKNOWN:return vR.UNKNOWN;case EL.DEADLINE_EXCEEDED:return vR.DEADLINE_EXCEEDED;case EL.RESOURCE_EXHAUSTED:return vR.RESOURCE_EXHAUSTED;case EL.INTERNAL:return vR.INTERNAL;case EL.UNAVAILABLE:return vR.UNAVAILABLE;case EL.UNAUTHENTICATED:return vR.UNAUTHENTICATED;case EL.INVALID_ARGUMENT:return vR.INVALID_ARGUMENT;case EL.NOT_FOUND:return vR.NOT_FOUND;case EL.ALREADY_EXISTS:return vR.ALREADY_EXISTS;case EL.PERMISSION_DENIED:return vR.PERMISSION_DENIED;case EL.FAILED_PRECONDITION:return vR.FAILED_PRECONDITION;case EL.ABORTED:return vR.ABORTED;case EL.OUT_OF_RANGE:return vR.OUT_OF_RANGE;case EL.UNIMPLEMENTED:return vR.UNIMPLEMENTED;case EL.DATA_LOSS:return vR.DATA_LOSS;default:return fR()}}
/**
             * @license
             * Copyright 2023 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function NL(){return new TextEncoder}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(CL=EL||(EL={}))[CL.OK=0]="OK",CL[CL.CANCELLED=1]="CANCELLED",CL[CL.UNKNOWN=2]="UNKNOWN",CL[CL.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",CL[CL.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",CL[CL.NOT_FOUND=5]="NOT_FOUND",CL[CL.ALREADY_EXISTS=6]="ALREADY_EXISTS",CL[CL.PERMISSION_DENIED=7]="PERMISSION_DENIED",CL[CL.UNAUTHENTICATED=16]="UNAUTHENTICATED",CL[CL.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",CL[CL.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",CL[CL.ABORTED=10]="ABORTED",CL[CL.OUT_OF_RANGE=11]="OUT_OF_RANGE",CL[CL.UNIMPLEMENTED=12]="UNIMPLEMENTED",CL[CL.INTERNAL=13]="INTERNAL",CL[CL.UNAVAILABLE=14]="UNAVAILABLE",CL[CL.DATA_LOSS=15]="DATA_LOSS";const TL=new iR([4294967295,4294967295],0);function AL(e){const t=NL().encode(e),n=new rR;return n.update(t),new Uint8Array(n.digest())}function RL(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),o=t.getUint32(12,!0);return[new iR([n,r],0),new iR([i,o],0)]}class DL{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new OL(`Invalid padding: ${t}`);if(n<0)throw new OL(`Invalid hash count: ${n}`);if(e.length>0&&0===this.hashCount)throw new OL(`Invalid hash count: ${n}`);if(0===e.length&&0!==t)throw new OL(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ee=iR.fromNumber(this.Te)}de(e,t,n){let r=e.add(t.multiply(iR.fromNumber(n)));return 1===r.compare(TL)&&(r=new iR([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ee).toNumber()}Ae(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=AL(e),[n,r]=RL(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);if(!this.Ae(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new DL(i,r,t);return n.forEach((e=>o.insert(e))),o}insert(e){if(0===this.Te)return;const t=AL(e),[n,r]=RL(t);for(let i=0;i<this.hashCount;i++){const e=this.de(n,r,i);this.Re(e)}}Re(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class OL extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class PL{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,LL.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new PL(PR.min(),r,new HD(AR),AP(),BP())}}class LL{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new LL(n,t,BP(),BP(),BP())}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class ML{constructor(e,t,n,r){this.Ve=e,this.removedTargetIds=t,this.key=n,this.me=r}}class FL{constructor(e,t){this.targetId=e,this.fe=t}}class jL{constructor(e,t,n=eO.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class BL{constructor(){this.ge=0,this.pe=UL(),this.ye=eO.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=BP(),t=BP(),n=BP();return this.pe.forEach(((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:fR()}})),new LL(this.ye,this.we,e,t,n)}Fe(){this.Se=!1,this.pe=UL()}Me(e,t){this.Se=!0,this.pe=this.pe.insert(e,t)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,mR(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class VL{constructor(e){this.Le=e,this.ke=new Map,this.qe=AP(),this.Qe=zL(),this.Ke=new HD(AR)}$e(e){for(const t of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(t,e.me):this.We(t,e.key,e.me);for(const t of e.removedTargetIds)this.We(t,e.key,e.me)}Ge(e){this.forEachTarget(e,(t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.Ce(e.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(e.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(t);break;case 3:this.je(t)&&(n.Be(),n.Ce(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.Ce(e.resumeToken));break;default:fR()}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ke.forEach(((e,n)=>{this.je(n)&&t(n)}))}Je(e){const t=e.targetId,n=e.fe.count,r=this.Ye(t);if(r){const i=r.target;if(lP(i))if(0===n){const e=new BR(i.path);this.We(t,e,OO.newNoDocument(e,PR.min()))}else mR(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}}}}}Xe(e){const t=e.fe.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let o,a;try{o=iO(n).toUint8Array()}catch(e){if(e instanceof ZD)return hR("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new DL(o,r,i)}catch(e){return hR(e instanceof OL?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Te?null:a}et(e,t,n){return t.fe.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach((n=>{const i=this.Le.nt(),o=`projects/${i.projectId}/databases/${i.database}/documents/${n.path.canonicalString()}`;e.mightContain(o)||(this.We(t,n,null),r++)})),r}it(e){const t=new Map;this.ke.forEach(((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&lP(i.target)){const t=new BR(i.target.path);null!==this.qe.get(t)||this.st(r,t)||this.We(r,t,OO.newNoDocument(t,e))}n.De&&(t.set(r,n.ve()),n.Fe())}}));let n=BP();this.Qe.forEach(((e,t)=>{let r=!0;t.forEachWhile((e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)})),r&&(n=n.add(e))})),this.qe.forEach(((t,n)=>n.setReadTime(e)));const r=new PL(e,t,this.Ke,this.qe,n);return this.qe=AP(),this.Qe=zL(),this.Ke=new HD(AR),r}Ue(e,t){if(!this.je(e))return;const n=this.st(e,t.key)?2:0;this.ze(e).Me(t.key,n),this.qe=this.qe.insert(t.key,t),this.Qe=this.Qe.insert(t.key,this.ot(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.st(e,t)?r.Me(t,1):r.xe(t),this.Qe=this.Qe.insert(t,this.ot(t).delete(e)),n&&(this.qe=this.qe.insert(t,n))}removeTarget(e){this.ke.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let t=this.ke.get(e);return t||(t=new BL,this.ke.set(e,t)),t}ot(e){let t=this.Qe.get(e);return t||(t=new YD(AR),this.Qe=this.Qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||cR("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.ke.get(e);return t&&t.be?null:this.Le._t(e)}He(e){this.ke.set(e,new BL),this.Le.getRemoteKeysForTarget(e).forEach((t=>{this.We(e,t,null)}))}st(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function zL(){return new HD(BR.comparator)}function UL(){return new HD(BR.comparator)}const $L={asc:"ASCENDING",desc:"DESCENDING"},qL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WL={and:"AND",or:"OR"};class HL{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function GL(e,t){return e.useProto3Json||dD(t)?t:{value:t}}function KL(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function YL(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function XL(e,t){return KL(e,t.toTimestamp())}function QL(e){return mR(!!e),PR.fromTimestamp(function(e){const t=nO(e);return new OR(t.seconds,t.nanos)}(e))}function JL(e,t){return ZL(e,t).canonicalString()}function ZL(e,t){const n=function(e){return new MR(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function eM(e){const t=MR.fromString(e);return mR(kM(t)),t}function tM(e,t){return JL(e.databaseId,t.path)}function nM(e,t){const n=eM(t);if(n.get(1)!==e.databaseId.projectId)throw new yR(vR.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new yR(vR.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new BR(aM(n))}function rM(e,t){return JL(e.databaseId,t)}function iM(e){const t=eM(e);return 4===t.length?MR.emptyPath():aM(t)}function oM(e){return new MR(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function aM(e){return mR(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function sM(e,t,n){return{name:tM(e,t),fields:n.value.mapValue.fields}}function lM(e,t,n){const r=nM(e,t.name),i=QL(t.updateTime),o=t.createTime?QL(t.createTime):PR.min(),a=new RO({mapValue:{fields:t.fields}}),s=OO.newFoundDocument(r,i,o,a);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function uM(e,t){let n;if(t instanceof pL)n={update:sM(e,t.key,t.value)};else if(t instanceof yL)n={delete:tM(e,t.key)};else if(t instanceof fL)n={update:sM(e,t.key,t.data),updateMask:wM(t.fieldMask)};else{if(!(t instanceof bL))return fR();n={verify:tM(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((e=>function(e,t){const n=t.transform;if(n instanceof YP)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof XP)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof JP)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof eL)return{fieldPath:t.field.canonicalString(),increment:n.Ie};throw fR()}(0,e)))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:XL(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:fR()}(e,t.precondition)),n}function cM(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?oL.updateTime(QL(e.updateTime)):void 0!==e.exists?oL.exists(e.exists):oL.none()}(t.currentDocument):oL.none(),r=t.updateTransforms?t.updateTransforms.map((t=>function(e,t){let n=null;if("setToServerValue"in t)mR("REQUEST_TIME"===t.setToServerValue),n=new YP;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new XP(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new JP(e)}else"increment"in t?n=new eL(e,t.increment):fR();const r=jR.fromServerFormat(t.fieldPath);return new rL(r,n)}(e,t))):[];if(t.update){t.update.name;const i=nM(e,t.update.name),o=new RO({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new JD(t.map((e=>jR.fromServerFormat(e))))}(t.updateMask);return new fL(i,o,e,n,r)}return new pL(i,o,n,r)}if(t.delete){const r=nM(e,t.delete);return new yL(r,n)}if(t.verify){const r=nM(e,t.verify);return new bL(r,n)}return fR()}function dM(e,t){return{documents:[rM(e,t.path)]}}function hM(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rM(e,i);const o=function(e){if(0!==e.length)return xM(zO.create(e,"and"))}(t.filters);o&&(n.structuredQuery.where=o);const a=function(e){if(0!==e.length)return e.map((e=>function(e){return{field:yM(e.field),direction:mM(e.dir)}}(e)))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const s=GL(e,t.limit);return null!==s&&(n.structuredQuery.limit=s),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ut:n,parent:i}}function pM(e){let t=iM(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){mR(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let o=[];n.where&&(o=function(e){const t=fM(e);return t instanceof zO&&qO(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map((e=>function(e){return new FO(bM(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)))}(n.orderBy));let s=null;n.limit&&(s=function(e){let t;return t="object"==typeof e?e.value:e,dD(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new PO(n,t)}(n.startAt));let u=null;return n.endAt&&(u=function(e){const t=!e.before,n=e.values||[];return new PO(n,t)}(n.endAt)),pP(t,i,a,o,s,"F",l,u)}function fM(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=bM(e.unaryFilter.field);return VO.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=bM(e.unaryFilter.field);return VO.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=bM(e.unaryFilter.field);return VO.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=bM(e.unaryFilter.field);return VO.create(i,"!=",{nullValue:"NULL_VALUE"});default:return fR()}}(e):void 0!==e.fieldFilter?function(e){return VO.create(bM(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fR()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return zO.create(e.compositeFilter.filters.map((e=>fM(e))),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return fR()}}(e.compositeFilter.op))}(e):fR()}function mM(e){return $L[e]}function gM(e){return qL[e]}function vM(e){return WL[e]}function yM(e){return{fieldPath:e.canonicalString()}}function bM(e){return jR.fromServerFormat(e.fieldPath)}function xM(e){return e instanceof VO?function(e){if("=="===e.op){if(_O(e.value))return{unaryFilter:{field:yM(e.field),op:"IS_NAN"}};if(kO(e.value))return{unaryFilter:{field:yM(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_O(e.value))return{unaryFilter:{field:yM(e.field),op:"IS_NOT_NAN"}};if(kO(e.value))return{unaryFilter:{field:yM(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yM(e.field),op:gM(e.op),value:e.value}}}(e):e instanceof zO?function(e){const t=e.getFilters().map((e=>xM(e)));return 1===t.length?t[0]:{compositeFilter:{op:vM(e.op),filters:t}}}(e):fR()}function wM(e){const t=[];return e.fields.forEach((e=>t.push(e.canonicalString()))),{fieldPaths:t}}function kM(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class _M{constructor(e,t,n,r,i=PR.min(),o=PR.min(),a=eO.EMPTY_BYTE_STRING,s=null){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=s}withSequenceNumber(e){return new _M(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _M(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _M(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _M(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class EM{constructor(e){this.ct=e}}function CM(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:IM(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:tM(e,t.key),fields:t.data.value.mapValue.fields,updateTime:KL(e,t.version.toTimestamp()),createTime:KL(e,t.createTime.toTimestamp())}}(e.ct,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:SM(t.version)};else{if(!t.isUnknownDocument())return fR();r.unknownDocument={path:n.path.toArray(),version:SM(t.version)}}return r}function IM(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function SM(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function NM(e){const t=new OR(e.seconds,e.nanoseconds);return PR.fromTimestamp(t)}function TM(e,t){const n=(t.baseMutations||[]).map((t=>cM(e.ct,t)));for(let o=0;o<t.mutations.length-1;++o){const e=t.mutations[o];if(o+1<t.mutations.length&&void 0!==t.mutations[o+1].transform){const n=t.mutations[o+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(o+1,1),++o}}const r=t.mutations.map((t=>cM(e.ct,t))),i=OR.fromMillis(t.localWriteTimeMs);return new xL(t.batchId,i,n,r)}function AM(e){const t=NM(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?NM(e.lastLimboFreeSnapshotVersion):PR.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return mR(1===e.documents.length),yP(fP(iM(e.documents[0])))}(e.query):function(e){return yP(pM(e))}(e.query),new _M(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,eO.fromBase64String(e.resumeToken))}function RM(e,t){const n=SM(t.snapshotVersion),r=SM(t.lastLimboFreeSnapshotVersion);let i;i=lP(t.target)?dM(e.ct,t.target):hM(e.ct,t.target).ut;const o=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:aP(t.target),readTime:n,resumeToken:o,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function DM(e){const t=pM({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?xP(t,t.limit,"L"):t}function OM(e,t){return new kL(t.largestBatchId,cM(e.ct,t.overlayMutation))}function PM(e,t){const n=t.path.lastSegment();return[e,fD(t.path.popLast()),n]}function LM(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:SM(r.readTime),documentKey:fD(r.documentKey.path),largestBatchId:r.largestBatchId}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class MM{getBundleMetadata(e,t){return FM(e).get(t).next((e=>{if(e)return function(e){return{id:e.bundleId,createTime:NM(e.createTime),version:e.version}}(e)}))}saveBundleMetadata(e,t){return FM(e).put(function(e){return{bundleId:e.id,createTime:SM(QL(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return jM(e).get(t).next((e=>{if(e)return function(e){return{name:e.name,query:DM(e.bundledQuery),readTime:NM(e.readTime)}}(e)}))}saveNamedQuery(e,t){return jM(e).put(function(e){return{name:e.name,readTime:SM(QL(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function FM(e){return UD(e,"bundles")}function jM(e){return UD(e,"namedQueries")}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class BM{constructor(e,t){this.serializer=e,this.userId=t}static lt(e,t){const n=t.uid||"";return new BM(e,n)}getOverlay(e,t){return VM(e).get(PM(this.userId,t)).next((e=>e?OM(this.serializer,e):null))}getOverlays(e,t){const n=PP();return JR.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){const r=[];return n.forEach(((n,i)=>{const o=new kL(t,i);r.push(this.ht(e,o))})),JR.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach((e=>r.add(fD(e.getCollectionPath()))));const i=[];return r.forEach((t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(VM(e).H("collectionPathOverlayIndex",r))})),JR.waitFor(i)}getOverlaysForCollection(e,t,n){const r=PP(),i=fD(t),o=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return VM(e).W("collectionPathOverlayIndex",o).next((e=>{for(const t of e){const e=OM(this.serializer,t);r.set(e.getKey(),e)}return r}))}getOverlaysForCollectionGroup(e,t,n,r){const i=PP();let o;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return VM(e).Y({index:"collectionGroupOverlayIndex",range:a},((e,t,n)=>{const a=OM(this.serializer,t);i.size()<r||a.largestBatchId===o?(i.set(a.getKey(),a),o=a.largestBatchId):n.done()})).next((()=>i))}ht(e,t){return VM(e).put(function(e,t,n){const[r,i,o]=PM(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:o,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:uM(e.ct,n.mutation)}}(this.serializer,this.userId,t))}}function VM(e){return UD(e,"documentOverlays")}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class zM{constructor(){}Pt(e,t){this.It(e,t),t.Tt()}It(e,t){if("nullValue"in e)this.Et(t,5);else if("booleanValue"in e)this.Et(t,10),t.dt(e.booleanValue?1:0);else if("integerValue"in e)this.Et(t,15),t.dt(rO(e.integerValue));else if("doubleValue"in e){const n=rO(e.doubleValue);isNaN(n)?this.Et(t,13):(this.Et(t,15),hD(n)?t.dt(0):t.dt(n))}else if("timestampValue"in e){const n=e.timestampValue;this.Et(t,20),"string"==typeof n?t.At(n):(t.At(`${n.seconds||""}`),t.dt(n.nanos||0))}else if("stringValue"in e)this.Rt(e.stringValue,t),this.Vt(t);else if("bytesValue"in e)this.Et(t,30),t.ft(iO(e.bytesValue)),this.Vt(t);else if("referenceValue"in e)this.gt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Et(t,45),t.dt(n.latitude||0),t.dt(n.longitude||0)}else"mapValue"in e?IO(e)?this.Et(t,Number.MAX_SAFE_INTEGER):(this.yt(e.mapValue,t),this.Vt(t)):"arrayValue"in e?(this.wt(e.arrayValue,t),this.Vt(t)):fR()}Rt(e,t){this.Et(t,25),this.St(e,t)}St(e,t){t.At(e)}yt(e,t){const n=e.fields||{};this.Et(t,55);for(const r of Object.keys(n))this.Rt(r,t),this.It(n[r],t)}wt(e,t){const n=e.values||[];this.Et(t,50);for(const r of n)this.It(r,t)}gt(e,t){this.Et(t,37),BR.fromName(e).path.forEach((e=>{this.Et(t,60),this.St(e,t)}))}Et(e,t){e.dt(t)}Vt(e){e.dt(2)}}function UM(e){if(0===e)return 8;let t=0;return!(e>>4)&&(t+=4,e<<=4),!(e>>6)&&(t+=2,e<<=2),!(e>>7)&&(t+=1),t}function $M(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=UM(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}zM.bt=new zM;class qM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Ct(n.value),n=t.next();this.vt()}Ft(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Mt(n.value),n=t.next();this.xt()}Ot(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Ct(e);else if(e<2048)this.Ct(960|e>>>6),this.Ct(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Ct(480|e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e);else{const e=t.codePointAt(0);this.Ct(240|e>>>18),this.Ct(128|63&e>>>12),this.Ct(128|63&e>>>6),this.Ct(128|63&e)}}this.vt()}Nt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Mt(e);else if(e<2048)this.Mt(960|e>>>6),this.Mt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Mt(480|e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e);else{const e=t.codePointAt(0);this.Mt(240|e>>>18),this.Mt(128|63&e>>>12),this.Mt(128|63&e>>>6),this.Mt(128|63&e)}}this.xt()}Bt(e){const t=this.Lt(e),n=$M(t);this.kt(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}qt(e){const t=this.Lt(e),n=$M(t);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(e){this.kt(e.length),this.buffer.set(e,this.position),this.position+=e.length}Wt(){return this.buffer.slice(0,this.position)}Lt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=!!(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}Ct(e){const t=255&e;0===t?(this.Kt(0),this.Kt(255)):255===t?(this.Kt(255),this.Kt(0)):this.Kt(t)}Mt(e){const t=255&e;0===t?(this.Ut(0),this.Ut(255)):255===t?(this.Ut(255),this.Ut(0)):this.Ut(e)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(e){this.kt(1),this.buffer[this.position++]=e}Ut(e){this.kt(1),this.buffer[this.position++]=~e}kt(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class WM{constructor(e){this.Gt=e}ft(e){this.Gt.Dt(e)}At(e){this.Gt.Ot(e)}dt(e){this.Gt.Bt(e)}Tt(){this.Gt.Qt()}}class HM{constructor(e){this.Gt=e}ft(e){this.Gt.Ft(e)}At(e){this.Gt.Nt(e)}dt(e){this.Gt.qt(e)}Tt(){this.Gt.$t()}}class GM{constructor(){this.Gt=new qM,this.zt=new WM(this.Gt),this.jt=new HM(this.Gt)}seed(e){this.Gt.seed(e)}Ht(e){return 0===e?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class KM{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}Jt(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new KM(this.indexId,this.documentKey,this.arrayValue,n)}}function YM(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=XM(e.arrayValue,t.arrayValue),0!==n?n:(n=XM(e.directionalValue,t.directionalValue),0!==n?n:BR.comparator(e.documentKey,t.documentKey)))}function XM(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class QM{constructor(e){this.Yt=new YD(((e,t)=>jR.comparator(e.field,t.field))),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Zt=e.orderBy,this.Xt=[];for(const t of e.filters){const e=t;e.isInequality()?this.Yt=this.Yt.add(e):this.Xt.push(e)}}get en(){return this.Yt.size>1}tn(e){if(mR(e.collectionGroup===this.collectionId),this.en)return!1;const t=zR(e);if(void 0!==t&&!this.nn(t))return!1;const n=UR(e);let r=new Set,i=0,o=0;for(;i<n.length&&this.nn(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.Yt.size>0){const e=this.Yt.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.rn(e,t)||!this.sn(this.Zt[o++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(o>=this.Zt.length||!this.sn(this.Zt[o++],e))return!1}return!0}on(){if(this.en)return null;let e=new YD(jR.comparator);const t=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new $R(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new $R(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new $R(n.field,"asc"===n.dir?0:1)));return new VR(VR.UNKNOWN_ID,this.collectionId,t,qR.empty())}nn(e){for(const t of this.Xt)if(this.rn(t,e))return!0;return!1}rn(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function JM(e){var t,n;if(mR(e instanceof VO||e instanceof zO),e instanceof VO){if(e instanceof tP){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((t=>VO.create(e.field,"==",t))))||[];return zO.create(r,"or")}return e}const r=e.filters.map((e=>JM(e)));return zO.create(r,e.op)}function ZM(e){if(0===e.getFilters().length)return[];const t=rF(JM(e));return mR(nF(t)),eF(t)||tF(t)?[t]:t.getFilters()}function eF(e){return e instanceof VO}function tF(e){return e instanceof zO&&qO(e)}function nF(e){return eF(e)||tF(e)||function(e){if(e instanceof zO&&$O(e)){for(const t of e.getFilters())if(!eF(t)&&!tF(t))return!1;return!0}return!1}(e)}function rF(e){if(mR(e instanceof VO||e instanceof zO),e instanceof VO)return e;if(1===e.filters.length)return rF(e.filters[0]);const t=e.filters.map((e=>rF(e)));let n=zO.create(t,e.op);return n=aF(n),nF(n)?n:(mR(n instanceof zO),mR(UO(n)),mR(n.filters.length>1),n.filters.reduce(((e,t)=>iF(e,t))))}function iF(e,t){let n;return mR(e instanceof VO||e instanceof zO),mR(t instanceof VO||t instanceof zO),n=e instanceof VO?t instanceof VO?function(e,t){return zO.create([e,t],"and")}(e,t):oF(e,t):t instanceof VO?oF(t,e):function(e,t){if(mR(e.filters.length>0&&t.filters.length>0),UO(e)&&UO(t))return KO(e,t.getFilters());const n=$O(e)?e:t,r=$O(e)?t:e,i=n.filters.map((e=>iF(e,r)));return zO.create(i,"or")}(e,t),aF(n)}function oF(e,t){if(UO(t))return KO(t,e.getFilters());{const n=t.filters.map((t=>iF(e,t)));return zO.create(n,"or")}}function aF(e){if(mR(e instanceof VO||e instanceof zO),e instanceof VO)return e;const t=e.getFilters();if(1===t.length)return aF(t[0]);if(WO(e))return e;const n=t.map((e=>aF(e))),r=[];return n.forEach((t=>{t instanceof VO?r.push(t):t instanceof zO&&(t.op===e.op?r.push(...t.filters):r.push(t))})),1===r.length?r[0]:zO.create(r,e.op)
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}class sF{constructor(){this._n=new lF}addToCollectionParentIndex(e,t){return this._n.add(t),JR.resolve()}getCollectionParents(e,t){return JR.resolve(this._n.getEntries(t))}addFieldIndex(e,t){return JR.resolve()}deleteFieldIndex(e,t){return JR.resolve()}deleteAllFieldIndexes(e){return JR.resolve()}createTargetIndexes(e,t){return JR.resolve()}getDocumentsMatchingTarget(e,t){return JR.resolve(null)}getIndexType(e,t){return JR.resolve(0)}getFieldIndexes(e,t){return JR.resolve([])}getNextCollectionGroupToUpdate(e){return JR.resolve(null)}getMinOffset(e,t){return JR.resolve(GR.min())}getMinOffsetFromCollectionGroup(e,t){return JR.resolve(GR.min())}updateCollectionGroup(e,t,n){return JR.resolve()}updateIndexEntries(e,t){return JR.resolve()}}class lF{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new YD(MR.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new YD(MR.comparator)).toArray()}}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const uF=new Uint8Array(0);class cF{constructor(e,t){this.databaseId=t,this.an=new lF,this.un=new NP((e=>aP(e)),((e,t)=>sP(e,t))),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.an.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener((()=>{this.an.add(t)}));const i={collectionId:n,parent:fD(r)};return dF(e).put(i)}return JR.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[DR(t),""],!1,!0);return dF(e).W(r).next((e=>{for(const r of e){if(r.collectionId!==t)break;n.push(vD(r.parent))}return n}))}addFieldIndex(e,t){const n=pF(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((e=>[e.fieldPath.canonicalString(),e.kind]))}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=fF(e);return i.next((e=>{n.put(LM(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))}))}return i.next()}deleteFieldIndex(e,t){const n=pF(e),r=fF(e),i=hF(e);return n.delete(t.indexId).next((()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))).next((()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))))}deleteAllFieldIndexes(e){const t=pF(e),n=hF(e),r=fF(e);return t.H().next((()=>n.H())).next((()=>r.H()))}createTargetIndexes(e,t){return JR.forEach(this.cn(t),(t=>this.getIndexType(e,t).next((n=>{if(0===n||1===n){const n=new QM(t).on();if(null!=n)return this.addFieldIndex(e,n)}}))))}getDocumentsMatchingTarget(e,t){const n=hF(e);let r=!0;const i=new Map;return JR.forEach(this.cn(t),(t=>this.ln(e,t).next((e=>{r&&(r=!!e),i.set(t,e)})))).next((()=>{if(r){let e=BP();const r=[];return JR.forEach(i,((i,o)=>{cR("IndexedDbIndexManager",`Using index ${function(e){return`id=${e.indexId}|cg=${e.collectionGroup}|f=${e.fields.map((e=>`${e.fieldPath}:${e.kind}`)).join(",")}`}(i)} to execute ${aP(t)}`);const a=function(e,t){const n=zR(t);if(void 0===n)return null;for(const r of uP(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(o,i),s=function(e,t){const n=new Map;for(const r of UR(t))for(const t of uP(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(o,i),l=function(e,t){const n=[];let r=!0;for(const i of UR(t)){const t=0===i.kind?cP(e,i.fieldPath,e.startAt):dP(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new PO(n,r)}(o,i),u=function(e,t){const n=[];let r=!0;for(const i of UR(t)){const t=0===i.kind?dP(e,i.fieldPath,e.endAt):cP(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new PO(n,r)}(o,i),c=this.hn(i,o,l),d=this.hn(i,o,u),h=this.Pn(i,o,s),p=this.In(i.indexId,a,c,l.inclusive,d,u.inclusive,h);return JR.forEach(p,(i=>n.j(i,t.limit).next((t=>{t.forEach((t=>{const n=BR.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))}))}))))})).next((()=>r))}return JR.resolve(null)}))}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:ZM(zO.create(e.filters,"and")).map((t=>oP(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt))),this.un.set(e,t),t)}In(e,t,n,r,i,o,a){const s=(null!=t?t.length:1)*Math.max(n.length,i.length),l=s/(null!=t?t.length:1),u=[];for(let c=0;c<s;++c){const s=t?this.Tn(t[c/l]):uF,d=this.En(e,s,n[c%l],r),h=this.dn(e,s,i[c%l],o),p=a.map((t=>this.En(e,s,t,!0)));u.push(...this.createRange(d,h,p))}return u}En(e,t,n,r){const i=new KM(e,BR.empty(),t,n);return r?i:i.Jt()}dn(e,t,n,r){const i=new KM(e,BR.empty(),t,n);return r?i.Jt():i}ln(e,t){const n=new QM(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((e=>{let t=null;for(const r of e)n.tn(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t}))}getIndexType(e,t){let n=2;const r=this.cn(t);return JR.forEach(r,(t=>this.ln(e,t).next((e=>{e?0!==n&&e.fields.length<function(e){let t=new YD(jR.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})))).next((()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n))}An(e,t){const n=new GM;for(const r of UR(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Ht(r.kind);zM.bt.Pt(e,i)}return n.Wt()}Tn(e){const t=new GM;return zM.bt.Pt(e,t.Ht(0)),t.Wt()}Rn(e,t){const n=new GM;return zM.bt.Pt(bO(this.databaseId,t),n.Ht(function(e){const t=UR(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Wt()}Pn(e,t,n){if(null===n)return[];let r=[];r.push(new GM);let i=0;for(const o of UR(e)){const e=n[i++];for(const n of r)if(this.Vn(t,o.fieldPath)&&wO(e))r=this.mn(r,o,e);else{const t=n.Ht(o.kind);zM.bt.Pt(e,t)}}return this.fn(r)}hn(e,t,n){return this.Pn(e,t,n.position)}fn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Wt();return t}mn(e,t,n){const r=[...e],i=[];for(const o of n.arrayValue.values||[])for(const e of r){const n=new GM;n.seed(e.Wt()),zM.bt.Pt(o,n.Ht(t.kind)),i.push(n)}return i}Vn(e,t){return!!e.filters.find((e=>e instanceof VO&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)))}getFieldIndexes(e,t){const n=pF(e),r=fF(e);return(t?n.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.W()).next((e=>{const t=[];return JR.forEach(e,(e=>r.get([e.indexId,this.uid]).next((n=>{t.push(function(e,t){const n=t?new qR(t.sequenceNumber,new GR(NM(t.readTime),new BR(vD(t.documentKey)),t.largestBatchId)):qR.empty(),r=e.fields.map((([e,t])=>new $R(jR.fromServerFormat(e),t)));return new VR(e.indexId,e.collectionGroup,r,n)}(e,n))})))).next((()=>t))}))}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next((e=>0===e.length?null:(e.sort(((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:AR(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)))}updateCollectionGroup(e,t,n){const r=pF(e),i=fF(e);return this.gn(e).next((e=>r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((t=>JR.forEach(t,(t=>i.put(LM(t.indexId,this.uid,e,n))))))))}updateIndexEntries(e,t){const n=new Map;return JR.forEach(t,((t,r)=>{const i=n.get(t.collectionGroup);return(i?JR.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next((i=>(n.set(t.collectionGroup,i),JR.forEach(i,(n=>this.pn(e,t,n).next((t=>{const i=this.yn(r,n);return t.isEqual(i)?JR.resolve():this.wn(e,r,n,t,i)})))))))}))}Sn(e,t,n,r){return hF(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.Rn(n,t.key),documentKey:t.key.path.toArray()})}bn(e,t,n,r){return hF(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.Rn(n,t.key),t.key.path.toArray()])}pn(e,t,n){const r=hF(e);let i=new YD(YM);return r.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,t)])},((e,r)=>{i=i.add(new KM(n.indexId,t,r.arrayValue,r.directionalValue))})).next((()=>i))}yn(e,t){let n=new YD(YM);const r=this.An(t,e);if(null==r)return n;const i=zR(t);if(null!=i){const o=e.data.field(i.fieldPath);if(wO(o))for(const i of o.arrayValue.values||[])n=n.add(new KM(t.indexId,e.key,this.Tn(i),r))}else n=n.add(new KM(t.indexId,e.key,uF,r));return n}wn(e,t,n,r,i){cR("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const o=[];return function(e,t,n,r,i){const o=e.getIterator(),a=t.getIterator();let s=QD(o),l=QD(a);for(;s||l;){let e=!1,t=!1;if(s&&l){const r=n(s,l);r<0?t=!0:r>0&&(e=!0)}else null!=s?t=!0:e=!0;e?(r(l),l=QD(a)):t?(i(s),s=QD(o)):(s=QD(o),l=QD(a))}}(r,i,YM,(r=>{o.push(this.Sn(e,t,n,r))}),(r=>{o.push(this.bn(e,t,n,r))})),JR.waitFor(o)}gn(e){let t=1;return fF(e).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((e,n,r)=>{r.done(),t=n.sequenceNumber+1})).next((()=>t))}createRange(e,t,n){n=n.sort(((e,t)=>YM(e,t))).filter(((e,t,n)=>!t||0!==YM(e,n[t-1])));const r=[];r.push(e);for(const o of n){const n=YM(o,e),i=YM(o,t);if(0===n)r[0]=e.Jt();else if(n>0&&i<0)r.push(o),r.push(o.Jt());else if(i>0)break}r.push(t);const i=[];for(let o=0;o<r.length;o+=2){if(this.Dn(r[o],r[o+1]))return[];const e=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,uF,[]],t=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,uF,[]];i.push(IDBKeyRange.bound(e,t))}return i}Dn(e,t){return YM(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(mF)}getMinOffset(e,t){return JR.mapArray(this.cn(t),(t=>this.ln(e,t).next((e=>e||fR())))).next(mF)}}function dF(e){return UD(e,"collectionParents")}function hF(e){return UD(e,"indexEntries")}function pF(e){return UD(e,"indexConfiguration")}function fF(e){return UD(e,"indexState")}function mF(e){mR(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;KR(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new GR(t.readTime,t.documentKey,n)}
/**
             * @license
             * Copyright 2018 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const gF={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class vF{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new vF(e,vF.DEFAULT_COLLECTION_PERCENTILE,vF.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function yF(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),o=[],a=IDBKeyRange.only(n.batchId);let s=0;const l=r.Y({range:a},((e,t,n)=>(s++,n.delete())));o.push(l.next((()=>{mR(1===s)})));const u=[];for(const c of n.mutations){const e=xD(t,c.key.path,n.batchId);o.push(i.delete(e)),u.push(c.key)}return JR.waitFor(o).next((()=>u))}function bF(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw fR();t=e.noDocument}return JSON.stringify(t).length}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */vF.DEFAULT_COLLECTION_PERCENTILE=10,vF.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vF.DEFAULT=new vF(41943040,vF.DEFAULT_COLLECTION_PERCENTILE,vF.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vF.DISABLED=new vF(-1,0,0);class xF{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.Cn={}}static lt(e,t,n,r){mR(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new xF(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return kF(e).Y({index:"userMutationsIndex",range:n},((e,n,r)=>{t=!1,r.done()})).next((()=>t))}addMutationBatch(e,t,n,r){const i=_F(e),o=kF(e);return o.add({}).next((a=>{mR("number"==typeof a);const s=new xL(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map((t=>uM(e.ct,t))),i=n.mutations.map((t=>uM(e.ct,t)));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,s),u=[];let c=new YD(((e,t)=>AR(e.canonicalString(),t.canonicalString())));for(const e of r){const t=xD(this.userId,e.key.path,a);c=c.add(e.key.path.popLast()),u.push(o.put(l)),u.push(i.put(t,wD))}return c.forEach((t=>{u.push(this.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((()=>{this.Cn[a]=s.keys()})),JR.waitFor(u).next((()=>s))}))}lookupMutationBatch(e,t){return kF(e).get(t).next((e=>e?(mR(e.userId===this.userId),TM(this.serializer,e)):null))}vn(e,t){return this.Cn[t]?JR.resolve(this.Cn[t]):this.lookupMutationBatch(e,t).next((e=>{if(e){const n=e.keys();return this.Cn[t]=n,n}return null}))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return kF(e).Y({index:"userMutationsIndex",range:r},((e,t,r)=>{t.userId===this.userId&&(mR(t.batchId>=n),i=TM(this.serializer,t)),r.done()})).next((()=>i))}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return kF(e).Y({index:"userMutationsIndex",range:t,reverse:!0},((e,t,r)=>{n=t.batchId,r.done()})).next((()=>n))}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return kF(e).W("userMutationsIndex",t).next((e=>e.map((e=>TM(this.serializer,e)))))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=bD(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return _F(e).Y({range:r},((n,r,o)=>{const[a,s,l]=n,u=vD(s);if(a===this.userId&&t.path.isEqual(u))return kF(e).get(l).next((e=>{if(!e)throw fR();mR(e.userId===this.userId),i.push(TM(this.serializer,e))}));o.done()})).next((()=>i))}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new YD(AR);const r=[];return t.forEach((t=>{const i=bD(this.userId,t.path),o=IDBKeyRange.lowerBound(i),a=_F(e).Y({range:o},((e,r,i)=>{const[o,a,s]=e,l=vD(a);o===this.userId&&t.path.isEqual(l)?n=n.add(s):i.done()}));r.push(a)})),JR.waitFor(r).next((()=>this.Fn(e,n)))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=bD(this.userId,n),o=IDBKeyRange.lowerBound(i);let a=new YD(AR);return _F(e).Y({range:o},((e,t,i)=>{const[o,s,l]=e,u=vD(s);o===this.userId&&n.isPrefixOf(u)?u.length===r&&(a=a.add(l)):i.done()})).next((()=>this.Fn(e,a)))}Fn(e,t){const n=[],r=[];return t.forEach((t=>{r.push(kF(e).get(t).next((e=>{if(null===e)throw fR();mR(e.userId===this.userId),n.push(TM(this.serializer,e))})))})),JR.waitFor(r).next((()=>n))}removeMutationBatch(e,t){return yF(e.ae,this.userId,t).next((n=>(e.addOnCommittedListener((()=>{this.Mn(t.batchId)})),JR.forEach(n,(t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))))}Mn(e){delete this.Cn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next((t=>{if(!t)return JR.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return _F(e).Y({range:n},((e,t,n)=>{if(e[0]===this.userId){const t=vD(e[1]);r.push(t)}else n.done()})).next((()=>{mR(0===r.length)}))}))}containsKey(e,t){return wF(e,this.userId,t)}xn(e){return EF(e).get(this.userId).next((e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function wF(e,t,n){const r=bD(t,n.path),i=r[1],o=IDBKeyRange.lowerBound(r);let a=!1;return _F(e).Y({range:o,J:!0},((e,n,r)=>{const[o,s,l]=e;o===t&&s===i&&(a=!0),r.done()})).next((()=>a))}function kF(e){return UD(e,"mutations")}function _F(e){return UD(e,"documentMutations")}function EF(e){return UD(e,"mutationQueues")}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class CF{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new CF(0)}static Bn(){return new CF(-1)}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class IF{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Ln(e).next((t=>{const n=new CF(t.highestTargetId);return t.highestTargetId=n.next(),this.kn(e,t).next((()=>t.highestTargetId))}))}getLastRemoteSnapshotVersion(e){return this.Ln(e).next((e=>PR.fromTimestamp(new OR(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(e){return this.Ln(e).next((e=>e.highestListenSequenceNumber))}setTargetsMetadata(e,t,n){return this.Ln(e).next((r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.kn(e,r))))}addTargetData(e,t){return this.qn(e,t).next((()=>this.Ln(e).next((n=>(n.targetCount+=1,this.Qn(t,n),this.kn(e,n))))))}updateTargetData(e,t){return this.qn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next((()=>SF(e).delete(t.targetId))).next((()=>this.Ln(e))).next((t=>(mR(t.targetCount>0),t.targetCount-=1,this.kn(e,t))))}removeTargets(e,t,n){let r=0;const i=[];return SF(e).Y(((o,a)=>{const s=AM(a);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(r++,i.push(this.removeTargetData(e,s)))})).next((()=>JR.waitFor(i))).next((()=>r))}forEachTarget(e,t){return SF(e).Y(((e,n)=>{const r=AM(n);t(r)}))}Ln(e){return NF(e).get("targetGlobalKey").next((e=>(mR(null!==e),e)))}kn(e,t){return NF(e).put("targetGlobalKey",t)}qn(e,t){return SF(e).put(RM(this.serializer,t))}Qn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Ln(e).next((e=>e.targetCount))}getTargetData(e,t){const n=aP(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return SF(e).Y({range:r,index:"queryTargetsIndex"},((e,n,r)=>{const o=AM(n);sP(t,o.target)&&(i=o,r.done())})).next((()=>i))}addMatchingKeys(e,t,n){const r=[],i=TF(e);return t.forEach((t=>{const o=fD(t.path);r.push(i.put({targetId:n,path:o})),r.push(this.referenceDelegate.addReference(e,n,t))})),JR.waitFor(r)}removeMatchingKeys(e,t,n){const r=TF(e);return JR.forEach(t,(t=>{const i=fD(t.path);return JR.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])}))}removeMatchingKeysForTargetId(e,t){const n=TF(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=TF(e);let i=BP();return r.Y({range:n,J:!0},((e,t,n)=>{const r=vD(e[1]),o=new BR(r);i=i.add(o)})).next((()=>i))}containsKey(e,t){const n=fD(t.path),r=IDBKeyRange.bound([n],[DR(n)],!1,!0);let i=0;return TF(e).Y({index:"documentTargetsIndex",J:!0,range:r},(([e,t],n,r)=>{0!==e&&(i++,r.done())})).next((()=>i>0))}_t(e,t){return SF(e).get(t).next((e=>e?AM(e):null))}}function SF(e){return UD(e,"targets")}function NF(e){return UD(e,"targetGlobal")}function TF(e){return UD(e,"targetDocuments")}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function AF([e,t],[n,r]){const i=AR(e,n);return 0===i?AR(t,r):i}class RF{constructor(e){this.Kn=e,this.buffer=new YD(AF),this.$n=0}Un(){return++this.$n}Wn(e){const t=[e,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();AF(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class DF{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(e){cR("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){rD(e)?cR("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await QR(e)}await this.zn(3e5)}))}}class OF{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.Hn(e).next((e=>Math.floor(t/100*e)))}nthSequenceNumber(e,t){if(0===t)return JR.resolve(cD._e);const n=new RF(t);return this.jn.forEachTarget(e,(e=>n.Wn(e.sequenceNumber))).next((()=>this.jn.Jn(e,(e=>n.Wn(e))))).next((()=>n.maxValue))}removeTargets(e,t,n){return this.jn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(cR("LruGarbageCollector","Garbage collection skipped; disabled"),JR.resolve(gF)):this.getCacheSize(e).next((n=>n<this.params.cacheSizeCollectionThreshold?(cR("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),gF):this.Yn(e,t)))}getCacheSize(e){return this.jn.getCacheSize(e)}Yn(e,t){let n,r,i,o,a,s,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((t=>(t>this.params.maximumSequenceNumbersToCollect?(cR("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,o=Date.now(),this.nthSequenceNumber(e,r)))).next((r=>(n=r,a=Date.now(),this.removeTargets(e,n,t)))).next((t=>(i=t,s=Date.now(),this.removeOrphanedDocuments(e,n)))).next((e=>(l=Date.now(),uR()<=Ox.DEBUG&&cR("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${o-u}ms\n\tDetermined least recently used ${r} in `+(a-o)+"ms\n"+`\tRemoved ${i} targets in `+(s-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-s)+"ms\n"+`Total Duration: ${l-u}ms`),JR.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e}))))}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class PF{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new OF(e,t)}(this,t)}Hn(e){const t=this.Zn(e);return this.db.getTargetCache().getTargetCount(e).next((e=>t.next((t=>e+t))))}Zn(e){let t=0;return this.Jn(e,(e=>{t++})).next((()=>t))}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Jn(e,t){return this.Xn(e,((e,n)=>t(n)))}addReference(e,t,n){return LF(e,n)}removeReference(e,t,n){return LF(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return LF(e,t)}er(e,t){return function(e,t){let n=!1;return EF(e).Z((r=>wF(e,r,t).next((e=>(e&&(n=!0),JR.resolve(!e)))))).next((()=>n))}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Xn(e,((o,a)=>{if(a<=t){const t=this.er(e,o).next((t=>{if(!t)return i++,n.getEntry(e,o).next((()=>(n.removeEntry(o,PR.min()),TF(e).delete(function(e){return[0,fD(e.path)]}(o)))))}));r.push(t)}})).next((()=>JR.waitFor(r))).next((()=>n.apply(e))).next((()=>i))}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return LF(e,t)}Xn(e,t){const n=TF(e);let r,i=cD._e;return n.Y({index:"documentTargetsIndex"},(([e,n],{path:o,sequenceNumber:a})=>{0===e?(i!==cD._e&&t(new BR(vD(r)),i),i=a,r=o):i=cD._e})).next((()=>{i!==cD._e&&t(new BR(vD(r)),i)}))}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function LF(e,t){return TF(e).put(function(e,t){return{targetId:0,path:fD(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class MF{constructor(){this.changes=new NP((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,OO.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?JR.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class FF{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return zF(e).put(n)}removeEntry(e,t,n){return zF(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],IM(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next((n=>(n.byteSize+=t,this.tr(e,n))))}getEntry(e,t){let n=OO.newInvalidDocument(t);return zF(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(UF(t))},((e,r)=>{n=this.nr(t,r)})).next((()=>n))}rr(e,t){let n={size:0,document:OO.newInvalidDocument(t)};return zF(e).Y({index:"documentKeyIndex",range:IDBKeyRange.only(UF(t))},((e,r)=>{n={document:this.nr(t,r),size:bF(r)}})).next((()=>n))}getEntries(e,t){let n=AP();return this.ir(e,t,((e,t)=>{const r=this.nr(e,t);n=n.insert(e,r)})).next((()=>n))}sr(e,t){let n=AP(),r=new HD(BR.comparator);return this.ir(e,t,((e,t)=>{const i=this.nr(e,t);n=n.insert(e,i),r=r.insert(e,bF(t))})).next((()=>({documents:n,_r:r})))}ir(e,t,n){if(t.isEmpty())return JR.resolve();let r=new YD(qF);t.forEach((e=>r=r.add(e)));const i=IDBKeyRange.bound(UF(r.first()),UF(r.last())),o=r.getIterator();let a=o.getNext();return zF(e).Y({index:"documentKeyIndex",range:i},((e,t,r)=>{const i=BR.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&qF(a,i)<0;)n(a,null),a=o.getNext();a&&a.isEqual(i)&&(n(a,t),a=o.hasNext()?o.getNext():null),a?r.U(UF(a)):r.done()})).next((()=>{for(;a;)n(a,null),a=o.hasNext()?o.getNext():null}))}getDocumentsMatchingQuery(e,t,n,r,i){const o=t.path,a=[o.popLast().toArray(),o.lastSegment(),IM(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],s=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return zF(e).W(IDBKeyRange.bound(a,s,!0)).next((e=>{null==i||i.incrementDocumentReadCount(e.length);let n=AP();for(const i of e){const e=this.nr(BR.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(EP(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n}))}getAllFromCollectionGroup(e,t,n,r){let i=AP();const o=$F(t,n),a=$F(t,GR.max());return zF(e).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,a,!0)},((e,t,n)=>{const o=this.nr(BR.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(o.key,o),i.size===r&&n.done()})).next((()=>i))}newChangeBuffer(e){return new BF(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next((e=>e.byteSize))}getMetadata(e){return VF(e).get("remoteDocumentGlobalKey").next((e=>(mR(!!e),e)))}tr(e,t){return VF(e).put("remoteDocumentGlobalKey",t)}nr(e,t){if(t){const e=function(e,t){let n;if(t.document)n=lM(e.ct,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=BR.fromSegments(t.noDocument.path),r=NM(t.noDocument.readTime);n=OO.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return fR();{const e=BR.fromSegments(t.unknownDocument.path),r=NM(t.unknownDocument.version);n=OO.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new OR(e[0],e[1]);return PR.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(PR.min()))return e}return OO.newInvalidDocument(e)}}function jF(e){return new FF(e)}class BF extends MF{constructor(e,t){super(),this.ar=e,this.trackRemovals=t,this.ur=new NP((e=>e.toString()),((e,t)=>e.isEqual(t)))}applyChanges(e){const t=[];let n=0,r=new YD(((e,t)=>AR(e.canonicalString(),t.canonicalString())));return this.changes.forEach(((i,o)=>{const a=this.ur.get(i);if(t.push(this.ar.removeEntry(e,i,a.readTime)),o.isValidDocument()){const s=CM(this.ar.serializer,o);r=r.add(i.path.popLast());const l=bF(s);n+=l-a.size,t.push(this.ar.addEntry(e,i,s))}else if(n-=a.size,this.trackRemovals){const n=CM(this.ar.serializer,o.convertToNoDocument(PR.min()));t.push(this.ar.addEntry(e,i,n))}})),r.forEach((n=>{t.push(this.ar.indexManager.addToCollectionParentIndex(e,n))})),t.push(this.ar.updateMetadata(e,n)),JR.waitFor(t)}getFromCache(e,t){return this.ar.rr(e,t).next((e=>(this.ur.set(t,{size:e.size,readTime:e.document.readTime}),e.document)))}getAllFromCache(e,t){return this.ar.sr(e,t).next((({documents:e,_r:t})=>(t.forEach(((t,n)=>{this.ur.set(t,{size:n,readTime:e.get(t).readTime})})),e)))}}function VF(e){return UD(e,"remoteDocumentGlobal")}function zF(e){return UD(e,"remoteDocumentsV14")}function UF(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function $F(e,t){const n=t.documentKey.path.toArray();return[e,IM(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function qF(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let o=0;o<n.length-2&&o<r.length-2;++o)if(i=AR(n[o],r[o]),i)return i;return i=AR(n.length,r.length),i||(i=AR(n[n.length-2],r[r.length-2]),i||AR(n[n.length-1],r[r.length-1])
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */)}class WF{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class HF{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next((r=>(n=r,this.remoteDocumentCache.getEntry(e,t)))).next((e=>(null!==n&&cL(n.mutation,e,JD.empty(),OR.now()),e)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.getLocalViewOfDocuments(e,t,BP()).next((()=>t))))}getLocalViewOfDocuments(e,t,n=BP()){const r=PP();return this.populateOverlays(e,r,t).next((()=>this.computeViews(e,t,r,n).next((e=>{let t=DP();return e.forEach(((e,n)=>{t=t.insert(e,n.overlayedDocument)})),t}))))}getOverlayedDocuments(e,t){const n=PP();return this.populateOverlays(e,n,t).next((()=>this.computeViews(e,t,n,BP())))}populateOverlays(e,t,n){const r=[];return n.forEach((e=>{t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((e=>{e.forEach(((e,n)=>{t.set(e,n)}))}))}computeViews(e,t,n,r){let i=AP();const o=MP(),a=MP();return t.forEach(((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof fL)?i=i.insert(t.key,t):void 0!==a?(o.set(t.key,a.mutation.getFieldMask()),cL(a.mutation,t,a.mutation.getFieldMask(),OR.now())):o.set(t.key,JD.empty())})),this.recalculateAndSaveOverlays(e,i).next((e=>(e.forEach(((e,t)=>o.set(e,t))),t.forEach(((e,t)=>{var n;return a.set(e,new WF(t,null!==(n=o.get(e))&&void 0!==n?n:null))})),a)))}recalculateAndSaveOverlays(e,t){const n=MP();let r=new HD(((e,t)=>e-t)),i=BP();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((e=>{for(const i of e)i.keys().forEach((e=>{const o=t.get(e);if(null===o)return;let a=n.get(e)||JD.empty();a=i.applyToLocalView(o,a),n.set(e,a);const s=(r.get(i.batchId)||BP()).add(e);r=r.insert(i.batchId,s)}))})).next((()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),s=r.key,l=r.value,u=LP();l.forEach((e=>{if(!i.has(e)){const r=lL(t.get(e),n.get(e));null!==r&&u.set(e,r),i=i.add(e)}})),o.push(this.documentOverlayCache.saveOverlays(e,s,u))}return JR.waitFor(o)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((t=>this.recalculateAndSaveOverlays(e,t)))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return BR.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gP(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((i=>{const o=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):JR.resolve(PP());let a=-1,s=i;return o.next((t=>JR.forEach(t,((t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?JR.resolve():this.remoteDocumentCache.getEntry(e,t).next((e=>{s=s.insert(t,e)}))))).next((()=>this.populateOverlays(e,t,i))).next((()=>this.computeViews(e,s,t,BP()))).next((e=>({batchId:a,changes:OP(e)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new BR(t)).next((e=>{let t=DP();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let o=DP();return this.indexManager.getCollectionParents(e,i).next((a=>JR.forEach(a,(a=>{const s=function(e,t){return new hP(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,s,n,r).next((e=>{e.forEach(((e,t)=>{o=o.insert(e,t)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r)))).next((e=>{i.forEach(((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,OO.newInvalidDocument(r)))}));let n=DP();return e.forEach(((e,r)=>{const o=i.get(e);void 0!==o&&cL(o.mutation,r,JD.empty(),OR.now()),EP(t,r)&&(n=n.insert(e,r))})),n}))}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class GF{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,t){return JR.resolve(this.cr.get(t))}saveBundleMetadata(e,t){return this.cr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:QL(e.createTime)}}(t)),JR.resolve()}getNamedQuery(e,t){return JR.resolve(this.lr.get(t))}saveNamedQuery(e,t){return this.lr.set(t.name,function(e){return{name:e.name,query:DM(e.bundledQuery),readTime:QL(e.readTime)}}(t)),JR.resolve()}}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class KF{constructor(){this.overlays=new HD(BR.comparator),this.hr=new Map}getOverlay(e,t){return JR.resolve(this.overlays.get(t))}getOverlays(e,t){const n=PP();return JR.forEach(t,(t=>this.getOverlay(e,t).next((e=>{null!==e&&n.set(t,e)})))).next((()=>n))}saveOverlays(e,t,n){return n.forEach(((n,r)=>{this.ht(e,t,r)})),JR.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.hr.get(n);return void 0!==r&&(r.forEach((e=>this.overlays=this.overlays.remove(e))),this.hr.delete(n)),JR.resolve()}getOverlaysForCollection(e,t,n){const r=PP(),i=t.length+1,o=new BR(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const e=a.getNext().value,o=e.getKey();if(!t.isPrefixOf(o.path))break;o.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return JR.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new HD(((e,t)=>e-t));const o=this.overlays.getIterator();for(;o.hasNext();){const e=o.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=PP(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=PP(),s=i.getIterator();for(;s.hasNext()&&(s.getNext().value.forEach(((e,t)=>a.set(e,t))),!(a.size()>=r)););return JR.resolve(a)}ht(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.hr.get(r.largestBatchId).delete(n.key);this.hr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new kL(t,n));let i=this.hr.get(t);void 0===i&&(i=BP(),this.hr.set(t,i)),this.hr.set(t,i.add(n.key))}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class YF{constructor(){this.Pr=new YD(XF.Ir),this.Tr=new YD(XF.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,t){const n=new XF(e,t);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(e,t){e.forEach((e=>this.addReference(e,t)))}removeReference(e,t){this.Ar(new XF(e,t))}Rr(e,t){e.forEach((e=>this.removeReference(e,t)))}Vr(e){const t=new BR(new MR([])),n=new XF(t,e),r=new XF(t,e+1),i=[];return this.Tr.forEachInRange([n,r],(e=>{this.Ar(e),i.push(e.key)})),i}mr(){this.Pr.forEach((e=>this.Ar(e)))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const t=new BR(new MR([])),n=new XF(t,e),r=new XF(t,e+1);let i=BP();return this.Tr.forEachInRange([n,r],(e=>{i=i.add(e.key)})),i}containsKey(e){const t=new XF(e,0),n=this.Pr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class XF{constructor(e,t){this.key=e,this.pr=t}static Ir(e,t){return BR.comparator(e.key,t.key)||AR(e.pr,t.pr)}static Er(e,t){return AR(e.pr,t.pr)||BR.comparator(e.key,t.key)}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class QF{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.yr=1,this.wr=new YD(XF.Ir)}checkEmpty(e){return JR.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new xL(i,t,n,r);this.mutationQueue.push(o);for(const a of r)this.wr=this.wr.add(new XF(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return JR.resolve(o)}lookupMutationBatch(e,t){return JR.resolve(this.Sr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.br(n),i=r<0?0:r;return JR.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return JR.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(e){return JR.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new XF(t,0),r=new XF(t,Number.POSITIVE_INFINITY),i=[];return this.wr.forEachInRange([n,r],(e=>{const t=this.Sr(e.pr);i.push(t)})),JR.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new YD(AR);return t.forEach((e=>{const t=new XF(e,0),r=new XF(e,Number.POSITIVE_INFINITY);this.wr.forEachInRange([t,r],(e=>{n=n.add(e.pr)}))})),JR.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;BR.isDocumentKey(i)||(i=i.child(""));const o=new XF(new BR(i),0);let a=new YD(AR);return this.wr.forEachWhile((e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.pr)),!0)}),o),JR.resolve(this.Dr(a))}Dr(e){const t=[];return e.forEach((e=>{const n=this.Sr(e);null!==n&&t.push(n)})),t}removeMutationBatch(e,t){mR(0===this.Cr(t.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return JR.forEach(t.mutations,(r=>{const i=new XF(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)})).next((()=>{this.wr=n}))}Mn(e){}containsKey(e,t){const n=new XF(t,0),r=this.wr.firstAfterOrEqual(n);return JR.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,JR.resolve()}Cr(e,t){return this.br(e)}br(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Sr(e){const t=this.br(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class JF{constructor(e){this.vr=e,this.docs=new HD(BR.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,o=this.vr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return JR.resolve(n?n.document.mutableCopy():OO.newInvalidDocument(t))}getEntries(e,t){let n=AP();return t.forEach((e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():OO.newInvalidDocument(e))})),JR.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=AP();const o=t.path,a=new BR(o.child("")),s=this.docs.getIteratorFrom(a);for(;s.hasNext();){const{key:e,value:{document:a}}=s.getNext();if(!o.isPrefixOf(e.path))break;e.path.length>o.length+1||KR(HR(a),n)<=0||(r.has(a.key)||EP(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return JR.resolve(i)}getAllFromCollectionGroup(e,t,n,r){fR()}Fr(e,t){return JR.forEach(this.docs,(e=>t(e)))}newChangeBuffer(e){return new ZF(this)}getSize(e){return JR.resolve(this.size)}}class ZF extends MF{constructor(e){super(),this.ar=e}applyChanges(e){const t=[];return this.changes.forEach(((n,r)=>{r.isValidDocument()?t.push(this.ar.addEntry(e,r)):this.ar.removeEntry(n)})),JR.waitFor(t)}getFromCache(e,t){return this.ar.getEntry(e,t)}getAllFromCache(e,t){return this.ar.getEntries(e,t)}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class ej{constructor(e){this.persistence=e,this.Mr=new NP((e=>aP(e)),sP),this.lastRemoteSnapshotVersion=PR.min(),this.highestTargetId=0,this.Or=0,this.Nr=new YF,this.targetCount=0,this.Br=CF.Nn()}forEachTarget(e,t){return this.Mr.forEach(((e,n)=>t(n))),JR.resolve()}getLastRemoteSnapshotVersion(e){return JR.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return JR.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),JR.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Or&&(this.Or=t),JR.resolve()}qn(e){this.Mr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Br=new CF(t),this.highestTargetId=t),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,t){return this.qn(t),this.targetCount+=1,JR.resolve()}updateTargetData(e,t){return this.qn(t),JR.resolve()}removeTargetData(e,t){return this.Mr.delete(t.target),this.Nr.Vr(t.targetId),this.targetCount-=1,JR.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Mr.forEach(((o,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Mr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)})),JR.waitFor(i).next((()=>r))}getTargetCount(e){return JR.resolve(this.targetCount)}getTargetData(e,t){const n=this.Mr.get(t)||null;return JR.resolve(n)}addMatchingKeys(e,t,n){return this.Nr.dr(t,n),JR.resolve()}removeMatchingKeys(e,t,n){this.Nr.Rr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((t=>{i.push(r.markPotentiallyOrphaned(e,t))})),JR.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.Nr.Vr(t),JR.resolve()}getMatchingKeysForTargetId(e,t){const n=this.Nr.gr(t);return JR.resolve(n)}containsKey(e,t){return JR.resolve(this.Nr.containsKey(t))}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class tj{constructor(e,t){this.Lr={},this.overlays={},this.kr=new cD(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new ej(this),this.indexManager=new sF,this.remoteDocumentCache=function(e){return new JF(e)}((e=>this.referenceDelegate.Kr(e))),this.serializer=new EM(t),this.$r=new GF(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new KF,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Lr[e.toKey()];return n||(n=new QF(t,this.referenceDelegate),this.Lr[e.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,t,n){cR("MemoryPersistence","Starting transaction:",e);const r=new nj(this.kr.next());return this.referenceDelegate.Ur(),n(r).next((e=>this.referenceDelegate.Wr(r).next((()=>e)))).toPromise().then((e=>(r.raiseOnCommittedEvent(),e)))}Gr(e,t){return JR.or(Object.values(this.Lr).map((n=>()=>n.containsKey(e,t))))}}class nj extends XR{constructor(e){super(),this.currentSequenceNumber=e}}class rj{constructor(e){this.persistence=e,this.zr=new YF,this.jr=null}static Hr(e){return new rj(e)}get Jr(){if(this.jr)return this.jr;throw fR()}addReference(e,t,n){return this.zr.addReference(n,t),this.Jr.delete(n.toString()),JR.resolve()}removeReference(e,t,n){return this.zr.removeReference(n,t),this.Jr.add(n.toString()),JR.resolve()}markPotentiallyOrphaned(e,t){return this.Jr.add(t.toString()),JR.resolve()}removeTarget(e,t){this.zr.Vr(t.targetId).forEach((e=>this.Jr.add(e.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next((e=>{e.forEach((e=>this.Jr.add(e.toString())))})).next((()=>n.removeTargetData(e,t)))}Ur(){this.jr=new Set}Wr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return JR.forEach(this.Jr,(n=>{const r=BR.fromPath(n);return this.Yr(e,r).next((e=>{e||t.removeEntry(r,PR.min())}))})).next((()=>(this.jr=null,t.apply(e))))}updateLimboDocument(e,t){return this.Yr(e,t).next((e=>{e?this.Jr.delete(t.toString()):this.Jr.add(t.toString())}))}Kr(e){return 0}Yr(e,t){return JR.or([()=>JR.resolve(this.zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gr(e,t)])}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class ij{constructor(e){this.serializer=e}N(e,t,n,r){const i=new ZR("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yD,{unique:!0}),e.createObjectStore("documentMutations")}(e),oj(e),function(e){e.createObjectStore("remoteDocuments")}(e));let o=JR.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),oj(e)),o=o.next((()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:PR.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i)))),n<4&&r>=4&&(0!==n&&(o=o.next((()=>function(e,t){return t.store("mutations").W().next((n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",yD,{unique:!0});const r=t.store("mutations"),i=n.map((e=>r.put(e)));return JR.waitFor(i)}))}(e,i)))),o=o.next((()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((()=>this.Xr(i)))),n<6&&r>=6&&(o=o.next((()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.ei(i))))),n<7&&r>=7&&(o=o.next((()=>this.ti(i)))),n<8&&r>=8&&(o=o.next((()=>this.ni(e,i)))),n<9&&r>=9&&(o=o.next((()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((()=>this.ri(i)))),n<11&&r>=11&&(o=o.next((()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:OD});t.createIndex("collectionPathOverlayIndex",PD,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",LD,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:kD});t.createIndex("documentKeyIndex",_D),t.createIndex("collectionGroupIndex",ED)}(e))).next((()=>this.ii(e,i))).next((()=>e.deleteObjectStore("remoteDocuments")))),n<14&&r>=14&&(o=o.next((()=>this.si(e,i)))),n<15&&r>=15&&(o=o.next((()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:TD}).createIndex("sequenceNumberIndex",AD,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:RD}).createIndex("documentKeyIndex",DD,{unique:!1})}(e)))),o}ei(e){let t=0;return e.store("remoteDocuments").Y(((e,n)=>{t+=bF(n)})).next((()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.W().next((t=>JR.forEach(t,(t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",r).next((n=>JR.forEach(n,(n=>{mR(n.userId===t.userId);const r=TM(this.serializer,n);return yF(e,t.userId,r).next((()=>{}))}))))}))))}ti(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((e=>{const r=[];return n.Y(((n,i)=>{const o=new MR(n),a=function(e){return[0,fD(e)]}(o);r.push(t.get(a).next((n=>n?JR.resolve():(n=>t.put({targetId:0,path:fD(n),sequenceNumber:e.highestListenSequenceNumber}))(o))))})).next((()=>JR.waitFor(r)))}))}ni(e,t){e.createObjectStore("collectionParents",{keyPath:ND});const n=t.store("collectionParents"),r=new lF,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:fD(r)})}};return t.store("remoteDocuments").Y({J:!0},((e,t)=>{const n=new MR(e);return i(n.popLast())})).next((()=>t.store("documentMutations").Y({J:!0},(([e,t,n],r)=>{const o=vD(t);return i(o.popLast())}))))}ri(e){const t=e.store("targets");return t.Y(((e,n)=>{const r=AM(n),i=RM(this.serializer,r);return t.put(i)}))}ii(e,t){const n=t.store("remoteDocuments"),r=[];return n.Y(((e,n)=>{const i=t.store("remoteDocumentsV14"),o=function(e){return e.document?new BR(MR.fromString(e.document.name).popFirst(5)):e.noDocument?BR.fromSegments(e.noDocument.path):e.unknownDocument?BR.fromSegments(e.unknownDocument.path):fR()}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(n).path.toArray(),a={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))})).next((()=>JR.waitFor(r)))}si(e,t){const n=t.store("mutations"),r=jF(this.serializer),i=new tj(rj.Hr,this.serializer.ct);return n.W().next((e=>{const n=new Map;return e.forEach((e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:BP();TM(this.serializer,e).keys().forEach((e=>r=r.add(e))),n.set(e.userId,r)})),JR.forEach(n,((e,n)=>{const o=new aR(n),a=BM.lt(this.serializer,o),s=i.getIndexManager(o),l=xF.lt(o,this.serializer,s,i.referenceDelegate);return new HF(r,l,a,s).recalculateAndSaveOverlaysForDocumentKeys(new zD(t,cD._e),e).next()}))}))}}function oj(e){e.createObjectStore("targetDocuments",{keyPath:ID}).createIndex("documentTargetsIndex",SD,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CD,{unique:!0}),e.createObjectStore("targetGlobal")}const aj="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sj{constructor(e,t,n,r,i,o,a,s,l,u,c=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.oi=i,this.window=o,this.document=a,this._i=l,this.ai=u,this.ui=c,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=e=>Promise.resolve(),!sj.D())throw new yR(vR.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new PF(this,r),this.Ti=t+"main",this.serializer=new EM(s),this.Ei=new eD(this.Ti,this.ui,new ij(this.serializer)),this.Qr=new IF(this.referenceDelegate,this.serializer),this.remoteDocumentCache=jF(this.serializer),this.$r=new MM,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===u&&dR("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new yR(vR.FAILED_PRECONDITION,aj);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(e=>this.Qr.getHighestSequenceNumber(e)))})).then((e=>{this.kr=new cD(e,this._i)})).then((()=>{this.qr=!0})).catch((e=>(this.Ei&&this.Ei.close(),Promise.reject(e))))}fi(e){return this.Ii=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ei.L((async t=>{null===t.newVersion&&await e()}))}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(e=>uj(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(e).next((e=>{e||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(e))).next((t=>this.isPrimary&&!t?this.yi(e).next((()=>!1)):!!t&&this.wi(e).next((()=>!0)))))).catch((e=>{if(rD(e))return cR("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return cR("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((e=>{this.isPrimary!==e&&this.oi.enqueueRetryable((()=>this.Ii(e))),this.isPrimary=e}))}gi(e){return lj(e).get("owner").next((e=>JR.resolve(this.Si(e))))}bi(e){return uj(e).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(e=>{const t=UD(e,"clientMetadata");return t.W().next((e=>{const n=this.vi(e,18e5),r=e.filter((e=>-1===n.indexOf(e)));return JR.forEach(r,(e=>t.delete(e.clientId))).next((()=>r))}))})).catch((()=>[]));if(this.di)for(const t of e)this.di.removeItem(this.Fi(t.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(e){return!!e&&e.ownerId===this.clientId}pi(e){return this.ai?JR.resolve(!0):lj(e).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)){if(this.Si(t)&&this.networkEnabled)return!0;if(!this.Si(t)){if(!t.allowTabSynchronization)throw new yR(vR.FAILED_PRECONDITION,aj);return!1}}return!(!this.networkEnabled||!this.inForeground)||uj(e).W().next((e=>void 0===this.vi(e,5e3).find((e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))))})).next((e=>(this.isPrimary!==e&&cR("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(e=>{const t=new zD(e,cD._e);return this.yi(t).next((()=>this.bi(t)))})),this.Ei.close(),this.Bi()}vi(e,t){return e.filter((e=>this.Ci(e.updateTimeMs,t)&&!this.Mi(e.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(e=>uj(e).W().next((e=>this.vi(e,18e5).map((e=>e.clientId))))))}get started(){return this.qr}getMutationQueue(e,t){return xF.lt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new cF(e,this.serializer.ct.databaseId)}getDocumentOverlayCache(e){return BM.lt(this.serializer,e)}getBundleCache(){return this.$r}runTransaction(e,t,n){cR("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 15===e?VD:14===e?BD:13===e?jD:12===e?FD:11===e?MD:void fR()}(this.ui);let o;return this.Ei.runTransaction(e,r,i,(r=>(o=new zD(r,this.kr?this.kr.next():cD._e),"readwrite-primary"===t?this.gi(o).next((e=>!!e||this.pi(o))).next((t=>{if(!t)throw dR(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new yR(vR.FAILED_PRECONDITION,YR);return n(o)})).next((e=>this.wi(o).next((()=>e)))):this.ki(o).next((()=>n(o)))))).then((e=>(o.raiseOnCommittedEvent(),e)))}ki(e){return lj(e).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)&&!this.Si(e)&&!(this.ai||this.allowTabSynchronization&&e.allowTabSynchronization))throw new yR(vR.FAILED_PRECONDITION,aj)}))}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return lj(e).put("owner",t)}static D(){return eD.D()}yi(e){const t=lj(e);return t.get("owner").next((e=>this.Si(e)?(cR("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):JR.resolve()))}Ci(e,t){const n=Date.now();return!(e<n-t||e>n&&(dR(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const e=/(?:Version|Mobile)\/1[456]/;px()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(e){var t;try{const n=null!==(null===(t=this.di)||void 0===t?void 0:t.getItem(this.Fi(e)));return cR("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return dR("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(AW){dR("Failed to set zombie client id.",AW)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(AW){}}Fi(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function lj(e){return UD(e,"owner")}function uj(e){return UD(e,"clientMetadata")}function cj(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}class dj{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.qi=n,this.Qi=r}static Ki(e,t){let n=BP(),r=BP();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new dj(e,t.fromCache,n,r)}}
/**
             * @license
             * Copyright 2023 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class hj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class pj{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=px()?8:eD.v(lx())>0?6:4}initialize(e,t){this.zi=e,this.indexManager=t,this.$i=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.ji(e,t).next((e=>{i.result=e})).next((()=>{if(!i.result)return this.Hi(e,t,r,n).next((e=>{i.result=e}))})).next((()=>{if(i.result)return;const n=new hj;return this.Ji(e,t,n).next((r=>{if(i.result=r,this.Ui)return this.Yi(e,t,n,r.size)}))})).next((()=>i.result))}Yi(e,t,n,r){return n.documentReadCount<this.Wi?(uR()<=Ox.DEBUG&&cR("QueryEngine","SDK will not create cache indexes for query:",_P(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),JR.resolve()):(uR()<=Ox.DEBUG&&cR("QueryEngine","Query:",_P(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Gi*r?(uR()<=Ox.DEBUG&&cR("QueryEngine","The SDK decides to create cache indexes for query:",_P(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,yP(t))):JR.resolve())}ji(e,t){if(mP(t))return JR.resolve(null);let n=yP(t);return this.indexManager.getIndexType(e,n).next((r=>0===r?null:(null!==t.limit&&1===r&&(t=xP(t,null,"F"),n=yP(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next((r=>{const i=BP(...r);return this.zi.getDocuments(e,i).next((r=>this.indexManager.getMinOffset(e,n).next((n=>{const o=this.Zi(t,r);return this.Xi(t,o,i,n.readTime)?this.ji(e,xP(t,null,"F")):this.es(e,o,t,n)}))))})))))}Hi(e,t,n,r){return mP(t)||r.isEqual(PR.min())?JR.resolve(null):this.zi.getDocuments(e,n).next((i=>{const o=this.Zi(t,i);return this.Xi(t,o,n,r)?JR.resolve(null):(uR()<=Ox.DEBUG&&cR("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),_P(t)),this.es(e,o,t,WR(r,-1)).next((e=>e)))}))}Zi(e,t){let n=new YD(IP(e));return t.forEach(((t,r)=>{EP(e,r)&&(n=n.add(r))})),n}Xi(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Ji(e,t,n){return uR()<=Ox.DEBUG&&cR("QueryEngine","Using full collection scan to execute query:",_P(t)),this.zi.getDocumentsMatchingQuery(e,t,GR.min(),n)}es(e,t,n,r){return this.zi.getDocumentsMatchingQuery(e,n,r).next((e=>(t.forEach((t=>{e=e.insert(t.key,t)})),e)))}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class fj{constructor(e,t,n,r){this.persistence=e,this.ts=t,this.serializer=r,this.ns=new HD(AR),this.rs=new NP((e=>aP(e)),sP),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(n)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new HF(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.ns)))}}function mj(e,t,n,r){return new fj(e,t,n,r)}async function gj(e,t){const n=gR(e);return await n.persistence.runTransaction("Handle user change","readonly",(e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next((i=>(r=i,n._s(t),n.mutationQueue.getAllMutationBatches(e)))).next((t=>{const i=[],o=[];let a=BP();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){o.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next((e=>({us:e,removedBatchIds:i,addedBatchIds:o})))}))}))}function vj(e){const t=gR(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(e=>t.Qr.getLastRemoteSnapshotVersion(e)))}function yj(e,t,n){let r=BP(),i=BP();return n.forEach((e=>r=r.add(e))),t.getEntries(e,r).next((e=>{let r=AP();return n.forEach(((n,o)=>{const a=e.get(n);o.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),o.isNoDocument()&&o.version.isEqual(PR.min())?(t.removeEntry(n,o.readTime),r=r.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o),r=r.insert(n,o)):cR("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)})),{cs:r,ls:i}}))}function bj(e,t){const n=gR(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t))))}function xj(e,t){const n=gR(e);return n.persistence.runTransaction("Allocate target","readwrite",(e=>{let r;return n.Qr.getTargetData(e,t).next((i=>i?(r=i,JR.resolve(r)):n.Qr.allocateTargetId(e).next((i=>(r=new _M(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Qr.addTargetData(e,r).next((()=>r)))))))})).then((e=>{const r=n.ns.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.ns=n.ns.insert(e.targetId,e),n.rs.set(t,e.targetId)),e}))}async function wj(e,t,n){const r=gR(e),i=r.ns.get(t),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,(e=>r.persistence.referenceDelegate.removeTarget(e,i)))}catch(e){if(!rD(e))throw e;cR("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function kj(e,t,n){const r=gR(e);let i=PR.min(),o=BP();return r.persistence.runTransaction("Execute query","readwrite",(e=>function(e,t,n){const r=gR(e),i=r.rs.get(n);return void 0!==i?JR.resolve(r.ns.get(i)):r.Qr.getTargetData(t,n)}(r,e,yP(t)).next((t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(e,t.targetId).next((e=>{o=e}))})).next((()=>r.ts.getDocumentsMatchingQuery(e,t,n?i:PR.min(),n?o:BP()))).next((e=>(Cj(r,CP(t),e),{documents:e,hs:o})))))}function _j(e,t){const n=gR(e),r=gR(n.Qr),i=n.ns.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(e=>r._t(e,t).next((e=>e?e.target:null))))}function Ej(e,t){const n=gR(e),r=n.ss.get(t)||PR.min();return n.persistence.runTransaction("Get new document changes","readonly",(e=>n.os.getAllFromCollectionGroup(e,t,WR(r,-1),Number.MAX_SAFE_INTEGER))).then((e=>(Cj(n,t,e),e)))}function Cj(e,t,n){let r=e.ss.get(t)||PR.min();n.forEach(((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.ss.set(t,r)}async function Ij(e,t,n=BP()){const r=await xj(e,yP(DM(t.bundledQuery))),i=gR(e);return i.persistence.runTransaction("Save named query","readwrite",(e=>{const o=QL(t.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.$r.saveNamedQuery(e,t);const a=r.withResumeToken(eO.EMPTY_BYTE_STRING,o);return i.ns=i.ns.insert(a.targetId,a),i.Qr.updateTargetData(e,a).next((()=>i.Qr.removeMatchingKeysForTargetId(e,r.targetId))).next((()=>i.Qr.addMatchingKeys(e,n,r.targetId))).next((()=>i.$r.saveNamedQuery(e,t)))}))}function Sj(e,t){return`firestore_clients_${e}_${t}`}function Nj(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function Tj(e,t){return`firestore_targets_${e}_${t}`}class Aj{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static Es(e,t,n){const r=JSON.parse(n);let i,o="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return o&&r.error&&(o="string"==typeof r.error.message&&"string"==typeof r.error.code,o&&(i=new yR(r.error.code,r.error.message))),o?new Aj(e,t,r.state,i):(dR("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rj{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static Es(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new yR(n.error.code,n.error.message))),i?new Rj(e,n.state,r):(dR("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}ds(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dj{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Es(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=zP();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=pD(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Dj(e,i):(dR("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class Oj{constructor(e,t){this.clientId=e,this.onlineState=t}static Es(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new Oj(t.clientId,t.onlineState):(dR("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Pj{constructor(){this.activeTargetIds=zP()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Lj{constructor(e,t,n,r,i){this.window=e,this.oi=t,this.persistenceKey=n,this.Vs=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new HD(AR),this.started=!1,this.ys=[];const o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.ws=Sj(this.persistenceKey,this.Vs),this.Ss=function(e){return`firestore_sequence_number_${e}`}
/**
             * @license
             * Copyright 2018 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new Pj),this.bs=new RegExp(`^firestore_clients_${o}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${o}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${o}_(\\d+)$`),this.vs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Fs=function(e){return`firestore_bundle_loaded_v2_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.Li();for(const n of e){if(n===this.Vs)continue;const e=this.getItem(Sj(this.persistenceKey,n));if(e){const t=Dj.Es(n,e);t&&(this.ps=this.ps.insert(t.clientId,t))}}this.Ms();const t=this.storage.getItem(this.vs);if(t){const e=this.xs(t);e&&this.Os(e)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(e){this.setItem(this.Ss,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(e){let t=!1;return this.ps.forEach(((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)})),t}addPendingMutation(e){this.Bs(e,"pending")}updateMutationState(e,t,n){this.Bs(e,t,n),this.Ls(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(Tj(this.persistenceKey,e));if(n){const r=Rj.Es(e,n);r&&(t=r.state)}}return this.ks.As(e),this.Ms(),t}removeLocalQueryTarget(e){this.ks.Rs(e),this.Ms()}isLocalQueryTarget(e){return this.ks.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(Tj(this.persistenceKey,e))}updateQueryState(e,t,n){this.qs(e,t,n)}handleUserChange(e,t,n){t.forEach((e=>{this.Ls(e)})),this.currentUser=e,n.forEach((e=>{this.addPendingMutation(e)}))}setOnlineState(e){this.Qs(e)}notifyBundleLoaded(e){this.Ks(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return cR("SharedClientState","READ",e,t),t}setItem(e,t){cR("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){cR("SharedClientState","REMOVE",e),this.storage.removeItem(e)}gs(e){const t=e;if(t.storageArea===this.storage){if(cR("SharedClientState","EVENT",t.key,t.newValue),t.key===this.ws)return void dR("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==t.key)if(this.bs.test(t.key)){if(null==t.newValue){const e=this.$s(t.key);return this.Us(e,null)}{const e=this.Ws(t.key,t.newValue);if(e)return this.Us(e.clientId,e)}}else if(this.Ds.test(t.key)){if(null!==t.newValue){const e=this.Gs(t.key,t.newValue);if(e)return this.zs(e)}}else if(this.Cs.test(t.key)){if(null!==t.newValue){const e=this.js(t.key,t.newValue);if(e)return this.Hs(e)}}else if(t.key===this.vs){if(null!==t.newValue){const e=this.xs(t.newValue);if(e)return this.Os(e)}}else if(t.key===this.Ss){const e=function(e){let t=cD._e;if(null!=e)try{const n=JSON.parse(e);mR("number"==typeof n),t=n}catch(e){dR("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==cD._e&&this.sequenceNumberHandler(e)}else if(t.key===this.Fs){const e=this.Js(t.newValue);await Promise.all(e.map((e=>this.syncEngine.Ys(e))))}}else this.ys.push(t)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(e,t,n){const r=new Aj(this.currentUser,e,t,n),i=Nj(this.persistenceKey,this.currentUser,e);this.setItem(i,r.ds())}Ls(e){const t=Nj(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Qs(e){const t={clientId:this.Vs,onlineState:e};this.storage.setItem(this.vs,JSON.stringify(t))}qs(e,t,n){const r=Tj(this.persistenceKey,e),i=new Rj(e,t,n);this.setItem(r,i.ds())}Ks(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Fs,t)}$s(e){const t=this.bs.exec(e);return t?t[1]:null}Ws(e,t){const n=this.$s(e);return Dj.Es(n,t)}Gs(e,t){const n=this.Ds.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return Aj.Es(new aR(i),r,t)}js(e,t){const n=this.Cs.exec(e),r=Number(n[1]);return Rj.Es(r,t)}xs(e){return Oj.Es(e)}Js(e){return JSON.parse(e)}async zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.Zs(e.batchId,e.state,e.error);cR("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}Hs(e){return this.syncEngine.Xs(e.targetId,e.state,e.error)}Us(e,t){const n=t?this.ps.insert(e,t):this.ps.remove(e),r=this.Ns(this.ps),i=this.Ns(n),o=[],a=[];return i.forEach((e=>{r.has(e)||o.push(e)})),r.forEach((e=>{i.has(e)||a.push(e)})),this.syncEngine.eo(o,a).then((()=>{this.ps=n}))}Os(e){this.ps.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ns(e){let t=zP();return e.forEach(((e,n)=>{t=t.unionWith(n.activeTargetIds)})),t}}class Mj{constructor(){this.no=new Pj,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,t,n){this.ro[e]=t}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new Pj,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Fj{io(e){}shutdown(){}}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class jj{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){cR("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){cR("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
             * @license
             * Copyright 2023 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */let Bj=null;function Vj(){return null===Bj?Bj=268435456+Math.round(2147483648*Math.random()):Bj++,"0x"+Bj.toString(16)
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}const zj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Uj{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const $j="WebChannelConnection";class qj extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.fo=t+"://"+e.host,this.po=`projects/${n}/databases/${r}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${r}`}get wo(){return!1}So(e,t,n,r,i){const o=Vj(),a=this.bo(e,t.toUriEncodedString());cR("RestConnection",`Sending RPC '${e}' ${o}:`,a,n);const s={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(s,r,i),this.Co(e,a,s,n).then((t=>(cR("RestConnection",`Received RPC '${e}' ${o}: `,t),t)),(t=>{throw hR("RestConnection",`RPC '${e}' ${o} failed with error: `,t,"url: ",a,"request:",n),t}))}vo(e,t,n,r,i,o){return this.So(e,t,n,r,i)}Do(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+sR,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((t,n)=>e[n]=t)),n&&n.headers.forEach(((t,n)=>e[n]=t))}bo(e,t){const n=zj[e];return`${this.fo}/v1/${t}:${n}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,t,n,r){const i=Vj();return new Promise(((o,a)=>{const s=new nR;s.setWithCredentials(!0),s.listenOnce(QA.COMPLETE,(()=>{try{switch(s.getLastErrorCode()){case XA.NO_ERROR:const t=s.getResponseJson();cR($j,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(t)),o(t);break;case XA.TIMEOUT:cR($j,`RPC '${e}' ${i} timed out`),a(new yR(vR.DEADLINE_EXCEEDED,"Request time out"));break;case XA.HTTP_ERROR:const n=s.getStatus();if(cR($j,`RPC '${e}' ${i} failed with status:`,n,"response text:",s.getResponseText()),n>0){let e=s.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(vR).indexOf(t)>=0?t:vR.UNKNOWN}(t.status);a(new yR(e,t.message))}else a(new yR(vR.UNKNOWN,"Server responded with status "+s.getStatus()))}else a(new yR(vR.UNAVAILABLE,"Connection failed."));break;default:fR()}}finally{cR($j,`RPC '${e}' ${i} completed.`)}}));const l=JSON.stringify(r);cR($j,`RPC '${e}' ${i} sending request:`,r),s.send(t,"POST",l,n,15)}))}Fo(e,t,n){const r=Vj(),i=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=new IA,a=EN(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(s.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(s.useFetchStreams=!0),this.Do(s.initMessageHeaders,t,n),s.encodeInitMessageHeaders=!0;const u=i.join("");cR($j,`Creating RPC '${e}' stream ${r}: ${u}`,s);const c=o.createWebChannel(u,s);let d=!1,h=!1;const p=new Uj({lo:t=>{h?cR($j,`Not sending because RPC '${e}' stream ${r} is closed:`,t):(d||(cR($j,`Opening RPC '${e}' stream ${r} transport.`),c.open(),d=!0),cR($j,`RPC '${e}' stream ${r} sending:`,t),c.send(t))},ho:()=>c.close()}),f=(e,t,n)=>{e.listen(t,(e=>{try{n(e)}catch(e){setTimeout((()=>{throw e}),0)}}))};return f(c,tR.EventType.OPEN,(()=>{h||cR($j,`RPC '${e}' stream ${r} transport opened.`)})),f(c,tR.EventType.CLOSE,(()=>{h||(h=!0,cR($j,`RPC '${e}' stream ${r} transport closed`),p.Vo())})),f(c,tR.EventType.ERROR,(t=>{h||(h=!0,hR($j,`RPC '${e}' stream ${r} transport errored:`,t),p.Vo(new yR(vR.UNAVAILABLE,"The operation could not be completed")))})),f(c,tR.EventType.MESSAGE,(t=>{var n;if(!h){const i=t.data[0];mR(!!i);const o=i,a=o.error||(null===(n=o[0])||void 0===n?void 0:n.error);if(a){cR($j,`RPC '${e}' stream ${r} received error:`,a);const t=a.status;let n=function(e){const t=EL[e];if(void 0!==t)return SL(t)}(t),i=a.message;void 0===n&&(n=vR.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),h=!0,p.Vo(new yR(n,i)),c.close()}else cR($j,`RPC '${e}' stream ${r} received:`,i),p.mo(i)}})),f(a,JA.STAT_EVENT,(t=>{t.stat===ZA?cR($j,`RPC '${e}' stream ${r} detected buffering proxy`):t.stat===eR&&cR($j,`RPC '${e}' stream ${r} detected no buffering proxy`)})),setTimeout((()=>{p.Ro()}),0),p}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Wj(){return"undefined"!=typeof window?window:null}function Hj(){return"undefined"!=typeof document?document:null}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Gj(e){return new HL(e,!0)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Kj{constructor(e,t,n=1e3,r=1.5,i=6e4){this.oi=e,this.timerId=t,this.Mo=n,this.xo=r,this.Oo=i,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const t=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),r=Math.max(0,t-n);r>0&&cR("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.No} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,r,(()=>(this.Lo=Date.now(),e()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Yj{constructor(e,t,n,r,i,o,a,s){this.oi=e,this.$o=n,this.Uo=r,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=s,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new Kj(e,t)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,t){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==e?this.jo.reset():t&&t.code===vR.RESOURCE_EXHAUSTED?(dR(t.toString()),dR("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):t&&t.code===vR.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(t)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),t=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([e,n])=>{this.Wo===t&&this.o_(e,n)}),(t=>{e((()=>{const e=new yR(vR.UNKNOWN,"Fetching auth token failed: "+t.message);return this.__(e)}))}))}o_(e,t){const n=this.s_(this.Wo);this.stream=this.a_(e,t),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((e=>{n((()=>this.__(e)))})),this.stream.onMessage((e=>{n((()=>this.onMessage(e)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(e){return cR("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return t=>{this.oi.enqueueAndForget((()=>this.Wo===e?t():(cR("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class Xj extends Yj{constructor(e,t,n,r,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i}a_(e,t){return this.connection.Fo("Listen",e,t)}onMessage(e){this.jo.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:fR()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=function(e,t){return e.useProto3Json?(mR(void 0===t||"string"==typeof t),eO.fromBase64String(t||"")):(mR(void 0===t||t instanceof Uint8Array),eO.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,s=a&&function(e){const t=void 0===e.code?vR.UNKNOWN:SL(e.code);return new yR(t,e.message||"")}(a);n=new jL(r,i,o,s||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=nM(e,r.document.name),o=QL(r.document.updateTime),a=r.document.createTime?QL(r.document.createTime):PR.min(),s=new RO({mapValue:{fields:r.document.fields}}),l=OO.newFoundDocument(i,o,a,s),u=r.targetIds||[],c=r.removedTargetIds||[];n=new ML(u,c,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=nM(e,r.document),o=r.readTime?QL(r.readTime):PR.min(),a=OO.newNoDocument(i,o),s=r.removedTargetIds||[];n=new ML([],s,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=nM(e,r.document),o=r.removedTargetIds||[];n=new ML([],o,i,null)}else{if(!("filter"in t))return fR();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,o=new _L(r,i),a=e.targetId;n=new FL(a,o)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return PR.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?PR.min():t.readTime?QL(t.readTime):PR.min()}(e);return this.listener.u_(t,n)}c_(e){const t={};t.database=oM(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=lP(r)?{documents:dM(e,r)}:{query:hM(e,r).ut},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=YL(e,t.resumeToken);const r=GL(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(PR.min())>0){n.readTime=KL(e,t.snapshotVersion.toTimestamp());const r=GL(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fR()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.t_(t)}l_(e){const t={};t.database=oM(this.serializer),t.removeTarget=e,this.t_(t)}}class Qj extends Yj{constructor(e,t,n,r,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,o),this.serializer=i,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,t){return this.connection.Fo("Write",e,t)}onMessage(e){if(mR(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const t=function(e,t){return e&&e.length>0?(mR(void 0!==t),e.map((e=>function(e,t){let n=e.updateTime?QL(e.updateTime):QL(t);return n.isEqual(PR.min())&&(n=QL(t)),new iL(n,e.transformResults||[])}(e,t)))):[]}(e.writeResults,e.commitTime),n=QL(e.commitTime);return this.listener.T_(n,t)}return mR(!e.writeResults||0===e.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=oM(this.serializer),this.t_(e)}I_(e){const t={streamToken:this.lastStreamToken,writes:e.map((e=>uM(this.serializer,e)))};this.t_(t)}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Jj extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.A_=!1}R_(){if(this.A_)throw new yR(vR.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,t,n,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([i,o])=>this.connection.So(e,ZL(t,n),r,i,o))).catch((e=>{throw"FirebaseError"===e.name?(e.code===vR.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yR(vR.UNKNOWN,e.toString())}))}vo(e,t,n,r,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.vo(e,ZL(t,n),r,o,a,i))).catch((e=>{throw"FirebaseError"===e.name?(e.code===vR.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new yR(vR.UNKNOWN,e.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}class Zj{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(e){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,"Online"===e&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(dR(t),this.g_=!1):cR("OnlineStateTracker",t)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class eB{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=i,this.M_.io((e=>{n.enqueueAndForget((async()=>{uB(this)&&(cR("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=gR(e);t.v_.add(4),await nB(t),t.x_.set("Unknown"),t.v_.delete(4),await tB(t)}(this))}))})),this.x_=new Zj(n,r)}}async function tB(e){if(uB(e))for(const t of e.F_)await t(!0)}async function nB(e){for(const t of e.F_)await t(!1)}function rB(e,t){const n=gR(e);n.C_.has(t.targetId)||(n.C_.set(t.targetId,t),lB(n)?sB(n):SB(n).Jo()&&oB(n,t))}function iB(e,t){const n=gR(e),r=SB(n);n.C_.delete(t),r.Jo()&&aB(n,t),0===n.C_.size&&(r.Jo()?r.Xo():uB(n)&&n.x_.set("Unknown"))}function oB(e,t){if(e.O_.Oe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(PR.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}SB(e).c_(t)}function aB(e,t){e.O_.Oe(t),SB(e).l_(t)}function sB(e){e.O_=new VL({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),_t:t=>e.C_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),SB(e).start(),e.x_.p_()}function lB(e){return uB(e)&&!SB(e).Ho()&&e.C_.size>0}function uB(e){return 0===gR(e).v_.size}function cB(e){e.O_=void 0}async function dB(e){e.C_.forEach(((t,n)=>{oB(e,t)}))}async function hB(e,t){cB(e),lB(e)?(e.x_.S_(t),sB(e)):e.x_.set("Unknown")}async function pB(e,t,n){if(e.x_.set("Online"),t instanceof jL&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.C_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.C_.delete(r),e.O_.removeTarget(r))}(e,t)}catch(n){cR("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await fB(e,n)}else if(t instanceof ML?e.O_.$e(t):t instanceof FL?e.O_.Je(t):e.O_.Ge(t),!n.isEqual(PR.min()))try{const t=await vj(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.O_.it(t);return n.targetChanges.forEach(((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.C_.get(r);i&&e.C_.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach(((t,n)=>{const r=e.C_.get(t);if(!r)return;e.C_.set(t,r.withResumeToken(eO.EMPTY_BYTE_STRING,r.snapshotVersion)),aB(e,t);const i=new _M(r.target,t,n,r.sequenceNumber);oB(e,i)})),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){cR("RemoteStore","Failed to raise snapshot:",t),await fB(e,t)}}async function fB(e,t,n){if(!rD(t))throw t;e.v_.add(1),await nB(e),e.x_.set("Offline"),n||(n=()=>vj(e.localStore)),e.asyncQueue.enqueueRetryable((async()=>{cR("RemoteStore","Retrying IndexedDB access"),await n(),e.v_.delete(1),await tB(e)}))}function mB(e,t){return t().catch((n=>fB(e,n,t)))}async function gB(e){const t=gR(e),n=NB(t);let r=t.D_.length>0?t.D_[t.D_.length-1].batchId:-1;for(;vB(t);)try{const e=await bj(t.localStore,r);if(null===e){0===t.D_.length&&n.Xo();break}r=e.batchId,yB(t,e)}catch(e){await fB(t,e)}bB(t)&&xB(t)}function vB(e){return uB(e)&&e.D_.length<10}function yB(e,t){e.D_.push(t);const n=NB(e);n.Jo()&&n.P_&&n.I_(t.mutations)}function bB(e){return uB(e)&&!NB(e).Ho()&&e.D_.length>0}function xB(e){NB(e).start()}async function wB(e){NB(e).d_()}async function kB(e){const t=NB(e);for(const n of e.D_)t.I_(n.mutations)}async function _B(e,t,n){const r=e.D_.shift(),i=wL.from(r,t,n);await mB(e,(()=>e.remoteSyncer.applySuccessfulWrite(i))),await gB(e)}async function EB(e,t){t&&NB(e).P_&&await async function(e,t){if(function(e){return IL(e)&&e!==vR.ABORTED}(t.code)){const n=e.D_.shift();NB(e).Zo(),await mB(e,(()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t))),await gB(e)}}(e,t),bB(e)&&xB(e)}async function CB(e,t){const n=gR(e);n.asyncQueue.verifyOperationInProgress(),cR("RemoteStore","RemoteStore received new credentials");const r=uB(n);n.v_.add(3),await nB(n),r&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.v_.delete(3),await tB(n)}async function IB(e,t){const n=gR(e);t?(n.v_.delete(2),await tB(n)):t||(n.v_.add(2),await nB(n),n.x_.set("Unknown"))}function SB(e){return e.N_||(e.N_=function(e,t,n){const r=gR(e);return r.R_(),new Xj(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)
/**
             * @license
             * Copyright 2018 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}(e.datastore,e.asyncQueue,{Po:dB.bind(null,e),To:hB.bind(null,e),u_:pB.bind(null,e)}),e.F_.push((async t=>{t?(e.N_.Zo(),lB(e)?sB(e):e.x_.set("Unknown")):(await e.N_.stop(),cB(e))}))),e.N_}function NB(e){return e.B_||(e.B_=function(e,t,n){const r=gR(e);return r.R_(),new Qj(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Po:wB.bind(null,e),To:EB.bind(null,e),E_:kB.bind(null,e),T_:_B.bind(null,e)}),e.F_.push((async t=>{t?(e.B_.Zo(),await gB(e)):(await e.B_.stop(),e.D_.length>0&&(cR("RemoteStore",`Stopping write stream with ${e.D_.length} pending writes`),e.D_=[]))}))),e.B_
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}class TB{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new bR,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((e=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const o=Date.now()+n,a=new TB(e,t,o,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new yR(vR.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function AB(e,t){if(dR("AsyncQueue",`${t}: ${e}`),rD(e))return new yR(vR.UNAVAILABLE,`${t}: ${e}`);throw e}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class RB{constructor(e){this.comparator=e?(t,n)=>e(t,n)||BR.comparator(t.key,n.key):(e,t)=>BR.comparator(e.key,t.key),this.keyedMap=DP(),this.sortedSet=new HD(this.comparator)}static emptySet(e){return new RB(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,n)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof RB))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new RB;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class DB{constructor(){this.L_=new HD(BR.comparator)}track(e){const t=e.doc.key,n=this.L_.get(t);n?0!==e.type&&3===n.type?this.L_=this.L_.insert(t,e):3===e.type&&1!==n.type?this.L_=this.L_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.L_=this.L_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.L_=this.L_.remove(t):1===e.type&&2===n.type?this.L_=this.L_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.L_=this.L_.insert(t,{type:2,doc:e.doc}):fR():this.L_=this.L_.insert(t,e)}k_(){const e=[];return this.L_.inorderTraversal(((t,n)=>{e.push(n)})),e}}class OB{constructor(e,t,n,r,i,o,a,s,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=s,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const o=[];return t.forEach((e=>{o.push({type:0,doc:e})})),new OB(e,t,RB.emptySet(t),o,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&wP(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class PB{constructor(){this.q_=void 0,this.Q_=[]}}class LB{constructor(){this.queries=new NP((e=>kP(e)),wP),this.onlineState="Unknown",this.K_=new Set}}async function MB(e,t){const n=gR(e),r=t.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new PB),i)try{o.q_=await n.onListen(r)}catch(e){const n=AB(e,`Initialization of query '${_P(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,o),o.Q_.push(t),t.U_(n.onlineState),o.q_&&t.W_(o.q_)&&VB(n)}async function FB(e,t){const n=gR(e),r=t.query;let i=!1;const o=n.queries.get(r);if(o){const e=o.Q_.indexOf(t);e>=0&&(o.Q_.splice(e,1),i=0===o.Q_.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function jB(e,t){const n=gR(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.Q_)e.W_(i)&&(r=!0);t.q_=i}}r&&VB(n)}function BB(e,t,n){const r=gR(e),i=r.queries.get(t);if(i)for(const o of i.Q_)o.onError(n);r.queries.delete(t)}function VB(e){e.K_.forEach((e=>{e.next()}))}class zB{constructor(e,t,n){this.query=e,this.G_=t,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new OB(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.z_?this.H_(e)&&(this.G_.next(e),t=!0):this.J_(e,this.onlineState)&&(this.Y_(e),t=!0),this.j_=e,t}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let t=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),t=!0),t}J_(e,t){if(!e.fromCache)return!0;const n="Offline"!==t;return(!this.options.Z_||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}H_(e){if(e.docChanges.length>0)return!0;const t=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}Y_(e){e=OB.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class UB{constructor(e,t){this.X_=e,this.byteLength=t}ea(){return"metadata"in this.X_}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class $B{constructor(e){this.serializer=e}Ps(e){return nM(this.serializer,e)}Is(e){return e.metadata.exists?lM(this.serializer,e.document,!1):OO.newNoDocument(this.Ps(e.metadata.name),this.Ts(e.metadata.readTime))}Ts(e){return QL(e)}}class qB{constructor(e,t,n){this.ta=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=WB(e)}na(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.X_.namedQuery)this.queries.push(e.X_.namedQuery);else if(e.X_.documentMetadata){this.documents.push({metadata:e.X_.documentMetadata}),e.X_.documentMetadata.exists||++t;const n=MR.fromString(e.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.X_.document&&(this.documents[this.documents.length-1].document=e.X_.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}ra(e){const t=new Map,n=new $B(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.Ps(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||BP()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=gR(e);let o=BP(),a=AP();for(const u of n){const e=t.Ps(u.metadata.name);u.document&&(o=o.add(e));const n=t.Is(u);n.setReadTime(t.Ts(u.metadata.readTime)),a=a.insert(e,n)}const s=i.os.newChangeBuffer({trackRemovals:!0}),l=await xj(i,function(e){return yP(fP(MR.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",(e=>yj(e,s,a).next((t=>(s.apply(e),t))).next((t=>i.Qr.removeMatchingKeysForTargetId(e,l.targetId).next((()=>i.Qr.addMatchingKeys(e,o,l.targetId))).next((()=>i.localDocuments.getLocalViewOfDocuments(e,t.cs,t.ls))).next((()=>t.cs))))))}(this.localStore,new $B(this.serializer),this.documents,this.ta.id),t=this.ra(this.documents);for(const n of this.queries)await Ij(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:e}}}function WB(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class HB{constructor(e){this.key=e}}class GB{constructor(e){this.key=e}}class KB{constructor(e,t){this.query=e,this.oa=t,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=BP(),this.mutatedKeys=BP(),this.ua=IP(e),this.ca=new RB(this.ua)}get la(){return this.oa}ha(e,t){const n=t?t.Pa:new DB,r=t?t.ca:this.ca;let i=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const s="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal(((e,t)=>{const u=r.get(e),c=EP(this.query,t)?t:null,d=!!u&&this.mutatedKeys.has(u.key),h=!!c&&(c.hasLocalMutations||this.mutatedKeys.has(c.key)&&c.hasCommittedMutations);let p=!1;u&&c?u.data.isEqual(c.data)?d!==h&&(n.track({type:3,doc:c}),p=!0):this.Ia(u,c)||(n.track({type:2,doc:c}),p=!0,(s&&this.ua(c,s)>0||l&&this.ua(c,l)<0)&&(a=!0)):!u&&c?(n.track({type:0,doc:c}),p=!0):u&&!c&&(n.track({type:1,doc:u}),p=!0,(s||l)&&(a=!0)),p&&(c?(o=o.add(c),i=h?i.add(e):i.delete(e)):(o=o.delete(e),i=i.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){const e="F"===this.query.limitType?o.last():o.first();o=o.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ca:o,Pa:n,Xi:a,mutatedKeys:i}}Ia(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const o=e.Pa.k_();o.sort(((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fR()}};return n(e)-n(t)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e.type,t.type)||this.ua(e.doc,t.doc))),this.Ta(n),r=null!=r&&r;const a=t&&!r?this.Ea():[],s=0===this.aa.size&&this.current&&!r?1:0,l=s!==this._a;return this._a=s,0!==o.length||l?{snapshot:new OB(this.query,e.ca,i,o,e.mutatedKeys,0===s,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:a}:{da:a}}U_(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new DB,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach((e=>this.oa=this.oa.add(e))),e.modifiedDocuments.forEach((e=>{})),e.removedDocuments.forEach((e=>this.oa=this.oa.delete(e))),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=BP(),this.ca.forEach((e=>{this.Aa(e.key)&&(this.aa=this.aa.add(e.key))}));const t=[];return e.forEach((e=>{this.aa.has(e)||t.push(new GB(e))})),this.aa.forEach((n=>{e.has(n)||t.push(new HB(n))})),t}Ra(e){this.oa=e.hs,this.aa=BP();const t=this.ha(e.documents);return this.applyChanges(t,!0)}Va(){return OB.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class YB{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class XB{constructor(e){this.key=e,this.ma=!1}}class QB{constructor(e,t,n,r,i,o){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.fa={},this.ga=new NP((e=>kP(e)),wP),this.pa=new Map,this.ya=new Set,this.wa=new HD(BR.comparator),this.Sa=new Map,this.ba=new YF,this.Da={},this.Ca=new Map,this.va=CF.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function JB(e,t){const n=EV(e);let r,i;const o=n.ga.get(t);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Va();else{const e=await xj(n.localStore,yP(t)),o=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await ZB(n,t,r,"current"===o,e.resumeToken),n.isPrimaryClient&&rB(n.remoteStore,e)}return i}async function ZB(e,t,n,r,i){e.Ma=(t,n,r)=>async function(e,t,n,r){let i=t.view.ha(n);i.Xi&&(i=await kj(e.localStore,t.query,!1).then((({documents:e})=>t.view.ha(e,i))));const o=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),s=t.view.applyChanges(i,e.isPrimaryClient,o,a);return cV(e,t.targetId,s.da),s.snapshot}(e,t,n,r);const o=await kj(e.localStore,t,!0),a=new KB(t,o.hs),s=a.ha(o.documents),l=LL.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),u=a.applyChanges(s,e.isPrimaryClient,l);cV(e,n,u.da);const c=new YB(t,n,a);return e.ga.set(t,c),e.pa.has(n)?e.pa.get(n).push(t):e.pa.set(n,[t]),u.snapshot}async function eV(e,t){const n=gR(e),r=n.ga.get(t),i=n.pa.get(r.targetId);if(i.length>1)return n.pa.set(r.targetId,i.filter((e=>!wP(e,t)))),void n.ga.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await wj(n.localStore,r.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(r.targetId),iB(n.remoteStore,r.targetId),lV(n,r.targetId)})).catch(QR)):(lV(n,r.targetId),await wj(n.localStore,r.targetId,!0))}async function tV(e,t){const n=gR(e);try{const e=await function(e,t){const n=gR(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(e=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach(((o,s)=>{const l=i.get(s);if(!l)return;a.push(n.Qr.removeMatchingKeys(e,o.removedDocuments,s).next((()=>n.Qr.addMatchingKeys(e,o.addedDocuments,s))));let u=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(s)?u=u.withResumeToken(eO.EMPTY_BYTE_STRING,PR.min()).withLastLimboFreeSnapshotVersion(PR.min()):o.resumeToken.approximateByteSize()>0&&(u=u.withResumeToken(o.resumeToken,r)),i=i.insert(s,u),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,u,o)&&a.push(n.Qr.updateTargetData(e,u))}));let s=AP(),l=BP();if(t.documentUpdates.forEach((r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),a.push(yj(e,o,t.documentUpdates).next((e=>{s=e.cs,l=e.ls}))),!r.isEqual(PR.min())){const t=n.Qr.getLastRemoteSnapshotVersion(e).next((t=>n.Qr.setTargetsMetadata(e,e.currentSequenceNumber,r)));a.push(t)}return JR.waitFor(a).next((()=>o.apply(e))).next((()=>n.localDocuments.getLocalViewOfDocuments(e,s,l))).next((()=>s))})).then((e=>(n.ns=i,e)))}(n.localStore,t);t.targetChanges.forEach(((e,t)=>{const r=n.Sa.get(t);r&&(mR(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ma=!0:e.modifiedDocuments.size>0?mR(r.ma):e.removedDocuments.size>0&&(mR(r.ma),r.ma=!1))})),await pV(n,e,t)}catch(e){await QR(e)}}function nV(e,t,n){const r=gR(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.ga.forEach(((n,r)=>{const i=r.view.U_(t);i.snapshot&&e.push(i.snapshot)})),function(e,t){const n=gR(e);n.onlineState=t;let r=!1;n.queries.forEach(((e,n)=>{for(const i of n.Q_)i.U_(t)&&(r=!0)})),r&&VB(n)}(r.eventManager,t),e.length&&r.fa.u_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function rV(e,t,n){const r=gR(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Sa.get(t),o=i&&i.key;if(o){let e=new HD(BR.comparator);e=e.insert(o,OO.newNoDocument(o,PR.min()));const n=BP().add(o),i=new PL(PR.min(),new Map,new HD(AR),e,n);await tV(r,i),r.wa=r.wa.remove(o),r.Sa.delete(t),hV(r)}else await wj(r.localStore,t,!1).then((()=>lV(r,t,n))).catch(QR)}async function iV(e,t){const n=gR(e),r=t.batch.batchId;try{const e=await function(e,t){const n=gR(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(e=>{const r=t.batch.keys(),i=n.os.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,o=i.keys();let a=JR.resolve();return o.forEach((e=>{a=a.next((()=>r.getEntry(t,e))).next((t=>{const o=n.docVersions.get(e);mR(null!==o),t.version.compareTo(o)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),a.next((()=>e.mutationQueue.removeMutationBatch(t,i)))}(n,e,t,i).next((()=>i.apply(e))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=BP();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t)))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(n.localStore,t);sV(n,r,null),aV(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await pV(n,e)}catch(e){await QR(e)}}async function oV(e,t,n){const r=gR(e);try{const e=await function(e,t){const n=gR(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next((t=>(mR(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)))).next((()=>n.mutationQueue.performConsistencyCheck(e))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r))).next((()=>n.localDocuments.getDocuments(e,r)))}))}(r.localStore,t);sV(r,t,n),aV(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await pV(r,e)}catch(n){await QR(n)}}function aV(e,t){(e.Ca.get(t)||[]).forEach((e=>{e.resolve()})),e.Ca.delete(t)}function sV(e,t,n){const r=gR(e);let i=r.Da[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.Da[r.currentUser.toKey()]=i}}function lV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.pa.get(t))e.ga.delete(r),n&&e.fa.xa(r,n);e.pa.delete(t),e.isPrimaryClient&&e.ba.Vr(t).forEach((t=>{e.ba.containsKey(t)||uV(e,t)}))}function uV(e,t){e.ya.delete(t.path.canonicalString());const n=e.wa.get(t);null!==n&&(iB(e.remoteStore,n),e.wa=e.wa.remove(t),e.Sa.delete(n),hV(e))}function cV(e,t,n){for(const r of n)r instanceof HB?(e.ba.addReference(r.key,t),dV(e,r)):r instanceof GB?(cR("SyncEngine","Document no longer in limbo: "+r.key),e.ba.removeReference(r.key,t),e.ba.containsKey(r.key)||uV(e,r.key)):fR()}function dV(e,t){const n=t.key,r=n.path.canonicalString();e.wa.get(n)||e.ya.has(r)||(cR("SyncEngine","New document in limbo: "+n),e.ya.add(r),hV(e))}function hV(e){for(;e.ya.size>0&&e.wa.size<e.maxConcurrentLimboResolutions;){const t=e.ya.values().next().value;e.ya.delete(t);const n=new BR(MR.fromString(t)),r=e.va.next();e.Sa.set(r,new XB(n)),e.wa=e.wa.insert(n,r),rB(e.remoteStore,new _M(yP(fP(n.path)),r,"TargetPurposeLimboResolution",cD._e))}}async function pV(e,t,n){const r=gR(e),i=[],o=[],a=[];r.ga.isEmpty()||(r.ga.forEach(((e,s)=>{a.push(r.Ma(s,t,n).then((e=>{if((e||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(s.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){i.push(e);const t=dj.Ki(s.targetId,e);o.push(t)}})))})),await Promise.all(a),r.fa.u_(i),await async function(e,t){const n=gR(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(e=>JR.forEach(t,(t=>JR.forEach(t.qi,(r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r))).next((()=>JR.forEach(t.Qi,(r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))))))}catch(e){if(!rD(e))throw e;cR("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.ns.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.ns=n.ns.insert(e,i)}}}(r.localStore,o))}async function fV(e,t){const n=gR(e);if(!n.currentUser.isEqual(t)){cR("SyncEngine","User change. New user:",t.toKey());const e=await gj(n.localStore,t);n.currentUser=t,function(e,t){e.Ca.forEach((e=>{e.forEach((e=>{e.reject(new yR(vR.CANCELLED,t))}))})),e.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await pV(n,e.us)}}function mV(e,t){const n=gR(e),r=n.Sa.get(t);if(r&&r.ma)return BP().add(r.key);{let e=BP();const r=n.pa.get(t);if(!r)return e;for(const t of r){const r=n.ga.get(t);e=e.unionWith(r.view.la)}return e}}async function gV(e,t){const n=gR(e),r=await kj(n.localStore,t.query,!0),i=t.view.Ra(r);return n.isPrimaryClient&&cV(n,t.targetId,i.da),i}async function vV(e,t){const n=gR(e);return Ej(n.localStore,t).then((e=>pV(n,e)))}async function yV(e,t,n,r){const i=gR(e),o=await function(e,t){const n=gR(e),r=gR(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(e=>r.vn(e,t).next((t=>t?n.localDocuments.getDocuments(e,t):JR.resolve(null)))))}(i.localStore,t);null!==o?("pending"===n?await gB(i.remoteStore):"acknowledged"===n||"rejected"===n?(sV(i,t,r||null),aV(i,t),function(e,t){gR(gR(e).mutationQueue).Mn(t)}(i.localStore,t)):fR(),await pV(i,o)):cR("SyncEngine","Cannot apply mutation batch with id: "+t)}async function bV(e,t,n){const r=gR(e),i=[],o=[];for(const a of t){let e;const t=r.pa.get(a);if(t&&0!==t.length){e=await xj(r.localStore,yP(t[0]));for(const e of t){const t=r.ga.get(e),n=await gV(r,t);n.snapshot&&o.push(n.snapshot)}}else{const t=await _j(r.localStore,a);e=await xj(r.localStore,t),await ZB(r,xV(t),a,!1,e.resumeToken)}i.push(e)}return r.fa.u_(o),i}function xV(e){return pP(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function wV(e){return function(e){return gR(gR(e).persistence).Li()}(gR(e).localStore)}async function kV(e,t,n,r){const i=gR(e);if(i.Fa)return void cR("SyncEngine","Ignoring unexpected query state notification.");const o=i.pa.get(t);if(o&&o.length>0)switch(n){case"current":case"not-current":{const e=await Ej(i.localStore,CP(o[0])),r=PL.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,eO.EMPTY_BYTE_STRING);await pV(i,e,r);break}case"rejected":await wj(i.localStore,t,!0),lV(i,t,r);break;default:fR()}}async function _V(e,t,n){const r=EV(e);if(r.Fa){for(const e of t){if(r.pa.has(e)){cR("SyncEngine","Adding an already active target "+e);continue}const t=await _j(r.localStore,e),n=await xj(r.localStore,t);await ZB(r,xV(t),n.targetId,!1,n.resumeToken),rB(r.remoteStore,n)}for(const e of n)r.pa.has(e)&&await wj(r.localStore,e,!1).then((()=>{iB(r.remoteStore,e),lV(r,e)})).catch(QR)}}function EV(e){const t=gR(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=tV.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=mV.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=rV.bind(null,t),t.fa.u_=jB.bind(null,t.eventManager),t.fa.xa=BB.bind(null,t.eventManager),t}function CV(e){const t=gR(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=iV.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=oV.bind(null,t),t}class IV{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Gj(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return mj(this.persistence,new pj,e.initialUser,this.serializer)}createPersistence(e){return new tj(rj.Hr,this.serializer)}createSharedClientState(e){return new Mj}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class SV extends IV{constructor(e,t,n){super(),this.Na=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Na.initialize(this,e),await CV(this.Na.syncEngine),await gB(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(e){return mj(this.persistence,new pj,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new DF(n,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const n=new uD(t,this.persistence);return new lD(e.asyncQueue,n)}createPersistence(e){const t=cj(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vF.withCacheSize(this.cacheSizeBytes):vF.DEFAULT;return new sj(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Wj(),Hj(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Mj}}class NV extends SV{constructor(e,t){super(e,t,!1),this.Na=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Na.syncEngine;this.sharedClientState instanceof Lj&&(this.sharedClientState.syncEngine={Zs:yV.bind(null,t),Xs:kV.bind(null,t),eo:_V.bind(null,t),Li:wV.bind(null,t),Ys:vV.bind(null,t)},await this.sharedClientState.start()),await this.persistence.fi((async e=>{await async function(e,t){const n=gR(e);if(EV(n),CV(n),!0===t&&!0!==n.Fa){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await bV(n,e.toArray());n.Fa=!0,await IB(n.remoteStore,!0);for(const r of t)rB(n.remoteStore,r)}else if(!1===t&&!1!==n.Fa){const e=[];let t=Promise.resolve();n.pa.forEach(((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then((()=>(lV(n,i),wj(n.localStore,i,!0)))),iB(n.remoteStore,i)})),await t,await bV(n,e),function(e){const t=gR(e);t.Sa.forEach(((e,n)=>{iB(t.remoteStore,n)})),t.ba.mr(),t.Sa=new Map,t.wa=new HD(BR.comparator)}(n),n.Fa=!1,await IB(n.remoteStore,!1)}}(this.Na.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())}))}createSharedClientState(e){const t=Wj();if(!Lj.D(t))throw new yR(vR.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=cj(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new Lj(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class TV{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>nV(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=fV.bind(null,this.syncEngine),await IB(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new LB}createDatastore(e){const t=Gj(e.databaseInfo.databaseId),n=function(e){return new qj(e)}(e.databaseInfo);return function(e,t,n,r){return new Jj(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new eB(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,(e=>nV(this.syncEngine,e,0)),jj.D()?new jj:new Fj)}createSyncEngine(e,t){return function(e,t,n,r,i,o,a){const s=new QB(e,t,n,r,i,o);return a&&(s.Fa=!0),s}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e;await async function(e){const t=gR(e);cR("RemoteStore","RemoteStore shutting down."),t.v_.add(5),await nB(t),t.M_.shutdown(),t.x_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate()}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function AV(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class RV{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):dR("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,t){this.muted||setTimeout((()=>{this.muted||e(t)}),0)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class DV{constructor(e,t){this.ka=e,this.serializer=t,this.metadata=new bR,this.buffer=new Uint8Array,this.qa=new TextDecoder("utf-8"),this.Qa().then((e=>{e&&e.ea()?this.metadata.resolve(e.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.X_)}`))}),(e=>this.metadata.reject(e)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const e=await this.Ka();if(null===e)return null;const t=this.qa.decode(e),n=Number(t);isNaN(n)&&this.$a(`length string (${t}) is not valid number`);const r=await this.Ua(n);return new UB(JSON.parse(r),e.length+n)}Wa(){return this.buffer.findIndex((e=>e==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0&&!(await this.Ga()););if(0===this.buffer.length)return null;const e=this.Wa();e<0&&this.$a("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async Ua(e){for(;this.buffer.length<e;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const t=this.qa.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}$a(e){throw this.ka.cancel(),new Error(`Invalid bundle format: ${e}`)}async Ga(){const e=await this.ka.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class OV{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new yR(vR.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=gR(e),r={documents:t.map((e=>tM(n.serializer,e)))},i=await n.vo("BatchGetDocuments",n.serializer.databaseId,MR.emptyPath(),r,t.length),o=new Map;i.forEach((e=>{const t=function(e,t){return"found"in t?function(e,t){mR(!!t.found),t.found.name,t.found.updateTime;const n=nM(e,t.found.name),r=QL(t.found.updateTime),i=t.found.createTime?QL(t.found.createTime):PR.min(),o=new RO({mapValue:{fields:t.found.fields}});return OO.newFoundDocument(n,r,i,o)}(e,t):"missing"in t?function(e,t){mR(!!t.missing),mR(!!t.readTime);const n=nM(e,t.missing),r=QL(t.readTime);return OO.newNoDocument(n,r)}(e,t):fR()}(n.serializer,e);o.set(t.key.toString(),t)}));const a=[];return t.forEach((e=>{const t=o.get(e.toString());mR(!!t),a.push(t)})),a}(this.datastore,e);return t.forEach((e=>this.recordVersion(e))),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new yL(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach((t=>{e.delete(t.key.toString())})),e.forEach(((e,t)=>{const n=BR.fromPath(t);this.mutations.push(new bL(n,this.precondition(n)))})),await async function(e,t){const n=gR(e),r={writes:t.map((e=>uM(n.serializer,e)))};await n.So("Commit",n.serializer.databaseId,MR.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw fR();t=PR.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new yR(vR.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(PR.min())?oL.exists(!1):oL.updateTime(t):oL.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(PR.min()))throw new yR(vR.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return oL.updateTime(t)}return oL.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class PV{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.za=n.maxAttempts,this.jo=new Kj(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const e=new OV(this.datastore),t=this.Ja(e);t&&t.then((t=>{this.asyncQueue.enqueueAndForget((()=>e.commit().then((()=>{this.deferred.resolve(t)})).catch((e=>{this.Ya(e)}))))})).catch((e=>{this.Ya(e)}))}))}Ja(e){try{const t=this.updateFunction(e);return!dD(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Ya(e){this.za>0&&this.Za(e)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(e)}Za(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!IL(t)}return!1}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class LV{constructor(e,t,n,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=aR.UNAUTHENTICATED,this.clientId=TR.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async e=>{cR("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e})),this.appCheckCredentials.start(n,(e=>(cR("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new yR(vR.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new bR;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(TW){const n=AB(TW,"Failed to shutdown persistence");e.reject(n)}})),e.promise}}async function MV(e,t){e.asyncQueue.verifyOperationInProgress(),cR("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener((async e=>{r.isEqual(e)||(await gj(t.localStore,e),r=e)})),t.persistence.setDatabaseDeletedListener((()=>e.terminate())),e._offlineComponents=t}async function FV(e,t){e.asyncQueue.verifyOperationInProgress();const n=await BV(e);cR("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener((e=>CB(t.remoteStore,e))),e.setAppCheckTokenChangeListener(((e,n)=>CB(t.remoteStore,n))),e._onlineComponents=t}function jV(e){return"FirebaseError"===e.name?e.code===vR.FAILED_PRECONDITION||e.code===vR.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}async function BV(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){cR("FirestoreClient","Using user provided OfflineComponentProvider");try{await MV(e,e._uninitializedComponentsProvider._offline)}catch(TW){const n=TW;if(!jV(n))throw n;hR("Error using user provided cache. Falling back to memory cache: "+n),await MV(e,new IV)}}else cR("FirestoreClient","Using default OfflineComponentProvider"),await MV(e,new IV);return e._offlineComponents}async function VV(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(cR("FirestoreClient","Using user provided OnlineComponentProvider"),await FV(e,e._uninitializedComponentsProvider._online)):(cR("FirestoreClient","Using default OnlineComponentProvider"),await FV(e,new TV))),e._onlineComponents}function zV(e){return BV(e).then((e=>e.persistence))}function UV(e){return BV(e).then((e=>e.localStore))}function $V(e){return VV(e).then((e=>e.remoteStore))}function qV(e){return VV(e).then((e=>e.syncEngine))}async function WV(e){const t=await VV(e),n=t.eventManager;return n.onListen=JB.bind(null,t.syncEngine),n.onUnlisten=eV.bind(null,t.syncEngine),n}function HV(e,t,n={}){const r=new bR;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new RV({next:o=>{t.enqueueAndForget((()=>FB(e,a)));const s=o.docs.has(n);!s&&o.fromCache?i.reject(new yR(vR.UNAVAILABLE,"Failed to get document because the client is offline.")):s&&o.fromCache&&r&&"server"===r.source?i.reject(new yR(vR.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new zB(fP(n.path),o,{includeMetadataChanges:!0,Z_:!0});return MB(e,a)}(await WV(e),e.asyncQueue,t,n,r))),r.promise}function GV(e,t,n={}){const r=new bR;return e.asyncQueue.enqueueAndForget((async()=>function(e,t,n,r,i){const o=new RV({next:n=>{t.enqueueAndForget((()=>FB(e,a))),n.fromCache&&"server"===r.source?i.reject(new yR(vR.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new zB(n,o,{includeMetadataChanges:!0,Z_:!0});return MB(e,a)}(await WV(e),e.asyncQueue,t,n,r))),r.promise}function KV(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?NL().encode(e):e,function(e,t){return new DV(e,t)}(function(e,t){if(e instanceof Uint8Array)return AV(e,t);if(e instanceof ArrayBuffer)return AV(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Gj(t));e.asyncQueue.enqueueAndForget((async()=>{!function(e,t,n){const r=gR(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=gR(e),r=QL(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(e=>n.$r.getBundleMetadata(e,t.id))).then((e=>!!e&&e.createTime.compareTo(r)>=0))}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(WB(r));const i=new qB(r,e.localStore,t.serializer);let o=await t.Oa();for(;o;){const e=await i.na(o);e&&n._updateProgress(e),o=await t.Oa()}const a=await i.complete();return await pV(e,a.sa,void 0),await function(e,t){const n=gR(e);return n.persistence.runTransaction("Save bundle","readwrite",(e=>n.$r.saveBundleMetadata(e,t)))}(e.localStore,r),n._completeWith(a.progress),Promise.resolve(a.ia)}catch(e){return hR("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e),Promise.resolve(new Set)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */)(r,t,n).then((e=>{r.sharedClientState.notifyBundleLoaded(e)}))}(await qV(e),i,r)}))}
/**
             * @license
             * Copyright 2023 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function YV(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}const XV=new Map;
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function QV(e,t,n){if(!n)throw new yR(vR.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function JV(e,t,n,r){if(!0===t&&!0===r)throw new yR(vR.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function ZV(e){if(!BR.isDocumentKey(e))throw new yR(vR.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function ez(e){if(BR.isDocumentKey(e))throw new yR(vR.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function tz(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":fR()}function nz(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new yR(vR.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tz(e);throw new yR(vR.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function rz(e,t){if(t<=0)throw new yR(vR.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class iz{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new yR(vR.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new yR(vR.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JV("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=YV(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new yR(vR.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (must not be NaN)`);if(e.timeoutSeconds<5)throw new yR(vR.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (minimum allowed value is 5)`);if(e.timeoutSeconds>30)throw new yR(vR.INVALID_ARGUMENT,`invalid long polling timeout: ${e.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class oz{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new iz({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new yR(vR.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new yR(vR.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new iz(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new wR;switch(e.type){case"firstParty":return new CR(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new yR(vR.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=XV.get(e);t&&(cR("ComponentProvider","Removing Datastore"),XV.delete(e),t.terminate())}(this),Promise.resolve()}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
let az=class e{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(t){return new e(this.firestore,t,this._query)}},sz=class e{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new lz(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new e(this.firestore,t,this._key)}},lz=class e extends az{constructor(e,t,n){super(e,t,fP(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new sz(this.firestore,null,new BR(e))}withConverter(t){return new e(this.firestore,t,this._path)}};function uz(e,t,...n){if(e=Sx(e),QV("collection","path",t),e instanceof oz){const r=MR.fromString(t,...n);return ez(r),new lz(e,null,r)}{if(!(e instanceof sz||e instanceof lz))throw new yR(vR.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(MR.fromString(t,...n));return ez(r),new lz(e.firestore,null,r)}}function cz(e,t,...n){if(e=Sx(e),1===arguments.length&&(t=TR.newId()),QV("doc","path",t),e instanceof oz){const r=MR.fromString(t,...n);return ZV(r),new sz(e,null,new BR(r))}{if(!(e instanceof sz||e instanceof lz))throw new yR(vR.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(MR.fromString(t,...n));return ZV(r),new sz(e.firestore,e instanceof lz?e.converter:null,new BR(r))}}function dz(e,t){return e=Sx(e),t=Sx(t),(e instanceof sz||e instanceof lz)&&(t instanceof sz||t instanceof lz)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function hz(e,t){return e=Sx(e),t=Sx(t),e instanceof az&&t instanceof az&&e.firestore===t.firestore&&wP(e._query,t._query)&&e.converter===t.converter
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */}class pz{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new Kj(this,"async_queue_retry"),this._u=()=>{const e=Hj();e&&cR("AsyncQueue","Visibility state changed to "+e.visibilityState),this.jo.Ko()};const e=Hj();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const t=Hj();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise((()=>{}));const t=new bR;return this.uu((()=>this.tu&&this.su?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.eu.push(e),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(AW){if(!rD(AW))throw AW;cR("AsyncQueue","Operation failed with retryable error: "+AW)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(e){const t=this.Xa.then((()=>(this.iu=!0,e().catch((e=>{this.ru=e,this.iu=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e);throw dR("INTERNAL UNHANDLED ERROR: ",t),e})).then((e=>(this.iu=!1,e))))));return this.Xa=t,t}enqueueAfterDelay(e,t,n){this.au(),this.ou.indexOf(e)>-1&&(t=0);const r=TB.createAndSchedule(this,e,t,n,(e=>this.lu(e)));return this.nu.push(r),r}au(){this.ru&&fR()}verifyOperationInProgress(){}async hu(){let e;do{e=this.Xa,await e}while(e!==this.Xa)}Pu(e){for(const t of this.nu)if(t.timerId===e)return!0;return!1}Iu(e){return this.hu().then((()=>{this.nu.sort(((e,t)=>e.targetTimeMs-t.targetTimeMs));for(const t of this.nu)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.hu()}))}Tu(e){this.ou.push(e)}lu(e){const t=this.nu.indexOf(e);this.nu.splice(t,1)}}function fz(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e,["next","error","complete"])}class mz{constructor(){this._progressObserver={},this._taskCompletionResolver=new bR,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */let gz=class extends oz{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new pz,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||yz(this),this._firestoreClient.terminate()}};function vz(e){return e._firestoreClient||yz(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function yz(e){var t,n,r;const i=e._freezeSettings(),o=function(e,t,n,r){return new lO(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,YV(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new LV(e._authCredentials,e._appCheckCredentials,e._queue,o),(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function bz(e,t,n){const r=new bR;return e.asyncQueue.enqueue((async()=>{try{await MV(e,n),await FV(e,t),r.resolve()}catch(e){const n=e;if(!jV(n))throw n;hR("Error enabling indexeddb cache. Falling back to memory cache: "+n),r.reject(n)}})).then((()=>r.promise))}function xz(e){return function(e){const t=new bR;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t){const n=gR(e);uB(n.remoteStore)||cR("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=gR(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e)))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ca.get(e)||[];r.push(t),n.Ca.set(e,r)}catch(e){const n=AB(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await qV(e),t))),t.promise}(vz(e=nz(e,gz)))}function wz(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await zV(e),n=await $V(e);return t.setNetworkEnabled(!0),function(e){const t=gR(e);return t.v_.delete(0),tB(t)}(n)}))}(vz(e=nz(e,gz)))}function kz(e){return function(e){return e.asyncQueue.enqueue((async()=>{const t=await zV(e),n=await $V(e);return t.setNetworkEnabled(!1),async function(e){const t=gR(e);t.v_.add(0),await nB(t),t.x_.set("Offline")}(n)}))}(vz(e=nz(e,gz)))}function _z(e,t){return function(e,t){return e.asyncQueue.enqueue((async()=>function(e,t){const n=gR(e);return n.persistence.runTransaction("Get named query","readonly",(e=>n.$r.getNamedQuery(e,t)))}(await UV(e),t)))}(vz(e=nz(e,gz)),t).then((t=>t?new az(e,null,t.query):null))}function Ez(e){if(e._initialized||e._terminated)throw new yR(vR.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Cz{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Cz(eO.fromBase64String(e))}catch(e){throw new yR(vR.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Cz(eO.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */let Iz=class{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new yR(vR.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new jR(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}},Sz=class{constructor(e){this._methodName=e}};
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class Nz{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yR(vR.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yR(vR.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return AR(this._lat,e._lat)||AR(this._long,e._long)}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const Tz=/^__.*__$/;class Az{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new fL(e,this.data,this.fieldMask,t,this.fieldTransforms):new pL(e,this.data,t,this.fieldTransforms)}}class Rz{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new fL(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function Dz(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fR()}}class Oz{constructor(e,t,n,r,i,o){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Eu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new Oz(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.mu(e),r}fu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Au({path:n,Vu:!1});return r.Eu(),r}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return Zz(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return void 0!==this.fieldMask.find((t=>e.isPrefixOf(t)))||void 0!==this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(0===e.length)throw this.pu("Document fields must not be empty");if(Dz(this.du)&&Tz.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class Pz{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Gj(e)}Su(e,t,n,r=!1){return new Oz({du:e,methodName:t,wu:n,path:jR.emptyPath(),Vu:!1,yu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Lz(e){const t=e._freezeSettings(),n=Gj(e._databaseId);return new Pz(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Mz(e,t,n,r,i,o={}){const a=e.Su(o.merge||o.mergeFields?2:0,t,n,i);Yz("Data must be an object, but it was:",a,r);const s=Gz(r,a);let l,u;if(o.merge)l=new JD(a.fieldMask),u=a.fieldTransforms;else if(o.mergeFields){const e=[];for(const r of o.mergeFields){const i=Xz(t,r,n);if(!a.contains(i))throw new yR(vR.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);eU(e,i)||e.push(i)}l=new JD(e),u=a.fieldTransforms.filter((e=>l.covers(e.field)))}else l=null,u=a.fieldTransforms;return new Az(new RO(s),l,u)}class Fz extends Sz{_toFieldTransform(e){if(2!==e.du)throw 1===e.du?e.pu(`${this._methodName}() can only appear at the top level of your update data`):e.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fz}}function jz(e,t,n){return new Oz({du:3,wu:t.settings.wu,methodName:e._methodName,Vu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Bz extends Sz{_toFieldTransform(e){return new rL(e.path,new YP)}isEqual(e){return e instanceof Bz}}class Vz extends Sz{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=jz(this,e,!0),n=this.bu.map((e=>Hz(e,t))),r=new XP(n);return new rL(e.path,r)}isEqual(e){return e instanceof Vz&&bx(this.bu,e.bu)}}class zz extends Sz{constructor(e,t){super(e),this.bu=t}_toFieldTransform(e){const t=jz(this,e,!0),n=this.bu.map((e=>Hz(e,t))),r=new JP(n);return new rL(e.path,r)}isEqual(e){return e instanceof zz&&bx(this.bu,e.bu)}}class Uz extends Sz{constructor(e,t){super(e),this.Du=t}_toFieldTransform(e){const t=new eL(e.serializer,qP(e.serializer,this.Du));return new rL(e.path,t)}isEqual(e){return e instanceof Uz&&this.Du===e.Du}}function $z(e,t,n,r){const i=e.Su(1,t,n);Yz("Data must be an object, but it was:",i,r);const o=[],a=RO.empty();qD(r,((e,r)=>{const s=Jz(t,e,n);r=Sx(r);const l=i.fu(s);if(r instanceof Fz)o.push(s);else{const e=Hz(r,l);null!=e&&(o.push(s),a.set(s,e))}}));const s=new JD(o);return new Rz(a,s,i.fieldTransforms)}function qz(e,t,n,r,i,o){const a=e.Su(1,t,n),s=[Xz(t,r,n)],l=[i];if(o.length%2!=0)throw new yR(vR.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<o.length;h+=2)s.push(Xz(t,o[h])),l.push(o[h+1]);const u=[],c=RO.empty();for(let h=s.length-1;h>=0;--h)if(!eU(u,s[h])){const e=s[h];let t=l[h];t=Sx(t);const n=a.fu(e);if(t instanceof Fz)u.push(e);else{const r=Hz(t,n);null!=r&&(u.push(e),c.set(e,r))}}const d=new JD(u);return new Rz(c,d,a.fieldTransforms)}function Wz(e,t,n,r=!1){return Hz(n,e.Su(r?4:3,t))}function Hz(e,t){if(Kz(e=Sx(e)))return Yz("Unsupported field value:",t,e),Gz(e,t);if(e instanceof Sz)return function(e,t){if(!Dz(t.du))throw t.pu(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.pu(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Vu&&4!==t.du)throw t.pu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Hz(i,t.gu(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=Sx(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return qP(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=OR.fromDate(e);return{timestampValue:KL(t.serializer,n)}}if(e instanceof OR){const n=new OR(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:KL(t.serializer,n)}}if(e instanceof Nz)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Cz)return{bytesValue:YL(t.serializer,e._byteString)};if(e instanceof sz){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.pu(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:JL(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.pu(`Unsupported field value: ${tz(e)}`)}(e,t)}function Gz(e,t){const n={};return WD(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):qD(e,((e,r)=>{const i=Hz(r,t.Ru(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function Kz(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof OR||e instanceof Nz||e instanceof Cz||e instanceof sz||e instanceof Sz)}function Yz(e,t,n){if(!Kz(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=tz(n);throw"an object"===r?t.pu(e+" a custom object"):t.pu(e+" "+r)}}function Xz(e,t,n){if((t=Sx(t))instanceof Iz)return t._internalPath;if("string"==typeof t)return Jz(e,t);throw Zz("Field path arguments must be of type string or ",e,!1,void 0,n)}const Qz=new RegExp("[~\\*/\\[\\]]");function Jz(e,t,n){if(t.search(Qz)>=0)throw Zz(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Iz(...t.split("."))._internalPath}catch(DW){throw Zz(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Zz(e,t,n,r,i){const o=r&&!r.isEmpty(),a=void 0!==i;let s=`Function ${t}() called with invalid data`;n&&(s+=" (via `toFirestore()`)"),s+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new yR(vR.INVALID_ARGUMENT,s+e+l)}function eU(e,t){return e.some((e=>e.isEqual(t)))}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class tU{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new sz(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new nU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(rU("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class nU extends tU{data(){return super.data()}}function rU(e,t){return"string"==typeof t?Jz(e,t):t instanceof Iz?t._internalPath:t._delegate._internalPath}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function iU(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new yR(vR.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class oU{}class aU extends oU{}function sU(e,t,...n){let r=[];t instanceof oU&&r.push(t),r=r.concat(n),function(e){const t=e.filter((e=>e instanceof uU)).length,n=e.filter((e=>e instanceof lU)).length;if(t>1||t>0&&n>0)throw new yR(vR.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(r);for(const i of r)e=i._apply(e);return e}class lU extends aU{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new lU(e,t,n)}_apply(e){const t=this._parse(e);return vU(e._query,t),new az(e.firestore,e.converter,bP(e._query,t))}_parse(e){const t=Lz(e.firestore),n=function(e,t,n,r,i,o,a){let s;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new yR(vR.INVALID_ARGUMENT,`Invalid Query. You can't perform '${o}' queries on documentId().`);if("in"===o||"not-in"===o){gU(a,o);const t=[];for(const n of a)t.push(mU(r,e,n));s={arrayValue:{values:t}}}else s=mU(r,e,a)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||gU(a,o),s=Wz(n,t,a,"in"===o||"not-in"===o);return VO.create(i,o,s)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}class uU extends oU{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new uU(e,t)}_parse(e){const t=this._queryConstraints.map((t=>t._parse(e))).filter((e=>e.getFilters().length>0));return 1===t.length?t[0]:zO.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)vU(n,i),n=bP(n,i)}(e._query,t),new az(e.firestore,e.converter,bP(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class cU extends aU{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new cU(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new yR(vR.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new yR(vR.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new FO(t,n)}(e._query,this._field,this._direction);return new az(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new hP(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}class dU extends aU{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new dU(e,t,n)}_apply(e){return new az(e.firestore,e.converter,xP(e._query,this._limit,this._limitType))}}class hU extends aU{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new hU(e,t,n)}_apply(e){const t=fU(e,this.type,this._docOrFields,this._inclusive);return new az(e.firestore,e.converter,function(e,t){return new hP(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}class pU extends aU{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new pU(e,t,n)}_apply(e){const t=fU(e,this.type,this._docOrFields,this._inclusive);return new az(e.firestore,e.converter,function(e,t){return new hP(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function fU(e,t,n,r){if(n[0]=Sx(n[0]),n[0]instanceof tU)return function(e,t,n,r,i){if(!r)throw new yR(vR.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const o=[];for(const a of vP(e))if(a.field.isKeyField())o.push(bO(t,r.key));else{const e=r.data.field(a.field);if(oO(e))throw new yR(vR.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=a.field.canonicalString();throw new yR(vR.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}o.push(e)}return new PO(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Lz(e.firestore);return function(e,t,n,r,i,o){const a=e.explicitOrderBy;if(i.length>a.length)throw new yR(vR.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const s=[];for(let l=0;l<i.length;l++){const o=i[l];if(a[l].field.isKeyField()){if("string"!=typeof o)throw new yR(vR.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof o}`);if(!gP(e)&&-1!==o.indexOf("/"))throw new yR(vR.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${r}() must be a plain document ID, but '${o}' contains a slash.`);const n=e.path.child(MR.fromString(o));if(!BR.isDocumentKey(n))throw new yR(vR.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new BR(n);s.push(bO(t,i))}else{const e=Wz(n,r,o);s.push(e)}}return new PO(s,o)}(e._query,e.firestore._databaseId,i,t,n,r)}}function mU(e,t,n){if("string"==typeof(n=Sx(n))){if(""===n)throw new yR(vR.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gP(t)&&-1!==n.indexOf("/"))throw new yR(vR.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(MR.fromString(n));if(!BR.isDocumentKey(r))throw new yR(vR.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return bO(e,new BR(r))}if(n instanceof sz)return bO(e,n._key);throw new yR(vR.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tz(n)}.`)}function gU(e,t){if(!Array.isArray(e)||0===e.length)throw new yR(vR.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function vU(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new yR(vR.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new yR(vR.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class yU{convertValue(e,t="none"){switch(hO(e)){case 0:return null;case 1:return e.booleanValue;case 2:return rO(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(iO(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw fR()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const n={};return qD(e,((e,r)=>{n[e]=this.convertValue(r,t)})),n}convertGeoPoint(e){return new Nz(rO(e.latitude),rO(e.longitude))}convertArray(e,t){return(e.values||[]).map((e=>this.convertValue(e,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const n=aO(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(sO(e));default:return null}}convertTimestamp(e){const t=nO(e);return new OR(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=MR.fromString(e);mR(kM(n));const r=new uO(n.get(1),n.get(3)),i=new BR(n.popFirst(5));return r.isEqual(t)||dR(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function bU(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class xU extends yU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cz(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sz(this.firestore,null,t)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class wU{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}let kU=class extends tU{constructor(e,t,n,r,i,o){super(e,t,n,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new _U(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(rU("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}},_U=class extends kU{data(e={}){return super.data(e)}},EU=class{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new wU(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach((n=>{e.call(t,new _U(this._firestore,this._userDataWriter,n.key,n,new wU(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yR(vR.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map((n=>{const r=new _U(e._firestore,e._userDataWriter,n.doc.key,n.doc,new wU(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((e=>t||3!==e.type)).map((t=>{const r=new _U(e._firestore,e._userDataWriter,t.doc.key,t.doc,new wU(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,o=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),o=n.indexOf(t.doc.key)),{type:CU(t.type),doc:r,oldIndex:i,newIndex:o}}))}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function CU(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fR()}}function IU(e,t){return e instanceof kU&&t instanceof kU?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof EU&&t instanceof EU&&e._firestore===t._firestore&&hz(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class SU extends yU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Cz(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new sz(this.firestore,null,t)}}function NU(e){e=nz(e,sz);const t=nz(e.firestore,gz),n=vz(t),r=new SU(t);return function(e,t){const n=new bR;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await function(e,t){const n=gR(e);return n.persistence.runTransaction("read document","readonly",(e=>n.localDocuments.getDocument(e,t)))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new yR(vR.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=AB(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await UV(e),t,n))),n.promise}(n,e._key).then((n=>new kU(t,r,e._key,n,new wU(null!==n&&n.hasLocalMutations,!0),e.converter)))}function TU(e){e=nz(e,az);const t=nz(e.firestore,gz),n=vz(t),r=new SU(t);return function(e,t){const n=new bR;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){try{const r=await kj(e,t,!0),i=new KB(t,r.hs),o=i.ha(r.documents),a=i.applyChanges(o,!1);n.resolve(a.snapshot)}catch(e){const r=AB(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await UV(e),t,n))),n.promise}(n,e._query).then((n=>new EU(t,r,e,n)))}function AU(e,t,n){e=nz(e,sz);const r=nz(e.firestore,gz),i=bU(e.converter,t,n);return LU(r,[Mz(Lz(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,oL.none())])}function RU(e,t,n,...r){e=nz(e,sz);const i=nz(e.firestore,gz),o=Lz(i);let a;return a="string"==typeof(t=Sx(t))||t instanceof Iz?qz(o,"updateDoc",e._key,t,n,r):$z(o,"updateDoc",e._key,t),LU(i,[a.toMutation(e._key,oL.exists(!0))])}function DU(e,t){const n=nz(e.firestore,gz),r=cz(e),i=bU(e.converter,t);return LU(n,[Mz(Lz(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,oL.exists(!1))]).then((()=>r))}function OU(e,...t){var n,r,i;e=Sx(e);let o={includeMetadataChanges:!1},a=0;"object"!=typeof t[a]||fz(t[a])||(o=t[a],a++);const s={includeMetadataChanges:o.includeMetadataChanges};if(fz(t[a])){const e=t[a];t[a]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[a+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[a+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,u,c;if(e instanceof sz)u=nz(e.firestore,gz),c=fP(e._key.path),l={next:n=>{t[a]&&t[a](MU(u,e,n))},error:t[a+1],complete:t[a+2]};else{const n=nz(e,az);u=nz(n.firestore,gz),c=n._query;const r=new SU(u);l={next:e=>{t[a]&&t[a](new EU(u,r,n,e))},error:t[a+1],complete:t[a+2]},iU(e._query)}return function(e,t,n,r){const i=new RV(r),o=new zB(t,i,n);return e.asyncQueue.enqueueAndForget((async()=>MB(await WV(e),o))),()=>{i.La(),e.asyncQueue.enqueueAndForget((async()=>FB(await WV(e),o)))}}(vz(u),c,s,l)}function PU(e,t){return function(e,t){const n=new RV(t);return e.asyncQueue.enqueueAndForget((async()=>function(e,t){gR(e).K_.add(t),t.next()}(await WV(e),n))),()=>{n.La(),e.asyncQueue.enqueueAndForget((async()=>function(e,t){gR(e).K_.delete(t)}(await WV(e),n)))}}(vz(e=nz(e,gz)),fz(t)?t:{next:t})}function LU(e,t){return function(e,t){const n=new bR;return e.asyncQueue.enqueueAndForget((async()=>async function(e,t,n){const r=CV(e);try{const e=await function(e,t){const n=gR(e),r=OR.now(),i=t.reduce(((e,t)=>e.add(t.key)),BP());let o,a;return n.persistence.runTransaction("Locally write mutations","readwrite",(e=>{let s=AP(),l=BP();return n.os.getEntries(e,i).next((e=>{s=e,s.forEach(((e,t)=>{t.isValidDocument()||(l=l.add(e))}))})).next((()=>n.localDocuments.getOverlayedDocuments(e,s))).next((i=>{o=i;const a=[];for(const e of t){const t=dL(e,o.get(e.key).overlayedDocument);null!=t&&a.push(new fL(e.key,t,DO(t.value.mapValue),oL.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)})).next((t=>{a=t;const r=t.applyToLocalDocumentSet(o,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)}))})).then((()=>({batchId:a.batchId,changes:OP(o)})))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Da[e.currentUser.toKey()];r||(r=new HD(AR)),r=r.insert(t,n),e.Da[e.currentUser.toKey()]=r}(r,e.batchId,n),await pV(r,e.changes),await gB(r.remoteStore)}catch(e){const t=AB(e,"Failed to persist write");n.reject(t)}}(await qV(e),t,n))),n.promise}(vz(e),t)}function MU(e,t,n){const r=n.docs.get(t._key),i=new SU(e);return new kU(e,i,t._key,r,new wU(n.hasPendingWrites,n.fromCache),t.converter)}
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const FU={maxAttempts:5};
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */let jU=class{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Lz(e)}set(e,t,n){this._verifyNotCommitted();const r=BU(e,this._firestore),i=bU(r.converter,t,n),o=Mz(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,oL.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=BU(e,this._firestore);let o;return o="string"==typeof(t=Sx(t))||t instanceof Iz?qz(this._dataReader,"WriteBatch.update",i._key,t,n,r):$z(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(o.toMutation(i._key,oL.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=BU(e,this._firestore);return this._mutations=this._mutations.concat(new yL(t._key,oL.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new yR(vR.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function BU(e,t){if((e=Sx(e)).firestore!==t)throw new yR(vR.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */let VU=class extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Lz(e)}get(e){const t=BU(e,this._firestore),n=new xU(this._firestore);return this._transaction.lookup([t._key]).then((e=>{if(!e||1!==e.length)return fR();const r=e[0];if(r.isFoundDocument())return new tU(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new tU(this._firestore,n,t._key,null,t.converter);throw fR()}))}set(e,t,n){const r=BU(e,this._firestore),i=bU(r.converter,t,n),o=Mz(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this}update(e,t,n,...r){const i=BU(e,this._firestore);let o;return o="string"==typeof(t=Sx(t))||t instanceof Iz?qz(this._dataReader,"Transaction.update",i._key,t,n,r):$z(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,o),this}delete(e){const t=BU(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=BU(e,this._firestore),n=new SU(this._firestore);return super.get(e).then((e=>new kU(this._firestore,n,t._key,e._document,new wU(!1,!1),t.converter)))}};function zU(e,t,n){e=nz(e,gz);const r=Object.assign(Object.assign({},FU),n);return function(e){if(e.maxAttempts<1)throw new yR(vR.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new bR;return e.asyncQueue.enqueueAndForget((async()=>{const i=await function(e){return VV(e).then((e=>e.datastore))}(e);new PV(e.asyncQueue,i,n,t,r).ja()})),r.promise}(vz(e),(n=>t(new VU(e,n))),r)}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function UU(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new yR("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function $U(){if("undefined"==typeof Uint8Array)throw new yR("unimplemented","Uint8Arrays are not available in this environment.")}function qU(){if("undefined"==typeof atob)throw new yR("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(e,t=!0){!function(e){sR=e}(vw),pw(new Nx("firestore",((e,{instanceIdentifier:n,options:r})=>{const i=e.getProvider("app").getImmediate(),o=new gz(new _R(e.getProvider("auth-internal")),new SR(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new yR(vR.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new uO(e.options.projectId,t)}(i,n),i);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o}),"PUBLIC").setMultipleInstances(!0)),xw(oR,"4.4.3",e),xw(oR,"4.4.3","esm2017")}();let WU=class e{constructor(e){this._delegate=e}static fromBase64String(t){return qU(),new e(Cz.fromBase64String(t))}static fromUint8Array(t){return $U(),new e(Cz.fromUint8Array(t))}toBase64(){return qU(),this._delegate.toBase64()}toUint8Array(){return $U(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function HU(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(e,["next","error","complete"])}class GU{enableIndexedDbPersistence(e,t){return function(e,t){Ez(e=nz(e,gz));const n=vz(e);if(n._uninitializedComponentsProvider)throw new yR(vR.FAILED_PRECONDITION,"SDK cache is already specified.");hR("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=e._freezeSettings(),i=new TV;return bz(n,i,new SV(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function(e){Ez(e=nz(e,gz));const t=vz(e);if(t._uninitializedComponentsProvider)throw new yR(vR.FAILED_PRECONDITION,"SDK cache is already specified.");hR("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings(),r=new TV;return bz(t,r,new NV(r,n.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function(e){if(e._initialized&&!e._terminated)throw new yR(vR.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new bR;return e._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(e){if(!eD.D())return Promise.resolve();const t=e+"main";await eD.delete(t)}(cj(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}(e._delegate)}}class KU{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof uO||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||hR("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){!function(e,t,n,r={}){var i;const o=(e=nz(e,oz))._getSettings(),a=`${t}:${n}`;if("firestore.googleapis.com"!==o.host&&o.host!==a&&hR("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=aR.MOCK_USER;else{t=sx(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const o=r.mockUserToken.sub||r.mockUserToken.user_id;if(!o)throw new yR(vR.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new aR(o)}e._authCredentials=new kR(new xR(t,n))}}(this._delegate,e,t,n)}enableNetwork(){return wz(this._delegate)}disableNetwork(){return kz(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,JV("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return xz(this._delegate)}onSnapshotsInSync(e){return PU(this._delegate,e)}get app(){if(!this._appCompat)throw new yR("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new l$(this,uz(this._delegate,e))}catch(AW){throw e$(AW,"collection()","Firestore.collection()")}}doc(e){try{return new ZU(this,cz(this._delegate,e))}catch(AW){throw e$(AW,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new o$(this,function(e,t){if(e=nz(e,oz),QV("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new yR(vR.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new az(e,null,function(e){return new hP(MR.emptyPath(),e)}(t))}(this._delegate,e))}catch(AW){throw e$(AW,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return zU(this._delegate,(t=>e(new XU(this,t))))}batch(){return vz(this._delegate),new QU(new jU(this._delegate,(e=>LU(this._delegate,e))))}loadBundle(e){return function(e,t){const n=vz(e=nz(e,gz)),r=new mz;return KV(n,e._databaseId,t,r),r}(this._delegate,e)}namedQuery(e){return _z(this._delegate,e).then((e=>e?new o$(this,e):null))}}class YU extends yU{constructor(e){super(),this.firestore=e}convertBytes(e){return new WU(new Cz(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ZU.forKey(t,this.firestore,null)}}class XU{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new YU(e)}get(e){const t=u$(e);return this._delegate.get(t).then((e=>new r$(this._firestore,new kU(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter))))}set(e,t,n){const r=u$(e);return n?(UU("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=u$(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=u$(e);return this._delegate.delete(t),this}}class QU{constructor(e){this._delegate=e}set(e,t,n){const r=u$(e);return n?(UU("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=u$(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=u$(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class JU{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new _U(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new i$(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=JU.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new JU(e,new YU(e),t),r.set(t,i)),i}}JU.INSTANCES=new WeakMap;class ZU{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YU(e)}static forPath(e,t,n){if(e.length%2!=0)throw new yR("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ZU(t,new sz(t._delegate,n,new BR(e)))}static forKey(e,t,n){return new ZU(t,new sz(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new l$(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new l$(this.firestore,uz(this._delegate,e))}catch(AW){throw e$(AW,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=Sx(e))instanceof sz&&dz(this._delegate,e)}set(e,t){t=UU("DocumentReference.set",t);try{return t?AU(this._delegate,e,t):AU(this._delegate,e)}catch(AW){throw e$(AW,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?RU(this._delegate,e):RU(this._delegate,e,t,...n)}catch(AW){throw e$(AW,"updateDoc()","DocumentReference.update()")}}delete(){return function(e){return LU(nz(e.firestore,gz),[new yL(e._key,oL.none())])}(this._delegate)}onSnapshot(...e){const t=t$(e),n=n$(e,(e=>new r$(this.firestore,new kU(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))));return OU(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?NU(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=nz(e,sz);const t=nz(e.firestore,gz);return HV(vz(t),e._key,{source:"server"}).then((n=>MU(t,e,n)))}(this._delegate):function(e){e=nz(e,sz);const t=nz(e.firestore,gz);return HV(vz(t),e._key).then((n=>MU(t,e,n)))}(this._delegate),t.then((e=>new r$(this.firestore,new kU(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter))))}withConverter(e){return new ZU(this.firestore,e?this._delegate.withConverter(JU.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function e$(e,t,n){return e.message=e.message.replace(t,n),e}function t$(e){for(const t of e)if("object"==typeof t&&!HU(t))return t;return{}}function n$(e,t){var n,r;let i;return i=HU(e[0])?e[0]:HU(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class r${constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ZU(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return IU(this._delegate,e._delegate)}}class i$ extends r${data(e){const t=this._delegate.data(e);return this._delegate._converter||function(e,t){e||fR()}(void 0!==t),t}}class o${constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new YU(e)}where(e,t,n){try{return new o$(this.firestore,sU(this._delegate,function(e,t,n){const r=t,i=rU("where",e);return lU._create(i,r,n)}(e,t,n)))}catch(AW){throw e$(AW,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new o$(this.firestore,sU(this._delegate,function(e,t="asc"){const n=t,r=rU("orderBy",e);return cU._create(r,n)}(e,t)))}catch(AW){throw e$(AW,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new o$(this.firestore,sU(this._delegate,function(e){return rz("limit",e),dU._create("limit",e,"F")}(e)))}catch(AW){throw e$(AW,"limit()","Query.limit()")}}limitToLast(e){try{return new o$(this.firestore,sU(this._delegate,function(e){return rz("limitToLast",e),dU._create("limitToLast",e,"L")}(e)))}catch(AW){throw e$(AW,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new o$(this.firestore,sU(this._delegate,function(...e){return hU._create("startAt",e,!0)}(...e)))}catch(AW){throw e$(AW,"startAt()","Query.startAt()")}}startAfter(...e){try{return new o$(this.firestore,sU(this._delegate,function(...e){return hU._create("startAfter",e,!1)}(...e)))}catch(AW){throw e$(AW,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new o$(this.firestore,sU(this._delegate,function(...e){return pU._create("endBefore",e,!1)}(...e)))}catch(AW){throw e$(AW,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new o$(this.firestore,sU(this._delegate,function(...e){return pU._create("endAt",e,!0)}(...e)))}catch(AW){throw e$(AW,"endAt()","Query.endAt()")}}isEqual(e){return hz(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?TU(this._delegate):"server"===(null==e?void 0:e.source)?function(e){e=nz(e,az);const t=nz(e.firestore,gz),n=vz(t),r=new SU(t);return GV(n,e._query,{source:"server"}).then((n=>new EU(t,r,e,n)))}(this._delegate):function(e){e=nz(e,az);const t=nz(e.firestore,gz),n=vz(t),r=new SU(t);return iU(e._query),GV(n,e._query).then((n=>new EU(t,r,e,n)))}(this._delegate),t.then((e=>new s$(this.firestore,new EU(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))))}onSnapshot(...e){const t=t$(e),n=n$(e,(e=>new s$(this.firestore,new EU(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot))));return OU(this._delegate,t,n)}withConverter(e){return new o$(this.firestore,e?this._delegate.withConverter(JU.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}class a${constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new i$(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class s${constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new o$(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map((e=>new i$(this._firestore,e)))}docChanges(e){return this._delegate.docChanges(e).map((e=>new a$(this._firestore,e)))}forEach(e,t){this._delegate.forEach((n=>{e.call(t,new i$(this._firestore,n))}))}isEqual(e){return IU(this._delegate,e._delegate)}}class l$ extends o${constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ZU(this.firestore,e):null}doc(e){try{return new ZU(this.firestore,void 0===e?cz(this._delegate):cz(this._delegate,e))}catch(AW){throw e$(AW,"doc()","CollectionReference.doc()")}}add(e){return DU(this._delegate,e).then((e=>new ZU(this.firestore,e)))}isEqual(e){return dz(this._delegate,e._delegate)}withConverter(e){return new l$(this.firestore,e?this._delegate.withConverter(JU.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}function u$(e){return nz(e,sz)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class c${constructor(...e){this._delegate=new Iz(...e)}static documentId(){return new c$(jR.keyField().canonicalString())}isEqual(e){return(e=Sx(e))instanceof Iz&&this._delegate._internalPath.isEqual(e._internalPath)}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class d${constructor(e){this._delegate=e}static serverTimestamp(){const e=new Bz("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new d$(e)}static delete(){const e=new Fz("deleteField");return e._methodName="FieldValue.delete",new d$(e)}static arrayUnion(...e){const t=function(...e){return new Vz("arrayUnion",e)}(...e);return t._methodName="FieldValue.arrayUnion",new d$(t)}static arrayRemove(...e){const t=function(...e){return new zz("arrayRemove",e)}(...e);return t._methodName="FieldValue.arrayRemove",new d$(t)}static increment(e){const t=function(e){return new Uz("increment",e)}(e);return t._methodName="FieldValue.increment",new d$(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const h$={Firestore:KU,GeoPoint:Nz,Timestamp:OR,Blob:WU,Transaction:XU,WriteBatch:QU,DocumentReference:ZU,DocumentSnapshot:r$,Query:o$,QueryDocumentSnapshot:i$,QuerySnapshot:s$,CollectionReference:l$,FieldPath:c$,FieldValue:d$,setLogLevel:function(e){!function(e){lR.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};!
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function(e){!function(e,t){e.INTERNAL.registerComponent(new Nx("firestore-compat",(e=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},h$)))}(e,((e,t)=>new KU(e,t,new GU))),e.registerVersion("@firebase/firestore-compat","0.3.26")}(Vw);
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
const p$="firebasestorage.googleapis.com",f$="storageBucket";
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class m$ extends mx{constructor(e,t,n=0){super(y$(e),`Firebase Storage: ${t} (${y$(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,m$.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return y$(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}\n${this.customData.serverResponse}`:this.message=this._baseMessage}}var g$,v$;function y$(e){return"storage/"+e}function b$(){return new m$(g$.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function x$(){return new m$(g$.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function w$(){return new m$(g$.CANCELED,"User canceled the upload/download.")}function k$(){return new m$(g$.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function _$(e){return new m$(g$.INVALID_ARGUMENT,e)}function E$(){return new m$(g$.APP_DELETED,"The Firebase app was deleted.")}function C$(e){return new m$(g$.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function I$(e,t){return new m$(g$.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function S$(e){throw new m$(g$.INTERNAL_ERROR,"Internal error: "+e)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(g$||(g$={}));class N${constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let n;try{n=N$.makeFromUrl(e,t)}catch(AW){return new N$(e,"")}if(""===n.path)return n;throw r=e,new m$(g$.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+r+"'.");var r}static makeFromUrl(e,t){let n=null;const r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}const a=t.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${a}/v[A-Za-z0-9_]+/b/${r}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp(`^https?://${t===p$?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${r}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:o}];for(let l=0;l<s.length;l++){const t=s[l],r=t.regex.exec(e);if(r){const e=r[t.indices.bucket];let i=r[t.indices.path];i||(i=""),n=new N$(e,i),t.postModify(n);break}}if(null==n)throw function(e){return new m$(g$.INVALID_URL,"Invalid URL '"+e+"'.")}(e);return n}}class T${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function A$(e){return"string"==typeof e||e instanceof String}function R$(e){return D$()&&e instanceof Blob}function D$(){return"undefined"!=typeof Blob}function O$(e,t,n,r){if(r<t)throw _$(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw _$(`Invalid value for '${e}'. Expected ${n} or less.`)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function P$(e,t,n){let r=t;return null==n&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function L$(e){const t=encodeURIComponent;let n="?";for(const r in e)e.hasOwnProperty(r)&&(n=n+(t(r)+"=")+t(e[r])+"&");return n=n.slice(0,-1),n}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
/**
             * @license
             * Copyright 2022 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function M$(e,t){const n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(v$||(v$={}));class F${constructor(e,t,n,r,i,o,a,s,l,u,c,d=!0){this.url_=e,this.method_=t,this.headers_=n,this.body_=r,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=s,this.timeout_=l,this.progressCallback_=u,this.connectionFactory_=c,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise(((e,t)=>{this.resolve_=e,this.reject_=t,this.start_()}))}start_(){const e=(e,t)=>{if(t)return void e(!1,new j$(!1,null,!0));const n=this.connectionFactory_();this.pendingConnection_=n;const r=e=>{const t=e.loaded,n=e.lengthComputable?e.total:-1;null!==this.progressCallback_&&this.progressCallback_(t,n)};null!==this.progressCallback_&&n.addUploadProgressListener(r),n.send(this.url_,this.method_,this.body_,this.headers_).then((()=>{null!==this.progressCallback_&&n.removeUploadProgressListener(r),this.pendingConnection_=null;const t=n.getErrorCode()===v$.NO_ERROR,i=n.getStatus();if(!t||M$(i,this.additionalRetryCodes_)&&this.retry){const t=n.getErrorCode()===v$.ABORT;return void e(!1,new j$(!1,null,t))}const o=-1!==this.successCodes_.indexOf(i);e(!0,new j$(o,n))}))},t=(e,t)=>{const n=this.resolve_,r=this.reject_,i=t.connection;if(t.wasSuccessCode)try{const e=this.callback_(i,i.getResponse());!
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function(e){return void 0!==e}(e)?n():n(e)}catch(AW){r(AW)}else if(null!==i){const e=b$();e.serverResponse=i.getErrorText(),this.errorCallback_?r(this.errorCallback_(i,e)):r(e)}else t.canceled?r(this.appDelete_?E$():w$()):r(x$())};this.canceled_?t(0,new j$(!1,null,!0)):this.backoffId_=function(e,t,n){let r=1,i=null,o=null,a=!1,s=0;function l(){return 2===s}let u=!1;function c(...e){u||(u=!0,t.apply(null,e))}function d(t){i=setTimeout((()=>{i=null,e(p,l())}),t)}function h(){o&&clearTimeout(o)}function p(e,...t){if(u)return void h();if(e)return h(),void c.call(null,e,...t);if(l()||a)return h(),void c.call(null,e,...t);let n;r<64&&(r*=2),1===s?(s=2,n=0):n=1e3*(r+Math.random()),d(n)}let f=!1;function m(e){f||(f=!0,h(),u||(null!==i?(e||(s=2),clearTimeout(i),d(0)):e||(s=1)))}return d(0),o=setTimeout((()=>{a=!0,m(!0)}),n),m}(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class j${constructor(e,t,n){this.wasSuccessCode=e,this.connection=t,this.canceled=!!n}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
function B$(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function V$(...e){const t=B$();if(void 0!==t){const n=new t;for(let t=0;t<e.length;t++)n.append(e[t]);return n.getBlob()}if(D$())return new Blob(e);throw new m$(g$.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}
/**
             * @license
             * Copyright 2021 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function z$(e){if("undefined"==typeof atob)throw t="base-64",new m$(g$.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`);var t;return atob(e)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const U$={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class $${constructor(e,t){this.data=e,this.contentType=t||null}}function q$(e,t){switch(e){case U$.RAW:return new $$(W$(t));case U$.BASE64:case U$.BASE64URL:return new $$(H$(e,t));case U$.DATA_URL:return new $$(function(e){const t=new G$(e);return t.base64?H$(U$.BASE64,t.rest):function(e){let t;try{t=decodeURIComponent(e)}catch(AW){throw I$(U$.DATA_URL,"Malformed data URL.")}return W$(t)}(t.rest)}(t),new G$(t).contentType)}throw b$()}function W$(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);r<=127?t.push(r):r<=2047?t.push(192|r>>6,128|63&r):55296==(64512&r)?n<e.length-1&&56320==(64512&e.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):t.push(239,191,189):56320==(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function H$(e,t){switch(e){case U$.BASE64:{const n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw I$(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break}case U$.BASE64URL:{const n=-1!==t.indexOf("+"),r=-1!==t.indexOf("/");if(n||r)throw I$(e,"Invalid character '"+(n?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=z$(t)}catch(AW){if(AW.message.includes("polyfill"))throw AW;throw I$(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class G${constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw I$(U$.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const n=t[1]||null;null!=n&&(this.base64=function(e,t){const n=e.length>=t.length;return!!n&&e.substring(e.length-t.length)===t}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */(n,";base64"),this.contentType=this.base64?n.substring(0,n.length-7):n),this.rest=e.substring(e.indexOf(",")+1)}}class K${constructor(e,t){let n=0,r="";R$(e)?(this.data_=e,n=e.size,r=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),n=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),n=e.length),this.size_=n,this.type_=r}size(){return this.size_}type(){return this.type_}slice(e,t){if(R$(this.data_)){const n=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,e,t);return null===n?null:new K$(n)}{const n=new Uint8Array(this.data_.buffer,e,t-e);return new K$(n,!0)}}static getBlob(...e){if(D$()){const t=e.map((e=>e instanceof K$?e.data_:e));return new K$(V$.apply(null,t))}{const t=e.map((e=>A$(e)?q$(U$.RAW,e).data:e.data_));let n=0;t.forEach((e=>{n+=e.byteLength}));const r=new Uint8Array(n);let i=0;return t.forEach((e=>{for(let t=0;t<e.length;t++)r[i++]=e[t]})),new K$(r,!0)}}uploadData(){return this.data_}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Y$(e){let t;try{t=JSON.parse(e)}catch(AW){return null}return function(e){return"object"==typeof e&&!Array.isArray(e)}(t)?t:null}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function X$(e){const t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Q$(e,t){return t}class J${constructor(e,t,n,r){this.server=e,this.local=t||e,this.writable=!!n,this.xform=r||Q$}}let Z$=null;function eq(){if(Z$)return Z$;const e=[];e.push(new J$("bucket")),e.push(new J$("generation")),e.push(new J$("metageneration")),e.push(new J$("name","fullPath",!0));const t=new J$("name");t.xform=function(e,t){return function(e){return!A$(e)||e.length<2?e:X$(e)}(t)},e.push(t);const n=new J$("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new J$("timeCreated")),e.push(new J$("updated")),e.push(new J$("md5Hash",null,!0)),e.push(new J$("cacheControl",null,!0)),e.push(new J$("contentDisposition",null,!0)),e.push(new J$("contentEncoding",null,!0)),e.push(new J$("contentLanguage",null,!0)),e.push(new J$("contentType",null,!0)),e.push(new J$("metadata","customMetadata",!0)),Z$=e,Z$}function tq(e,t,n){const r={type:"file"},i=n.length;for(let o=0;o<i;o++){const e=n[o];r[e.local]=e.xform(r,t[e.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){const n=e.bucket,r=e.fullPath,i=new N$(n,r);return t._makeStorageReference(i)}})}(r,e),r}function nq(e,t,n){const r=Y$(t);return null===r?null:tq(e,r,n)}function rq(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const r=t[i];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const iq="prefixes",oq="items";function aq(e,t,n){const r=Y$(n);return null===r?null:function(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[iq])for(const i of n[iq]){const n=i.replace(/\/$/,""),o=e._makeStorageReference(new N$(t,n));r.prefixes.push(o)}if(n[oq])for(const i of n[oq]){const n=e._makeStorageReference(new N$(t,i.name));r.items.push(n)}return r}(e,t,r)}class sq{constructor(e,t,n,r){this.url=e,this.method=t,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function lq(e){if(!e)throw b$()}function uq(e,t){return function(n,r){const i=nq(e,r,t);return lq(null!==i),i}}function cq(e,t){return function(n,r){const i=nq(e,r,t);return lq(null!==i),function(e,t,n,r){const i=Y$(t);if(null===i)return null;if(!A$(i.downloadTokens))return null;const o=i.downloadTokens;if(0===o.length)return null;const a=encodeURIComponent;return o.split(",").map((t=>{const i=e.bucket,o=e.fullPath;return P$("/b/"+a(i)+"/o/"+a(o),n,r)+L$({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function dq(e){return function(t,n){let r;var i,o;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new m$(g$.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new m$(g$.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(o=e.bucket,r=new m$(g$.QUOTA_EXCEEDED,"Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new m$(g$.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function hq(e){const t=dq(e);return function(n,r){let i=t(n,r);var o;return 404===n.getStatus()&&(o=e.path,i=new m$(g$.OBJECT_NOT_FOUND,"Object '"+o+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function pq(e,t,n){const r=P$(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new sq(r,"GET",uq(e,n),i);return o.errorHandler=hq(t),o}function fq(e,t,n,r,i){const o={};t.isRoot?o.prefix="":o.prefix=t.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);const a=P$(t.bucketOnlyServerUrl(),e.host,e._protocol),s=e.maxOperationRetryTime,l=new sq(a,"GET",function(e,t){return function(n,r){const i=aq(e,t,r);return lq(null!==i),i}}(e,t.bucket),s);return l.urlParams=o,l.errorHandler=dq(t),l}function mq(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}class gq{constructor(e,t,n,r){this.current=e,this.total=t,this.finalized=!!n,this.metadata=r||null}}function vq(e,t){let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(AW){lq(!1)}return lq(!!n&&-1!==(t||["active"]).indexOf(n)),n}const yq=262144;function bq(e,t,n,r,i,o,a,s){const l=new gq(0,0);if(a?(l.current=a.current,l.total=a.total):(l.current=0,l.total=r.size()),r.size()!==l.total)throw new m$(g$.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");const u=l.total-l.current;let c=u;i>0&&(c=Math.min(c,i));const d=l.current,h=d+c;let p="";p=0===c?"finalize":u===c?"upload, finalize":"upload";const f={"X-Goog-Upload-Command":p,"X-Goog-Upload-Offset":`${l.current}`},m=r.slice(d,h);if(null===m)throw k$();const g=t.maxUploadRetryTime,v=new sq(n,"POST",(function(e,n){const i=vq(e,["active","final"]),a=l.current+c,s=r.size();let u;return u="final"===i?uq(t,o)(e,n):null,new gq(a,s,"final"===i,u)}),g);return v.headers=f,v.body=m.uploadData(),v.progressCallback=s||null,v.errorHandler=dq(e),v}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */const xq={STATE_CHANGED:"state_changed"},wq={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function kq(e){switch(e){case"running":case"pausing":case"canceling":return wq.RUNNING;case"paused":return wq.PAUSED;case"success":return wq.SUCCESS;case"canceled":return wq.CANCELED;default:return wq.ERROR}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class _q{constructor(e,t,n){const r=function(e){return"function"==typeof e}(e)||null!=t||null!=n;if(r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=n?n:void 0;else{const t=e;this.next=t.next,this.error=t.error,this.complete=t.complete}}}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Eq(e){return(...t)=>{Promise.resolve().then((()=>e(...t)))}}class Cq{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=v$.NO_ERROR,this.sendPromise_=new Promise((e=>{this.xhr_.addEventListener("abort",(()=>{this.errorCode_=v$.ABORT,e()})),this.xhr_.addEventListener("error",(()=>{this.errorCode_=v$.NETWORK_ERROR,e()})),this.xhr_.addEventListener("load",(()=>{e()}))}))}send(e,t,n,r){if(this.sent_)throw S$("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(const i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw S$("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw S$("cannot .getStatus() before sending");try{return this.xhr_.status}catch(AW){return-1}}getResponse(){if(!this.sent_)throw S$("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw S$("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class Iq extends Cq{initXhr(){this.xhr_.responseType="text"}}function Sq(){return new Iq}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Nq{constructor(e,t,n=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=n,this._mappings=eq(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=e=>{if(this._request=void 0,this._chunkMultiplier=1,e._codeEquals(g$.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const t=this.isExponentialBackoffExpired();if(M$(e.status,[])){if(!t)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();e=x$()}this._error=e,this._transition("error")}},this._metadataErrorHandler=e=>{this._request=void 0,e._codeEquals(g$.CANCELED)?this.completeTransitions_():(this._error=e,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise(((e,t)=>{this._resolve=e,this._reject=t,this._start()})),this._promise.then(null,(()=>{}))}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((()=>{this.pendingTimeout=void 0,this._continueUpload()}),this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((([t,n])=>{switch(this._state){case"running":e(t,n);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}}))}_createResumable(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),a=mq(t,r,i),s={name:a.fullPath},l=P$(o,e.host,e._protocol),u={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":a.contentType,"Content-Type":"application/json; charset=utf-8"},c=rq(a,n),d=e.maxUploadRetryTime,h=new sq(l,"POST",(function(e){let t;vq(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(AW){lq(!1)}return lq(A$(t)),t}),d);return h.urlParams=s,h.headers=u,h.body=c,h.errorHandler=dq(t),h}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Sq,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._uploadUrl=e,this._needToFetchStatus=!1,this.completeTransitions_()}),this._errorHandler)}))}_fetchStatus(){const e=this._uploadUrl;this._resolveToken(((t,n)=>{const r=function(e,t,n,r){const i=e.maxUploadRetryTime,o=new sq(n,"POST",(function(e){const t=vq(e,["active","final"]);let n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(AW){lq(!1)}n||lq(!1);const i=Number(n);return lq(!isNaN(i)),new gq(i,r.size(),"final"===t)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=dq(t),o}(this._ref.storage,this._ref._location,e,this._blob),i=this._ref.storage._makeRequest(r,Sq,t,n);this._request=i,i.getPromise().then((e=>{this._request=void 0,this._updateProgress(e.current),this._needToFetchStatus=!1,e.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()}),this._errorHandler)}))}_continueUpload(){const e=yq*this._chunkMultiplier,t=new gq(this._transferred,this._blob.size()),n=this._uploadUrl;this._resolveToken(((r,i)=>{let o;try{o=bq(this._ref._location,this._ref.storage,n,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(AW){return this._error=AW,void this._transition("error")}const a=this._ref.storage._makeRequest(o,Sq,r,i,!1);this._request=a,a.getPromise().then((e=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(e.current),e.finalized?(this._metadata=e.metadata,this._transition("success")):this.completeTransitions_()}),this._errorHandler)}))}_increaseMultiplier(){yq*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken(((e,t)=>{const n=pq(this._ref.storage,this._ref._location,this._mappings),r=this._ref.storage._makeRequest(n,Sq,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._transition("success")}),this._metadataErrorHandler)}))}_oneShotUpload(){this._resolveToken(((e,t)=>{const n=function(e,t,n,r,i){const o=t.bucketOnlyServerUrl(),a={"X-Goog-Upload-Protocol":"multipart"},s=function(){let e="";for(let t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();a["Content-Type"]="multipart/related; boundary="+s;const l=mq(t,r,i),u="--"+s+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+rq(l,n)+"\r\n--"+s+"\r\nContent-Type: "+l.contentType+"\r\n\r\n",c="\r\n--"+s+"--",d=K$.getBlob(u,r,c);if(null===d)throw k$();const h={name:l.fullPath},p=P$(o,e.host,e._protocol),f=e.maxUploadRetryTime,m=new sq(p,"POST",uq(e,n),f);return m.urlParams=h,m.headers=a,m.body=d.uploadData(),m.errorHandler=dq(t),m}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),r=this._ref.storage._makeRequest(n,Sq,e,t);this._request=r,r.getPromise().then((e=>{this._request=void 0,this._metadata=e,this._updateProgress(this._blob.size()),this._transition("success")}),this._errorHandler)}))}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=w$(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=kq(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,n,r){const i=new _q(t||void 0,n||void 0,r||void 0);return this._addObserver(i),()=>{this._removeObserver(i)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach((e=>{this._notifyObserver(e)}))}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(kq(this._state)){case wq.SUCCESS:Eq(this._resolve.bind(null,this.snapshot))();break;case wq.CANCELED:case wq.ERROR:Eq(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(kq(this._state)){case wq.RUNNING:case wq.PAUSED:e.next&&Eq(e.next.bind(e,this.snapshot))();break;case wq.SUCCESS:e.complete&&Eq(e.complete.bind(e))();break;default:e.error&&Eq(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}
/**
             * @license
             * Copyright 2019 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Tq{constructor(e,t){this._service=e,this._location=t instanceof N$?t:N$.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Tq(e,t)}get root(){const e=new N$(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return X$(this._location.path)}get storage(){return this._service}get parent(){const e=function(e){if(0===e.length)return null;const t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===e)return null;const t=new N$(this._location.bucket,e);return new Tq(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw C$(e)}}function Aq(e){const t={prefixes:[],items:[]};return Rq(e,t).then((()=>t))}async function Rq(e,t,n){const r={pageToken:n},i=await Dq(e,r);t.prefixes.push(...i.prefixes),t.items.push(...i.items),null!=i.nextPageToken&&await Rq(e,t,i.nextPageToken)}function Dq(e,t){null!=t&&"number"==typeof t.maxResults&&O$("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=fq(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Sq)}function Oq(e,t){e._throwIfRoot("updateMetadata");const n=function(e,t,n,r){const i=P$(t.fullServerUrl(),e.host,e._protocol),o=rq(n,r),a=e.maxOperationRetryTime,s=new sq(i,"PATCH",uq(e,r),a);return s.headers={"Content-Type":"application/json; charset=utf-8"},s.body=o,s.errorHandler=hq(t),s}(e.storage,e._location,t,eq());return e.storage.makeRequestWithTokens(n,Sq)}function Pq(e){e._throwIfRoot("getDownloadURL");const t=function(e,t,n){const r=P$(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,o=new sq(r,"GET",cq(e,n),i);return o.errorHandler=hq(t),o}(e.storage,e._location,eq());return e.storage.makeRequestWithTokens(t,Sq).then((e=>{if(null===e)throw new m$(g$.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Lq(e){e._throwIfRoot("deleteObject");const t=function(e,t){const n=P$(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new sq(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=hq(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Sq)}function Mq(e,t){const n=function(e,t){const n=t.split("/").filter((e=>e.length>0)).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new N$(e._location.bucket,n);return new Tq(e.storage,r)}
/**
             * @license
             * Copyright 2017 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */function Fq(e,t){if(e instanceof Vq){const n=e;if(null==n._bucket)throw new m$(g$.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+f$+"' property when initializing the app?");const r=new Tq(n,n._bucket);return null!=t?Fq(r,t):r}return void 0!==t?Mq(e,t):e}function jq(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof Vq)return new Tq(e,t);throw _$("To use ref(service, url), the first argument must be a Storage instance.")}return Fq(e,t)}function Bq(e,t){const n=null==t?void 0:t[f$];return null==n?null:N$.makeFromBucketSpec(n,e)}class Vq{constructor(e,t,n,r,i){this.app=e,this._authProvider=t,this._appCheckProvider=n,this._url=r,this._firebaseVersion=i,this._bucket=null,this._host=p$,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=r?N$.makeFromBucketSpec(r,this._host):Bq(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,null!=this._url?this._bucket=N$.makeFromBucketSpec(this._url,e):this._bucket=Bq(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){O$("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){O$("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(null!==t)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach((e=>e.cancel())),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Tq(this,e)}_makeRequest(e,t,n,r,i=!0){if(this._deleted)return new T$(E$());{const o=function(e,t,n,r,i,o,a=!0){const s=L$(e.urlParams),l=e.url+s,u=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(u,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(u,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!=t?t:"AppManager")}(u,o),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(u,r),new F$(l,e.method,u,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,a)}(e,this._appId,n,r,t,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then((()=>this._requests.delete(o)),(()=>this._requests.delete(o))),o}}async makeRequestWithTokens(e,t){const[n,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,n,r).getPromise()}}const zq="@firebase/storage",Uq="0.12.2";function $q(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Nq(e,new K$(t),n)}(e=Sx(e),t,n)}function qq(e){return function(e){e._throwIfRoot("getMetadata");const t=pq(e.storage,e._location,eq());return e.storage.makeRequestWithTokens(t,Sq)}(e=Sx(e))}function Wq(e){return Pq(e=Sx(e))}function Hq(e,t){return jq(e=Sx(e),t)}function Gq(e,t,n,r={}){!function(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken="string"==typeof i?i:sx(i,e.app.options.projectId))}(e,t,n,r)}function Kq(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new Vq(n,r,i,t,vw)}pw(new Nx("storage",Kq,"PUBLIC").setMultipleInstances(!0)),xw(zq,Uq,""),xw(zq,Uq,"esm2017");
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */
class Yq{constructor(e,t,n){this._delegate=e,this.task=t,this.ref=n}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Xq{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new Yq(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then((t=>{if(e)return e(new Yq(t,this,this._ref))}),t)}on(e,t,n,r){let i;return t&&(i="function"==typeof t?e=>t(new Yq(e,this,this._ref)):{next:t.next?e=>t.next(new Yq(e,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,i,n||void 0,r||void 0)}}class Qq{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map((e=>new Jq(e,this._service)))}get items(){return this._delegate.items.map((e=>new Jq(e,this._service)))}get nextPageToken(){return this._delegate.nextPageToken||null}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *  http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Jq{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function(e,t){return Mq(e,t)}(this._delegate,e);return new Jq(t,this.storage)}get root(){return new Jq(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Jq(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new Xq($q(this._delegate,e,t),this)}putString(e,t=U$.RAW,n){this._throwIfRoot("putString");const r=q$(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new Xq(new Nq(this._delegate,new K$(r.data,!0),i),this)}listAll(){return function(e){return Aq(e=Sx(e))}(this._delegate).then((e=>new Qq(e,this.storage)))}list(e){return function(e,t){return Dq(e=Sx(e),t)}(this._delegate,e||void 0).then((e=>new Qq(e,this.storage)))}getMetadata(){return qq(this._delegate)}updateMetadata(e){return function(e,t){return Oq(e=Sx(e),t)}(this._delegate,e)}getDownloadURL(){return Wq(this._delegate)}delete(){return this._throwIfRoot("delete"),function(e){return Lq(e=Sx(e))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw C$(e)}}
/**
             * @license
             * Copyright 2020 Google LLC
             *
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             *   http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             */class Zq{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(eW(e))throw _$("ref() expected a child path but got a URL, use refFromURL instead.");return new Jq(Hq(this._delegate,e),this)}refFromURL(e){if(!eW(e))throw _$("refFromURL() expected a full URL but got a child path, use ref() instead.");try{N$.makeFromUrl(e,this._delegate.host)}catch(AW){throw _$("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jq(Hq(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,n={}){Gq(this._delegate,e,t,n)}}function eW(e){return/^[A-Za-z]+:\/\//.test(e)}function tW(e,{instanceIdentifier:t}){const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("storage").getImmediate({identifier:t});return new Zq(n,r)}!function(e){const t={TaskState:wq,TaskEvent:xq,StringFormat:U$,Storage:Zq,Reference:Jq};e.INTERNAL.registerComponent(new Nx("storage-compat",tW,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.5")}(Vw),Vw.initializeApp({apiKey:"AIzaSyDDdSly9TG350O54D_BvtElgHZ6oxJ_CbU",authDomain:"furpet-14eea.firebaseapp.com",projectId:"furpet-14eea",storageBucket:"furpet-14eea.appspot.com",messagingSenderId:"170672929681",appId:"1:170672929681:web:219bb7ade084ec11633830",measurementId:"G-F3DBNJSXJ2"});var nW=Vw.firestore(),rW=Vw.storage();const iW=()=>{const[e,t]=z.useState(""),[n,r]=z.useState(""),[i,o]=z.useState(""),[a,s]=Lb(),l=vp();return X.jsx(xb,{children:X.jsx(nb,{children:X.jsxs("div",{className:"signup_box",children:[X.jsxs("div",{className:"rectangle_box",children:[X.jsx("h1",{className:"h1_signUp",children:"Create an Account"}),X.jsxs(rb,{className:"signup_form",children:[X.jsx("input",{className:"input_signUp",type:"text",placeholder:"Username"}),X.jsx("input",{className:"input_signUp",type:"email",placeholder:"Email",onChange:e=>t(e.target.value)}),X.jsx("input",{className:"input_signUp",type:"password",placeholder:"Password",onChange:e=>r(e.target.value)}),X.jsxs("select",{className:"input_signUp",onChange:e=>o(e.target.value),children:[" ",X.jsx("option",{value:"",children:"Select Role"}),X.jsx("option",{value:"adopter",children:"Adopter"}),X.jsx("option",{value:"pet owner",children:"Pet Owner"})]}),X.jsx("input",{onClick:async function(){const t=await async function(e,t,n){const r=`${e}`;try{await Vw.auth().createUserWithEmailAndPassword(r,t);const e=Vw.auth().currentUser;e&&Vw.firestore().collection("users").doc(e.uid).set({role:n,email:r})}catch(i){return console.log(i),!1}}(e,n,i);t&&a("You have registered successfully!",2e3),l.push("/login")},className:"submit_signUp",type:"submit",value:"SignUp"}),X.jsxs("p",{children:["have a account? ",X.jsx("a",{href:"/login",children:"login"})]})]})]}),X.jsx("img",{className:"image_SignUp",src:"/assets/bbaebdf1499184fa6c34242ca25181bb 1-B_InEx99.png"})]})})})},oW="/assets/anIOs_StartupLogo-PSC8-CH5pP8yn.png",aW=()=>{const[e,t]=z.useState(""),[n,r]=z.useState(""),i=vp();return X.jsx(xb,{children:X.jsx(nb,{children:X.jsxs("div",{className:"login_box",children:[X.jsx("img",{className:"image_Login",src:"/assets/pexels-svetozar-milashevich-99573-1490908-D_mEmgPN.jpg"}),X.jsxs("div",{className:"rectangle_box",children:[X.jsx("img",{className:"image_Logo",src:oW}),X.jsx("h1",{className:"h1_login",children:"Login"}),X.jsxs(rb,{className:"login_form",children:[X.jsx("input",{className:"input_login",type:"text",placeholder:"Email",onChange:e=>t(e.target.value)}),X.jsx("input",{className:"input_login",type:"password",placeholder:"Password",onChange:e=>r(e.target.value)}),X.jsx("a",{children:X.jsx("input",{onClick:async()=>{try{const t=await async function(e,t){const n=`${e}`;try{await Vw.auth().signInWithEmailAndPassword(n,t);const e=Vw.auth().currentUser;if(e){const t=(await Vw.firestore().collection("users").doc(e.uid).get()).data();if(t)return t.role}}catch(r){return console.log(r),!1}}(e,n);switch(t){case"adopter":i.push("/adopterHome");break;case"pet owner":i.push("/petOwnerHome");break;case"admin":i.push("/adminHome");break;default:window.confirm("Wrong Username or Password")&&i.push("/login")}}catch(t){console.error(t)}},className:"submit_login",type:"submit",value:"Login"})}),X.jsxs("p",{children:["need account? ",X.jsx("a",{href:"/signup",children:"signup"})]})]})]})]})})})},sW="/assets/friendly-smart-basenji-dog-giving-his-paw-close-up-isolated-white 1-_xVyURnC.png",lW="/assets/dog 1-K5e42Fyy.png",uW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABsCAYAAACPZlfNAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAA8sSURBVHgB7Z17eFTVtcDXOmdm8gAk8foArY+rKfaKXrEI6rUPqlSYhNLKvdFkAty03uJHATMRi95LPy/tx1eLlRASwZZPLeWRR6cVtGTCo36mtlKxjVal1BYtWLVRkArmRebM2avrBPg+tDBnnzn7nEni/P45Z2bWOWefvfZzrbX3AGTJkiVLlixZsmTJkiVLlixZsgwVEAYQc+ZMyw92Jq/SAfTQUfHnBzdtPwAZoLS0VL8wcOSTR0VAGCPf3bdmTbsBA4QBobAFZeGrNQ2Xa4A3EFDoxPeEsJtA3NeRGPFkLBYzwWOqym/+IqJ+H2fLdfwxcPzrPiB4PJE071sd2/YaZJiMKywaKa4koseQOa2QoFheKDH3/nVPHQIPWFAaPjsQxGUE8NXTChEdJMC5KxvjP4MMklGFVZWFv44aruLToIT4yyGkkgc2tr4FCrk3UlJ4FGg7n15jJ8tFqpMzLFKzMb4FMkTGFFZdOqWIgvpOPj1b/ip8AXq6b6rd3HYYFFBden0eBQt/yacTZK/hDDsQRBqvuuDIokGGIF1fBo6U1X/VpzEvvx4UQYECKw3Syuq/BuCcBNH/Q4bISA2rnjm9iERyL6QBJzhBAmfUNrW0gAsWzJxSogs93aatN2jAJd+Pxd8Bn8lMDaPk7ZAmXMJDnOplC8JFOZAmC8LhM1hZqyB98hIBqIIM4LvClkyaFBACSsEVNFYrHPMNSBO9AG/lw0XgAh7U3my9C/iM7wp7b1T+OB5tXQou4abxTkgDnkIgX7wYXENjO8/MPx98xneFcZG8FtRw8fyyqdPBIdWR4i9Y14J7cswQXgE+438fptHFoAhdw9vAKYizQBEIdDX4TAYGHfhJUAQn/rOLpk8fISs/Z9q0fD6EQRGEVAQ+47/CEM4CRbCp6AJjGF0oK587nMbx4VxQBeLQ78PYLlgAChF68guyshqKiaAShJHgM74rLKWRN537CZRXgtZvhVcH+Z9/vj+QJ749oBQaKy0q4N9BJaT6XezJQA2Dd0Eh3I8VgoSJbckSfldE1/O/D4GkxAjtBP/7MMJ9oBDWVD57qvPs5HpemD4MTnKOKnr6X8BnfFeYSeJNUAgrLFfvIlu7Ym+OkQuKIdL/CD7ju8J0EPtBIdwnarl5SdsmUQsElb+rILEHfMZ3hSVQ3wVWnIQ6TDrUJ+yEAiDUxoQQ9OXpQmnzLoPvCjt7TPxNNr++CIrgGtZbcBi67OR6k11HQSHWO2TC6+y/e2UJCE3Ar0ARSPDekra2pJ3c6lhbNyicUvBzn4YMkBEHpilwHfRXDvdwSZf1+hI/8E+gCFOYzZABMqKwuuaW3TwnehkUwM6t5xyIt4ECeISzp75520uQAdLymC6oYBc7imGGlkysWvfU3yGt2iLq+NUfBZcIxF/KyqJJO0DHanAJEt4PaWBFFBcGDhbmaHm53Z3BI489+WQnOMSRwqoiJezap9kawXieg5wZJD0RrSjeTwK2sk3vR7XNLdLzkoK3e9e9Pzr//9x5n+kDs6f397LSQYEvGgHo5OIl7ZL5KJzefaKn21HwzoLS8OV6EOYDdF+PmH8pt815ZwxPdkcjxTs5LetrG+NNIFnopQyxcyMlhTlAj/DpjNSStM00YV59c+vrIEFVJDybm7QfQ9rgw7UNLY5iO6IVU5uBtFshXYT4am3T1rUyotFIySUE9F1W8gxWx+mDZQl29SGGH25oed/unrZ9GKsdc5CsCKMZYAtO0XR81lIESFA45toNlpIhXbTkIw6vADJFDaQJl+4tDpQ1mbX7PF9zW0plHbvxtTkknrQCW8EGW4VFI+FF/MBykIQTeC7XmkfvqgjbBrosWbJEJEJYyVc5XmTAXpof127Y9gI4ZGXT9l3s2o+DY+gtzqz5MpLVM8MsR09wKv8FZEH8DAUK/sdOLKXCKisr2f6GUon8CAFBuLQqUmzbwa9eG39HgFHGz3Gy0OENM9F3H6SJQeZCR88jSBJRyfKG+Bt2olUV4a+TQKsW54NDuDX7/v/OviWlklMq7Iy+jklcYz4BacLX1kTLwzfaydU1bG83jaOf4wQftJNlmbf0kDa1LvaLv0KaPNS4/VUByVK+l731g+igRjRxZeNW22lIdVnxNTyC/AHILe74J7jVyDkq+lJGgqVUmKZpU8AlnIi11aVTzrSTq489tUcXwfGcQY+R5Wo8Bfz9b00Dipev3fIquKSuYdvTWkD7PN9z32meZc20t2oUGl/T1GprSvtmZfEo0oD7ZHdzW66dN6X6PeXNifAqcAm/+AUQ1KUWMNQ0PfFmbWPr7eyUnMhN0Hf4K2sZ0DOcyEdQg7BhDLvxoVj8FVDEinVbng/qySs5lTP548/5hX9njdg441doemBC4WUTS6w0ydzL6IN7+XAZuIUoZZ6nHNbzHOtVfgH3ibAwjKtrYzuk50yDiXmR4ouCxGYvhLTj/U/AtfqdlY3x0af73aaGpdcWn5JgMCOLB/wgRLRYhbIseM6WUicpLR1c/Syz0yWghvK7Z91yz4PrNyldaG7NXQQWTkAdruHm9wrUsIg9i2fxm3M/SIfZOLyPLcS7NdKee7Gj89k2Ccu+E6zltmweK1UYCpbSo5DaNEXwF9aa7VJSSXISZu9X+LgGFBCdOWU0mHpUaFDGro7+YNL+TLNs8sdO+uX4txusc0ITxo3Oe/2q8uJtQlCNrDXGDk3Xrud5ncpYy5RxIimrHyfkeVAIT6i/DC6prJyUy1OFpST0PXzDRSeUJZcAvJSbnG/oGv7hzvKSxdGvTHKd0Xw/1+90MtwipMzz1H0YqPMMH3sYuqqt0Vkl/zYykf8bzqXFXInSz2zubzSkpZCf9/LC8mmfAhcgknTksRQatqX8OdWPBR29z4DEZFYWLgBnW5unQBpUV0y7BUx6kRU1DpSBF5hovhwtL5Y2vZ2M5S7pn7Yogw7lHOlfqH9aUirMcr3znEilZxVHdDpowo5TdVvxNCLxUz5VMhL7SJKCXOPWV1VMnenwQrgw0GsFsSpbhcl5HXvAxkdmOys3ybAs9UdAEUkt6cgXdddtX7qOR4AbwVvvuI6k//DOSMl4R1exExfUYQrT/IGdkG0mWHY3HnltBlUI+RC3e0onjxS6aY0qzwDPoXzuj7bMm32TtIU91JtjG60lDeITMmEHUqU2EDAX8aED3EPiMO6XFU4Ec5by4UrwCR5xjgoZOffIyt+/aZM1T1URY3kYkvAtGUEphT24fvsBrmUPgFsI3qtvbf1ARrS6dHoRz56ULW+VhYfVC+dYczxJce7/9oNrsF42vEK6X2CjbC27DjaAG5A2yYpS0LiDD74vmGO0YUK/V1pawOPgAi6U8beN/G/LyjvqyPuS3XPh2EZajmHrO2kY+JGMLA+XQ9ym3wEZgm1as0ky3kWgJvVOp+H5vxlv3OJka0FHClsda+vKMYZbASyOByHsF3uiZuPPpWIIRwV7Pucmsskt1qS8uiI8VUa2rmHLXn65WnAKYRsawybFYnsSTi5zPFReFosd6Rn+7q3H/VW2ixCO8ycMHJUONQig+CxkGO6cpC0YuQRWXrTLyNIxa+cKIxj6rxWxWC84RIc0aG/vELt2v9Y28fIxj7Mp5WIukf8Kp1E+Em0KaVC+fMOOt0GSa68cc7+b0AQVcItgTP1UsLFtz0Hb5urXr+w9+pmiKzabQfPM45aYUzenCL8KAP7niob42t++9KpjZR27hQIWVIQvDxDcaJVKLj3nsc2wWyC9QIib6za07HRyr6ry4jvYoGo7gfQargbciMB/1zXF1zu5rnpW8TVkQgnf4T9Y6cO5DergTN7J93pmRVP8d+CSjO5IegLLJjcq1DVaN7U5oIm7OFkqLQhpwxrr0hGXJ8HYWNewI63tAlWTUYVZ27f2koiiFexDZJmFfN8dTRLL6fkS15JmSiaa3URsuSUzG1zOnna+MMW3uH+bNVBqkyzc5JucaQ8lDPje6gxscOm7wqojU8uIcBX36rahbwMahLd5iLyobmO8AXzEN4XdPevmYUZSX8odsTW8H6hNn3MEPljb1PJN8AnfFvSZIriClRWFoaQsC43ujkZKVoNPpDUPc0p1pLiG2/55MHSZcP0VRSOe2/1aWmY7J3iusGNLj3AZDHUQJ1w3tuiPrDRP9+7wtA9bWD7tLBOFtRB8cA8w5Hm3RzOvXrNhmwrf4SnxtA8zNdNaEvRxUZbFueyaSXu3bxk8q2F3zpp8oWaGrIULPrj3BxLUlTCGj14di6kLHzgJz2qYlgxaAZYfM2VZ4PCcYG8leISHTSJKrXMeihCYznf7lsQThc2N3HQJN7YKAz4HGzhhkkf/GuGJwoKQa/1NxtCaIDsjZ9x5+Z78CYEnCkMhfN/PfaDB7jS1+wsfxxuFaTAKPuaggHPAA7wZdKAXMfCDC4E4ePowIs337cEHGhqisvUIH7oveACJpNKNmAcjhORJHnjTJGrk++bFA40EoSd54E0NM3Qr5sGTJmEwwCPEQw83tHiyp70nCquPtR4kIumNJ4caiODZ/zx7ZppC1Fzsgzi4YYu6Z3EenimsYMwEK/7e97+6yDTsWd/zVuKNNvAIzzzObW1tdN1Vl/XwGN/x/1QObnDeY807le2H9VE8dWD25Hdws/jx6cu4KXx6ZUNLDDzEU4WtWdNuCFOb73DzykEJAr1JQnwNPMbzMDdrj3oeMVr7YHTD0EUkBXy5tmnrfvAYX+ISVzbGd2gIZXzqeJ/2gQ8eNolurJfYBFMFvgWS1myMb4EkhblP+xsMHV7XTBGub2z1rZ/2PbZ+YaT4oiThYkC6Hd1utwpgLbbrQMADiLRHmPRXNou9hyeaX8R8ljqHCIvYuHc+f3Exy1muH7cFNYkETYlgX3TVuqd87Z8zttwoWjZ1EmraXZzpX3JyXb+SiFr4LE5Cf5Y+EHvrW1ul9sqw3Paf/sTwsaYQn2drxM0gYLITVxD1W51oMyt/2cqm+C7IABlf0De/7IvnaVqwlIt8KX+0vLQfWozev2EzwQFOaDs7Rhsg19y64tFtfwcFfG36DSNGDiuYQSDKrchdOEUMJT//fR4BvsK//8Qg2LJKYit0LxkQKzBP5p45k0f2duWeE0QzSKbZ2bX30Dtr2tsN8AFrhY3AwPlGn5mHuuhJGkaHtXMCZMmSJUuWLFmyZMmSJUuWLFmyZPGAfwAKkCZiMV2nSAAAAABJRU5ErkJggg==",cW="/assets/cat 1-DXmcPP6o.png",dW="/assets/Group 32-DrtocWDy.png",hW=()=>{const[e,t]=z.useState([]),n=Vw.storage().ref(),[r,i]=z.useState("all");z.useEffect((()=>{(async()=>{const e=await(async()=>{const e=(await n.child("images").listAll()).items.map((e=>e.getDownloadURL()));return Promise.all(e)})();t(e)})()}),[]);const[o,a]=z.useState([]);return z.useEffect((()=>{(async()=>{const e=Vw.firestore().collection("pets").orderBy("index"),t=await e.get(),r=await Promise.all(t.docs.map((async e=>{const t=e.data(),r=await n.child(`images/${t.index}`).getDownloadURL();return{...t,id:e.id,imageUrl:r}})));a(r)})()}),[]),X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/adopterHome",children:"Home"}),X.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),X.jsx("a",{href:"/appointmentlist",children:"Appointments"}),X.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsxs("div",{className:"welcomeBanner",children:[X.jsxs("p",{className:"welcomeText",children:["You can make a ",X.jsx("br",{}),"difference in their ",X.jsx("br",{}),"lives"]}),X.jsx("a",{href:"/adopterAdopt",children:X.jsx("div",{className:"AdoptAPet",children:X.jsx("p",{className:"AdoptAPet2",children:"Adopt A Pet"})})}),X.jsx("img",{className:"welcomeImg",src:sW})]}),X.jsxs("div",{className:"categories1",children:[X.jsx("h1",{className:"categories_h1",children:"Categories"}),X.jsxs("div",{className:"categories_container",children:[X.jsx("div",{className:"categories_box",onClick:()=>i("all"),children:X.jsx("img",{src:uW})}),X.jsx("div",{className:"categories_box",onClick:()=>i("Dog"),children:X.jsx("img",{src:lW})}),X.jsx("div",{className:"categories_box",onClick:()=>i("Cat"),children:X.jsx("img",{src:cW})})]})]}),X.jsxs("div",{className:"adoption1",children:[X.jsx("h1",{className:"adpotion_h1",children:"For Adoption"}),X.jsxs("div",{className:"adoption_container",children:[o.filter((e=>"all"===r||e.type.toLowerCase()===r.toLowerCase())).slice(0,3).map(((e,t)=>X.jsxs("div",{className:"adoption_box",children:[X.jsx("img",{className:"adoption_image",src:e.imageUrl,alt:e.name}),X.jsx("p",{className:"adoption_text",children:e.breed}),X.jsxs("p",{className:"adoption_desc",children:["Age: ",e.age," Years Old"]}),X.jsxs("p",{className:"adoption_desc",children:["Gender: ",e.gender]}),X.jsxs("p",{className:"adoption_desc",children:["Weight: ",e.weight," kg"]}),X.jsxs("p",{className:"adoption_desc",children:["Address: ",e.location]}),X.jsxs("p",{className:"adoption_desc",children:["Status: ",e.status]}),X.jsx(Ep,{to:`/adopterAdoptme/${e.id}`,children:X.jsx("div",{className:"adoptMe",children:X.jsx("p",{className:"adoption_button",children:"Adopt Me"})})})]},e.id))),X.jsxs("div",{className:"adoption_box2",children:[X.jsx("img",{src:uW}),X.jsx("a",{href:"/adopterAdopt",children:X.jsx("div",{className:"adoptMe2",children:X.jsx("p",{className:"adoption_button",children:"Meet More"})})})]})]})]}),X.jsxs("div",{className:"adoptionProcess",children:[X.jsxs("p",{className:"adoptionProcessText",children:["Adoption",X.jsx("br",{}),"Process"]}),X.jsx("div",{className:"adoptionProcess_img",children:X.jsx("img",{src:dW})})]})]})})},pW=()=>{const[e,t]=z.useState([]),n=Vw.storage().ref(),[r,i]=z.useState("all");z.useEffect((()=>{(async()=>{const e=await(async()=>{const e=(await n.child("images").listAll()).items.map((e=>e.getDownloadURL()));return Promise.all(e)})();t(e)})()}),[]);const[o,a]=z.useState([]);return z.useEffect((()=>{(async()=>{const e=Vw.firestore().collection("pets").orderBy("index"),t=await e.get(),r=await Promise.all(t.docs.map((async e=>{const t=e.data(),r=await n.child(`images/${t.index}`).getDownloadURL();return{...t,id:e.id,imageUrl:r}})));a(r)})()}),[]),X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/petOwnerHome",children:"Home"}),X.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),X.jsx("a",{href:"/rehome",children:"Rehome"}),X.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsxs("div",{className:"welcomeBanner",children:[X.jsxs("p",{className:"welcomeText",children:["You can make a ",X.jsx("br",{}),"difference in their ",X.jsx("br",{}),"lives"]}),X.jsx("a",{href:"/petOwnerAdopt",children:X.jsx("div",{className:"AdoptAPet",children:X.jsx("p",{className:"AdoptAPet2",children:"Adopt A Pet"})})}),X.jsx("img",{className:"welcomeImg",src:sW})]}),X.jsxs("div",{className:"categories1",children:[X.jsx("h1",{className:"categories_h1",children:"Categories"}),X.jsxs("div",{className:"categories_container",children:[X.jsx("div",{className:"categories_box",onClick:()=>i("all"),children:X.jsx("img",{src:uW})}),X.jsx("div",{className:"categories_box",onClick:()=>i("Dog"),children:X.jsx("img",{src:lW})}),X.jsx("div",{className:"categories_box",onClick:()=>i("Cat"),children:X.jsx("img",{src:cW})})]})]}),X.jsxs("div",{className:"adoption1",children:[X.jsx("h1",{className:"adpotion_h1",children:"For Adoption"}),X.jsxs("div",{className:"adoption_container",children:[o.filter((e=>"all"===r||e.type.toLowerCase()===r.toLowerCase())).slice(0,3).map(((e,t)=>X.jsxs("div",{className:"adoption_box",children:[X.jsx("img",{className:"adoption_image",src:e.imageUrl,alt:e.name}),X.jsx("p",{className:"adoption_text",children:e.breed}),X.jsxs("p",{className:"adoption_desc",children:[e.age," Years Old"]}),X.jsx("p",{className:"adoption_desc",children:e.gender}),X.jsxs("p",{className:"adoption_desc",children:[e.weight," kg"]}),X.jsx("p",{className:"adoption_desc",children:e.location}),X.jsxs("p",{className:"adoption_desc",children:["Status: ",e.status]}),X.jsx(Ep,{to:`/petOwnerAdoptme/${e.id}`,children:X.jsx("div",{className:"adoptMe",children:X.jsx("p",{className:"adoption_button",children:"Adopt Me"})})})]},e.id))),X.jsxs("div",{className:"adoption_box2",children:[X.jsx("img",{src:uW}),X.jsx("a",{href:"/petOwnerAdopt",children:X.jsx("div",{className:"adoptMe2",children:X.jsx("p",{className:"adoption_button",children:"Meet More"})})})]})]})]}),X.jsxs("div",{className:"adoptionProcess",children:[X.jsxs("p",{className:"adoptionProcessText",children:["Adoption",X.jsx("br",{}),"Process"]}),X.jsx("div",{className:"adoptionProcess_img",children:X.jsx("img",{src:dW})})]})]})})},fW=()=>{const[e,t]=z.useState([]),n=Vw.storage().ref(),[r,i]=z.useState("all");z.useEffect((()=>{(async()=>{const e=await(async()=>{const e=(await n.child("images").listAll()).items.map((e=>e.getDownloadURL()));return Promise.all(e)})();t(e)})()}),[]);const[o,a]=z.useState([]);return z.useEffect((()=>{(async()=>{const e=Vw.firestore().collection("pets").orderBy("index"),t=await e.get(),r=await Promise.all(t.docs.map((async e=>{const t=e.data(),r=await n.child(`images/${t.index}`).getDownloadURL();return{...t,id:e.id,imageUrl:r}})));a(r)})()}),[]),X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/adopterHome",children:"Home"}),X.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),X.jsx("a",{href:"/appointmentlist",children:"Appointments"}),X.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsxs("div",{className:"categories2",children:[X.jsx("h1",{className:"categories_h1",children:"Categories"}),X.jsxs("div",{className:"categories_container",children:[X.jsx("div",{className:"categories_box",onClick:()=>i("all"),children:X.jsx("img",{src:uW})}),X.jsx("div",{className:"categories_box",onClick:()=>i("Dog"),children:X.jsx("img",{src:lW})}),X.jsx("div",{className:"categories_box",onClick:()=>i("Cat"),children:X.jsx("img",{src:cW})})]})]}),X.jsxs("div",{className:"adoption2",children:[X.jsx("h1",{className:"adpotion_h1",children:"For Adoption"}),X.jsx("div",{className:"adoption_container",children:o.filter((e=>"all"===r||e.type.toLowerCase()===r.toLowerCase())).map(((e,t)=>X.jsxs("div",{className:"adoption_box",children:[X.jsx("img",{className:"adoption_image",src:e.imageUrl,alt:e.name}),X.jsx("p",{className:"adoption_text",children:e.breed}),X.jsxs("p",{className:"adoption_desc",children:["Age: ",e.age," Years Old"]}),X.jsxs("p",{className:"adoption_desc",children:["Gender: ",e.gender]}),X.jsxs("p",{className:"adoption_desc",children:["Weight: ",e.weight," kg"]}),X.jsxs("p",{className:"adoption_desc",children:["Address: ",e.location]}),X.jsxs("p",{className:"adoption_desc",children:["Status: ",e.status]}),X.jsx(Ep,{to:`/adopterAdoptme/${e.id}`,children:X.jsx("div",{className:"adoptMe",children:X.jsx("p",{className:"adoption_button",children:"Adopt Me"})})})]},e.id)))})]})]})})},mW=()=>{const[e,t]=z.useState([]),n=Vw.storage().ref(),[r,i]=z.useState("all");z.useEffect((()=>{(async()=>{const e=await(async()=>{const e=(await n.child("images").listAll()).items.map((e=>e.getDownloadURL()));return Promise.all(e)})();t(e)})()}),[]);const[o,a]=z.useState([]);return z.useEffect((()=>{(async()=>{const e=Vw.firestore().collection("pets").orderBy("index"),t=await e.get(),r=await Promise.all(t.docs.map((async e=>{const t=e.data(),r=await n.child(`images/${t.index}`).getDownloadURL();return{...t,id:e.id,imageUrl:r}})));a(r)})()}),[]),X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/petOwnerHome",children:"Home"}),X.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),X.jsx("a",{href:"/rehome",children:"Rehome"}),X.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsxs("div",{className:"categories2",children:[X.jsx("h1",{className:"categories_h1",children:"Categories"}),X.jsxs("div",{className:"categories_container",children:[X.jsx("div",{className:"categories_box",onClick:()=>i("all"),children:X.jsx("img",{src:uW})}),X.jsx("div",{className:"categories_box",onClick:()=>i("Dog"),children:X.jsx("img",{src:lW})}),X.jsx("div",{className:"categories_box",onClick:()=>i("Cat"),children:X.jsx("img",{src:cW})})]})]}),X.jsxs("div",{className:"adoption2",children:[X.jsx("h1",{className:"adpotion_h1",children:"For Adoption"}),X.jsx("div",{className:"adoption_container",children:o.filter((e=>"all"===r||e.type.toLowerCase()===r.toLowerCase())).map(((e,t)=>X.jsxs("div",{className:"adoption_box",children:[X.jsx("img",{className:"adoption_image",src:e.imageUrl,alt:e.name}),X.jsx("p",{className:"adoption_text",children:e.breed}),X.jsxs("p",{className:"adoption_desc",children:["Age: ",e.age," Years Old"]}),X.jsxs("p",{className:"adoption_desc",children:["Gender: ",e.gender]}),X.jsxs("p",{className:"adoption_desc",children:["Weight: ",e.weight," kg"]}),X.jsxs("p",{className:"adoption_desc",children:["Address: ",e.location]}),X.jsxs("p",{className:"adoption_desc",children:["Status: ",e.status]}),X.jsx(Ep,{to:`/petOwnerAdoptme/${e.id}`,children:X.jsx("div",{className:"adoptMe",children:X.jsx("p",{className:"adoption_button",children:"Adopt Me"})})})]})))})]}),X.jsx("div",{className:"space"})]})})},gW=()=>{const[e,t]=z.useState(null),[n,r]=z.useState(null),{id:i}=yp();return z.useEffect((()=>{(async()=>{const e=Vw.firestore(),n=await e.collection("pets").doc(i).get(),r={id:n.id,...n.data()};t(r)})()}),[i]),z.useEffect((()=>{(async()=>{const t=await(async()=>{if(e){const t=Vw.storage().ref().child(`images/${e.index}`);return await t.getDownloadURL()}return null})();r(t),console.log(n)})()}),[e]),e?X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/adopterHome",children:"Home"}),X.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),X.jsx("a",{href:"/appointmentlist",children:"Appointments"}),X.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsx("div",{className:"details",children:X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"details_textSquare",children:[X.jsx("h1",{className:"details_h1",children:e.name}),X.jsxs("h2",{className:"details_h2",children:[X.jsx("b",{children:"Type:"})," ",e.type]}),X.jsxs("h2",{className:"details_h2",children:[X.jsx("b",{children:"Gender:"})," ",e.gender]}),X.jsxs("h2",{className:"details_h2",children:[X.jsx("b",{children:"Breed:"})," ",e.breed]}),X.jsxs("h2",{className:"details_h2",children:[X.jsx("b",{children:"Neutered:"})," ",e.neutered]}),X.jsxs("h2",{className:"details_h2",children:[X.jsx("b",{children:"Age (months):"})," ",e.age]}),X.jsx(Ep,{to:`/appointment/${e.id}`,children:X.jsx("div",{className:"details_appointment",children:X.jsx("p",{className:"details_appointment2",children:"Take a QnA & Make an         Appointment"})})})]}),n&&X.jsx("img",{className:"details_img",src:n}),X.jsx("h1",{className:"details_aboutme",children:"About Me"}),X.jsx("p",{className:"details_desc",children:e.about}),X.jsx("h1",{className:"details_caretaker",children:"Caretaker"}),X.jsx("div",{className:"caretaker_container",children:X.jsxs("div",{className:"caretaker_box",children:[X.jsxs("h1",{className:"caretaker_h1",children:["Caretaker: ",e.caretakerInfo]}),X.jsxs("h2",{className:"caretaker_h2",children:["Location: ",e.address," | Contact Number: ",e.caretakerNumber]})]})}),X.jsx("div",{className:"space2"})]})})]})}):X.jsx("div",{children:"Loading..."})},vW=()=>{const[e,t]=z.useState(null),[n,r]=z.useState(null),{id:i}=yp();return z.useEffect((()=>{(async()=>{const e=Vw.firestore(),n=await e.collection("pets").doc(i).get(),r={id:n.id,...n.data()};t(r)})()}),[i]),z.useEffect((()=>{(async()=>{const t=await(async()=>{if(e){const t=Vw.storage().ref().child(`images/${e.index}`);return await t.getDownloadURL()}return null})();r(t),console.log(n)})()}),[e]),e?X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/petOwnerHome",children:"Home"}),X.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),X.jsx("a",{href:"/rehome",children:"Rehome"}),X.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsx("div",{className:"details",children:X.jsxs(X.Fragment,{children:[X.jsxs("div",{className:"details_textSquare",children:[X.jsx("h1",{className:"details_h1",children:e.name}),X.jsxs("h2",{className:"details_h2",children:[X.jsx("b",{children:"Type:"})," ",e.type]}),X.jsxs("h2",{className:"details_h2",children:[X.jsx("b",{children:"Gender:"})," ",e.gender]}),X.jsxs("h2",{className:"details_h2",children:[X.jsx("b",{children:"Breed:"})," ",e.breed]}),X.jsxs("h2",{className:"details_h2",children:[X.jsx("b",{children:"Neutered:"})," ",e.neutered]}),X.jsxs("h2",{className:"details_h2",children:[X.jsx("b",{children:"Age (months):"})," ",e.age]})]}),n&&X.jsx("img",{className:"details_img",src:n}),X.jsx("h1",{className:"details_aboutme",children:"About Me"}),X.jsx("p",{className:"details_desc",children:e.about}),X.jsx("h1",{className:"details_caretaker",children:"Caretaker"}),X.jsx("div",{className:"caretaker_container",children:X.jsxs("div",{className:"caretaker_box",children:[X.jsxs("h1",{className:"caretaker_h1",children:["Caretaker: ",e.caretakerInfo]}),X.jsxs("h2",{className:"caretaker_h2",children:["Location: ",e.address," | Contact Number: ",e.caretakerNumber]})]})}),X.jsx("div",{className:"space2"})]})})]})}):X.jsx("div",{children:"Loading..."})},yW="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function bW(){let e="";for(let t=0;t<20;t++)e+=yW.charAt(Math.floor(62*Math.random()));return e}var xW=Vw.firestore();const wW=()=>{const e=vp(),[t,n]=z.useState(null),[r,i]=z.useState(null),[o,a]=z.useState(null),{id:s}=yp(),[l,u]=z.useState({q1:"",q2:"",q3:"",q4:"",q5:"",q6:"",q7:"",q8:"",q9:"",q10:"",q11:"",q12:"",q13:"",q14:"",q15:"",q16:"",q17:"",q18:"",q19:"",pet_index:"",appoint_name:"",appoint_number:"",appoint_email:"",appoint_address:"",appoint_date:"",pet_name:"",pet_caretaker:"",pet_number:"",pet_location:"",index:bW(),status:"Pending",imageUrl:`documents/${bW()}`});z.useEffect((()=>{(async()=>{const e=Vw.firestore(),t=await e.collection("pets").doc(s).get(),r={id:t.id,...t.data()};n(r),u({...l,pet_index:r.index.toString(),pet_name:r.name.toString(),pet_caretaker:r.caretakerInfo.toString(),pet_number:r.caretakerNumber.toString(),pet_location:r.location.toString()})})()}),[s]);const c=e=>{u({...l,[e.target.name]:e.target.value})};return z.useEffect((()=>{(async()=>{const e=await(async()=>{if(t){const e=Vw.storage().ref().child(`images/${t.index}`);return await e.getDownloadURL()}return null})();i(e),console.log(r)})()}),[t]),t?X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/adopterHome",children:"Home"}),X.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),X.jsx("a",{href:"/appointmentlist",children:"Appointments"}),X.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsxs("div",{className:"appointment",children:[X.jsx("h1",{className:"appointment_h1",children:"Question and Answer & Make An Appointment"}),X.jsxs(X.Fragment,{children:[X.jsx("div",{className:"appointment_container",children:X.jsxs("div",{className:"appointment_box",children:[r&&X.jsx("img",{src:r}),X.jsx("h1",{className:"appointment_texth1",children:t.name}),X.jsxs("h2",{className:"appointment_h2",children:["Caretaker: ",t.caretakerInfo]}),X.jsx("h2",{className:"appointment_h2",children:t.location}),X.jsx("h2",{className:"appointment_h2",children:t.caretakerNumber})]})}),X.jsx("form",{onSubmit:async t=>{if(t.preventDefault(),l.q1,l.q2,l.q3,l.q4,l.q5,l.q6,l.q7,l.q8,l.q9,l.q10,l.q11,l.q12,l.q13,l.q14,l.q15,l.q16,l.q17,l.q18,""!==l.q19){if(o){const e=$q(Hq(rW,`documents/${l.index}`),o);e.on("state_changed",(e=>{}),(e=>{console.log(e)}),(()=>{Wq(e.snapshot.ref).then((e=>{u({...l,imageUrl:e}),DU(uz(xW,"appointment"),l)}))}))}e.push("/adopterHome")}else alert('Please go back to "QnA" answer all questions.')},children:X.jsx("div",{className:"qnaBox",children:X.jsxs("div",{className:"qnaform",children:["Please Answer the Questions",X.jsx("br",{}),X.jsx("p",{children:"1. Do you own your home?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q1",value:"Yes",checked:"Yes"===l.q1,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q1",value:"No",checked:"No"===l.q1,onChange:c})," No"]})]}),X.jsx("p",{children:"2. If renting, do you have permission from your landlord to have pets?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q2",value:"Yes",checked:"Yes"===l.q2,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q2",value:"No",checked:"No"===l.q2,onChange:c})," No"]})]}),X.jsx("p",{children:"3. Are there children in your household?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q3",value:"Yes",checked:"Yes"===l.q3,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q3",value:"No",checked:"No"===l.q3,onChange:c})," No"]})]}),X.jsx("p",{children:"4. Do you have other pets at home?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q4",value:"Yes",checked:"Yes"===l.q4,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q4",value:"No",checked:"No"===l.q4,onChange:c})," No"]})]}),X.jsx("p",{children:"5. Have you owned a pet before?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q5",value:"Yes",checked:"Yes"===l.q5,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q5",value:"No",checked:"No"===l.q5,onChange:c})," No"]})]}),X.jsx("p",{children:"6. Are you familiar with the specific needs of the chosen pet type/breed?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q6",value:"Yes",checked:"Yes"===l.q6,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q6",value:"No",checked:"No"===l.q6,onChange:c})," No"]})]}),X.jsx("p",{children:"7. Do you have a stable daily routine?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q7",value:"Yes",checked:"Yes"===l.q7,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q7",value:"No",checked:"No"===l.q7,onChange:c})," No"]})]}),X.jsx("p",{children:"8. Are you away from home for long periods during the day?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q8",value:"Yes",checked:"Yes"===l.q8,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q8",value:"No",checked:"No"===l.q8,onChange:c})," No"]})]}),X.jsx("p",{children:"9. Can you afford the costs associated with pet ownership, including food, veterinary care, and unexpected expenses?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q9",value:"Yes",checked:"Yes"===l.q9,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q9",value:"No",checked:"No"===l.q9,onChange:c})," No"]})]}),X.jsx("p",{children:"10. Do you have a regular veterinarian?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q10",value:"Yes",checked:"Yes"===l.q10,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q10",value:"No",checked:"No"===l.q10,onChange:c})," No"]})]}),X.jsx("p",{children:"11. Are you willing to provide regular veterinary care, including vaccinations and routine check-ups?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q11",value:"Yes",checked:"Yes"===l.q11,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q11",value:"No",checked:"No"===l.q11,onChange:c})," No"]})]}),X.jsx("p",{children:"12. Are you willing to attend training classes if necessary?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q12",value:"Yes",checked:"Yes"===l.q12,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q12",value:"No",checked:"No"===l.q12,onChange:c})," No"]})]}),X.jsx("p",{children:"13. Do you have experience in training pets?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q13",value:"Yes",checked:"Yes"===l.q13,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q13",value:"No",checked:"No"===l.q13,onChange:c})," No"]})]}),X.jsx("p",{children:"14. Will the pet primarily be kept indoors?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q14",value:"Yes",checked:"Yes"===l.q14,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q14",value:"No",checked:"No"===l.q14,onChange:c})," No"]})]}),X.jsx("p",{children:"15. Do you have a secure, fenced yard?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q15",value:"Yes",checked:"Yes"===l.q15,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q15",value:"No",checked:"No"===l.q15,onChange:c})," No"]})]}),X.jsx("p",{children:"16. Do you have a plan for emergencies or unforeseen circumstances?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q16",value:"Yes",checked:"Yes"===l.q16,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q16",value:"No",checked:"No"===l.q16,onChange:c})," No"]})]}),X.jsx("p",{children:"17. Are you willing to spay/neuter your pet if it is not already done?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q17",value:"Yes",checked:"Yes"===l.q17,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q17",value:"No",checked:"No"===l.q17,onChange:c})," No"]})]}),X.jsx("p",{children:"18. Can you provide personal or veterinarian references?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q18",value:"Yes",checked:"Yes"===l.q18,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q18",value:"No",checked:"No"===l.q18,onChange:c})," No"]})]}),X.jsx("p",{children:"19. Are you willing to allow a representative from the pet owner to conduct a home visit?"}),X.jsxs("div",{className:"AddPet_radio",children:[X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q19",value:"Yes",checked:"Yes"===l.q19,onChange:c})," Yes"]}),X.jsxs("label",{className:"radioMargin",children:[X.jsx("input",{type:"radio",name:"q19",value:"No",checked:"No"===l.q19,onChange:c})," No"]})]}),X.jsx("div",{className:"scheduleBox1",children:X.jsxs("div",{className:"scheduleform",children:[X.jsx("h1",{className:"schedule_h1",children:"Schedule Your Visit"}),X.jsx("h3",{className:"schedule_h1",children:"↓Insert ID Here↓"}),X.jsx("input",{type:"file",className:"schedule_file",onChange:e=>{e.target.files&&a(e.target.files[0])}}),X.jsx("input",{className:"schedule_input1",type:"date",name:"appoint_date",value:l.appoint_date,onChange:c}),X.jsx("h1",{className:"schedule_h1",children:"Fill your details"}),X.jsx("input",{className:"schedule_input1",type:"text",name:"appoint_name",value:l.appoint_name,onChange:c,placeholder:"Full Name"}),X.jsx("input",{className:"schedule_input1",type:"text",name:"appoint_number",value:l.appoint_number,onChange:c,placeholder:"Phone Number"}),X.jsx("input",{className:"schedule_input1",type:"email",name:"appoint_email",value:l.appoint_email,onChange:c,placeholder:"Email"}),X.jsx("input",{className:"schedule_input1",type:"text",name:"appoint_address",value:l.appoint_address,onChange:c,placeholder:"Address"}),X.jsx("input",{className:"hidden_input",type:"text",name:"pet_index",value:l.pet_index||"",onChange:c,disabled:!0}),X.jsx("input",{className:"hidden_input",type:"text",name:"pet_name",value:l.pet_name||"",onChange:c,disabled:!0}),X.jsx("input",{className:"hidden_input",type:"text",name:"pet_number",value:l.pet_number||"",onChange:c,disabled:!0}),X.jsx("input",{className:"hidden_input",type:"text",name:"pet_caretaker",value:l.pet_caretaker||"",onChange:c,disabled:!0}),X.jsx("input",{className:"hidden_input",type:"text",name:"pet_location",value:l.pet_location||"",onChange:c,disabled:!0})]})}),X.jsx("input",{className:"schedule_submit1",type:"submit"})]})})})]})]})]})}):X.jsx("div",{children:"Loading..."})},kW="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAD8AAABBCAYAAABmd3xuAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAHiSURBVHgB7do/TsMwFAbw77lFYmqTjYXKnIAjUDYGKOEI3ABOAJwAOAE9QvkzMJYbcIQIGNhquoAE2DgFBtIOqcFQ8d5PihKlierPdey6NSCEEEKI/4oQ0XB9MXOKDhGIrNttXNz2EEkdMRESX7saofz9iKhy+EE7SeaTZKrCvFrbtAiniJqPmdbT3PNkjEn7xlS5tnKzf+i09v3Fe5hxDjhont3sV7lWgTEJzxXr8JV7e6tUFy8v/eK4ptQJSkOY72iOrbXRxuRPSqn2hI7X+JFla3RUr+eoqHL4tJfnfldsGHZaY6+Tc9fpxV0fkQ03FjVobJAyIe8tzzxX0uHFMlhb0LW5ufaXkw5m0mSlmASVv8u/Pj/308v7HJFEDT8KTnTy5SSNOs3xUeF99qdL92/7XReRyDPPlYTnSsJzJeG5kvBcSXiuJDxXEp4rCc+VhOdKwnMlf1rE0ji/7aLi7+6Ns5sl/DJp9lxJeK5+ssPbfOi0NGIjWoZz+Alh4YlyXwBdOpcRkCG2ScGdyxEgqNk7564wQxzoFAGCwluljtzH4qS/VpTD1lTQKrCg8GkvN74CVv+6AkbBfTk+VopN7Vvr7QeZ1sraHX+44reoy8NLilXVp0ULLD4ICCGEEEKUvAH7tYCNvGG0BgAAAABJRU5ErkJggg==",_W=()=>{const[e,t]=z.useState([]),n=Vw.storage().ref();z.useEffect((()=>{(async()=>{const e=await(async()=>{const e=(await n.child("images").listAll()).items.map((e=>e.getDownloadURL()));return Promise.all(e)})();t(e)})()}),[]);const[r,i]=z.useState([]);return z.useEffect((()=>{(async()=>{const e=Vw.firestore().collection("pets").orderBy("index"),t=(await e.get()).docs.map((e=>({...e.data(),id:e.id})));i(t)})()}),[]),X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/petOwnerHome",children:"Home"}),X.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),X.jsx("a",{href:"/rehome",children:"Rehome"}),X.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsxs("div",{className:"rehome",children:[X.jsx("h1",{className:"rehome_h1",children:"Pet Listed"}),X.jsx("a",{href:"/addpet",children:X.jsx("h1",{className:"addnewpet",children:"Add Pet"})}),X.jsx("div",{className:"rehome_container",children:r.map(((t,n)=>X.jsxs("div",{className:"rehome_box",children:[X.jsx("img",{className:"rehome_img",src:e[n],alt:t.name},n),X.jsx("h1",{className:"rehome_texth1",children:t.name},n),X.jsxs("h2",{className:"rehome_h2",children:["Owner Information: ",t.caretakerInfo]},n),X.jsxs("h2",{className:"rehome_h2",children:["Address: ",t.location]},n),X.jsxs("h2",{className:"rehome_h2",children:["Neutered:",t.neutered]},n),X.jsxs("h2",{className:"rehome_h2",children:["Status:",t.status]},n),X.jsx(Ep,{className:"edit",to:`/updatePet/${t.id}`,children:X.jsx("img",{className:"edit",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADMAAAAtCAYAAAADfVPBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAMwSURBVHgB7ZpBbtpAFED/d5FitQriCDlAF/QG5QZk0ZSki8Kyq5Bdd4ETkJ4gdAMEKsENSm/AogfgBnVbqSJV8HS+EWDDzHjGHgNCfYskzNjjeXj+t/8oCHsk37+6RubX+Z9nAGzi+/jp92WvDQlB2BP5QeUWfWhstjMHGr/e9JqQgGewB2QiBDJ4ffL2JTwOvn8DQxzYMfmHy9aWCINx+CP15/uVezBkpzI0QQRWD7fxiTd/Vnol+h1pZ1A1FdpJzBTuywX/hduiCYbbkeGNV+nerY7rVqo8ZjYE2Aj/PNa82siLu07mMiTCnp985ZcqRi7sQ80TZC6J0IQLleKEMl1mYhH0ZCIEtfP+Eh0XOqdI49B4oCAzGf4NnwnvCMylIkt4/xgRt4R8162rzstEJhBxYEuEYOC0qD9uDO+iM1kIhUBWVJ1jXWYtQk91IUF/nFCwRNl8I3bwh+ocqzISkekiBmAaalMKyWLNYaB8M7AmoxIJYkBTSBxrPGnwJcfHmarmYCU1F/pXRcYYnwALZ5ulyBTCE90S5hN9eip57wYTaT+J8BiKmUZ6GV2R1fGyCfMsR8kBNu8sOuc6IsEokILTL5fvnTncRUXiH3CFIY+JvyfCbBdC+oXISCyzEGHtaKvek5qIETIWIRIlAJEIv/hnXRHCOx/xNwG8EXQlEgnmAIaIahES4RevggGmsaaD0Z2xJvJwUd4WoSU6e5VUhNCWkYg0TUVoifKsNTRNGjpoyShEGmCAjVhTERszQZkrqA5NRWwtURVKmaDM3awOD1SEkC4zoQiVuXZEmrZFgnE3G0zLXBW2Yk2XyL6Zosz9YCxCscbgY7gtSxEiF/nkumX+U/Dq3dV60VuyWKKsGm7LWoTIqTqDev2in0BEFGvrLaWsUMqA72jn/tUSZSCItW4bdoCVStNm0khDDlKyKLbYUFzmdoyWaFpSyYS2lM7Wrfplrm0SLzPpBsaeRAjlnfGRlU8l20Fc5BaEOzGdKewJdWpGvEa98i1VUWULG9nsIESItDIHI0JEl9lsNkLXHYMus5lno6j6z7GD+W6lAUdCDhfPi6Ng5/8HkCVHJfMPZJIG4Xp+O78AAAAASUVORK5CYII="})}),X.jsx("img",{className:"delete",src:kW,onClick:()=>(async(e,t)=>{const n=Vw.firestore().collection("pets").doc(e),o=Vw.storage().ref().child(`images/${t}`);window.confirm("Are you sure you want to delete this pet?")&&(o.delete().then((()=>{console.log("Image deleted from Firebase Storage.")})).catch((e=>{console.error("Error deleting image from Firebase Storage:",e)})),await n.delete(),i(r.filter((t=>t.id!==e))))})(t.id,t.index)})]})))}),X.jsx("div",{className:"space3"})]})]})})},EW="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";function CW(){let e="";for(let t=0;t<20;t++)e+=EW.charAt(Math.floor(62*Math.random()));return e}const IW=()=>{const e=vp(),[t,n]=z.useState({index:CW(),name:"",age:"",breed:"",location:"",about:"",caretakerInfo:"",caretakerNumber:"",weight:"",gender:"male",neutered:"yes",type:"cat",imageUrl:`images/${Date.now()}`,status:"Available",address:""}),[r,i]=z.useState(null),o=e=>{n({...t,[e.target.name]:e.target.value})};return X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/petOwnerHome",children:"Home"}),X.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),X.jsx("a",{href:"/rehome",children:"Rehome"}),X.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsx("div",{className:"AddPet",children:X.jsxs("div",{className:"AddPetBox",children:[X.jsx("h1",{className:"AddPetBoxH1",children:"Re-Home Pet"}),X.jsx("img",{src:"/assets/Group 54-BH8CYfnq.png"}),X.jsxs("form",{onSubmit:async i=>{if(i.preventDefault(),r){const e=$q(Hq(rW,`images/${t.index}`),r);e.on("state_changed",(e=>{}),(e=>{console.log(e)}),(()=>{Wq(e.snapshot.ref).then((e=>{n({...t,imageUrl:e}),DU(uz(nW,"pets"),t)}))}))}e.push("/rehome")},className:"AddPetform",children:[X.jsx("input",{type:"file",onChange:e=>{e.target.files&&i(e.target.files[0])}}),X.jsx("input",{type:"text",className:"AddPetForm_input",placeholder:"Pet Name",name:"name",value:t.name,onChange:o}),X.jsx("input",{type:"text",className:"AddPetForm_input",placeholder:"Age",name:"age",value:t.age,onChange:o}),X.jsx("div",{className:"AddPet_dropdown",children:X.jsxs("select",{className:"AddPet_dropbtn",name:"gender",value:t.gender,onChange:o,children:[X.jsx("option",{value:"",children:"Select Gender"}),X.jsx("option",{value:"male",children:"Male"}),X.jsx("option",{value:"female",children:"Female"})]})}),X.jsx("div",{className:"AddPet_dropdown",children:X.jsxs("select",{className:"AddPet_dropbtn",name:"neutered",value:t.neutered,onChange:o,children:[X.jsx("option",{value:"",children:"Select Neutered"}),X.jsx("option",{value:"Yes",children:"Yes"}),X.jsx("option",{value:"No",children:"No"})]})}),X.jsx("div",{className:"AddPet_dropdown",children:X.jsxs("select",{className:"AddPet_dropbtn",name:"type",value:t.type,onChange:o,children:[X.jsx("option",{value:"",children:"Select Type"}),X.jsx("option",{value:"Cat",children:"Cat"}),X.jsx("option",{value:"Dog",children:"Dog"})]})}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Breed",name:"breed",value:t.breed,onChange:o}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Weight (kg)",name:"weight",value:t.weight,onChange:o}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Address",name:"location",value:t.location,onChange:o}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"About",name:"about",value:t.about,onChange:o}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Name",name:"caretakerInfo",value:t.caretakerInfo,onChange:o}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Number",name:"caretakerNumber",value:t.caretakerNumber,onChange:o}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Location",name:"address",value:t.address,onChange:o}),X.jsx("a",{href:"/home",children:X.jsx("button",{className:"AddPet_submit",type:"submit",children:"Add Pet"})})]})]})})]})})},SW=()=>{const e=vp(),{id:t}=yp(),[n,r]=z.useState({index:Date.now(),name:"",age:"",breed:"",location:"",about:"",caretakerInfo:"",caretakerNumber:"",weight:"",gender:"male",neutered:"yes",type:"cat",status:"available",address:""});z.useEffect((()=>{(async()=>{const e=Vw.firestore(),n=await e.collection("pets").doc(t).get();r(n.data())})()}),[t]);const i=e=>{r({...n,[e.target.name]:e.target.value})};return n?X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/petOwnerHome",children:"Home"}),X.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),X.jsx("a",{href:"/rehome",children:"Rehome"}),X.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsx("div",{className:"AddPet",children:X.jsxs("div",{className:"AddPetBox",children:[X.jsx("h1",{className:"AddPetBoxH1",children:"Re-Home Pet"}),X.jsxs("form",{onSubmit:r=>(async(n,r)=>{n.preventDefault();const i=Vw.firestore();await i.collection("pets").doc(t).set(r),e.push("/rehome")})(r,n),className:"UpdatePetform",children:[X.jsx("input",{type:"text",className:"AddPetForm_input",placeholder:"Pet Name",name:"name",value:n.name,onChange:i}),X.jsx("input",{type:"text",className:"AddPetForm_input",placeholder:"Age",name:"age",value:n.age,onChange:i}),X.jsx("div",{className:"AddPet_dropdown",children:X.jsxs("select",{className:"AddPet_dropbtn",name:"gender",value:n.gender,onChange:i,children:[X.jsx("option",{value:"",children:"Select Gender"}),X.jsx("option",{value:"male",children:"Male"}),X.jsx("option",{value:"female",children:"Female"})]})}),X.jsx("div",{className:"AddPet_dropdown",children:X.jsxs("select",{className:"AddPet_dropbtn",name:"neutered",value:n.neutered,onChange:i,children:[X.jsx("option",{value:"",children:"Select Neutered"}),X.jsx("option",{value:"Yes",children:"Yes"}),X.jsx("option",{value:"No",children:"No"})]})}),X.jsx("div",{className:"AddPet_dropdown",children:X.jsxs("select",{className:"AddPet_dropbtn",name:"type",value:n.type,onChange:i,children:[X.jsx("option",{value:"",children:"Select Type"}),X.jsx("option",{value:"Cat",children:"Cat"}),X.jsx("option",{value:"Dog",children:"Dog"})]})}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Breed",name:"breed",value:n.breed,onChange:i}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Weight (kg)",name:"weight",value:n.weight,onChange:i}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Address",name:"location",value:n.location,onChange:i}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"About",name:"about",value:n.about,onChange:i}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Information",name:"caretakerInfo",value:n.caretakerInfo,onChange:i}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Number",name:"caretakerNumber",value:n.caretakerNumber,onChange:i}),X.jsx("input",{className:"AddPetForm_input",type:"text",placeholder:"Caretaker Location",name:"address",value:n.address,onChange:i}),X.jsx("a",{href:"/home",children:X.jsx("button",{className:"AddPet_submit",type:"submit",children:"Save"})})]})]})})]})}):X.jsx("div",{children:"Loading..."})},NW=()=>{const[e,t]=z.useState([]),[n,r]=z.useState([]),i=Vw.storage().ref();return z.useEffect((()=>{(async()=>{const e=await(async()=>{const e=(await i.child("documents").listAll()).items.map((e=>e.getDownloadURL()));return Promise.all(e)})();r(e)})()}),[]),z.useEffect((()=>{(async()=>{const e=Vw.firestore().collection("appointment").orderBy("index"),n=await e.get(),r=await Promise.all(n.docs.map((async e=>{var t;const n=e.data(),r=await i.child(`documents/${n.index}`).getDownloadURL();return{...n,id:e.id,imageUrl:r,index:null!==(t=n.index)&&void 0!==t?t:""}})));t(r)})()}),[]),X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/adopterHome",children:"Home"}),X.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),X.jsx("a",{href:"/appointmentlist",children:"Appointments"}),X.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsxs("div",{className:"rehome",children:[X.jsx("h1",{className:"rehome_h1",children:"Appointment List"}),X.jsx("div",{className:"rehome_container",children:e.map(((n,r)=>X.jsxs("div",{className:"appointment_outerbox",children:[X.jsx("img",{className:"document_img",src:n.imageUrl,alt:n.index},r),X.jsxs("div",{className:"appointment_innerbox2",children:[X.jsx("h1",{className:"rehome_texth1",children:n.pet_name}),X.jsxs("h2",{className:"rehome_h2",children:["Owner Name: ",n.pet_caretaker]}),X.jsxs("h2",{className:"rehome_h2",children:["Owner Number: ",n.pet_number]}),X.jsxs("h2",{className:"rehome_h2",children:["Owner Address: ",n.pet_location]}),X.jsxs("h2",{className:"rehome_h2",children:["Your Name: ",n.appoint_name]}),X.jsxs("h2",{className:"rehome_h2",children:["Your Number: ",n.appoint_number]}),X.jsxs("h2",{className:"rehome_h2",children:["Your Email: ",n.appoint_email]}),X.jsxs("h2",{className:"rehome_h2",children:["Status: ",n.status]})]}),X.jsx("img",{className:"deleteImg2",src:kW,onClick:()=>(async(n,r)=>{const i=Vw.firestore().collection("appointment").doc(n),o=Vw.storage().ref().child(`documents/${r}`);window.confirm("Are you sure you want to delete this appointment?")&&(o.delete().then((()=>{console.log("Image deleted from Firebase Storage.")})).catch((e=>{console.error("Error deleting image from Firebase Storage:",e)})),await i.delete(),t(e.filter((e=>e.id!==n))))})(n.id,n.index)})]},n.id)))})]})]})})};
/**
             * @license
             * Copyright 2019 Google LLC. All Rights Reserved.
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             * http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             * =============================================================================
             */
var TW=function(e,t){return(TW=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function AW(e,t){function n(){this.constructor=e}TW(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function RW(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function DW(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var OW=function(){function e(e){this.global=e,this.flags={},this.flagRegistry={},this.urlFlags={},this.populateURLFlags()}return e.prototype.setPlatform=function(e,t){null!=this.platform&&console.warn("Platform "+this.platformName+" has already been set. Overwriting the platform with "+t+"."),this.platformName=e,this.platform=t},e.prototype.registerFlag=function(e,t,n){if(this.flagRegistry[e]={evaluationFn:t,setHook:n},null!=this.urlFlags[e]){var r=this.urlFlags[e];console.warn("Setting feature override from URL "+e+": "+r+"."),this.set(e,r)}},e.prototype.get=function(e){return e in this.flags||(this.flags[e]=this.evaluateFlag(e)),this.flags[e]},e.prototype.getNumber=function(e){return this.get(e)},e.prototype.getBool=function(e){return this.get(e)},e.prototype.getFlags=function(){return this.flags},Object.defineProperty(e.prototype,"features",{get:function(){return this.flags},enumerable:!0,configurable:!0}),e.prototype.set=function(e,t){if(null==this.flagRegistry[e])throw new Error("Cannot set flag "+e+" as it has not been registered.");this.flags[e]=t,null!=this.flagRegistry[e].setHook&&this.flagRegistry[e].setHook(t)},e.prototype.evaluateFlag=function(e){if(null==this.flagRegistry[e])throw new Error("Cannot evaluate flag '"+e+"': no evaluation function found.");return this.flagRegistry[e].evaluationFn()},e.prototype.setFlags=function(e){this.flags=Object.assign({},e)},e.prototype.reset=function(){this.flags={},this.urlFlags={},this.populateURLFlags()},e.prototype.populateURLFlags=function(){var e=this;if(void 0!==this.global&&void 0!==this.global.location&&void 0!==this.global.location.search){var t,n,r=(t=this.global.location.search,n={},t.replace(/[?&]([^=?&]+)(?:=([^&]*))?/g,(function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];return function(e,t,n){e[decodeURIComponent(t)]=decodeURIComponent(n||"")}(n,t[0],t[1]),t.join("=")})),n);"tfjsflags"in r&&r.tfjsflags.split(",").forEach((function(t){var n=t.split(":"),r=n[0],i=n[1];e.urlFlags[r]=function(e,t){if("true"===(t=t.toLowerCase())||"false"===t)return"true"===t;if(""+ +t===t)return+t;throw new Error("Could not parse value flag value "+t+" for flag "+e+".")}(r,i)}))}},e}();function PW(){return LW}var LW=null;function MW(e){for(var t=e.length,n=0,r=0;t>0;)r=Math.random()*t|0,n=e[--t],e[t]=e[r],e[r]=n}function FW(e,t,n){return Math.max(e,Math.min(t,n))}function jW(e){return e%2==0?e:e+1}function BW(e){for(var t=0,n=0;n<e.length;n++)t+=e[n];return t}function VW(e,t){if(!e)throw new Error("string"==typeof t?t:t())}function zW(e,t,n){void 0===n&&(n=""),VW(WW(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))}function UW(e){VW(null!=e,(function(){return"The input to the tensor constructor must be a non-null value."}))}function $W(e,t,n){if(void 0===t&&(t=[]),void 0===n&&(n=!1),null==t&&(t=[]),Array.isArray(e)||oH(e)&&!n)for(var r=0;r<e.length;++r)$W(e[r],t,n);else t.push(e);return t}function qW(e){if(0===e.length)return 1;for(var t=e[0],n=1;n<e.length;n++)t*=e[n];return t}function WW(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function HW(e){return e%1==0}function GW(e){if(null!=Math.tanh)return Math.tanh(e);if(e===1/0)return 1;if(e===-1/0)return-1;var t=Math.exp(2*e);return(t-1)/(t+1)}function KW(e){var t=Math.ceil(Math.sqrt(e));return[t,Math.ceil(e/t)]}function YW(e,t){return t<=e.length?e:e+" ".repeat(t-e.length)}function XW(e,t,n){return void 0===t&&(t=function(e){return 0}),new Promise((function(r,i){var o=0,a=function(){if(e())r();else{var s=t(++o);null!=n&&o>=n?i():setTimeout(a,s)}};a()}))}function QW(e,t){for(var n=1,r=-1,i=0;i<e.length;++i)if(e[i]>=0)n*=e[i];else if(-1===e[i]){if(-1!==r)throw Error("Shapes can only have 1 implicit size. Found -1 at dim "+r+" and dim "+i);r=i}else if(e[i]<0)throw Error("Shapes can not be < 0. Found "+e[i]+" at dim "+i);if(-1===r){if(t>0&&t!==n)throw Error("Size("+t+") must match the product of shape "+e);return e}if(0===n)throw Error("Cannot infer the missing size in ["+e+"] when there are 0 elements");if(t%n!=0)throw Error("The implicit shape can't be a fractional number. Got "+t+" / "+n);var o=e.slice();return o[r]=t/n,o}function JW(e,t){var n=t.length;return VW((e=null==e?t.map((function(e,t){return t})):[].concat(e)).every((function(e){return e>=-n&&e<n})),(function(){return"All values in axis param must be in range [-"+n+", "+n+") but got axis "+e})),VW(e.every((function(e){return HW(e)})),(function(){return"All values in axis param must be integers but got axis "+e})),e.map((function(e){return e<0?n+e:e}))}function ZW(e,t){for(var n=[],r=[],i=null!=t&&Array.isArray(t)&&0===t.length,o=null==t||i?null:JW(t,e).sort(),a=0,s=0;s<e.length;++s){if(null!=o){if(o[a]===s&&1!==e[s])throw new Error("Can't squeeze axis "+s+" since its dim '"+e[s]+"' is not 1");(null==o[a]||o[a]>s)&&1===e[s]&&(n.push(e[s]),r.push(s)),o[a]<=s&&a++}1!==e[s]&&(n.push(e[s]),r.push(s))}return{newShape:n,keptDims:r}}function eH(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else{if("bool"!==e)throw new Error("Unknown data type "+e);n=new Uint8Array(t)}return n}function tH(e,t){var n=null;if(null==e||"float32"===e)n=new Float32Array(t);else if("int32"===e)n=new Int32Array(t);else if("bool"===e)n=new Uint8Array(t);else{if("string"!==e)throw new Error("Unknown data type "+e);n=new Array(t)}return n}function nH(e,t){for(var n=0;n<e.length;n++){var r=e[n];if(isNaN(r)||!isFinite(r))throw Error("A tensor of type "+t+" being uploaded contains "+r+".")}}function rH(e){return"bool"===e||"complex64"===e||"float32"===e||"int32"===e||"string"===e}function iH(e,t){return!("complex64"===t||"float32"===t&&"complex64"!==e||"int32"===t&&"float32"!==e&&"complex64"!==e||"bool"===t&&"bool"===e)}function oH(e){return e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array}function aH(e){if("float32"===e||"int32"===e)return 4;if("complex64"===e)return 8;if("bool"===e)return 1;throw new Error("Unknown dtype "+e)}function sH(e){if(null==e)return 0;var t=0;return e.forEach((function(e){return t+=e.length})),t}function lH(e){return"string"==typeof e||e instanceof String}function uH(e){return"boolean"==typeof e}function cH(e){return"number"==typeof e}function dH(e){return Array.isArray(e)?dH(e[0]):e instanceof Float32Array?"float32":e instanceof Int32Array||e instanceof Uint8Array?"int32":cH(e)?"float32":lH(e)?"string":uH(e)?"bool":"float32"}function hH(e){return!!(e&&e.constructor&&e.call&&e.apply)}function pH(e,t){for(var n=t;n<e;++n)if(e%n==0)return n;return e}function fH(e){var t=e.length;if(t<2)return[];var n=new Array(t-1);n[t-2]=e[t-1];for(var r=t-3;r>=0;--r)n[r]=n[r+1]*e[r+1];return n}function mH(e,t,n){if("string"===t)throw new Error("Cannot convert a string[] to a TypedArray");if(Array.isArray(e)&&(e=$W(e)),n&&nH(e,t),function(e,t){return e instanceof Float32Array&&"float32"===t||e instanceof Int32Array&&"int32"===t||e instanceof Uint8Array&&"bool"===t}(e,t))return e;if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t){for(var r=new Uint8Array(e.length),i=0;i<r.length;++i)0!==Math.round(e[i])&&(r[i]=1);return r}throw new Error("Unknown data type "+t)}function gH(e,t){if(0===e.length)return t[0];var n=e.reduce((function(e,t){return e*t}));if(0===n)return[];if(n!==t.length)throw new Error("["+e+"] does not match the input size.");return function e(t,n,r){var i=new Array;if(1===n.length)for(var o=n[0],a=0;a<o;a++)i[a]=r[t+a];else{o=n[0];var s=n.slice(1),l=s.reduce((function(e,t){return e*t}));for(a=0;a<o;a++)i[a]=e(t+a*l,s,r)}return i}(0,e,t)}function vH(e,t){for(var n=yH(e,t),r=0;r<n.length;r++)n[r]=1;return n}function yH(e,t){if(null==t||"float32"===t||"complex64"===t)return new Float32Array(e);if("int32"===t)return new Int32Array(e);if("bool"===t)return new Uint8Array(e);throw new Error("Unknown data type "+t)}function bH(){return PW().platform.now()}function xH(e){e.forEach((function(t){VW(Number.isInteger(t)&&t>=0,(function(){return"Tensor must have a shape comprised of positive integers but got shape ["+e+"]."}))}))}function wH(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",PW().platform.encode(e,t)}function kH(e,t){return void 0===t&&(t="utf-8"),t=t||"utf-8",PW().platform.decode(e,t)}var _H=Object.freeze({shuffle:MW,clamp:FW,nearestLargerEven:jW,sum:BW,randUniform:function(e,t){var n=Math.random();return t*n+(1-n)*e},distSquared:function(e,t){for(var n=0,r=0;r<e.length;r++){var i=Number(e[r])-Number(t[r]);n+=i*i}return n},assert:VW,assertShapesMatch:zW,assertNonNull:UW,flatten:$W,sizeFromShape:qW,isScalarShape:function(e){return 0===e.length},arraysEqual:WW,isInt:HW,tanh:GW,sizeToSquarishShape:KW,createShuffledIndices:function(e){for(var t=new Uint32Array(e),n=0;n<e;++n)t[n]=n;return MW(t),t},rightPad:YW,repeatedTry:XW,inferFromImplicitShape:QW,parseAxisParam:JW,squeezeShape:ZW,getTypedArrayFromDType:eH,getArrayFromDType:tH,checkConversionForErrors:nH,isValidDtype:rH,hasEncodingLoss:iH,isTypedArray:oH,bytesPerElement:aH,bytesFromStringArray:sH,isString:lH,isBoolean:uH,isNumber:cH,inferDtype:dH,isFunction:hH,nearestDivisor:pH,computeStrides:fH,toTypedArray:mH,toNestedArray:gH,makeOnesTypedArray:vH,makeZerosTypedArray:yH,now:bH,assertNonNegativeIntegerDimensions:xH,fetch:function(e,t){return PW().platform.fetch(e,t)},encodeString:wH,decodeString:kH}),EH=function(){function e(e,t){this.backendTimer=e,this.logger=t,null==t&&(this.logger=new CH)}return e.prototype.profileKernel=function(e,t,n){var r,i=this,o=this.backendTimer.time((function(){r=n()}));return(Array.isArray(r)?r:[r]).forEach((function(n){n.data().then((function(r){!function(e,t,n){if("float32"!==t)return!1;for(var r=0;r<e.length;r++){var i=e[r];if(isNaN(i)||!isFinite(i))return console.warn("Found "+i+" in the result of '"+n+"'"),!0}}(r,n.dtype,e),o.then((function(o){var a="";null!=o.getExtraProfileInfo&&(a=o.getExtraProfileInfo()),i.logger.logKernelProfile(e,n,r,o.kernelMs,t,a)}))}))})),r},e}(),CH=function(){function e(){}return e.prototype.logKernelProfile=function(e,t,n,r,i,o){var a=YW(r+"ms",9),s=YW(e,25),l=t.rank,u=t.size,c=YW(t.shape.toString(),14),d="";for(var h in i){var p=i[h].shape,f=p.length;d+=h+": "+f+"D "+(f>0?p:"")+" "}console.log("%c"+s+"\t%c"+a+"\t%c"+l+"D "+c+"\t%c"+u+"\t%c"+d+"\t%c"+o,"font-weight:bold","color:red","color:blue","color: orange","color: green","color: steelblue")},e}(),IH=7;function SH(e,t,n){return YW(Array.isArray(e)?parseFloat(e[0].toFixed(IH))+" + "+parseFloat(e[1].toFixed(IH))+"j":lH(e)?"'"+e+"'":"bool"===n?NH(e):parseFloat(e.toFixed(IH)).toString(),t)}function NH(e){return 0===e?"false":"true"}function TH(e){for(var t=[],n=0;n<e.length;n+=2)t.push([e[n],e[n+1]]);return t}var AH=function(){function e(e,t,n){var r=this;if(this.dtype=t,this.shape=e.slice(),this.size=qW(e),null!=n){var i=n.length;VW(i===this.size,(function(){return"Length of values '"+i+"' does not match the size inferred by the shape '"+r.size+"'."}))}if("complex64"===t)throw new Error("complex64 dtype TensorBuffers are not supported. Please create a TensorBuffer for the real and imaginary parts separately and call tf.complex(real, imag).");this.values=n||tH(t,this.size),this.strides=fH(e)}return e.prototype.set=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];0===n.length&&(n=[0]),VW(n.length===this.rank,(function(){return"The number of provided coordinates ("+n.length+") must match the rank ("+t.rank+")"}));var i=this.locToIndex(n);this.values[i]=e},e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];0===e.length&&(e=[0]);for(var n=0,r=0,i=e;r<i.length;r++){var o=i[r];if(o<0||o>=this.shape[n]){var a="Requested out of range element at "+e+".   Buffer shape="+this.shape;throw new Error(a)}n++}for(var s=e[e.length-1],l=0;l<e.length-1;++l)s+=this.strides[l]*e[l];return this.values[s]},e.prototype.locToIndex=function(e){if(0===this.rank)return 0;if(1===this.rank)return e[0];for(var t=e[e.length-1],n=0;n<e.length-1;++n)t+=this.strides[n]*e[n];return t},e.prototype.indexToLoc=function(e){if(0===this.rank)return[];if(1===this.rank)return[e];for(var t=new Array(this.shape.length),n=0;n<t.length-1;++n)t[n]=Math.floor(e/this.strides[n]),e-=t[n]*this.strides[n];return t[t.length-1]=e,t},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.toTensor=function(){return PH.make(this.shape,{values:this.values},this.dtype)},e}(),RH=null,DH=null,OH=null,PH=function(){function e(e,t,n,r,i){this.kept=!1,this.isDisposedInternal=!1,this.shape=e.slice(),this.dtype=t||"float32",this.size=qW(e),this.strides=fH(e),this.dataId=null!=r?r:{},this.id=RH().nextTensorId(),this.rankType=this.rank<5?this.rank.toString():"higher",RH().registerTensor(this,i),null!=n&&RH().write(i,this.dataId,n)}return e.make=function(t,n,r,i){var o=n.values;return null!=n.values&&"string"===r&&lH(n.values[0])&&(o=n.values.map((function(e){return wH(e)}))),new e(t,r,o,n.dataId,i)},e.prototype.flatten=function(){return this.throwIfDisposed(),this.as1D()},e.prototype.asScalar=function(){return this.throwIfDisposed(),VW(1===this.size,(function(){return"The array must have only 1 element."})),this.reshape([])},e.prototype.as1D=function(){return this.throwIfDisposed(),this.reshape([this.size])},e.prototype.as2D=function(e,t){return this.throwIfDisposed(),this.reshape([e,t])},e.prototype.as3D=function(e,t,n){return this.throwIfDisposed(),this.reshape([e,t,n])},e.prototype.as4D=function(e,t,n,r){return this.throwIfDisposed(),this.reshape([e,t,n,r])},e.prototype.as5D=function(e,t,n,r,i){return this.throwIfDisposed(),this.reshape([e,t,n,r,i])},e.prototype.asType=function(e){return this.throwIfDisposed(),DH.cast(this,e)},Object.defineProperty(e.prototype,"rank",{get:function(){return this.shape.length},enumerable:!0,configurable:!0}),e.prototype.buffer=function(){return RW(this,void 0,void 0,(function(){var e;return DW(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,DH.buffer(this.shape,this.dtype,e)]}}))}))},e.prototype.bufferSync=function(){return DH.buffer(this.shape,this.dtype,this.dataSync())},e.prototype.array=function(){return RW(this,void 0,void 0,(function(){var e;return DW(this,(function(t){switch(t.label){case 0:return[4,this.data()];case 1:return e=t.sent(),[2,gH(this.shape,e)]}}))}))},e.prototype.arraySync=function(){return gH(this.shape,this.dataSync())},e.prototype.data=function(){return RW(this,void 0,void 0,(function(){var e,t;return DW(this,(function(n){switch(n.label){case 0:return this.throwIfDisposed(),e=RH().read(this.dataId),"string"!==this.dtype?[3,2]:[4,e];case 1:t=n.sent();try{return[2,t.map((function(e){return kH(e)}))]}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}n.label=2;case 2:return[2,e]}}))}))},e.prototype.dataSync=function(){this.throwIfDisposed();var e=RH().readSync(this.dataId);if("string"===this.dtype)try{return e.map((function(e){return kH(e)}))}catch(e){throw new Error("Failed to decode the string bytes into utf-8. To get the original bytes, call tensor.bytes().")}return e},e.prototype.bytes=function(){return RW(this,void 0,void 0,(function(){var e;return DW(this,(function(t){switch(t.label){case 0:return this.throwIfDisposed(),[4,RH().read(this.dataId)];case 1:return e=t.sent(),"string"===this.dtype?[2,e]:[2,new Uint8Array(e.buffer)]}}))}))},e.prototype.dispose=function(){this.isDisposed||(RH().disposeTensor(this),this.isDisposedInternal=!0)},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.isDisposedInternal},enumerable:!0,configurable:!0}),e.prototype.throwIfDisposed=function(){if(this.isDisposed)throw new Error("Tensor is disposed.")},e.prototype.toFloat=function(){return this.asType("float32")},e.prototype.toInt=function(){return this.asType("int32")},e.prototype.toBool=function(){return this.asType("bool")},e.prototype.print=function(e){return void 0===e&&(e=!1),DH.print(this,e)},e.prototype.reshape=function(e){return this.throwIfDisposed(),DH.reshape(this,e)},e.prototype.reshapeAs=function(e){return this.throwIfDisposed(),this.reshape(e.shape)},e.prototype.expandDims=function(e){return void 0===e&&(e=0),DH.expandDims(this,e)},e.prototype.cumsum=function(e,t,n){return void 0===e&&(e=0),void 0===t&&(t=!1),void 0===n&&(n=!1),DH.cumsum(this,e,t,n)},e.prototype.squeeze=function(e){return this.throwIfDisposed(),DH.squeeze(this,e)},e.prototype.clone=function(){return this.throwIfDisposed(),DH.clone(this)},e.prototype.oneHot=function(e,t,n){return this.throwIfDisposed(),DH.oneHot(this,e,t,n)},e.prototype.toString=function(e){return void 0===e&&(e=!1),function(e,t,n,r){var i=fH(t),o=function(e,t,n,r){var i=qW(t),o=r[r.length-1],a=new Array(o).fill(0),s=t.length,l="complex64"===n?TH(e):e;if(s>1)for(var u=0;u<i/o;u++)for(var c=u*o,d=0;d<o;d++)a[d]=Math.max(a[d],SH(l[c+d],0,n).length);return a}(e,t,n,i),a=t.length,s=function e(t,n,r,i,o,a){void 0===a&&(a=!0);var s="complex64"===r?2:1,l=n[0],u=n.length;if(0===u)return"complex64"===r?[SH(TH(t)[0],0,r)]:"bool"===r?[NH(t[0])]:[t[0].toString()];if(1===u){if(l>20){var c=3*s,d=Array.from(t.slice(0,c)),h=Array.from(t.slice(l-3*s,l));return"complex64"===r&&(d=TH(d),h=TH(h)),["["+d.map((function(e,t){return SH(e,o[t],r)})).join(", ")+", ..., "+h.map((function(e,t){return SH(e,o[l-3+t],r)})).join(", ")+"]"]}return["["+("complex64"===r?TH(t):Array.from(t)).map((function(e,t){return SH(e,o[t],r)})).join(", ")+"]"]}var p=n.slice(1),f=i.slice(1),m=i[0]*s,g=[];if(l>20){for(var v=0;v<3;v++){var y=(b=v*m)+m;g.push.apply(g,e(t.slice(b,y),p,r,f,o,!1))}for(g.push("..."),v=l-3;v<l;v++)y=(b=v*m)+m,g.push.apply(g,e(t.slice(b,y),p,r,f,o,v===l-1))}else for(v=0;v<l;v++){var b;y=(b=v*m)+m,g.push.apply(g,e(t.slice(b,y),p,r,f,o,v===l-1))}var x=2===u?",":"";for(g[0]="["+g[0]+x,v=1;v<g.length-1;v++)g[v]=" "+g[v]+x;var w=",\n";for(v=2;v<u;v++)w+="\n";return g[g.length-1]=" "+g[g.length-1]+"]"+(a?"":w),g}(e,t,n,i,o),l=["Tensor"];return r&&(l.push("  dtype: "+n),l.push("  rank: "+a),l.push("  shape: ["+t+"]"),l.push("  values:")),l.push(s.map((function(e){return"    "+e})).join("\n")),l.join("\n")}(this.dataSync(),this.shape,this.dtype,e)},e.prototype.tile=function(e){return this.throwIfDisposed(),DH.tile(this,e)},e.prototype.gather=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),DH.gather(this,e,t)},e.prototype.matMul=function(e,t,n){return void 0===t&&(t=!1),void 0===n&&(n=!1),this.throwIfDisposed(),DH.matMul(this,e,t,n)},e.prototype.dot=function(e){return this.throwIfDisposed(),DH.dot(this,e)},e.prototype.norm=function(e,t,n){return void 0===e&&(e="euclidean"),void 0===t&&(t=null),void 0===n&&(n=!1),this.throwIfDisposed(),DH.norm(this,e,t,n)},e.prototype.slice=function(e,t){return this.throwIfDisposed(),DH.slice(this,e,t)},e.prototype.reverse=function(e){return this.throwIfDisposed(),DH.reverse(this,e)},e.prototype.concat=function(t,n){return void 0===n&&(n=0),this.throwIfDisposed(),t instanceof e&&(t=[t]),DH.concat([this].concat(t),n)},e.prototype.split=function(e,t){return void 0===t&&(t=0),this.throwIfDisposed(),DH.split(this,e,t)},e.prototype.stack=function(e,t){return void 0===t&&(t=0),DH.stack([this,e],t)},e.prototype.unstack=function(e){return void 0===e&&(e=0),DH.unstack(this,e)},e.prototype.pad=function(e,t){return void 0===t&&(t=0),DH.pad(this,e,t)},e.prototype.batchNormalization=function(e,t,n,r,i){return void 0===n&&(n=.001),OH("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon"),this.batchNorm(e,t,i,r,n)},e.prototype.batchNorm=function(e,t,n,r,i){return void 0===i&&(i=.001),this.throwIfDisposed(),DH.batchNorm(this,e,t,n,r,i)},e.prototype.all=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),DH.all(this,e,t)},e.prototype.any=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),DH.any(this,e,t)},e.prototype.logSumExp=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),DH.logSumExp(this,e,t)},e.prototype.sum=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),DH.sum(this,e,t)},e.prototype.prod=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),DH.prod(this,e,t)},e.prototype.mean=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),DH.mean(this,e,t)},e.prototype.min=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),DH.min(this,e,t)},e.prototype.max=function(e,t){return void 0===e&&(e=null),void 0===t&&(t=!1),this.throwIfDisposed(),DH.max(this,e,t)},e.prototype.argMin=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),DH.argMin(this,e)},e.prototype.argMax=function(e){return void 0===e&&(e=null),this.throwIfDisposed(),DH.argMax(this,e)},e.prototype.cast=function(e){return this.throwIfDisposed(),DH.cast(this,e)},e.prototype.add=function(e){return this.throwIfDisposed(),DH.add(this,e)},e.prototype.addStrict=function(e){return this.throwIfDisposed(),DH.addStrict(this,e)},e.prototype.atan2=function(e){return this.throwIfDisposed(),DH.atan2(this,e)},e.prototype.sub=function(e){return this.throwIfDisposed(),DH.sub(this,e)},e.prototype.subStrict=function(e){return this.throwIfDisposed(),DH.subStrict(this,e)},e.prototype.pow=function(e){return this.throwIfDisposed(),DH.pow(this,e)},e.prototype.powStrict=function(e){return this.throwIfDisposed(),DH.powStrict(this,e)},e.prototype.mul=function(e){return this.throwIfDisposed(),DH.mul(this,e)},e.prototype.mulStrict=function(e){return this.throwIfDisposed(),DH.mulStrict(this,e)},e.prototype.div=function(e){return this.throwIfDisposed(),DH.div(this,e)},e.prototype.floorDiv=function(e){return this.throwIfDisposed(),DH.floorDiv(this,e)},e.prototype.divStrict=function(e){return this.throwIfDisposed(),DH.divStrict(this,e)},e.prototype.minimum=function(e){return this.throwIfDisposed(),DH.minimum(this,e)},e.prototype.minimumStrict=function(e){return this.throwIfDisposed(),DH.minimumStrict(this,e)},e.prototype.maximum=function(e){return this.throwIfDisposed(),DH.maximum(this,e)},e.prototype.maximumStrict=function(e){return this.throwIfDisposed(),DH.maximumStrict(this,e)},e.prototype.mod=function(e){return this.throwIfDisposed(),DH.mod(this,e)},e.prototype.modStrict=function(e){return this.throwIfDisposed(),DH.modStrict(this,e)},e.prototype.squaredDifference=function(e){return this.throwIfDisposed(),DH.squaredDifference(this,e)},e.prototype.squaredDifferenceStrict=function(e){return this.throwIfDisposed(),DH.squaredDifferenceStrict(this,e)},e.prototype.transpose=function(e){return this.throwIfDisposed(),DH.transpose(this,e)},e.prototype.notEqual=function(e){return this.throwIfDisposed(),DH.notEqual(this,e)},e.prototype.notEqualStrict=function(e){return this.throwIfDisposed(),DH.notEqualStrict(this,e)},e.prototype.less=function(e){return this.throwIfDisposed(),DH.less(this,e)},e.prototype.lessStrict=function(e){return this.throwIfDisposed(),DH.lessStrict(this,e)},e.prototype.equal=function(e){return this.throwIfDisposed(),DH.equal(this,e)},e.prototype.equalStrict=function(e){return this.throwIfDisposed(),DH.equalStrict(this,e)},e.prototype.lessEqual=function(e){return this.throwIfDisposed(),DH.lessEqual(this,e)},e.prototype.lessEqualStrict=function(e){return this.throwIfDisposed(),DH.lessEqualStrict(this,e)},e.prototype.greater=function(e){return this.throwIfDisposed(),DH.greater(this,e)},e.prototype.greaterStrict=function(e){return this.throwIfDisposed(),DH.greaterStrict(this,e)},e.prototype.greaterEqual=function(e){return this.throwIfDisposed(),DH.greaterEqual(this,e)},e.prototype.greaterEqualStrict=function(e){return this.throwIfDisposed(),DH.greaterEqualStrict(this,e)},e.prototype.logicalAnd=function(e){return this.throwIfDisposed(),DH.logicalAnd(this,e)},e.prototype.logicalOr=function(e){return this.throwIfDisposed(),DH.logicalOr(this,e)},e.prototype.logicalNot=function(){return this.throwIfDisposed(),DH.logicalNot(this)},e.prototype.logicalXor=function(e){return this.throwIfDisposed(),DH.logicalXor(this,e)},e.prototype.where=function(e,t){return this.throwIfDisposed(),DH.where(e,this,t)},e.prototype.neg=function(){return this.throwIfDisposed(),DH.neg(this)},e.prototype.ceil=function(){return this.throwIfDisposed(),DH.ceil(this)},e.prototype.floor=function(){return this.throwIfDisposed(),DH.floor(this)},e.prototype.sign=function(){return this.throwIfDisposed(),DH.sign(this)},e.prototype.isNaN=function(){return this.throwIfDisposed(),DH.isNaN(this)},e.prototype.isInf=function(){return this.throwIfDisposed(),DH.isInf(this)},e.prototype.isFinite=function(){return this.throwIfDisposed(),DH.isFinite(this)},e.prototype.exp=function(){return this.throwIfDisposed(),DH.exp(this)},e.prototype.expm1=function(){return this.throwIfDisposed(),DH.expm1(this)},e.prototype.log=function(){return this.throwIfDisposed(),DH.log(this)},e.prototype.log1p=function(){return this.throwIfDisposed(),DH.log1p(this)},e.prototype.sqrt=function(){return this.throwIfDisposed(),DH.sqrt(this)},e.prototype.rsqrt=function(){return this.throwIfDisposed(),DH.rsqrt(this)},e.prototype.square=function(){return this.throwIfDisposed(),DH.square(this)},e.prototype.reciprocal=function(){return this.throwIfDisposed(),DH.reciprocal(this)},e.prototype.abs=function(){return this.throwIfDisposed(),DH.abs(this)},e.prototype.clipByValue=function(e,t){return this.throwIfDisposed(),DH.clipByValue(this,e,t)},e.prototype.relu=function(){return this.throwIfDisposed(),DH.relu(this)},e.prototype.relu6=function(){return this.throwIfDisposed(),DH.relu6(this)},e.prototype.elu=function(){return this.throwIfDisposed(),DH.elu(this)},e.prototype.selu=function(){return this.throwIfDisposed(),DH.selu(this)},e.prototype.leakyRelu=function(e){return void 0===e&&(e=.2),this.throwIfDisposed(),DH.leakyRelu(this,e)},e.prototype.prelu=function(e){return this.throwIfDisposed(),DH.prelu(this,e)},e.prototype.sigmoid=function(){return this.throwIfDisposed(),DH.sigmoid(this)},e.prototype.logSigmoid=function(){return this.throwIfDisposed(),DH.logSigmoid(this)},e.prototype.softplus=function(){return this.throwIfDisposed(),DH.softplus(this)},e.prototype.zerosLike=function(){return this.throwIfDisposed(),DH.zerosLike(this)},e.prototype.onesLike=function(){return this.throwIfDisposed(),DH.onesLike(this)},e.prototype.sin=function(){return this.throwIfDisposed(),DH.sin(this)},e.prototype.cos=function(){return this.throwIfDisposed(),DH.cos(this)},e.prototype.tan=function(){return this.throwIfDisposed(),DH.tan(this)},e.prototype.asin=function(){return this.throwIfDisposed(),DH.asin(this)},e.prototype.acos=function(){return this.throwIfDisposed(),DH.acos(this)},e.prototype.atan=function(){return this.throwIfDisposed(),DH.atan(this)},e.prototype.sinh=function(){return this.throwIfDisposed(),DH.sinh(this)},e.prototype.cosh=function(){return this.throwIfDisposed(),DH.cosh(this)},e.prototype.tanh=function(){return this.throwIfDisposed(),DH.tanh(this)},e.prototype.asinh=function(){return this.throwIfDisposed(),DH.asinh(this)},e.prototype.acosh=function(){return this.throwIfDisposed(),DH.acosh(this)},e.prototype.atanh=function(){return this.throwIfDisposed(),DH.atanh(this)},e.prototype.erf=function(){return this.throwIfDisposed(),DH.erf(this)},e.prototype.round=function(){return this.throwIfDisposed(),DH.round(this)},e.prototype.step=function(e){return void 0===e&&(e=0),this.throwIfDisposed(),DH.step(this,e)},e.prototype.softmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),DH.softmax(this,e)},e.prototype.logSoftmax=function(e){return void 0===e&&(e=-1),this.throwIfDisposed(),DH.logSoftmax(this,e)},e.prototype.resizeBilinear=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),DH.image.resizeBilinear(this,e,t)},e.prototype.resizeNearestNeighbor=function(e,t){return void 0===t&&(t=!1),this.throwIfDisposed(),DH.image.resizeNearestNeighbor(this,e,t)},e.prototype.conv1d=function(e,t,n,r,i,o){return void 0===r&&(r="NWC"),void 0===i&&(i=1),this.throwIfDisposed(),DH.conv1d(this,e,t,n,r,i,o)},e.prototype.conv2d=function(e,t,n,r,i,o){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),DH.conv2d(this,e,t,n,r,i,o)},e.prototype.conv2dTranspose=function(e,t,n,r,i){return this.throwIfDisposed(),DH.conv2dTranspose(this,e,t,n,r,i)},e.prototype.depthwiseConv2D=function(e,t,n,r,i,o){return void 0===r&&(r="NHWC"),void 0===i&&(i=[1,1]),this.throwIfDisposed(),DH.depthwiseConv2d(this,e,t,n,r,i,o)},e.prototype.separableConv2d=function(e,t,n,r,i,o){return void 0===i&&(i=[1,1]),void 0===o&&(o="NHWC"),this.throwIfDisposed(),DH.separableConv2d(this,e,t,n,r,i,o)},e.prototype.avgPool=function(e,t,n,r){return this.throwIfDisposed(),DH.avgPool(this,e,t,n,r)},e.prototype.maxPool=function(e,t,n,r){return this.throwIfDisposed(),DH.maxPool(this,e,t,n,r)},e.prototype.localResponseNormalization=function(e,t,n,r){return void 0===e&&(e=5),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=.5),DH.localResponseNormalization(this,e,t,n,r)},e.prototype.pool=function(e,t,n,r,i){return this.throwIfDisposed(),DH.pool(this,e,t,n,r,i)},e.prototype.variable=function(e,t,n){return void 0===e&&(e=!0),this.throwIfDisposed(),LH.variable(this,e,t,n)},e.prototype.unsortedSegmentSum=function(e,t){return this.throwIfDisposed(),DH.unsortedSegmentSum(this,e,t)},e.prototype.batchToSpaceND=function(e,t){return this.throwIfDisposed(),DH.batchToSpaceND(this,e,t)},e.prototype.spaceToBatchND=function(e,t){return this.throwIfDisposed(),DH.spaceToBatchND(this,e,t)},e.prototype.topk=function(e,t){return void 0===e&&(e=1),void 0===t&&(t=!0),this.throwIfDisposed(),DH.topk(this,e,t)},e.prototype.stridedSlice=function(e,t,n,r,i,o,a,s){return void 0===r&&(r=0),void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),this.throwIfDisposed(),DH.stridedSlice(this,e,t,n,r,i,o,a,s)},e.prototype.depthToSpace=function(e,t){return this.throwIfDisposed(),DH.depthToSpace(this,e,t)},e.prototype.fft=function(){return this.throwIfDisposed(),DH.spectral.fft(this)},e.prototype.ifft=function(){return this.throwIfDisposed(),DH.spectral.ifft(this)},e.prototype.rfft=function(){return this.throwIfDisposed(),DH.spectral.rfft(this)},e.prototype.irfft=function(){return this.throwIfDisposed(),DH.spectral.irfft(this)},e}();Object.defineProperty(PH,Symbol.hasInstance,{value:function(e){return!!e&&null!=e.dataId&&null!=e.shape&&null!=e.dtype}});var LH=function(e){function t(t,n,r){void 0===n&&(n=!0);var i=e.call(this,t.shape,t.dtype,null,t.dataId)||this;i.trainable=n,i.name=r,null==i.name&&(i.name=RH().nextVariableId().toString());try{RH().registerVariable(i)}catch(e){throw RH().disposeTensor(i),e}return i}return AW(t,e),t.variable=function(e,n,r,i){return void 0===n&&(n=!0),null!=i&&i!==e.dtype&&(e=e.asType(i)),new t(e,n,r)},t.prototype.assign=function(e){if(e.dtype!==this.dtype)throw new Error("dtype of the new value ("+e.dtype+") and previous value ("+this.dtype+") must match");if(!WW(e.shape,this.shape))throw new Error("shape of the new value ("+e.shape+") and previous value ("+this.shape+") must match");RH().disposeTensor(this),this.dataId=e.dataId,RH().registerTensor(this)},t.prototype.dispose=function(){RH().disposeVariable(this),this.isDisposedInternal=!0},t}(PH);Object.defineProperty(LH,Symbol.hasInstance,{value:function(e){return e instanceof PH&&null!=e.assign&&e.assign instanceof Function}});var MH,FH,jH,BH,VH,zH=LH.variable;!function(e){e.R0="R0",e.R1="R1",e.R2="R2",e.R3="R3",e.R4="R4",e.R5="R5",e.R6="R6"}(MH||(MH={})),function(e){e.float32="float32",e.int32="int32",e.bool="int32",e.complex64="complex64"}(FH||(FH={})),function(e){e.float32="float32",e.int32="int32",e.bool="bool",e.complex64="complex64"}(jH||(jH={})),function(e){e.float32="float32",e.int32="float32",e.bool="float32",e.complex64="complex64"}(BH||(BH={})),function(e){e.float32="complex64",e.int32="complex64",e.bool="complex64",e.complex64="complex64"}(VH||(VH={}));var UH={float32:BH,int32:FH,bool:jH,complex64:VH};function $H(e,t){if("string"===e||"string"===t){if("string"===e&&"string"===t)return"string";throw new Error("Can not upcast "+e+" with "+t)}return UH[e][t]}function qH(e){return $H(e,"int32")}function WH(e,t){if(e.dtype===t.dtype)return[e,t];var n=$H(e.dtype,t.dtype);return[e.cast(n),t.cast(n)]}function HH(e,t){VW(e.dtype===t.dtype,(function(){return"The dtypes of the first("+e.dtype+") and second("+t.dtype+") input must match"}))}function GH(e){var t=[];return function e(t,n,r){if(null!=t)if(t instanceof PH)n.push(t);else if(i=t,Array.isArray(i)||"object"==typeof i){var i,o=t;for(var a in o){var s=o[a];r.has(s)||(r.add(s),e(s,n,r))}}}(e,t,new Set),t}var KH,YH=Object.freeze({makeTypesMatch:WH,assertTypesMatch:HH,isTensorInList:function(e,t){for(var n=0;n<t.length;n++)if(t[n].id===e.id)return!0;return!1},getTensorsInContainer:GH}),XH=function(){function e(){this.registeredVariables={},this.nextTapeNodeId=0,this.numBytes=0,this.numTensors=0,this.numStringTensors=0,this.numDataBuffers=0,this.gradientDepth=0,this.kernelDepth=0,this.scopeStack=[],this.nextScopeId=0,this.tensorInfo=new WeakMap,this.profiling=!1,this.activeProfile={newBytes:0,newTensors:0,peakBytes:0,kernels:[],result:null}}return e.prototype.dispose=function(){for(var e in this.registeredVariables)this.registeredVariables[e].dispose()},e}(),QH=function(){function e(e){this.ENV=e,this.registry={},this.registryFactory={},this.pendingBackendInitId=0,this.state=new XH}return e.prototype.ready=function(){return RW(this,void 0,void 0,(function(){var e,t,n;return DW(this,(function(r){switch(r.label){case 0:if(null!=this.pendingBackendInit)return[2,this.pendingBackendInit.then((function(){}))];if(null!=this.backendInstance)return[2];e=this.getSortedBackends(),t=0,r.label=1;case 1:return t<e.length?(n=e[t],[4,this.initializeBackend(n).success]):[3,5];case 2:return r.sent()?[4,this.setBackend(n)]:[3,4];case 3:return r.sent(),[2];case 4:return t++,[3,1];case 5:throw new Error("Could not initialize any backends, all backend initializations failed.")}}))}))},Object.defineProperty(e.prototype,"backend",{get:function(){if(null!=this.pendingBackendInit)throw new Error("Backend '"+this.backendName+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");if(null==this.backendInstance){var e=this.initializeBackendsAndReturnBest(),t=e.name;if(e.asyncInit)throw new Error("The highest priority backend '"+t+"' has not yet been initialized. Make sure to await tf.ready() before calling other methods");this.setBackend(t)}return this.backendInstance},enumerable:!0,configurable:!0}),e.prototype.backendNames=function(){return Object.keys(this.registryFactory)},e.prototype.findBackend=function(e){if(!(e in this.registry)){if(!(e in this.registryFactory))return null;if(this.initializeBackend(e).asyncInit)return null}return this.registry[e]},e.prototype.findBackendFactory=function(e){return e in this.registryFactory?this.registryFactory[e].factory:null},e.prototype.registerBackend=function(e,t,n){return void 0===n&&(n=1),e in this.registryFactory?(console.warn(e+" backend was already registered. Reusing existing backend factory."),!1):(this.registryFactory[e]={factory:t,priority:n},!0)},e.prototype.setBackend=function(e){return RW(this,void 0,void 0,(function(){var t,n,r;return DW(this,(function(i){switch(i.label){case 0:if(null==this.registryFactory[e])throw new Error("Backend name '"+e+"' not found in registry");return this.backendName=e,null!=this.registry[e]?[3,4]:(this.backendInstance=null,t=this.initializeBackend(e),n=t.success,t.asyncInit?[4,n]:[3,2]);case 1:return r=i.sent(),[3,3];case 2:r=n,i.label=3;case 3:if(!r)return[2,!1];i.label=4;case 4:return this.backendInstance=this.registry[e],this.profiler=new EH(this.backendInstance),[2,!0]}}))}))},e.prototype.initializeBackend=function(e){var t=this,n=this.registryFactory[e];if(null==n)throw new Error("Cannot initialize backend "+e+", no registration found.");try{var r=n.factory();if(Promise.resolve(r)===r){var i=++this.pendingBackendInitId,o=r.then((function(n){return!(i<t.pendingBackendInitId||(t.registry[e]=n,t.pendingBackendInit=null,0))})).catch((function(n){return!(i<t.pendingBackendInitId||(t.pendingBackendInit=null,console.warn("Initialization of backend "+e+" failed"),console.warn(n.stack||n.message),1))}));return this.pendingBackendInit=o,{success:o,asyncInit:!0}}return this.registry[e]=r,{success:!0,asyncInit:!1}}catch(t){return console.warn("Initialization of backend "+e+" failed"),console.warn(t.stack||t.message),{success:!1,asyncInit:!1}}},e.prototype.removeBackend=function(e){if(!(e in this.registryFactory))throw new Error(e+" backend not found in registry");this.backendName===e&&null!=this.pendingBackendInit&&this.pendingBackendInitId++,e in this.registry&&(this.registry[e].dispose(),delete this.registry[e]),delete this.registryFactory[e],this.backendName===e&&(this.pendingBackendInit=null,this.backendName=null,this.backendInstance=null)},e.prototype.getSortedBackends=function(){var e=this;if(0===Object.keys(this.registryFactory).length)throw new Error("No backend found in registry.");return Object.keys(this.registryFactory).sort((function(t,n){return e.registryFactory[n].priority-e.registryFactory[t].priority}))},e.prototype.initializeBackendsAndReturnBest=function(){for(var e=this.getSortedBackends(),t=0;t<e.length;t++){var n=e[t],r=this.initializeBackend(n),i=r.success,o=r.asyncInit;if(o||i)return{name:n,asyncInit:o}}throw new Error("Could not initialize any backends, all backend initializations failed.")},e.prototype.moveData=function(e,t){this.write(e,t,this.readSync(t))},e.prototype.tidy=function(e,t){var n,r=this,i=null;if(null==t){if("function"!=typeof e)throw new Error("Please provide a function to tidy()");t=e}else{if("string"!=typeof e&&!(e instanceof String))throw new Error("When calling with two arguments, the first argument to tidy() must be a string");if("function"!=typeof t)throw new Error("When calling with two arguments, the 2nd argument to tidy() must be a function");i=e}return this.scopedRun((function(){return r.startScope(i)}),(function(){return r.endScope(n)}),(function(){return(n=t())instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),n}))},e.prototype.scopedRun=function(e,t,n){e();try{var r=n();return t(),r}catch(e){throw t(),e}},e.prototype.nextTensorId=function(){return e.nextTensorId++},e.prototype.nextVariableId=function(){return e.nextVariableId++},e.prototype.clone=function(e){var t=PH.make(e.shape,{dataId:e.dataId},e.dtype);return this.addTapeNode([e],t,(function(e){return[e.toFloat()]})),t},e.prototype.runKernel=function(e,t,n){var r,i=this,o=[],a=this.isTapeOn(),s=null!=this.state.activeScope?this.state.activeScope.name:"",l=function(e){a&&(o=e.map((function(e){return i.keep(i.clone(e))})))},u=this.state.numBytes,c=this.state.numTensors;if(this.scopedRun((function(){return i.state.kernelDepth++}),(function(){return i.state.kernelDepth--}),(function(){r=i.ENV.getBool("DEBUG")?i.profiler.profileKernel(s,t,(function(){return e(i.backend,l)})):e(i.backend,l)})),a){var d={id:this.state.nextTapeNodeId++,name:s,inputs:t,outputs:Array.isArray(r)?r:[r],saved:o};null!=n&&(d.gradient=function(e){return n(e,o)}),this.state.activeTape.push(d)}return this.state.profiling&&this.state.activeProfile.kernels.push({name:s,bytesAdded:this.state.numBytes-u,totalBytesSnapshot:this.state.numBytes,tensorsAdded:this.state.numTensors-c,totalTensorsSnapshot:this.state.numTensors,inputShapes:Object.keys(t).map((function(e){return t[e].shape})),outputShape:Array.isArray(r)?r.map((function(e){return e.shape})):r.shape}),r},e.prototype.registerTensor=function(e,t){var n=this.state.tensorInfo.has(e.dataId)?this.state.tensorInfo.get(e.dataId).refCount:0;if(this.state.numTensors++,"string"===e.dtype&&this.state.numStringTensors++,0===n){this.state.numDataBuffers++;var r=0;"complex64"!==e.dtype&&"string"!==e.dtype&&(r=e.size*aH(e.dtype)),this.state.tensorInfo.set(e.dataId,{backend:null!=t?t:this.backend,dtype:e.dtype,shape:e.shape,bytes:r,refCount:0}),this.state.numBytes+=r,null!=t?t.register(e.dataId,e.shape,e.dtype):this.backend.register(e.dataId,e.shape,e.dtype)}this.state.tensorInfo.get(e.dataId).refCount++,e instanceof LH||this.track(e)},e.prototype.registerVariable=function(e){if(null!=this.state.registeredVariables[e.name])throw new Error("Variable with name "+e.name+" was already registered");this.state.registeredVariables[e.name]=e},e.prototype.disposeTensor=function(e){if(this.state.tensorInfo.has(e.dataId)){this.state.numTensors--,"string"===e.dtype&&this.state.numStringTensors--;var t=this.state.tensorInfo.get(e.dataId);t.refCount<=1?("complex64"!==e.dtype&&(this.state.numBytes-=t.bytes),this.state.numDataBuffers--,t.backend.disposeData(e.dataId),this.state.tensorInfo.delete(e.dataId)):this.state.tensorInfo.get(e.dataId).refCount--}},e.prototype.disposeVariables=function(){for(var e in this.state.registeredVariables){var t=this.state.registeredVariables[e];this.disposeVariable(t)}},e.prototype.disposeVariable=function(e){this.disposeTensor(e),null!=this.state.registeredVariables[e.name]&&delete this.state.registeredVariables[e.name]},e.prototype.memory=function(){var e=this.backend.memory();return e.numTensors=this.state.numTensors,e.numDataBuffers=this.state.numDataBuffers,e.numBytes=this.state.numBytes,this.state.numStringTensors>0&&(e.unreliable=!0,null==e.reasons&&(e.reasons=[]),e.reasons.push("Memory usage by string tensors is approximate (2 bytes per character)")),e},e.prototype.profile=function(e){return RW(this,void 0,void 0,(function(){var t,n;return DW(this,(function(r){return this.state.profiling=!0,t=this.state.numBytes,n=this.state.numTensors,this.state.activeProfile.kernels=[],this.state.activeProfile.result=e(),this.state.profiling=!1,this.state.activeProfile.peakBytes=Math.max.apply(Math,this.state.activeProfile.kernels.map((function(e){return e.totalBytesSnapshot}))),this.state.activeProfile.newBytes=this.state.numBytes-t,this.state.activeProfile.newTensors=this.state.numTensors-n,[2,this.state.activeProfile]}))}))},e.prototype.isTapeOn=function(){return this.state.gradientDepth>0&&0===this.state.kernelDepth},e.prototype.addTapeNode=function(e,t,n){var r={};e.forEach((function(e,t){r[t]=e}));var i={id:this.state.nextTapeNodeId++,name:this.state.activeScope.name,inputs:r,outputs:[t],gradient:function(e){var t=n(e),r={};return t.forEach((function(e,t){r[t]=function(){return e}})),r}};this.state.activeTape.push(i)},e.prototype.keep=function(e){return e.kept=!0,e},e.prototype.startTape=function(){0===this.state.gradientDepth&&(this.state.activeTape=[]),this.state.gradientDepth++},e.prototype.endTape=function(){this.state.gradientDepth--},e.prototype.startScope=function(e){var t={track:[],name:"unnamed scope",id:this.state.nextScopeId++};e&&(t.name=e),this.state.scopeStack.push(t),this.state.activeScope=t},e.prototype.endScope=function(e){for(var t=this,n=GH(e),r=new Set(n.map((function(e){return e.id}))),i=0;i<this.state.activeScope.track.length;i++){var o=this.state.activeScope.track[i];o.kept||r.has(o.id)||o.dispose()}var a=this.state.scopeStack.pop();this.state.activeScope=0===this.state.scopeStack.length?null:this.state.scopeStack[this.state.scopeStack.length-1],n.forEach((function(e){e.kept||e.scopeId!==a.id||t.track(e)}))},e.prototype.gradients=function(e,t,n,r){var i=this;if(void 0===r&&(r=!1),VW(t.length>0,(function(){return"gradients() received an empty list of xs."})),null!=n&&"float32"!==n.dtype)throw new Error("dy must have 'float32' dtype, but has '"+n.dtype+"'");var o=this.scopedRun((function(){return i.startTape()}),(function(){return i.endTape()}),(function(){return i.tidy("forward",e)}));VW(o instanceof PH,(function(){return"The result y returned by f() must be a tensor."}));var a=function(e,t,n){for(var r={},i={},o=0;o<t.length;o++)r[t[o].id]=!0;for(o=0;o<e.length;o++){var a=(f=e[o]).inputs;for(var s in a){for(var l=a[s],u=!1,c=0;c<t.length;c++)if(r[l.id]){f.outputs.forEach((function(e){return r[e.id]=!0})),u=!0,i[f.id]=!0;break}if(u)break}}var d={};d[n.id]=!0;var h={};for(o=e.length-1;o>=0;o--)for(a=(f=e[o]).inputs,c=0;c<f.outputs.length;c++)if(d[f.outputs[c].id]){for(var s in a)d[a[s].id]=!0,h[f.id]=!0;break}var p=[];for(o=0;o<e.length;o++){var f;if(i[(f=e[o]).id]&&h[f.id]){var m={};for(var s in f.inputs){var g=f.inputs[s];r[g.id]&&(m[s]=g)}var v=Object.assign({},f);v.inputs=m,v.outputs=f.outputs,p.push(v)}}return p}(this.state.activeTape,t,o);if(!r&&0===a.length&&t.length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that the f you passed encloses all operations that lead from x to y.");return this.tidy("backward",(function(){var e,r,s={};s[o.id]=null==n?(r=vH(qW(e=o.shape),"float32"),PH.make(e,{values:r})):n,function(e,t,n){for(var r=function(r){var i=t[r],o=[];if(i.outputs.forEach((function(t){var n=e[t.id];if(null!=n)o.push(n);else{var r=PH.make(t.shape,{values:yH(t.size,t.dtype)},t.dtype);o.push(r)}})),null==i.gradient)throw new Error("Cannot compute gradient: gradient function not found for "+i.name+".");var a=i.gradient(1===i.outputs.length?o[0]:o),s=function(t){if(!(t in a))throw new Error("Cannot backprop through input "+t+". Available gradients found: "+Object.keys(a)+".");var r=n((function(){return a[t]()}));if("float32"!==r.dtype)throw new Error("Error in gradient for op "+i.name+". The gradient of input "+t+" must have 'float32' dtype, but has '"+r.dtype+"'");var o=i.inputs[t];if(!WW(r.shape,o.shape))throw new Error("Error in gradient for op "+i.name+". The gradient of input '"+t+"' has shape '"+r.shape+"', which does not match the shape of the input '"+o.shape+"'");if(null==e[o.id])e[o.id]=r;else{var s=e[o.id];e[o.id]=s.add(r),s.dispose()}};for(var l in i.inputs)s(l)},i=t.length-1;i>=0;i--)r(i)}(s,a,(function(e){return i.tidy(e)}));var l=t.map((function(e){return s[e.id]}));return 0===i.state.gradientDepth&&(i.state.activeTape.forEach((function(e){for(var t in e.saved)e.saved[t].dispose()})),i.state.activeTape=null),{value:o,grads:l}}))},e.prototype.customGrad=function(e){var t=this;return VW(hH(e),(function(){return"The f passed in customGrad(f) must be a function."})),function(){for(var n,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];VW(r.every((function(e){return e instanceof PH})),(function(){return"The args passed in customGrad(f)(x1, x2,...) must all be tensors"}));var o={};return r.forEach((function(e,t){o[t]=e})),t.runKernel((function(t,i){return VW((n=e.apply(void 0,r.concat([i]))).value instanceof PH,(function(){return"The function f passed in customGrad(f) must return an object where `obj.value` is a tensor"})),VW(hH(n.gradFunc),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function."})),n.value}),o,(function(e,t){var i=n.gradFunc(e,t),o=Array.isArray(i)?i:[i];VW(o.length===r.length,(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns the same number of tensors as inputs passed to f(...)."})),VW(o.every((function(e){return e instanceof PH})),(function(){return"The function f passed in customGrad(f) must return an object where `obj.gradFunc` is a function that returns a list of only tensors."}));var a={};return o.forEach((function(e,t){a[t]=function(){return e}})),a}))}},e.prototype.write=function(e,t,n){var r=this.state.tensorInfo.get(t),i=r.backend;if(e=e||this.backend,"string"===r.dtype){var o=sH(n);this.state.numBytes+=o-r.bytes,r.bytes=o}e!==i&&(i.disposeData(t),r.backend=e,e.register(t,r.shape,r.dtype)),e.write(t,n)},e.prototype.readSync=function(e){return this.state.tensorInfo.get(e).backend.readSync(e)},e.prototype.read=function(e){return this.state.tensorInfo.get(e).backend.read(e)},e.prototype.fromPixels=function(e,t){return this.backend.fromPixels(e,t)},e.prototype.time=function(e){return RW(this,void 0,void 0,(function(){var t,n;return DW(this,(function(r){switch(r.label){case 0:return t=bH(),[4,this.backend.time(e)];case 1:return(n=r.sent()).wallMs=bH()-t,[2,n]}}))}))},e.prototype.track=function(e){return null!=this.state.activeScope&&(e.scopeId=this.state.activeScope.id,this.state.activeScope.track.push(e)),e},Object.defineProperty(e.prototype,"registeredVariables",{get:function(){return this.state.registeredVariables},enumerable:!0,configurable:!0}),e.prototype.reset=function(){for(var e in this.pendingBackendInitId++,this.state.dispose(),this.ENV.reset(),this.state=new XH,this.registry)this.registry[e].dispose(),delete this.registry[e];this.backendName=null,this.backendInstance=null,this.pendingBackendInit=null},e.nextTensorId=0,e.nextVariableId=0,e}(),JH=function(){var e=function(){if(null==KH){var e=void 0;if("undefined"!=typeof window)e=window;else if("undefined"!=typeof global)e=global;else if("undefined"!=typeof process)e=process;else{if("undefined"==typeof self)throw new Error("Could not find a global object");e=self}KH=e}return KH}();if(null==e._tfengine){var t=new OW(e);e._tfengine=new QH(t)}return function(e){LW=e}(e._tfengine.ENV),RH=function(){return e._tfengine},e._tfengine}();function ZH(){return"undefined"!=typeof window&&null!=window.document||"undefined"!=typeof WorkerGlobalScope}var eG=PW();eG.registerFlag("DEBUG",(function(){return!1}),(function(e){e&&console.warn("Debugging mode is ON. The output of every math call will be downloaded to CPU and checked for NaNs. This significantly impacts performance.")})),eG.registerFlag("IS_BROWSER",(function(){return ZH()})),eG.registerFlag("IS_NODE",(function(){return"undefined"!=typeof process&&void 0!==process.versions&&void 0!==process.versions.node})),eG.registerFlag("IS_CHROME",(function(){return"undefined"!=typeof navigator&&null!=navigator&&null!=navigator.userAgent&&/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)})),eG.registerFlag("PROD",(function(){return!1})),eG.registerFlag("TENSORLIKE_CHECK_SHAPE_CONSISTENCY",(function(){return eG.getBool("DEBUG")})),eG.registerFlag("DEPRECATION_WARNINGS_ENABLED",(function(){return!0})),eG.registerFlag("IS_TEST",(function(){return!1}));var tG,nG,rG={},iG={alpha:!1,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1,depth:!1,stencil:!1,failIfMajorPerformanceCaveat:!0};function oG(e,t){rG[e]=t}function aG(e){e in rG||(rG[e]=function(e){if(1!==e&&2!==e)throw new Error("Cannot get WebGL rendering context, WebGL is disabled.");var t=sG(e);return t.addEventListener("webglcontextlost",(function(t){t.preventDefault(),delete rG[e]}),!1),1===e?t.getContext("webgl",iG)||t.getContext("experimental-webgl",iG):t.getContext("webgl2",iG)}(e));var t=rG[e];return t.isContextLost()?(delete rG[e],aG(e)):(t.disable(t.DEPTH_TEST),t.disable(t.STENCIL_TEST),t.disable(t.BLEND),t.disable(t.DITHER),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SAMPLE_COVERAGE),t.enable(t.SCISSOR_TEST),t.enable(t.CULL_FACE),t.cullFace(t.BACK),rG[e])}function sG(e){if("undefined"!=typeof OffscreenCanvas&&2===e)return new OffscreenCanvas(300,150);if("undefined"!=typeof document)return document.createElement("canvas");throw new Error("Cannot create a canvas in this context")}function lG(e,t){return[t,e]}function uG(e){var t=qW(e);return KW(Math.ceil(t/4))}function cG(e,t){return[Math.max(1,Math.ceil(t/2)),Math.max(1,Math.ceil(e/2))]}function dG(e,t){var n,r,i,o,a,s,l,u,c,d=e;return 2===PW().getNumber("WEBGL_VERSION")?(n=d.R32F,r=d.R16F,i=d.RGBA16F,o=d.RGBA32F,a=d.RED,s=4,l=1,u=d.HALF_FLOAT,c=d.FLOAT):(n=e.RGBA,r=e.RGBA,i=e.RGBA,o=d.RGBA,a=e.RGBA,s=4,l=4,u=null!=t?t.HALF_FLOAT_OES:null,c=e.FLOAT),{internalFormatFloat:n,internalFormatHalfFloat:r,internalFormatPackedHalfFloat:i,internalFormatPackedFloat:o,textureFormatFloat:a,downloadTextureFormat:e.RGBA,downloadUnpackNumChannels:s,defaultNumChannels:l,textureTypeHalfFloat:u,textureTypeFloat:c}}function hG(e,t,n){var r=n();return t&&function(e){var t=e.getError();if(t!==e.NO_ERROR)throw new Error("WebGL Error: "+fG(e,t))}(e),r}function pG(e){return!!(PW().getBool("WEBGL_RENDER_FLOAT32_ENABLED")||0===e||5.96e-8<Math.abs(e)&&Math.abs(e)<65504)}function fG(e,t){switch(t){case e.NO_ERROR:return"NO_ERROR";case e.INVALID_ENUM:return"INVALID_ENUM";case e.INVALID_VALUE:return"INVALID_VALUE";case e.INVALID_OPERATION:return"INVALID_OPERATION";case e.INVALID_FRAMEBUFFER_OPERATION:return"INVALID_FRAMEBUFFER_OPERATION";case e.OUT_OF_MEMORY:return"OUT_OF_MEMORY";case e.CONTEXT_LOST_WEBGL:return"CONTEXT_LOST_WEBGL";default:return"Unknown error code "+t}}function mG(e,t,n){return jG(e,t,(function(){return e.getExtension(n)}),'Extension "'+n+'" not supported on this browser.')}function gG(e,t,n){var r=jG(e,t,(function(){return e.createShader(e.VERTEX_SHADER)}),"Unable to create vertex WebGLShader.");if(hG(e,t,(function(){return e.shaderSource(r,n)})),hG(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw console.log(e.getShaderInfoLog(r)),new Error("Failed to compile vertex shader.");return r}function vG(e,t,n){var r=jG(e,t,(function(){return e.createShader(e.FRAGMENT_SHADER)}),"Unable to create fragment WebGLShader.");if(hG(e,t,(function(){return e.shaderSource(r,n)})),hG(e,t,(function(){return e.compileShader(r)})),!1===e.getShaderParameter(r,e.COMPILE_STATUS))throw function(e,t){var n=xG.exec(t);if(null==n)return console.log("Couldn't parse line number in error: "+t),void console.log(e);for(var r=+n[1],i=e.split("\n"),o=i.length.toString().length+2,a=i.map((function(e,t){return YW((t+1).toString(),o)+e})),s=0,l=0;l<a.length;l++)s=Math.max(a[l].length,s);var u=a.slice(0,r-1),c=a.slice(r-1,r),d=a.slice(r);console.log(u.join("\n")),console.log(t.split("\n")[0]),console.log("%c "+YW(c[0],s),"border:1px solid red; background-color:#e3d2d2; color:#a61717"),console.log(d.join("\n"))}(n,e.getShaderInfoLog(r)),new Error("Failed to compile fragment shader.");return r}!function(e){e[e.RENDER=0]="RENDER",e[e.UPLOAD=1]="UPLOAD",e[e.PIXELS=2]="PIXELS",e[e.DOWNLOAD=3]="DOWNLOAD"}(tG||(tG={})),function(e){e[e.UNPACKED_FLOAT16=0]="UNPACKED_FLOAT16",e[e.UNPACKED_FLOAT32=1]="UNPACKED_FLOAT32",e[e.PACKED_4X1_UNSIGNED_BYTE=2]="PACKED_4X1_UNSIGNED_BYTE",e[e.PACKED_2X2_FLOAT32=3]="PACKED_2X2_FLOAT32",e[e.PACKED_2X2_FLOAT16=4]="PACKED_2X2_FLOAT16"}(nG||(nG={}));var yG,bG,xG=/ERROR: [0-9]+:([0-9]+):/g;function wG(e,t){return jG(e,t,(function(){return e.createProgram()}),"Unable to create WebGLProgram.")}function kG(e,t,n){if(hG(e,t,(function(){return e.linkProgram(n)})),!1===e.getProgramParameter(n,e.LINK_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Failed to link vertex and fragment shaders.")}function _G(e,t,n){if(hG(e,t,(function(){return e.validateProgram(n)})),!1===e.getProgramParameter(n,e.VALIDATE_STATUS))throw console.log(e.getProgramInfoLog(n)),new Error("Shader program validation failed.")}function EG(e,t,n){var r=jG(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return hG(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),hG(e,t,(function(){return e.bufferData(e.ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function CG(e,t,n){var r=jG(e,t,(function(){return e.createBuffer()}),"Unable to create WebGLBuffer");return hG(e,t,(function(){return e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,r)})),hG(e,t,(function(){return e.bufferData(e.ELEMENT_ARRAY_BUFFER,n,e.STATIC_DRAW)})),r}function IG(e,t){return jG(e,t,(function(){return e.createTexture()}),"Unable to create WebGLTexture.")}function SG(e,t){var n=PW().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(e<=0||t<=0){var r="["+e+"x"+t+"]";throw new Error("Requested texture size "+r+" is invalid.")}if(e>n||t>n)throw r="["+e+"x"+t+"]",new Error("Requested texture size "+r+" greater than WebGL maximum on this browser / GPU ["+n+"x"+n+"].")}function NG(e,t){return jG(e,t,(function(){return e.createFramebuffer()}),"Unable to create WebGLFramebuffer.")}function TG(e,t,n,r,i,o,a,s){var l=e.getAttribLocation(n,r);return-1!==l&&(hG(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,i)})),hG(e,t,(function(){return e.vertexAttribPointer(l,o,e.FLOAT,!1,a,s)})),hG(e,t,(function(){return e.enableVertexAttribArray(l)})),!0)}function AG(e,t,n,r){BG(e,r),hG(e,t,(function(){return e.activeTexture(e.TEXTURE0+r)})),hG(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)}))}function RG(e,t,n,r){return jG(e,t,(function(){return e.getUniformLocation(n,r)}),'uniform "'+r+'" not present in program.')}function DG(e,t,n){return e.getUniformLocation(t,n)}function OG(e,t,n,r,i,o){hG(e,t,(function(){return AG(e,t,r,o)})),hG(e,t,(function(){return e.uniform1i(i,o)}))}function PG(e,t,n,r){hG(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,r)})),hG(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0)}))}function LG(e,t,n){hG(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,n)})),hG(e,t,(function(){return e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,null,0)}))}function MG(e){var t=e.checkFramebufferStatus(e.FRAMEBUFFER);if(t!==e.FRAMEBUFFER_COMPLETE)throw new Error("Error binding framebuffer: "+FG(e,t))}function FG(e,t){switch(t){case e.FRAMEBUFFER_INCOMPLETE_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:return"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT";case e.FRAMEBUFFER_INCOMPLETE_DIMENSIONS:return"FRAMEBUFFER_INCOMPLETE_DIMENSIONS";case e.FRAMEBUFFER_UNSUPPORTED:return"FRAMEBUFFER_UNSUPPORTED";default:return"unknown error "+t}}function jG(e,t,n,r){var i=hG(e,t,(function(){return n()}));if(null==i)throw new Error(r);return i}function BG(e,t){var n=e.MAX_COMBINED_TEXTURE_IMAGE_UNITS-1,r=t+e.TEXTURE0;if(r<e.TEXTURE0||r>n)throw new Error("textureUnit must be in [gl.TEXTURE0, gl.TEXTURE"+n+"].")}function VG(e,t){return void 0===t&&(t=2),qW(e.slice(0,e.length-t))}function zG(e){if(0===e.length)throw Error("Cannot get rows and columns of an empty shape array.");return[e.length>1?e[e.length-2]:1,e[e.length-1]]}function UG(e){var t=[1,1,1];return 0===e.length||1===e.length&&1===e[0]||(t=[VG(e)].concat(zG(e))),t}function $G(e,t){var n;void 0===t&&(t=!1);var r=PW().getNumber("WEBGL_MAX_TEXTURE_SIZE");if(t&&(r*=2,1===(e=e.map((function(t,n){return n>=e.length-2?jW(e[n]):e[n]}))).length&&(e=[2,e[0]])),2!==e.length){var i=ZW(e);e=i.newShape}var o=qW(e);if(e.length<=1&&o<=r)return[1,o];if(2===e.length&&e[0]<=r&&e[1]<=r)return e;if(3===e.length&&e[0]*e[1]<=r&&e[2]<=r)return[e[0]*e[1],e[2]];if(3===e.length&&e[0]<=r&&e[1]*e[2]<=r)return[e[0],e[1]*e[2]];if(4===e.length&&e[0]*e[1]*e[2]<=r&&e[3]<=r)return[e[0]*e[1]*e[2],e[3]];if(4===e.length&&e[0]<=r&&e[1]*e[2]*e[3]<=r)return[e[0],e[1]*e[2]*e[3]];if(t){var a=VG(e),s=2,l=2;return e.length&&(s=(n=zG(e))[0],l=n[1]),KW(o=a*(s/2)*(l/2)).map((function(e){return 2*e}))}return KW(o)}function qG(e){return e%2==0}function WG(e,t){if(WW(e=e.slice(-2),t=t.slice(-2)))return!0;if(!e.length||!t.length)return!0;if(0===e[0]||0===e[1]||0===t[0]||0===t[1])return!0;if(e.length!==t.length){var n=e.slice(-1)[0],r=t.slice(-1)[0];if(n===r)return!0;if(qG(n)&&qG(r)&&(1===e[0]||1===t[0]))return!0}return e[1]===t[1]&&qG(e[0])&&qG(t[0])}function HG(e){if(null==yG){var t=aG(e);yG=t.getParameter(t.MAX_TEXTURE_SIZE)}return yG}function GG(e){if(null==bG){var t=aG(e);bG=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS)}return Math.min(16,bG)}function KG(e){if(0===e)return 0;var t=aG(e);return YG(t,"EXT_disjoint_timer_query_webgl2")&&2===e?2:YG(t,"EXT_disjoint_timer_query")?1:0}function YG(e,t){return null!=e.getExtension(t)}function XG(e){try{if(null!=aG(e))return!0}catch(e){return!1}return!1}function QG(e){if(0===e)return!1;var t=aG(e);if(1===e){if(!YG(t,"OES_texture_float"))return!1}else if(!YG(t,"EXT_color_buffer_float"))return!1;return ZG(t)}function JG(e){if(0===e)return!1;var t=aG(e);if(1!==e){if(YG(t,"EXT_color_buffer_float"))return ZG(t);if(YG(t,"EXT_color_buffer_half_float")){var n=t.getExtension("EXT_color_buffer_half_float");return function(e,t){var n=dG(e,t),r=e.createTexture();e.bindTexture(e.TEXTURE_2D,r),e.texImage2D(e.TEXTURE_2D,0,n.internalFormatHalfFloat,1,1,0,n.textureFormatFloat,n.textureTypeHalfFloat,null);var i=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,i),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,r,0);var o=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(r),e.deleteFramebuffer(i),o}(t,n)}return!1}return!!YG(t,"OES_texture_float")&&!!YG(t,"WEBGL_color_buffer_float")&&ZG(t)}function ZG(e){var t=dG(e),n=e.createTexture();e.bindTexture(e.TEXTURE_2D,n),e.texImage2D(e.TEXTURE_2D,0,t.internalFormatFloat,1,1,0,t.textureFormatFloat,t.textureTypeFloat,null);var r=e.createFramebuffer();e.bindFramebuffer(e.FRAMEBUFFER,r),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,n,0);var i=e.checkFramebufferStatus(e.FRAMEBUFFER)===e.FRAMEBUFFER_COMPLETE;return e.bindTexture(e.TEXTURE_2D,null),e.bindFramebuffer(e.FRAMEBUFFER,null),e.deleteTexture(n),e.deleteFramebuffer(r),i}function eK(e){return 2===e&&null!=aG(e).fenceSync}var tK=Object.freeze({callAndCheck:hG,canBeRepresented:pG,getWebGLErrorMessage:fG,getExtensionOrThrow:mG,createVertexShader:gG,createFragmentShader:vG,createProgram:wG,linkProgram:kG,validateProgram:_G,createStaticVertexBuffer:EG,createStaticIndexBuffer:CG,getNumChannels:function(){return 2===PW().getNumber("WEBGL_VERSION")?1:4},createTexture:IG,validateTextureSize:SG,createFramebuffer:NG,bindVertexBufferToProgramAttribute:TG,bindTextureUnit:AG,unbindTextureUnit:function(e,t,n){BG(e,n),hG(e,t,(function(){return e.activeTexture(e.TEXTURE0+n)})),hG(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))},getProgramUniformLocationOrThrow:RG,getProgramUniformLocation:DG,bindTextureToProgramUniformSampler:OG,bindCanvasToFramebuffer:function(e,t){hG(e,t,(function(){return e.bindFramebuffer(e.FRAMEBUFFER,null)})),hG(e,t,(function(){return e.viewport(0,0,e.canvas.width,e.canvas.height)})),hG(e,t,(function(){return e.scissor(0,0,e.canvas.width,e.canvas.height)}))},bindColorTextureToFramebuffer:PG,unbindColorTextureFromFramebuffer:LG,validateFramebuffer:MG,getFramebufferErrorMessage:FG,getBatchDim:VG,getRowsCols:zG,getShapeAs3D:UG,getTextureShapeFromLogicalShape:$G,isReshapeFree:WG,getWebGLMaxTextureSize:HG,resetMaxTextureSize:function(){yG=null},resetMaxTexturesInShader:function(){bG=null},getMaxTexturesInShader:GG,getWebGLDisjointQueryTimerVersion:KG,hasExtension:YG,isWebGLVersionEnabled:XG,isCapableOfRenderingToFloatTexture:QG,isDownloadFloatTextureEnabled:JG,isWebGLFenceEnabled:eK}),nK=PW();function rK(e){PW().getBool("DEPRECATION_WARNINGS_ENABLED")&&console.warn(e+" You can disable deprecation warnings with tf.disableDeprecationWarnings().")}function iK(e,t){return JH.tidy(e,t)}function oK(e){GH(e).forEach((function(e){return e.dispose()}))}function aK(e){return JH.keep(e)}function sK(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];PW().getBool("IS_TEST")||console.warn.apply(console,e)}function lK(e,t){var n=e;if(oH(e))return"string"===t?[]:[e.length];if(!Array.isArray(e))return[];for(var r=[];Array.isArray(n)||oH(n)&&"string"!==t;)r.push(n.length),n=n[0];return Array.isArray(e)&&PW().getBool("TENSORLIKE_CHECK_SHAPE_CONSISTENCY")&&function e(t,n,r){if(r=r||[],Array.isArray(t)||oH(t)){VW(n.length>0,(function(){return"Element arr["+r.join("][")+"] should be a primitive, but is an array of "+t.length+" elements"})),VW(t.length===n[0],(function(){return"Element arr["+r.join("][")+"] should have "+n[0]+" elements, but has "+t.length+" elements"}));for(var i=n.slice(1),o=0;o<t.length;++o)e(t[o],i,r.concat(o))}else VW(0===n.length,(function(){return"Element arr["+r.join("][")+"] is a primitive, but should be an array/TypedArray of "+n[0]+" elements"}))}(e,r,[]),r}function uK(e,t,n,r){if(null!=e&&("numeric"!==e&&e!==t||"numeric"===e&&"string"===t))throw new Error("Argument '"+n+"' passed to '"+r+"' must be "+e+" tensor, but got "+t+" tensor")}function cK(e,t,n,r){if(void 0===r&&(r="numeric"),e instanceof PH)return uK(r,e.dtype,t,n),e;var i=dH(e);if("string"!==i&&["bool","int32","float32"].indexOf(r)>=0&&(i=r),uK(r,i,t,n),null==e||!oH(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e){var o=null==e?"null":e.constructor.name;throw new Error("Argument '"+t+"' passed to '"+n+"' must be a Tensor or TensorLike, but got '"+o+"'")}var a=lK(e,i);oH(e)||Array.isArray(e)||(e=[e]);var s="string"!==i?mH(e,i,PW().getBool("DEBUG")):$W(e,[],!0);return PH.make(a,{values:s},i)}function dK(e,t,n,r){if(void 0===r&&(r="numeric"),!Array.isArray(e))throw new Error("Argument "+t+" passed to "+n+" must be a `Tensor[]` or `TensorLike[]`");return e.map((function(e,r){return cK(e,t+"["+r+"]",n)}),r)}function hK(e,t){for(var n=0;n<e.length;++n)if(e[e.length-n-1]!==t-1-n)return!1;return!0}function pK(e,t,n){for(var r=e.length+t.length,i=[],o=0,a=0,s=0;s<r;s++)-1===n.indexOf(s)?i.push(e[o++]):i.push(t[a++]);return i}function fK(e,t){for(var n=[],r=e.length,i=0;i<r;i++)-1===t.indexOf(i)&&n.push(e[i]);return[n,t.map((function(t){return e[t]}))]}function mK(e,t){return pK(e,t.map((function(e){return 1})),t)}function gK(e,t,n){VW(hK(t,n),(function(){return e+" supports only inner-most axes for now. Got axes "+t+" and rank-"+n+" input."}))}function vK(e,t){if(hK(e,t))return null;for(var n=[],r=0;r<t;++r)-1===e.indexOf(r)&&n.push(r);return e.forEach((function(e){return n.push(e)})),n}function yK(e){return e.map((function(e,t){return[t,e]})).sort((function(e,t){return e[1]-t[1]})).map((function(e){return e[0]}))}function bK(e,t){for(var n=[],r=t-e;r<t;++r)n.push(r);return n}function xK(e,t){var n=e[0].length;e.forEach((function(e,t){VW(e.length===n,(function(){return"Error in concat"+n+"D: rank of tensors["+t+"] must be the same as the rank of the rest ("+n+")"}))})),VW(t>=0&&t<n,(function(){return"Error in concat"+n+"D: axis must be between 0 and "+(n-1)+"."}));var r=e[0];e.forEach((function(e,i){for(var o=0;o<n;o++)VW(o===t||e[o]===r[o],(function(){return"Error in concat"+n+"D: Shape of tensors["+i+"] ("+e+") does not match the shape of the rest ("+r+") along the non-concatenated axis "+i+"."}))}))}function wK(e,t){for(var n=e[0].slice(),r=1;r<e.length;r++)n[t]+=e[r][t];return n}function kK(e){var t=Object.keys(e);if(1!==t.length)throw new Error("Please provide an object with a single key (operation name) mapping to a function. Got an object with "+t.length+" keys.");var n=t[0],r=e[n];n.endsWith("_")&&(n=n.substring(0,n.length-1));var i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];JH.startScope(n);try{var i=r.apply(void 0,e);return i instanceof Promise&&console.error("Cannot return a Promise inside of tidy."),JH.endScope(i),i}catch(e){throw JH.endScope(null),e}};return Object.defineProperty(i,"name",{value:n,configurable:!0}),i}nK.registerFlag("HAS_WEBGL",(function(){return nK.getNumber("WEBGL_VERSION")>0})),nK.registerFlag("WEBGL_VERSION",(function(){return XG(2)?2:XG(1)?1:0})),nK.registerFlag("WEBGL_BUFFER_SUPPORTED",(function(){return 2===nK.get("WEBGL_VERSION")})),nK.registerFlag("WEBGL_CPU_FORWARD",(function(){return!0})),nK.registerFlag("WEBGL_FORCE_F16_TEXTURES",(function(){return!1})),nK.registerFlag("WEBGL_PACK",(function(){return nK.getBool("HAS_WEBGL")})),nK.registerFlag("WEBGL_PACK_NORMALIZATION",(function(){return nK.getBool("WEBGL_PACK")})),nK.registerFlag("WEBGL_PACK_CLIP",(function(){return nK.getBool("WEBGL_PACK")})),nK.registerFlag("WEBGL_PACK_DEPTHWISECONV",(function(){return!1})),nK.registerFlag("WEBGL_PACK_BINARY_OPERATIONS",(function(){return nK.getBool("WEBGL_PACK")})),nK.registerFlag("WEBGL_PACK_UNARY_OPERATIONS",(function(){return nK.getBool("WEBGL_PACK")})),nK.registerFlag("WEBGL_PACK_ARRAY_OPERATIONS",(function(){return nK.getBool("WEBGL_PACK")})),nK.registerFlag("WEBGL_PACK_IMAGE_OPERATIONS",(function(){return nK.getBool("WEBGL_PACK")})),nK.registerFlag("WEBGL_PACK_REDUCE",(function(){return nK.getBool("WEBGL_PACK")})),nK.registerFlag("WEBGL_LAZILY_UNPACK",(function(){return nK.getBool("WEBGL_PACK")})),nK.registerFlag("WEBGL_CONV_IM2COL",(function(){return nK.getBool("WEBGL_PACK")})),nK.registerFlag("WEBGL_MAX_TEXTURE_SIZE",(function(){return HG(nK.getNumber("WEBGL_VERSION"))})),nK.registerFlag("WEBGL_MAX_TEXTURES_IN_SHADER",(function(){return GG(nK.getNumber("WEBGL_VERSION"))})),nK.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION",(function(){var e=nK.getNumber("WEBGL_VERSION");return 0===e?0:KG(e)})),nK.registerFlag("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_RELIABLE",(function(){return nK.getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0&&(e=navigator.userAgent||navigator.vendor||window.opera,!(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4))));var e})),nK.registerFlag("WEBGL_RENDER_FLOAT32_CAPABLE",(function(){return QG(nK.getNumber("WEBGL_VERSION"))})),nK.registerFlag("WEBGL_RENDER_FLOAT32_ENABLED",(function(){return!nK.getBool("WEBGL_FORCE_F16_TEXTURES")&&nK.getBool("WEBGL_RENDER_FLOAT32_CAPABLE")})),nK.registerFlag("WEBGL_DOWNLOAD_FLOAT_ENABLED",(function(){return JG(nK.getNumber("WEBGL_VERSION"))})),nK.registerFlag("WEBGL_FENCE_API_ENABLED",(function(){return eK(nK.getNumber("WEBGL_VERSION"))})),nK.registerFlag("WEBGL_SIZE_UPLOAD_UNIFORM",(function(){return nK.getBool("WEBGL_RENDER_FLOAT32_ENABLED")?4:0})),OH=rK;var _K=kK({complex_:function(e,t){var n=cK(e,"real","complex"),r=cK(t,"imag","complex");return zW(n.shape,r.shape,"real and imag shapes, "+n.shape+" and "+r.shape+", must match in call to tf.complex()."),JH.runKernel((function(e){return e.complex(n,r)}),{$real:n,$imag:r})}}),EK=kK({real_:function(e){var t=cK(e,"input","real");return JH.runKernel((function(e){return e.real(t)}),{$input:t})}}),CK=kK({imag_:function(e){var t=cK(e,"input","imag");return JH.runKernel((function(e){return e.imag(t)}),{$input:t})}});function IK(e,t,n){return SK(e,t,lK(e,n),n)}function SK(e,t,n,r){if(null==r&&(r=dH(e)),"complex64"===r)throw new Error("Cannot construct a complex64 tensor directly. Please use tf.complex(real, imag).");if(!oH(e)&&!Array.isArray(e)&&"number"!=typeof e&&"boolean"!=typeof e&&"string"!=typeof e)throw new Error("values passed to tensor(values) must be a number/boolean/string or an array of numbers/booleans/strings, or a TypedArray");if(null!=t){xH(t);var i=qW(t),o=qW(n);VW(i===o,(function(){return"Based on the provided shape, ["+t+"], the tensor should have "+i+" values but has "+o}));for(var a=0;a<n.length;++a){var s=n[a],l=a!==n.length-1||s!==qW(t.slice(a));VW(n[a]===t[a]||!l,(function(){return"Error creating a new Tensor. Inferred shape ("+n+") does not match the provided shape ("+t+"). "}))}}return oH(e)||Array.isArray(e)||(e=[e]),t=t||n,e="string"!==r?mH(e,r,PW().getBool("DEBUG")):$W(e,[],!0),PH.make(t,{values:e},r)}function NK(e,t){if((oH(e)&&"string"!==t||Array.isArray(e))&&"complex64"!==t)throw new Error("Error creating a new Scalar: value must be a primitive (number|boolean|string)");if("string"===t&&oH(e)&&!(e instanceof Uint8Array))throw new Error("When making a scalar from encoded string, the value must be `Uint8Array`.");return SK(e,[],[],t)}function TK(e,t){UW(e);var n=lK(e,t);if(1!==n.length)throw new Error("tensor1d() requires values to be a flat/TypedArray");return SK(e,null,n,t)}function AK(e,t,n){if(UW(e),null!=t&&2!==t.length)throw new Error("tensor2d() requires shape to have two numbers");var r=lK(e,n);if(2!==r.length&&1!==r.length)throw new Error("tensor2d() requires values to be number[][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor2d() requires shape to be provided when `values` are a flat/TypedArray");return SK(e,t,r,n)}function RK(e,t,n){if(UW(e),null!=t&&3!==t.length)throw new Error("tensor3d() requires shape to have three numbers");var r=lK(e,n);if(3!==r.length&&1!==r.length)throw new Error("tensor3d() requires values to be number[][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor3d() requires shape to be provided when `values` are a flat array");return SK(e,t,r,n)}function DK(e,t,n){if(UW(e),null!=t&&4!==t.length)throw new Error("tensor4d() requires shape to have four numbers");var r=lK(e,n);if(4!==r.length&&1!==r.length)throw new Error("tensor4d() requires values to be number[][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor4d() requires shape to be provided when `values` are a flat array");return SK(e,t,r,n)}function OK(e,t,n){if(UW(e),null!=t&&5!==t.length)throw new Error("tensor5d() requires shape to have five numbers");var r=lK(e,n);if(5!==r.length&&1!==r.length)throw new Error("tensor5d() requires values to be number[][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor5d() requires shape to be provided when `values` are a flat array");return SK(e,t,r,n)}function PK(e,t,n){if(UW(e),null!=t&&6!==t.length)throw new Error("tensor6d() requires shape to have six numbers");var r=lK(e,n);if(6!==r.length&&1!==r.length)throw new Error("tensor6d() requires values to be number[][][][][][] or flat/TypedArray");if(1===r.length&&null==t)throw new Error("tensor6d() requires shape to be provided when `values` are a flat array");return SK(e,t=t||r,r,n)}function LK(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=LK(e,"float32"),r=MK(e,"float32");return _K(n,r)}var i=vH(qW(e),t);return PH.make(e,{values:i},t)}function MK(e,t){if(void 0===t&&(t="float32"),"complex64"===t){var n=MK(e,"float32"),r=MK(e,"float32");return _K(n,r)}var i=yH(qW(e),t);return PH.make(e,{values:i},t)}function FK(e,t,n){return JH.runKernel((function(r){return r.fill(e,t,n)}),{})}function jK(e,t,n){if(n<=0)throw new Error("The number of values should be positive.");return JH.runKernel((function(r){return r.linspace(e,t,n)}),{})}function BK(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r="float32"),0===n)throw new Error("Cannot have a step of zero");if(e===t||e<t&&n<0||t<e&&n>1)return MK([0],r);var i=yH(Math.abs(Math.ceil((t-e)/n)),r);t<e&&1===n&&(n=-1),i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+n;return TK(i,r)}var VK=kK({onesLike_:function(e){var t=cK(e,"x","onesLike");if("complex64"===t.dtype){var n=VK(EK(t)),r=zK(CK(t));return _K(n,r)}return JH.runKernel((function(e){return e.onesLike(t)}),{$x:t},(function(e,t){return{$x:function(){return zK(e)}}}))}}),zK=kK({zerosLike_:function(e){var t=cK(e,"x","zerosLike");return JH.runKernel((function(e){return e.zerosLike(t)}),{$x:t},(function(e,t){return{$x:function(){return zK(e)}}}))}}),UK=kK({concat_:function(e,t){void 0===t&&(t=0),VW(e.length>=1,(function(){return"Pass at least one tensor to concat"}));var n=dK(e,"tensors","concat");"complex64"===n[0].dtype&&n.forEach((function(e){if("complex64"!==e.dtype)throw new Error("Cannot concatenate complex64 tensors with a tensor\n          with dtype "+e.dtype+". ")})),t=JW(t,n[0].shape)[0];var r=wK(n.map((function(e){return e.shape})),t);if(0===qW(r))return IK([],r);if(1===(n=n.filter((function(e){return e.size>0}))).length)return n[0];var i=n.map((function(e){return e.shape}));xK(i,t);var o=n;return JH.runKernel((function(e){return e.concat(n,t)}),o,(function(e){var n=i.map((function(e){return e[t]}));return GK(e,n,t).map((function(e){return function(){return e}}))}))}}),$K=kK({concat1d_:function(e){return UK(e,0)}}),qK=kK({concat2d_:function(e,t){return UK(e,t)}}),WK=kK({concat3d_:function(e,t){return UK(e,t)}}),HK=kK({concat4d_:function(e,t){return UK(e,t)}}),GK=kK({split_:function(e,t,n){void 0===n&&(n=0);var r,i=cK(e,"x","split");return n=JW(n,i.shape)[0],"number"==typeof t?(VW(i.shape[n]%t==0,(function(){return"Number of splits must evenly divide the axis."})),r=new Array(t).fill(i.shape[n]/t)):(VW(i.shape[n]===t.reduce((function(e,t){return e+t})),(function(){return"The sum of sizes must match the size of the axis dimension."})),r=t),JH.runKernel((function(e){return e.split(i,r,n)}),{$x:i},(function(e){return{$x:function(){return UK(e,n)}}}))}});function KK(e,t){return e(t={exports:{}},t.exports),t.exports}var YK=KK((function(e){!function(e,t,n){function r(e){var t,n=this,r=(t=4022871197,function(e){e=e.toString();for(var n=0;n<e.length;n++){var r=.02519603282416938*(t+=e.charCodeAt(n));r-=t=r>>>0,t=(r*=t)>>>0,t+=4294967296*(r-=t)}return 2.3283064365386963e-10*(t>>>0)});n.next=function(){var e=2091639*n.s0+2.3283064365386963e-10*n.c;return n.s0=n.s1,n.s1=n.s2,n.s2=e-(n.c=0|e)},n.c=1,n.s0=r(" "),n.s1=r(" "),n.s2=r(" "),n.s0-=r(e),n.s0<0&&(n.s0+=1),n.s1-=r(e),n.s1<0&&(n.s1+=1),n.s2-=r(e),n.s2<0&&(n.s2+=1),r=null}function i(e,t){return t.c=e.c,t.s0=e.s0,t.s1=e.s1,t.s2=e.s2,t}function o(e,t){var n=new r(e),o=t&&t.state,a=n.next;return a.int32=function(){return 4294967296*n.next()|0},a.double=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.alea=o}(0,e)})),XK=KK((function(e){!function(e,t,n){function r(e){var t=this,n="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var e=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^e^e>>>8},e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xor128=o}(0,e)})),QK=KK((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^e^e<<1)|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,e===(0|e)?t.x=e:n+=e;for(var r=0;r<n.length+64;r++)t.x^=0|n.charCodeAt(r),r==n.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function i(e,t){return t.x=e.x,t.y=e.y,t.z=e.z,t.w=e.w,t.v=e.v,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xorwow=o}(0,e)})),JK=KK((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.x,i=t.i;return e=r[i],n=(e^=e>>>7)^e<<24,n^=(e=r[i+1&7])^e>>>10,n^=(e=r[i+3&7])^e>>>3,n^=(e=r[i+4&7])^e<<7,e=r[i+7&7],n^=(e^=e<<13)^e<<9,r[i]=n,t.i=i+1&7,n},function(e,t){var n,r=[];if(t===(0|t))r[0]=t;else for(t=""+t,n=0;n<t.length;++n)r[7&n]=r[7&n]<<15^t.charCodeAt(n)+r[n+1&7]<<13;for(;r.length<8;)r.push(0);for(n=0;n<8&&0===r[n];++n);for(8==n?r[7]=-1:r[n],e.x=r,e.i=0,n=256;n>0;--n)e.next()}(t,e)}function i(e,t){return t.x=e.x.slice(),t.i=e.i,t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&(o.x&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xorshift7=o}(0,e)})),ZK=KK((function(e){!function(e,t,n){function r(e){var t=this;t.next=function(){var e,n,r=t.w,i=t.X,o=t.i;return t.w=r=r+1640531527|0,n=i[o+34&127],e=i[o=o+1&127],n^=n<<13,e^=e<<17,n^=n>>>15,e^=e>>>12,n=i[o]=n^e,t.i=o,n+(r^r>>>16)|0},function(e,t){var n,r,i,o,a,s=[],l=128;for(t===(0|t)?(r=t,t=null):(t+="\0",r=0,l=Math.max(l,t.length)),i=0,o=-32;o<l;++o)t&&(r^=t.charCodeAt((o+32)%t.length)),0===o&&(a=r),r^=r<<10,r^=r>>>15,r^=r<<4,r^=r>>>13,o>=0&&(a=a+1640531527|0,i=0==(n=s[127&o]^=r+a)?i+1:0);for(i>=128&&(s[127&(t&&t.length||0)]=-1),i=127,o=512;o>0;--o)r=s[i+34&127],n=s[i=i+1&127],r^=r<<13,n^=n<<17,r^=r>>>15,n^=n>>>12,s[i]=r^n;e.w=a,e.X=s,e.i=i}(t,e)}function i(e,t){return t.i=e.i,t.w=e.w,t.X=e.X.slice(),t}function o(e,t){null==e&&(e=+new Date);var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&(o.X&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.xor4096=o}(0,e)})),eY=KK((function(e){!function(e,t,n){function r(e){var t=this,n="";t.next=function(){var e=t.b,n=t.c,r=t.d,i=t.a;return e=e<<25^e>>>7^n,n=n-r|0,r=r<<24^r>>>8^i,i=i-e|0,t.b=e=e<<20^e>>>12^n,t.c=n=n-r|0,t.d=r<<16^n>>>16^i,t.a=i-e|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,e===Math.floor(e)?(t.a=e/4294967296|0,t.b=0|e):n+=e;for(var r=0;r<n.length+20;r++)t.b^=0|n.charCodeAt(r),t.next()}function i(e,t){return t.a=e.a,t.b=e.b,t.c=e.c,t.d=e.d,t}function o(e,t){var n=new r(e),o=t&&t.state,a=function(){return(n.next()>>>0)/4294967296};return a.double=function(){do{var e=((n.next()>>>11)+(n.next()>>>0)/4294967296)/(1<<21)}while(0===e);return e},a.int32=n.next,a.quick=a,o&&("object"==typeof o&&i(o,n),a.state=function(){return i(n,{})}),a}t&&t.exports?t.exports=o:this.tychei=o}(0,e)})),tY=KK((function(e){!function(t,n){var r,i=this,o=256,a="random",s=n.pow(o,6),l=n.pow(2,52),u=2*l,c=o-1;function d(e,c,d){var g=[],v=f(function e(t,n){var r,i=[],o=typeof t;if(n&&"object"==o)for(r in t)try{i.push(e(t[r],n-1))}catch(e){}return i.length?i:"string"==o?t:t+"\0"}((c=1==c?{entropy:!0}:c||{}).entropy?[e,m(t)]:null==e?function(){try{var e;return r&&(e=r.randomBytes)?e=e(o):(e=new Uint8Array(o),(i.crypto||i.msCrypto).getRandomValues(e)),m(e)}catch(e){var n=i.navigator,a=n&&n.plugins;return[+new Date,i,a,i.screen,m(t)]}}():e,3),g),y=new h(g),b=function(){for(var e=y.g(6),t=s,n=0;e<l;)e=(e+n)*o,t*=o,n=y.g(1);for(;e>=u;)e/=2,t/=2,n>>>=1;return(e+n)/t};return b.int32=function(){return 0|y.g(4)},b.quick=function(){return y.g(4)/4294967296},b.double=b,f(m(y.S),t),(c.pass||d||function(e,t,r,i){return i&&(i.S&&p(i,y),e.state=function(){return p(y,{})}),r?(n[a]=e,t):e})(b,v,"global"in c?c.global:this==n,c.state)}function h(e){var t,n=e.length,r=this,i=0,a=r.i=r.j=0,s=r.S=[];for(n||(e=[n++]);i<o;)s[i]=i++;for(i=0;i<o;i++)s[i]=s[a=c&a+e[i%n]+(t=s[i])],s[a]=t;(r.g=function(e){for(var t,n=0,i=r.i,a=r.j,s=r.S;e--;)t=s[i=c&i+1],n=n*o+s[c&(s[i]=s[a=c&a+t])+(s[a]=t)];return r.i=i,r.j=a,n})(o)}function p(e,t){return t.i=e.i,t.j=e.j,t.S=e.S.slice(),t}function f(e,t){for(var n,r=e+"",i=0;i<r.length;)t[c&i]=c&(n^=19*t[c&i])+r.charCodeAt(i++);return m(t)}function m(e){return String.fromCharCode.apply(0,e)}if(n["seed"+a]=d,f(n.random(),t),e.exports){e.exports=d;try{r=require("crypto")}catch(e){}}}([],Math)}));tY.alea=YK,tY.xor128=XK,tY.xorwow=QK,tY.xorshift7=JK,tY.xor4096=ZK,tY.tychei=eY;var nY=tY.alea,rY=function(){function e(e,t,n,r,i){this.mean=e,this.stdDev=t,this.dtype=n,this.nextVal=NaN,this.truncated=r,this.truncated&&(this.upper=this.mean+2*this.stdDev,this.lower=this.mean-2*this.stdDev);var o=i||Math.random();this.random=nY(o.toString())}return e.prototype.nextValue=function(){if(!isNaN(this.nextVal)){var e=this.nextVal;return this.nextVal=NaN,e}for(var t,n,r=!1;!r;){var i=void 0,o=void 0,a=void 0;do{a=(i=2*this.random()-1)*i+(o=2*this.random()-1)*o}while(a>=1||0===a);var s=Math.sqrt(-2*Math.log(a)/a);t=this.mean+this.stdDev*i*s,n=this.mean+this.stdDev*o*s,this.truncated&&!this.isValidTruncated(t)||(r=!0)}return this.truncated&&!this.isValidTruncated(n)||(this.nextVal=this.convertValue(n)),this.convertValue(t)},e.prototype.convertValue=function(e){return null==this.dtype||"float32"===this.dtype?e:Math.round(e)},e.prototype.isValidTruncated=function(e){return e<=this.upper&&e>=this.lower},e}(),iY=function(){function e(e,t,n,r){this.alpha=e,this.beta=1/t,this.dtype=n;var i=r||Math.random();this.randu=nY(i.toString()),this.randn=new rY(0,1,n,!1,this.randu()),this.d=e<1?e+2/3:e-1/3,this.c=1/Math.sqrt(9*this.d)}return e.prototype.nextValue=function(){for(var e,t,n,r,i,o;;){do{r=this.randn.nextValue(),o=1+this.c*r}while(o<=0);if(o*=o*o,t=1-.331*(e=r*r)*e,n=.5*e+this.d*(1-o+Math.log(o)),(i=this.randu())<t||Math.log(i)<n)break}return o=1/this.beta*this.d*o,this.alpha<1&&(o*=Math.pow(this.randu(),1/this.alpha)),this.convertValue(o)},e.prototype.convertValue=function(e){return"float32"===this.dtype?e:Math.round(e)},e}(),oY=function(){function e(e,t,n,r){var i=this;if(void 0===e&&(e=0),void 0===t&&(t=1),this.canReturnFloat=function(){return null==i.dtype||"float32"===i.dtype},this.min=e,this.range=t-e,this.dtype=n,null==r&&(r=Math.random()),"number"==typeof r&&(r=r.toString()),!this.canReturnFloat()&&this.range<=1)throw new Error("The difference between "+e+" - "+t+" <= 1 and dtype is not float");this.random=nY(r)}return e.prototype.convertValue=function(e){return this.canReturnFloat()?e:Math.round(e)},e.prototype.nextValue=function(){return this.convertValue(this.min+this.range*this.random())},e}();function aY(e,t,n){return void 0===t&&(t="float32"),t=t||"float32",xH(e),new AH(e,t,n)}function sY(e,t){void 0===t&&(t=!1),console.log(e.toString(t))}var lY=kK({batchToSpaceND_:function(e,t,n){var r=cK(e,"x","batchToSpaceND"),i=t.reduce((function(e,t){return e*t}));return VW(r.rank>=1+t.length,(function(){return"input rank is "+r.rank+" but should be > than blockShape.length "+t.length})),VW(n.length===t.length,(function(){return"crops.length is "+n.length+" but should be equal to blockShape.length  "+t.length})),VW(r.shape[0]%i==0,(function(){return"input tensor batch is "+r.shape[0]+" but is not divisible by the product of the elements of blockShape "+t.join(" * ")+" === "+i})),JH.runKernel((function(e){return e.batchToSpaceND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.spaceToBatchND(t,n)}}}))}}),uY=kK({cast_:function(e,t){var n=cK(e,"x","cast");if(!rH(t))throw new Error("Failed to cast to unknown dtype "+t);if("string"===t&&"string"!==n.dtype||"string"!==t&&"string"===n.dtype)throw new Error("Only strings can be casted to strings");return JH.runKernel((function(e){return e.cast(n,t)}),{$x:n},(function(e){return{$x:function(){return e.clone()}}}))}}),cY=kK({clone_:function(e){var t=cK(e,"x","clone",null);return JH.runKernel((function(e){return PH.make(t.shape,{dataId:t.dataId},t.dtype)}),{$x:t},(function(e){return{$x:function(){return e.toFloat()}}}))}}),dY=kK({cumsum_:function(e,t,n,r){void 0===t&&(t=0),void 0===n&&(n=!1),void 0===r&&(r=!1);var i=cK(e,"x","cumsum"),o=vK([t|=0],i.rank),a=i;null!=o&&(a=i.transpose(o));var s=bK(1,i.rank)[0],l=JH.runKernel((function(e){return e.cumsum(a,s,n,r)}),{permutedX:a},(function(e){return{permutedX:function(){return e.cumsum(t,n,!r)}}}));return null!=o&&(l=l.transpose(o)),l}}),hY=kK({depthToSpace_:function(e,t,n){void 0===n&&(n="NHWC");var r=cK(e,"x","depthToSpace"),i="NHWC"===n?r.shape[1]:r.shape[2],o="NHWC"===n?r.shape[2]:r.shape[3],a="NHWC"===n?r.shape[3]:r.shape[1];return VW(i*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+i+" and "+t+"  for depthToSpace with input shape\n      "+r.shape})),VW(o*t>=0,(function(){return"Negative dimension size caused by overflow when multiplying\n      "+o+" and "+t+" for depthToSpace with input shape\n          "+r.shape})),VW(a%(t*t)==0,(function(){return"Dimension size must be evenly divisible by "+t*t+" but is "+a+" for depthToSpace with input shape "+r.shape})),JH.runKernel((function(e){return e.depthToSpace(r,t,n)}),{$x:r})}}),pY=kK({expandDims_:function(e,t){void 0===t&&(t=0);var n=cK(e,"x","expandDims",null);VW(t<=n.rank,(function(){return"Axis must be <= rank of the tensor"}));var r=n.shape.slice();return t<0&&(VW(-(n.rank+1)<=t,(function(){return"Axis must be in the interval ["+-(n.rank+1)+", "+n.rank+"]"})),t=n.rank+t+1),r.splice(t,0,1),IY(n,r)}}),fY=kK({eye_:function(e,t,n,r){void 0===r&&(r="float32"),null==t&&(t=e);for(var i=aY([e,t],r),o=e<=t?e:t,a=0;a<o;++a)i.set(1,a,a);var s=i.toTensor().as2D(e,t);if(null==n)return s;if(1===n.length)return AY(pY(s,0),[n[0],1,1]);if(2===n.length)return AY(pY(pY(s,0),0),[n[0],n[1],1,1]);if(3===n.length)return AY(pY(pY(pY(s,0),0),0),[n[0],n[1],n[2],1,1]);throw new Error("eye() currently supports only 1D and 2D batchShapes, but received "+n.length+"D.")}}),mY=kK({multinomial_:function(e,t,n,r){void 0===r&&(r=!1);var i=cK(e,"logits","multinomial"),o=i.size,a=i.rank;if(o<2)throw new Error("Error in multinomial: you need at least 2 outcomes, but got "+o+".");if(a>2)throw new Error("Rank of probabilities must be 1 or 2, but is "+a);n=n||Math.random();var s=1===a?i.as2D(1,-1):i,l=JH.runKernel((function(e){return e.multinomial(s,r,t,n)}),{logits2D:s});return 1===a?l.as1D():l}}),gY=kK({oneHot_:function(e,t,n,r){if(void 0===n&&(n=1),void 0===r&&(r=0),t<2)throw new Error("Error in oneHot: depth must be >=2, but it is "+t);var i=cK(e,"indices","oneHot","int32"),o=i.shape.concat([t]);return i=i.flatten(),JH.runKernel((function(e){return e.oneHot(i,t,n,r)}),{$indices:i},(function(e){return{$indices:function(){return MK(i.shape,"float32")}}})).reshape(o)}}),vY=kK({pad_:function(e,t,n){void 0===n&&(n=0);var r=cK(e,"x","pad");if(0===r.rank)throw new Error("pad(scalar) is not defined. Pass non-scalar to pad");var i=t.map((function(e){return e[0]}));return JH.runKernel((function(e){return e.pad(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.slice(i,r.shape)}}}))}}),yY=kK({pad1d_:function(e,t,n){return void 0===n&&(n=0),VW(2===t.length,(function(){return"Invalid number of paddings. Must be length of 2."})),vY(e,[t],n)}}),bY=kK({pad2d_:function(e,t,n){return void 0===n&&(n=0),VW(2===t.length&&2===t[0].length&&2===t[1].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),vY(e,t,n)}}),xY=kK({pad3d_:function(e,t,n){return void 0===n&&(n=0),VW(3===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),vY(e,t,n)}}),wY=kK({pad4d_:function(e,t,n){return void 0===n&&(n=0),VW(4===t.length&&2===t[0].length&&2===t[1].length&&2===t[2].length&&2===t[3].length,(function(){return"Invalid number of paddings. Must be length of 2 each."})),vY(e,t,n)}}),kY=kK({rand_:function(e,t,n){var r=qW(e),i=null;if(null==n||"float32"===n)i=new Float32Array(r);else if("int32"===n)i=new Int32Array(r);else{if("bool"!==n)throw new Error("Unknown data type "+n);i=new Uint8Array(r)}for(var o=0;o<r;o++)i[o]=t();return PH.make(e,{values:i},n)}}),_Y=kK({randomNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new rY(t,n,r,!1,i),a=aY(e,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),EY=kK({randomGamma_:function(e,t,n,r,i){if(void 0===n&&(n=1),void 0===r&&(r="float32"),null==n&&(n=1),null==r&&(r="float32"),"float32"!==r&&"int32"!==r)throw new Error("Unsupported data type "+r);for(var o=new iY(t,n,r,i),a=aY(e,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),CY=kK({randomUniform_:function(e,t,n,r,i){void 0===t&&(t=0),void 0===n&&(n=1),void 0===r&&(r="float32");for(var o=aY(e,r),a=new oY(t,n,null,i),s=0;s<o.values.length;s++)o.values[s]=a.nextValue();return o.toTensor()}}),IY=kK({reshape_:function(e,t){var n=cK(e,"x","reshape",null);return t=QW(t,n.size),VW(n.size===qW(t),(function(){return"new shape and old shape must have the same number of elements."})),JH.runKernel((function(e){return e.reshape(n,t)}),{$x:n},(function(e){return{$x:function(){return e.reshape(n.shape)}}}))}}),SY=kK({spaceToBatchND_:function(e,t,n){var r=cK(e,"x","spaceToBatchND");return VW(r.rank>=1+t.length,(function(){return"input rank "+r.rank+" should be > than [blockShape] "+t.length})),VW(n.length===t.length,(function(){return"paddings.shape[0] "+n.length+" must be equal to [blockShape] "+t.length})),VW(r.shape.reduce((function(e,r,i){return i>0&&i<=t.length?e&&(r+n[i-1][0]+n[i-1][1])%t[i-1]==0:e}),!0),(function(){return"input spatial dimensions "+r.shape.slice(1)+" with paddings "+n.toString()+" must be divisible by blockShapes "+t.toString()})),JH.runKernel((function(e){return e.spaceToBatchND(r,t,n)}),{$x:r},(function(e){return{$x:function(){return e.batchToSpaceND(t,n)}}}))}}),NY=kK({squeeze_:function(e,t){var n=cK(e,"x","squeeze");return IY(n,ZW(n.shape,t).newShape)}}),TY=kK({stack_:function(e,t){void 0===t&&(t=0);var n=dK(e,"tensors","stack");if(VW(n.length>=1,(function(){return"Pass at least one tensor to tf.stack"})),1===n.length)return n[0].expandDims(t);var r=n[0].rank,i=n[0].shape,o=n[0].dtype;VW(t<=r,(function(){return"Axis must be <= rank of the tensor"})),n.forEach((function(e){zW(i,e.shape,"All tensors passed to stack must have matching shapes")})),n.forEach((function(e){VW(o===e.dtype,(function(){return"All tensors passed to stack must have matching dtypes"}))}));var a=n.map((function(e){return e.expandDims(t)}));return UK(a,t)}}),AY=kK({tile_:function(e,t){var n=cK(e,"x","tile",null);return VW(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of reps "+t+"."})),JH.runKernel((function(e,r){var i=e.tile(n,t);return r([n]),i}),{$x:n},(function(e,n){var r=n[0];return{$x:function(){var n=zK(r);if(1===r.rank)for(var i=0;i<t[0];++i)n=n.add(e.slice([i*r.shape[0]],[r.shape[0]]));else if(2===r.rank)for(i=0;i<t[0];++i)for(var o=0;o<t[1];++o)n=n.add(e.slice([i*r.shape[0],o*r.shape[1]],[r.shape[0],r.shape[1]]));else if(3===r.rank)for(i=0;i<t[0];++i)for(o=0;o<t[1];++o)for(var a=0;a<t[2];++a)n=n.add(e.slice([i*r.shape[0],o*r.shape[1],a*r.shape[2]],[r.shape[0],r.shape[1],r.shape[2]]));else{if(4!==r.rank)throw new Error("Gradient for tile operation is not implemented for rank-"+r.rank+" tensors yet.");for(i=0;i<t[0];++i)for(o=0;o<t[1];++o)for(a=0;a<t[2];++a)for(var s=0;s<t[3];++s)n=n.add(e.slice([i*r.shape[0],o*r.shape[1],a*r.shape[2],s*r.shape[3]],[r.shape[0],r.shape[1],r.shape[2],r.shape[3]]))}return n}}}))}}),RY=kK({truncatedNormal_:function(e,t,n,r,i){if(void 0===t&&(t=0),void 0===n&&(n=1),null!=r&&"bool"===r)throw new Error("Unsupported data type "+r);for(var o=new rY(t,n,r,!0,i),a=aY(e,r),s=0;s<a.values.length;s++)a.values[s]=o.nextValue();return a.toTensor()}}),DY=kK({unstack_:function(e,t){void 0===t&&(t=0),t=t||0;var n=cK(e,"x","unstack");return VW(t>=-n.shape.length&&t<n.shape.length,(function(){return"Axis = "+t+" is not in [-"+n.shape.length+", "+n.shape.length+")"})),t<0&&(t+=n.shape.length),JH.runKernel((function(e){return e.unstack(n,t)}),{$x:n},(function(e){return{$x:function(){return TY(e,t)}}}))}}),OY=function(e,t){return RW(this,void 0,void 0,(function(){var n,r,i,o,a,s,l,u,c,d;return DW(this,(function(h){switch(h.label){case 0:return n=cK(e,"x","setdiff1d"),r=cK(t,"y","setdiff1d"),VW(n.dtype===r.dtype,(function(){return"x and y should have the same dtype, but got x ("+n.dtype+") and y ("+r.dtype+")."})),VW(1===n.rank,(function(){return"x should be 1D tensor, but got x ("+n.shape+")."})),VW(1===r.rank,(function(){return"y should be 1D tensor, but got y ("+r.shape+")."})),[4,n.data()];case 1:return i=h.sent(),[4,r.data()];case 2:for(o=h.sent(),a=new Set(o),s=0,c=0;c<i.length;c++)a.has(i[c])||s++;for(l=new AH([s],n.dtype),u=new AH([s],"int32"),c=0,d=0;c<i.length;c++)a.has(i[c])||(l.values[d]=i[c],u.values[d]=c,d++);return[2,[l.toTensor(),u.toTensor()]]}}))}))};function PY(e,t,n,r){void 0===r&&(r=!0);var i=[];if(r)(i=i.concat(t.slice(0))).push(e[0]/n),i=i.concat(e.slice(1));else{i=i.concat(e[0]);for(var o=t.length,a=0;a<o;++a)i=i.concat([e[a+1]/t[a],t[a]]);i=i.concat(e.slice(o+1))}return i}function LY(e,t,n){void 0===n&&(n=!0);var r=[];if(n){r.push(t);for(var i=t+1;i<e;++i)i<=2*t?(r.push(i),r.push(i-(t+1))):r.push(i)}else{var o=[],a=[];for(i=1;i<e;++i)i>=2*t+1||i%2==1?a.push(i):o.push(i);r.push.apply(r,o),r.push(0),r.push.apply(r,a)}return r}function MY(e,t,n,r){void 0===r&&(r=!0);var i=[];r?i.push(e[0]/n):i.push(e[0]*n);for(var o=1;o<e.length;++o)o<=t.length?r?i.push(t[o-1]*e[o]):i.push(e[o]/t[o-1]):i.push(e[o]);return i}function FY(e,t){for(var n=[0],r=0;r<t;++r)n.push(e[r][0]);return n}function jY(e,t,n){for(var r=e.slice(0,1),i=0;i<n;++i)r.push(e[i+1]-t[i][0]-t[i][1]);return r}function BY(e,t){if(e.rank<1)throw new Error("tf.gatherND() expects the input to be rank 1 or higher, but the rank was "+e.rank+".");if(t.rank<1)throw new Error("tf.gatherND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if("int32"!==t.dtype)throw new Error("tf.gatherND() expects the indices to be int32 type, but the dtype was "+t.dtype+".");if(t.shape[t.rank-1]>e.rank)throw new Error("index innermost dimension length must be <= tensor rank; saw: "+t.shape[t.rank-1]+" vs. "+e.rank);if(0===e.size)throw new Error("Requested more than 0 entries, but input is empty. Input shape: "+e.shape+".");for(var n=t.shape,r=n[n.length-1],i=1,o=0;o<n.length-1;++o)i*=n[o];var a=e.shape,s=n.slice();s.pop();var l=1;for(o=r;o<e.rank;++o)l*=a[o],s.push(a[o]);var u=fH(e.shape).map((function(e){return e/l})).concat([1]).slice(0,r);return[s,i,l,u]}function VY(e){return e<=30?e:pH(e,Math.floor(Math.sqrt(e)))}function zY(e,t,n){for(var r=t.rank>1?t.shape[t.rank-1]:1,i=n.length,o=1,a=r;a<i;++a)o*=n[a];var s=r<1?1:r;return{sliceRank:r,numUpdates:t.size/s,sliceSize:o,strides:fH(n.slice(0,r)).concat([1]),outputSize:qW(n)}}function UY(e){for(var t=[],n=0;e>0;)1&e&&t.push(n),e/=2,n++;return t}function $Y(e,t,n){for(var r=[],i=0;i<e.length;i++)r[i]=Math.ceil((t[i]-e[i])/n[i]);return r}function qY(e,t,n,r,i){var o=t[i],a=n[i]||1;(e&1<<i||null==o)&&(o=a>0?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),FW(0,o,s-1)}function WY(e,t,n,r,i){var o=t[i],a=n[i]||1;(e&1<<i||null==o)&&(o=a>0?Number.MAX_SAFE_INTEGER:Number.MIN_SAFE_INTEGER);var s=r[i];return o<0&&(o+=s),a>0?FW(0,o,s):FW(-1,o,s-1)}function HY(e,t,n){for(var r=n.length,i=0;i<n.length;i++)if(n[i]>1){r=i;break}for(i=r+1;i<n.length;i++)if(t[i]>0||n[i]!==e[i])return!1;return!0}function GY(e,t){for(var n=e.length>0?e[e.length-1]:1,r=0;r<e.length-1;r++)n+=e[r]*t[r];return n}function KY(e,t){VW(hH(e),(function(){return"The f passed in variableGrads(f) must be a function"})),VW(null==t||Array.isArray(t)&&t.every((function(e){return e instanceof LH})),(function(){return"The varList passed in variableGrads(f, varList) must be an array of variables"}));var n=null!=t;if(!n)for(var r in t=[],JH.registeredVariables)t.push(JH.registeredVariables[r]);var i=n?t.filter((function(e){return!e.trainable})):null,o=t.length;VW((t=t.filter((function(e){return e.trainable}))).length>0,(function(){return"variableGrads() expects at least one of the input variables to be trainable, but none of the "+o+" variables is trainable."}));var a=JH.gradients(e,t,null,!0),s=a.value,l=a.grads;VW(l.some((function(e){return null!=e})),(function(){return"Cannot find a connection between any variable and the result of the loss function y=f(x). Please make sure the operations that use variables are inside the function f passed to minimize()."})),VW(0===s.rank,(function(){return"The f passed in variableGrads(f) must return a scalar, but it returned a rank-"+s.rank+" tensor"}));var u={};return t.forEach((function(e,t){null!=l[t]&&(u[e.name]=l[t])})),null!=i&&i.forEach((function(e){return u[e.name]=null})),{value:s,grads:u}}function YY(e){return JH.customGrad(e)}function XY(e){if(e.filter((function(e){return null==e})).length>0)throw new Error("Cannot compute gradient of y=f(x) with respect to x. Make sure that\n    the f you passed encloses all operations that lead from x to y.")}var QY=kK({softmax_:function(e,t){void 0===t&&(t=-1);var n=cK(e,"logits","softmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and dim was "+t);return YY((function(e,n){var r=e.logSumExp([t],!0),i=e.toFloat().sub(r).exp();return n([i]),{value:i,gradFunc:function(e,n){var r=n[0],i=e.mul(r);return i.sub(i.sum([t],!0).mul(r))}}}))(n)}}),JY=kK({logSoftmax_:function(e,t){void 0===t&&(t=-1);var n=cK(e,"logits","logSoftmax");if(-1===t&&(t=n.rank-1),t!==n.rank-1)throw Error("Log Softmax along a non-last dimension is not yet supported. Logits was rank "+n.rank+" and axis was "+t);return YY((function(e,n){var r=e.max(t,!0),i=e.sub(r),o=i.toFloat().sub(i.exp().sum(t,!0).log());return n([o]),{value:o,gradFunc:function(e,n){var r=n[0].exp();return e.sub(e.sum(t,!0).mul(r))}}}))(n)}}),ZY=function(){function e(e,t){this.backend=e,this.dataMover=t,this.data=new WeakMap}return e.prototype.get=function(e){return this.data.has(e)||this.dataMover.moveData(this.backend,e),this.data.get(e)},e.prototype.set=function(e,t){this.data.set(e,t)},e.prototype.has=function(e){return this.data.has(e)},e.prototype.delete=function(e){return this.data.delete(e)},e}(),eX=function(){function e(){}return e.prototype.time=function(e){throw new Error("Not yet implemented.")},e.prototype.read=function(e){throw new Error("Not yet implemented.")},e.prototype.readSync=function(e){throw new Error("Not yet implemented.")},e.prototype.disposeData=function(e){throw new Error("Not yet implemented.")},e.prototype.write=function(e,t){throw new Error("Not yet implemented.")},e.prototype.fromPixels=function(e,t){throw new Error("Not yet implemented.")},e.prototype.register=function(e,t,n){throw new Error("Not yet implemented.")},e.prototype.memory=function(){throw new Error("Not yet implemented.")},e.prototype.floatPrecision=function(){throw new Error("Not yet implemented")},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.batchMatMul=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.fusedBatchMatMul=function(e){throw e.a,e.b,e.transposeA,e.transposeB,e.bias,e.activation,e.preluActivationWeights,new Error("Not yet implemented")},e.prototype.slice=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.stridedSlice=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.unstack=function(e,t){throw new Error("Not yet implemented")},e.prototype.reverse=function(e,t){throw new Error("Not yet implemented")},e.prototype.concat=function(e,t){throw new Error("Not yet implemented")},e.prototype.neg=function(e){throw new Error("Not yet implemented")},e.prototype.add=function(e,t){throw new Error("Not yet implemented")},e.prototype.addN=function(e){throw new Error("Not yet implemented")},e.prototype.subtract=function(e,t){throw new Error("Not yet implemented")},e.prototype.multiply=function(e,t){throw new Error("Not yet implemented")},e.prototype.realDivide=function(e,t){throw new Error("Not yet implemented")},e.prototype.floorDiv=function(e,t){throw new Error("Not yet implemented")},e.prototype.sum=function(e,t){throw new Error("Not yet implemented")},e.prototype.prod=function(e,t){throw new Error("Not yet implemented")},e.prototype.unsortedSegmentSum=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.argMin=function(e,t){throw new Error("Not yet implemented")},e.prototype.argMax=function(e,t){throw new Error("Not yet implemented")},e.prototype.equal=function(e,t){throw new Error("Not yet implemented")},e.prototype.notEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.less=function(e,t){throw new Error("Not yet implemented")},e.prototype.lessEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.greater=function(e,t){throw new Error("Not yet implemented")},e.prototype.greaterEqual=function(e,t){throw new Error("Not yet implemented")},e.prototype.logicalNot=function(e){throw new Error("Not yet implemented")},e.prototype.logicalAnd=function(e,t){throw new Error("Not yet implemented")},e.prototype.logicalOr=function(e,t){throw new Error("Not yet implemented")},e.prototype.where=function(e){throw new Error("Not yet implemented")},e.prototype.select=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.topk=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.min=function(e,t){throw new Error("Not yet implemented")},e.prototype.minimum=function(e,t){throw new Error("Not yet implemented")},e.prototype.mod=function(e,t){throw new Error("Not yet implemented")},e.prototype.max=function(e,t){throw new Error("Not yet implemented")},e.prototype.maximum=function(e,t){throw new Error("Not yet implemented")},e.prototype.all=function(e,t){throw new Error("Not yet implemented")},e.prototype.any=function(e,t){throw new Error("Not yet implemented")},e.prototype.squaredDifference=function(e,t){throw new Error("Not yet implemented")},e.prototype.ceil=function(e){throw new Error("Not yet implemented")},e.prototype.floor=function(e){throw new Error("Not yet implemented")},e.prototype.round=function(e){throw new Error("Not yet implemented")},e.prototype.sign=function(e){throw new Error("Not yet implemented")},e.prototype.isNaN=function(e){throw new Error("Not yet implemented")},e.prototype.isInf=function(e){throw new Error("Not yet implemented")},e.prototype.isFinite=function(e){throw new Error("Not yet implemented")},e.prototype.pow=function(e,t){throw new Error("Not yet implemented")},e.prototype.exp=function(e){throw new Error("Not yet implemented")},e.prototype.expm1=function(e){throw new Error("Not yet implemented")},e.prototype.log=function(e){throw new Error("Not yet implemented")},e.prototype.log1p=function(e){throw new Error("Not yet implemented")},e.prototype.sqrt=function(e){throw new Error("Not yet implemented")},e.prototype.rsqrt=function(e){throw new Error("Not yet implemented")},e.prototype.square=function(e){throw new Error("Not yet implemented")},e.prototype.reciprocal=function(e){throw new Error("Not yet implemented")},e.prototype.relu=function(e){throw new Error("Not yet implemented")},e.prototype.relu6=function(e){throw new Error("Not yet implemented")},e.prototype.prelu=function(e,t){throw new Error("Not yet implemented")},e.prototype.elu=function(e){throw new Error("Not yet implemented")},e.prototype.eluDer=function(e,t){throw new Error("Not yet implemented")},e.prototype.selu=function(e){throw new Error("Not yet implemented")},e.prototype.int=function(e){throw new Error("Not yet implemented")},e.prototype.clip=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.abs=function(e){throw new Error("Not yet implemented")},e.prototype.complexAbs=function(e){throw new Error("Not yet implemented")},e.prototype.sigmoid=function(e){throw new Error("Not yet implemented")},e.prototype.softplus=function(e){throw new Error("Not yet implemented")},e.prototype.sin=function(e){throw new Error("Not yet implemented")},e.prototype.cos=function(e){throw new Error("Not yet implemented")},e.prototype.tan=function(e){throw new Error("Not yet implemented")},e.prototype.asin=function(e){throw new Error("Not yet implemented")},e.prototype.acos=function(e){throw new Error("Not yet implemented")},e.prototype.atan=function(e){throw new Error("Not yet implemented")},e.prototype.atan2=function(e,t){throw new Error("Not yet implemented")},e.prototype.sinh=function(e){throw new Error("Not yet implemented")},e.prototype.cosh=function(e){throw new Error("Not yet implemented")},e.prototype.tanh=function(e){throw new Error("Not yet implemented")},e.prototype.asinh=function(e){throw new Error("Not yet implemented")},e.prototype.acosh=function(e){throw new Error("Not yet implemented")},e.prototype.atanh=function(e){throw new Error("Not yet implemented")},e.prototype.erf=function(e){throw new Error("Not yet implemented")},e.prototype.step=function(e,t){throw new Error("Not yet implemented")},e.prototype.fusedConv2d=function(e){throw e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,new Error("Not yet implemented")},e.prototype.conv2d=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv2dDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv2dDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.fusedDepthwiseConv2D=function(e){throw e.input,e.filter,e.convInfo,e.bias,e.activation,e.preluActivationWeights,new Error("Not yet implemented")},e.prototype.depthwiseConv2D=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2DDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3d=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3dDerInput=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.conv3dDerFilter=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.maxPool=function(e,t){throw new Error("Not yet implemented")},e.prototype.maxPoolBackprop=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.avgPool=function(e,t){throw new Error("Not yet implemented")},e.prototype.avgPoolBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.avgPool3d=function(e,t){throw new Error("Not yet implemented")},e.prototype.avgPool3dBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.maxPool3d=function(e,t){throw new Error("Not yet implemented")},e.prototype.maxPool3dBackprop=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.reshape=function(e,t){throw new Error("Not yet implemented")},e.prototype.cast=function(e,t){throw new Error("Not yet implemented")},e.prototype.tile=function(e,t){throw new Error("Not yet implemented")},e.prototype.pad=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.transpose=function(e,t){throw new Error("Not yet implemented")},e.prototype.gather=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.gatherND=function(e,t){throw new Error("Not yet implemented")},e.prototype.scatterND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.batchToSpaceND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.spaceToBatchND=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.resizeBilinear=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.resizeBilinearBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.resizeNearestNeighbor=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.batchNormalization=function(e,t,n,r,i,o){throw new Error("Not yet implemented")},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){throw new Error("Not yet implemented")},e.prototype.LRNGrad=function(e,t,n,r,i,o,a){throw new Error("Not yet implemented")},e.prototype.multinomial=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.oneHot=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.cumsum=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.nonMaxSuppression=function(e,t,n,r,i){throw new Error("Not yet implemented")},e.prototype.fft=function(e){throw new Error("Not yet implemented")},e.prototype.ifft=function(e){throw new Error("Not yet implemented")},e.prototype.complex=function(e,t){throw new Error("Not yet implemented")},e.prototype.real=function(e){throw new Error("Not yet implemented")},e.prototype.imag=function(e){throw new Error("Not yet implemented")},e.prototype.cropAndResize=function(e,t,n,r,i,o){throw new Error("Not yet implemented")},e.prototype.depthToSpace=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.split=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.sparseToDense=function(e,t,n,r){throw new Error("Not yet implemented")},e.prototype.diag=function(e){throw new Error("Not yet implemented")},e.prototype.fill=function(e,t,n){throw new Error("Not yet implemented.")},e.prototype.onesLike=function(e){throw new Error("Not yet implemented")},e.prototype.zerosLike=function(e){throw new Error("Not yet implemented")},e.prototype.linspace=function(e,t,n){throw new Error("Not yet implemented")},e.prototype.dispose=function(){throw new Error("Not yet implemented")},e}();function tX(e,t){for(var n=e.length,r=[],i=0;i<n;i++){var o=n-1-i,a=e[o]||1;(t[t.length-1-i]||1)>1&&1===a&&r.unshift(o)}return r}function nX(e,t){for(var n=[],r=0;r<t.length;r++){var i=e[e.length-r-1],o=t.length-r-1,a=t[o];(null==i||1===i&&a>1)&&n.unshift(o)}return n}function rX(e,t){for(var n=[],r=Math.max(e.length,t.length),i=0;i<r;i++){var o=e[e.length-i-1];null==o&&(o=1);var a=t[t.length-i-1];if(null==a&&(a=1),1===o)n.unshift(a);else if(1===a)n.unshift(o);else{if(o!==a)throw Error("Operands could not be broadcast together with shapes "+e+" and "+t+".");n.unshift(o)}}return n}function iX(e,t,n,r,i,o,a){void 0===a&&(a="channelsLast");var s,l=uX(t),u=l[0],c=l[1];if("channelsLast"===a)s=[u,c,e[3],e[3]];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);s=[u,c,e[1],e[1]]}return aX(e,s,n,r,i,o,!1,a)}function oX(e,t,n,r,i,o,a){void 0===a&&(a="NDHWC");var s,l,u=cX(t),c=u[0],d=u[1],h=u[2];if("NDHWC"===a)l="channelsLast",s=[c,d,h,e[4],e[4]];else{if("NCDHW"!==a)throw new Error("Unknown dataFormat "+a);l="channelsFirst",s=[c,d,h,e[1],e[1]]}return sX(e,s,n,r,i,!1,l,o)}function aX(e,t,n,r,i,o,a,s){void 0===a&&(a=!1),void 0===s&&(s="channelsLast");var l=[-1,-1,-1,-1],u=l[0],c=l[1],d=l[2],h=l[3];if("channelsLast"===s)u=e[0],c=e[1],d=e[2],h=e[3];else{if("channelsFirst"!==s)throw new Error("Unknown dataFormat "+s);u=e[0],h=e[1],c=e[2],d=e[3]}var p,f=t[0],m=t[1],g=t[3],v=uX(n),y=v[0],b=v[1],x=uX(r),w=x[0],k=x[1],_=dX(f,w),E=dX(m,k),C=function(e,t,n,r,i,o,a,s){var l,u,c;if("number"==typeof e){l={top:e,bottom:e,left:e,right:e,type:0===e?"VALID":"NUMBER"};var d=function(e,t,n,r,i){null==r&&(r=lX(e,t,n));var o=e[1],a=hX((e[0]-t+2*r)/n+1,i);VW(HW(a),(function(){return"The output # of rows ("+a+") must be an integer. Change the stride and/or zero pad parameters"}));var s=hX((o-t+2*r)/n+1,i);return VW(HW(s),(function(){return"The output # of columns ("+s+") must be an integer. Change the stride and/or zero pad parameters"})),[a,s]}([t,n],o,r,e,s);u=d[0],c=d[1]}else if("same"===e){u=Math.ceil(t/r),c=Math.ceil(n/i);var h=Math.max(0,(u-1)*r+o-t),p=Math.max(0,(c-1)*i+a-n),f=Math.floor(h/2),m=h-f,g=Math.floor(p/2);l={top:f,bottom:m,left:g,right:p-g,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);l={top:0,bottom:0,left:0,right:0,type:"VALID"},u=Math.ceil((t-o+1)/r),c=Math.ceil((n-a+1)/i)}return{padInfo:l,outHeight:u,outWidth:c}}(i,c,d,y,b,_,E,o),I=C.padInfo,S=C.outHeight,N=C.outWidth,T=a?g*h:g;return"channelsFirst"===s?p=[u,T,S,N]:"channelsLast"===s&&(p=[u,S,N,T]),{batchSize:u,dataFormat:s,inHeight:c,inWidth:d,inChannels:h,outHeight:S,outWidth:N,outChannels:T,padInfo:I,strideHeight:y,strideWidth:b,filterHeight:f,filterWidth:m,effectiveFilterHeight:_,effectiveFilterWidth:E,dilationHeight:w,dilationWidth:k,inShape:e,outShape:p,filterShape:t}}function sX(e,t,n,r,i,o,a,s){void 0===o&&(o=!1),void 0===a&&(a="channelsLast");var l=[-1,-1,-1,-1,-1],u=l[0],c=l[1],d=l[2],h=l[3],p=l[4];if("channelsLast"===a)u=e[0],c=e[1],d=e[2],h=e[3],p=e[4];else{if("channelsFirst"!==a)throw new Error("Unknown dataFormat "+a);u=e[0],p=e[1],c=e[2],d=e[3],h=e[4]}var f,m=t[0],g=t[1],v=t[2],y=t[4],b=cX(n),x=b[0],w=b[1],k=b[2],_=cX(r),E=_[0],C=_[1],I=_[2],S=dX(m,E),N=dX(g,C),T=dX(v,I),A=function(e,t,n,r,i,o,a,s,l,u,c){var d,h,p,f;if("number"==typeof e){d={top:e,bottom:e,left:e,right:e,front:e,back:e,type:0===e?"VALID":"NUMBER"};var m=function(e,t,n,r,i,o){null==i&&(i=lX(e,t,r));var a=e[1],s=e[2],l=hX((e[0]-t+2*i)/r+1,o);VW(HW(l),(function(){return"The output # of depths ("+l+") must be an integer. Change the stride and/or zero pad parameters"}));var u=hX((a-t+2*i)/r+1,o);VW(HW(u),(function(){return"The output # of rows ("+u+") must be an integer. Change the stride and/or zero pad parameters"}));var c=hX((s-t+2*i)/r+1,o);return VW(HW(c),(function(){return"The output # of columns ("+c+") must be an integer. Change the stride and/or zero pad parameters"})),[l,u,c,1]}([t,n,r,1],s,0,i,e,c);h=m[0],p=m[1],f=m[2]}else if("same"===e){var g=((h=Math.ceil(t/i))-1)*i+s-t,v=((p=Math.ceil(n/o))-1)*o+l-n,y=((f=Math.ceil(r/a))-1)*a+u-r,b=Math.floor(g/2),x=g-b,w=Math.floor(v/2),k=v-w,_=Math.floor(y/2);d={top:w,bottom:k,left:_,right:y-_,front:b,back:x,type:"SAME"}}else{if("valid"!==e)throw Error("Unknown padding parameter: "+e);d={top:0,bottom:0,left:0,right:0,front:0,back:0,type:"VALID"},h=Math.ceil((t-s+1)/i),p=Math.ceil((n-l+1)/o),f=Math.ceil((r-u+1)/a)}return{padInfo:d,outDepth:h,outHeight:p,outWidth:f}}(i,c,d,h,x,w,k,S,N,T,s),R=A.padInfo,D=A.outDepth,O=A.outHeight,P=A.outWidth,L=o?y*p:y;return"channelsFirst"===a?f=[u,L,D,O,P]:"channelsLast"===a&&(f=[u,D,O,P,L]),{batchSize:u,dataFormat:a,inDepth:c,inHeight:d,inWidth:h,inChannels:p,outDepth:D,outHeight:O,outWidth:P,outChannels:L,padInfo:R,strideDepth:x,strideHeight:w,strideWidth:k,filterDepth:m,filterHeight:g,filterWidth:v,effectiveFilterDepth:S,effectiveFilterHeight:N,effectiveFilterWidth:T,dilationDepth:E,dilationHeight:C,dilationWidth:I,inShape:e,outShape:f,filterShape:t}}function lX(e,t,n,r){void 0===r&&(r=1);var i=dX(t,r);return Math.floor((e[0]*(n-1)-n+i)/2)}function uX(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}function cX(e){return"number"==typeof e?[e,e,e]:e}function dX(e,t){return t<=1?e:e+(e-1)*(t-1)}function hX(e,t){if(!t)return e;switch(t){case"round":return Math.round(e);case"ceil":return Math.ceil(e);case"floor":return Math.floor(e);default:throw new Error("Unknown roundingMode "+t)}}function pX(e){var t=uX(e),n=t[0],r=t[1],i=t[2];return 1===n&&1===r&&1===i}function fX(e,t){return pX(e)||pX(t)}function mX(e){if("NHWC"===e)return"channelsLast";if("NCHW"===e)return"channelsFirst";throw new Error("Unknown dataFormat "+e)}function gX(e,t,n){if("complex64"===t){if("complex64"===e.dtype)return e.clone();var r=MK(e.shape),i=e.toFloat(),o=n.complex(i,r);return r.dispose(),i.dispose(),o}if(!iH(e.dtype,t))return PH.make(e.shape,{dataId:e.dataId},t);if("complex64"===e.dtype){var a=n.real(e);return o=a.cast(t),a.dispose(),o}if("int32"===t)return n.int(e);if("bool"===t){var s=NK(0,e.dtype);return o=n.notEqual(e,s),s.dispose(),o}throw new Error("Error in Cast: failed to cast "+e.dtype+" to "+t)}function vX(e,t){return PH.make(t,{dataId:e.dataId},e.dtype)}function yX(e,t,n){var r=(t-e)/(n-1),i=yH(n,"float32");i[0]=e;for(var o=1;o<i.length;o++)i[o]=i[o-1]+r;return TK(i,"float32")}var bX=Object.freeze({castTensor:gX,reshapeTensor:vX,linspaceImpl:yX,upcastType:$H,axesAreInnerMostDims:hK,combineLocations:pK,computeOutAndReduceShapes:fK,expandShapeToKeepDim:mK,assertAxesAreInnerMostDims:gK,getAxesPermutation:vK,getUndoAxesPermutation:yK,getInnerMostAxes:bK,getBroadcastDims:tX,getReductionAxes:nX,assertAndGetBroadcastShape:rX,assertParamsConsistent:xK,computeOutShape:wK,computePool2DInfo:iX,computePool3DInfo:oX,computeConv2DInfo:aX,computeConv3DInfo:sX,computeDefaultPad:lX,tupleValuesAreOne:pX,eitherStridesOrDilationsAreOne:fX,convertConv2DDataFormat:mX});function xX(e,t){if(e.length!==t.length)throw new Error("Cannot merge real and imag arrays of different lengths. real:"+e.length+", imag: "+t.length+".");for(var n=new Float32Array(2*e.length),r=0;r<n.length;r+=2)n[r]=e[r/2],n[r+1]=t[r/2];return n}function wX(e,t){return{real:e[2*t],imag:e[2*t+1]}}function kX(e,t,n,r){e[2*r]=t,e[2*r+1]=n}function _X(e,t,n){var r=(n?2:-2)*Math.PI*(e/t);return{real:Math.cos(r),imag:Math.sin(r)}}function EX(e,t,n,r,i){for(var o=Array.from(t).map((function(e,t){return{score:e,boxIndex:t}})).filter((function(e){return e.score>i})).sort((function(e,t){return t.score-e.score})),a=[],s=0;s<o.length;s++){var l=o[s],u=l.score,c=l.boxIndex;if(u<i)break;for(var d=!1,h=a.length-1;h>=0;--h)if(CX(e,c,a[h])>=r){d=!0;break}if(!d&&(a.push(c),a.length>=n))break}return TK(a,"int32")}function CX(e,t,n){var r=e.subarray(4*t,4*t+4),i=e.subarray(4*n,4*n+4),o=Math.min(r[0],r[2]),a=Math.min(r[1],r[3]),s=Math.max(r[0],r[2]),l=Math.max(r[1],r[3]),u=Math.min(i[0],i[2]),c=Math.min(i[1],i[3]),d=Math.max(i[0],i[2]),h=Math.max(i[1],i[3]),p=(s-o)*(l-a),f=(d-u)*(h-c);if(p<=0||f<=0)return 0;var m=Math.max(o,u),g=Math.max(a,c),v=Math.min(s,d),y=Math.min(l,h),b=Math.max(v-m,0)*Math.max(y-g,0);return b/(p+f-b)}function IX(e,t,n){var r=new Array(e.rank).fill(0),i=e.shape.slice();return t.map((function(t){i[n]=t;var o=e.slice(r,i);return r[n]+=t,o}))}function SX(e,t){for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[r]*t[r];var i=aY(n,e.dtype);for(r=0;r<i.values.length;++r){for(var o=i.indexToLoc(r),a=new Array(e.rank),s=0;s<a.length;s++)a[s]=o[s]%e.shape[s];var l=e.locToIndex(a);i.values[r]=e.values[l]}return i.toTensor()}function NX(e,t,n,r,i){for(var o=t[t.length-1],a=[e.length/o,o],s=a[0],l=a[1],u=eH(n,s*r),c=eH("int32",s*r),d=0;d<s;d++){for(var h=d*l,p=e.subarray(h,h+l),f=[],m=0;m<p.length;m++)f.push({value:p[m],index:m});f.sort((function(e,t){return t.value-e.value}));var g=d*r,v=u.subarray(g,g+r),y=c.subarray(g,g+r);for(m=0;m<r;m++)v[m]=f[m].value,y[m]=f[m].index}var b=t.slice();return b[b.length-1]=r,[IK(u,b,n),IK(c,b,"int32")]}function TX(e,t){for(var n=[],r=0;r<t.length;r++)t[r]&&n.push(r);var i=aY(e,"int32"),o=aY([n.length,e.length],"int32");for(r=0;r<n.length;r++){var a=i.indexToLoc(n[r]),s=r*e.length;o.values.set(a,s)}return o.toTensor()}var AX=function(e,t){this.outputShape=[],this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("float v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        float result = "+r+";\n        setOutput(result);\n      }\n    "},RX=function(e,t){this.outputShape=[],this.usesPackedTextures=!0,this.outputShape=e,this.variableNames=t.map((function(e,t){return"T"+t}));var n=[];this.variableNames.forEach((function(e){n.push("vec4 v"+e+" = get"+e+"AtOutCoords();")}));var r=this.variableNames.map((function(e){return"v"+e})).join(" + ");this.userCode="\n      void main() {\n        "+n.join("\n        ")+"\n\n        vec4 result = "+r+";\n        setOutput(result);\n      }\n    "},DX=function(e,t,n){this.variableNames=["A"];var r=e.windowSize,i=e.batchSize,o=e.inSize,a=Math.ceil(o/r);n||this.variableNames.push("bestIndicesA"),this.outputShape=[i,a];var s="max"===t?">":"<",l=n?"inOffset + i;":"round(getBestIndicesA(batch, inOffset + i));";this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+r+";\n\n        int bestIndex = inOffset;\n        float bestValue = getA(batch, bestIndex);\n\n        for (int i = 0; i < "+r+"; i++) {\n          int inIdx = "+l+";\n          float candidate = getA(batch, inIdx);\n          if (candidate "+s+" bestValue) {\n            bestValue = candidate;\n            bestIndex = inIdx;\n          }\n        }\n        setOutput(float(bestIndex));\n      }\n    "};function OX(e,t){return["x","y","z","w","u","v"].slice(0,t).map((function(t){return e+"."+t}))}function PX(e,t){return 1===t?[e]:OX(e,t)}function LX(){var e,t,n,r,i,o,a,s,l,u;return 2===PW().getNumber("WEBGL_VERSION")?(e="#version 300 es",t="in",n="out",r="in",i="texture",o="outputColor",a="out vec4 outputColor;",s="\n      bool isnan_custom(float val) {\n        return (val > 0.0 || val < 0.0) ? false : val != 0.0;\n      }\n\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan_custom(val.x),\n          isnan_custom(val.y), isnan_custom(val.z), isnan_custom(val.w));\n      }\n\n      #define isnan(value) isnan_custom(value)\n    ",l="",u="\n      #define round(value) newRound(value)\n      int newRound(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 newRound(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "):(e="",t="attribute",n="varying",r="varying",i="texture2D",o="gl_FragColor",a="",s="\n      #define isnan(value) isnan_custom(value)\n      bool isnan_custom(float val) {\n        return (val > 0. || val < 1. || val == 0.) ? false : true;\n      }\n      bvec4 isnan_custom(vec4 val) {\n        return bvec4(isnan(val.x), isnan(val.y), isnan(val.z), isnan(val.w));\n      }\n    ",l="\n      uniform float INFINITY;\n\n      bool isinf(float val) {\n        return abs(val) == INFINITY;\n      }\n      bvec4 isinf(vec4 val) {\n        return equal(abs(val), vec4(INFINITY));\n      }\n    ",u="\n      int round(float value) {\n        return int(floor(value + 0.5));\n      }\n\n      ivec4 round(vec4 value) {\n        return ivec4(floor(value + vec4(0.5)));\n      }\n    "),{version:e,attribute:t,varyingVs:n,varyingFs:r,texture2D:i,output:o,defineOutput:a,defineSpecialNaN:s,defineSpecialInf:l,defineRound:u}}function MX(e,t,n){void 0===n&&(n="index");var r=fH(t);return r.map((function(t,i){return"int "+e[i]+" = "+n+" / "+t+"; "+(i===r.length-1?"int "+e[i+1]+" = "+n+" - "+e[i]+" * "+t:"index -= "+e[i]+" * "+t)+";"})).join("")}function FX(e){var t=fH(e).map((function(e){return e.toString()}));return"\n  int getFlatIndex(ivec3 coords) {\n    return coords.x * "+t[0]+" + coords.y * "+t[1]+" + coords.z;\n  }\n"}var jX="\n  const float FLOAT_MAX = 1.70141184e38;\n  const float FLOAT_MIN = 1.17549435e-38;\n\n  lowp vec4 encode_float(highp float v) {\n    if (isnan(v)) {\n      return vec4(255, 255, 255, 255);\n    }\n\n    highp float av = abs(v);\n\n    if(av < FLOAT_MIN) {\n      return vec4(0.0, 0.0, 0.0, 0.0);\n    } else if(v > FLOAT_MAX) {\n      return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;\n    } else if(v < -FLOAT_MAX) {\n      return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;\n    }\n\n    highp vec4 c = vec4(0,0,0,0);\n\n    highp float e = floor(log2(av));\n    highp float m = exp2(fract(log2(av))) - 1.0;\n\n    c[2] = floor(128.0 * m);\n    m -= c[2] / 128.0;\n    c[1] = floor(32768.0 * m);\n    m -= c[1] / 32768.0;\n    c[0] = floor(8388608.0 * m);\n\n    highp float ebias = e + 127.0;\n    c[3] = floor(ebias / 2.0);\n    ebias -= c[3] * 2.0;\n    c[2] += floor(ebias) * 128.0;\n\n    c[3] += 128.0 * step(0.0, -v);\n\n    return c / 255.0;\n  }\n";function BX(e,t,n,r){var i=[];e.forEach((function(e){var t=qW(e.shapeInfo.logicalShape);e.shapeInfo.isUniform?i.push("uniform float "+e.name+(t>1?"["+t+"]":"")+";"):(i.push("uniform sampler2D "+e.name+";"),i.push("uniform int offset"+e.name+";"))}));var o,a,s=i.join("\n"),l=e.map((function(e){return function(e,t,n){void 0===n&&(n=!1);var r="";r+=n?zX(e):VX(e);var i=e.shapeInfo.logicalShape,o=t.logicalShape;return i.length<=o.length&&(r+=n?function(e,t){var n,r,i=e.name,o=i.charAt(0).toUpperCase()+i.slice(1),a="get"+o+"AtOutCoords",s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length,u=tX(e.shapeInfo.logicalShape,t.logicalShape),c=KX(l),d=l-s,h=["x","y","z","w","u","v"];n=0===s?"":l<2&&u.length>=1?"coords = 0;":u.map((function(e){return"coords."+h[e+d]+" = 0;"})).join("\n"),r=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+h[t+d]})).join(", ");var p="return outputValue;",f=1===qW(e.shapeInfo.logicalShape),m=1===qW(t.logicalShape);if(1!==s||f||m){if(f&&!m)p=1===l?"\n        return vec4(outputValue.x, outputValue.x, 0., 0.);\n      ":"\n        return vec4(outputValue.x);\n      ";else if(u.length){var g=s-2,v=s-1;u.indexOf(g)>-1&&u.indexOf(v)>-1?p="return vec4(outputValue.x);":u.indexOf(g)>-1?p="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":u.indexOf(v)>-1&&(p="return vec4(outputValue.xx, outputValue.zz);")}}else p="\n      return vec4(outputValue.xy, outputValue.xy);\n    ";return"\n    vec4 "+a+"() {\n      "+c+" coords = getOutputCoords();\n      "+n+"\n      vec4 outputValue = get"+o+"("+r+");\n      "+p+"\n    }\n  "}(e,t):function(e,t){var n=e.name,r=n.charAt(0).toUpperCase()+n.slice(1),i="get"+r+"AtOutCoords",o=t.texShape,a=e.shapeInfo.texShape,s=e.shapeInfo.logicalShape.length,l=t.logicalShape.length;if(!e.shapeInfo.isUniform&&s===l&&null==e.shapeInfo.flatOffset&&WW(a,o))return"\n      float "+i+"() {\n        return sampleTexture("+n+", resultUV);\n      }\n    ";var u,c,d=KX(l),h=tX(e.shapeInfo.logicalShape,t.logicalShape),p=l-s,f=["x","y","z","w","u","v"];return u=0===s?"":l<2&&h.length>=1?"coords = 0;":h.map((function(e){return"coords."+f[e+p]+" = 0;"})).join("\n"),c=l<2&&s>0?"coords":e.shapeInfo.logicalShape.map((function(e,t){return"coords."+f[t+p]})).join(", "),"\n    float "+i+"() {\n      "+d+" coords = getOutputCoords();\n      "+u+"\n      return get"+r+"("+c+");\n    }\n  "}(e,t)),r}(e,t,r)})).join("\n"),u=t.texShape,c=LX(),d=function(e){return"\n    float sampleTexture(sampler2D textureSampler, vec2 uv) {\n      return "+e.texture2D+"(textureSampler, uv).r;\n    }\n  "}(c),h=function(e){return e.version+"\n    precision highp float;\n    precision highp int;\n    precision highp sampler2D;\n    "+e.varyingFs+" vec2 resultUV;\n    "+e.defineOutput+"\n    const vec2 halfCR = vec2(0.5, 0.5);\n\n    struct ivec5\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n    };\n\n    struct ivec6\n    {\n      int x;\n      int y;\n      int z;\n      int w;\n      int u;\n      int v;\n    };\n\n    uniform float NAN;\n    "+e.defineSpecialNaN+"\n    "+e.defineSpecialInf+"\n    "+e.defineRound+"\n\n    int imod(int x, int y) {\n      return x - y * (x / y);\n    }\n\n    int idiv(int a, int b, float sign) {\n      int res = a / b;\n      int mod = imod(a, b);\n      if (sign < 0. && mod != 0) {\n        res -= 1;\n      }\n      return res;\n    }\n\n    //Based on the work of Dave Hoskins\n    //https://www.shadertoy.com/view/4djSRW\n    #define HASHSCALE1 443.8975\n    float random(float seed){\n      vec2 p = resultUV * seed;\n      vec3 p3  = fract(vec3(p.xyx) * HASHSCALE1);\n      p3 += dot(p3, p3.yzx + 19.19);\n      return fract((p3.x + p3.y) * p3.z);\n    }\n\n    "+UX+"\n    "+$X+"\n    "+qX+"\n  "}(c);return t.isPacked?(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];return 1===n[0]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.x * "+n[1]+".0);\n      }\n    ":1===n[1]?"\n      int getOutputCoords() {\n        return 2 * int(resultUV.y * "+n[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      return 2 * (resTexRC.x * "+n[1]+" + resTexRC.y);\n    }\n  "}(0,t);case 2:return function(e,t){var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)];if(WW(e,t))return"\n      ivec2 getOutputCoords() {\n        return 2 * ivec2(resultUV.yx * vec2("+n[0]+", "+n[1]+"));\n      }\n    ";var r=Math.ceil(e[1]/2);return"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=e,r=t,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],a=(o=Math.ceil(n[2]/2))*Math.ceil(n[1]/2),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+i[0]+", "+i[1]+"));\n      int index = resTexRC.x * "+i[1]+" + resTexRC.y;\n\n      int b = index / "+a+";\n      index -= b * "+a+";\n\n      int r = 2 * (index / "+o+");\n      int c = imod(index, "+o+") * 2;\n\n      return ivec3(b, r, c);\n    }\n  ";default:return function(e,t){for(var n=[Math.ceil(t[0]/2),Math.ceil(t[1]/2)],r=Math.ceil(e[e.length-1]/2),i=r*Math.ceil(e[e.length-2]/2),o=i,a="",s="b, r, c",l=2;l<e.length-1;l++)a="\n      int b"+l+" = index / "+(o*=e[e.length-l-1])+";\n      index -= b"+l+" * "+o+";\n    "+a,s="b"+l+", "+s;return"\n    ivec"+e.length+" getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n\n      "+a+"\n\n      int b = index / "+i+";\n      index -= b * "+i+";\n\n      int r = 2 * (index / "+r+");\n      int c = imod(index, "+r+") * 2;\n\n      return ivec"+e.length+"("+s+");\n    }\n  "}(e,t)}var n,r,i,o,a}(t.logicalShape,u),a=function(e){return"\n    void setOutput(vec4 val) {\n      "+e.output+" = val;\n    }\n  "}(c)):(o=function(e,t){switch(e.length){case 0:return"\n    int getOutputCoords() {\n      return 0;\n    }\n  ";case 1:return function(e,t){return 1===t[0]?"\n      int getOutputCoords() {\n        return int(resultUV.x * "+t[1]+".0);\n      }\n    ":1===t[1]?"\n      int getOutputCoords() {\n        return int(resultUV.y * "+t[0]+".0);\n      }\n    ":"\n    int getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      return resTexRC.x * "+t[1]+" + resTexRC.y;\n    }\n  "}(0,t);case 2:return function(e,t){return WW(e,t)?"\n      ivec2 getOutputCoords() {\n        return ivec2(resultUV.yx * vec2("+t[0]+", "+t[1]+"));\n      }\n    ":1===e[1]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(index, 0);\n      }\n    ":1===e[0]?"\n      ivec2 getOutputCoords() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n                               vec2("+t[0]+", "+t[1]+"));\n        int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n        return ivec2(0, index);\n      }\n    ":"\n    ivec2 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      int r = index / "+e[1]+";\n      int c = index - r * "+e[1]+";\n      return ivec2(r, c);\n    }\n  "}(e,t);case 3:return n=t,r=MX(["r","c","d"],e),"\n    ivec3 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n                             vec2("+n[0]+", "+n[1]+"));\n      int index = resTexRC.x * "+n[1]+" + resTexRC.y;\n      "+r+"\n      return ivec3(r, c, d);\n    }\n  ";case 4:return function(e,t){var n=MX(["r","c","d","d2"],e);return"\n    ivec4 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n      "+n+"\n      return ivec4(r, c, d, d2);\n    }\n  "}(e,t);case 5:return function(e,t){var n=MX(["r","c","d","d2","d3"],e);return"\n    ivec5 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx * vec2("+t[0]+",\n                             "+t[1]+"));\n\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec5 outShape = ivec5(r, c, d, d2, d3);\n      return outShape;\n    }\n  "}(e,t);case 6:return function(e,t){var n=MX(["r","c","d","d2","d3","d4"],e);return"\n    ivec6 getOutputCoords() {\n      ivec2 resTexRC = ivec2(resultUV.yx *\n        vec2("+t[0]+", "+t[1]+"));\n      int index = resTexRC.x * "+t[1]+" + resTexRC.y;\n\n      "+n+"\n\n      ivec6 result = ivec6(r, c, d, d2, d3, d4);\n      return result;\n    }\n  "}(e,t);default:throw new Error(e.length+"-D output sampling is not yet supported")}var n,r}(t.logicalShape,u),a=function(e){return"\n    void setOutput(float val) {\n      "+e.output+" = vec4(val, 0, 0, 0);\n    }\n  "}(c)),r&&(h+=WX),[h,d,a,s,o,l,n].join("\n")}function VX(e){var t=e.shapeInfo.logicalShape;switch(t.length){case 0:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"float "+n+"() {return "+t+";}";var r=e.shapeInfo.texShape,i=r[0],o=r[1];if(1===i&&1===o)return"\n      float "+n+"() {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var a=e.shapeInfo.texShape;return"\n    float "+n+"() {\n      vec2 uv = uvFromFlat("+a[0]+", "+a[1]+", "+HX(t)+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1);if(e.shapeInfo.isUniform)return"\n      float "+n+"(int index) {\n        "+GX(e)+"\n      }\n    ";var r=e.shapeInfo.texShape,i=r[0],o=r[1];if(1===o&&1===i)return"\n      float "+n+"(int index) {\n        return sampleTexture("+t+", halfCR);\n      }\n    ";var a=HX(t);return 1===o?"\n      float "+n+"(int index) {\n        vec2 uv = vec2(0.5, (float(index + "+a+") + 0.5) / "+i+".0);\n        return sampleTexture("+t+", uv);\n      }\n    ":1===i?"\n      float "+n+"(int index) {\n        vec2 uv = vec2((float(index + "+a+") + 0.5) / "+o+".0, 0.5);\n        return sampleTexture("+t+", uv);\n      }\n    ":"\n    float "+n+"(int index) {\n      vec2 uv = uvFromFlat("+i+", "+o+", index + "+a+");\n      return sampleTexture("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape;if(null!=i&&WW(t,i)){var o=i[0];return"\n    float "+r+"(int row, int col) {\n      vec2 uv = (vec2(col, row) + halfCR) / vec2("+i[1]+".0, "+o+".0);\n      return sampleTexture("+n+", uv);\n    }\n  "}var a=ZW(t),s=a.newShape,l=a.keptDims,u=s;if(u.length<t.length)return"\n      "+VX(YX(e,u))+"\n      float "+r+"(int row, int col) {\n        return "+r+"("+XX(["row","col"],l)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col) {\n        int index = round(dot(vec2(row, col), vec2("+t[1]+", 1)));\n        "+GX(e)+"\n      }\n    ";var c=i[0],d=i[1],h=HX(n);return 1===d?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2(0.5, (index + 0.5) / "+c+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":1===c?"\n    float "+r+"(int row, int col) {\n      float index = dot(vec3(row, col, "+h+"), vec3("+t[1]+", 1, 1));\n      vec2 uv = vec2((index + 0.5) / "+d+".0, 0.5);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n  float "+r+"(int row, int col) {\n    // Explicitly use integer operations as dot() only works on floats.\n    int index = row * "+t[1]+" + col + "+h+";\n    vec2 uv = uvFromFlat("+c+", "+d+", index);\n    return sampleTexture("+n+", uv);\n  }\n"}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[1]*t[2],o=t[2],a=ZW(t),s=a.newShape,l=a.keptDims,u=s;if(u.length<t.length)return"\n        "+VX(YX(e,u))+"\n        float "+r+"(int row, int col, int depth) {\n          return "+r+"("+XX(["row","col","depth"],l)+");\n        }\n      ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth) {\n        int index = round(dot(vec3(row, col, depth),\n                          vec3("+i+", "+o+", 1)));\n        "+GX(e)+"\n      }\n    ";var c=e.shapeInfo.texShape,d=c[0],h=c[1],p=e.shapeInfo.flatOffset;return h===i&&null==p?"\n        float "+r+"(int row, int col, int depth) {\n          float texR = float(row);\n          float texC = dot(vec2(col, depth), vec2("+o+", 1));\n          vec2 uv = (vec2(texC, texR) + halfCR) /\n                     vec2("+h+".0, "+d+".0);\n          return sampleTexture("+n+", uv);\n        }\n      ":h===o&&null==p?"\n    float "+r+"(int row, int col, int depth) {\n      float texR = dot(vec2(row, col), vec2("+t[1]+", 1));\n      float texC = float(depth);\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+h+".0, "+d+".0);\n      return sampleTexture("+n+", uv);\n    }\n  ":"\n      float "+r+"(int row, int col, int depth) {\n        // Explicitly use integer operations as dot() only works on floats.\n        int index = row * "+i+" + col * "+o+" + depth + "+HX(n)+";\n        vec2 uv = uvFromFlat("+d+", "+h+", index);\n        return sampleTexture("+n+", uv);\n      }\n  "}(e);case 4:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[3],o=t[2]*i,a=t[1]*o,s=ZW(t),l=s.newShape,u=s.keptDims;if(l.length<t.length)return"\n      "+VX(YX(e,l))+"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        return "+r+"("+XX(["row","col","depth","depth2"],u)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        int index = round(dot(vec4(row, col, depth, depth2),\n                          vec4("+a+", "+o+", "+i+", 1)));\n        "+GX(e)+"\n      }\n    ";var c=e.shapeInfo.flatOffset,d=e.shapeInfo.texShape,h=d[0],p=d[1];return p===a&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = float(row);\n        float texC =\n            dot(vec3(col, depth, depth2),\n                vec3("+o+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":p===i&&null==c?"\n      float "+r+"(int row, int col, int depth, int depth2) {\n        float texR = dot(vec3(row, col, depth),\n                         vec3("+t[1]*t[2]+", "+t[2]+", 1));\n        float texC = float(depth2);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+p+".0, "+h+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+a+" + col * "+o+" +\n          depth * "+i+" + depth2;\n      vec2 uv = uvFromFlat("+h+", "+p+", index + "+HX(n)+");\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 5:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=t[4],o=t[3]*i,a=t[2]*o,s=t[1]*a,l=ZW(t),u=l.newShape,c=l.keptDims;if(u.length<t.length)return"\n      "+VX(YX(e,u))+"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        return "+r+"("+XX(["row","col","depth","depth2","depth3"],c)+");\n      }\n    ";if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float index = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+s+", "+a+", "+o+", "+i+")) +\n          depth3;\n        "+GX(e)+"\n      }\n    ";var d=e.shapeInfo.flatOffset,h=e.shapeInfo.texShape,p=h[0],f=h[1];return f===s&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n                         vec4("+a+", "+o+", "+i+", 1));\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+f+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":f===i&&null==d?"\n      float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n        float texR = dot(\n          vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]+",\n               "+t[2]*t[3]+", "+t[3]+", 1));\n        int texC = depth3;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+f+".0, "+p+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth, int depth2, int depth3) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+s+" + col * "+a+" + depth * "+o+" +\n          depth2 * "+i+" + depth3 + "+HX(n)+";\n      vec2 uv = uvFromFlat("+p+", "+f+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);case 6:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=ZW(t),o=i.newShape,a=i.keptDims;if(o.length<t.length)return"\n      "+VX(YX(e,o))+"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        return "+r+"("+XX(["row","col","depth","depth2","depth3","depth4"],a)+");\n      }\n    ";var s=t[5],l=t[4]*s,u=t[3]*l,c=t[2]*u,d=t[1]*c;if(e.shapeInfo.isUniform)return"\n      float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n        int index = round(dot(\n          vec4(row, col, depth, depth2),\n          vec4("+d+", "+c+", "+u+", "+l+")) +\n          dot(\n            vec2(depth3, depth4),\n            vec2("+s+", 1)));\n        "+GX(e)+"\n      }\n    ";var h=e.shapeInfo.flatOffset,p=e.shapeInfo.texShape,f=p[0],m=p[1];return m===d&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        int texR = row;\n        float texC = dot(vec4(col, depth, depth2, depth3),\n          vec4("+c+", "+u+", "+l+", "+s+")) +\n               float(depth4);\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                   vec2("+m+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":m===s&&null==h?"\n      float "+r+"(int row, int col, int depth,\n                    int depth2, int depth3, int depth4) {\n        float texR = dot(vec4(row, col, depth, depth2),\n          vec4("+t[1]*t[2]*t[3]*t[4]+",\n               "+t[2]*t[3]*t[4]+",\n               "+t[3]*t[4]+",\n               "+t[4]+")) + float(depth3);\n        int texC = depth4;\n        vec2 uv = (vec2(texC, texR) + halfCR) /\n                  vec2("+m+".0, "+f+".0);\n        return sampleTexture("+n+", uv);\n      }\n    ":"\n    float "+r+"(int row, int col, int depth,\n                  int depth2, int depth3, int depth4) {\n      // Explicitly use integer operations as dot() only works on floats.\n      int index = row * "+d+" + col * "+c+" + depth * "+u+" +\n          depth2 * "+l+" + depth3 * "+s+" + depth4 + "+HX(n)+";\n      vec2 uv = uvFromFlat("+f+", "+m+", index);\n      return sampleTexture("+n+", uv);\n    }\n  "}(e);default:throw new Error(t.length+"-D input sampling is not yet supported")}}function zX(e){var t;switch(e.shapeInfo.logicalShape.length){case 0:return"\n    vec4 get"+(t=e.name).charAt(0).toUpperCase()+t.slice(1)+"() {\n      return "+LX().texture2D+"("+t+", halfCR);\n    }\n  ";case 1:return function(e){var t=e.name,n="get"+t.charAt(0).toUpperCase()+t.slice(1),r=e.shapeInfo.texShape,i=[Math.ceil(r[0]/2),Math.ceil(r[1]/2)],o=LX();return"\n    vec4 "+n+"(int index) {\n      vec2 uv = packedUVfrom1D(\n        "+i[0]+", "+i[1]+", index);\n      return "+o.texture2D+"("+t+", uv);\n    }\n  "}(e);case 2:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=i[0],a=i[1],s=LX();if(null!=i&&WW(t,i))return"\n      vec4 "+r+"(int row, int col) {\n        vec2 uv = (vec2(col, row) + halfCR) / vec2("+a+".0, "+o+".0);\n\n        return "+s.texture2D+"("+n+", uv);\n      }\n    ";var l=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];return"\n    vec4 "+r+"(int row, int col) {\n      vec2 uv = packedUVfrom2D("+Math.ceil(t[1]/2)+", "+l[0]+", "+l[1]+", row, col);\n      return "+s.texture2D+"("+n+", uv);\n    }\n  "}(e);case 3:return function(e){var t=e.shapeInfo.logicalShape,n=e.name,r="get"+n.charAt(0).toUpperCase()+n.slice(1),i=e.shapeInfo.texShape,o=[Math.ceil(i[0]/2),Math.ceil(i[1]/2)];if(1===t[0])return"\n        "+zX(YX(e,t.slice(1)))+"\n        vec4 "+r+"(int b, int row, int col) {\n          return "+r+"("+XX(["b","row","col"],[1,2])+");\n        }\n      ";var a=o[0],s=o[1],l=Math.ceil(t[2]/2);return"\n    vec4 "+r+"(int b, int row, int col) {\n      vec2 uv = packedUVfrom3D(\n        "+a+", "+s+", "+l*Math.ceil(t[1]/2)+", "+l+", b, row, col);\n      return "+LX().texture2D+"("+n+", uv);\n    }\n  "}(e);default:return function(e){for(var t=e.shapeInfo.logicalShape,n=t.length,r=e.name,i="get"+r.charAt(0).toUpperCase()+r.slice(1),o=e.shapeInfo.texShape,a=[Math.ceil(o[0]/2),Math.ceil(o[1]/2)],s=a[0],l=a[1],u=Math.ceil(t[n-1]/2),c=u*Math.ceil(t[n-2]/2),d="int b, int row, int col",h="b * "+c+" + (row / 2) * "+u+" + (col / 2)",p=2;p<n-1;p++)d="int b"+p+", "+d,h="b"+p+" * "+(c*=t[n-p-1])+" + "+h;return"\n    vec4 "+i+"("+d+") {\n      int index = "+h+";\n      int texR = index / "+l+";\n      int texC = index - texR * "+l+";\n      vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+l+", "+s+");\n      return "+LX().texture2D+"("+r+", uv);\n    }\n  "}(e)}}var UX="\nvec2 uvFromFlat(int texNumR, int texNumC, int index) {\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\nvec2 packedUVfrom1D(int texNumR, int texNumC, int index) {\n  int texelIndex = index / 2;\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",$X="\nvec2 packedUVfrom2D(int texelsInLogicalRow, int texNumR,\n  int texNumC, int row, int col) {\n  int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = texelIndex / texNumC;\n  int texC = texelIndex - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",qX="\nvec2 packedUVfrom3D(int texNumR, int texNumC,\n    int texelsInBatch, int texelsInLogicalRow, int b,\n    int row, int col) {\n  int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);\n  int texR = index / texNumC;\n  int texC = index - texR * texNumC;\n  return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);\n}\n",WX="\n  float getChannel(vec4 frag, vec2 innerDims) {\n    vec2 modCoord = mod(innerDims, 2.);\n    return modCoord.x == 0. ?\n      (modCoord.y == 0. ? frag.r : frag.g) :\n      (modCoord.y == 0. ? frag.b : frag.a);\n  }\n  float getChannel(vec4 frag, int dim) {\n    float modCoord = mod(float(dim), 2.);\n    return modCoord == 0. ? frag.r : frag.g;\n  }\n";function HX(e){return"offset"+e}function GX(e){var t=e.name,n=qW(e.shapeInfo.logicalShape);return n<2?"return "+t+";":"\n    for (int i = 0; i < "+n+"; i++) {\n      if (i == index) {\n        return "+t+"[i];\n      }\n    }\n  "}function KX(e){if(e<=1)return"int";if(2===e)return"ivec2";if(3===e)return"ivec3";if(4===e)return"ivec4";if(5===e)return"ivec5";if(6===e)return"ivec6";throw Error("GPU for rank "+e+" is not yet supported")}function YX(e,t){var n=JSON.parse(JSON.stringify(e));return n.shapeInfo.logicalShape=t,n}function XX(e,t){return t.map((function(t){return e[t]})).join(", ")}var QX=function(e,t,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,VW(e.length>2,(function(){return"Packed arg"+(n.charAt(0).toUpperCase()+n.slice(1))+" supports only inputs with rank above 2."}));var i=e[e.length-1],o=Math.ceil(i/t);this.outputShape=e.slice(0,-1),o>1&&this.outputShape.push(o),r||this.variableNames.push("bestIndicesA");var a,s,l=this.outputShape,u=l.length,c=KX(u),d=PX("coords",u);if(1===o){var h=KX(s=u+1);a="\n        "+h+" sourceLocR = "+h+"("+d.join()+", 0);\n        ++"+d[u-1]+";\n        "+h+" sourceLocG = "+h+"("+d.join()+", 0);\n        ++"+d[u-2]+";\n        "+h+" sourceLocA = "+h+"("+d.join()+", 0);\n        --"+d[u-1]+";\n        "+h+" sourceLocB = "+h+"("+d.join()+", 0);\n        --"+d[u-2]+";"}else s=u,a="\n        "+c+" sourceLocR = coords;\n        ++"+d[u-1]+";\n        "+c+" sourceLocG = coords;\n        ++"+d[u-2]+";\n        "+c+" sourceLocA = coords;\n        --"+d[u-1]+";\n        "+c+" sourceLocB = coords;\n        --"+d[u-2]+";";var p=["x","y","z","w","u","v"].slice(0,s),f="."+p[s-1],m=p.map((function(e){return"int "+e})),g=PX("sourceLocR",s-1).concat("inIdx.r"),v=PX("sourceLocG",s-1).concat("inIdx.g"),y=PX("sourceLocB",s-1).concat("inIdx.b"),b=PX("sourceLocA",s-1).concat("inIdx.a"),x="max"===n?"greaterThan":"lessThan",w=r?"":"\n          inIdx = round(vec4(getBestIndicesAChannel("+g.join()+"),\n                             getBestIndicesAChannel("+v.join()+"),\n                             getBestIndicesAChannel("+y.join()+"),\n                             getBestIndicesAChannel("+b.join()+")));",k="vec4(\n            getAChannel("+g.join()+"),\n            hasNextCol ? getAChannel("+v.join()+") : 0.,\n            hasNextRow ? getAChannel("+y.join()+") : 0.,\n            hasNextRow && hasNextCol ? getAChannel("+b.join()+") : 0.)",_=r?"":"\n      float getBestIndicesAChannel("+m.join()+") {\n        return getChannel(getBestIndicesA("+p.join()+"),\n                                          vec2("+p.slice(-2).join()+"));\n      }";this.userCode="\n      float getAChannel("+m.join()+") {\n        return getChannel(getA("+p.join()+"),\n                               vec2("+p.slice(-2).join()+"));\n      }\n      "+_+"\n      void main() {\n        "+c+" coords = getOutputCoords();\n        bool hasNextCol = "+d[u-1]+" < "+(l[u-1]-1)+";\n        bool hasNextRow = "+d[u-2]+" < "+(l[u-2]-1)+";\n        "+a+"\n        ivec4 srcIdx = ivec4(sourceLocR"+f+", sourceLocG"+f+",\n          sourceLocB"+f+", sourceLocA"+f+") * "+t+";\n        ivec4 inIdx = srcIdx;\n        vec4 bestIndex = vec4(inIdx);\n        vec4 bestValue = "+k+";\n\n        for (int i = 0; i < "+t+"; i++) {\n          inIdx = srcIdx;\n          "+w+"\n          vec4 candidate = "+k+";\n          bvec4 nan = isnan(candidate);\n          bvec4 replace = bvec4(\n            vec4("+x+"(candidate, bestValue)) * (vec4(1.0) - vec4(nan)));\n\n          bestValue = vec4(replace.x  ? candidate.x : bestValue.x,\n                           replace.y  ? candidate.y : bestValue.y,\n                           replace.z  ? candidate.z : bestValue.z,\n                           replace.w  ? candidate.w : bestValue.w);\n          bestIndex = mix(bestIndex, vec4(inIdx), vec4(replace));\n          srcIdx++;\n        }\n        setOutput(bestIndex);\n      }\n    "},JX=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterHeight,l=e.effectiveFilterWidth,u=s-1-e.padInfo.top,c=l-1-e.padInfo.left,d=1/(t*n);this.userCode="\n      const ivec2 pads = ivec2("+u+", "+c+");\n      const float avgMultiplier = float("+d+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+s+";\n            wR += "+o+") {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+l+";\n            wC+= "+a+") {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n\n            dotProd += dyValue * avgMultiplier;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},ZX=function(e){this.variableNames=["dy"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=c-1-e.padInfo.front,f=d-1-e.padInfo.top,m=h-1-e.padInfo.left,g=1/(t*n*r);this.userCode="\n      const ivec3 pads = ivec3("+p+", "+f+", "+m+");\n      const float avgMultiplier = float("+g+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, d) with pos mask(:, :, :, ch) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          float dyD = float(dyDCorner + wD) / "+i+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+d+";\n              wR += "+l+") {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+h+";\n                wC += "+u+") {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n\n              dotProd += dyValue * avgMultiplier;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},eQ=function(e,t,n,r,i,o){this.outputShape=[],this.variableNames=["x","mean","variance"],rX(e,t),rX(e,n);var a="0.0";null!=r&&(rX(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="1.0";null!=i&&(rX(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        float x = getXAtOutCoords();\n        float mean = getMeanAtOutCoords();\n        float variance = getVarianceAtOutCoords();\n        float offset = "+a+";\n        float scale = "+s+";\n        float inv = scale * inversesqrt(variance + float("+o+"));\n        setOutput(dot(vec3(x, -mean, offset), vec3(inv, inv, 1)));\n      }\n    "},tQ=function(e,t,n,r,i,o){this.usesPackedTextures=!0,this.variableNames=["x","mean","variance"],rX(e,t),rX(e,n);var a="vec4(0.0)";null!=r&&(rX(e,r),this.variableNames.push("offset"),a="getOffsetAtOutCoords()");var s="vec4(1.0)";null!=i&&(rX(e,i),this.variableNames.push("scale"),s="getScaleAtOutCoords()"),this.outputShape=e,this.userCode="\n      void main() {\n        vec4 offset = "+a+";\n        vec4 scale = "+s+";\n\n        vec4 x = getXAtOutCoords();\n        vec4 mean = getMeanAtOutCoords();\n        vec4 variance = getVarianceAtOutCoords();\n\n        vec4 inv = scale * inversesqrt(variance + vec4("+o+"));\n\n        setOutput((x - mean) * inv + offset);\n      }\n    "},nQ=function(e,t,n){this.variableNames=["AReal","AImag","BReal","BImag"],this.outputShape=rX(t,n),this.userCode="\n      float binaryOpComplex(\n          float areal, float aimag, float breal, float bimag) {\n        "+e+"\n      }\n\n      void main() {\n        float areal = getARealAtOutCoords();\n        float aimag = getAImagAtOutCoords();\n        float breal = getBRealAtOutCoords();\n        float bimag = getBImagAtOutCoords();\n        setOutput(binaryOpComplex(areal, aimag, breal, bimag));\n      }\n    "},rQ="return a + b;",iQ="return a - b;",oQ="return a * b;",aQ="return (a < 0.) ? b * a : a;",sQ=function(e,t,n){this.variableNames=["A","B"],this.outputShape=rX(t,n),this.userCode="\n      float binaryOperation(float a, float b) {\n        "+e+"\n      }\n\n      void main() {\n        float a = getAAtOutCoords();\n        float b = getBAtOutCoords();\n        setOutput(binaryOperation(a, b));\n      }\n    "},lQ="\n  vec4 aLessThanZero = vec4(lessThan(a, vec4(0.)));\n  return (aLessThanZero * (b * a)) + ((vec4(1.0) - aLessThanZero) * a);\n",uQ=function(e,t,n,r){void 0===r&&(r=!1),this.variableNames=["A","B"],this.supportsBroadcasting=!0,this.usesPackedTextures=!0,this.outputShape=rX(t,n);var i=this.outputShape.length,o="";if(r)if(0===i||1===qW(this.outputShape))o="\n          result.y = 0.;\n          result.z = 0.;\n          result.w = 0.;\n        ";else if(o="\n          "+KX(i)+" coords = getOutputCoords();\n        ",1===i)o+="\n            result.y = (coords + 1) >= "+this.outputShape[0]+" ? 0. : result.y;\n            result.z = 0.;\n            result.w = 0.;\n          ";else{var a=PX("coords",i);o+="\n            bool nextRowOutOfBounds =\n              ("+a[i-2]+" + 1) >= "+this.outputShape[i-2]+";\n            bool nextColOutOfBounds =\n              ("+a[i-1]+" + 1) >= "+this.outputShape[i-1]+";\n            result.y = nextColOutOfBounds ? 0. : result.y;\n            result.z = nextRowOutOfBounds ? 0. : result.z;\n            result.w = nextColOutOfBounds || nextRowOutOfBounds ? 0. : result.w;\n          "}this.userCode="\n      vec4 binaryOperation(vec4 a, vec4 b) {\n        "+e+"\n      }\n\n      void main() {\n        vec4 a = getAAtOutCoords();\n        vec4 b = getBAtOutCoords();\n\n        vec4 result = binaryOperation(a, b);\n        "+o+"\n\n        setOutput(result);\n      }\n    "},cQ=function(){function e(e){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        float value = getAAtOutCoords();\n        if (isnan(value)) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, minVal, maxVal));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),dQ=function(){function e(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode="\n      uniform float minVal;\n      uniform float maxVal;\n\n      void main() {\n        vec4 value = getAAtOutCoords();\n\n        if (any(isnan(value))) {\n          setOutput(value);\n          return;\n        }\n\n        setOutput(clamp(value, vec4(minVal), vec4(maxVal)));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e,t){var n=this;return function(r,i){null==n.minLoc&&(n.minLoc=r.getUniformLocationNoThrow(i,"minVal"),n.maxLoc=r.getUniformLocationNoThrow(i,"maxVal")),r.gl.uniform1f(n.minLoc,e),r.gl.uniform1f(n.maxLoc,t)}},e}(),hQ=function(e){this.variableNames=["real","imag"],this.outputShape=e,this.userCode="\n      void main() {\n        float re = abs(getRealAtOutCoords());\n        float im = abs(getImagAtOutCoords());\n        float mx = max(re, im);\n\n        // sadly the length function in glsl is not underflow-safe\n        // (at least not on Intel GPUs). So the safe solution is\n        // to ensure underflow-safety in all cases.\n        setOutput(\n          mx == 0.0 ? 0.0 : mx * length(vec2(1, min(re, im)/mx))\n        );\n      }\n    "},pQ=function(e){this.outputShape=[],this.outputShape=wK(e,1),this.variableNames=e.map((function(e,t){return"T"+t}));var t=new Array(e.length-1);t[0]=e[0][1];for(var n=1;n<t.length;n++)t[n]=t[n-1]+e[n][1];var r=["if (yC < "+t[0]+") setOutput(getT0(yR, yC));"];for(n=1;n<t.length;n++){var i=t[n-1];r.push("else if (yC < "+t[n]+") setOutput(getT"+n+"(yR, yC-"+i+"));")}var o=t.length,a=t[t.length-1];r.push("else setOutput(getT"+o+"(yR, yC-"+a+"));"),this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int yR = coords.x;\n        int yC = coords.y;\n\n        "+r.join("\n        ")+"\n      }\n    "},fQ=function(e,t){this.usesPackedTextures=!0,this.outputShape=[],this.outputShape=wK(e,t);var n=this.outputShape,r=n.length,i=KX(r),o=PX("coords",r),a=["x","y","z","w","u","v"].slice(0,r);this.variableNames=e.map((function(e,t){return"T"+t}));var s=new Array(e.length-1);s[0]=e[0][t];for(var l=1;l<s.length;l++)s[l]=s[l-1]+e[l][t];var u=a[t],c=a.slice(-2),d=a.join(),h="if ("+u+" < "+s[0]+") {\n        return getChannel(\n            getT0("+d+"), vec2("+c.join()+"));\n        }";for(l=1;l<s.length;l++){var p=s[l-1];h+="\n        if ("+u+" < "+s[l]+"  && "+u+" >= "+s[l-1]+") {\n          return getChannel(\n            getT"+l+"("+mQ(a,u,p)+"),\n            vec2("+mQ(c,u,p)+"));\n        }"}var f=s.length,m=s[s.length-1];h+="\n        return getChannel(\n          getT"+f+"("+mQ(a,u,m)+"),\n          vec2("+mQ(c,u,m)+"));",this.userCode="\n      float getValue("+a.map((function(e){return"int "+e}))+") {\n        "+h+"\n      }\n\n      void main() {\n        "+i+" coords = getOutputCoords();\n        vec4 result = vec4(getValue("+o+"), 0., 0., 0.);\n\n        "+o[r-1]+" = "+o[r-1]+" + 1;\n        if ("+o[r-1]+" < "+n[r-1]+") {\n          result.g = getValue("+o+");\n        }\n\n        "+o[r-2]+" = "+o[r-2]+" + 1;\n        if ("+o[r-2]+" < "+n[r-2]+") {\n          result.a = getValue("+o+");\n        }\n\n        "+o[r-1]+" = "+o[r-1]+" - 1;\n        if ("+o[r-2]+" < "+n[r-2]+" &&\n            "+o[r-1]+" < "+n[r-1]+") {\n          result.b = getValue("+o+");\n        }\n        setOutput(result);\n      }\n    "};function mQ(e,t,n){var r=e.indexOf(t);return e.map((function(e,t){return t===r?e+" - "+n:e})).join()}var gQ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o="channelsLast"===e.dataFormat;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int d2 = coords.w;\n\n        // Convolve x(?, ?, d1) with dy(:, :, d2) to get dw(wR, wC, d1, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              if ("+o+") {\n                float dyValue = getDy(b, yR, yC, d2);\n                float xValue = getX(b, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              } else {\n                float dyValue = getDy(b, d2, yR, yC);\n                float xValue = getX(b, d1, xR, xC);\n                dotProd += (xValue * dyValue);\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},vQ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o="channelsLast"===e.dataFormat,a=t-1-e.padInfo.top,s=n-1-e.padInfo.left,l=o?1:2,u=o?2:3,c=o?3:1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords["+c+"];\n\n        ivec2 dyCorner = ivec2(coords["+l+"], coords["+u+"]) - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        // Convolve dy(?, ?, d2) with w(:, :, d1, d2) to compute dx(xR, xC, d1).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n\n              if ("+o+") {\n                float xValue = getDy(batch, idyR, idyC, d2);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              } else {\n                float xValue = getDy(batch, d2, idyR, idyC);\n                float wValue = getW(wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},yQ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.padInfo.front,o=e.padInfo.top,a=e.padInfo.left;this.userCode="\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int wF = coords.x;\n        int wR = coords.y;\n        int wC = coords.z;\n        int d1 = coords.w;\n        int d2 = coords.u;\n\n        float dotProd = 0.0;\n\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yF = 0; yF < "+e.outDepth+"; yF++) {\n            int xF = wF + yF * "+t+" - "+i+";\n\n            if (xF < 0 || xF >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n              int xR = wR + yR * "+n+" - "+o+";\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n                int xC = wC + yC * "+r+" - "+a+";\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float dyValue = getDy(b, yF, yR, yC, d2);\n                float xValue = getX(b, xF, xR, xC, d1);\n                dotProd += (xValue * dyValue);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},bQ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterDepth,n=e.filterHeight,r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=t-1-e.padInfo.front,l=n-1-e.padInfo.top,u=r-1-e.padInfo.left;this.userCode="\n      const ivec3 pads = ivec3("+s+", "+l+", "+u+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d1 = coords.u;\n\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyFCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+t+"; wF++) {\n          float dyF = float(dyFCorner + wF) / "+i+".0;\n\n          if (dyF < 0.0 || dyF >= "+e.outDepth+".0 || fract(dyF) > 0.0) {\n            continue;\n          }\n          int idyF = int(dyF);\n\n          int wFPerm = "+t+" - 1 - wF;\n\n          for (int wR = 0; wR < "+n+"; wR++) {\n            float dyR = float(dyRCorner + wR) / "+o+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n              fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            int wRPerm = "+n+" - 1 - wR;\n\n            for (int wC = 0; wC < "+r+"; wC++) {\n              float dyC = float(dyCCorner + wC) / "+a+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              int wCPerm = "+r+" - 1 - wC;\n\n              for (int d2 = 0; d2 < "+e.outChannels+"; d2++) {\n                float xValue = getDy(batch, idyF, idyR, idyC, d2);\n                float wValue = getW(wFPerm, wRPerm, wCPerm, d1, d2);\n                dotProd += xValue * wValue;\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},xQ=function(e){this.variableNames=["x","dy"],this.outputShape=e.filterShape;var t=e.strideHeight,n=e.strideWidth,r=e.padInfo.top,i=e.padInfo.left,o=e.outChannels/e.inChannels;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int wR = coords.x;\n        int wC = coords.y;\n        int d1 = coords.z;\n        int dm = coords.w;\n        int d2 = d1 * "+o+" + dm;\n\n        float dotProd = 0.0;\n\n        // TO DO: Vec4 over the batch size\n        for (int b = 0; b < "+e.batchSize+"; b++) {\n          for (int yR = 0; yR < "+e.outHeight+"; yR++) {\n            int xR = wR + yR * "+t+" - "+r+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int yC = 0; yC < "+e.outWidth+"; yC++) {\n              int xC = wC + yC * "+n+" - "+i+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float dyValue = getDy(b, yR, yC, d2);\n              float xValue = getX(b, xR, xC, d1);\n              dotProd += (xValue * dyValue);\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},wQ=function(e){this.variableNames=["dy","W"],this.outputShape=e.inShape;var t=e.filterHeight,n=e.filterWidth,r=e.strideHeight,i=e.strideWidth,o=t-1-e.padInfo.top,a=n-1-e.padInfo.left,s=e.outChannels/e.inChannels;this.userCode="\n      const ivec2 pads = ivec2("+o+", "+a+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d1 = coords[3];\n        ivec2 dyCorner = coords.yz - pads;\n        int dyRCorner = dyCorner.x;\n        int dyCCorner = dyCorner.y;\n\n        float dotProd = 0.0;\n\n        for (int wR = 0; wR < "+t+"; wR++) {\n          float dyR = float(dyRCorner + wR) / "+r+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          int wRPerm = "+t+" - 1 - wR;\n\n          for (int wC = 0; wC < "+n+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+i+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            int wCPerm = "+n+" - 1 - wC;\n\n            // TO DO: Vec4 over the channelMul\n            for (int dm = 0; dm < "+s+"; dm++) {\n              int d2 = d1 * "+s+" + dm;\n              float xValue = getDy(batch, idyR, idyC, d2);\n              float wValue = getW(wRPerm, wCPerm, d1, dm);\n              dotProd += xValue * wValue;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},kQ=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.padInfo.top,o=e.padInfo.left,a=e.strideHeight,s=e.strideWidth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterHeight,d=e.filterWidth,h=4*Math.floor(e.inChannels/4),p=e.inChannels%4,f="channelsLast"===e.dataFormat,m=f?1:2,g=f?2:3,v=f?3:1,y="",b="";n&&(y=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",b="result = activation(result);");var x=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+y+"\n\n      const ivec2 strides = ivec2("+a+", "+s+");\n      const ivec2 pads = ivec2("+i+", "+o+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d2 = coords["+v+"];\n\n        ivec2 xRCCorner =\n            ivec2(coords["+m+"], coords["+g+"]) * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, d2) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+c+"; wR++) {\n          int xR = xRCorner + wR * "+l+";\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+d+"; wC++) {\n            int xC = xCCorner + wC * "+u+";\n\n            if (xC < 0 || xC >= "+e.inWidth+") {\n              continue;\n            }\n\n            for (int d1 = 0; d1 < "+h+"; d1 += 4) {\n              vec4 wValues = vec4(\n                getW(wR, wC, d1, d2),\n                getW(wR, wC, d1 + 1, d2),\n                getW(wR, wC, d1 + 2, d2),\n                getW(wR, wC, d1 + 3, d2)\n              );\n\n              if ("+f+") {\n                vec4 xValues = vec4(\n                  getX(batch, xR, xC, d1),\n                  getX(batch, xR, xC, d1 + 1),\n                  getX(batch, xR, xC, d1 + 2),\n                  getX(batch, xR, xC, d1 + 3)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec4 xValues = vec4(\n                  getX(batch, d1, xR, xC),\n                  getX(batch, d1 + 1, xR, xC),\n                  getX(batch, d1 + 2, xR, xC),\n                  getX(batch, d1 + 3, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n\n            if ("+(1===p)+") {\n\n              if ("+f+") {\n                dotProd +=\n                    getX(batch, xR, xC, "+h+") *\n                    getW(wR, wC, "+h+", d2);\n              } else {\n                dotProd +=\n                    getX(batch, "+h+", xR, xC) *\n                    getW(wR, wC, "+h+", d2);\n              }\n\n            } else if ("+(2===p)+") {\n              vec2 wValues = vec2(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2)\n              );\n\n              if ("+f+") {\n                vec2 xValues = vec2(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec2 xValues = vec2(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            } else if ("+(3===p)+") {\n              vec3 wValues = vec3(\n                getW(wR, wC, "+h+", d2),\n                getW(wR, wC, "+h+" + 1, d2),\n                getW(wR, wC, "+h+" + 2, d2)\n              );\n\n              if ("+f+") {\n                vec3 xValues = vec3(\n                  getX(batch, xR, xC, "+h+"),\n                  getX(batch, xR, xC, "+h+" + 1),\n                  getX(batch, xR, xC, "+h+" + 2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else {\n                vec3 xValues = vec3(\n                  getX(batch, "+h+", xR, xC),\n                  getX(batch, "+h+" + 1, xR, xC),\n                  getX(batch, "+h+" + 2, xR, xC)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n\n            }\n          }\n        }\n\n        float result = dotProd;\n        "+x+"\n        "+b+"\n        setOutput(result);\n      }\n    "},_Q=function(e){this.variableNames=["x","W"],this.outputShape=e.outShape;var t=e.padInfo.front,n=e.padInfo.top,r=e.padInfo.left,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.filterDepth,d=e.filterHeight,h=e.filterWidth,p=4*Math.floor(e.inChannels/4),f=e.inChannels%4;this.userCode="\n      const ivec3 strides = ivec3("+i+", "+o+", "+a+");\n      const ivec3 pads = ivec3("+t+", "+n+", "+r+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int d2 = coords.u;\n\n        ivec3 xFRCCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xFCorner = xFRCCorner.x;\n        int xRCorner = xFRCCorner.y;\n        int xCCorner = xFRCCorner.z;\n\n        // Convolve x(?, ?, ?, d1) with w(:, :, :, d1, d2) to get\n        // y(yF, yR, yC, d2). ? = to be determined. : = across all\n        // values in that axis.\n        float dotProd = 0.0;\n        for (int wF = 0; wF < "+c+"; wF++) {\n          int xF = xFCorner + wF * "+s+";\n\n          if (xF < 0 || xF >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+"; wR++) {\n            int xR = xRCorner + wR * "+l+";\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+h+"; wC++) {\n              int xC = xCCorner + wC * "+u+";\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              for (int d1 = 0; d1 < "+p+"; d1 += 4) {\n                vec4 xValues = vec4(\n                  getX(batch, xF, xR, xC, d1),\n                  getX(batch, xF, xR, xC, d1 + 1),\n                  getX(batch, xF, xR, xC, d1 + 2),\n                  getX(batch, xF, xR, xC, d1 + 3)\n                );\n                vec4 wValues = vec4(\n                  getW(wF, wR, wC, d1, d2),\n                  getW(wF, wR, wC, d1 + 1, d2),\n                  getW(wF, wR, wC, d1 + 2, d2),\n                  getW(wF, wR, wC, d1 + 3, d2)\n                );\n\n                dotProd += dot(xValues, wValues);\n              }\n\n              if ("+(1===f)+") {\n                dotProd +=\n                  getX(batch, xF, xR, xC, "+p+") *\n                  getW(wF, wR, wC, "+p+", d2);\n              } else if ("+(2===f)+") {\n                vec2 xValues = vec2(\n                  getX(batch, xF, xR, xC, "+p+"),\n                  getX(batch, xF, xR, xC, "+p+" + 1)\n                );\n                vec2 wValues = vec2(\n                  getW(wF, wR, wC, "+p+", d2),\n                  getW(wF, wR, wC, "+p+" + 1, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              } else if ("+(3===f)+") {\n                vec3 xValues = vec3(\n                  getX(batch, xF, xR, xC, "+p+"),\n                  getX(batch, xF, xR, xC, "+p+" + 1),\n                  getX(batch, xF, xR, xC, "+p+" + 2)\n                );\n                vec3 wValues = vec3(\n                  getW(wF, wR, wC, "+p+", d2),\n                  getW(wF, wR, wC, "+p+" + 1, d2),\n                  getW(wF, wR, wC, "+p+" + 2, d2)\n                );\n                dotProd += dot(xValues, wValues);\n              }\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},EQ=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.outputShape=e.outShape;var i=e.inHeight,o=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,p=e.filterWidth,f=e.outChannels/e.inChannels,m="",g="";n&&(m=r?"float activation(float a) {\n          float b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"\n          float activation(float x) {\n            "+n+"\n          }\n        ",g="result = activation(result);");var v=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+m+"\n\n      const ivec2 strides = ivec2("+l+", "+u+");\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2 / "+f+";\n        int q = d2 - d1 * "+f+";\n\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // Convolve x(?, ?, d1) with w(:, :, d1, q) to get y(yR, yC, d2).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        // TO DO(dsmilkov): Flatten the two for loops and vec4 the operations.\n        for (int wR = 0; wR < "+h+"; wR++) {\n          int xR = xRCorner + wR * "+c+";\n\n          if (xR < 0 || xR >= "+i+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+p+"; wC++) {\n            int xC = xCCorner + wC * "+d+";\n\n            if (xC < 0 || xC >= "+o+") {\n              continue;\n            }\n\n            float xVal = getX(batch, xR, xC, d1);\n            float wVal = getW(wR, wC, d1, q);\n            dotProd += xVal * wVal;\n          }\n        }\n\n        float result = dotProd;\n        "+v+"\n        "+g+"\n        setOutput(result);\n      }\n    "},CQ=function(e,t,n,r){void 0===t&&(t=!1),void 0===n&&(n=null),void 0===r&&(r=!1),this.variableNames=["x","W"],this.usesPackedTextures=!0,this.outputShape=e.outShape;for(var i=e.inHeight,o=e.inWidth,a=e.padInfo.top,s=e.padInfo.left,l=e.strideHeight,u=e.strideWidth,c=e.dilationHeight,d=e.dilationWidth,h=e.filterHeight,p=e.filterWidth,f=p,m="int xR; int xC; int xCOffset;",g=0;g<h;g++)for(var v=0;v<p;v++)m+="\n          vec4 xTexelR"+g+"C"+2*v+" = vec4(0.);\n          vec4 wR"+g+"C"+v+" = vec4(0.);\n          vec4 xR"+g+"C"+v+" = vec4(0.);";for(g=0;g<h;g++)for(var y=0;y<f;y++){if(m+="\n          xR = xRCorner + "+g*c+";\n          xC = xCCorner + "+(v=2*y)*d+";\n        ",1===u){if(v<p&&(m+=s%2==1?"\n                xCOffset = xC + 1;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + 1 - 2;\n                if(xR >= 0 && xR < "+i+" && xCOffset >= 0 && xCOffset < "+o+") {\n                  vec4 previous = getX(batch, xR, xCOffset, d1);\n                  xR"+g+"C"+v+" = vec4(previous.zw, xTexelR"+g+"C"+v+".xy);\n                } else {\n                  xR"+g+"C"+v+" = vec4(0, 0, xTexelR"+g+"C"+v+".xy);\n                }\n              ":"\n                if(xR >= 0 && xR < "+i+" && xC >= 0 && xC < "+o+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = xTexelR"+g+"C"+v+";\n              ",v+1<p)){var b=s%2==0?jW(d):d;d%2==0&&s%2==1||d%2!=0&&s%2!=1?(m+="\n                  xCOffset = xC + "+s%2+" + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n                ",d>1&&(m+="\n                    xCOffset -= 2;\n                    if(xR >= 0 && xR < "+i+" &&\n                      xCOffset >= 0 && xCOffset < "+o+") {\n                      xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                    } else {\n                      xTexelR"+g+"C"+v+" = vec4(0.);\n                    }\n                  "),m+="\n                  xR"+g+"C"+(v+1)+" = vec4(\n                    xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".xy);\n                "):m+="\n                  xCOffset = xC + "+b+";\n\n                  if(xR >= 0 && xR < "+i+" &&\n                    xCOffset >= 0 && xCOffset < "+o+") {\n                    xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                  }\n\n                  xR"+g+"C"+(v+1)+" = xTexelR"+g+"C"+(v+2)+";\n                "}}else v<p&&(m+="\n              if(xR >= 0 && xR < "+i+") {\n            ",s%2==1?(m+="\n                xCOffset = xC + 1 - "+u+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                if(xC + 1 >= 0 && xC + 1 < "+o+") {\n                  xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xC + 1, d1);\n                } else {\n                  xTexelR"+g+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = vec4(\n                  xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".zw);\n              ",v+1<p&&(m+="\n                  vec4 final = vec4(0.);\n                  xCOffset = xC + 1 + "+u+";\n                  if(xCOffset >= 0 && xCOffset < "+o+") {\n                    final = getX(batch, xR, xCOffset, d1);\n                  }\n                  xR"+g+"C"+(v+1)+" = vec4(xTexelR"+g+"C"+(v+2)+".xy, final.xy);\n                ")):(m+="\n                if(xC >= 0 && xC < "+o+") {\n                  xTexelR"+g+"C"+v+" = getX(batch, xR, xC, d1);\n                } else {\n                  xTexelR"+g+"C"+v+" = vec4(0.);\n                }\n\n                xCOffset = xC + "+u+";\n                if(xCOffset >= 0 && xCOffset < "+o+") {\n                  xTexelR"+g+"C"+(v+2)+" = getX(batch, xR, xCOffset, d1);\n                } else {\n                  xTexelR"+g+"C"+(v+2)+" = vec4(0.);\n                }\n\n                xR"+g+"C"+v+" = vec4(\n                  xTexelR"+g+"C"+v+".xy, xTexelR"+g+"C"+(v+2)+".xy);\n              ",v+1<p&&(m+="\n                  xR"+g+"C"+(v+1)+" = vec4(\n                    xTexelR"+g+"C"+v+".zw, xTexelR"+g+"C"+(v+2)+".zw);\n                ")),m+="}");v<p&&(m+="\n            vec4 wTexelR"+g+"C"+v+" = getW("+g+", "+v+", d1, q);\n            wR"+g+"C"+v+" = vec4(wTexelR"+g+"C"+v+".xz, wTexelR"+g+"C"+v+".xz);\n          ",v+1<p&&(m+="\n              vec4 wTexelR"+g+"C"+(v+1)+" = getW("+g+", "+(v+1)+", d1, q);\n              wR"+g+"C"+(v+1)+" =\n                vec4(wTexelR"+g+"C"+(v+1)+".xz, wTexelR"+g+"C"+(v+1)+".xz);"))}for(g=0;g<h;g++)for(v=0;v<p;v++)m+="dotProd += xR"+g+"C"+v+" * wR"+g+"C"+v+";";var x="",w="";n&&(x=r?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+n+"\n        }":"vec4 activation(vec4 x) {\n          "+n+"\n        }",w="result = activation(result);");var k=t?"result += getBiasAtOutCoords();":"";t&&this.variableNames.push("bias"),r&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+x+"\n\n      const ivec2 strides = ivec2("+l+", "+u+");\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n\n        ivec4 coords = getOutputCoords();\n        int batch = coords.x;\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int d2 = coords.w;\n        int d1 = d2;\n        int q = 0;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        vec4 dotProd = vec4(0.);\n\n        "+m+"\n\n        vec4 result = dotProd;\n        "+k+"\n        "+w+"\n        setOutput(result);\n      }\n    "},IQ=function(e,t,n,r,i){this.variableNames=["Image","Boxes","BoxInd"],this.outputShape=[];var o=e[0],a=e[1],s=e[2],l=e[3],u=t[0],c=n[0],d=n[1];this.outputShape=[u,c,d,l];var h="bilinear"===r?1:0,p=[a-1+".0",s-1+".0"],f=p[0],m=p[1],g=c>1?[""+(a-1)/(c-1),"(y2-y1) * height_ratio","y1*"+f+" + float(y)*(height_scale)"]:["0.0","0.0","0.5 * (y1+y2) * "+f],v=g[0],y=g[1],b=g[2],x=d>1?[""+(s-1)/(d-1),"(x2-x1) * width_ratio","x1*"+m+" + float(x)*(width_scale)"]:["0.0","0.0","0.5 * (x1+x2) * "+m],w=x[0],k=x[1],_=x[2];this.userCode="\n      const float height_ratio = float("+v+");\n      const float width_ratio = float("+w+");\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int y = coords[1];\n        int x = coords[2];\n        int d = coords[3];\n\n        // get box vals\n        float y1 = getBoxes(b,0);\n        float x1 = getBoxes(b,1);\n        float y2 = getBoxes(b,2);\n        float x2 = getBoxes(b,3);\n\n        // get image in batch index\n        int bInd = round(getBoxInd(b));\n        if(bInd < 0 || bInd >= "+o+") {\n          return;\n        }\n\n        float height_scale = "+y+";\n        float width_scale = "+k+";\n\n        float in_y = "+b+";\n        if( in_y < 0.0 || in_y > "+f+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n        float in_x = "+_+";\n        if( in_x < 0.0 || in_x > "+m+" ) {\n          setOutput(float("+i+"));\n          return;\n        }\n\n        vec2 sourceFracIndexCR = vec2(in_x,in_y);\n        if("+h+" == 1) {\n          // Compute the four integer indices.\n          ivec2 sourceFloorCR = ivec2(sourceFracIndexCR);\n          ivec2 sourceCeilCR = ivec2(ceil(sourceFracIndexCR));\n\n          float topLeft = getImage(b, sourceFloorCR.y, sourceFloorCR.x, d);\n          float bottomLeft = getImage(b, sourceCeilCR.y, sourceFloorCR.x, d);\n          float topRight = getImage(b, sourceFloorCR.y, sourceCeilCR.x, d);\n          float bottomRight = getImage(b, sourceCeilCR.y, sourceCeilCR.x, d);\n\n          vec2 fracCR = sourceFracIndexCR - vec2(sourceFloorCR);\n\n          float top = topLeft + (topRight - topLeft) * fracCR.x;\n          float bottom = bottomLeft + (bottomRight - bottomLeft) * fracCR.x;\n          float newValue = top + (bottom - top) * fracCR.y;\n          setOutput(newValue);\n        } else {\n          // Compute the coordinators of nearest neighbor point.\n          ivec2 sourceNearestCR = ivec2(floor(\n            sourceFracIndexCR + vec2(0.5,0.5)));\n          float newValue = getImage(b, sourceNearestCR.y, sourceNearestCR.x, d);\n          setOutput(newValue);\n        }\n      }\n    "},SQ=function(e,t,n){this.variableNames=["x"],this.outputShape=e;var r=e.length,i=e[e.length-1],o=n?"<":">";this.userCode="\n      int getIndex(int i) {\n        "+(n?"return "+i+" -i - 1;":"return i;")+"\n      }\n\n      void main() {\n        "+KX(r)+" coords = getOutputCoords();\n        int end = "+NQ(r,"coords")+";\n        float val = 0.0;\n        for (int i = "+i+" - 1; i >= 0; i -= 1) {\n          int idx = getIndex(i);\n          if (idx "+o+" end) {\n            continue;\n          }\n          if (idx == end && "+t+") {\n            continue;\n          }\n          "+NQ(r,"coords")+" = idx;\n          val += getX("+function(e,t){if(1===e)return""+t;if(2===e)return t+".x, "+t+".y";if(3===e)return t+".x, "+t+".y, "+t+".z";if(4===e)return t+".x, "+t+".y, "+t+".z, "+t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}(r,"coords")+");\n        }\n        setOutput(val);\n      }\n    "};function NQ(e,t){if(1===e)return""+t;if(2===e)return t+".y";if(3===e)return t+".z";if(4===e)return t+".w";throw Error("Cumulative sum for rank "+e+" is not yet supported")}var TQ=function(e,t){this.variableNames=["A"];var n=LX();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+MX(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getA(rc.x, rc.y, rc.z);\n        }\n\n        "+n.output+" = result;\n      }\n    "},AQ=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0;var n=LX();this.outputShape=e,this.userCode="\n      ivec3 outCoordsFromFlatIndex(int index) {\n        "+MX(["r","c","d"],e)+"\n        return ivec3(r, c, d);\n      }\n\n      void main() {\n        ivec2 resTexRC = ivec2(resultUV.yx *\n          vec2("+t[0]+", "+t[1]+"));\n        int index = 4 * (resTexRC.x * "+t[1]+" + resTexRC.y);\n\n        vec4 result = vec4(0.);\n\n        for (int i=0; i<4; i++) {\n          int flatIndex = index + i;\n          ivec3 rc = outCoordsFromFlatIndex(flatIndex);\n          result[i] = getChannel(getA(rc.x, rc.y, rc.z), vec2(rc.y, rc.z));\n        }\n\n        "+n.output+" = result;\n      }\n    "},RQ=function(){function e(e,t,n){this.variableNames=["x"],this.outputShape=[],this.outputShape=e,this.blockSize=t,this.dataFormat=n,this.userCode="\n    void main() {\n      ivec4 coords = getOutputCoords();\n      int b = coords[0];\n      int h = "+this.getHeightCoordString()+";\n      int w = "+this.getWidthCoordString()+";\n      int d = "+this.getDepthCoordString()+";\n\n      int in_h = h / "+t+";\n      int offset_h = imod(h, "+t+");\n      int in_w = w / "+t+";\n      int offset_w = imod(w, "+t+");\n      int offset_d = (offset_h * "+t+" + offset_w) *\n        "+this.getOutputDepthSize()+";\n      int in_d = d + offset_d;\n\n      float result = "+this.getInputSamplingString()+";\n      setOutput(result);\n    }\n  "}return e.prototype.getHeightCoordString=function(){return"NHWC"===this.dataFormat?"coords[1]":"coords[2]"},e.prototype.getWidthCoordString=function(){return"NHWC"===this.dataFormat?"coords[2]":"coords[3]"},e.prototype.getDepthCoordString=function(){return"NHWC"===this.dataFormat?"coords[3]":"coords[1]"},e.prototype.getOutputDepthSize=function(){return"NHWC"===this.dataFormat?this.outputShape[3]:this.outputShape[1]},e.prototype.getInputSamplingString=function(){return"NHWC"===this.dataFormat?"getX(b, in_h, in_w, in_d)":"getX(b, in_d, in_h, in_w)"},e}(),DQ=function(e){this.variableNames=["X"],this.outputShape=[e,e],this.userCode="\n      void main() {\n          ivec2 coords = getOutputCoords();\n          float val = coords[0] == coords[1] ? getX(coords[0]) : 0.0;\n          setOutput(val);\n      }\n    "},OQ=function(e){this.variableNames=["A"];var t=LX();this.outputShape=e,this.userCode="\n      "+jX+"\n\n      void main() {\n        float x = getAAtOutCoords();\n        "+t.output+" = encode_float(x);\n      }\n    "},PQ=function(e){this.variableNames=["A"],this.usesPackedTextures=!0;var t=LX();this.outputShape=e,this.userCode="\n      "+jX+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n        float x = getChannel(getAAtOutCoords(), vec2(coords.y, coords.z));\n        "+t.output+" = encode_float(x);\n      }\n    "},LQ=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=LX(),i=t[0],o=t[1];this.outputShape=e;var a="result";n&&(a="floor(result * 255. + 0.5)"),this.userCode="\n      "+FX(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        int flatIndex = getFlatIndex(coords);\n        int offset = imod(flatIndex, 4);\n\n        flatIndex = idiv(flatIndex, 4, 1.);\n        \n        int r = flatIndex / "+o+";\n        int c = imod(flatIndex, "+o+");\n        vec2 uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n        vec4 values = "+r.texture2D+"(A, uv);\n\n        float result;\n\n        if(offset == 0) {\n          result = values[0];\n        } else if(offset == 1) {\n          result = values[1];\n        } else if(offset == 2) {\n          result = values[2];\n        } else {\n          result = values[3];\n        }\n\n        "+r.output+" = vec4("+a+", 0., 0., 0.);\n      }\n    "},MQ=function(e,t,n){void 0===n&&(n=!1),this.variableNames=["A"];var r=LX(),i=t[0],o=t[1];this.outputShape=e;var a="",s="result";n&&(s="floor(result * 255. + 0.5)");for(var l=0;l<=1;l++)for(var u=0;u<=1;u++){var c=2*l+u;a+="\n          localCoords = coords;\n          if(localCoords[2] + "+u+" < "+e[2]+") {\n            localCoords[2] += "+u+";\n            if(localCoords[1] + "+l+" < "+e[1]+") {\n              localCoords[1] += "+l+";\n\n              flatIndex = getFlatIndex(localCoords);\n              offset = imod(flatIndex, 4);\n    \n              flatIndex = idiv(flatIndex, 4, 1.);\n\n              r = flatIndex / "+o+";\n              c = imod(flatIndex, "+o+");\n              uv = (vec2(c, r) + halfCR) / vec2("+o+".0, "+i+".0);\n              values = "+r.texture2D+"(A, uv);\n\n              if(offset == 0) {\n                result["+c+"] = values[0];\n              } else if(offset == 1) {\n                result["+c+"] = values[1];\n              } else if(offset == 2) {\n                result["+c+"] = values[2];\n              } else {\n                result["+c+"] = values[3];\n              }\n            }\n          }\n        "}this.userCode="\n      "+FX(e)+"\n\n      void main() {\n        ivec3 coords = getOutputCoords();\n\n        vec4 result = vec4(0.);\n        int flatIndex, r, c, offset;\n        ivec3 localCoords;\n        vec2 uv;\n        vec4 values;\n        \n        "+a+"\n\n        "+r.output+" = "+s+";\n      }\n    "},FQ=function(e,t,n){this.variableNames=["real","imag"];var r=t[1];this.outputShape=t;var i=n?"2.0 * "+Math.PI:"-2.0 * "+Math.PI,o=n?r+".0":"1.0";this.userCode="\n      const float exponentMultiplier = "+i+";\n\n      float unaryOpComplex(float real, float expR, float imag, float expI) {\n        "+e+"\n      }\n\n      float mulMatDFT(int batch, int index) {\n        float indexRatio = float(index) / float("+r+");\n        float exponentMultiplierTimesIndexRatio =\n            exponentMultiplier * indexRatio;\n\n        float result = 0.0;\n\n        for (int i = 0; i < "+r+"; i++) {\n          // x = (-2|2 * PI / N) * index * i;\n          float x = exponentMultiplierTimesIndexRatio * float(i);\n          float expR = cos(x);\n          float expI = sin(x);\n          float real = getReal(batch, i);\n          float imag = getImag(batch, i);\n\n          result +=\n              unaryOpComplex(real, expR, imag, expI) / "+o+";\n        }\n\n        return result;\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        setOutput(mulMatDFT(coords[0], coords[1]));\n      }\n    "},jQ=function(){function e(e,t){this.outputShape=[],this.variableNames=["x"],this.outputShape=e,this.userCode="\n      uniform float value;\n      void main() {\n        // Input can be obtained from uniform value.\n        setOutput(value);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.valueLoc&&(t.valueLoc=n.getUniformLocationNoThrow(r,"value")),n.gl.uniform1f(t.valueLoc,e)}},e}(),BQ=function(e){this.variableNames=["A"];var t=LX(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n        vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n\n        vec4 values = "+t.texture2D+"(A, uv);\n        float value;\n        if (depth == 0) {\n          value = values.r;\n        } else if (depth == 1) {\n          value = values.g;\n        } else if (depth == 2) {\n          value = values.b;\n        } else if (depth == 3) {\n          value = values.a;\n        }\n\n        setOutput(floor(value * 255.0 + 0.5));\n      }\n    "},VQ=function(e){this.variableNames=["A"];var t=LX(),n=e[0],r=e[1];this.outputShape=e,this.userCode="\n      void main() {\n        ivec3 coords = getOutputCoords();\n        int texR = coords[0];\n        int texC = coords[1];\n        int depth = coords[2];\n\n        vec4 result = vec4(0.);\n\n        for(int row=0; row<=1; row++) {\n          for(int col=0; col<=1; col++) {\n            texC = coords[1] + row;\n            depth = coords[2] + col;\n\n            vec2 uv = (vec2(texC, texR) + halfCR) / vec2("+r+".0, "+n+".0);\n            vec4 values = "+t.texture2D+"(A, uv);\n            float value;\n            if (depth == 0) {\n              value = values.r;\n            } else if (depth == 1) {\n              value = values.g;\n            } else if (depth == 2) {\n              value = values.b;\n            } else if (depth == 3) {\n              value = values.a;\n            }\n\n            result[row * 2 + col] = floor(value * 255.0 + 0.5);\n          }\n        }\n\n        "+t.output+" = result;\n      }\n    "},zQ=function(e,t,n){this.variableNames=["A","indices"];var r=e.slice();r[n]=t,this.outputShape=r,this.rank=r.length;var i=KX(this.rank),o=function(e,t){var n=e.length;if(n>4)throw Error("Gather for rank "+n+" is not yet supported");if(1===n)return"int(getIndices(resRC))";for(var r=["resRC.x","resRC.y","resRC.z","resRC.w"],i=[],o=0;o<e.length;o++)o===t?i.push("int(getIndices("+r[o]+"))"):i.push(""+r[o]);return i.join()}(e,n);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},UQ=function(e,t,n){this.sliceDim=e,this.strides=t,this.variableNames=["x","indices"],this.outputShape=n;var r=KX(t.length),i=KX(n.length),o=this.sliceDim>1?"strides[j]":"strides";this.userCode="\n        "+r+" strides = "+r+"("+this.strides+");\n         void main() {\n          "+i+" coords = getOutputCoords();\n          int flattenIndex = 0;\n          for (int j = 0; j < "+this.sliceDim+"; j++) {\n            int index = round(getIndices(coords[0], j));\n            flattenIndex += index * "+o+";\n          }\n          setOutput(getX(flattenIndex, coords[1]));\n        }\n      "};function $Q(e,t){var n=LX();return gG(e,t,n.version+"\n    precision highp float;\n    "+n.attribute+" vec3 clipSpacePos;\n    "+n.attribute+" vec2 uv;\n    "+n.varyingVs+" vec2 resultUV;\n\n    void main() {\n      gl_Position = vec4(clipSpacePos, 1);\n      resultUV = uv;\n    }")}function qQ(e,t){return EG(e,t,new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0]))}function WQ(e,t){return CG(e,t,new Uint16Array([0,1,2,2,1,3]))}function HQ(e,t,n,r,i,o,a){SG(n,r);var s=IG(e,t),l=e.TEXTURE_2D;return hG(e,t,(function(){return e.bindTexture(l,s)})),hG(e,t,(function(){return e.texParameteri(l,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE)})),hG(e,t,(function(){return e.texParameteri(l,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)})),hG(e,t,(function(){return e.texParameteri(l,e.TEXTURE_MIN_FILTER,e.NEAREST)})),hG(e,t,(function(){return e.texParameteri(l,e.TEXTURE_MAG_FILTER,e.NEAREST)})),hG(e,t,(function(){return e.texImage2D(l,0,i,n,r,0,o,a,null)})),hG(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)})),s}function GQ(e,t,n,r,i){var o=lG(n,r);return HQ(e,t,o[0],o[1],i.internalFormatFloat,i.textureFormatFloat,e.FLOAT)}function KQ(e,t,n,r,i){var o=lG(n,r);return HQ(e,t,o[0],o[1],i.internalFormatHalfFloat,i.textureFormatFloat,i.textureTypeHalfFloat)}function YQ(e,t,n,r,i){var o=lG(n,r);return HQ(e,t,o[0],o[1],e.RGBA,e.RGBA,e.UNSIGNED_BYTE)}function XQ(e,t,n,r,i){var o=cG(n,r);return HQ(e,t,o[0],o[1],i.internalFormatPackedFloat,e.RGBA,e.FLOAT)}function QQ(e,t,n,r,i){var o=cG(n,r);return HQ(e,t,o[0],o[1],i.internalFormatPackedHalfFloat,e.RGBA,i.textureTypeHalfFloat)}function JQ(e,t,n,r){return hG(e,t,(function(){return e.bindBuffer(e.ARRAY_BUFFER,r)})),TG(e,t,n,"clipSpacePos",r,3,20,0)&&TG(e,t,n,"uv",r,2,20,12)}function ZQ(e,t,n,r,i,o,a){var s,l,u;hG(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),o instanceof Uint8Array?(s=new Uint8Array(r*i*4),l=e.UNSIGNED_BYTE,u=e.RGBA):(s=new Float32Array(r*i*4),l=e.FLOAT,u=a.internalFormatPackedFloat),s.set(o),hG(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,u,r,i,0,e.RGBA,l,s)})),hG(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function eJ(e,t,n,r){hG(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,n)})),r.data instanceof Uint8Array?hG(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,r.width,r.height,0,e.RGBA,e.UNSIGNED_BYTE,r.data)})):hG(e,t,(function(){return e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,r)})),hG(e,t,(function(){return e.bindTexture(e.TEXTURE_2D,null)}))}function tJ(e,t,n,r,i){var o=e.createBuffer();hG(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,o)}));var a=16*n*r;return hG(e,t,(function(){return e.bufferData(e.PIXEL_PACK_BUFFER,a,e.STREAM_READ)})),hG(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,0)})),hG(e,t,(function(){return e.bindBuffer(e.PIXEL_PACK_BUFFER,null)})),o}function nJ(e,t,n){var r=e,i=new Float32Array(n);return r.bindBuffer(r.PIXEL_PACK_BUFFER,t),r.getBufferSubData(r.PIXEL_PACK_BUFFER,0,i),r.bindBuffer(r.PIXEL_PACK_BUFFER,null),i}function rJ(e,t,n,r,i){var o=lG(n,r),a=o[0],s=o[1],l=new Uint8Array(n*r*4);return hG(e,t,(function(){return e.readPixels(0,0,a,s,i.downloadTextureFormat,e.UNSIGNED_BYTE,l)})),new Float32Array(l.buffer)}function iJ(e,t,n,r,i,o,a,s){var l=e,u=new Float32Array(function(e,t){var n=cG(e,t);return n[0]*n[1]*4}(o,a));return l.bindBuffer(l.PIXEL_PACK_BUFFER,t),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,u),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),u}function oJ(e,t,n,r){var i=new Float32Array(n*r*4);return hG(e,t,(function(){return e.readPixels(0,0,r,n,e.RGBA,e.FLOAT,i)})),i}var aJ=Object.freeze({createVertexShader:$Q,createVertexBuffer:qQ,createIndexBuffer:WQ,createFloat32MatrixTexture:GQ,createFloat16MatrixTexture:KQ,createUnsignedBytesMatrixTexture:YQ,createPackedMatrixTexture:XQ,createFloat16PackedMatrixTexture:QQ,bindVertexProgramAttributeStreams:JQ,uploadDenseMatrixToTexture:ZQ,uploadPixelDataToTexture:eJ,createBufferFromOutputTexture:tJ,downloadFloat32MatrixFromBuffer:nJ,downloadByteEncodedFloatMatrixFromOutputTexture:rJ,downloadPackedMatrixFromBuffer:iJ,downloadMatrixFromPackedOutputTexture:oJ}),sJ=function(){function e(e){this.outputTexture=null,this.program=null,this.disposed=!1,this.vertexAttrsAreBound=!1,this.itemsToPoll=[];var t=PW().getNumber("WEBGL_VERSION");if(null!=e?(this.gl=e,oG(t,e)):this.gl=aG(t),1===PW().getNumber("WEBGL_VERSION"))this.textureFloatExtension=mG(this.gl,this.debug,"OES_texture_float"),this.colorBufferFloatExtension=this.gl.getExtension("WEBGL_color_buffer_float"),this.textureHalfFloatExtension=mG(this.gl,this.debug,"OES_texture_half_float"),this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float");else if(YG(this.gl,"EXT_color_buffer_float"))this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float");else{if(!YG(this.gl,"EXT_color_buffer_half_float"))throw new Error("GL context does not support color renderable floats");this.colorBufferHalfFloatExtension=this.gl.getExtension("EXT_color_buffer_half_float")}this.vertexBuffer=qQ(this.gl,this.debug),this.indexBuffer=WQ(this.gl,this.debug),this.framebuffer=NG(this.gl,this.debug),this.textureConfig=dG(this.gl,this.textureHalfFloatExtension)}return Object.defineProperty(e.prototype,"debug",{get:function(){return PW().getBool("DEBUG")},enumerable:!0,configurable:!0}),e.prototype.dispose=function(){var e=this;if(!this.disposed){null!=this.program&&console.warn("Disposing a GPGPUContext that still has a bound WebGLProgram. This is probably a resource leak, delete the program with GPGPUContext.deleteProgram before disposing."),null!=this.outputTexture&&console.warn("Disposing a GPGPUContext that still has a bound output matrix texture.  This is probably a resource leak, delete the output matrix texture with GPGPUContext.deleteMatrixTexture before disposing.");var t=this.gl;hG(t,this.debug,(function(){return t.finish()})),hG(t,this.debug,(function(){return t.bindFramebuffer(t.FRAMEBUFFER,null)})),hG(t,this.debug,(function(){return t.deleteFramebuffer(e.framebuffer)})),hG(t,this.debug,(function(){return t.bindBuffer(t.ARRAY_BUFFER,null)})),hG(t,this.debug,(function(){return t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null)})),hG(t,this.debug,(function(){return t.deleteBuffer(e.indexBuffer)})),this.disposed=!0}},e.prototype.createFloat32MatrixTexture=function(e,t){return this.throwIfDisposed(),GQ(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createFloat16MatrixTexture=function(e,t){return this.throwIfDisposed(),KQ(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createUnsignedBytesMatrixTexture=function(e,t){return this.throwIfDisposed(),YQ(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.uploadPixelDataToTexture=function(e,t){this.throwIfDisposed(),eJ(this.gl,this.debug,e,t)},e.prototype.uploadDenseMatrixToTexture=function(e,t,n,r){this.throwIfDisposed(),ZQ(this.gl,this.debug,e,t,n,r,this.textureConfig)},e.prototype.createFloat16PackedMatrixTexture=function(e,t){return this.throwIfDisposed(),QQ(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.createPackedMatrixTexture=function(e,t){return this.throwIfDisposed(),XQ(this.gl,this.debug,e,t,this.textureConfig)},e.prototype.deleteMatrixTexture=function(e){var t=this;this.throwIfDisposed(),this.outputTexture===e&&(LG(this.gl,this.debug,this.framebuffer),this.outputTexture=null),hG(this.gl,this.debug,(function(){return t.gl.deleteTexture(e)}))},e.prototype.downloadByteEncodedFloatMatrixFromOutputTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return rJ(r.gl,r.debug,t,n,r.textureConfig)}))},e.prototype.downloadPackedMatrixFromBuffer=function(e,t,n,r,i,o){return iJ(this.gl,e,0,0,0,i,o,this.textureConfig)},e.prototype.downloadFloat32MatrixFromBuffer=function(e,t){return nJ(this.gl,e,t)},e.prototype.createBufferFromTexture=function(e,t,n){this.bindTextureToFrameBuffer(e);var r=tJ(this.gl,this.debug,t,n,this.textureConfig);return this.unbindTextureToFrameBuffer(),r},e.prototype.createAndWaitForFence=function(){var e=this.createFence(this.gl);return this.pollFence(e)},e.prototype.createFence=function(e){var t,n,r=this;if(PW().getBool("WEBGL_FENCE_API_ENABLED")){var i=e,o=i.fenceSync(i.SYNC_GPU_COMMANDS_COMPLETE,0);e.flush(),n=function(){var e=i.clientWaitSync(o,0,0);return e===i.ALREADY_SIGNALED||e===i.CONDITION_SATISFIED},t=o}else PW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(t=this.beginQuery(),this.endQuery(),n=function(){return r.isQueryAvailable(t,PW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}):n=function(){return!0};return{query:t,isFencePassed:n}},e.prototype.downloadMatrixFromPackedTexture=function(e,t,n){var r=this;return this.downloadMatrixDriver(e,(function(){return oJ(r.gl,r.debug,t,n)}))},e.prototype.createProgram=function(e){this.throwIfDisposed();var t=this.gl,n=vG(t,this.debug,e),r=$Q(t,this.debug),i=wG(t,this.debug);return hG(t,this.debug,(function(){return t.attachShader(i,r)})),hG(t,this.debug,(function(){return t.attachShader(i,n)})),kG(t,this.debug,i),this.debug&&_G(t,this.debug,i),this.vertexAttrsAreBound||(this.setProgram(i),this.vertexAttrsAreBound=JQ(t,this.debug,this.program,this.vertexBuffer)),i},e.prototype.deleteProgram=function(e){var t=this;this.throwIfDisposed(),e===this.program&&(this.program=null),null!=e&&hG(this.gl,this.debug,(function(){return t.gl.deleteProgram(e)}))},e.prototype.setProgram=function(e){var t=this;this.throwIfDisposed(),this.program=e,null!=this.program&&this.debug&&_G(this.gl,this.debug,this.program),hG(this.gl,this.debug,(function(){return t.gl.useProgram(e)}))},e.prototype.getUniformLocation=function(e,t,n){return void 0===n&&(n=!0),this.throwIfDisposed(),n?RG(this.gl,this.debug,e,t):DG(this.gl,e,t)},e.prototype.getAttributeLocation=function(e,t){var n=this;return this.throwIfDisposed(),hG(this.gl,this.debug,(function(){return n.gl.getAttribLocation(e,t)}))},e.prototype.getUniformLocationNoThrow=function(e,t){return this.throwIfDisposed(),this.gl.getUniformLocation(e,t)},e.prototype.setInputMatrixTexture=function(e,t,n){this.throwIfDisposed(),this.throwIfNoProgram(),OG(this.gl,this.debug,this.program,e,t,n)},e.prototype.setOutputMatrixTexture=function(e,t,n){this.setOutputMatrixTextureDriver(e,n,t)},e.prototype.setOutputPackedMatrixTexture=function(e,t,n){this.throwIfDisposed();var r=cG(t,n),i=r[0],o=r[1];this.setOutputMatrixTextureDriver(e,i,o)},e.prototype.setOutputMatrixWriteRegion=function(e,t,n,r){this.setOutputMatrixWriteRegionDriver(n,e,r,t)},e.prototype.setOutputPackedMatrixWriteRegion=function(e,t,n,r){throw new Error("setOutputPackedMatrixWriteRegion not implemented.")},e.prototype.debugValidate=function(){null!=this.program&&_G(this.gl,this.debug,this.program),MG(this.gl)},e.prototype.executeProgram=function(){this.throwIfDisposed(),this.throwIfNoProgram();var e=this.gl;this.debug&&this.debugValidate(),hG(e,this.debug,(function(){return e.drawElements(e.TRIANGLES,6,e.UNSIGNED_SHORT,0)}))},e.prototype.blockUntilAllProgramsCompleted=function(){var e=this;this.throwIfDisposed(),hG(this.gl,this.debug,(function(){return e.gl.finish()}))},e.prototype.getQueryTimerExtension=function(){return null==this.disjointQueryTimerExtension&&(this.disjointQueryTimerExtension=mG(this.gl,this.debug,2===PW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")?"EXT_disjoint_timer_query_webgl2":"EXT_disjoint_timer_query")),this.disjointQueryTimerExtension},e.prototype.getQueryTimerExtensionWebGL2=function(){return this.getQueryTimerExtension()},e.prototype.getQueryTimerExtensionWebGL1=function(){return this.getQueryTimerExtension()},e.prototype.beginQuery=function(){if(2===PW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.gl,t=this.getQueryTimerExtensionWebGL2(),n=e.createQuery();return e.beginQuery(t.TIME_ELAPSED_EXT,n),n}var r=this.getQueryTimerExtensionWebGL1(),i=r.createQueryEXT();return r.beginQueryEXT(r.TIME_ELAPSED_EXT,i),i},e.prototype.endQuery=function(){if(2!==PW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")){var e=this.getQueryTimerExtensionWebGL1();e.endQueryEXT(e.TIME_ELAPSED_EXT)}else{var t=this.gl,n=this.getQueryTimerExtensionWebGL2();t.endQuery(n.TIME_ELAPSED_EXT)}},e.prototype.waitForQueryAndGetTime=function(e){return RW(this,void 0,void 0,(function(){var t=this;return DW(this,(function(n){switch(n.label){case 0:return[4,XW((function(){return t.disposed||t.isQueryAvailable(e,PW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))}))];case 1:return n.sent(),[2,this.getQueryTime(e,PW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION"))]}}))}))},e.prototype.getQueryTime=function(e,t){if(0===t)return null;if(2===t){var n=this.gl;return n.getQueryParameter(e,n.QUERY_RESULT)/1e6}var r=this.getQueryTimerExtensionWebGL1();return r.getQueryObjectEXT(e,r.QUERY_RESULT_EXT)/1e6},e.prototype.isQueryAvailable=function(e,t){if(0===t)return!0;if(2===t){var n=this.gl,r=this.getQueryTimerExtensionWebGL2(),i=n.getQueryParameter(e,n.QUERY_RESULT_AVAILABLE);return null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint}return i=(r=this.getQueryTimerExtensionWebGL1()).getQueryObjectEXT(e,r.QUERY_RESULT_AVAILABLE_EXT),null==this.disjoint&&(this.disjoint=this.gl.getParameter(r.GPU_DISJOINT_EXT)),i&&!this.disjoint},e.prototype.pollFence=function(e){var t=this;return new Promise((function(n){t.addItemToPoll((function(){return e.isFencePassed()}),(function(){return n()}))}))},e.prototype.pollItems=function(){for(var e=function(e){for(var t=0;t<e.length&&e[t]();++t);return t-1}(this.itemsToPoll.map((function(e){return e.isDoneFn}))),t=0;t<=e;++t)(0,this.itemsToPoll[t].resolveFn)();this.itemsToPoll=this.itemsToPoll.slice(e+1)},e.prototype.addItemToPoll=function(e,t){var n=this;this.itemsToPoll.push({isDoneFn:e,resolveFn:t}),this.itemsToPoll.length>1||XW((function(){return n.pollItems(),0===n.itemsToPoll.length}))},e.prototype.bindTextureToFrameBuffer=function(e){this.throwIfDisposed(),PG(this.gl,this.debug,e,this.framebuffer),this.debug&&MG(this.gl)},e.prototype.unbindTextureToFrameBuffer=function(){null!=this.outputTexture?(PG(this.gl,this.debug,this.outputTexture,this.framebuffer),this.debug&&MG(this.gl)):LG(this.gl,this.debug,this.framebuffer)},e.prototype.downloadMatrixDriver=function(e,t){this.bindTextureToFrameBuffer(e);var n=t();return this.unbindTextureToFrameBuffer(),n},e.prototype.setOutputMatrixTextureDriver=function(e,t,n){this.throwIfDisposed();var r=this.gl;PG(r,this.debug,e,this.framebuffer),this.debug&&MG(r),this.outputTexture=e,hG(r,this.debug,(function(){return r.viewport(0,0,t,n)})),hG(r,this.debug,(function(){return r.scissor(0,0,t,n)}))},e.prototype.setOutputMatrixWriteRegionDriver=function(e,t,n,r){var i=this;this.throwIfDisposed(),hG(this.gl,this.debug,(function(){return i.gl.scissor(e,t,n,r)}))},e.prototype.throwIfDisposed=function(){if(this.disposed)throw new Error("Attempted to use disposed GPGPUContext.")},e.prototype.throwIfNoProgram=function(){if(null==this.program)throw new Error("No GPU program is currently set.")},e}();function lJ(e,t){if(e.length!==t.length)throw Error("Binary was compiled with "+e.length+" inputs, but was executed with "+t.length+" inputs");e.forEach((function(e,n){var r=e.logicalShape,i=t[n],o=i.shape;if(!WW(r,o))throw Error("Binary was compiled with different shapes than the current args. Shapes "+r+" and "+o+" must match");if(!e.isUniform||!i.isUniform){var a=e.texShape,s=i.isUniform?null:i.texData.texShape;if(!WW(a,s))throw Error("Binary was compiled with different texture shapes than the current args. Shape "+a+" and "+s+" must match")}}))}var uJ=function(e,t,n){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e;for(var r=n.filterWidth,i=n.inChannels,o=n.strideWidth,a=n.strideHeight,s=n.padInfo,l=n.outWidth,u=n.dilationWidth,c=n.dilationHeight,d=n.dataFormat,h=s.left,p=s.top,f=i*r,m=LX(),g="channelsLast"===d,v=g?0:1,y=g?1:2,b="",x=0;x<=1;x++)for(var w=0;w<=1;w++)b+="\n          blockIndex = rc.y + "+w+";\n          pos = rc.x + "+x+";\n\n          if(blockIndex < "+e[1]+" && pos < "+e[0]+") {\n            offsetY = int(blockIndex / ("+l+")) * "+a+" - "+p+";\n            d0 = offsetY + "+c+" * (pos / "+f+");\n\n            if(d0 < "+t[v]+" && d0 >= 0) {\n\n              offsetX = int(mod(float(blockIndex), "+l+".) * "+o+". - "+h+".);\n              d1 = offsetX + "+u+" * (int(mod(float(pos), "+f+".) / "+i+".));\n\n              if(d1 < "+t[y]+" && d1 >= 0) {\n\n                ch = int(mod(float(pos), "+i+".));\n\n                if ("+g+") {\n                  innerDims = vec2(d1, ch);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(d0, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                } else {\n                  innerDims = vec2(d0, d1);\n                  result["+(2*x+w)+"] = getChannel(\n                    getA(ch, int(innerDims.x),\n                    int(innerDims.y)), innerDims);\n                }\n              }\n            }\n          }\n        ";this.userCode="\n      void main() {\n        ivec2 rc = getOutputCoords();\n\n        vec4 result = vec4(0);\n\n        int blockIndex, pos, offsetY, d0, offsetX, d1, ch;\n        vec2 innerDims;\n\n        "+b+"\n\n        "+m.output+" = result;\n      }\n    "},cJ=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[];var o,a=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";o=.5===i?"inversesqrt("+l+")":1===i?"1.0/("+l+")":"exp(log("+l+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n        int d = coords[3];\n        float x = getX(b, r, c, d);\n        float sum = 0.0;\n        for (int j = -"+a+"; j <= "+a+"; j++) {\n          int idx = d + j;\n          if (idx >= 0 && idx <=  "+s+") {\n            float z = getX(b, r, c, idx);\n            sum += z * z;\n          }\n        }\n        float val = x * "+o+";\n        setOutput(val);\n      }\n    "},dJ=function(e,t,n,r,i){this.variableNames=["inputImage","outputImage","dy"],this.outputShape=[],this.outputShape=e,this.depth=e[3],this.depthRadius=t,this.bias=n,this.alpha=r,this.beta=i,this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int r = coords[1];\n        int c = coords[2];\n\n        float result = 0.0;\n        for (int d = 0; d < "+this.depth+"; ++d) {\n          int depthBegin = int(max(0.0, float(d - "+t+")));\n          int depthEnd = int(min(float("+this.depth+"),\n              float(d + "+t+" + 1)));\n\n          const int MIN_DEPTH_BEGIN = 0;\n          const int MAX_DEPTH_END = "+this.depth+";\n\n          float norm = 0.0;\n          for (int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k) {\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd) {\n              norm += getInputImage(b, r, c, k) * getInputImage(b, r, c, k);\n            }\n            else {\n              break;\n            }\n          }\n\n          norm = float("+r+") * norm + float("+n+");\n\n          for(int k = MIN_DEPTH_BEGIN; k < MAX_DEPTH_END; ++k){\n            if (k < depthBegin){\n              continue;\n            }\n            else if (k >= depthBegin && k < depthEnd){\n              float dyi = -2.0 * float("+r+")\n                * float("+i+")\n                * getInputImage(b ,r ,c, k) * getOutputImage(b, r, c, d)\n                / norm;\n              if (k == d) {\n                dyi += pow(norm, -1.0 * "+i+");\n              }\n              if (k == coords[3]) {\n                dyi *= getDy(b, r, c, d);\n                result += dyi;\n              }\n            }\n            else {\n              break;\n            }\n          }\n      }\n      setOutput(result);\n      }\n    "},hJ=function(e,t,n,r,i){this.variableNames=["x"],this.outputShape=[],this.usesPackedTextures=!0;var o,a=t,s=e[3]-1;this.outputShape=e;var l="float("+n+") + float("+r+") * sum";o=.5===i?"inversesqrt("+l+")":1===i?"1.0/("+l+")":"exp(log("+l+") * float(-"+i+"));",this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords.x;\n        int r = coords.y;\n        int c = coords.z;\n        int d = coords.w;\n\n        bool hasNextCol = d < "+this.outputShape[3]+";\n        bool hasNextRow = c < "+this.outputShape[2]+";\n\n        vec4 sum = vec4(0.);\n        vec4 xFragAtOutputCoords = getX(b, r, c, d);\n\n        vec4 xAtOutputCoords = vec4(\n          getChannel(xFragAtOutputCoords, vec2(c, d)),\n          hasNextCol ?\n            getChannel(xFragAtOutputCoords, vec2(c, d + 1)) : 0.0,\n          hasNextRow ?\n            getChannel(xFragAtOutputCoords , vec2(c + 1, d)) : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getChannel(xFragAtOutputCoords, vec2(c + 1, d + 1)) : 0.0\n        );\n\n        int firstChannel = d - "+a+";\n        vec2 cache = vec2(0.);\n        if(firstChannel >= 0){\n          vec4 firstChannelFrag = getX(b, r, c, firstChannel);\n          cache.x = getChannel(firstChannelFrag, vec2(c, firstChannel));\n            if(hasNextRow){\n              cache.y = getChannel(firstChannelFrag, vec2(c + 1, firstChannel));\n            }\n        }\n\n        ivec2 depth = ivec2(d, d + 1);\n        for (int j = - "+a+"; j <= "+a+"; j++) {\n          ivec2 idx = depth + j;\n          bvec2 aboveLowerBound = greaterThanEqual(idx, ivec2(0));\n          bvec2 belowUpperBound = lessThanEqual(idx, ivec2("+s+"));\n\n          bool depthInRange = aboveLowerBound.x && belowUpperBound.x;\n          bool depthPlusOneInRange = aboveLowerBound.y && belowUpperBound.y;\n\n          if(depthInRange || depthPlusOneInRange){\n            vec4 z = vec4(0.);\n            vec4 xFragAtCurrentDepth;\n            z.xz = cache.xy;\n            if(depthPlusOneInRange && hasNextCol){\n              xFragAtCurrentDepth = idx.y != d ?\n                getX(b, r, c, idx.y) : xFragAtOutputCoords;\n              z.y = getChannel(xFragAtCurrentDepth, vec2(c, idx.y));\n              if(hasNextRow){\n                z.w = getChannel(xFragAtCurrentDepth, vec2(c + 1, idx.y));\n              }\n            }\n            cache.xy = z.yw;\n            sum += z * z;\n          }\n        }\n        vec4 result = xAtOutputCoords * "+o+";\n        setOutput(result);\n      }\n    "},pJ=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideHeight,n=e.strideWidth,r=e.dilationHeight,i=e.effectiveFilterHeight,o=e.effectiveFilterWidth,a=i-1-e.padInfo.top,s=o-1-e.padInfo.left,l=i*o-1;this.userCode="\n      const ivec2 pads = ivec2("+a+", "+s+");\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n\n        ivec2 dyRCCorner = coords.yz - pads;\n        int dyRCorner = dyRCCorner.x;\n        int dyCCorner = dyRCCorner.y;\n\n        // Convolve dy(?, ?, d) with pos mask(:, :, d) to get dx(xR, xC, d).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n        for (int wR = 0; wR < "+i+";\n          wR += "+r+") {\n          float dyR = float(dyRCorner + wR) / "+t+".0;\n\n          if (dyR < 0.0 || dyR >= "+e.outHeight+".0 || fract(dyR) > 0.0) {\n            continue;\n          }\n          int idyR = int(dyR);\n\n          for (int wC = 0; wC < "+o+"; wC++) {\n            float dyC = float(dyCCorner + wC) / "+n+".0;\n\n            if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                fract(dyC) > 0.0) {\n              continue;\n            }\n            int idyC = int(dyC);\n\n            float dyValue = getDy(b, idyR, idyC, d);\n            int maxPosValue = "+l+" - int(getMaxPos(b, idyR, idyC, d));\n\n            // Get the current value, check it against the value from the\n            // position matrix.\n            int curPosValue = wR * "+o+" + wC;\n            float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n            dotProd += dyValue * mask;\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},fJ=function(e){this.variableNames=["dy","maxPos"],this.outputShape=e.inShape;var t=e.strideDepth,n=e.strideHeight,r=e.strideWidth,i=e.dilationDepth,o=e.dilationHeight,a=e.dilationWidth,s=e.effectiveFilterDepth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=s-1-e.padInfo.front,d=l-1-e.padInfo.top,h=u-1-e.padInfo.left,p=s*l*u-1;this.userCode="\n      const ivec3 pads = ivec3("+c+", "+d+", "+h+");\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 dyCorner = ivec3(coords.y, coords.z, coords.w) - pads;\n        int dyDCorner = dyCorner.x;\n        int dyRCorner = dyCorner.y;\n        int dyCCorner = dyCorner.z;\n\n        // Convolve dy(?, ?, ?, ch) with pos mask(:, :, :, d) to get\n        // dx(xD, xR, xC, ch).\n        // ? = to be determined. : = across all values in that axis.\n        float dotProd = 0.0;\n\n        for (int wD = 0; wD < "+s+";\n           wD += "+i+") {\n          float dyD = float(dyDCorner + wD) / "+t+".0;\n\n          if (dyD < 0.0 || dyD >= "+e.outDepth+".0 || fract(dyD) > 0.0) {\n            continue;\n          }\n          int idyD = int(dyD);\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+o+") {\n            float dyR = float(dyRCorner + wR) / "+n+".0;\n\n            if (dyR < 0.0 || dyR >= "+e.outHeight+".0 ||\n                fract(dyR) > 0.0) {\n              continue;\n            }\n            int idyR = int(dyR);\n\n            for (int wC = 0; wC < "+u+";\n                wC += "+a+") {\n              float dyC = float(dyCCorner + wC) / "+r+".0;\n\n              if (dyC < 0.0 || dyC >= "+e.outWidth+".0 ||\n                  fract(dyC) > 0.0) {\n                continue;\n              }\n              int idyC = int(dyC);\n\n              float dyValue = getDy(batch, idyD, idyR, idyC, ch);\n              int maxPosValue = "+p+" -\n                  int(getMaxPos(batch, idyD, idyR, idyC, ch));\n\n              // Get the current value, check it against the value from the\n              // position matrix.\n              int curPosValue =\n                  wD * "+l+" * "+u+" +\n                  wR * "+u+" + wC;\n              float mask = float(maxPosValue == curPosValue ? 1.0 : 0.0);\n\n              dotProd += dyValue * mask;\n            }\n          }\n        }\n        setOutput(dotProd);\n      }\n    "},mJ=function(e,t,n,r,i,o,a){void 0===n&&(n=!1),void 0===r&&(r=!1),void 0===i&&(i=!1),void 0===o&&(o=null),void 0===a&&(a=!1),this.variableNames=["matrixA","matrixB"],this.usesPackedTextures=!0,this.outputShape=t;var s=n?e[1]:e[2],l=Math.ceil(s/2),u=n?"i * 2, rc.y":"rc.y, i * 2",c=r?"rc.z, i * 2":"i * 2, rc.z",d=n?["a.xxyy","a.zzww"]:["a.xxzz","a.yyww"],h=r?["b.xzxz","b.ywyw"]:["b.xyxy","b.zwzw"],p="",f="";o&&(p=a?"vec4 activation(vec4 a) {\n          vec4 b = getPreluActivationWeightsAtOutCoords();\n          "+o+"\n        }":"vec4 activation(vec4 x) {\n          "+o+"\n        }",f="result = activation(result);");var m=i?"result += getBiasAtOutCoords();":"";i&&this.variableNames.push("bias"),a&&this.variableNames.push("preluActivationWeights"),this.userCode="\n      "+p+"\n\n      const float sharedDimension = "+l+".0;\n\n      vec4 dot2x2ARowBCol(ivec3 rc) {\n        vec4 result = vec4(0);\n        for (int i = 0; i < "+l+"; i++) {\n          vec4 a = getMatrixA(rc.x, "+u+");\n          vec4 b = getMatrixB(rc.x, "+c+");\n\n          // These swizzled products need to be separately added.\n          // See: https://github.com/tensorflow/tfjs/issues/1735\n          result += ("+d[0]+" * "+h[0]+");\n          result += ("+d[1]+" * "+h[1]+");\n        }\n        return result;\n      }\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n        vec4 result = dot2x2ARowBCol(rc);\n\n        "+m+"\n\n        "+f+"\n\n        setOutput(result);\n      }\n    "},gJ=function(){function e(e,t,n){this.variableNames=["probs"],this.outputShape=[e,n],this.userCode="\n      uniform float seed;\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n\n        float r = random(seed);\n        float cdf = 0.0;\n\n        for (int i = 0; i < "+(t-1)+"; i++) {\n          cdf += getProbs(batch, i);\n\n          if (r < cdf) {\n            setOutput(float(i));\n            return;\n          }\n        }\n\n        // If no other event happened, last event happened.\n        setOutput(float("+(t-1)+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;return function(n,r){null==t.seedLoc&&(t.seedLoc=n.getUniformLocation(r,"seed")),n.gl.uniform1f(t.seedLoc,e)}},e}(),vJ=function(e,t,n,r){this.variableNames=["indices"],this.outputShape=[e,t],this.userCode="\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int index = round(getIndices(coords.x));\n        setOutput(mix(float("+r+"), float("+n+"),\n                      float(index == coords.y)));\n      }\n    "},yJ=function(e){this.variableNames=["A"],this.outputShape=e;var t=e.length;if(0===t)this.userCode="\n        void main() {\n          setOutput(vec4(getA(), 0., 0., 0.));\n        }\n      ";else{var n=PX("rc",t),r=KX(t),i=function(e,t,n){if(1===e)return"rc > "+t[0];for(var r="",i=e-2;i<e;i++)r+=n[i]+" >= "+t[i],i<e-1&&(r+="||");return r}(t,e,n),o=function(e,t,n,r){if(1===e)return"";var i=r.slice(-2);return"\n    int r = "+i[0]+";\n    int c = "+i[1]+";\n    int rp1 = r + 1;\n    int cp1 = c + 1;\n\n    bool cEdge = cp1 >= "+t+";\n    bool rEdge = rp1 >= "+n+";\n  "}(t,e[e.length-1],e[e.length-2],n),a=function(e,t){var n=e.length,r=function(e,t){for(var n=[],r=0;r<=1;r++)for(var i=0;i<=1;i++){for(var o=(0===r?"r":"rp1")+", "+(0===i?"c":"cp1"),a=2;a<e;a++)o=t[t.length-1-a]+","+o;n.push(o)}return n}(n,t);return 1===n?"getA(rc),\n            rc + 1 >= "+e[0]+" ? 0. : getA(rc + 1),\n            0, 0":"getA("+r[0]+"),\n          cEdge ? 0. : getA("+r[1]+"),\n          rEdge ? 0. : getA("+r[2]+"),\n          rEdge || cEdge ? 0. : getA("+r[3]+")"}(e,n);this.userCode="\n        void main() {\n          "+r+" rc = getOutputCoords();\n\n          if("+i+") {\n            setOutput(vec4(0));\n          } else {\n            "+o+"\n\n            setOutput(vec4("+a+"));\n          }\n        }\n      "}},bJ=function(e,t,n){this.variableNames=["x"],this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));var r=e.length,i=KX(r),o=t.map((function(e){return e[0]})).join(","),a=t.map((function(t,n){return t[0]+e[n]})).join(","),s=["coords[0]","coords[1]","coords[2]","coords[3]"].slice(0,r);this.userCode=1!==r?"\n      "+i+" start = "+i+"("+o+");\n      "+i+" end = "+i+"("+a+");\n\n      void main() {\n        "+i+" outC = getOutputCoords();\n        if (any(lessThan(outC, start)) || any(greaterThanEqual(outC, end))) {\n          setOutput(float("+n+"));\n        } else {\n          "+i+" coords = outC - start;\n          setOutput(getX("+s+"));\n        }\n      }\n    ":"\n        int start = "+o+";\n        int end = "+a+";\n\n        void main() {\n          int outC = getOutputCoords();\n          if (outC < start || outC >= end) {\n            setOutput(float("+n+"));\n          } else {\n            setOutput(getX(outC - start));\n          }\n        }\n      "},xJ=function(e,t,n){this.variableNames=["x"],this.usesPackedTextures=!0,this.outputShape=t.map((function(t,n){return t[0]+e[n]+t[1]}));for(var r=e.length,i=KX(r),o=t.map((function(e){return e[0]})).join(","),a=t.map((function(t,n){return t[0]+e[n]})).join(","),s=PX("rc",r),l=PX("source",r),u=s[r-1]+" < "+this.outputShape[r-1],c=1===r?"source":"vec2("+l.slice(-2).join()+")",d=[i+" rc = outputLoc;",s[r-1]+" += 1;\n       if("+u+") {\n      ",1===r?"":"}\n       rc = outputLoc;\n       "+s[r-2]+" += 1;\n       if("+s[r-2]+" < "+this.outputShape[r-2]+") {",1===r?"":"  "+s[r-1]+" += 1;\n         if("+u+") {"],h=1===r?"rc < start || rc >= end":"any(lessThan(rc, start)) || any(greaterThanEqual(rc, end))",p="",f=0,m=1===r?2:4;f<m;f++)p+="\n        "+d[f]+"\n        if ("+h+") {\n          result["+f+"] = float("+n+");\n        } else {\n          "+i+" source = rc - start;\n          result["+f+"] = getChannel(getX("+l.join()+"), "+c+");\n        }\n      ";p+=1===r?"} ":"}}",this.userCode="\n      const "+i+" start = "+i+"("+o+");\n      const "+i+" end = "+i+"("+a+");\n\n      void main() {\n        "+i+" outputLoc = getOutputCoords();\n        vec4 result = vec4(0.);\n        "+p+"\n        setOutput(result);\n      }\n    "},wJ=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,i=e.strideHeight,o=e.strideWidth,a=e.dilationHeight,s=e.dilationWidth,l=e.effectiveFilterHeight,u=e.effectiveFilterWidth,c=e.padInfo.top,d=e.padInfo.left;this.outputShape=e.outShape;var h="avg"===t,p="0.0";if(h||(p="-1.0 / 1e-20"),n)this.userCode="\n        const ivec2 strides = ivec2("+i+", "+o+");\n        const ivec2 pads = ivec2("+c+", "+d+");\n\n        void main() {\n          ivec4 coords = getOutputCoords();\n          int batch = coords[0];\n          int d = coords[3];\n\n          ivec2 xRCCorner = coords.yz * strides - pads;\n          int xRCorner = xRCCorner.x;\n          int xCCorner = xRCCorner.y;\n\n          // max/min x(?, ?, d) to get y(yR, yC, d).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n          float avgValue = 0.0;\n\n          for (int wR = 0; wR < "+l+";\n              wR += "+a+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+u+";\n                wC += "+s+") {\n              int xC = xCCorner + wC;\n\n              if (xC < 0 || xC >= "+e.inWidth+") {\n                continue;\n              }\n\n              float value = getX(batch, xR, xC, d);\n\n              // If a min / max value has already been found, use it. If not,\n              // use the current value.\n              float currMinMaxValue = mix(\n                  value, minMaxValue, minMaxValueFound);\n              if (value >= currMinMaxValue) {\n                minMaxValue = value;\n                minMaxValueFound = 1.0;\n                minMaxPosition = wR * "+u+" + wC;\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var f=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(f="avgValue / count");var m=4*Math.floor(r/4),g=r%4,v="\n      if ("+h+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec2 strides = ivec2("+i+", "+o+");\n      const ivec2 pads = ivec2("+c+", "+d+");\n      const float initializationValue = "+p+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xR, int xC, int d) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xR, xC, d);\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int batch = coords[0];\n        int d = coords[3];\n\n        ivec2 xRCCorner = coords.yz * strides - pads;\n        int xRCorner = xRCCorner.x;\n        int xCCorner = xRCCorner.y;\n\n        // max/min x(?, ?, d) to get y(yR, yC, d).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+p+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wR = 0; wR < "+l+";\n            wR += "+a+") {\n          int xR = xRCorner + wR;\n\n          if (xR < 0 || xR >= "+e.inHeight+") {\n            continue;\n          }\n\n          for (int wC = 0; wC < "+m+"; wC += 4) {\n            int xC = xCCorner + wC * "+s+";\n\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              getValue(batch, xR, xC + 3 * "+s+", d)\n            );\n\n            "+v+"\n          }\n\n          int xC = xCCorner + "+m+";\n          if ("+(1===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              initializationValue,\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(2===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              initializationValue,\n              initializationValue\n            );\n\n            "+v+"\n          } else if ("+(3===g)+") {\n            vec4 values = vec4(\n              getValue(batch, xR, xC, d),\n              getValue(batch, xR, xC + "+s+", d),\n              getValue(batch, xR, xC + 2 * "+s+", d),\n              initializationValue\n            );\n\n            "+v+"\n          }\n        }\n        setOutput("+f+");\n      }\n    "}},kJ=function(e,t,n){if(this.variableNames=["x"],"avg"===t&&n)throw new Error("Cannot compute positions for average pool.");var r=e.filterWidth,i=e.strideDepth,o=e.strideHeight,a=e.strideWidth,s=e.dilationDepth,l=e.dilationHeight,u=e.dilationWidth,c=e.effectiveFilterDepth,d=e.effectiveFilterHeight,h=e.effectiveFilterWidth,p=e.padInfo.front,f=e.padInfo.top,m=e.padInfo.left;this.outputShape=e.outShape;var g="avg"===t,v="0.0";if(g||(v="-1.0 / 1e-20"),n)this.userCode="\n        const ivec3 strides =\n            ivec3("+i+", "+o+", "+a+");\n        const ivec3 pads = ivec3("+p+", "+f+", "+m+");\n\n        void main() {\n          ivec5 coords = getOutputCoords();\n          int batch = coords.x;\n          int ch = coords.u;\n\n          ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n          int xDCorner = xCorner.x;\n          int xRCorner = xCorner.y;\n          int xCCorner = xCorner.z;\n\n          // max/min x(?, ?, ?, ch) to get y(yD, yR, yC, ch).\n          // ? = to be determined\n          float minMaxValue = 0.0;\n          float minMaxValueFound = 0.0;\n          int minMaxPosition = 0;\n\n          for (int wD = 0; wD < "+c+";\n              wD += "+s+") {\n            int xD = xDCorner + wD;\n\n            if (xD < 0 || xD >= "+e.inDepth+") {\n              continue;\n            }\n\n            for (int wR = 0; wR < "+d+";\n                wR += "+l+") {\n              int xR = xRCorner + wR;\n\n              if (xR < 0 || xR >= "+e.inHeight+") {\n                continue;\n              }\n\n              for (int wC = 0; wC < "+h+";\n                  wC += "+u+") {\n                int xC = xCCorner + wC;\n\n                if (xC < 0 || xC >= "+e.inWidth+") {\n                  continue;\n                }\n\n                float value = getX(batch, xD, xR, xC, ch);\n\n                // If a min / max value has already been found, use it. If not,\n                // use the current value.\n                float currMinMaxValue = mix(\n                    value, minMaxValue, minMaxValueFound);\n                if (value >= currMinMaxValue) {\n                  minMaxValue = value;\n                  minMaxValueFound = 1.0;\n                  minMaxPosition =\n                      wD * "+d+" * "+h+" +\n                      wR * "+h+" + wC;;\n                }\n              }\n            }\n          }\n          setOutput(float(minMaxPosition));\n        }\n      ";else{var y=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"avg"===t&&(y="avgValue / count");var b=4*Math.floor(r/4),x=r%4,w="\n      if ("+g+") {\n        avgValue += dot(values, ones);\n      } else {\n        minMaxValue = max(values, minMaxValue);\n      }\n    ";this.userCode="\n      const ivec3 strides =\n        ivec3("+i+", "+o+", "+a+");\n      const ivec3 pads = ivec3("+p+", "+f+", "+m+");\n      const float initializationValue = "+v+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float count = 0.0;\n\n      float getValue(int batch, int xD, int xR, int xC, int ch) {\n        if (xC < 0 || xC >= "+e.inWidth+") {\n          return initializationValue;\n        }\n        count += 1.0;\n        return getX(batch, xD, xR, xC, ch);\n      }\n\n      void main() {\n        ivec5 coords = getOutputCoords();\n        int batch = coords.x;\n        int ch = coords.u;\n\n        ivec3 xCorner = ivec3(coords.y, coords.z, coords.w) * strides - pads;\n        int xDCorner = xCorner.x;\n        int xRCorner = xCorner.y;\n        int xCCorner = xCorner.z;\n\n        // max/min x(?, ?, ?, d) to get y(yD, yR, yC, ch).\n        // ? = to be determined\n        vec4 minMaxValue = vec4("+v+");\n        float avgValue = 0.0;\n        count = 0.0;\n\n        for (int wD = 0; wD < "+c+";\n            wD += "+s+") {\n          int xD = xDCorner + wD;\n\n          if (xD < 0 || xD >= "+e.inDepth+") {\n            continue;\n          }\n\n          for (int wR = 0; wR < "+d+";\n            wR += "+l+") {\n            int xR = xRCorner + wR;\n\n            if (xR < 0 || xR >= "+e.inHeight+") {\n              continue;\n            }\n\n            for (int wC = 0; wC < "+b+"; wC += 4) {\n              int xC = xCCorner + wC * "+u+";\n\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+u+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+u+", ch),\n                getValue(batch, xD, xR, xC + 3 * "+u+", ch)\n              );\n\n              "+w+"\n            }\n\n            int xC = xCCorner + "+b+";\n            if ("+(1===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                initializationValue,\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(2===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+u+", ch),\n                initializationValue,\n                initializationValue\n              );\n\n              "+w+"\n            } else if ("+(3===x)+") {\n              vec4 values = vec4(\n                getValue(batch, xD, xR, xC, ch),\n                getValue(batch, xD, xR, xC + "+u+", ch),\n                getValue(batch, xD, xR, xC + 2 * "+u+", ch),\n                initializationValue\n              );\n\n              "+w+"\n            }\n          }\n          setOutput("+y+");\n        }\n      }\n    "}},_J=function(e,t){this.variableNames=["x"];var n=e.windowSize,r=e.batchSize,i=e.inSize,o=Math.ceil(i/n);this.outputShape=[r,o];var a="0.0",s="";"prod"===t?a="1.0":"min"===t?(a="1.0 / 1e-20",s="min"):"max"===t&&(a="-1.0 / 1e-20",s="max");var l=t+"("+t+"("+t+"(minMaxValue[0], minMaxValue[1]), minMaxValue[2]), minMaxValue[3])";"sum"===t?l="sumValue":"prod"===t?l="prodValue":"all"===t?l="allValue":"any"===t&&(l="anyValue");var u=4*Math.floor(n/4),c=n%4,d="\n      if ("+("sum"===t)+") {\n        sumValue += dot(values, ones);\n      } else if ("+("prod"===t)+") {\n        vec2 tmp = vec2(values[0], values[1]) * vec2(values[2], values[3]);\n        prodValue *= tmp[0] * tmp[1];\n      } else {\n        minMaxValue = "+s+"(values, minMaxValue);\n      }\n    ",h="vec4";"all"===t?(a="1.0",d="\n        bool reducedAllValue = all(values);\n        float floatedReducedAllValue = float(reducedAllValue);\n        allValue = float(allValue >= 1.0 && floatedReducedAllValue >= 1.0);\n      ",h="bvec4"):"any"===t&&(a="0.0",d="\n        bool reducedAnyValue = any(values);\n        float floatedReducedAnyValue = float(reducedAnyValue);\n        anyValue = float(anyValue >= 1.0 || floatedReducedAnyValue >= 1.0);\n      ",h="bvec4");var p="";i%n>0&&(p="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      "),this.userCode="\n      const float initializationValue = "+a+";\n      const vec4 ones = vec4(1.0, 1.0, 1.0, 1.0);\n\n      float getValue(int batch, int inIdx) {\n        "+p+"\n        return getX(batch, inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = outIdx * "+n+";\n\n        vec4 minMaxValue = vec4("+a+");\n        float prodValue = 1.0;\n        float sumValue = 0.0;\n        float allValue = 1.0;\n        float anyValue = 0.0;\n\n        for (int i = 0; i < "+u+"; i += 4) {\n          int inIdx = inOffset + i;\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          "+d+"\n        }\n\n        int inIdx = inOffset + "+u+";\n        if ("+(1===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(2===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          "+d+"\n        } else if ("+(3===c)+") {\n          "+h+" values = "+h+"(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          "+d+"\n        }\n        setOutput("+l+");\n      }\n    "},EJ=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e;for(var n="",r=0;r<4;r++){var i="thisRC = rc;";r%2==1&&(i+="thisRC.z += 1;"),r>1&&(i+="thisRC.y += 1;"),n+="\n        "+i+"\n        "+(r>0?"if(thisRC.y < rows && thisRC.z < cols){":"")+"\n          int flatIndex = getFlatIndex(thisRC);\n\n          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flatIndex);\n          vec2 inputRCInnerDims = vec2(float(inputRC.y),float(inputRC.z));\n\n          result["+r+"] =\n            getChannel(getA(inputRC.x, inputRC.y, inputRC.z), inputRCInnerDims);\n        "+(r>0?"}":"")+"\n      "}this.userCode="\n      \n    ivec3 inputCoordsFromReshapedOutCoords(int index) {\n      "+MX(["r","c","d"],t)+"\n      return ivec3(r, c, d);\n    }\n  \n      "+FX(e)+"\n\n      void main() {\n        ivec3 rc = getOutputCoords();\n\n        vec4 result = vec4(0.);\n\n        ivec3 thisRC;\n        int rows = "+e[1]+";\n        int cols = "+e[2]+";\n\n        "+n+"\n\n        setOutput(result);\n      }\n    "},CJ=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],o=r[2],a=e.shape,s=a[1],l=a[2],u=[n&&s>1?i-1:i,n&&l>1?o-1:o],c=[n&&s>1?s-1:s,n&&l>1?l-1:l],d=u[0]/c[0],h=u[1]/c[1],p=1/d,f=1/h,m=2*Math.ceil(p)+2,g=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(startRLerp - float(winHeight / 2));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(startCLerp - float(winWidth / 2));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float dxR = float(dyR) * heightScale;\n            int topDxRIndex = int(floor(dxR));\n            int bottomDxRIndex = int(min(ceil(dxR), "+(i-1)+".0));\n            float dxRLerp = dxR - float(topDxRIndex);\n            float inverseDxRLerp = 1.0 - dxRLerp;\n\n            float dxC = float(dyC) * widthScale;\n            int leftDxCIndex = int(floor(dxC));\n            int rightDxCIndex = int(min(ceil(dxC), "+(o-1)+".0));\n            float dxCLerp = dxC - float(leftDxCIndex);\n            float inverseDxCLerp = 1.0 - dxCLerp;\n\n            if (r == topDxRIndex && c == leftDxCIndex) {\n              // topLeft\n              accumulator +=\n                getDy(b, dyR, dyC, d) * inverseDxRLerp * inverseDxCLerp;\n            }\n\n            if (r == topDxRIndex && c == rightDxCIndex) {\n              // topRight\n              accumulator += getDy(b, dyR, dyC, d) * inverseDxRLerp * dxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == leftDxCIndex) {\n              // bottomLeft\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * inverseDxCLerp;\n            }\n\n            if (r == bottomDxRIndex && c == rightDxCIndex) {\n              // bottomRight\n              accumulator += getDy(b, dyR, dyC, d) * dxRLerp * dxCLerp;\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},IJ=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],o=e[1],a=e[2],s=e[3];this.outputShape=[i,t,n,s];var l=[r&&t>1?o-1:o,r&&n>1?a-1:a],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+l[0]/u[0]+",\n          "+l[1]/u[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec2 sourceFloorRC = ivec2(sourceFracIndexRC);\n        ivec2 sourceCeilRC = ivec2(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n\n        float topLeft = getA(b, sourceFloorRC.x, sourceFloorRC.y, d);\n        float bottomLeft = getA(b, sourceCeilRC.x, sourceFloorRC.y, d);\n        float topRight = getA(b, sourceFloorRC.x, sourceCeilRC.y, d);\n        float bottomRight = getA(b, sourceCeilRC.x, sourceCeilRC.y, d);\n\n        vec2 fracRC = sourceFracIndexRC - vec2(sourceFloorRC);\n\n        float top = topLeft + (topRight - topLeft) * fracRC.y;\n        float bottom = bottomLeft + (bottomRight - bottomLeft) * fracRC.y;\n        float newValue = top + (bottom - top) * fracRC.x;\n\n        setOutput(newValue);\n      }\n    "},SJ=function(e,t,n,r){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=[];var i=e[0],o=e[1],a=e[2],s=e[3];this.outputShape=[i,t,n,s];var l=[r&&t>1?o-1:o,r&&n>1?a-1:a],u=[r&&t>1?t-1:t,r&&n>1?n-1:n];this.userCode="\n      const vec3 effectiveInputOverOutputRatioRC = vec3(\n          "+l[0]/u[0]+",\n          "+l[1]/u[1]+",\n          "+l[1]/u[1]+");\n      const vec3 inputShapeRC = vec3("+o+".0, "+a+".0,\n                                     "+a+".0);\n\n      float getAValue(int b, int r, int c, int d) {\n        return getChannel(getA(b, r, c, d), vec2(c, d));\n      }\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        // Calculate values for next column in yRC.z.\n        ivec3 yRC = coords.yzz + ivec3(0, 0, 1);\n\n        // Fractional source index.\n        vec3 sourceFracIndexRC = vec3(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the four integer indices.\n        ivec3 sourceFloorRC = ivec3(sourceFracIndexRC);\n        ivec3 sourceCeilRC = ivec3(\n          min(inputShapeRC - 1.0, ceil(sourceFracIndexRC)));\n        \n        // Should we calculate next column and row elements in 2x2 packed cell.\n        bool hasNextCol = d < "+(s-1)+"; \n        bool hasNextRow = coords.z < "+(n-1)+";\n\n        // In parallel, construct four corners for all four components in\n        // packed 2x2 cell.\n        vec4 topLeft = vec4(\n          getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 bottomLeft = vec4(\n          getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceFloorRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceFloorRC.z, d + 1) : 0.0);\n\n        vec4 topRight = vec4(\n          getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceFloorRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceFloorRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec4 bottomRight = vec4(\n          getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d),\n          hasNextCol ? getAValue(b, sourceCeilRC.x, sourceCeilRC.y, d + 1)\n                     : 0.0,\n          hasNextRow ? getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d)\n                     : 0.0,\n          (hasNextRow && hasNextCol) ?\n            getAValue(b, sourceCeilRC.x, sourceCeilRC.z, d + 1) : 0.0);\n\n        vec3 fracRC = sourceFracIndexRC - vec3(sourceFloorRC);\n\n        vec4 top = mix(topLeft, topRight, fracRC.yyzz);\n        vec4 bottom = mix(bottomLeft, bottomRight, fracRC.yyzz);\n        vec4 newValue = mix(top, bottom, fracRC.x);\n\n        setOutput(newValue);\n      }\n    "},NJ=function(e,t,n){this.variableNames=["dy"],this.outputShape=[],this.outputShape=t.shape;var r=t.shape,i=r[1],o=r[2],a=e.shape,s=a[1],l=a[2],u=[n&&s>1?i-1:i,n&&l>1?o-1:o],c=[n&&s>1?s-1:s,n&&l>1?l-1:l],d=u[0]/c[0],h=u[1]/c[1],p=1/d,f=1/h,m=2*Math.ceil(p)+2,g=2*Math.ceil(f)+2;this.userCode="\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        int r = coords[1];\n        int c = coords[2];\n\n        float accumulator = 0.0;\n\n        const float heightScale = float("+d+");\n        const float widthScale = float("+h+");\n\n        const float invHeightScale = float("+p+");\n        const float invWidthScale = float("+f+");\n\n        const int winHeight = int("+m+");\n        const int winWidth = int("+g+");\n\n        // Compute bounds for where in dy we will look\n        float startRLerp = floor(float(r) * invHeightScale);\n        int startDyR = int(floor(startRLerp - float(winHeight / 2)));\n\n        float startCLerp = floor(float(c) * invWidthScale);\n        int startDyC = int(floor(startCLerp - float(winWidth / 2)));\n\n        // Loop over dy\n        for (int dyROffset = 0; dyROffset < winHeight; dyROffset++) {\n          int dyR = dyROffset + startDyR;\n\n          // Guard against the window exceeding the bounds of dy\n          if (dyR < 0 || dyR >= "+s+") {\n            continue;\n          }\n\n          for (int dyCOffset = 0; dyCOffset < winWidth; dyCOffset++) {\n            int dyC = dyCOffset + startDyC;\n\n            // Guard against the window exceeding the bounds of dy\n            if (dyC < 0 || dyC >= "+l+") {\n              continue;\n            }\n\n            float sourceFracRow =\n              float("+u[0]+") *\n                (float(dyR) / float("+c[0]+"));\n\n            float sourceFracCol =\n                float("+u[1]+") *\n                  (float(dyC) / float("+c[1]+"));\n\n            int sourceNearestRow = int(min(\n                float(int("+i+") - 1),\n                "+n+" ? float(round(sourceFracRow)) :\n                                  float(floor(sourceFracRow))));\n\n            int sourceNearestCol = int(min(\n                float(int("+o+") - 1),\n                "+n+" ? float(round(sourceFracCol)) :\n                                  float(floor(sourceFracCol))));\n\n            if (r == sourceNearestRow && c == sourceNearestCol) {\n              accumulator += getDy(b, dyR, dyC, d);\n            }\n          }\n        }\n        // End loop over dy\n\n        setOutput(accumulator);\n      }\n    "},TJ=function(e,t,n,r){this.variableNames=["A"],this.outputShape=[];var i=e[0],o=e[1],a=e[2],s=e[3];this.outputShape=[i,t,n,s];var l=[r&&t>1?o-1:o,r&&n>1?a-1:a],u=[r&&t>1?t-1:t,r&&n>1?n-1:n],c=r?"0.5":"0.0";this.userCode="\n      const vec2 effectiveInputOverOutputRatioRC = vec2(\n          "+l[0]/u[0]+",\n          "+l[1]/u[1]+");\n      const vec2 inputShapeRC = vec2("+o+".0, "+a+".0);\n\n      void main() {\n        ivec4 coords = getOutputCoords();\n        int b = coords[0];\n        int d = coords[3];\n        ivec2 yRC = coords.yz;\n\n        // Fractional source index.\n        vec2 sourceFracIndexRC = vec2(yRC) * effectiveInputOverOutputRatioRC;\n\n        // Compute the coordinators of nearest neighbor point.\n        ivec2 sourceNearestRC = ivec2(\n          min(inputShapeRC - 1.0, floor(sourceFracIndexRC + "+c+")));\n\n        float newValue = getA(b, sourceNearestRC.x, sourceNearestRC.y, d);\n\n        setOutput(newValue);\n      }\n    "},AJ=function(e,t){this.variableNames=["x"];var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");if(this.outputShape=e,1!==n){var r=e.map((function(n,r){return function(n){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - coords["+n+"] - 1":"coords["+n+"]"}(r)})).join(","),i=KX(n);this.userCode="\n      void main() {\n        "+i+" coords = getOutputCoords();\n        setOutput(getX("+r+"));\n      }\n    "}else this.userCode="\n        void main() {\n          int coord = getOutputCoords();\n          setOutput(getX("+e[0]+" - coord - 1));\n        }\n      "},RJ=function(e,t){this.variableNames=["x"],this.usesPackedTextures=!0;var n=e.length;if(n>4)throw new Error("WebGL backend: Reverse of rank-"+n+" tensor is not yet supported");this.outputShape=e;var r=PX("rc",n),i=r[n-1]+" + 1 < "+this.outputShape[n-1],o=r[n-2]+" + 1 < "+this.outputShape[n-2],a=KX(n);function s(n){var r=e.map((function(r,i){return function(n,r){return-1!==t.indexOf(n)&&1!==e[n]?e[n]+" - "+r[n]+" - 1":""+r[n]}(i,n)}));return"getChannel(getX("+r.join(",")+"), vec2("+r.slice(-2).join(",")+"))"}this.userCode=1===n?"\n        void main(){\n          int rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = getChannel(getX("+e[0]+" - rc - 1),\n            "+e[0]+" - rc - 1);\n          if("+i+"){\n              result.g = getChannel(getX("+e[0]+" - (rc  + 1) - 1),\n                "+e[0]+" - (rc  + 1) - 1);\n          }\n          setOutput(result);\n        }\n      ":"\n        void main() {\n          "+a+" rc = getOutputCoords();\n          vec4 result = vec4(0.);\n          result.r = "+function(e){return s(e)}(r.slice())+";\n          if("+i+"){\n            result.g = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",s(e)}(r.slice())+";\n          }\n          if("+o+") {\n            result.b = "+function(e){return e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            if("+i+") {\n              result.a = "+function(e){return e[n-1]="("+e[n-1]+" + 1)",e[n-2]="("+e[n-2]+" + 1)",s(e)}(r.slice())+";\n            }\n          }\n          setOutput(result);\n        }\n    "},DJ=function(e,t,n,r,i,o,a){this.variableNames=["updates","indices","defaultValue"],this.outputShape=o;var s=KX(i.length),l=KX(o.length),u="";1===n?u="i":2===n&&(u="i, j");var c="getIndices("+u+")",d="";1===r?d="i":2===r&&(d="i, coords[1]");var h="getUpdates("+d+")",p=t>1?"strides[j]":"strides";this.userCode="\n        "+s+" strides = "+s+"("+i+");\n\n        void main() {\n          "+l+" coords = getOutputCoords();\n          float sum = 0.0;\n          bool found = false;\n          for (int i = 0; i < "+e+"; i++) {\n            int flattenedIndex = 0;\n            for (int j = 0; j < "+t+"; j++) {\n              int index = round("+c+");\n              flattenedIndex += index * "+p+";\n            }\n            if (flattenedIndex == coords[0]) {\n              sum += "+h+";\n              found = true;\n            }\n          }\n          setOutput(mix(getDefaultValue(), sum, float(found)));\n        }\n      "},OJ=function(e,t){this.variableNames=["x","segmentIds"];var n=e.windowSize,r=e.batchSize,i=e.inSize,o=e.numSegments,a=o*Math.ceil(i/n);this.outputShape=[r,a];var s=4*Math.floor(n/4),l=n%4,u="\n        sumValue += dot(values, segFilter);\n    ",c="";i%n>0&&(c="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return initializationValue;\n        }\n      ");var d="";i%n>0&&(d="\n        if (inIdx < 0 || inIdx >= "+i+") {\n          return -1.0;\n        }\n      "),this.userCode="\n      const float initializationValue = 0.0;\n\n      float getValue(int batch, int inIdx) {\n        "+c+"\n        return getX(batch, inIdx);\n      }\n\n      float getSegmentIdAtIndex(int inIdx) {\n        "+d+"\n        return getSegmentIds(inIdx);\n      }\n\n      void main() {\n        ivec2 coords = getOutputCoords();\n        int batch = coords[0];\n        int outIdx = coords[1];\n        int inOffset = int(floor(float(outIdx) / float(\n          "+o+")) * float("+n+"));\n        int currentSeg = int(mod(float(outIdx), float("+o+")));\n\n        float sumValue = 0.0;\n\n        for (int i = 0; i < "+s+"; i += 4) {\n          int inIdx = inOffset + i;\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            getValue(batch, inIdx + 3)\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 3)) == currentSeg ? 1 : 0\n          );\n\n          "+u+"\n        }\n\n        int inIdx = inOffset + "+s+";\n        if ("+(1===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            initializationValue,\n            initializationValue,\n            initializationValue\n          );\n\n          int inIdxSeg = int(getSegmentIdAtIndex(inIdx));\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            0,\n            0,\n            0\n          );\n\n          "+u+"\n        } else if ("+(2===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            initializationValue,\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n              0,\n              0\n          );\n\n          "+u+"\n        } else if ("+(3===l)+") {\n          vec4 values = vec4(\n            getValue(batch, inIdx),\n            getValue(batch, inIdx + 1),\n            getValue(batch, inIdx + 2),\n            initializationValue\n          );\n\n          vec4 segFilter = vec4(\n            int(getSegmentIdAtIndex(inIdx)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 1)) == currentSeg ? 1 : 0,\n            int(getSegmentIdAtIndex(inIdx + 2)) == currentSeg ? 1 : 0,\n            0\n          );\n\n          "+u+"\n        }\n        setOutput(sumValue);\n      }\n    "},PJ=function(e,t,n){var r,i;if(this.variableNames=["c","a","b"],this.outputShape=t,n>4)throw Error("Where for rank "+n+" is not yet supported");if(1===n)i="resRC",r="resRC";else{for(var o=["resRC.x","resRC.y","resRC.z","resRC.w"],a=[],s=[],l=0;l<t.length;l++)s.push(""+o[l]),l<e&&a.push(""+o[l]);r=a.join(),i=s.join()}var u=KX(n);this.userCode="\n      void main() {\n        "+u+" resRC = getOutputCoords();\n        float cVal = getC("+r+");\n        if (cVal >= 1.0) {\n          setOutput(getA("+i+"));\n        } else {\n          setOutput(getB("+i+"));\n        }\n      }\n    "},LJ=function(){function e(e){this.variableNames=["source"],this.outputShape=e,this.rank=e.length;var t,n=KX(this.rank),r="uniform int start["+this.rank+"];",i=function(e){if(1===e)return"sourceLoc";if(e<=6)return MJ.slice(0,e).map((function(e){return"sourceLoc."+e})).join(",");throw Error("Slicing for rank "+e+" is not yet supported")}(this.rank);t="\n        "+n+" sourceLoc;\n        "+n+" coords = getOutputCoords();\n        "+e.map((function(e,t){return"sourceLoc."+MJ[t]+" = start["+t+"] + coords."+MJ[t]+";"})).join("\n")+"\n      ",this.userCode="\n      "+r+"\n      void main() {\n        "+t+"\n        setOutput(getSource("+i+"));\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),MJ=["x","y","z","w","u","v"],FJ=function(){function e(e){this.variableNames=["source"],this.usesPackedTextures=!0,this.outputShape=e,this.rank=e.length;var t=KX(this.rank),n=PX("coords",this.rank),r=PX("sourceLoc",this.rank),i=1===this.rank?"sourceLoc":"vec2("+r.slice(-2).join()+")",o="getChannel(getSource("+r.join()+"), "+i+")",a="\n      result.x = "+o+";\n      if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n        ++"+r[this.rank-1]+";\n        result.y = "+o+";\n        --"+r[this.rank-1]+";\n      }\n    ",s=1===this.rank?"":"\n      --"+n[this.rank-1]+";\n      if (++"+n[this.rank-2]+" < "+e[this.rank-2]+") {\n        ++"+r[this.rank-2]+";\n        result.z = "+o+";\n        if (++"+n[this.rank-1]+" < "+e[this.rank-1]+") {\n          ++"+r[this.rank-1]+";\n          result.w = "+o+";\n        }\n      }\n    ",l=this.rank<=4?"sourceLoc = coords +\n            "+t+"("+e.map((function(e,t){return"start["+t+"]"})).join()+");":e.map((function(e,t){return r[t]+" = "+n[t]+" + start["+t+"];"})).join("\n");this.userCode="\n      uniform int start["+this.rank+"];\n      void main() {\n        "+t+" coords = getOutputCoords();\n        "+t+" sourceLoc;\n        "+l+" \n        vec4 result = vec4(0.);\n        "+a+"\n        "+s+"\n        setOutput(result);\n      }\n    "}return e.prototype.getCustomSetupFunc=function(e){var t=this;if(e.length!==this.rank)throw Error("The rank ("+this.rank+") of the program must match the length of start ("+e.length+")");return function(n,r){null==t.startLoc&&(t.startLoc=n.getUniformLocationNoThrow(r,"start"),null==t.startLoc)||n.gl.uniform1iv(t.startLoc,e)}},e}(),jJ=function(e,t,n){this.variableNames=["x"],this.outputShape=n;var r=n.length,i=KX(n.length),o=KX(n.length),a="";if(1===r)a="coords * strides + begin";else{var s=0;a=n.map((function(e,t){return s++,1===n.length?"coords * strides["+t+"] + begin["+t+"]":"coords["+(s-1)+"] * strides["+t+"] + begin["+t+"]"})).join(",")}this.userCode="\n      "+i+" begin = "+i+"("+e+");\n      "+i+" strides = "+i+"("+t+");\n\n      void main() {\n        "+o+" coords = getOutputCoords();\n        setOutput(getX("+a+"));\n      }\n    "},BJ=function(){function e(e){this.gpgpu=e,this.numUsedTextures=0,this.numFreeTextures=0,this.freeTextures={},this.logEnabled=!1,this.usedTextures={}}return e.prototype.acquireTexture=function(e,t,n){var r,i=VJ(t,n),o=zJ(e,i,n);if(o in this.freeTextures||(this.freeTextures[o]=[]),o in this.usedTextures||(this.usedTextures[o]=[]),this.freeTextures[o].length>0){this.numFreeTextures--,this.numUsedTextures++,this.log();var a=this.freeTextures[o].shift();return this.usedTextures[o].push(a),a}return this.numUsedTextures++,this.log(),i===nG.PACKED_2X2_FLOAT32?r=this.gpgpu.createPackedMatrixTexture(e[0],e[1]):i===nG.PACKED_2X2_FLOAT16?r=this.gpgpu.createFloat16PackedMatrixTexture(e[0],e[1]):i===nG.UNPACKED_FLOAT32?r=this.gpgpu.createFloat32MatrixTexture(e[0],e[1]):i===nG.UNPACKED_FLOAT16?r=this.gpgpu.createFloat16MatrixTexture(e[0],e[1]):i===nG.PACKED_4X1_UNSIGNED_BYTE&&(r=this.gpgpu.createUnsignedBytesMatrixTexture(e[0],e[1])),this.usedTextures[o].push(r),r},e.prototype.releaseTexture=function(e,t,n,r){if(null!=this.freeTextures){var i=zJ(t,VJ(n,r),r);i in this.freeTextures||(this.freeTextures[i]=[]),this.freeTextures[i].push(e),this.numFreeTextures++,this.numUsedTextures--;var o=this.usedTextures[i],a=o.indexOf(e);if(a<0)throw new Error("Cannot release a texture that was never provided by this texture manager");o.splice(a,1),this.log()}},e.prototype.log=function(){if(this.logEnabled){var e=this.numFreeTextures+this.numUsedTextures;console.log("Free/Used",this.numFreeTextures+" / "+this.numUsedTextures,"("+e+")")}},e.prototype.getNumUsedTextures=function(){return this.numUsedTextures},e.prototype.getNumFreeTextures=function(){return this.numFreeTextures},e.prototype.dispose=function(){var e=this;if(null!=this.freeTextures){for(var t in this.freeTextures)this.freeTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));for(var t in this.usedTextures)this.usedTextures[t].forEach((function(t){e.gpgpu.deleteMatrixTexture(t)}));this.freeTextures=null,this.usedTextures=null,this.numUsedTextures=0,this.numFreeTextures=0}},e}();function VJ(e,t){if(e===tG.UPLOAD)return nG.PACKED_2X2_FLOAT32;if(e===tG.RENDER||null==e)return function(e){return PW().getBool("WEBGL_RENDER_FLOAT32_ENABLED")?e?nG.PACKED_2X2_FLOAT32:nG.UNPACKED_FLOAT32:e?nG.PACKED_2X2_FLOAT16:nG.UNPACKED_FLOAT16}(t);if(e===tG.DOWNLOAD||e===tG.PIXELS)return nG.PACKED_4X1_UNSIGNED_BYTE;throw new Error("Unknown logical texture type "+e)}function zJ(e,t,n){return e[0]+"_"+e[1]+"_"+t+"_"+n}var UJ=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[r]*t[r];this.outputShape=n,this.rank=n.length;var i=KX(this.rank),o=function(e){var t=e.length;if(t>5)throw Error("Tile for rank "+t+" is not yet supported");if(1===t)return"imod(resRC, "+e[0]+")";for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u"],r=[],i=0;i<e.length;i++)r.push("imod("+n[i]+", "+e[i]+")");return r.join()}(e);this.userCode="\n      void main() {\n        "+i+" resRC = getOutputCoords();\n        setOutput(getA("+o+"));\n      }\n    "},$J=function(e,t){this.variableNames=["A"];for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];this.outputShape=n,this.rank=n.length;var i=KX(this.rank),o=function(e){var t=e.length;if(t>6)throw Error("Transpose for rank "+t+" is not yet supported");for(var n=["resRC.x","resRC.y","resRC.z","resRC.w","resRC.u","resRC.v"],r=new Array(t),i=0;i<e.length;i++)r[e[i]]=n[i];return r.join()}(t);this.userCode="\n    void main() {\n      "+i+" resRC = getOutputCoords();\n      setOutput(getA("+o+"));\n    }\n    "},qJ=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0;for(var n=new Array(e.length),r=0;r<n.length;r++)n[r]=e[t[r]];if(this.outputShape=n,this.rank=n.length,this.rank>6)throw Error("Packed transpose for rank "+this.rank+" is not yet supported.");var i=KX(this.rank),o=OX("rc",this.rank),a=new Array(this.rank);for(r=0;r<t.length;r++)a[t[r]]=o[r];var s="vec2("+a.slice(-2).join()+")",l="++"+o[this.rank-1]+" < "+n[this.rank-1],u="getChannel(getA("+a.join()+"), "+s+")";this.userCode="\n    void main() {\n      "+i+" rc = getOutputCoords();\n      vec4 result = vec4(0.);\n      result[0] = "+u+";\n      if("+l+") {\n        result[1] = "+u+";\n      }\n      --"+o[this.rank-1]+";\n      if(++"+o[this.rank-2]+" < "+n[this.rank-2]+") {\n        result[2] = "+u+";\n        if("+l+") {\n          result[3] = "+u+";\n        }\n      }  \n      setOutput(result);\n    }\n    "},WJ=1.7580993408473768,HJ=1.0507009873554805,GJ=function(e,t){this.variableNames=["A"],this.outputShape=e,this.userCode="\n      float unaryOperation(float x) {\n        "+t+"\n      }\n\n      void main() {\n        float x = getAAtOutCoords();\n        float y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},KJ="if (isnan(x)) return x;",YJ="return abs(x);",XJ=KJ+"\n  return (x < 0.0) ? 0.0 : x;\n",QJ=KJ+"\n  return (x < 0.0) ? 0.0 : min(6.0, x);\n",JJ="return (x >= 0.0) ? x : (exp(x) - 1.0);",ZJ="\n  // Stable and Attracting Fixed Point (0, 1) for Normalized Weights.\n  // see: https://arxiv.org/abs/1706.02515\n  float scaleAlpha = "+WJ+";\n  float scale = "+HJ+";\n  return (x >= 0.0) ? scale * x : scaleAlpha * (exp(x) - 1.0);\n",eZ="return -x;",tZ="return ceil(x);",nZ="return floor(x);",rZ="return exp(x);",iZ="return exp(x) - 1.0;",oZ=KJ+"\n  return sin(x);\n",aZ=KJ+"\n  return cos(x);\n",sZ=KJ+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return asin(x);\n",lZ=KJ+"\n  if (abs(x) > 1.) {\n    return NAN;\n  }\n  return acos(x);\n",uZ=KJ+"\n  return atan(x);\n",cZ=KJ+"return log(x + sqrt(x * x + 1.0));",dZ=KJ+"\n  if (x < 1.0) return NAN;\n  return log(x + sqrt(x * x - 1.0));",hZ=KJ+"\n  if ((x < -1.0) || (x > 1.0)) return NAN;\n  return (log(1.0 + x) - log(1.0 - x)) / 2.0;",pZ="return x;",fZ="\n  vec4 result = x * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",mZ="\n  vec4 result = min(x, vec4(6.)) * vec4(greaterThanEqual(x, vec4(0.0)));\n  bvec4 isNaN = isnan(x);\n\n  result.r = isNaN.r ? x.r : result.r;\n  result.g = isNaN.g ? x.g : result.g;\n  result.b = isNaN.b ? x.b : result.b;\n  result.a = isNaN.a ? x.a : result.a;\n\n  return result;\n",gZ="\n  vec4 result;\n\n  result.r = (x.r >= 0.0) ? x.r : (exp(x.r) - 1.0);\n  result.g = (x.g >= 0.0) ? x.g : (exp(x.g) - 1.0);\n  result.b = (x.b >= 0.0) ? x.b : (exp(x.b) - 1.0);\n  result.a = (x.a >= 0.0) ? x.a : (exp(x.a) - 1.0);\n\n  return result;\n",vZ=function(e,t){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e,this.userCode="\n      vec4 unaryOperation(vec4 x) {\n        "+t+"\n      }\n\n      void main() {\n        vec4 x = getAAtOutCoords();\n        vec4 y = unaryOperation(x);\n\n        setOutput(y);\n      }\n    "},yZ=function(e){this.variableNames=["A"],this.usesPackedTextures=!0,this.outputShape=e;var t=e.length,n=PX("rc",t),r=KX(t),i=function(e,t){if(1===e)return"rc";for(var n="",r=0;r<e;r++)n+=t[r],r<e-1&&(n+=",");return n}(t,n),o=n.slice(-2),a=t<=1?"rc":"vec2("+o.join(",")+")";this.userCode="\n      void main() {\n        "+r+" rc = getOutputCoords();\n        vec4 packedInput = getA("+i+");\n\n        setOutput(getChannel(packedInput, "+a+"));\n      }\n    "},bZ={};function xZ(e,t){if(void 0===t&&(t=!1),"linear"===e)return"return x;";if("relu"===e)return t?fZ:XJ;if("elu"===e)return t?gZ:JJ;if("relu6"===e)return t?mZ:QJ;if("prelu"===e)return t?lQ:aQ;throw new Error("Activation "+e+" has not been implemented for the WebGL backend.")}var wZ=function(){function e(e){if(this.gpgpu=e,this.pendingRead=new WeakMap,this.pendingDisposal=new WeakSet,this.dataRefCount=new WeakMap,this.numBytesInGPU=0,this.uploadWaitMs=0,this.downloadWaitMs=0,this.warnedAboutMemory=!1,this.disposed=!1,!PW().getBool("HAS_WEBGL"))throw new Error("WebGL is not supported on this device");if(null==e){var t=aG(PW().getNumber("WEBGL_VERSION"));this.binaryCache=((n=PW().getNumber("WEBGL_VERSION"))in bZ||(bZ[n]={}),bZ[n]),this.gpgpu=new sJ(t),this.canvas=t.canvas,this.gpgpuCreatedLocally=!0}else this.binaryCache={},this.gpgpuCreatedLocally=!1,this.canvas=e.gl.canvas;var n;this.textureManager=new BJ(this.gpgpu),this.numMBBeforeWarning=null==PW().global.screen?1024:PW().global.screen.height*PW().global.screen.width*window.devicePixelRatio*600/1024/1024,this.texData=new ZY(this,JH)}return e.prototype.register=function(e,t,n){if(this.texData.has(e))throw new Error("Data buffer is already registered");this.texData.set(e,{shape:t,dtype:n})},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n="undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement,r=e.data instanceof Uint8Array,i="undefined"!=typeof ImageData&&e instanceof ImageData,o="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement,a="undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement,s=o?[e.videoWidth,e.videoHeight]:[e.width,e.height],l=s[0],u=s[1],c=[u,l],d=[u,l,t];if(!(n||r||i||o||a))throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData in browser, or OffscreenCanvas, ImageData in webworker or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);(a||o)&&(null==this.fromPixels2DContext&&(this.fromPixels2DContext=sG(PW().getNumber("WEBGL_VERSION")).getContext("2d")),this.fromPixels2DContext.canvas.width=l,this.fromPixels2DContext.canvas.height=u,this.fromPixels2DContext.drawImage(e,0,0,l,u),e=this.fromPixels2DContext.canvas);var h,p,f=this.makeTensorHandle(c,"int32");if(this.texData.get(f.dataId).usage=tG.PIXELS,this.gpgpu.uploadPixelDataToTexture(this.getTexture(f.dataId),e),PW().getBool("WEBGL_PACK")){h=new VQ(d);var m=this.makePackedTensor(h.outputShape,f.dtype);p=this.compileAndRun(h,[f],m)}else h=new BQ(d),p=this.compileAndRun(h,[f]);return this.disposeData(f.dataId),p},e.prototype.makeTensorHandle=function(e,t){var n={};return this.register(n,e,t),{dataId:n,shape:e,dtype:t}},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendWebGL.write(): values can not be null");if(PW().getBool("DEBUG"))for(var n=0;n<t.length;n++){var r=t[n];if(!pG(r)){if(PW().getBool("WEBGL_RENDER_FLOAT32_CAPABLE"))throw Error("The value "+r+" cannot be represented with your current settings. Consider enabling float32 rendering: 'tf.env().set('WEBGL_RENDER_FLOAT32_ENABLED', true);'");throw Error("The value "+r+" cannot be represented on this device.")}}var i=this.texData.get(e);if("complex64"===i.dtype)throw new Error("Cannot write to a complex64 dtype. Please use tf.complex(real, imag).");this.releaseGPUData(e),i.usage=tG.UPLOAD,i.values=t},e.prototype.readSync=function(e){var t=this.texData.get(e),n=t.values,r=t.dtype,i=t.complexTensors,o=t.slice,a=t.shape,s=t.isPacked;if(null!=o){var l;l=s?new vZ(a,pZ):new GJ(a,pZ);var u=this.compileAndRun(l,[{dataId:e,shape:a,dtype:r}]),c=this.readSync(u.dataId);return u.dispose(),c}if(null!=n)return this.convertAndCacheOnCPU(e);if("string"===r)return n;var d,h,p=null!=this.activeTimers;return p&&(d=bH()),h="complex64"===r?xX(i.real.dataSync(),i.imag.dataSync()):this.getValuesFromTexture(e),p&&(this.downloadWaitMs+=bH()-d),this.convertAndCacheOnCPU(e,h)},e.prototype.read=function(e){return RW(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,l,u,c,d,h,p,f,m,g,v,y,b,x,w,k;return DW(this,(function(_){switch(_.label){case 0:if(this.pendingRead.has(e))return t=this.pendingRead.get(e),[2,new Promise((function(e){return t.push(e)}))];if(n=this.texData.get(e),r=n.values,i=n.shape,o=n.slice,a=n.dtype,s=n.complexTensors,l=n.isPacked,null!=o)return u=l?new vZ(i,pZ):new GJ(i,pZ),c=this.compileAndRun(u,[{dataId:e,shape:i,dtype:a}]),d=this.read(c.dataId),c.dispose(),[2,d];if(null!=r)return[2,this.convertAndCacheOnCPU(e)];if(!PW().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")&&2===PW().getNumber("WEBGL_VERSION"))throw new Error("tensor.data() with WEBGL_DOWNLOAD_FLOAT_ENABLED=false and WEBGL_VERSION=2 not yet supported.");return h=null,"complex64"!==a&&PW().get("WEBGL_BUFFER_SUPPORTED")&&(p=this.decode(e),f=this.texData.get(p.dataId),h=(k=this.gpgpu).createBufferFromTexture.apply(k,[f.texture].concat(uG(i)))),this.pendingRead.set(e,[]),"complex64"===a?[3,2]:[4,this.gpgpu.createAndWaitForFence()];case 1:_.sent(),_.label=2;case 2:return"complex64"!==a?[3,4]:[4,Promise.all([s.real.data(),s.imag.data()])];case 3:return g=_.sent(),v=g[0],y=g[1],m=xX(v,y),[3,5];case 4:null==h?m=this.getValuesFromTexture(e):(b=qW(i),m=this.gpgpu.downloadFloat32MatrixFromBuffer(h,b)),_.label=5;case 5:return null!=p&&this.disposeData(p.dataId),x=this.convertAndCacheOnCPU(e,m),w=this.pendingRead.get(e),this.pendingRead.delete(e),w.forEach((function(e){return e(x)})),this.pendingDisposal.has(e)&&(this.pendingDisposal.delete(e),this.disposeData(e)),[2,x]}}))}))},e.prototype.getValuesFromTexture=function(e){var t,n=this,r=this.texData.get(e),i=r.shape,o=r.dtype,a=r.isPacked,s=qW(i);if(PW().getBool("WEBGL_DOWNLOAD_FLOAT_ENABLED")){var l=this.decode(e),u=this.texData.get(l.dataId),c=(t=this.gpgpu).downloadMatrixFromPackedTexture.apply(t,[u.texture].concat(uG(i))).subarray(0,s);return this.disposeData(l.dataId),c}var d=PW().getBool("WEBGL_PACK")&&!0===a,h=d?UG(i):i,p=this.makeTensorHandle(h,"float32");p.size=qW(i),this.texData.get(p.dataId).usage=tG.DOWNLOAD;var f=iK((function(){var t=d?new PQ(h):new OQ(h);return n.compileAndRun(t,[{shape:h,dtype:o,dataId:e}],p,null)})),m=this.texData.get(f.dataId),g=this.gpgpu.downloadByteEncodedFloatMatrixFromOutputTexture(m.texture,m.texShape[0],m.texShape[1]).subarray(0,s);return this.disposeData(p.dataId),g},e.prototype.time=function(e){return RW(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return DW(this,(function(l){switch(l.label){case 0:return t=this.activeTimers,n=[],r=!1,null==this.programTimersStack?(this.programTimersStack=n,r=!0):this.activeTimers.push(n),this.activeTimers=n,e(),i=$W(this.activeTimers.map((function(e){return e.query}))).filter((function(e){return null!=e})),o=$W(this.activeTimers.map((function(e){return e.name}))).filter((function(e){return null!=e})),this.activeTimers=t,r&&(this.programTimersStack=null),[4,Promise.all(i)];case 1:return a=l.sent(),s={uploadWaitMs:this.uploadWaitMs,downloadWaitMs:this.downloadWaitMs,kernelMs:BW(a),getExtraProfileInfo:function(){return a.map((function(e,t){return{name:o[t],ms:e}})).map((function(e){return e.name+": "+e.ms})).join(", ")},wallMs:null},this.uploadWaitMs=0,this.downloadWaitMs=0,[2,s]}}))}))},e.prototype.memory=function(){return{unreliable:!1,numBytesInGPU:this.numBytesInGPU}},e.prototype.startTimer=function(){return PW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?this.gpgpu.beginQuery():{startMs:bH(),endMs:null}},e.prototype.endTimer=function(e){return PW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?(this.gpgpu.endQuery(),e):(e.endMs=bH(),e)},e.prototype.getQueryTime=function(e){return RW(this,void 0,void 0,(function(){var t;return DW(this,(function(n){return PW().getNumber("WEBGL_DISJOINT_QUERY_TIMER_EXTENSION_VERSION")>0?[2,this.gpgpu.waitForQueryAndGetTime(e)]:[2,(t=e).endMs-t.startMs]}))}))},e.prototype.disposeData=function(e){if(!this.pendingDisposal.has(e))if(this.pendingRead.has(e))this.pendingDisposal.add(e);else if(this.texData.has(e)){this.releaseGPUData(e);var t=this.texData.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.texData.delete(e)}},e.prototype.releaseGPUData=function(e){var t=this.texData.get(e),n=t.texture,r=t.dtype,i=t.texShape,o=t.usage,a=t.isPacked,s=t.slice,l=s&&s.origDataId||e,u=this.dataRefCount.get(l);u>1?this.dataRefCount.set(l,u-1):(this.dataRefCount.delete(l),null!=n&&(this.numBytesInGPU-=this.computeBytes(i,r),this.textureManager.releaseTexture(n,i,o,a)));var c=this.texData.get(e);c.texture=null,c.texShape=null,c.isPacked=!1,c.slice=null},e.prototype.getTexture=function(e){return this.uploadToGPU(e),this.texData.get(e).texture},e.prototype.getDataInfo=function(e){return this.texData.get(e)},e.prototype.getCPUBackend=function(){return PW().getBool("WEBGL_CPU_FORWARD")?(null==this.cpuBackend&&(this.cpuBackend=JH.findBackend("cpu")),this.cpuBackend):null},e.prototype.shouldExecuteOnCPU=function(e,t){var n=this;return void 0===t&&(t=128),null!=this.getCPUBackend()&&e.every((function(e){return null==n.texData.get(e.dataId).texture&&e.size<t}))},e.prototype.getGPGPUContext=function(){return this.gpgpu},e.prototype.complex=function(e,t){var n=this.makeOutputArray(e.shape,"complex64");return this.texData.get(n.dataId).complexTensors={real:JH.keep(e.clone()),imag:JH.keep(t.clone())},n},e.prototype.real=function(e){return this.texData.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.texData.get(e.dataId).complexTensors.imag.clone()},e.prototype.slice=function(e,t,n){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.slice(e,t,n);if(0===qW(n))return IK([],n,e.dtype);var r=this.texData.get(e.dataId).isPacked,i=HY(e.shape,t,n);if(r||!i){var o=PW().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new FJ(n):new LJ(n),a=o.getCustomSetupFunc(t);return this.compileAndRun(o,[e],null,a)}return this.uploadToGPU(e.dataId),this.shallowSlice(e,t,n)},e.prototype.shallowSlice=function(e,t,n){var r=this.texData.get(e.dataId),i=PH.make(n,{},e.dtype,this),o=this.texData.get(i.dataId);Object.assign(o,r),o.shape=n,o.dtype=e.dtype;var a=GY(t,e.strides);r.slice&&(a+=r.slice.flatOffset),o.slice={flatOffset:a,origDataId:r.slice&&r.slice.origDataId||e.dataId};var s=this.dataRefCount.get(o.slice.origDataId)||1;return this.dataRefCount.set(o.slice.origDataId,s+1),i},e.prototype.stridedSlice=function(e,t,n,r){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.stridedSlice(e,t,n,r);var i=$Y(t,n,r);if(i.some((function(e){return 0===e})))return IK([],i);var o=new jJ(t,r,i);return this.compileAndRun(o,[e])},e.prototype.reverse=function(e,t){var n=PW().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new RJ(e.shape,t):new AJ(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.concat=function(e,t){if("complex64"===e[0].dtype){var n=e.map((function(e){return EK(e)})),r=e.map((function(e){return CK(e)}));return _K(this.concat(n,t),this.concat(r,t))}if(this.shouldExecuteOnCPU(e))return this.cpuBackend.concat(e,t);if(1===e.length)return e[0];if(e.length>PW().getNumber("WEBGL_MAX_TEXTURES_IN_SHADER")){var i=Math.floor(e.length/2),o=this.concat(e.slice(0,i),t),a=this.concat(e.slice(i),t);return this.concat([o,a],t)}if(PW().getBool("WEBGL_PACK_ARRAY_OPERATIONS")&&e[0].rank>1){var s=new fQ(e.map((function(e){return e.shape})),t);return this.compileAndRun(s,e)}var l=wK(e.map((function(e){return e.shape})),t),u=e.map((function(e){return e.as2D(-1,qW(e.shape.slice(t)))})),c=new pQ(u.map((function(e){return e.shape})));return this.compileAndRun(c,u).reshape(l)},e.prototype.neg=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.neg(e);if(PW().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,eZ,e.dtype);var t=new GJ(e.shape,eZ);return this.compileAndRun(t,[e])},e.prototype.batchMatMul=function(e,t,n,r){var i=n?e.shape[2]:e.shape[1],o=r?t.shape[1]:t.shape[2],a=n?e.shape[1]:e.shape[2],s=e.shape[0];if((1===i||1===o)&&a>1e3){n&&(e=e.transpose([0,2,1])),r&&(t=t.transpose([0,2,1]));var l=1===o?e:e.as3D(s,a,1),u=1===o?2:1,c=1===o?t.as3D(s,1,a):t;return this.multiply(l,c).sum(u,!0)}var d=$H(e.dtype,t.dtype),h=new mJ(e.shape,[s,i,o],n,r),p=this.makePackedTensor(h.outputShape,d);return this.compileAndRun(h,[e,t],p)},e.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,o=e.bias,a=e.activation,s=e.preluActivationWeights,l=r?t.shape[2]:t.shape[1],u=i?n.shape[1]:n.shape[2],c=t.shape[0],d=$H(t.dtype,n.dtype),h=null!=o,p=null!=s,f=a?xZ(a,!0):null,m=new mJ(t.shape,[c,l,u],r,i,h,f,p),g=this.makePackedTensor(m.outputShape,d),v=[t,n];return o&&v.push(o),s&&v.push(s),this.compileAndRun(m,v,g)},e.prototype.multiply=function(e,t){if("complex64"===e.dtype){var n=this.texData.get(e.dataId),r=this.texData.get(t.dataId),i=new nQ("return areal * breal - aimag * bimag;",e.shape,t.shape),o=new nQ("return areal * bimag + aimag * breal;",e.shape,t.shape),a=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag),this.makeComplexComponentTensorHandle(t,r.complexTensors.real),this.makeComplexComponentTensorHandle(t,r.complexTensors.imag)],s=this.compileAndRun(i,a),l=this.compileAndRun(o,a),u=this.complex(s,l);return s.dispose(),l.dispose(),u}if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.multiply(e,t);if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,oQ,e.dtype);var c=new sQ(oQ,e.shape,t.shape),d=this.makeOutputArray(c.outputShape,e.dtype);return this.compileAndRun(c,[e,t],d)},e.prototype.batchNormalization=function(e,t,n,r,i,o){var a=[e,t,n],s=null;null!=o&&(s=o.shape,a.push(o));var l=null;if(null!=i&&(l=i.shape,a.push(i)),PW().getBool("WEBGL_PACK_NORMALIZATION")){var u=new tQ(e.shape,t.shape,n.shape,s,l,r);return this.compileAndRun(u,a)}var c=new eQ(e.shape,t.shape,n.shape,s,l,r);return this.compileAndRun(c,a)},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){var o=PW().getBool("WEBGL_PACK_NORMALIZATION")?new hJ(e.shape,t,n,r,i):new cJ(e.shape,t,n,r,i);return this.compileAndRun(o,[e])},e.prototype.LRNGrad=function(e,t,n,r,i,o,a){var s=new dJ(t.shape,r,i,o,a);return this.compileAndRun(s,[t,n,e])},e.prototype.tile=function(e,t){if("string"===e.dtype){var n=this.readSync(e.dataId).map((function(e){return kH(e)}));return SX(aY(e.shape,e.dtype,n),t)}var r=new UJ(e.shape,t);return this.compileAndRun(r,[e])},e.prototype.pad=function(e,t,n){var r=PW().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new xJ(e.shape,t,n):new bJ(e.shape,t,n);return this.compileAndRun(r,[e])},e.prototype.transpose=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.transpose(e,t);var n=PW().getBool("WEBGL_PACK_ARRAY_OPERATIONS")?new qJ(e.shape,t):new $J(e.shape,t);return this.compileAndRun(n,[e])},e.prototype.gather=function(e,t,n){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.gather(e,t,n);var r=new zQ(e.shape,t.size,n);return this.compileAndRun(r,[e,t])},e.prototype.batchToSpaceND=function(e,t,n){VW(e.rank<=4,(function(){return"batchToSpaceND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),i=PY(e.shape,t,r),o=LY(i.length,t.length),a=MY(e.shape,t,r),s=FY(n,t.length),l=jY(a,n,t.length);return e.reshape(i).transpose(o).reshape(a).slice(s,l)},e.prototype.spaceToBatchND=function(e,t,n){VW(e.rank<=4,(function(){return"spaceToBatchND for rank > 4 with a WebGL backend not implemented yet"}));var r=t.reduce((function(e,t){return e*t})),i=[[0,0]];i.push.apply(i,n);for(var o=1+t.length;o<e.shape.length;++o)i.push([0,0]);var a=e.pad(i),s=PY(a.shape,t,r,!1),l=LY(s.length,t.length,!1),u=MY(a.shape,t,r,!1);return a.reshape(s).transpose(l).reshape(u)},e.prototype.reduce=function(e,t,n){var r=e.shape[0],i=e.shape[1],o=VY(i),a=new _J({windowSize:o,inSize:i,batchSize:r},t),s=a.outputShape,l=s[0],u=s[1],c=this.makeOutputArray([l,u],n);return this.compileAndRun(a,[e],c),1===c.shape[1]?c:this.reduce(c,t,n)},e.prototype.argReduce=function(e,t,n){void 0===n&&(n=null);var r=e.shape[0],i=e.shape[1];null!=n&&(r=n.shape[0],i=n.shape[1]);var o=VY(i),a=new DX({windowSize:o,inSize:i,batchSize:r},t,null==n),s=a.outputShape,l=s[0],u=s[1],c=this.makeOutputArray([l,u],"int32"),d=[e];return null!=n&&d.push(n),this.compileAndRun(a,d,c),1===c.shape[1]?c:this.argReduce(e,t,c)},e.prototype.argReducePacked=function(e,t,n){void 0===n&&(n=null);var r=null!=n?n.shape:e.shape,i=VY(r[r.length-1]),o=new QX(r,i,t,null==n),a=this.makePackedTensor(o.outputShape,"int32"),s=null==n?[e]:[e,n];return this.compileAndRun(o,s,a),a.rank===e.rank?this.argReducePacked(e,t,a):a},e.prototype.sum=function(e,t){gK("sum",t,e.rank);var n=fK(e.shape,t),r=n[0],i=qW(n[1]),o=e.as2D(-1,i),a=qH(e.dtype);return this.reduce(o,"sum",a).reshape(r)},e.prototype.prod=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.prod(e,t);var n=fK(e.shape,t),r=n[0],i=qW(n[1]),o=e.as2D(-1,i),a=qH(e.dtype);return this.reduce(o,"prod",a).reshape(r)},e.prototype.unsortedSegmentSum=function(e,t,n){var r=0,i=vK([r],e.rank),o=e;null!=i&&(o=e.transpose(i),r=bK(1,e.rank)[0]);var a=function(e,t,n){for(var r=[],i=e.length,o=0;o<i;o++)o!==t?r.push(e[o]):r.push(n);return r}(o.shape,r,n),s=qW([o.shape[r]]),l=o.as2D(-1,s),u=qH(e.dtype),c=this.segOpCompute(l,"unsortedSegmentSum",t,u,n).reshape(a);return null!=i&&(c=c.transpose(yK(i))),c},e.prototype.segOpCompute=function(e,t,n,r,i){var o=e.shape[0],a=e.shape[1],s=function(e,t){var n,r=!1;for(e<=30?(n=e,r=!0):n=pH(e,Math.floor(Math.sqrt(e)));!r;)n>t||n===e?r=!0:n=pH(e,n+1);return n}(a,i),l=new OJ({windowSize:s,inSize:a,batchSize:o,numSegments:i},t),u=l.outputShape,c=u[0],d=u[1],h=this.makeOutputArray([c,d],r);return this.compileAndRun(l,[e,n],h),h.shape[1]===i?h:(n=BK(0,i).tile([a/s]),this.segOpCompute(h,t,n,r,i))},e.prototype.argMinMaxReduce=function(e,t,n){var r=[t];if(gK("arg"+n.charAt(0).toUpperCase()+n.slice(1),r,e.rank),!PW().getBool("WEBGL_PACK_REDUCE")||e.rank<=2){var i=fK(e.shape,r),o=i[0],a=qW(i[1]),s=e.as2D(-1,a);return this.argReduce(s,n).reshape(o)}return this.argReducePacked(e,n)},e.prototype.argMin=function(e,t){return this.argMinMaxReduce(e,t,"min")},e.prototype.argMax=function(e,t){return this.argMinMaxReduce(e,t,"max")},e.prototype.cumsum=function(e,t,n,r){if(t!==e.rank-1)throw new Error("WebGL cumsum shader expects an inner-most axis="+(e.rank-1)+" but got axis="+t);var i=new SQ(e.shape,n,r);return this.compileAndRun(i,[e])},e.prototype.equal=function(e,t){if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(equal(a, b));\n","bool");var n=new sQ("return float(a == b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.notEqual=function(e,t){if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(notEqual(a, b));\n","bool");var n=new sQ("return float(a != b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.less=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.less(e,t);if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThan(a, b));\n","bool");var n=new sQ("return float(a < b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.lessEqual=function(e,t){if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(lessThanEqual(a, b));\n","bool");var n=new sQ("return float(a <= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greater=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.greater(e,t);if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThan(a, b));\n","bool");var n=new sQ("return float(a > b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.greaterEqual=function(e,t){if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(greaterThanEqual(a, b));\n","bool");var n=new sQ("return float(a >= b);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalNot=function(e){var t=new GJ(e.shape,"return float(!(x >= 1.0));");return this.compileAndRun(t,[e])},e.prototype.logicalAnd=function(e,t){if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return vec4(\n    vec4(greaterThanEqual(a, vec4(1.0))) *\n    vec4(greaterThanEqual(b, vec4(1.0))));\n","bool");var n=new sQ("return float(a >= 1.0 && b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.logicalOr=function(e,t){if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  return min(\n    vec4(greaterThanEqual(a, vec4(1.0))) +\n    vec4(greaterThanEqual(b, vec4(1.0))),\n    vec4(1.0));\n","bool");var n=new sQ("return float(a >= 1.0 || b >= 1.0);",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"bool");return this.compileAndRun(n,[e,t],r)},e.prototype.select=function(e,t,n){var r=new PJ(e.rank,t.shape,t.rank),i=this.makeOutputArray(r.outputShape,$H(t.dtype,n.dtype));return this.compileAndRun(r,[e,t,n],i)},e.prototype.where=function(e){sK("tf.where() in webgl locks the UI thread. Call tf.whereAsync() instead");var t=e.dataSync();return TX(e.shape,t)},e.prototype.topk=function(e,t,n){return NX(e.dataSync(),e.shape,e.dtype,t)},e.prototype.min=function(e,t){gK("min",t,e.rank);var n=fK(e.shape,t),r=n[0],i=qW(n[1]),o=e.as2D(-1,i);return this.reduce(o,"min",o.dtype).reshape(r)},e.prototype.minimum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.minimum(e,t);var n=PW().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uQ("\n  vec4 result = vec4(min(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new sQ("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return min(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.mod=function(e,t){var n=PW().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uQ("\n  vec4 result = mod(a, b);\n  vec4 isNaN = vec4(equal(b, vec4(0.0)));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new sQ("if (b == 0.0) return NAN;\n  return mod(a, b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.max=function(e,t){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.max(e,t);gK("max",t,e.rank);var n=fK(e.shape,t),r=n[0],i=qW(n[1]),o=e.as2D(-1,i);return this.reduce(o,"max",o.dtype).reshape(r)},e.prototype.maximum=function(e,t){if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.maximum(e,t);var n=PW().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uQ("\n  vec4 result = vec4(max(a, b));\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new sQ("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return max(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.all=function(e,t){gK("all",t,e.rank);var n=fK(e.shape,t),r=n[0],i=qW(n[1]),o=e.as2D(-1,i);return this.reduce(o,"all",o.dtype).reshape(r)},e.prototype.any=function(e,t){gK("any",t,e.rank);var n=fK(e.shape,t),r=n[0],i=qW(n[1]),o=e.as2D(-1,i);return this.reduce(o,"any",o.dtype).reshape(r)},e.prototype.squaredDifference=function(e,t){var n=PW().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uQ("return (a - b) * (a - b);",e.shape,t.shape):new sQ("return (a - b) * (a - b);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.realDivide=function(e,t){if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  // vec4 one = vec4(equal(a, b));\n  // return one + (vec4(1.0) - one) * a / b;\n  vec4 result = a / b;\n  if(a.x == b.x) {\n    result.x = 1.;\n  }\n  if(a.y == b.y) {\n    result.y = 1.;\n  }\n  if(a.z == b.z) {\n    result.z = 1.;\n  }\n  if(a.w == b.w) {\n    result.w = 1.;\n  }\n\n  return result;\n","float32",!0);var n=new sQ("\nif (a == b) {\n  return 1.0;\n};\nreturn a / b;",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e,t],r)},e.prototype.floorDiv=function(e,t){if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,"\n  ivec4 ia = round(a);\n  ivec4 ib = round(b);\n  bvec4 cond = notEqual(ib, ivec4(0));\n  ivec4 result = ivec4(0);\n  vec4 s = sign(a) * sign(b);\n\n  // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n  if (cond[0]) {\n    result[0] = idiv(ia[0], ib[0], s[0]);\n  }\n  if (cond[1]) {\n    result[1] = idiv(ia[1], ib[1], s[1]);\n  }\n  if (cond[2]) {\n    result[2] = idiv(ia[2], ib[2], s[2]);\n  }\n  if (cond[3]) {\n    result[3] = idiv(ia[3], ib[3], s[3]);\n  }\n  return vec4(result);\n","int32");var n=new sQ("\n  float s = sign(a) * sign(b);\n  int ia = round(a);\n  int ib = round(b);\n  if (ib != 0) {\n    // Windows (D3D) wants guaranteed non-zero int division at compile-time.\n    return float(idiv(ia, ib, s));\n  } else {\n    return NAN;\n  }\n",e.shape,t.shape),r=this.makeOutputArray(n.outputShape,"int32");return this.compileAndRun(n,[e,t],r)},e.prototype.add=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,rQ);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.add(e,t);var n=$H(e.dtype,t.dtype);if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,rQ,n);var r=new sQ(rQ,e.shape,t.shape),i=this.makeOutputArray(r.outputShape,n);return this.compileAndRun(r,[e,t],i)},e.prototype.packedUnaryOp=function(e,t,n){var r=new vZ(e.shape,t),i=this.makePackedTensor(r.outputShape,n);return this.compileAndRun(r,[e],i)},e.prototype.packedBinaryOp=function(e,t,n,r,i){void 0===i&&(i=!1);var o=new uQ(n,e.shape,t.shape,i),a=this.makePackedTensor(o.outputShape,r);return this.compileAndRun(o,[e,t],a)},e.prototype.complexSeparableBinaryOp=function(e,t,n){var r=this,i=this.texData.get(e.dataId),o=this.texData.get(t.dataId),a=[[i.complexTensors.real,o.complexTensors.real],[i.complexTensors.imag,o.complexTensors.imag]].map((function(i){var o=i[0],a=i[1],s=r.makeComplexComponentTensorHandle(e,o),l=r.makeComplexComponentTensorHandle(t,a),u=new sQ(n,e.shape,t.shape),c=r.makeOutputArray(u.outputShape,$H(o.dtype,a.dtype));return r.compileAndRun(u,[s,l],c)})),s=a[0],l=a[1],u=this.complex(s,l);return s.dispose(),l.dispose(),u},e.prototype.makeComplexComponentTensorHandle=function(e,t){return{dataId:t.dataId,dtype:t.dtype,shape:e.shape}},e.prototype.addN=function(e){if(1===e.length)return e[0];if(e.length>PW().get("WEBGL_MAX_TEXTURES_IN_SHADER")){var t=Math.floor(e.length/2),n=this.addN(e.slice(0,t)),r=this.addN(e.slice(t));return this.addN([n,r])}var i=e.map((function(e){return e.dtype})).reduce((function(e,t){return $H(e,t)})),o=e.map((function(e){return e.shape})),a=PW().getBool("WEBGL_PACK"),s=a?new RX(e[0].shape,o):new AX(e[0].shape,o),l=a?this.makePackedTensor(s.outputShape,i):this.makeOutputArray(s.outputShape,i);return this.compileAndRun(s,e,l)},e.prototype.subtract=function(e,t){if("complex64"===e.dtype&&"complex64"===t.dtype)return this.complexSeparableBinaryOp(e,t,iQ);if(this.shouldExecuteOnCPU([e,t]))return this.cpuBackend.subtract(e,t);var n=$H(e.dtype,t.dtype);if(PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"))return this.packedBinaryOp(e,t,iQ,e.dtype);var r=new sQ(iQ,e.shape,t.shape),i=this.makeOutputArray(r.outputShape,n);return this.compileAndRun(r,[e,t],i)},e.prototype.pow=function(e,t){var n=PW().getBool("WEBGL_PACK_BINARY_OPERATIONS"),r=n?new uQ("\n  // isModRound1 has 1 for components with round(mod(b, 2.0)) == 1, 0 otherwise.\n  vec4 isModRound1 = vec4(equal(round(mod(b, 2.0)), ivec4(1)));\n  vec4 multiplier = sign(a) * isModRound1 + (vec4(1.0) - isModRound1);\n  vec4 result = multiplier * pow(abs(a), b);\n\n  // Ensure that a^0 = 1, including 0^0 = 1 as this correspond to TF and JS\n  bvec4 isExpZero = equal(b, vec4(0.0));\n  result.r = isExpZero.r ? 1.0 : result.r;\n  result.g = isExpZero.g ? 1.0 : result.g;\n  result.b = isExpZero.b ? 1.0 : result.b;\n  result.a = isExpZero.a ? 1.0 : result.a;\n\n  vec4 isNaN = vec4(lessThan(a, vec4(0.0))) * vec4(lessThan(floor(b), b));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new sQ("\nif(a < 0.0 && floor(b) < b){\n  return NAN;\n}\nif (b == 0.0) {\n  return 1.0;\n}\nreturn (round(mod(b, 2.0)) != 1) ?\n    pow(abs(a), b) : sign(a) * pow(abs(a), b);\n",e.shape,t.shape),i=$H(e.dtype,t.dtype),o=n?this.makePackedTensor(r.outputShape,i):this.makeOutputArray(r.outputShape,i);return this.compileAndRun(r,[e,t],o)},e.prototype.ceil=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.ceil(e);if(PW().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,tZ,e.dtype);var t=new GJ(e.shape,tZ);return this.compileAndRun(t,[e])},e.prototype.floor=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.floor(e);if(PW().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,nZ,e.dtype);var t=new GJ(e.shape,nZ);return this.compileAndRun(t,[e])},e.prototype.sign=function(e){var t=new GJ(e.shape,"\n  if (isnan(x)) { return 0.0; }\n  return sign(x);\n");return this.compileAndRun(t,[e])},e.prototype.isNaN=function(e){var t=new GJ(e.shape,"return float(isnan(x));"),n=this.makeOutputArray(t.outputShape,"bool");return this.compileAndRun(t,[e],n)},e.prototype.isInf=function(e){var t=new GJ(e.shape,"return float(isinf(x));"),n=this.makeOutputArray(t.outputShape,"bool");return this.compileAndRun(t,[e],n)},e.prototype.isFinite=function(e){var t=new GJ(e.shape,"return float(!isnan(x) && !isinf(x));"),n=this.makeOutputArray(t.outputShape,"bool");return this.compileAndRun(t,[e],n)},e.prototype.round=function(e){var t=new GJ(e.shape,"\n  // OpenGL ES does not support round function.\n  // The algorithm is based on banker's rounding.\n  float base = floor(x);\n  if ((x - base) < 0.5) {\n    return floor(x);\n  } else if ((x - base) > 0.5) {\n    return ceil(x);\n  } else {\n    if (mod(base, 2.0) == 0.0) {\n      return base;\n    } else {\n      return base + 1.0;\n    }\n  }\n");return this.compileAndRun(t,[e])},e.prototype.exp=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.exp(e);if(PW().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,rZ,e.dtype);var t=new GJ(e.shape,rZ);return this.compileAndRun(t,[e])},e.prototype.expm1=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.expm1(e);if(PW().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,iZ,e.dtype);var t=new GJ(e.shape,iZ);return this.compileAndRun(t,[e])},e.prototype.log=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.log(e);if(PW().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,"\n  vec4 result = log(x);\n  vec4 isNaN = vec4(lessThan(x, vec4(0.0)));\n  result.r = isNaN.r == 1.0 ? NAN : result.r;\n  result.g = isNaN.g == 1.0 ? NAN : result.g;\n  result.b = isNaN.b == 1.0 ? NAN : result.b;\n  result.a = isNaN.a == 1.0 ? NAN : result.a;\n\n  return result;\n",e.dtype);var t=new GJ(e.shape,"if (x < 0.0) return NAN;\n  return log(x);");return this.compileAndRun(t,[e])},e.prototype.log1p=function(e){var t=new GJ(e.shape,"return log(1.0 + x);");return this.compileAndRun(t,[e])},e.prototype.sqrt=function(e){var t=new GJ(e.shape,"return sqrt(x);");return this.compileAndRun(t,[e])},e.prototype.rsqrt=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.rsqrt(e);var t=new GJ(e.shape,"return inversesqrt(x);");return this.compileAndRun(t,[e])},e.prototype.square=function(e){var t=new GJ(e.shape,"return x * x;");return this.compileAndRun(t,[e])},e.prototype.reciprocal=function(e){var t=new GJ(e.shape,"return 1.0 / x;");return this.compileAndRun(t,[e])},e.prototype.relu=function(e){var t;return t=PW().getBool("WEBGL_PACK")?new vZ(e.shape,fZ):new GJ(e.shape,XJ),this.compileAndRun(t,[e])},e.prototype.relu6=function(e){var t;return t=PW().getBool("WEBGL_PACK")?new vZ(e.shape,mZ):new GJ(e.shape,QJ),this.compileAndRun(t,[e])},e.prototype.prelu=function(e,t){var n=PW().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uQ(lQ,e.shape,t.shape):new sQ(aQ,e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.elu=function(e){if(PW().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,gZ,e.dtype);var t=new GJ(e.shape,JJ);return this.compileAndRun(t,[e])},e.prototype.eluDer=function(e,t){var n=PW().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uQ("\n  vec4 bGTEZero = vec4(greaterThanEqual(b, vec4(0.)));\n  return (bGTEZero * a) + ((vec4(1.0) - bGTEZero) * (a * (b + vec4(1.0))));\n",e.shape,t.shape):new sQ("return (b >= 1.0) ? a : a * (b + 1.0);",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.selu=function(e){var t=new GJ(e.shape,ZJ);return this.compileAndRun(t,[e])},e.prototype.int=function(e){var t=new GJ(e.shape,"return float(int(x));"),n=this.makeOutputArray(t.outputShape,"int32");return this.compileAndRun(t,[e],n)},e.prototype.clip=function(e,t,n){var r,i=(r=PW().getBool("WEBGL_PACK_CLIP")?new dQ(e.shape):new cQ(e.shape)).getCustomSetupFunc(t,n);return this.compileAndRun(r,[e],null,i)},e.prototype.abs=function(e){if(this.shouldExecuteOnCPU([e]))return this.cpuBackend.abs(e);if(PW().getBool("WEBGL_PACK_UNARY_OPERATIONS"))return this.packedUnaryOp(e,YJ,e.dtype);var t=new GJ(e.shape,YJ);return this.compileAndRun(t,[e])},e.prototype.complexAbs=function(e){var t=this.texData.get(e.dataId),n=new hQ(e.shape),r=[this.makeComplexComponentTensorHandle(e,t.complexTensors.real),this.makeComplexComponentTensorHandle(e,t.complexTensors.imag)];return this.compileAndRun(n,r)},e.prototype.sigmoid=function(e){var t=new GJ(e.shape,"return 1.0 / (1.0 + exp(-1.0 * x));");return this.compileAndRun(t,[e])},e.prototype.softplus=function(e){var t=new GJ(e.shape,"\n  float epsilon = 1.1920928955078125e-7;\n  float threshold = log(epsilon) + 2.0;\n\n  bool too_large = x > -threshold;\n  bool too_small = x < threshold;\n\n  float result;\n  float exp_x = exp(x);\n\n  if (too_large){\n    result = x;\n  }\n  else if (too_small){\n    result = exp_x;\n  }\n  else{\n    result = log(exp_x + 1.0);\n  }\n  return result;\n");return this.compileAndRun(t,[e])},e.prototype.sin=function(e){var t=new GJ(e.shape,oZ);return this.compileAndRun(t,[e])},e.prototype.cos=function(e){var t=new GJ(e.shape,aZ);return this.compileAndRun(t,[e])},e.prototype.tan=function(e){var t=new GJ(e.shape,"return tan(x);");return this.compileAndRun(t,[e])},e.prototype.asin=function(e){var t=new GJ(e.shape,sZ);return this.compileAndRun(t,[e])},e.prototype.acos=function(e){var t=new GJ(e.shape,lZ);return this.compileAndRun(t,[e])},e.prototype.atan=function(e){var t=new GJ(e.shape,uZ);return this.compileAndRun(t,[e])},e.prototype.atan2=function(e,t){var n=PW().getBool("WEBGL_PACK_BINARY_OPERATIONS")?new uQ("\n  vec4 result = atan(a, b);\n  vec4 isNaN = min(vec4(isnan(a)) + vec4(isnan(b)), vec4(1.0));\n  \n  result.r = isNaN.r > 0. ? NAN : result.r;\n  result.g = isNaN.g > 0. ? NAN : result.g;\n  result.b = isNaN.b > 0. ? NAN : result.b;\n  result.a = isNaN.a > 0. ? NAN : result.a;\n\n  return result;\n",e.shape,t.shape):new sQ("\n  if (isnan(a)) return a;\n  if (isnan(b)) return b;\n\n  return atan(a, b);\n",e.shape,t.shape);return this.compileAndRun(n,[e,t])},e.prototype.sinh=function(e){var t=new GJ(e.shape,"\n  float e2x = exp(x);\n  return (e2x - 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},e.prototype.cosh=function(e){var t=new GJ(e.shape,"\n  float e2x = exp(-x);\n  return (e2x + 1.0 / e2x) / 2.0;\n");return this.compileAndRun(t,[e])},e.prototype.tanh=function(e){var t=new GJ(e.shape,"\n  float e2x = exp(-2.0 * abs(x));\n  return sign(x) * (1.0 - e2x) / (1.0 + e2x);\n");return this.compileAndRun(t,[e])},e.prototype.asinh=function(e){var t=new GJ(e.shape,cZ);return this.compileAndRun(t,[e])},e.prototype.acosh=function(e){var t=new GJ(e.shape,dZ);return this.compileAndRun(t,[e])},e.prototype.atanh=function(e){var t=new GJ(e.shape,hZ);return this.compileAndRun(t,[e])},e.prototype.erf=function(e){var t=new GJ(e.shape,'\n  // Error function is calculated approximately with elementary function.\n  // See "Handbook of Mathematical Functions with Formulas,\n  // Graphs, and Mathematical Tables", Abramowitz and Stegun.\n  float p = 0.3275911;\n  float a1 = 0.254829592;\n  float a2 = -0.284496736;\n  float a3 = 1.421413741;\n  float a4 = -1.453152027;\n  float a5 = 1.061405429;\n\n  float sign = sign(x);\n  x = abs(x);\n  float t = 1.0 / (1.0 + p * x);\n  return sign * (1.0 - (((((a5*t + a4)*t) + a3)*t + a2)*t + a1)*t*exp(-x*x));\n');return this.compileAndRun(t,[e])},e.prototype.step=function(e,t){var n=new GJ(e.shape,function(e){return void 0===e&&(e=0),KJ+"\n    return x > 0.0 ? 1.0 : float("+e+");\n  "}(t));return this.compileAndRun(n,[e])},e.prototype.conv2dByMatMul=function(e,t,n,r,i,o){var a=e.shape,s=this.texData.get(e.dataId),l=n.inChannels,u=a[0]*a[1]*a[2],c=n.outChannels,d="channelsLast"===n.dataFormat,h=(1===u||1===c)&&l>1e3,p=a[2]%2!=0&&!!s.isPacked;if(h||!PW().getBool("WEBGL_LAZILY_UNPACK")||!PW().getBool("WEBGL_PACK_BINARY_OPERATIONS")||!p){var f=d?a[0]*a[1]*a[2]:a[0]*a[2]*a[3],m=this.reshape(e,[1,f,n.inChannels]),g=this.reshape(t,[1,n.inChannels,n.outChannels]);return this.reshape(this.fusedBatchMatMul({a:m,b:g,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:o}),n.outShape)}var v=d?a[0]*a[1]*(a[2]+1):a[0]*a[2]*(a[3]+1),y=PH.make([1,v,n.inChannels],{dataId:e.dataId},e.dtype,this),b=s.shape;s.shape=s.shape.slice(),s.shape[s.shape.length-2]++,VW(WG(s.shape,y.shape),(function(){return"packed reshape "+s.shape+" to "+y.shape+" isn't free"}));var x=this.reshape(t,[1,n.inChannels,n.outChannels]),w=this.fusedBatchMatMul({a:y,b:x,transposeA:!1,transposeB:!1,bias:r,activation:i,preluActivationWeights:o}),k=this.texData.get(w.dataId);return VW(k.isPacked,(function(){return"batchMatMul result is expected to be packed"})),s.shape=b,k.shape=n.outShape,PH.make(n.outShape,{dataId:w.dataId},w.dtype,this)},e.prototype.conv2dWithIm2Row=function(e,t,n,r,i,o){var a=n.filterWidth,s=n.filterHeight,l=n.inChannels,u=n.outWidth,c=n.outHeight,d="channelsLast"===n.dataFormat,h=a*s*l,p=c*u,f=[h,p],m=e.squeeze([0]),g=t.reshape([1,h,-1]),v=new uJ(f,m.shape,n),y=this.compileAndRun(v,[m]).reshape([1,f[0],f[1]]),b=null!=r,x=null!=o,w=i?xZ(i,!0):null,k=new mJ(y.shape,[1,p,n.outChannels],!0,!1,b,w,x),_=[y,g];r&&_.push(r),x&&_.push(o);var E=this.compileAndRun(k,_);return d?E.reshape([1,c,u,n.outChannels]):E.reshape([1,n.outChannels,c,u])},e.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,o=e.activation,a=e.preluActivationWeights;if(1===r.filterHeight&&1===r.filterWidth&&1===r.dilationHeight&&1===r.dilationWidth&&1===r.strideHeight&&1===r.strideWidth&&("SAME"===r.padInfo.type||"VALID"===r.padInfo.type))return this.conv2dByMatMul(t,n,r,i,o,a);if(PW().getBool("WEBGL_CONV_IM2COL")&&1===t.shape[0])return this.conv2dWithIm2Row(t,n,r,i,o,a);var s=null!=i,l=null!=a,u=o?xZ(o,!1):null,c=new kQ(r,s,u,l),d=[t,n];return i&&d.push(i),a&&d.push(a),this.compileAndRun(c,d)},e.prototype.conv2d=function(e,t,n){if(1===n.filterHeight&&1===n.filterWidth&&1===n.dilationHeight&&1===n.dilationWidth&&1===n.strideHeight&&1===n.strideWidth&&("SAME"===n.padInfo.type||"VALID"===n.padInfo.type))return this.conv2dByMatMul(e,t,n);if(PW().getBool("WEBGL_CONV_IM2COL")&&1===e.shape[0])return this.conv2dWithIm2Row(e,t,n);var r=new kQ(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerInput=function(e,t,n){var r=new vQ(n);return this.compileAndRun(r,[e,t])},e.prototype.conv2dDerFilter=function(e,t,n){var r=new gQ(n);return this.compileAndRun(r,[e,t])},e.prototype.fusedDepthwiseConv2D=function(e){var t,n=e.input,r=e.filter,i=e.convInfo,o=e.bias,a=e.activation,s=e.preluActivationWeights,l=PW().getBool("WEBGL_PACK_DEPTHWISECONV")&&i.strideWidth<=2&&i.outChannels/i.inChannels==1,u=a?xZ(a,l):null,c=[n,r],d=null!=o,h=null!=s;return d&&c.push(o),h&&c.push(s),l?(t=new CQ(i,d,u,h),this.compileAndRun(t,c,this.makePackedTensor(i.outShape,n.dtype))):(t=new EQ(i,d,u,h),this.compileAndRun(t,c))},e.prototype.depthwiseConv2D=function(e,t,n){var r;return PW().getBool("WEBGL_PACK_DEPTHWISECONV")&&n.strideWidth<=2&&n.outChannels/n.inChannels==1?(r=new CQ(n),this.compileAndRun(r,[e,t],this.makePackedTensor(n.outShape,e.dtype))):(r=new EQ(n),this.compileAndRun(r,[e,t]))},e.prototype.depthwiseConv2DDerInput=function(e,t,n){var r=new wQ(n);return this.compileAndRun(r,[e,t])},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){var r=new xQ(n);return this.compileAndRun(r,[e,t])},e.prototype.conv3d=function(e,t,n){var r=new _Q(n);return this.compileAndRun(r,[e,t])},e.prototype.conv3dDerInput=function(e,t,n){var r=new bQ(n);return this.compileAndRun(r,[e,t])},e.prototype.conv3dDerFilter=function(e,t,n){var r=new yQ(n);return this.compileAndRun(r,[e,t])},e.prototype.maxPool=function(e,t){var n=new wJ(t,"max",!1),r=this.makeOutputArray(n.outputShape,e.dtype);return this.compileAndRun(n,[e],r)},e.prototype.avgPool=function(e,t){var n=new wJ(t,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e],r)},e.prototype.maxPoolBackprop=function(e,t,n,r){var i=new wJ(r,"max",!0),o=this.compileAndRun(i,[t]),a=new pJ(r),s=this.makeOutputArray(a.outputShape,t.dtype),l=this.compileAndRun(a,[e,o],s);return o.dispose(),l},e.prototype.avgPoolBackprop=function(e,t,n){var r=new JX(n),i=this.makeOutputArray(r.outputShape,t.dtype);return this.compileAndRun(r,[e],i)},e.prototype.cast=function(e,t){return gX(e,t,this)},e.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,o=0;o<e.rank;o++)o!==t&&(r[i++]=e.shape[o]);var a=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var l=new Array(n);for(o=0;o<l.length;o++)a[t]=o,l[o]=this.slice(e,a,s).reshape(r);return l},e.prototype.avgPool3d=function(e,t){var n=new kJ(t,"avg",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e],r)},e.prototype.avgPool3dBackprop=function(e,t,n){var r=new ZX(n),i=this.makeOutputArray(r.outputShape,t.dtype);return this.compileAndRun(r,[e],i)},e.prototype.maxPool3d=function(e,t){var n=new kJ(t,"max",!1),r=this.makeOutputArray(n.outputShape,"float32");return this.compileAndRun(n,[e],r)},e.prototype.maxPool3dBackprop=function(e,t,n,r){var i=new kJ(r,"max",!0),o=this.compileAndRun(i,[t]),a=new fJ(r),s=this.makeOutputArray(a.outputShape,t.dtype),l=this.compileAndRun(a,[e,o],s);return o.dispose(),l},e.prototype.reshape=function(e,t){var n=this.texData.get(e.dataId);return!n.isPacked||WG(e.shape,t)||null!==n.texture&&WG(n.shape,t)?vX(e,t):this.packedReshape(e,t)},e.prototype.resizeBilinear=function(e,t,n,r){var i=PW().getBool("WEBGL_PACK_IMAGE_OPERATIONS")?new SJ(e.shape,t,n,r):new IJ(e.shape,t,n,r);return this.compileAndRun(i,[e])},e.prototype.resizeBilinearBackprop=function(e,t,n){var r=new CJ(e,t,n);return this.compileAndRun(r,[e])},e.prototype.resizeNearestNeighbor=function(e,t,n,r){var i=new TJ(e.shape,t,n,r);return this.compileAndRun(i,[e])},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){var r=new NJ(e,t,n);return this.compileAndRun(r,[e])},e.prototype.multinomial=function(e,t,n,r){var i=t?e:QY(e),o=i.shape[0],a=i.shape[1],s=new gJ(o,a,n),l=this.makeOutputArray(s.outputShape,"int32"),u=s.getCustomSetupFunc(r);return this.compileAndRun(s,[i],l,u)},e.prototype.oneHot=function(e,t,n,r){var i=new vJ(e.size,t,n,r);return this.compileAndRun(i,[e])},e.prototype.diag=function(e){var t=new DQ(e.size);return this.compileAndRun(t,[e])},e.prototype.nonMaxSuppression=function(e,t,n,r,i){return sK("tf.nonMaxSuppression() in webgl locks the UI thread. Call tf.nonMaxSuppressionAsync() instead"),EX(e.dataSync(),t.dataSync(),n,r,i)},e.prototype.cropAndResize=function(e,t,n,r,i,o){var a=new IQ(e.shape,t.shape,r,i,o);return this.compileAndRun(a,[e,t,n])},e.prototype.depthToSpace=function(e,t,n){VW(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));var r=e.shape[0],i="NHWC"===n?e.shape[1]:e.shape[2],o="NHWC"===n?e.shape[2]:e.shape[3],a="NHWC"===n?e.shape[3]:e.shape[1],s=i*t,l=o*t,u=a/(t*t),c=new RQ("NHWC"===n?[r,s,l,u]:[r,u,s,l],t,n);return this.compileAndRun(c,[e])},e.prototype.split=function(e,t,n){return IX(e,t,n)},e.prototype.scatterND=function(e,t,n){var r=zY(0,e,n),i=r.sliceRank,o=r.numUpdates,a=r.sliceSize,s=r.strides,l=r.outputSize,u=[l/a,a],c=e.reshape([o,i]),d=t.reshape([o,a]);if(0===l)return vX(IK([]),n);var h=NK(0),p=new DJ(o,i,c.rank,d.rank,s,u);return this.compileAndRun(p,[d,c,h]).reshape(n)},e.prototype.sparseToDense=function(e,t,n,r){var i=zY(0,e,n),o=i.sliceRank,a=i.numUpdates,s=i.strides,l=i.outputSize,u=new DJ(a,o,e.rank,t.rank,s,[l,1],!1);return this.compileAndRun(u,[t,e,r]).reshape(n)},e.prototype.fft=function(e){return this.fftImpl(e,!1)},e.prototype.ifft=function(e){return this.fftImpl(e,!0)},e.prototype.fftImpl=function(e,t){var n=this.texData.get(e.dataId),r=new FQ("return real * expR - imag * expI;",e.shape,t),i=new FQ("return real * expI + imag * expR;",e.shape,t),o=[this.makeComplexComponentTensorHandle(e,n.complexTensors.real),this.makeComplexComponentTensorHandle(e,n.complexTensors.imag)],a=this.compileAndRun(r,o),s=this.compileAndRun(i,o),l=this.complex(a,s).as2D(e.shape[0],e.shape[1]);return a.dispose(),s.dispose(),l},e.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=BY(e,t),o=i[0],a=i[1],s=i[2],l=i[3],u=t.reshape([a,r]),c=e.reshape([e.size/s,s]),d=new UQ(r,l,[a,s]);return this.compileAndRun(d,[c,u]).reshape(o)},e.prototype.fill=function(e,t,n){if("string"===(n=n||dH(t))){var r=tH(n,qW(e));return r.fill(t),PH.make(e,{values:r},n)}var i=new jQ(e,t),o=i.getCustomSetupFunc(t),a=this.makeOutputArray(e,n);return this.compileAndRun(i,[],a,o)},e.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported under string dtype");return this.fill(e.shape,1,e.dtype)},e.prototype.zerosLike=function(e){return this.fill(e.shape,"string"===e.dtype?"":0,e.dtype)},e.prototype.linspace=function(e,t,n){return yX(e,t,n)},e.prototype.makeOutputArray=function(e,t){return PH.make(e,{},t,this)},e.prototype.makePackedTensor=function(e,t){var n=PH.make(e,{},t,this);return this.texData.get(n.dataId).isPacked=!0,n},e.prototype.unpackTensor=function(e){var t=new yZ(e.shape);return this.compileAndRun(t,[e],PH.make(t.outputShape,{},e.dtype,this))},e.prototype.packTensor=function(e){var t=new yJ(e.shape);return this.compileAndRun(t,[e],this.makePackedTensor(e.shape,e.dtype),null,!0)},e.prototype.packedReshape=function(e,t){var n=e.reshape([VG(e.shape)].concat(zG(e.shape))),r=[VG(t)].concat(zG(t)),i=new EJ(r,n.shape);return this.compileAndRun(i,[n],null,null,!0).reshape(t)},e.prototype.decode=function(e){var t,n=this.texData.get(e),r=n.isPacked,i=n.shape,o=n.dtype,a=UG(i),s=uG(i),l=this.makeTensorHandle(i,"float32");return this.texData.get(l.dataId).isPacked=!0,this.texData.get(l.dataId).dtype=o,this.texData.get(l.dataId).texShape=s.map((function(e){return 2*e})),t=r?new AQ(a,s):new TQ(a,s),this.compileAndRun(t,[{shape:a,dtype:o,dataId:e}],l,null,!0),l},e.prototype.compileAndRun=function(e,t,n,r,i){var o=this;if(void 0===i&&(i=!1),null==n&&(n=e.usesPackedTextures?this.makePackedTensor(e.outputShape,t[0].dtype):this.makeOutputArray(e.outputShape,t[0].dtype)),0===n.size)return this.texData.get(n.dataId).values=eH(n.dtype,0),n;var a=t.map((function(t){if("complex64"===t.dtype)throw new Error("GPGPUProgram does not support complex64 input. For complex64 dtypes, please separate the program into real and imaginary parts.");var n=o.texData.get(t.dataId);if(null==n.texture){if(!e.usesPackedTextures&&qW(t.shape)<=PW().getNumber("WEBGL_SIZE_UPLOAD_UNIFORM"))return{shape:t.shape,texData:null,isUniform:!0,uniformValues:n.values};e.usesPackedTextures&&(n.isPacked=!0,n.shape=t.shape)}else if(!!n.isPacked!=!!e.usesPackedTextures)t=n.isPacked?o.unpackTensor(t):o.packTensor(t),n=o.texData.get(t.dataId);else if(n.isPacked&&!WG(n.shape,t.shape)){var r=t,i=t.shape;t.shape=n.shape,t=o.packedReshape(t,i),n=o.texData.get(t.dataId),r.shape=i}return o.uploadToGPU(t.dataId),{shape:t.shape,texData:n,isUniform:!1}}));this.uploadToGPU(n.dataId);var s,l={shape:n.shape,texData:this.texData.get(n.dataId),isUniform:!1},u=function(e,t,n){var r="";t.concat(n).forEach((function(e){var t=null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0,n=e.isUniform?"uniform":e.texData.texShape;r+=e.shape+"_"+n+"_"+t}));var i=e.userCode;return e.constructor.name+"_"+r+"_"+i}(e,a,l),c=this.getAndSaveBinary(u,(function(){return function(e,t,n,r){var i=t.userCode,o=n.map((function(e,n){var r={logicalShape:e.shape,texShape:e.isUniform?null:e.texData.texShape,isUniform:e.isUniform,isPacked:!e.isUniform&&e.texData.isPacked,flatOffset:null};return null!=e.texData&&null!=e.texData.slice&&e.texData.slice.flatOffset>0&&(r.flatOffset=e.texData.slice.flatOffset),{name:t.variableNames[n],shapeInfo:r}})),a=o.map((function(e){return e.shapeInfo})),s={logicalShape:r.shape,texShape:r.texData.texShape,isUniform:!1,isPacked:r.texData.isPacked,flatOffset:null},l=BX(o,s,i,t.usesPackedTextures),u=e.createProgram(l),c=null,d=e.getUniformLocation(u,"NAN",!1);1===PW().getNumber("WEBGL_VERSION")&&(c=e.getUniformLocation(u,"INFINITY",!1));for(var h={},p=0;p<t.variableNames.length;p++){var f=t.variableNames[p];h[f]=e.getUniformLocation(u,f,!1),h["offset"+f]=e.getUniformLocation(u,"offset"+f,!1)}return{program:t,source:l,webGLProgram:u,uniformLocations:h,inShapeInfos:a,outShapeInfo:s,infLoc:c,nanLoc:d}}(o.gpgpu,e,a,l)})),d=null!=this.activeTimers;return d&&(s=this.startTimer()),function(e,t,n,r,i){lJ(t.inShapeInfos,n),lJ([t.outShapeInfo],[r]);var o=r.texData.texture,a=r.texData.texShape;r.texData.isPacked?e.setOutputPackedMatrixTexture(o,a[0],a[1]):e.setOutputMatrixTexture(o,a[0],a[1]),e.setProgram(t.webGLProgram),1===PW().getNumber("WEBGL_VERSION")&&null!==t.infLoc&&e.gl.uniform1f(t.infLoc,1/0),null!==t.nanLoc&&e.gl.uniform1f(t.nanLoc,NaN),n.forEach((function(n,r){var i=t.program.variableNames[r],o=t.uniformLocations[i],a=t.uniformLocations["offset"+i];if(null!=o)if(n.isUniform)if(qW(n.shape)<2)e.gl.uniform1f(o,n.uniformValues[0]);else{var s=n.uniformValues;s instanceof Float32Array||(s=new Float32Array(s)),e.gl.uniform1fv(o,s)}else null!=n.texData.slice&&null!=a&&e.gl.uniform1i(a,n.texData.slice.flatOffset),e.setInputMatrixTexture(n.texData.texture,o,r)})),null!=i&&i(e,t.webGLProgram),e.executeProgram()}(this.gpgpu,c,a,l,r),d&&(s=this.endTimer(s),this.activeTimers.push({name:e.constructor.name,query:this.getQueryTime(s)})),!PW().getBool("WEBGL_LAZILY_UNPACK")&&this.texData.get(n.dataId).isPacked&&!1===i?this.unpackTensor(n):n},e.prototype.getAndSaveBinary=function(e,t){return e in this.binaryCache||(this.binaryCache[e]=t()),this.binaryCache[e]},e.prototype.getTextureManager=function(){return this.textureManager},e.prototype.dispose=function(){this.disposed||(this.textureManager.dispose(),null!=this.canvas&&null!=this.canvas.remove?this.canvas.remove():this.canvas=null,null!=this.fromPixels2DContext&&this.fromPixels2DContext.canvas.remove&&this.fromPixels2DContext.canvas.remove(),this.gpgpuCreatedLocally&&(this.gpgpu.program=null,this.gpgpu.dispose()),this.disposed=!0)},e.prototype.floatPrecision=function(){var e=this;return null==this.floatPrecisionValue&&(this.floatPrecisionValue=iK((function(){if(!PW().get("WEBGL_RENDER_FLOAT32_ENABLED")){var t=PW().getBool("DEBUG");PW().set("DEBUG",!1);var n=e.abs(NK(1e-8)).dataSync()[0];if(PW().set("DEBUG",t),n>0)return 32}return 16}))),this.floatPrecisionValue},e.prototype.epsilon=function(){return 32===this.floatPrecision()?1e-7:1e-4},e.prototype.uploadToGPU=function(e){var t,n=this.texData.get(e),r=n.shape,i=n.dtype,o=n.values,a=n.texture,s=n.usage,l=n.isPacked;if(null==a){var u,c=null!=this.activeTimers;c&&(u=bH());var d=n.texShape;if(null==d&&(d=$G(r,l),n.texShape=d),null!=o){var h=UG(r),p=void 0,f=d[1],m=d[0],g=o instanceof Uint8Array;l?(f=(t=cG(d[0],d[1]))[0],m=t[1],p=new MQ(h,[m,f],g)):p=new LQ(h,[m,f],g);var v=this.makeTensorHandle([m,f],i);this.texData.get(v.dataId).usage=g?tG.PIXELS:tG.UPLOAD,this.gpgpu.uploadDenseMatrixToTexture(this.getTexture(v.dataId),f,m,o);var y=this.makeTensorHandle(p.outputShape,v.dtype);y.size=qW(p.outputShape),this.texData.get(y.dataId).isPacked=l,this.compileAndRun(p,[v],y);var b=this.texData.get(y.dataId);n.texture=b.texture,n.texShape=b.texShape,n.isPacked=b.isPacked,n.usage=b.usage,this.disposeData(v.dataId),this.texData.delete(y.dataId),n.values=null,c&&(this.uploadWaitMs+=bH()-u)}else{var x=this.acquireTexture(d,s,i,l);n.texture=x}}},e.prototype.convertAndCacheOnCPU=function(e,t){var n=this.texData.get(e),r=n.dtype;return this.releaseGPUData(e),null!=t&&(n.values=function(e,t){if("float32"===t||"complex64"===t)return e;if("int32"===t||"bool"===t){for(var n="int32"===t?new Int32Array(e.length):new Uint8Array(e.length),r=0;r<n.length;++r)n[r]=Math.round(e[r]);return n}throw new Error("Unknown dtype "+t)}(t,r)),n.values},e.prototype.acquireTexture=function(e,t,n,r){if(this.numBytesInGPU+=this.computeBytes(e,n),!this.warnedAboutMemory&&this.numBytesInGPU>1024*this.numMBBeforeWarning*1024){var i=(this.numBytesInGPU/1024/1024).toFixed(2);this.warnedAboutMemory=!0,console.warn("High memory usage in GPU: "+i+" MB, most likely due to a memory leak")}return this.textureManager.acquireTexture(e,t,r)},e.prototype.computeBytes=function(e,t){return e[0]*e[1]*aH(t)},e}();ZH()&&JH.registerBackend("webgl",(function(){return new wZ}),2);var kZ=kK({abs_:function(e){var t=cK(e,"x","abs");return"complex64"===t.dtype?JH.runKernel((function(e){return e.complexAbs(t)}),{$x:t}):JH.runKernel((function(e,n){var r=e.abs(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.toFloat().step(-1))}}}))}}),_Z=kK({acos_:function(e){var t=cK(e,"x","acos");return JH.runKernel((function(e,n){var r=e.acos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(NK(1).sub(n.toFloat().square()).sqrt()).neg()}}}))}}),EZ=kK({acosh_:function(e){var t=cK(e,"x","acosh");return JH.runKernel((function(e,n){var r=e.acosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(n.toFloat().square().sub(1).sqrt())}}}))}}),CZ=kK({asin_:function(e){var t=cK(e,"x","asin");return JH.runKernel((function(e,n){var r=e.asin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(NK(1).sub(n.toFloat().square()).sqrt())}}}))}}),IZ=kK({asinh_:function(e){var t=cK(e,"x","asinh");return JH.runKernel((function(e,n){var r=e.asinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.divStrict(NK(1).add(n.toFloat().square()).sqrt())}}}))}}),SZ=kK({atan_:function(e){var t=cK(e,"x","atan");return JH.runKernel((function(e,n){var r=e.atan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().square().add(1))}}}))}}),NZ=kK({atanh_:function(e){var t=cK(e,"x","atanh");return JH.runKernel((function(e,n){var r=e.atanh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(NK(1).sub(n.toFloat().square()))}}}))}}),TZ=kK({ceil_:function(e){var t=cK(e,"x","ceil");return JH.runKernel((function(e){return e.ceil(t)}),{$x:t},(function(e){return{$x:function(){return zK(e)}}}))}}),AZ=kK({clipByValue_:function(e,t,n){var r=cK(e,"x","clipByValue");return VW(t<=n,(function(){return"Error in clip: min ("+t+") must be less than or equal to max ("+n+")."})),JH.runKernel((function(e,i){var o=e.clip(r,t,n);return i([r]),o}),{$x:r},(function(e,r){var i=r[0];return{$x:function(){return e.where(i.greaterEqual(t).logicalAnd(i.lessEqual(n)),zK(e))}}}))}}),RZ=kK({cos_:function(e){var t=cK(e,"x","cos");return JH.runKernel((function(e,n){var r=e.cos(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sin().neg().mul(e)}}}))}}),DZ=kK({cosh_:function(e){var t=cK(e,"x","cosh");return JH.runKernel((function(e,n){var r=e.cosh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().sinh().mulStrict(e)}}}))}}),OZ=kK({erf_:function(e){var t=cK(e,"x","erf");return VW("int32"===t.dtype||"float32"===t.dtype,(function(){return"Input dtype must be `int32` or `float32`."})),"int32"===t.dtype&&(t=t.toFloat()),JH.runKernel((function(e,n){var r=e.erf(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.square().neg().exp().mul(2/Math.sqrt(Math.PI)))}}}))}}),PZ=kK({exp_:function(e){var t=cK(e,"x","exp");return JH.runKernel((function(e,n){var r=e.exp(t);return n([r]),r}),{$x:t},(function(e,t){return{$x:function(){return e.mulStrict(t[0])}}}))}}),LZ=kK({expm1_:function(e){var t=cK(e,"x","expm1");return JH.runKernel((function(e,n){var r=e.expm1(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.exp())}}}))}}),MZ=kK({floor_:function(e){var t=cK(e,"x","floor");return JH.runKernel((function(e){return e.floor(t)}),{$x:t},(function(e){return{$x:function(){return zK(e)}}}))}}),FZ=kK({log_:function(e){var t=cK(e,"x","log");return JH.runKernel((function(e,n){var r=e.log(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat())}}}))}}),jZ=kK({log1p_:function(e){var t=cK(e,"x","log1p");return JH.runKernel((function(e,n){var r=e.log1p(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.add(1))}}}))}}),BZ=kK({logSigmoid_:function(e){var t=cK(e,"x","logSigmoid");return JH.runKernel((function(e,n){var r=e.softplus(t.neg()).neg();return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.neg().sigmoid())}}}))}}),VZ=kK({neg_:function(e){var t=cK(e,"x","neg");return JH.runKernel((function(e){return e.neg(t)}),{$x:t},(function(e){return{$x:function(){return e.neg()}}}))}}),zZ=kK({reciprocal_:function(e){var t=cK(e,"x","reciprocal");return JH.runKernel((function(e,n){var r=e.reciprocal(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.square().neg())}}}))}}),UZ=kK({round_:function(e){var t=cK(e,"x","round");return JH.runKernel((function(e){return e.round(t)}),{$x:t},(function(e){return{$x:function(){return zK(e)}}}))}}),$Z=kK({rsqrt_:function(e){var t=cK(e,"x","rsqrt");return JH.runKernel((function(e,n){var r=e.rsqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.pow(1.5).mul(2)).neg()}}}))}}),qZ=kK({sigmoid_:function(e){var t=cK(e,"x","sigmoid");return JH.runKernel((function(e,n){var r=e.sigmoid(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.mul(NK(1).sub(n)))}}}))}}),WZ=kK({sign_:function(e){var t=cK(e,"x","sign");return JH.runKernel((function(e){return e.sign(t)}),{$x:t},(function(e){return{$x:function(){return zK(e)}}}))}}),HZ=kK({isNaN_:function(e){var t=cK(e,"x","isNaN");return JH.runKernel((function(e){return e.isNaN(t)}),{$x:t},(function(e){return{$x:function(){return zK(e)}}}))}}),GZ=kK({isInf_:function(e){var t=cK(e,"x","isInf");return JH.runKernel((function(e){return e.isInf(t)}),{$x:t},(function(e){return{$x:function(){return zK(e)}}}))}}),KZ=kK({isFinite_:function(e){var t=cK(e,"x","isFinite");return JH.runKernel((function(e){return e.isFinite(t)}),{$x:t},(function(e){return{$x:function(){return zK(e)}}}))}}),YZ=kK({sin_:function(e){var t=cK(e,"x","sin");return JH.runKernel((function(e,n){var r=e.sin(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cos().mul(e)}}}))}}),XZ=kK({sinh_:function(e){var t=cK(e,"x","sinh");return JH.runKernel((function(e,n){var r=e.sinh(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return n.toFloat().cosh().mulStrict(e)}}}))}}),QZ=kK({softplus_:function(e){var t=cK(e,"x","softplus");return JH.runKernel((function(e,n){var r=e.softplus(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.sigmoid())}}}))}}),JZ=kK({sqrt_:function(e){var t=cK(e,"x","sqrt");return JH.runKernel((function(e,n){var r=e.sqrt(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.toFloat().sqrt().mul(2))}}}))}}),ZZ=kK({square_:function(e){var t=cK(e,"x","square");return JH.runKernel((function(e,n){return n([t]),e.square(t)}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mul(n.toFloat().mul(2))}}}))}}),e0=kK({step_:function(e,t){void 0===t&&(t=0);var n=cK(e,"x","step");return JH.runKernel((function(e){return e.step(n,t)}),{$x:n},(function(e){return{$x:function(){return zK(e)}}}))}}),t0=kK({tan_:function(e){var t=cK(e,"x","tan");return JH.runKernel((function(e,n){var r=e.tan(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.div(n.cos().square())}}}))}}),n0=kK({tanh_:function(e){var t=cK(e,"x","tanh");return JH.runKernel((function(e,n){var r=e.tanh(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return NK(1).sub(n.square()).mulStrict(e)}}}))}});function r0(e,t,n,r,i,o){var a,s,l=cK(e,"x","batchNorm"),u=cK(t,"mean","batchNorm"),c=cK(n,"variance","batchNorm");return null!=i&&(a=cK(i,"scale","batchNorm")),null!=r&&(s=cK(r,"offset","batchNorm")),VW(2===l.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."})),VW(2===u.rank||1===u.rank,(function(){return"Error in batchNorm2D: mean must be rank 2 or rank 1 but got rank "+u.rank+"."})),VW(2===c.rank||1===c.rank,(function(){return"Error in batchNorm2D: variance must be rank 2 or rank 1 but got rank "+c.rank+"."})),null!=a&&VW(2===a.rank||1===a.rank,(function(){return"Error in batchNorm2D: scale must be rank 2 or rank 1 but got rank "+a.rank+"."})),null!=s&&VW(2===s.rank||1===s.rank,(function(){return"Error in batchNorm2D: offset must be rank 2 or rank 1 but got rank "+s.rank+"."})),a0(l,u,c,s,a,o)}function i0(e,t,n,r,i,o){var a,s,l=cK(e,"x","batchNorm"),u=cK(t,"mean","batchNorm"),c=cK(n,"variance","batchNorm");return null!=i&&(a=cK(i,"scale","batchNorm")),null!=r&&(s=cK(r,"offset","batchNorm")),VW(3===l.rank,(function(){return"Error in batchNorm3D: x must be rank 3 but got rank "+l.rank+"."})),VW(3===u.rank||1===u.rank,(function(){return"Error in batchNorm3D: mean must be rank 3 or rank 1 but got rank "+u.rank+"."})),VW(3===c.rank||1===c.rank,(function(){return"Error in batchNorm3D: variance must be rank 3 or rank 1 but got rank "+c.rank+"."})),null!=a&&VW(3===a.rank||1===a.rank,(function(){return"Error in batchNorm3D: scale must be rank 3 or rank 1 but got rank "+a.rank+"."})),null!=s&&VW(3===s.rank||1===s.rank,(function(){return"Error in batchNorm3D: offset must be rank 3 or rank 1 but got rank "+s.rank+"."})),a0(l,u,c,s,a,o)}function o0(e,t,n,r,i,o){var a,s,l=cK(e,"x","batchNorm"),u=cK(t,"mean","batchNorm"),c=cK(n,"variance","batchNorm");return null!=i&&(a=cK(i,"scale","batchNorm")),null!=r&&(s=cK(r,"offset","batchNorm")),VW(4===l.rank,(function(){return"Error in batchNorm4D: x must be rank 4 but got rank "+l.rank+"."})),VW(4===u.rank||1===u.rank,(function(){return"Error in batchNorm4D: mean must be rank 4 or rank 1 but got rank "+u.rank+"."})),VW(4===c.rank||1===c.rank,(function(){return"Error in batchNorm4D: variance must be rank 4 or rank 1 but got rank "+c.rank+"."})),null!=a&&VW(4===a.rank||1===a.rank,(function(){return"Error in batchNorm4D: scale must be rank 4 or rank 1 but got rank "+a.rank+"."})),null!=s&&VW(4===s.rank||1===s.rank,(function(){return"Error in batchNorm4D: offset must be rank 4 or rank 1 but got rank "+s.rank+"."})),a0(l,u,c,s,a,o)}function a0(e,t,n,r,i,o){null==o&&(o=.001);var a,s,l,u=cK(e,"x","batchNorm"),c=cK(t,"mean","batchNorm"),d=cK(n,"variance","batchNorm");return null!=i&&(a=cK(i,"scale","batchNorm")),null!=r&&(s=cK(r,"offset","batchNorm")),VW(c.rank===d.rank,(function(){return"Batch normalization gradient requires mean and variance to have equal ranks."})),VW(null==s||c.rank===s.rank,(function(){return"Batch normalization gradient requires mean and offset to have equal ranks."})),VW(null==a||c.rank===a.rank,(function(){return"Batch normalization gradient requires mean and scale to have equal ranks."})),l=0===u.rank||1===u.rank?u.as4D(1,1,1,u.size):2===u.rank?u.as4D(1,1,u.shape[0],u.shape[1]):3===u.rank?u.as4D(1,u.shape[0],u.shape[1],u.shape[2]):u,JH.runKernel((function(e,t){var n=e.batchNormalization(l,s0(c),s0(d),o,s0(a),s0(s));return t([u,c,d,a]),n}),{$x:u,$mean:c,$variance:d,$scale:a,$offset:s},(function(e,t){var n=t,r=n[0],i=n[1],a=n[2],s=n[3],u=null==s?NK(1):s,c=nX(i.shape,l.shape),d=[];if(1===i.rank){for(var h=0;h<l.shape.length-1;++h)d.push(l.shape[h]);d.push(1)}var p=r.sub(i),f=e.mul(u),m=$Z(a.add(NK(o))),g=m.mul(m).mul(m).mul(NK(-.5));return{$x:function(){return 1===i.rank?e.mul(AY(m.as4D(1,1,1,i.shape[0]),d)).mul(u).reshape(r.shape):e.mul(m).mul(u).reshape(r.shape)},$mean:function(){var e=m.mul(NK(-1)).mul(f);return 1===i.rank&&(e=e.sum(c)),e.reshape(i.shape)},$variance:function(){var e=g.mul(p).mul(f);return 1===i.rank&&(e=e.sum(c)),e.reshape(i.shape)},$scale:function(){var t=p.mul(m),n=e.mul(t);return 1===i.rank&&(n=n.sum(c)),n.reshape(i.shape)},$offset:function(){var t=e;return 1===i.rank&&(t=t.sum(c)),t.reshape(i.shape)}}})).reshape(u.shape)}function s0(e){return null==e?null:0===e.rank?e.as1D():1===e.rank?e:2===e.rank?e.as4D(1,1,e.shape[0],e.shape[1]):3===e.rank?e.as4D(1,e.shape[0],e.shape[1],e.shape[2]):e}function l0(){rK("tf.batchNormalization() is going away. Use tf.batchNorm() instead, and note the positional argument change of scale, offset, and varianceEpsilon")}var u0=kK({batchNormalization2d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),l0(),r0(e,t,n,o,i,r)}}),c0=kK({batchNormalization3d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),l0(),i0(e,t,n,o,i,r)}}),d0=kK({batchNormalization4d_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),l0(),o0(e,t,n,o,i,r)}}),h0=kK({batchNormalization_:function(e,t,n,r,i,o){return void 0===r&&(r=.001),l0(),a0(e,t,n,o,i,r)}}),p0=kK({batchNorm_:a0}),f0=kK({batchNorm2d_:r0}),m0=kK({batchNorm3d_:i0}),g0=kK({batchNorm4d_:o0}),v0=kK({logicalAnd_:function(e,t){var n=cK(e,"a","logicalAnd","bool"),r=cK(t,"b","logicalAnd","bool");return rX(n.shape,r.shape),JH.runKernel((function(e){return e.logicalAnd(n,r)}),{$a:n,$b:r})}}),y0=kK({logicalNot_:function(e){var t=cK(e,"x","logicalNot","bool");return JH.runKernel((function(e){return e.logicalNot(t)}),{$x:t})}}),b0=kK({logicalOr_:function(e,t){var n=cK(e,"a","logicalOr","bool"),r=cK(t,"b","logicalOr","bool");return rX(n.shape,r.shape),JH.runKernel((function(e){return e.logicalOr(n,r)}),{$a:n,$b:r})}}),x0=kK({logicalXor_:function(e,t){var n=cK(e,"a","logicalXor","bool"),r=cK(t,"b","logicalXor","bool");return rX(n.shape,r.shape),b0(e,t).logicalAnd(v0(e,t).logicalNot())}}),w0=kK({where_:function(e,t,n){var r=cK(t,"a","where"),i=cK(n,"b","where"),o=cK(e,"condition","where","bool");return zW(r.shape,i.shape,"Error in where: "),1===o.rank?VW(o.shape[0]===r.shape[0],(function(){return"The first dimension of `a` must match the size of `condition`."})):zW(o.shape,i.shape,"Error in where: "),JH.runKernel((function(e,t){var n=e.select(o,r,i);return t([o]),n}),{$condition:o,$a:r,$b:i},(function(e,t){var n=t[0];return{$condition:function(){return zK(n).toFloat()},$a:function(){return e.mul(n.cast(e.dtype))},$b:function(){return e.mul(n.logicalNot().cast(e.dtype))}}}))}}),k0=function(e){return RW(this,void 0,void 0,(function(){var t,n,r;return DW(this,(function(i){switch(i.label){case 0:return[4,(t=cK(e,"condition","whereAsync","bool")).data()];case 1:return n=i.sent(),r=TX(t.shape,n),e!==t&&t.dispose(),[2,r]}}))}))},_0=kK({add_:function(e,t){var n,r=cK(e,"a","add"),i=cK(t,"b","add");n=WH(r,i),r=n[0],i=n[1];var o=rX(r.shape,i.shape);return JH.runKernel((function(e){return e.add(r,i)}),{$a:r,$b:i},(function(e){return{$a:function(){var t=e,n=nX(r.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},$b:function(){var t=e,n=nX(i.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(i.shape)}}}))}}),E0=kK({addN_:function(e){VW(Array.isArray(e),(function(){return"The argument passed to tf.addN() must be a list of tensors"})),VW(e.length>=1,(function(){return"Must pass at least one tensor to tf.addN(), but got "+e.length}));var t=e.map((function(e,t){return cK(e,"tensors"+t,"addN")})),n=t[0];t.forEach((function(e){if(e.dtype!==n.dtype)throw new Error("All tensors passed to tf.addN() must have the same dtype")})),t.forEach((function(e){if(!WW(e.shape,n.shape))throw new Error("All tensors passed to tf.addN() must have the same shape")}));var r=t;return JH.runKernel((function(e){return e.addN(t)}),r,(function(e){var n={};return t.forEach((function(t,r){n[r]=function(){return e.clone()}})),n}))}}),C0=kK({addStrict_:function(e,t){var n=cK(e,"a","addStrict"),r=cK(t,"b","addStrict");return zW(n.shape,r.shape,"Error in addStrict: "),n.add(r)}}),I0=kK({atan2_:function(e,t){var n,r=cK(e,"a","atan2"),i=cK(t,"b","atan2");n=WH(r,i),r=n[0],i=n[1];var o=rX(r.shape,i.shape);return JH.runKernel((function(e,t){var n=e.atan2(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=_0(n.square(),r.square()),i=e.mul(r.div(t)),a=nX(n.shape,o);return a.length>0&&(i=i.sum(a)),i.reshape(n.shape)},$b:function(){var t=_0(n.square(),r.square()),i=VZ(e.mul(n.div(t))),a=nX(r.shape,o);return a.length>0&&(i=i.sum(a)),i.reshape(r.shape)}}}))}}),S0=kK({div_:function(e,t){var n,r=cK(e,"a","div"),i=cK(t,"b","div");if(n=WH(r,i),r=n[0],i=n[1],"int32"===r.dtype&&"int32"===i.dtype)return T0(r,i);var o=rX(r.shape,i.shape);return JH.runKernel((function(e,t){var n=e.realDivide(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=e.div(r.toFloat()),i=nX(n.shape,o);return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=nX(r.shape,o);i.length>0&&(t=t.sum(i).reshape(r.shape));var a=r.square();return t.div(a.toFloat()).neg()}}}))}}),N0=kK({divStrict_:function(e,t){var n=cK(e,"a","div"),r=cK(t,"b","div");return zW(n.shape,r.shape,"Error in divideStrict: "),n.div(r)}}),T0=kK({floorDiv_:function(e,t){var n,r=cK(e,"a","floorDiv"),i=cK(t,"b","floorDiv");n=WH(r,i),r=n[0],i=n[1];var o=rX(r.shape,i.shape);return JH.runKernel((function(e,t){var n=e.floorDiv(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=e.div(r.toFloat()),i=nX(n.shape,o);return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=nX(r.shape,o);i.length>0&&(t=t.sum(i).reshape(r.shape));var a=r.square();return t.div(a.toFloat()).neg()}}}))}}),A0=kK({maximum_:function(e,t){var n,r=cK(e,"a","maximum"),i=cK(t,"b","maximum");return n=WH(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),rX(r.shape,i.shape),JH.runKernel((function(e,t){var n=e.maximum(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){return e.mul(n.greaterEqual(r).toFloat())},$b:function(){return e.mul(n.less(r).toFloat())}}}))}}),R0=kK({maximumStrict_:function(e,t){var n=cK(e,"a","maximumStrict"),r=cK(t,"b","maximumStrict");return zW(n.shape,r.shape,"Error in maximumStrict: "),n.maximum(r)}}),D0=kK({minimum_:function(e,t){var n,r=cK(e,"a","minimum"),i=cK(t,"b","minimum");return n=WH(r,i),r=n[0],i=n[1],"bool"===r.dtype&&(r=r.toInt(),i=i.toInt()),rX(r.shape,i.shape),JH.runKernel((function(e,t){var n=e.minimum(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){return e.mul(n.lessEqual(r).toFloat())},$b:function(){return e.mul(n.greater(r).toFloat())}}}))}}),O0=kK({minimumStrict_:function(e,t){var n=cK(e,"a","minimumStrict"),r=cK(t,"b","minimumStrict");return zW(n.shape,r.shape,"Error in minimumStrict: "),n.minimum(r)}}),P0=kK({mod_:function(e,t){var n,r=cK(e,"a","mod"),i=cK(t,"b","mod");n=WH(r,i),r=n[0],i=n[1];var o=rX(r.shape,i.shape);return JH.runKernel((function(e,t){var n=e.mod(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=nX(n.shape,o);return t.length>0?e.sum(t).reshape(n.shape):e},$b:function(){var t=e.mul(n.div(r).floor().neg()),i=nX(r.shape,o);return i.length>0?t.sum(i).reshape(r.shape):t}}}))}}),L0=kK({modStrict_:function(e,t){var n=cK(e,"a","modStrict"),r=cK(t,"b","modStrict");return zW(n.shape,r.shape,"Error in modStrict: "),n.mod(r)}}),M0=kK({mul_:function(e,t){var n,r=cK(e,"a","mul"),i=cK(t,"b","mul");n=WH(r,i),r=n[0],i=n[1];var o=rX(r.shape,i.shape);return JH.runKernel((function(e,t){var n=e.multiply(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){var t=e.mul(r.toFloat()),i=nX(n.shape,o);return i.length>0?t.sum(i).reshape(n.shape):t},$b:function(){var t=e.mul(n.toFloat()),i=nX(r.shape,o);return i.length>0?t.sum(i).reshape(r.shape):t}}}))}}),F0=kK({mulStrict_:function(e,t){var n=cK(e,"a","mul"),r=cK(t,"b","mul");return zW(n.shape,r.shape,"Error in multiplyStrict: "),n.mul(r)}}),j0=kK({pow_:function(e,t){var n=cK(e,"base","pow"),r=cK(t,"exp","pow"),i=rX(n.shape,r.shape);return e=n.cast($H(n.dtype,r.dtype)),t=r.cast($H(n.dtype,r.dtype)),JH.runKernel((function(e,t){var i=e.pow(n,r);return t([n,r,i]),i}),{$base:n,$exp:r},(function(e,t){var n=t[0],r=t[1],o=t[2];return{$base:function(){var t=r.toFloat(),o=e.mul(t.mul(n.pow(t.sub(NK(1))))),a=nX(n.shape,i);return a.length>0&&(o=o.sum(a)),o.reshape(n.shape)},$exp:function(){var t=n.greater(0),a=n.log().where(t,zK(n)),s=e.mul(o.mul(a)),l=nX(r.shape,i);return l.length>0&&(s=s.sum(l)),s.reshape(r.shape)}}}))}}),B0=kK({powStrict_:function(e,t){return zW(e.shape,t.shape,"Error in powStrict: "),e.pow(t)}}),V0=kK({squaredDifference_:function(e,t){var n,r=cK(e,"a","squaredDifference"),i=cK(t,"b","squaredDifference");return n=WH(r,i),r=n[0],i=n[1],rX(r.shape,i.shape),JH.runKernel((function(e,t){var n=e.squaredDifference(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1],i=NK(2);return{$a:function(){return e.mul(n.sub(r).mul(i))},$b:function(){return e.mul(r.sub(n).mul(i))}}}))}}),z0=kK({squaredDifferenceStrict_:function(e,t){var n=cK(e,"a","squaredDifferenceStrict"),r=cK(t,"b","squaredDifferenceStrict");return zW(n.shape,r.shape,"Error in squaredDifferenceStrict: "),n.squaredDifference(r)}}),U0=kK({sub_:function(e,t){var n,r=cK(e,"a","sub"),i=cK(t,"b","sub");n=WH(r,i),r=n[0],i=n[1];var o=rX(r.shape,i.shape);return JH.runKernel((function(e){return e.subtract(r,i)}),{$a:r,$b:i},(function(e){return{$a:function(){var t=e,n=nX(r.shape,o);return n.length>0&&(t=t.sum(n)),t.reshape(r.shape)},$b:function(){var t=e,n=nX(i.shape,o);return n.length>0&&(t=t.sum(n)),t.neg().reshape(i.shape)}}}))}}),$0=kK({subStrict_:function(e,t){var n=cK(e,"a","subStrict"),r=cK(t,"b","subStrict");return zW(n.shape,r.shape,"Error in subStrict: "),n.sub(r)}}),q0=kK({equal_:function(e,t){var n,r=cK(e,"a","equal"),i=cK(t,"b","equal");return n=WH(r,i),r=n[0],i=n[1],rX(r.shape,i.shape),JH.runKernel((function(e){return e.equal(r,i)}),{$a:r,$b:i})}}),W0=kK({equalStrict_:function(e,t){var n=cK(e,"a","equalStrict"),r=cK(t,"b","equalStrict");return zW(n.shape,r.shape,"Error in equalStrict: "),n.equal(r)}}),H0=kK({greater_:function(e,t){var n,r=cK(e,"a","greater"),i=cK(t,"b","greater");return n=WH(r,i),r=n[0],i=n[1],rX(r.shape,i.shape),JH.runKernel((function(e){return e.greater(r,i)}),{$a:r,$b:i})}}),G0=kK({greaterEqual_:function(e,t){var n,r=cK(e,"a","greaterEqual"),i=cK(t,"b","greaterEqual");return n=WH(r,i),r=n[0],i=n[1],rX(r.shape,i.shape),JH.runKernel((function(e,t){var n=e.greaterEqual(r,i);return t([r,i]),n}),{$a:r,$b:i},(function(e,t){var n=t[0],r=t[1];return{$a:function(){return zK(n)},$b:function(){return zK(r)}}}))}}),K0=kK({greaterEqualStrict_:function(e,t){var n=cK(e,"a","greaterEqualStrict"),r=cK(t,"b","greaterEqualStrict");return zW(n.shape,r.shape,"Error in greaterEqualStrict: "),n.greaterEqual(r)}}),Y0=kK({greaterStrict_:function(e,t){var n=cK(e,"a","greaterStrict"),r=cK(t,"b","greaterStrict");return zW(n.shape,r.shape,"Error in greaterStrict: "),n.greater(r)}}),X0=kK({less_:function(e,t){var n,r=cK(e,"a","less"),i=cK(t,"b","less");return n=WH(r,i),r=n[0],i=n[1],rX(r.shape,i.shape),JH.runKernel((function(e){return e.less(r,i)}),{$a:r,$b:i})}}),Q0=kK({lessEqual_:function(e,t){var n,r=cK(e,"a","lessEqual"),i=cK(t,"b","lessEqual");return n=WH(r,i),r=n[0],i=n[1],rX(r.shape,i.shape),JH.runKernel((function(e){return e.lessEqual(r,i)}),{$a:r,$b:i})}}),J0=kK({lessEqualStrict_:function(e,t){var n=cK(e,"a","lessEqualStrict"),r=cK(t,"b","lessEqualStrict");return zW(n.shape,r.shape,"Error in lessEqualStrict: "),n.lessEqual(r)}}),Z0=kK({lessStrict_:function(e,t){var n=cK(e,"a","lessStrict"),r=cK(t,"b","lessStrict");return zW(n.shape,r.shape,"Error in lessStrict: "),n.less(r)}}),e1=kK({notEqual_:function(e,t){var n,r=cK(e,"a","notEqual"),i=cK(t,"b","notEqual");return n=WH(r,i),r=n[0],i=n[1],rX(r.shape,i.shape),JH.runKernel((function(e){return e.notEqual(r,i)}),{$a:r,$b:i})}}),t1=kK({notEqualStrict_:function(e,t){var n=cK(e,"a","notEqualStrict"),r=cK(t,"b","notEqualStrict");return zW(n.shape,r.shape,"Error in notEqualStrict: "),n.notEqual(r)}});function n1(e,t){for(var n=[],r=e;r<t;++r)n.push(r);return n}function r1(e){for(var t=[],n=0;n<e.length;++n)for(var r=0;r<e[n].length;++r)t.push(e[n][r]);return t}var i1=kK({gather_:function(e,t,n){void 0===n&&(n=0);var r=cK(e,"x","gather"),i=cK(t,"indices","gather","int32");n=JW(n,r.shape)[0];var o=function(e,t,n){for(var r=e.shape[n],i=[],o=1,a=1,s=0;s<n;s++)i.push(e.shape[s]),o*=e.shape[s];for(s=0;s<t.rank;s++)i.push(t.shape[s]);for(s=n+1;s<e.rank;s++)i.push(e.shape[s]),a*=e.shape[s];return{batchSize:o,sliceSize:a,dimSize:r,outputShape:i}}(r,i,n);return JH.runKernel((function(e,t){var o=e.gather(r,i.flatten(),n);return t([i]),o}),{$x:r},(function(e,t){var i=t[0];return{$x:function(){var t=r.shape,o=i.size,a=t.slice(0,n),s=a.length,l=t.slice(n,t.length).slice(1),u=l.length,c=n1(0,s),d=n1(s+1,s+1+u),h=r1([a,[o],l]),p=e.reshape(h),f=i.reshape([o]),m=r1([[s],c,d]),g=p.transpose(m),v=o1(g,f,r.shape[n]),y=yK(m);return v.transpose(y)}}})).reshape(o.outputShape)}}),o1=kK({unsortedSegmentSum_:function(e,t,n){var r=cK(e,"x","unsortedSegmentSum"),i=cK(t,"segmentIds","unsortedSegmentSum","int32");return VW(HW(n),(function(){return"numSegments must be of dtype int"})),JH.runKernel((function(e,t){var o=e.unsortedSegmentSum(r,i,n);return t([i]),o}),{$x:r},(function(e,t){var n=t[0];return{$x:function(){return function(e,t){for(var n=A0(t,zK(t)),r=i1(e,n),i=G0(t,NK(0,"int32")),o=r.rank-i.rank,a=0;a<o;++a)i=pY(i,a+1);i=v0(i,LK(r.shape,"bool"));var s=zK(r);return w0(i,r,s)}(e,n)}}}))}}),a1=function(e,t,n){return RW(this,void 0,void 0,(function(){var r,i,o,a,s,l,u,c,d,h,p,f,m;return DW(this,(function(g){switch(g.label){case 0:for(r=cK(e,"tensor","boolMask"),i=cK(t,"mask","boolMask","bool"),o=null==n?0:n,a=i.rank,s=r.shape,VW(a>0,(function(){return"mask cannot be scalar"})),zW(s.slice(o,o+a),i.shape,"mask's shape must match the first K dimensions of tensor's shape,"),l=1,u=o;u<o+a;u++)l*=s[u];return c=s.slice(0,o).concat([l],s.slice(o+a)),d=r.reshape(c),h=i.reshape([-1]),[4,k0(h)];case 1:return p=g.sent(),f=p.squeeze([1]),m=i1(d,f,o),e!==r&&r.dispose(),t!==i&&i.dispose(),f.dispose(),d.dispose(),h.dispose(),p.dispose(),[2,m]}}))}))};function s1(e,t,n,r,i,o,a){void 0===o&&(o="NHWC"),VW(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var s=e,l=t,u=!1;3===t.rank&&(u=!0,l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]),s=[1,e[0],e[1],e[2]]),VW(4===s.length,(function(){return"Error in conv2dDerInput: inShape must be length 4, but got length "+s.length+"."})),VW(4===l.rank,(function(){return"Error in conv2dDerInput: dy must be rank 4, but got rank "+l.rank})),VW(4===n.rank,(function(){return"Error in conv2dDerInput: filter must be rank 4, but got rank "+n.rank}));var c="NHWC"===o?s[3]:s[1],d="NHWC"===o?l.shape[3]:l.shape[1];VW(c===n.shape[2],(function(){return"Error in conv2dDerInput: depth of input ("+c+") must match input depth for filter "+n.shape[2]+"."})),VW(d===n.shape[3],(function(){return"Error in conv2dDerInput: depth of output ("+d+") must match output depth for filter "+n.shape[3]+"."})),null!=a&&VW(HW(i),(function(){return"Error in conv2dDerInput: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var h=mX(o),p=aX(s,n.shape,r,1,i,a,!1,h),f=JH.runKernel((function(e,t){var r=e.conv2dDerInput(l,n,p);return t([n,l]),r}),{dy4D:l,filter:n},(function(e,t){var n=t[0],s=t[1];return{dy4D:function(){return d1(e,n,r,i,o,1,a)},filter:function(){return p1(e,s,n.shape,r,i,o,a)}}}));return u?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}function l1(e){var t=function(e){return"number"==typeof e?[e,e,e]:2===e.length?[e[0],e[1],1]:e}(e),n=t[0],r=t[1],i=t[2];return 1===n&&1===r&&1===i}function u1(e,t,n,r,i){VW(e.length===t.rank,(function(){return"Length of inShape ("+e.length+") and rank of dy ("+t.rank+") must match"}));var o=e,a=t,s=!1;4===t.rank&&(s=!0,a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3]),o=[1,e[0],e[1],e[2],e[3]]);var l=o[4],u=a.shape[4];VW(5===o.length,(function(){return"Error in conv3dDerInput: inShape must be length 5, but got length "+o.length+"."})),VW(5===a.rank,(function(){return"Error in conv3dDerInput: dy must be rank 5, but got rank "+a.rank})),VW(5===n.rank,(function(){return"Error in conv3dDerInput: filter must be rank 5, but got rank "+n.rank})),VW(l===n.shape[3],(function(){return"Error in conv3dDerInput: depth of input ("+l+") must match input depth for filter "+n.shape[3]+"."})),VW(u===n.shape[4],(function(){return"Error in conv3dDerInput: depth of output ("+u+") must match output depth for filter "+n.shape[4]+"."}));var c=sX(o,n.shape,r,1,i),d=JH.runKernel((function(e){return e.conv3dDerInput(a,n,c)}),{dy5D:a});return s?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}var c1=kK({conv1d_:function(e,t,n,r,i,o,a){void 0===i&&(i="NWC"),void 0===o&&(o=1);var s=cK(e,"x","conv1d"),l=cK(t,"filter","conv1d"),u=s,c=!1;2===s.rank&&(c=!0,u=s.as3D(1,s.shape[0],s.shape[1])),VW(3===u.rank,(function(){return"Error in conv1d: input must be rank 3, but got rank "+u.rank+"."})),VW(3===l.rank,(function(){return"Error in conv1d: filter must be rank 3, but got rank "+l.rank+"."})),null!=a&&VW(HW(r),(function(){return"Error in conv1d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."})),VW(u.shape[2]===l.shape[1],(function(){return"Error in conv1d: depth of input ("+u.shape[2]+") must match input depth for filter "+l.shape[1]+"."})),VW(fX(n,o),(function(){return"Error in conv1D: Either stride or dilation must be 1. Got stride "+n+" and dilation '"+o+"'"})),VW("NWC"===i,(function(){return"Error in conv1d: got dataFormat of "+i+" but only NWC is currently supported."}));var d=l.as4D(1,l.shape[0],l.shape[1],l.shape[2]),h=u.as4D(u.shape[0],1,u.shape[1],u.shape[2]),p=d1(h,d,[1,n],r,"NHWC",[1,o],a);return c?p.as2D(p.shape[2],p.shape[3]):p.as3D(p.shape[0],p.shape[2],p.shape[3])}}),d1=kK({conv2d_:function(e,t,n,r,i,o,a){void 0===i&&(i="NHWC"),void 0===o&&(o=[1,1]);var s=cK(e,"x","conv2d"),l=cK(t,"filter","conv2d"),u=s,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),VW(4===u.rank,(function(){return"Error in conv2d: input must be rank 4, but got rank "+u.rank+"."})),VW(4===l.rank,(function(){return"Error in conv2d: filter must be rank 4, but got rank "+l.rank+"."})),null!=a&&VW(HW(r),(function(){return"Error in conv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var d="NHWC"===i?u.shape[3]:u.shape[1];VW(d===l.shape[2],(function(){return"Error in conv2d: depth of input ("+d+") must match input depth for filter "+l.shape[2]+"."})),VW(fX(n,o),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"}));var h=mX(i),p=aX(u.shape,l.shape,n,o,r,a,!1,h),f=JH.runKernel((function(e,t){var n=e.conv2d(u,l,p);return t([l,u]),n}),{x:u,$filter:l},(function(e,t){var a=t,s=a[0],l=a[1];return VW(pX(o),(function(){return"Error in gradient of conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"})),{x:function(){return f1(l.shape,e,s,n,r,i)},$filter:function(){return p1(l,e,s.shape,n,r,i)}}}));return c?f.as3D(f.shape[1],f.shape[2],f.shape[3]):f}}),h1=kK({conv3d_:function(e,t,n,r,i,o){void 0===i&&(i="NDHWC"),void 0===o&&(o=[1,1,1]);var a=cK(e,"x","conv3d"),s=cK(t,"filter","conv3d"),l=a,u=!1;4===a.rank&&(u=!0,l=a.as5D(1,a.shape[0],a.shape[1],a.shape[2],a.shape[3])),VW(5===l.rank,(function(){return"Error in conv3d: input must be rank 5, but got rank "+l.rank+"."})),VW(5===s.rank,(function(){return"Error in conv3d: filter must be rank 5, but got rank "+s.rank+"."})),VW(l.shape[4]===s.shape[3],(function(){return"Error in conv3d: depth of input ("+l.shape[4]+") must match input depth for filter "+s.shape[3]+"."})),VW(function(e,t){return l1(e)||l1(t)}(n,o),(function(){return"Error in conv3D: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),VW("NDHWC"===i,(function(){return"Error in conv3d: got dataFormat of "+i+" but only NDHWC is currently supported."}));var c=sX(l.shape,s.shape,n,o,r),d=JH.runKernel((function(e,t){var n=e.conv3d(l,s,c);return t([l,s]),n}),{x:l,$filter:s},(function(e,t){VW(l1(o),(function(){return"Error in gradient of conv3D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+o+"'"}));var i=t[0],a=t[1];return{x:function(){return u1(i.shape,e,a,n,r)},$filter:function(){return function(e,t,n,r,i){var o=e;4===e.rank&&(o=e.as5D(1,e.shape[0],e.shape[1],e.shape[2],e.shape[3]));var a=t;4===a.rank&&(a=t.as5D(1,t.shape[0],t.shape[1],t.shape[2],t.shape[3])),VW(5===o.rank,(function(){return"Error in conv3dDerFilter: input must be rank 5, but got shape "+o.shape+"."})),VW(5===a.rank,(function(){return"Error in conv3dDerFilter: dy must be rank 5, but got shape "+a.shape+"."})),VW(5===n.length,(function(){return"Error in conv3dDerFilter: filterShape must be length 5, but got "+n+"."})),VW(o.shape[4]===n[3],(function(){return"Error in conv3dDerFilter: depth of input "+o.shape[4]+") must match input depth in filter ("+n[3]+"."})),VW(a.shape[4]===n[4],(function(){return"Error in conv3dDerFilter: depth of dy ("+a.shape[4]+") must match output depth for filter ("+n[4]+")."}));var s=sX(o.shape,n,r,1,i);return JH.runKernel((function(e){return e.conv3dDerFilter(o,a,s)}),{x5D:o,dy5D:a})}(i,e,a.shape,n,r)}}}));return u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),p1=kK({conv2dDerFilter_:function(e,t,n,r,i,o,a){void 0===o&&(o="NHWC");var s=e;3===e.rank&&(s=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var l=t;3===l.rank&&(l=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),VW(4===s.rank,(function(){return"Error in conv2dDerFilter: input must be rank 4, but got shape "+s.shape+"."})),VW(4===l.rank,(function(){return"Error in conv2dDerFilter: dy must be rank 4, but got shape "+l.shape+"."})),VW(4===n.length,(function(){return"Error in conv2dDerFilter: filterShape must be length 4, but got "+n+"."}));var u="NHWC"===o?s.shape[3]:s.shape[1],c="NHWC"===o?l.shape[3]:l.shape[1];VW(u===n[2],(function(){return"Error in conv2dDerFilter: depth of input "+u+") must match input depth in filter ("+n[2]+"."})),VW(c===n[3],(function(){return"Error in conv2dDerFilter: depth of dy ("+c+") must match output depth for filter ("+n[3]+")."})),null!=a&&VW(HW(i),(function(){return"Error in conv2dDerFilter: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+i+"."}));var d=mX(o),h=aX(s.shape,n,r,1,i,a,!1,d);return JH.runKernel((function(e){return e.conv2dDerFilter(s,l,h)}),{x4D:s,dy4D:l})}}),f1=kK({conv2dDerInput_:s1}),m1=kK({depthwiseConv2d_:function(e,t,n,r,i,o,a){void 0===o&&(o=[1,1]);var s=cK(e,"x","depthwiseConv2d"),l=cK(t,"filter","depthwiseConv2d"),u=s,c=!1;3===s.rank&&(c=!0,u=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),VW(4===u.rank,(function(){return"Error in depthwiseConv2d: input must be rank 4, but got rank "+u.rank+"."})),VW(4===l.rank,(function(){return"Error in depthwiseConv2d: filter must be rank 4, but got rank "+l.rank+"."})),VW(u.shape[3]===l.shape[2],(function(){return"Error in depthwiseConv2d: number of input channels ("+u.shape[3]+") must match the inChannels dimension in filter "+l.shape[2]+"."})),null==o&&(o=[1,1]),VW(fX(n,o),(function(){return"Error in depthwiseConv2d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+o+"'"})),null!=a&&VW(HW(r),(function(){return"Error in depthwiseConv2d: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+r+"."}));var d=aX(u.shape,l.shape,n,o,r,a,!0),h=JH.runKernel((function(e,t){var n=e.depthwiseConv2D(u,l,d);return t([u,l]),n}),{x:u,$filter:l},(function(e,t){VW(pX(o),(function(){return"Error in gradient of depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+o+"'"}));var n=t[0],r=t[1];return{x:function(){return g1(n.shape,e,r,d)},$filter:function(){return v1(n,e,r.shape,d)}}}));return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}}),g1=kK({depthwiseConv2dDerInput_:function(e,t,n,r){var i=t,o=!1;3===t.rank&&(o=!0,i=t.as4D(1,t.shape[0],t.shape[1],t.shape[2]));var a=JH.runKernel((function(e){return e.depthwiseConv2DDerInput(i,n,r)}),{dy4D:i});return o?a.as3D(a.shape[1],a.shape[2],a.shape[3]):a}}),v1=kK({depthwiseConv2dDerFilter_:function(e,t,n,r){var i=e;3===e.rank&&(i=e.as4D(1,e.shape[0],e.shape[1],e.shape[2]));var o=t;return 3===o.rank&&(o=t.as4D(1,t.shape[0],t.shape[1],t.shape[2])),JH.runKernel((function(e){return e.depthwiseConv2DDerFilter(i,o,r)}),{x4D:i,dy4D:o})}}),y1=kK({separableConv2d_:function(e,t,n,r,i,o,a){void 0===o&&(o=[1,1]),void 0===a&&(a="NHWC");var s=cK(e,"x","separableConv2d"),l=cK(t,"depthwiseFilter","separableConv2d"),u=cK(n,"pointwiseFilter","separableConv2d"),c=s,d=!1;if(3===s.rank&&(d=!0,c=s.as4D(1,s.shape[0],s.shape[1],s.shape[2])),"NCHW"===a)throw new Error("separableConv2d currently does not support dataFormat NCHW; only NHWC is supported");VW(4===c.rank,(function(){return"Error in separableConv2d: input must be rank 4, but got rank "+c.rank+"."})),VW(4===l.rank,(function(){return"Error in separableConv2d: depthwise filter must be rank 4, but got rank "+l.rank+"."})),VW(4===u.rank,(function(){return"Error in separableConv2d: pointwise filter must be rank 4, but got rank "+l.rank+"."})),VW(1===u.shape[0],(function(){return"Error in separableConv2d: the first dimension of pointwise filter  must be 1, but got "+u.shape[0]+"."})),VW(1===u.shape[1],(function(){return"Error in separableConv2d: the second dimension of pointwise filter must be 1, but got "+u.shape[1]+"."}));var h=l.shape[2],p=l.shape[3];VW(u.shape[2]===h*p,(function(){return"Error in separableConv2d: the third dimension of pointwise filter must be "+h*p+", but got "+u.shape[2]+"."}));var f=m1(c,l,r,i,a,o),m=d1(f,u,1,"valid",a);return d?m.as3D(m.shape[1],m.shape[2],m.shape[3]):m}}),b1=kK({conv2dTranspose_:function(e,t,n,r,i,o){return s1(n,cK(e,"x","conv2dTranspose"),cK(t,"filter","conv2dTranspose"),r,i,"NHWC",o)}}),x1=kK({conv3dTranspose_:function(e,t,n,r,i){return u1(n,cK(e,"x","conv3dTranspose"),cK(t,"filter","conv3dTranspose"),r,i)}}),w1=kK({matMul_:function(e,t,n,r){var i;void 0===n&&(n=!1),void 0===r&&(r=!1);var o=cK(e,"a","matMul"),a=cK(t,"b","matMul");i=WH(o,a),o=i[0],a=i[1];var s=n?o.shape[o.rank-2]:o.shape[o.rank-1],l=r?a.shape[a.rank-1]:a.shape[a.rank-2],u=n?o.shape[o.rank-1]:o.shape[o.rank-2],c=r?a.shape[a.rank-2]:a.shape[a.rank-1],d=o.shape.slice(0,-2),h=a.shape.slice(0,-2),p=qW(d),f=qW(h);VW(o.rank>=2&&a.rank>=2&&o.rank===a.rank,(function(){return"Error in matMul: inputs must have the same rank of at least 2, got ranks "+o.rank+" and "+a.rank+"."})),VW(WW(d,h),(function(){return"Error in matMul: outer dimensions ("+d+") and ("+h+") of Tensors with shapes "+o.shape+" and "+a.shape+" must match."})),VW(s===l,(function(){return"Error in matMul: inner shapes ("+s+") and ("+l+") of Tensors with shapes "+o.shape+" and "+a.shape+" and transposeA="+n+" and transposeB="+r+" must match."}));var m=o.shape.slice(0,-2).concat([u,c]),g=n?o.as3D(p,s,u):o.as3D(p,u,s),v=r?a.as3D(f,c,l):a.as3D(f,l,c);return JH.runKernel((function(e,t){var i=e.batchMatMul(g,v,n,r);return t([g,v]),i}),{$a:g,$b:v},(function(e,t){var i=t,o=i[0],a=i[1];return n||r?!n&&r?{$a:function(){return e.matMul(a,!1,!1)},$b:function(){return e.matMul(o,!0,!1)}}:n&&!r?{$a:function(){return a.matMul(e,!1,!0)},$b:function(){return o.matMul(e,!1,!1)}}:{$a:function(){return a.matMul(e,!0,!0)},$b:function(){return e.matMul(o,!0,!0)}}:{$a:function(){return e.matMul(a,!1,!0)},$b:function(){return o.matMul(e,!0,!1)}}})).reshape(m)}}),k1=kK({dot_:function(e,t){var n=cK(e,"t1","dot"),r=cK(t,"t2","dot");VW(!(1!==n.rank&&2!==n.rank||1!==r.rank&&2!==r.rank),(function(){return"Error in dot: inputs must all be rank 1 or 2, but got ranks "+n.rank+" and "+r.rank+"."}));var i=1===n.rank?n.size:n.shape[1],o=1===r.rank?r.size:r.shape[0];return VW(i===o,(function(){return"Error in dot: inner dimensions of inputs must match, but got "+i+" and "+o+"."})),1===n.rank&&1===r.rank?n.as2D(1,-1).matMul(r.as2D(-1,1)).asScalar():1===n.rank&&2===r.rank?n.as2D(1,-1).matMul(r.as2D(r.shape[0],r.shape[1])).as1D():2===n.rank&&1===r.rank?n.matMul(r.as2D(-1,1)).as1D():n.matMul(r.as2D(r.shape[0],r.shape[1]))}}),_1=kK({outerProduct_:function(e,t){var n=cK(e,"v1","outerProduct"),r=cK(t,"v2","outerProduct");return VW(1===n.rank&&1===r.rank,(function(){return"Error in outerProduct: inputs must be rank 1, but got ranks "+n.rank+" and "+r.rank+"."})),n.as2D(-1,1).matMul(r.as2D(1,-1))}}),E1=kK({reverse_:function(e,t){var n=cK(e,"x","reverse");if(0===n.rank)return n.clone();var r=JW(t,n.shape);return JH.runKernel((function(e){return e.reverse(n,r)}),{$x:n},(function(e){return{$x:function(){return e.reverse(r)}}})).reshapeAs(n)}}),C1=kK({reverse1d_:function(e){var t=cK(e,"x","reverse");return VW(1===t.rank,(function(){return"Error in reverse1D: x must be rank 1 but got rank "+t.rank+"."})),E1(t,0)}}),I1=kK({reverse2d_:function(e,t){var n=cK(e,"x","reverse");return VW(2===n.rank,(function(){return"Error in reverse2D: x must be rank 2 but got rank "+n.rank+"."})),E1(n,t)}}),S1=kK({reverse3d_:function(e,t){var n=cK(e,"x","reverse");return VW(3===n.rank,(function(){return"Error in reverse3D: x must be rank 3 but got rank "+n.rank+"."})),E1(n,t)}}),N1=kK({reverse4d_:function(e,t){var n=cK(e,"x","reverse");return VW(4===n.rank,(function(){return"Error in reverse4D: x must be rank 4 but got rank "+n.rank+"."})),E1(n,t)}});function T1(e,t,n,r,i,o){var a=cK(e,"x","maxPool"),s=a,l=!1;3===a.rank&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),null==r&&(r=[1,1]),VW(4===s.rank,(function(){return"Error in maxPool: input must be rank 4 but got rank "+s.rank+"."})),VW(fX(n,r),(function(){return"Error in maxPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"})),null!=o&&VW(HW(i),(function(){return"Error in maxPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var u=iX(s.shape,t,n,r,i,o),c=JH.runKernel((function(e,t){var n=e.maxPool(s,u);return t([s,n]),n}),{x:s},(function(e,o){var a=o[0],s=o[1];return{x:function(){return function(e,t,n,r,i,o,a,s){var l=cK(e,"dy","maxPoolBackprop"),u=cK(t,"input","maxPoolBackprop"),c=cK(n,"output","maxPoolBackprop");VW(u.rank===l.rank,(function(){return"Rank of input ("+u.rank+") does not match rank of dy ("+l.rank+")"})),null==o&&(o=[1,1]),VW(fX(i,o),(function(){return"Error in maxPoolBackProp: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"})),VW(4===l.rank,(function(){return"Error in maxPoolBackprop: dy must be rank 4 but got rank "+l.rank+"."})),VW(4===u.rank,(function(){return"Error in maxPoolBackprop: input must be rank 4 but got rank "+u.rank+"."}));var d=iX(u.shape,r,i,o,a,s);return JH.runKernel((function(e){return e.maxPoolBackprop(l,u,c,d)}),{$dy:l,$input:u})}(e,a,s,t,n,r,i)}}}));return l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}function A1(e,t,n,r,i,o){var a=cK(e,"x","avgPool","float32");null==r&&(r=[1,1]),VW(fX(n,r),(function(){return"Error in avgPool: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+r+"'"}));var s=a,l=!1;3===a.rank&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),VW(4===s.rank,(function(){return"Error in avgPool: x must be rank 4 but got rank "+s.rank+"."})),null!=o&&VW(HW(i),(function(){return"Error in avgPool: pad must be an integer when using, dimRoundingMode "+o+" but got pad "+i+"."}));var u=iX(s.shape,t,n,r,i,o),c=JH.runKernel((function(e){return e.avgPool(s,u)}),{x:s},(function(e){return{x:function(){return function(e,t,n,r,i,o){var a=cK(e,"dy","avgPoolBackprop"),s=cK(t,"input","avgPoolBackprop");VW(s.rank===a.rank,(function(){return"Rank of input ("+s.rank+") does not match rank of dy ("+a.rank+")"})),null==i&&(i=[1,1]),VW(fX(r,i),(function(){return"Error in avgPoolBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"}));var l=s,u=a,c=!1;3===s.rank&&(c=!0,l=s.as4D(1,s.shape[0],s.shape[1],s.shape[2]),u=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),VW(4===u.rank,(function(){return"Error in avgPoolBackprop: dy must be rank 4 but got rank "+u.rank+"."})),VW(4===l.rank,(function(){return"Error in avgPoolBackprop: input must be rank 4 but got rank "+l.rank+"."}));var d=iX(l.shape,n,r,i,o),h=JH.runKernel((function(e){return e.avgPoolBackprop(u,l,d)}),{dy4D:u,input4D:l});return c?h.as3D(h.shape[1],h.shape[2],h.shape[3]):h}(e,s,t,n,r,i)}}}));return c=c.cast(a.dtype),l?c.as3D(c.shape[1],c.shape[2],c.shape[3]):c}var R1=kK({maxPool_:function(e,t,n,r,i){return T1(e,t,n,1,r,i)}}),D1=kK({avgPool_:function(e,t,n,r,i){return A1(e,t,n,1,r,i)}}),O1=kK({pool_:function(e,t,n,r,i,o){null==i&&(i=[1,1]),null==o&&(o=1),0===r&&(r="valid");var a=cK(e,"x","maxPool"),s=a,l=!1;3===a.rank&&(l=!0,s=a.as4D(1,a.shape[0],a.shape[1],a.shape[2])),VW(fX(o,i),(function(){return"Error in pool: Either strides or dilations must be 1. Got strides "+o+" and dilations '"+i+"'"}));var u,c=iX(s.shape,t,o,i,r),d=[c.dilationHeight,c.dilationWidth];u="same"===r?function(e,t){var n=e.map((function(e,n){return e+(e-1)*(t[n]-1)})).map((function(e){return e-1})),r=n.map((function(e){return Math.floor(e/2)})),i=n.map((function(e,t){return e-r[t]}));return n.map((function(e,t){return[r[t],i[t]]}))}([c.filterHeight,c.filterWidth],d):[[0,0],[0,0]];var h=1===d[0]&&1===d[1],p=function(e,t,n){var r=n.map((function(e){return e[0]})),i=n.map((function(e){return e[1]})),o=e.concat(r,i),a=t.map((function(e,t){return(e-o[t]%e)%e})),s=i.map((function(e,t){return e+a[t]}));return[t.map((function(e,t){return[r[t],s[t]]})),t.map((function(e,t){return[0,a[t]]}))]}([c.inHeight,c.inWidth],d,u),f=p[0],m=p[1],g=h?r:"valid",v=h?s:SY(s,d,f),y=("avg"===n?function(){return A1(v,t,o,1,g)}:function(){return T1(v,t,o,1,g)})(),b=h?y:lY(y,d,m);return l?b.as3D(b.shape[1],b.shape[2],b.shape[3]):b}}),P1=kK({maxPool3d_:function(e,t,n,r,i,o,a){void 0===o&&(o="NDHWC");var s=cK(e,"x","maxPool3d"),l=s,u=!1;4===s.rank&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==a&&(a=[1,1,1]),VW(5===l.rank,(function(){return"Error in maxPool3d: x must be rank 5 but got rank "+l.rank+"."})),VW("NDHWC"===o,(function(){return"Error in maxPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),VW(fX(n,a),(function(){return"Error in maxPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=i&&VW(HW(r),(function(){return"Error in maxPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var c=oX(l.shape,t,n,a,r,i,o),d=JH.runKernel((function(e,t){var n=e.maxPool3d(l,c);return t([l,n]),n}),{x:l},(function(e,o){var s=o[0],l=o[1];return{x:function(){return function(e,t,n,r,i,o,a,s){var l=cK(e,"dy","maxPool3dBackprop"),u=cK(t,"input","maxPool3dBackprop"),c=cK(n,"output","maxPool3dBackprop"),d=l,h=u,p=c,f=!1;4===u.rank&&(f=!0,d=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3]),h=u.as5D(1,u.shape[0],u.shape[1],u.shape[2],u.shape[3]),p=c.as5D(1,c.shape[0],c.shape[1],c.shape[2],c.shape[3])),VW(5===d.rank,(function(){return"Error in maxPool3dBackprop: dy must be rank 5 but got rank "+d.rank+"."})),VW(5===h.rank,(function(){return"Error in maxPool3dBackprop: input must be rank 5 but got rank "+h.rank+"."})),VW(5===p.rank,(function(){return"Error in maxPool3dBackprop: output must be rank 5 but got rank "+p.rank+"."})),null==o&&(o=[1,1,1]),VW(fX(i,o),(function(){return"Error in maxPool3dBackprop: Either strides or dilations must be 1. Got strides "+i+" and dilations '"+o+"'"})),null!=s&&VW(HW(a),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+s+" but got pad "+a+"."}));var m=oX(h.shape,r,i,o,a,s),g=JH.runKernel((function(e){return e.maxPool3dBackprop(d,h,p,m)}),{dy5D:d,input5D:h});return f?g.as4D(g.shape[1],g.shape[2],g.shape[3],g.shape[4]):g}(e,s,l,t,n,a,r,i)}}}));return u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),L1=kK({avgPool3d_:function(e,t,n,r,i,o,a){void 0===o&&(o="NDHWC");var s=cK(e,"x","avgPool3d","float32"),l=s,u=!1;4===s.rank&&(u=!0,l=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3])),null==a&&(a=[1,1,1]),VW(5===l.rank,(function(){return"Error in avgPool3d: x must be rank 5 but got rank "+l.rank+"."})),VW("NDHWC"===o,(function(){return"Error in avgPool3d: Only NDHWC is currently supported, but got dataFormat of "+o})),VW(fX(n,a),(function(){return"Error in avgPool3d: Either strides or dilations must be 1. Got strides "+n+" and dilations '"+a+"'"})),null!=i&&VW(HW(r),(function(){return"Error in avgPool3d: pad must be an integer when using, dimRoundingMode "+i+" but got pad "+r+"."}));var c=oX(l.shape,t,n,a,r,i,o),d=JH.runKernel((function(e){return e.avgPool3d(l,c)}),{x:l},(function(e){return{x:function(){return function(e,t,n,r,i,o,a){var s=cK(e,"dy","avgPool3dBackprop"),l=cK(t,"input","avgPool3dBackprop"),u=s,c=l,d=!1;4===l.rank&&(d=!0,u=s.as5D(1,s.shape[0],s.shape[1],s.shape[2],s.shape[3]),c=l.as5D(1,l.shape[0],l.shape[1],l.shape[2],l.shape[3])),VW(5===u.rank,(function(){return"Error in avgPool3dBackprop: dy must be rank 5 but got rank "+u.rank+"."})),VW(5===c.rank,(function(){return"Error in avgPool3dBackprop: input must be rank 5 but got rank "+c.rank+"."})),null==i&&(i=[1,1,1]),VW(fX(r,i),(function(){return"Error in avgPool3dBackprop: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+i+"'"})),null!=a&&VW(HW(o),(function(){return"Error in maxPool3dBackprop: pad must be an integer when using, dimRoundingMode "+a+" but got pad "+o+"."}));var h=oX(c.shape,n,r,i,o,a),p=JH.runKernel((function(e){return e.avgPool3dBackprop(u,c,h)}),{dy5D:u,input5D:c});return d?p.as4D(p.shape[1],p.shape[2],p.shape[3],p.shape[4]):p}(e,l,t,n,a,r,i)}}}));return d=d.cast(l.dtype),u?d.as4D(d.shape[1],d.shape[2],d.shape[3],d.shape[4]):d}}),M1=kK({slice_:function(e,t,n){var r,i,o=cK(e,"x","slice");if(0===o.rank)throw new Error("Slicing scalar is not possible");(r="number"==typeof t?[t].concat(new Array(o.rank-1).fill(0)):t.length<o.rank?t.concat(new Array(o.rank-t.length).fill(0)):t.slice()).forEach((function(e){VW(-1!==e,(function(){return"slice() does not support negative begin indexing."}))})),i=(i=null==n?new Array(o.rank).fill(-1):"number"==typeof n?[n].concat(new Array(o.rank-1).fill(-1)):n.length<o.rank?n.concat(new Array(o.rank-n.length).fill(-1)):n).map((function(e,t){return e>=0?e:(VW(-1===e,(function(){return"Negative size values should be exactly -1 but got "+e+" for the slice() size at index "+t+"."})),o.shape[t]-r[t])})),function(e,t,n){VW(e.rank===t.length,(function(){return"Error in slice"+e.rank+"D: Length of begin "+t+" must match the rank of the array ("+e.rank+")."})),VW(e.rank===n.length,(function(){return"Error in slice"+e.rank+"D: Length of size "+n+" must match the rank of the array ("+e.rank+")."}));for(var r=function(r){VW(t[r]+n[r]<=e.shape[r],(function(){return"Error in slice"+e.rank+"D: begin["+r+"] + size["+r+"] ("+(t[r]+n[r])+") would overflow input.shape["+r+"] ("+e.shape[r]+")"}))},i=0;i<e.rank;++i)r(i)}(o,r,i);var a=o.shape;return JH.runKernel((function(e){return e.slice(o,r,i)}),{$x:o},(function(e){for(var t=[],n=0;n<e.rank;n++)t.push([r[n],a[n]-r[n]-i[n]]);return{$x:function(){return e.pad(t)}}}))}}),F1=kK({slice1d_:function(e,t,n){var r=cK(e,"x","slice1d");return VW(1===r.rank,(function(){return"slice1d expects a rank-1 tensor, but got a rank-"+r.rank+" tensor"})),M1(r,[t],[n])}}),j1=kK({slice2d_:function(e,t,n){var r=cK(e,"x","slice2d");return VW(2===r.rank,(function(){return"slice2d expects a rank-2 tensor, but got a rank-"+r.rank+" tensor"})),M1(r,t,n)}}),B1=kK({slice3d_:function(e,t,n){var r=cK(e,"x","slice3d");return VW(3===r.rank,(function(){return"slice3d expects a rank-3 tensor, but got a rank-"+r.rank+" tensor"})),M1(r,t,n)}}),V1=kK({slice4d_:function(e,t,n){var r=cK(e,"x","slice4d");return VW(4===r.rank,(function(){return"slice4d expects a rank-4 tensor, but got a rank-"+r.rank+" tensor"})),M1(r,t,n)}});function z1(e,t,n,r,i){return t.rank<n.rank&&(t=t.reshape(mK(t.shape,r))),e.rank<n.rank&&(e=e.reshape(mK(e.shape,r))),{$x:function(){var r=e.mul(n.equal(t).cast(e.dtype));return null==i?r:r.transpose(i)}}}var U1=kK({all_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=cK(e,"x","all","bool"),i=JW(t,r.shape),o=i,a=vK(o,r.rank);null!=a&&(r=r.transpose(a),o=bK(o.length,r.rank));var s=JH.runKernel((function(e){return e.all(r,o)}),{$x:r});if(n){var l=mK(s.shape,i);return s.reshape(l)}return s}}),$1=kK({any_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=cK(e,"x","any","bool"),i=JW(t,r.shape),o=i,a=vK(o,r.rank);null!=a&&(r=r.transpose(a),o=bK(o.length,r.rank));var s=JH.runKernel((function(e){return e.any(r,o)}),{$x:r});if(n){var l=mK(s.shape,i);return s.reshape(l)}return s}}),q1=kK({argMax_:function(e,t){void 0===t&&(t=0);var n=cK(e,"x","argMax");null==t&&(t=0);var r=JW(t,n.shape),i=vK(r,n.rank);return null!=i&&(n=n.transpose(i),r=bK(r.length,n.rank)),JH.runKernel((function(e,t){var i=e.argMax(n,r[0]);return t([n]),i}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return zK(n)}}}))}}),W1=kK({argMin_:function(e,t){void 0===t&&(t=0);var n=cK(e,"x","argMin");null==t&&(t=0);var r=JW(t,n.shape),i=vK(r,n.rank);return null!=i&&(n=n.transpose(i),r=bK(r.length,n.rank)),JH.runKernel((function(e,t){var i=e.argMin(n,r[0]);return t([n]),i}),{$x:n},(function(e,t){var n=t[0];return{$x:function(){return zK(n)}}}))}}),H1=kK({logSumExp_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=cK(e,"x","logSumExp"),i=JW(t,r.shape),o=r.max(i,!0),a=r.sub(o).exp().sum(i).log(),s=o.reshape(a.shape).add(a);if(n){var l=mK(s.shape,i);return s.reshape(l)}return s}}),G1=kK({max_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=cK(e,"x","max"),i=r,o=JW(t,r.shape),a=o,s=vK(a,r.rank);null!=s&&(r=r.transpose(s),a=bK(a.length,r.rank));var l=JH.runKernel((function(e,t){var n=e.max(r,a);return t([i,n]),n}),{$x:r},(function(e,t){return z1(e,t[1],t[0],o,s)}));if(n){var u=mK(l.shape,o);l=l.reshape(u)}return l}}),K1=kK({mean_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=cK(e,"x","mean"),i=JW(t,r.shape),o=qW(fK(r.shape,i)[1]);return YY((function(e){var r=NK(o);return{value:(r.dtype===e.dtype?e:e.cast(r.dtype)).div(r).sum(t,n),gradFunc:function(t){var n=e.shape.slice();return i.forEach((function(e){n[e]=1})),t.reshape(n).mul(LK(e.shape,"float32")).div(o)}}}))(r)}}),Y1=kK({min_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=cK(e,"x","min"),i=r,o=JW(t,r.shape),a=o,s=vK(a,r.rank);null!=s&&(r=r.transpose(s),a=bK(a.length,r.rank));var l=JH.runKernel((function(e,t){var n=e.min(r,a);return t([i,n]),n}),{$x:r},(function(e,t){return z1(e,t[1],t[0],o,s)}));if(n){var u=mK(l.shape,o);l=l.reshape(u)}return l}}),X1=kK({moments_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=JW(t,(e=cK(e,"x","moments")).shape),i=e.mean(r,n),o=i.shape;n||(o=mK(i.shape,r));var a=e.toFloat().sub(i.reshape(o)).square();return{mean:i,variance:a.mean(r,n)}}}),Q1=kK({sum_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=cK(e,"x","sum");"bool"===r.dtype&&(r=r.toInt());var i=JW(t,r.shape);return YY((function(e){var t=vK(i,e.rank),r=i,o=e;null!=t&&(o=e.transpose(t),r=bK(r.length,e.rank));var a=JH.runKernel((function(e){return e.sum(o,r)}),{permutedX:o});if(n){var s=mK(a.shape,i);a=a.reshape(s)}return{value:a,gradFunc:function(t){var n=e.shape.slice();return i.forEach((function(e){n[e]=1})),t.reshape(n).mul(LK(e.shape,"float32"))}}}))(r)}}),J1=kK({prod_:function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=cK(e,"x","prod");"bool"===r.dtype&&(r=r.toInt());var i=JW(t,r.shape),o=vK(i,r.rank),a=i,s=r;null!=o&&(s=r.transpose(o),a=bK(a.length,r.rank));var l=JH.runKernel((function(e){return e.prod(s,a)}),{permutedX:s});if(n){var u=mK(l.shape,i);l=l.reshape(u)}return l}}),Z1=kK({elu_:function(e){var t=cK(e,"x","elu");return JH.runKernel((function(e,n){var r=e.elu(t);return n([r]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return JH.runKernel((function(t){return t.eluDer(e,n)}),{dy:e,y:n})}}}))}}),e2=kK({leakyRelu_:function(e,t){void 0===t&&(t=.2);var n=cK(e,"x","leakyRelu");return A0(NK(t).mul(n),n)}}),t2=kK({prelu_:function(e,t){var n=cK(e,"x","prelu"),r=cK(t,"alpha","prelu");return JH.runKernel((function(e,t){var i=e.prelu(n,r);return t([n,r]),i}),{$x:n,$alpha:r},(function(e,t){var n=t[0],r=t[1],i=n.greater(0);return{$x:function(){return w0(i,e,e.mul(r))},$alpha:function(){var t=w0(i,zK(e),e.mul(n)),o=nX(r.shape,e.shape);return o.length>0&&(t=t.sum(o)),t.reshape(r.shape)}}}))}}),n2=kK({relu_:function(e){var t=cK(e,"x","relu");return"bool"===t.dtype?t.toInt():JH.runKernel((function(e,n){var r=e.relu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){return e.mulStrict(n.step().toFloat())}}}))}}),r2=kK({relu6_:function(e){var t=cK(e,"x","relu6");return"bool"===t.dtype?t.toInt():JH.runKernel((function(e,n){var r=e.relu6(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0],r=n.lessEqual(6).mul(n.step());return{$x:function(){return e.mulStrict(r.toFloat())}}}))}}),i2=kK({selu_:function(e){var t=cK(e,"x","selu");return JH.runKernel((function(e,n){var r=e.selu(t);return n([t]),r}),{$x:t},(function(e,t){var n=t[0];return{$x:function(){var t=n.greater(NK(0)),r=NK(WJ),i=NK(HJ),o=e.mul(i),a=e.mul(r).mul(n.toFloat().exp());return w0(t,o,a)}}}))}}),o2=kK({transpose_:function(e,t){var n=cK(e,"x","transpose");return null==t&&(t=n.shape.map((function(e,t){return t})).reverse()),VW(n.rank===t.length,(function(){return"Error in transpose: rank of input "+n.rank+" must match length of perm "+t+"."})),t.forEach((function(e){VW(e>=0&&e<n.rank,(function(){return"All entries in 'perm' must be between 0 and "+(n.rank-1)+" but got "+t}))})),n.rank<=1?n.clone():JH.runKernel((function(e){return e.transpose(n,t)}),{$x:n},(function(e){var n=yK(t);return{$x:function(){return e.transpose(n)}}}))}}),a2=kK({localResponseNormalization_:function(e,t,n,r,i){void 0===t&&(t=5),void 0===n&&(n=1),void 0===r&&(r=1),void 0===i&&(i=.5);var o=cK(e,"x","localResponseNormalization");VW(4===o.rank||3===o.rank,(function(){return"Error in localResponseNormalization: x must be rank 3 or 4 but got\n               rank "+o.rank+"."})),VW(HW(t),(function(){return"Error in localResponseNormalization: depthRadius must be an integer but got depthRadius "+t+"."}));var a=o,s=!1;3===o.rank&&(s=!0,a=o.as4D(1,o.shape[0],o.shape[1],o.shape[2]));var l=JH.runKernel((function(e,o){var s=e.localResponseNormalization4D(a,t,n,r,i);return o([a,s]),s}),{x4D:a},(function(e,o){var a=o[0],s=o[1];return{x4D:function(){return JH.runKernel((function(o){return o.LRNGrad(e,a,s,t,n,r,i)}),{})}}}));return s?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),s2=kK({norm_:function(e,t,n,r){void 0===t&&(t="euclidean"),void 0===n&&(n=null),void 0===r&&(r=!1);var i=function e(t,n,r){if(void 0===r&&(r=null),0===t.rank)return t.abs();if(1!==t.rank&&null===r)return e(t.reshape([-1]),n,r);if(1===t.rank||"number"==typeof r||Array.isArray(r)&&1===r.length){if(1===n)return t.abs().sum(r);if(n===1/0)return t.abs().max(r);if(n===-1/0)return t.abs().min(r);if("euclidean"===n||2===n)return t.abs().pow(NK(2,"int32")).sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}if(Array.isArray(r)&&2===r.length){if(1===n)return t.abs().sum(r[0]).max(r[1]-1);if(n===1/0)return t.abs().sum(r[1]).max(r[0]);if(n===-1/0)return t.abs().sum(r[1]).min(r[0]);if("fro"===n||"euclidean"===n)return t.square().sum(r).sqrt();throw new Error("Error in norm: invalid ord value: "+n)}throw new Error("Error in norm: invalid axis: "+r)}(e=cK(e,"x","norm"),t,n),o=i.shape;if(r){var a=JW(n,e.shape);o=mK(i.shape,a)}return i.reshape(o)}}),l2=kK({basicLSTMCell_:function(e,t,n,r,i,o){var a=cK(e,"forgetBias","basicLSTMCell"),s=cK(t,"lstmKernel","basicLSTMCell"),l=cK(n,"lstmBias","basicLSTMCell"),u=cK(r,"data","basicLSTMCell"),c=cK(i,"c","basicLSTMCell"),d=cK(o,"h","basicLSTMCell"),h=u.concat(d,1).matMul(s).add(l),p=h.shape[0],f=h.shape[1]/4,m=[p,f],g=h.slice([0,0],m),v=h.slice([0,f],m),y=h.slice([0,2*f],m),b=h.slice([0,3*f],m),x=g.sigmoid().mulStrict(v.tanh()).addStrict(c.mulStrict(a.add(y).sigmoid())),w=x.tanh().mulStrict(b.sigmoid());return[x,w]}}),u2=kK({multiRNNCell_:function(e,t,n,r){for(var i=cK(t,"data","multiRNNCell"),o=dK(n,"c","multiRNNCell"),a=dK(r,"h","multiRNNCell"),s=i,l=[],u=0;u<e.length;u++){var c=e[u](s,o[u],a[u]);l.push(c[0]),l.push(c[1]),s=c[1]}var d=[],h=[];for(u=0;u<l.length;u+=2)d.push(l[u]),h.push(l[u+1]);return[d,h]}}),c2=kK({movingAverage_:function(e,t,n,r,i){void 0===i&&(i=!0);var o=cK(e,"v","movingAverage"),a=cK(t,"x","movingAverage"),s=cK(n,"decay","movingAverage");HH(o,a),VW(WW(o.shape,a.shape),(function(){return"Shape mismatch in v and x"}));var l=NK(1),u=l.sub(s),c=a.sub(o).mul(u);if(i){VW(null!=r,(function(){return"When using zeroDebias: true, step is required."}));var d=cK(r,"step","movingAverage");c=c.div(l.sub(j0(s,d)))}return o.add(c)}}),d2=kK({stridedSlice_:function(e,t,n,r,i,o,a,s,l){if(void 0===i&&(i=0),void 0===o&&(o=0),void 0===a&&(a=0),void 0===s&&(s=0),void 0===l&&(l=0),null==r&&(r=new Array(t.length)),0!==a)throw new Error("ellipsis mask is not yet supported");var u=cK(e,"x","stridedSlice"),c=UY(s),d=u.shape.slice();c.forEach((function(e){t[e]=0,n[e]=1,d.splice(e,0,1)})),u=u.reshape(d);for(var h=0;h<u.rank;h++)t[h]=qY(i,t,r,u.shape,h),n[h]=WY(o,n,r,u.shape,h),r[h]=r[h]||1;var p=UY(l);p.forEach((function(e){n[e]=t[e]+1,r[e]=1}));var f=$Y(t,n,r),m=f.filter((function(e,t){return-1===p.indexOf(t)}));return r.every((function(e){return 1===e}))?M1(u,t,f).reshape(m):JH.runKernel((function(e){return e.stridedSlice(u,t,n,r)}),{$x:u}).reshape(m)}}),h2=kK({topk_:function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=cK(e,"x","topk");if(0===r.rank)throw new Error("topk() expects the input to be of rank 1 or higher");var i=r.shape[r.shape.length-1];if(t>i)throw new Error("'k' passed to topk() must be <= the last dimension ("+i+") but got "+t);var o=JH.runKernel((function(e){return e.topk(r,t,n)}),{$x:r});return{values:o[0],indices:o[1]}}}),p2=kK({scatterND_:function(e,t,n){var r=cK(e,"indices","scatterND","int32"),i=cK(t,"updates","scatterND");return function(e,t,n){if(t.rank<1)throw new Error("tf.scatterND() expects the indices to be rank 1 or higher, but the rank was "+t.rank+".");if(e.rank<1)throw new Error("tf.scatterND() expects the updates to be rank 1 or higher, but the rank was "+e.rank+".");if("int32"!==t.dtype)throw new Error("The dtype of 'indices' should be int32, but got dtype: "+t.dtype);if(n.length<1)throw new Error("Output rank must be greater or equal to 1, but got shape: "+n);if(0===n.length){if(0===t.size)throw new Error("Indices specified for empty output. indices shape: "+t.shape);if(0===e.size)throw new Error("Updates specified for empty output. updates shape: "+e.shape)}!function(e,t,n){var r=t.rank>1?t.shape[t.rank-1]:1,i=t.rank>1?t.rank-1:1,o="Must have updates.shape = indices.shape[:batchDim] + shape[sliceDim:], got updates.shape: "+n.shape+", indices.shape: "+t.shape+", shape: "+e+", sliceDim: "+r+", and batchDim: "+i+".";if(n.rank<i)throw new Error(o+" update.rank < "+i+". ");if(e.length<r+(n.rank-i))throw new Error(o+" Output shape length < "+(r+(n.rank-i)));if(n.rank!==i+e.length-r)throw new Error(o+" update.rank != "+(i+e.length-r));for(var a=0;a<i;++a)if(n.shape[a]!==t.shape[a])throw new Error(o+" updates.shape["+a+"] ("+n.shape[a]+") != indices.shape["+a+"] ("+t.shape[a]+").");for(a=0;a<n.rank-i;++a)if(n.shape[a+i]!==e[a+r])throw new Error(o+" updates.shape["+(a+i)+"] ("+n.shape[a+i]+") != shape["+(a+i)+"] ("+e[a+i]+")")}(n,t,e)}(i,r,n),JH.runKernel((function(e){return e.scatterND(r,i,n)}),{$indices:r,$updates:i})}}),f2=kK({fft_:function(e){VW("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.fft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return JH.runKernel((function(e){return e.fft(r)}),{input:e}).reshape(e.shape)}}),m2=kK({ifft_:function(e){VW("complex64"===e.dtype,(function(){return"The dtype for tf.spectral.ifft() must be complex64 but got "+e.dtype+"."}));var t=e.shape[e.shape.length-1],n=e.size/t,r=e.as2D(n,t);return JH.runKernel((function(e){return e.ifft(r)}),{input:e}).reshape(e.shape)}}),g2=kK({rfft_:function(e,t){VW("float32"===e.dtype,(function(){return"The dtype for rfft() must be real value but got "+e.dtype}));var n,r=e.shape[e.shape.length-1],i=e.size/r;if(null!=t&&t<r){var o=e.shape.map((function(e){return 0})),a=e.shape.map((function(e){return e}));a[e.shape.length-1]=t,n=e.slice(o,a),r=t}else if(null!=t&&t>r){var s=e.shape.map((function(e){return e}));s[e.shape.length-1]=t-r,n=e.concat(MK(s),e.shape.length-1),r=t}else n=e;var l=n.zerosLike(),u=_K(n,l).as2D(i,r),c=f2(u),d=Math.floor(r/2)+1,h=EK(c),p=CK(c),f=h.split([d,r-d],h.shape.length-1),m=p.split([d,r-d],p.shape.length-1),g=n.shape.slice();return g[n.shape.length-1]=d,_K(f[0],m[0]).reshape(g)}}),v2=kK({irfft_:function(e){var t=e.shape[e.shape.length-1],n=e.size/t;if(t<=2){var r=e.as2D(n,t),i=m2(r);return EK(i)}var o=[n,2*(t-1)],a=EK(e).as2D(n,t),s=CK(e).as2D(n,t),l=a.slice([0,1],[n,t-2]).reverse(1),u=s.slice([0,1],[n,t-2]).reverse(1).mul(NK(-1)),c=a.concat(l,1),d=s.concat(u,1);return r=_K(c,d).as2D(o[0],o[1]),i=m2(r),EK(i)}}),y2=Object.freeze({fft:f2,ifft:m2,rfft:g2,irfft:v2}),b2=kK({sparseToDense_:function(e,t,n,r){void 0===r&&(r=0);var i=cK(e,"sparseIndices","sparseToDense","int32"),o=cK(t,"sparseValues","sparseToDense"),a=cK(r,"defaultValue","sparseToDense",o.dtype);return function(e,t,n,r){if("int32"!==e.dtype)throw new Error("tf.sparseToDense() expects the indices to be int32 type, but the dtype was "+e.dtype+".");if(e.rank>2)throw new Error("sparseIndices should be a scalar, vector, or matrix, but got shape "+e.shape+".");var i=e.rank>0?e.shape[0]:1,o=e.rank>1?e.shape[1]:1;if(n.length!==o)throw new Error("outputShape has incorrect number of elements:, "+n.length+", should be: "+o+".");var a=t.size;if(0!==t.rank&&(1!==t.rank||a!==i))throw new Error("sparseValues has incorrect shape "+t.shape+", should be [] or ["+i+"]");if(t.dtype!==r.dtype)throw new Error("sparseValues.dtype must match defaultValues.dtype")}(i,o,n,a),JH.runKernel((function(e){return e.sparseToDense(i,o,n,a)}),{$sparseIndices:i,$sparseValues:o,$defaultValue:a})}}),x2=kK({gatherND_:function(e,t){var n=cK(t,"indices","gatherND","int32"),r=cK(e,"x","gatherND");return JH.runKernel((function(e){return e.gatherND(r,n)}),{$x:r,$indices:n})}}),w2=kK({diag_:function(e){var t=cK(e,"x","diag").flatten(),n=e.shape.concat(e.shape);return JH.runKernel((function(e){return e.diag(t)}),{$x:t}).reshape(n)}}),k2=kK({dropout_:function(e,t,n,r){var i=cK(e,"x","dropout");if(VW("float32"===i.dtype,(function(){return"x has to be a floating point tensor since it's going to be scaled, but got a "+i.dtype+" tensor instead."})),VW(t>=0&&t<1,(function(){return"rate must be a float in the range [0, 1), but got "+t+"."})),0===t)return e instanceof PH?i.clone():i;var o=function(e,t){if(null==t)return e.shape.slice();if(WW(e.shape,t))return t;if(e.shape.length===t.length){for(var n=[],r=0;r<e.shape.length;r++)null==t[r]&&null!=e.shape[r]?n.push(e.shape[r]):n.push(t[r]);return n}return t}(i,n),a=1-t,s=CY(o,0,1,"float32",r).add(a).floor().div(a);return i.mul(s)}});function _2(e,t,n){for(var r=1-e%2,i=new Float32Array(e),o=0;o<e;++o){var a=2*Math.PI*o/(e+r-1);i[o]=t-n*Math.cos(a)}return TK(i,"float32")}var E2,C2=kK({hannWindow_:function(e){return _2(e,.5,.5)}}),I2=kK({hammingWindow_:function(e){return _2(e,.54,.46)}}),S2=kK({frame_:function(e,t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=0);for(var o=0,a=[];o+t<=e.size;)a.push(M1(e,o,t)),o+=n;if(r)for(;o<e.size;){var s=o+t-e.size,l=UK([M1(e,o,t-s),FK([s],i)]);a.push(l),o+=n}return 0===a.length?AK([],[0,t]):UK(a).as2D(a.length,t)}}),N2=kK({stft_:function(e,t,n,r,i){var o;void 0===i&&(i=C2),null==r&&(o=t,r=Math.floor(Math.pow(2,Math.ceil(Math.log(o)/Math.log(2)))));for(var a=S2(e,t,n),s=M0(a,i(t)),l=[],u=0;u<a.shape[0];u++)l.push(g2(s.slice([u,0],[1,t]),r));return UK(l)}}),T2=Object.freeze({hannWindow:C2,hammingWindow:I2,frame:S2,stft:N2}),A2=function(e,t,n){return void 0===n&&(n=1),RW(this,void 0,void 0,(function(){var r,i,o,a,s,l,u,c,d,h,p,f,m,g;return DW(this,(function(v){switch(v.label){case 0:return r=cK(e,"predictions","inTopK"),i=cK(t,"targets","inTopK"),VW(r.rank>1,(function(){return"inTopK() expects the predictions to be of rank 2 or higher, but got "+r.rank})),VW(r.rank-1===i.rank,(function(){return"predictions rank should be 1 larger than targets rank, but got predictions rank "+r.rank+" and targets rank "+i.rank})),zW(r.shape.slice(0,r.shape.length-1),i.shape,"predictions's shape should be align with the targets' shape, except the last dimension."),o=r.shape[r.shape.length-1],VW(n>0&&n<=o,(function(){return"'k' passed to inTopK() must be > 0 && <= the predictions last dimension ("+o+"), but got "+n})),[4,r.data()];case 1:return a=v.sent(),[4,i.data()];case 2:for(s=v.sent(),l=[a.length/o,o],c=l[1],d=eH("bool",u=l[0]),h=0;h<u;h++){for(p=h*c,f=a.subarray(p,p+c),m=[],g=0;g<f.length;g++)m.push({value:f[g],index:g});for(m.sort((function(e,t){return t.value-e.value})),d[h]=0,g=0;g<n;g++)if(m[g].index===s[h]){d[h]=1;break}}return e!==r&&r.dispose(),t!==i&&i.dispose(),[2,IK(d,i.shape,"bool")]}}))}))};!function(e){e[e.NONE=0]="NONE",e[e.MEAN=1]="MEAN",e[e.SUM=2]="SUM",e[e.SUM_BY_NONZERO_WEIGHTS=3]="SUM_BY_NONZERO_WEIGHTS"}(E2||(E2={}));var R2=kK({absoluteDifference_:function(e,t,n,r){void 0===r&&(r=E2.SUM_BY_NONZERO_WEIGHTS);var i=cK(e,"labels","absoluteDifference"),o=cK(t,"predictions","absoluteDifference"),a=null;null!=n&&(a=cK(n,"weights","absoluteDifference")),zW(i.shape,o.shape,"Error in absoluteDifference: ");var s=i.sub(o).abs();return D2(s,a,r)}}),D2=kK({computeWeightedLoss_:function(e,t,n){void 0===n&&(n=E2.SUM_BY_NONZERO_WEIGHTS);var r=cK(e,"losses","computeWeightedLoss"),i=null;null!=t&&(i=cK(t,"weights","computeWeightedLoss"));var o=null==i?r:r.mul(i);if(n===E2.NONE)return o;if(n===E2.SUM)return o.sum();if(n===E2.MEAN){if(null==i)return o.mean();var a=r.size/i.size,s=o.sum().div(i.sum());return a>1?s.div(NK(a)):s}if(n===E2.SUM_BY_NONZERO_WEIGHTS){if(null==i)return o.sum().div(NK(r.size));var l=i.mul(LK(r.shape)).notEqual(NK(0)).sum().toFloat();return o.sum().div(l)}throw Error("Unknown reduction: "+n)}}),O2=kK({cosineDistance_:function(e,t,n,r,i){void 0===i&&(i=E2.SUM_BY_NONZERO_WEIGHTS);var o=cK(e,"labels","cosineDistance"),a=cK(t,"predictions","cosineDistance"),s=null;null!=r&&(s=cK(r,"weights","cosineDistance")),zW(o.shape,a.shape,"Error in cosineDistance: ");var l=NK(1).sub(o.mul(a).sum(n,!0));return D2(l,s,i)}}),P2=kK({hingeLoss_:function(e,t,n,r){void 0===r&&(r=E2.SUM_BY_NONZERO_WEIGHTS);var i=cK(e,"labels","hingeLoss"),o=cK(t,"predictions","hingeLoss"),a=null;null!=n&&(a=cK(n,"weights","hingeLoss")),zW(i.shape,o.shape,"Error in hingeLoss: ");var s=NK(1);i=NK(2).mul(i).sub(s);var l=s.sub(i.mul(o)).relu();return D2(l,a,r)}}),L2=kK({huberLoss_:function(e,t,n,r,i){void 0===r&&(r=1),void 0===i&&(i=E2.SUM_BY_NONZERO_WEIGHTS);var o=cK(e,"labels","huberLoss"),a=cK(t,"predictions","huberLoss"),s=null;null!=n&&(s=cK(n,"weights","huberLoss")),zW(o.shape,a.shape,"Error in huberLoss: ");var l=NK(r),u=a.sub(o).abs(),c=D0(u,l),d=u.sub(c),h=NK(.5).mul(c.square()).add(l.mul(d));return D2(h,s,i)}}),M2=kK({logLoss_:function(e,t,n,r,i){void 0===r&&(r=1e-7),void 0===i&&(i=E2.SUM_BY_NONZERO_WEIGHTS);var o=cK(e,"labels","logLoss"),a=cK(t,"predictions","logLoss"),s=null;null!=n&&(s=cK(n,"weights","logLoss")),zW(o.shape,a.shape,"Error in logLoss: ");var l=NK(1),u=NK(r),c=o.mul(a.add(u).log()).neg().sub(l.sub(o).mul(l.sub(a).add(u).log()));return D2(c,s,i)}}),F2=kK({meanSquaredError_:function(e,t,n,r){void 0===r&&(r=E2.SUM_BY_NONZERO_WEIGHTS);var i=cK(e,"labels","meanSquaredError"),o=cK(t,"predictions","meanSquaredError"),a=null;null!=n&&(a=cK(n,"weights","meanSquaredError")),zW(i.shape,o.shape,"Error in meanSquaredError: ");var s=i.squaredDifference(o);return D2(s,a,r)}}),j2=kK({sigmoidCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=E2.SUM_BY_NONZERO_WEIGHTS);var o=cK(e,"multiClassLabels","sigmoidCrossEntropy"),a=cK(t,"logits","sigmoidCrossEntropy"),s=null;if(null!=n&&(s=cK(n,"weights","sigmoidCrossEntropy")),zW(o.shape,a.shape,"Error in sigmoidCrossEntropy: "),r>0){var l=NK(r),u=NK(1),c=NK(.5);o=o.mul(u.sub(l)).add(c.mul(l))}var d=function(e,t){var n=cK(e,"labels","sigmoidCrossEntropyWithLogits"),r=cK(t,"logits","sigmoidCrossEntropyWithLogits");zW(n.shape,r.shape,"Error in sigmoidCrossEntropyWithLogits: ");var i=r.relu(),o=r.mul(n),a=r.abs().neg().exp().log1p();return i.sub(o).add(a)}(o,a);return D2(d,s,i)}}),B2=kK({softmaxCrossEntropy_:function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=E2.SUM_BY_NONZERO_WEIGHTS);var o=cK(e,"onehotLabels","softmaxCrossEntropy"),a=cK(t,"logits","softmaxCrossEntropy"),s=null;if(null!=n&&(s=cK(n,"weights","softmaxCrossEntropy")),zW(o.shape,a.shape,"Error in softmaxCrossEntropy: "),r>0){var l=NK(r),u=NK(1),c=NK(o.shape[1]);o=o.mul(u.sub(l)).add(l.div(c))}var d=function(e,t,n){if(void 0===n&&(n=-1),-1===n&&(n=t.rank-1),n!==t.rank-1)throw Error("Softmax cross entropy along a non-last dimension is not yet supported. Labels / logits was rank "+t.rank+" and dim was "+n);return YY((function(e,t,r){var i=t.logSumExp([n],!0),o=t.toFloat().sub(i);return r([e,o]),{value:o.mul(e).neg().sum([n]),gradFunc:function(e,t){var r=t[0],i=t[1],o=mK(e.shape,[n]);return[e.reshape(o).mul(r.toFloat().sub(i.exp())),e.reshape(o).mul(i.exp().sub(r.toFloat()))]}}}))(e,t)}(o,a);return D2(d,s,i)}}),V2=Object.freeze({get Reduction(){return E2},absoluteDifference:R2,computeWeightedLoss:D2,cosineDistance:O2,hingeLoss:P2,huberLoss:L2,logLoss:M2,meanSquaredError:F2,sigmoidCrossEntropy:j2,softmaxCrossEntropy:B2});function z2(e,t){return void 0===t&&(t=!1),JH.tidy((function(){if(2!==e.shape.length)throw new Error("qr2d() requires a 2D Tensor, but got a "+e.shape.length+"D Tensor.");for(var n=e.shape[0],r=e.shape[1],i=fY(n),o=e.clone(),a=AK([[1]],[1,1]),s=a.clone(),l=n>=r?r:n,u=function(e){var t,l=o,u=s,c=i;t=JH.tidy((function(){var t=o.slice([e,e],[n-e,1]),l=t.norm(),u=o.slice([e,e],[1,1]),c=AK([[-1]]).where(u.greater(0),AK([[1]])),d=u.sub(c.mul(l)),h=t.div(d);s=1===h.shape[0]?a.clone():a.concat(h.slice([1,0],[h.shape[0]-1,h.shape[1]]),0);var p=c.matMul(d).div(l).neg(),f=o.slice([e,0],[n-e,r]),m=p.mul(s);if(0===e)o=f.sub(m.matMul(s.transpose().matMul(f)));else{var g=f.sub(m.matMul(s.transpose().matMul(f)));o=o.slice([0,0],[e,r]).concat(g,0)}var v=i.slice([0,e],[n,i.shape[1]-e]);if(0===e)i=v.sub(v.matMul(s).matMul(m.transpose()));else{var y=v.sub(v.matMul(s).matMul(m.transpose()));i=i.slice([0,0],[n,e]).concat(y,1)}return[s,o,i]})),s=t[0],o=t[1],i=t[2],oK([l,u,c])},c=0;c<l;++c)u(c);return!t&&n>r&&(i=i.slice([0,0],[n,r]),o=o.slice([0,0],[r,r])),[i,o]}))}var U2=kK({gramSchmidt_:function(e){var t;if(Array.isArray(e)){t=!1,VW(null!=e&&e.length>0,(function(){return"Gram-Schmidt process: input must not be null, undefined, or empty"}));for(var n=e[0].shape[0],r=function(t){VW(e[t].shape[0]===n,(function(){return"Gram-Schmidt: Non-unique lengths found in the input vectors: ("+e[t].shape[0]+" vs. "+n+")"}))},i=1;i<e.length;++i)r(i)}else t=!0,e=GK(e,e.shape[0],0).map((function(e){return NY(e,[0])}));VW(e.length<=e[0].shape[0],(function(){return"Gram-Schmidt: Number of vectors ("+e.length+") exceeds number of dimensions ("+e[0].shape[0]+")."}));var o=[],a=e,s=function(e){o.push(JH.tidy((function(){var t=a[e];if(e>0)for(var n=0;n<e;++n){var r=Q1(o[n].mulStrict(t)).mul(o[n]);t=t.sub(r)}return t.div(s2(t,"euclidean"))})))};for(i=0;i<e.length;++i)s(i);return t?TY(o,0):o}}),$2=kK({qr_:function(e,t){if(void 0===t&&(t=!1),e.rank<2)throw new Error("qr() requires input tensor to have a rank >= 2, but got rank "+e.rank);if(2===e.rank)return z2(e,t);var n=e.shape.slice(0,e.shape.length-2).reduce((function(e,t){return e*t})),r=DY(e.reshape([n,e.shape[e.shape.length-2],e.shape[e.shape.length-1]]),0),i=[],o=[];return r.forEach((function(e){var n=z2(e,t),r=n[0],a=n[1];i.push(r),o.push(a)})),[TY(i,0).reshape(e.shape),TY(o,0).reshape(e.shape)]}}),q2=Object.freeze({gramSchmidt:U2,qr:$2});function W2(e,t,n,r,i){null==r&&(r=.5),null==i&&(i=Number.NEGATIVE_INFINITY);var o=e.shape[0];return n=Math.min(n,o),VW(0<=r&&r<=1,(function(){return"iouThreshold must be in [0, 1], but was '"+r+"'"})),VW(2===e.rank,(function(){return"boxes must be a 2D tensor, but was of rank '"+e.rank+"'"})),VW(4===e.shape[1],(function(){return"boxes must have 4 columns, but 2nd dimension was "+e.shape[1]})),VW(1===t.rank,(function(){return"scores must be a 1D tensor"})),VW(t.shape[0]===o,(function(){return"scores has incompatible shape with boxes. Expected "+o+", but was "+t.shape[0]})),{maxOutputSize:n,iouThreshold:r,scoreThreshold:i}}var H2=kK({resizeBilinear_:function(e,t,n){void 0===n&&(n=!1);var r=cK(e,"images","resizeBilinear");VW(3===r.rank||4===r.rank,(function(){return"Error in resizeBilinear: x must be rank 3 or 4, but got rank "+r.rank+"."})),VW(2===t.length,(function(){return"Error in resizeBilinear: new shape must 2D, but got shape "+t+"."}));var i=r,o=!1;3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],l=JH.runKernel((function(e,t){return t([i]),e.resizeBilinear(i,a,s,n)}),{batchImages:i},(function(e,t){return{batchImages:function(){return JH.runKernel((function(r){return r.resizeBilinearBackprop(e,t[0],n)}),{})}}}));return o?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),G2=kK({resizeNearestNeighbor_:function(e,t,n){void 0===n&&(n=!1);var r=cK(e,"images","resizeNearestNeighbor");VW(3===r.rank||4===r.rank,(function(){return"Error in resizeNearestNeighbor: x must be rank 3 or 4, but got rank "+r.rank+"."})),VW(2===t.length,(function(){return"Error in resizeNearestNeighbor: new shape must 2D, but got shape "+t+"."})),VW("float32"===r.dtype||"int32"===r.dtype,(function(){return"`images` must have `int32` or `float32` as dtype"}));var i=r,o=!1;3===r.rank&&(o=!0,i=r.as4D(1,r.shape[0],r.shape[1],r.shape[2]));var a=t[0],s=t[1],l=JH.runKernel((function(e,t){return t([i]),e.resizeNearestNeighbor(i,a,s,n)}),{batchImages:i},(function(e,t){return{batchImages:function(){return JH.runKernel((function(r){return r.resizeNearestNeighborBackprop(e,t[0],n)}),{})}}}));return o?l.as3D(l.shape[1],l.shape[2],l.shape[3]):l}}),K2=kK({nonMaxSuppression_:function(e,t,n,r,i){void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY);var o=cK(e,"boxes","nonMaxSuppression"),a=cK(t,"scores","nonMaxSuppression"),s=W2(o,a,n,r,i);return n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,JH.runKernel((function(e){return e.nonMaxSuppression(o,a,n,r,i)}),{$boxes:o})}}),Y2=kK({cropAndResize_:function(e,t,n,r,i,o){var a=cK(e,"image","cropAndResize","float32"),s=cK(t,"boxes","cropAndResize","float32"),l=cK(n,"boxInd","cropAndResize","int32");i=i||"bilinear",o=o||0;var u=s.shape[0];return VW(4===a.rank,(function(){return"Error in cropAndResize: image must be rank 4,but got rank "+a.rank+"."})),VW(2===s.rank&&4===s.shape[1],(function(){return"Error in cropAndResize: boxes must be have size ["+u+",4] but had shape "+s.shape+"."})),VW(1===l.rank&&l.shape[0]===u,(function(){return"Error in cropAndResize: boxInd must be have size ["+u+"] but had shape "+s.shape+"."})),VW(2===r.length,(function(){return"Error in cropAndResize: cropSize must be of length 2, but got length "+r.length+"."})),VW(r[0]>=1&&r[1]>=1,(function(){return"cropSize must be atleast [1,1], but was "+r})),VW("bilinear"===i||"nearest"===i,(function(){return"method must be bilinear or nearest, but was "+i})),JH.runKernel((function(e,t){return e.cropAndResize(a,s,l,r,i,o)}),{$image:a,$boxes:s})}}),X2=Object.freeze({resizeBilinear:H2,resizeNearestNeighbor:G2,nonMaxSuppression:K2,nonMaxSuppressionAsync:function(e,t,n,r,i){return void 0===r&&(r=.5),void 0===i&&(i=Number.NEGATIVE_INFINITY),RW(this,void 0,void 0,(function(){var o,a,s,l,u,c,d;return DW(this,(function(h){switch(h.label){case 0:return o=cK(e,"boxes","nonMaxSuppressionAsync"),a=cK(t,"scores","nonMaxSuppressionAsync"),s=W2(o,a,n,r,i),n=s.maxOutputSize,r=s.iouThreshold,i=s.scoreThreshold,[4,Promise.all([o.data(),a.data()])];case 1:return l=h.sent(),u=l[0],c=l[1],d=EX(u,c,n,r,i),o!==e&&o.dispose(),a!==t&&a.dispose(),[2,d]}}))}))},cropAndResize:Y2}),Q2=kK({matMul_:function(e){var t,n=e.a,r=e.b,i=e.transposeA,o=void 0!==i&&i,a=e.transposeB,s=void 0!==a&&a,l=e.bias,u=e.activation,c=void 0===u?"linear":u,d=e.preluActivationWeights,h=cK(n,"a","fused matMul"),p=cK(r,"b","fused matMul");t=WH(h,p),h=t[0],p=t[1];var f=o?h.shape[h.rank-2]:h.shape[h.rank-1],m=s?p.shape[p.rank-1]:p.shape[p.rank-2],g=o?h.shape[h.rank-1]:h.shape[h.rank-2],v=s?p.shape[p.rank-2]:p.shape[p.rank-1],y=h.shape.slice(0,-2),b=p.shape.slice(0,-2),x=qW(y),w=qW(b);VW(h.rank>=2&&p.rank>=2&&h.rank===p.rank,(function(){return"Error in fused matMul: inputs must have the same rank of at least 2, got ranks "+h.rank+" and "+p.rank+"."})),VW(WW(y,b),(function(){return"Error in fused matMul: outer dimensions ("+y+") and ("+b+") of Tensors with shapes "+h.shape+" and "+p.shape+" must match."})),VW(f===m,(function(){return"Error in fused matMul: inner shapes ("+f+") and ("+m+") of Tensors with shapes "+h.shape+" and "+p.shape+" and transposeA="+o+" and transposeB="+s+" must match."}));var k,_,E=h.shape.slice(0,-2).concat([g,v]),C=o?h.as3D(x,f,g):h.as3D(x,g,f),I=s?p.as3D(w,v,m):p.as3D(w,m,v);null!=l&&rX(E,(k=WH(k=cK(l,"bias","fused matMul"),h)[0]).shape),null!=d&&(_=cK(d,"prelu weights","fused matMul"));var S={$a:C,$b:I};return null!=l&&(S.$bias=k),null!=d&&(S.$preluActivationWeights=_),JH.runKernel((function(e,t){var n=e.fusedBatchMatMul({a:C,b:I,transposeA:o,transposeB:s,bias:k,activation:c,preluActivationWeights:_});return t([C,I,n]),n}),S,(function(e,t){var n,r=t[0],i=t[1],a=t[2];if(null==c||"linear"===c)n=e;else{if("relu"!==c)throw new Error("Gradient for activation "+c+" has not been implemented yet.");n=e.mul(a.step())}var u={};return null!=l&&(u={$bias:function(){var e=n,t=nX(k.shape,n.shape);return t.length>0&&(e=e.sum(t)),e.reshape(k.shape)}}),o||s?!o&&s?Object.assign({$a:function(){return n.matMul(i,!1,!1)},$b:function(){return n.matMul(r,!0,!1)}},u):o&&!s?Object.assign({$a:function(){return i.matMul(n,!1,!0)},$b:function(){return r.matMul(n,!1,!1)}},u):Object.assign({$a:function(){return i.matMul(n,!0,!0)},$b:function(){return n.matMul(r,!0,!0)}},u):Object.assign({$a:function(){return n.matMul(i,!1,!0)},$b:function(){return r.matMul(n,!0,!1)}},u)})).reshape(E)}}),J2=kK({conv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,i=e.pad,o=e.dataFormat,a=void 0===o?"NHWC":o,s=e.dilations,l=void 0===s?[1,1]:s,u=e.dimRoundingMode,c=e.bias,d=e.activation,h=void 0===d?"linear":d,p=e.preluActivationWeights,f=cK(t,"x","conv2d"),m=cK(n,"filter","conv2d"),g=f,v=!1;3===f.rank&&(v=!0,g=f.as4D(1,f.shape[0],f.shape[1],f.shape[2])),VW(4===g.rank,(function(){return"Error in fused conv2d: input must be rank 4, but got rank "+g.rank+"."})),VW(4===m.rank,(function(){return"Error in fused conv2d: filter must be rank 4, but got rank "+m.rank+"."})),null!=u&&VW(HW(i),(function(){return"Error in fused conv2d: pad must be an integer when using, dimRoundingMode "+u+" but got pad "+i+"."})),VW(g.shape[3]===m.shape[2],(function(){return"Error in conv2d: depth of input ("+g.shape[3]+") must match input depth for filter "+m.shape[2]+"."})),VW(fX(r,l),(function(){return"Error in conv2D: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+l+"'"})),VW("NHWC"===a,(function(){return"Error in conv2d: got dataFormat of "+a+" but only NHWC is currently supported."}));var y,b,x=aX(g.shape,m.shape,r,l,i,u);null!=c&&(y=WH(y=cK(c,"bias","fused conv2d"),f)[0],rX(x.outShape,y.shape)),null!=p&&(b=cK(p,"prelu weights","fused conv2d"));var w={x:g,$filter:m};null!=c&&(w.$bias=y),null!=p&&(w.$preluActivationWeights=b);var k=JH.runKernel((function(e,t){var n=e.fusedConv2d({input:g,filter:m,convInfo:x,bias:y,activation:h,preluActivationWeights:b});return t([m,g,n]),n}),w,(function(e,t){var n,o=t,a=o[0],s=o[1],u=o[2];if(null==h||"linear"===h)n=e;else{if("relu"!==h)throw new Error("Gradient for activation "+h+" has not been implemented yet.");n=e.mul(u.step())}VW(pX(l),(function(){return"Error in gradient of fused conv2D: dilation rates greater than 1 are not yet supported in gradients. Got dilations '"+l+"'"}));var d={};return null!=c&&(d={$bias:function(){var e=n,t=nX(y.shape,n.shape);return t.length>0&&(e=e.sum(t)),e.reshape(y.shape)}}),Object.assign({x:function(){return f1(s.shape,n,a,r,i)},$filter:function(){return p1(s,n,a.shape,r,i)}},d)}));return v?k.as3D(k.shape[1],k.shape[2],k.shape[3]):k}}),Z2=kK({depthwiseConv2d_:function(e){var t=e.x,n=e.filter,r=e.strides,i=e.pad,o=(e.dataFormat,e.dilations),a=void 0===o?[1,1]:o,s=e.dimRoundingMode,l=e.bias,u=e.activation,c=void 0===u?"linear":u,d=e.preluActivationWeights,h=cK(t,"x","depthwiseConv2d"),p=cK(n,"filter","depthwiseConv2d"),f=h,m=!1;3===h.rank&&(m=!0,f=h.as4D(1,h.shape[0],h.shape[1],h.shape[2])),VW(4===f.rank,(function(){return"Error in fused depthwiseConv2d: input must be rank 4, but got rank "+f.rank+"."})),VW(4===p.rank,(function(){return"Error in fused depthwiseConv2d: filter must be rank 4, but got rank "+p.rank+"."})),VW(f.shape[3]===p.shape[2],(function(){return"Error in fused depthwiseConv2d: number of input channels ("+f.shape[3]+") must match the inChannels dimension in filter "+p.shape[2]+"."})),null==a&&(a=[1,1]),VW(fX(r,a),(function(){return"Error in fused depthwiseConv2d: Either strides or dilations must be 1. Got strides "+r+" and dilations '"+a+"'"})),null!=s&&VW(HW(i),(function(){return"Error in fused depthwiseConv2d: pad must be an integer when using dimRoundingMode "+s+" but got pad "+i+"."}));var g,v,y=aX(f.shape,p.shape,r,a,i,s,!0);null!=l&&(g=WH(g=cK(l,"bias","fused conv2d"),h)[0],rX(y.outShape,g.shape)),null!=d&&(v=cK(d,"prelu weights","fused depthwiseConv2d"));var b={x:f,$filter:p};null!=l&&(b.$bias=g),null!=d&&(b.$preluActivationWeights=v);var x=JH.runKernel((function(e,t){var n=e.fusedDepthwiseConv2D({input:f,filter:p,convInfo:y,bias:g,activation:c,preluActivationWeights:v});return t([f,p,n]),n}),b,(function(e,t){VW(pX(a),(function(){return"Error in gradient of fused depthwiseConv2d: dilation rates greater than 1 are not yet supported. Got dilations '"+a+"'"}));var n,r=t[0],i=t[1],o=t[2];if(null==c||"linear"===c)n=e;else{if("relu"!==c)throw new Error("Gradient for activation "+c+" has not been implemented yet.");n=e.mul(o.step())}var s={};return null!=l&&(s={$bias:function(){var e=n,t=nX(g.shape,n.shape);return t.length>0&&(e=e.sum(t)),e.reshape(g.shape)}}),Object.assign({x:function(){return g1(r.shape,n,i,y)},$filter:function(){return v1(r,n,i.shape,y)}},s)}));return m?x.as3D(x.shape[1],x.shape[2],x.shape[3]):x}}),e4=Object.freeze({matMul:Q2,conv2d:J2,depthwiseConv2d:Z2}),t4=Object.freeze({image:X2,linalg:q2,losses:V2,spectral:y2,fused:e4,signal:T2,conv1d:c1,conv2d:d1,conv3d:h1,depthwiseConv2d:m1,separableConv2d:y1,conv2dTranspose:b1,conv3dTranspose:x1,op:kK,batchNormalization2d:u0,batchNormalization3d:c0,batchNormalization4d:d0,batchNormalization:h0,batchNorm:p0,batchNorm2d:f0,batchNorm3d:m0,batchNorm4d:g0,booleanMaskAsync:a1,complex:_K,real:EK,imag:CK,concat:UK,concat1d:$K,concat2d:qK,concat3d:WK,concat4d:HK,split:GK,matMul:w1,dot:k1,outerProduct:_1,reverse:E1,reverse1d:C1,reverse2d:I1,reverse3d:S1,reverse4d:N1,maxPool:R1,avgPool:D1,pool:O1,maxPool3d:P1,avgPool3d:L1,slice:M1,slice1d:F1,slice2d:j1,slice3d:B1,slice4d:V1,abs:kZ,acos:_Z,acosh:EZ,asin:CZ,asinh:IZ,atan:SZ,atanh:NZ,ceil:TZ,clipByValue:AZ,cos:RZ,cosh:DZ,erf:OZ,exp:PZ,expm1:LZ,floor:MZ,log:FZ,log1p:jZ,logSigmoid:BZ,neg:VZ,reciprocal:zZ,round:UZ,rsqrt:$Z,sigmoid:qZ,sign:WZ,isNaN:HZ,isInf:GZ,isFinite:KZ,sin:YZ,sinh:XZ,softplus:QZ,sqrt:JZ,square:ZZ,step:e0,tan:t0,tanh:n0,all:U1,any:$1,argMax:q1,argMin:W1,logSumExp:H1,max:G1,mean:K1,min:Y1,moments:X1,sum:Q1,prod:J1,equal:q0,equalStrict:W0,greater:H0,greaterEqual:G0,greaterEqualStrict:K0,greaterStrict:Y0,less:X0,lessEqual:Q0,lessEqualStrict:J0,lessStrict:Z0,notEqual:e1,notEqualStrict:t1,add:_0,addN:E0,addStrict:C0,atan2:I0,div:S0,divStrict:N0,floorDiv:T0,maximum:A0,maximumStrict:R0,minimum:D0,minimumStrict:O0,mod:P0,modStrict:L0,mul:M0,mulStrict:F0,pow:j0,powStrict:B0,squaredDifference:V0,squaredDifferenceStrict:z0,sub:U0,subStrict:$0,elu:Z1,leakyRelu:e2,prelu:t2,relu:n2,relu6:r2,selu:i2,logicalAnd:v0,logicalNot:y0,logicalOr:b0,logicalXor:x0,where:w0,whereAsync:k0,buffer:aY,print:sY,batchToSpaceND:lY,cast:uY,clone:cY,cumsum:dY,depthToSpace:hY,expandDims:pY,eye:fY,multinomial:mY,oneHot:gY,pad:vY,pad1d:yY,pad2d:bY,pad3d:xY,pad4d:wY,rand:kY,randomNormal:_Y,randomGamma:EY,randomUniform:CY,reshape:IY,spaceToBatchND:SY,squeeze:NY,stack:TY,tile:AY,truncatedNormal:RY,unstack:DY,setdiff1dAsync:OY,fill:FK,linspace:jK,ones:LK,range:BK,scalar:NK,tensor:IK,tensor1d:TK,tensor2d:AK,tensor3d:RK,tensor4d:DK,tensor5d:OK,tensor6d:PK,zeros:MK,onesLike:VK,zerosLike:zK,transpose:o2,softmax:QY,logSoftmax:JY,localResponseNormalization:a2,norm:s2,gather:i1,unsortedSegmentSum:o1,basicLSTMCell:l2,multiRNNCell:u2,movingAverage:c2,stridedSlice:d2,topk:h2,scatterND:p2,fft:f2,ifft:m2,rfft:g2,irfft:v2,sparseToDense:b2,gatherND:x2,diag:w2,dropout:k2,hannWindow:C2,hammingWindow:I2,frame:S2,stft:N2,inTopKAsync:A2});function n4(e,t,n,r){if("linear"===n)return e.linear(t);if("relu"===n)return e.relu(t);if("elu"===n)return e.elu(t);if("relu6"===n)return e.relu6(t);if("prelu"===n)return e.prelu(t,r);throw new Error("Activation "+n+" has not been implemented for the CPU backend.")}var r4=function(){function e(){if(this.blockSize=48,this.firstUse=!0,PW().get("IS_BROWSER")){var e="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(300,150):"undefined"!=typeof document?document.createElement("canvas"):null;null!==e&&(this.fromPixels2DContext=e.getContext("2d"))}this.data=new ZY(this,JH)}return e.prototype.register=function(e,t,n){if(this.firstUse&&(this.firstUse=!1,PW().get("IS_NODE")&&sK("\n============================\nHi there 👋. Looks like you are running TensorFlow.js in Node.js. To speed things up dramatically, install our node backend, which binds to TensorFlow C++, by running npm i @tensorflow/tfjs-node, or npm i @tensorflow/tfjs-node-gpu if you have CUDA. Then call require('@tensorflow/tfjs-node'); (-gpu suffix for CUDA) at the start of your program. Visit https://github.com/tensorflow/tfjs-node for more details.\n============================\n")),this.data.has(e))throw new Error("Data buffer is already registered");this.data.set(e,{dtype:n})},e.prototype.write=function(e,t){if(null==t)throw new Error("MathBackendCPU.write(): values can not be null");this.data.get(e).values=t},e.prototype.fromPixels=function(e,t){if(null==e)throw new Error("pixels passed to tf.browser.fromPixels() can not be null");var n,r,i=e.data instanceof Uint8Array,o="undefined"!=typeof ImageData&&e instanceof ImageData,a="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement,s="undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement,l=a?[e.videoWidth,e.videoHeight]:[e.width,e.height],u=l[0],c=l[1];if(PW().get("IS_NODE")&&null==e.getContext)throw new Error("When running in node, pixels must be an HTMLCanvasElement like the one returned by the `canvas` npm package");if(null!=e.getContext)n=e.getContext("2d").getImageData(0,0,u,c).data;else if(o||i)n=e.data;else{if(!s&&!a)throw new Error("pixels passed to tf.browser.fromPixels() must be either an HTMLVideoElement, HTMLImageElement, HTMLCanvasElement, ImageData or {data: Uint32Array, width: number, height: number}, but was "+e.constructor.name);if(null==this.fromPixels2DContext)throw new Error("Can't read pixels from HTMLImageElement outside the browser.");this.fromPixels2DContext.canvas.width=u,this.fromPixels2DContext.canvas.height=c,this.fromPixels2DContext.drawImage(e,0,0,u,c),n=this.fromPixels2DContext.getImageData(0,0,u,c).data}if(4===t)r=new Int32Array(n);else{var d=u*c;r=new Int32Array(d*t);for(var h=0;h<d;h++)for(var p=0;p<t;++p)r[h*t+p]=n[4*h+p]}return RK(r,[c,u,t],"int32")},e.prototype.read=function(e){return RW(this,void 0,void 0,(function(){return DW(this,(function(t){return[2,this.readSync(e)]}))}))},e.prototype.readSync=function(e){var t=this.data.get(e),n=t.dtype,r=t.complexTensors;return"complex64"===n?xX(this.readSync(r.real.dataId),this.readSync(r.imag.dataId)):this.data.get(e).values},e.prototype.bufferSync=function(e){var t=this.readSync(e.dataId),n=t;if("string"===e.dtype)try{n=t.map((function(e){return kH(e)}))}catch(e){throw new Error("Failed to decode encoded string bytes into utf-8")}return aY(e.shape,e.dtype,n)},e.prototype.disposeData=function(e){if(this.data.has(e)){var t=this.data.get(e).complexTensors;null!=t&&(t.real.dispose(),t.imag.dispose()),this.data.delete(e)}},e.prototype.time=function(e){return RW(this,void 0,void 0,(function(){var t;return DW(this,(function(n){return t=bH(),e(),[2,{kernelMs:bH()-t}]}))}))},e.prototype.memory=function(){return{unreliable:!0,reasons:["The reported memory is an upper bound. Due to automatic garbage collection, the true allocated memory may be less."]}},e.prototype.complex=function(e,t){var n=PH.make(e.shape,{},"complex64");return this.data.get(n.dataId).complexTensors={real:JH.keep(e.clone()),imag:JH.keep(t.clone())},n},e.prototype.real=function(e){return this.data.get(e.dataId).complexTensors.real.clone()},e.prototype.imag=function(e){return this.data.get(e.dataId).complexTensors.imag.clone()},e.prototype.assertNotComplex=function(e,t){Array.isArray(e)||(e=[e]),e.forEach((function(e){null!=e&&VW("complex64"!==e.dtype,(function(){return t+" does not support complex64 tensors."}))}))},e.prototype.slice=function(e,t,n){if(this.assertNotComplex(e,"slice"),HY(e.shape,t,n)){var r=GY(t,e.strides),i=qW(n);return IK(this.readSync(e.dataId).subarray(r,r+i),n,e.dtype)}for(var o=aY(n,e.dtype),a=this.bufferSync(e),s=0;s<o.size;++s){var l=o.indexToLoc(s).map((function(e,n){return e+t[n]}));o.values[s]=a.get.apply(a,l)}return o.toTensor()},e.prototype.stridedSlice=function(e,t,n,r){this.assertNotComplex(e,"stridedSlice");var i=$Y(t,n,r);if(i.some((function(e){return 0===e})))return IK([],i);for(var o=aY(i,e.dtype),a=this.bufferSync(e),s=0;s<o.size;s++){for(var l=o.indexToLoc(s),u=new Array(l.length),c=0;c<u.length;c++)u[c]=l[c]*r[c]+t[c];o.set.apply(o,[a.get.apply(a,u)].concat(l))}return o.toTensor()},e.prototype.diag=function(e){for(var t=this.readSync(e.dataId),n=aY([e.size,e.size],e.dtype),r=n.values,i=0;i<t.length;i++)r[i*e.size+i]=t[i];return n.toTensor()},e.prototype.unstack=function(e,t){for(var n=e.shape[t],r=new Array(e.rank-1),i=0,o=0;o<e.rank;o++)o!==t&&(r[i++]=e.shape[o]);var a=new Array(e.rank).fill(0),s=e.shape.slice();s[t]=1;var l=new Array(n);for(o=0;o<l.length;o++)a[t]=o,l[o]=this.slice(e,a,s).reshape(r);return l},e.prototype.reverse=function(e,t){this.assertNotComplex(e,"reverse");for(var n=aY(e.shape,e.dtype),r=this.bufferSync(e),i=function(i){var o=n.indexToLoc(i),a=o.slice();t.forEach((function(t){return a[t]=e.shape[t]-1-a[t]})),n.set.apply(n,[r.get.apply(r,a)].concat(o))},o=0;o<n.size;o++)i(o);return n.toTensor()},e.prototype.concat=function(e,t){var n=this;if("complex64"===e[0].dtype){var r=e.map((function(e){return EK(e)})),i=e.map((function(e){return CK(e)}));return _K(this.concat(r,t),this.concat(i,t))}var o=e.map((function(e){var n=qW(e.shape.slice(t));return e.as2D(-1,n)})),a=wK(o.map((function(e){return e.shape})),1),s=aY(a,e[0].dtype).values;if(1===o[0].shape[0]){var l=0;o.forEach((function(e){s.set(n.readSync(e.dataId),l),l+=e.size}))}else{var u=0;o.forEach((function(e){for(var t=n.readSync(e.dataId),r=0,i=0;i<e.shape[0];++i)for(var o=i*a[1]+u,l=0;l<e.shape[1];++l)s[o+l]=t[r++];u+=e.shape[1]}))}var c=wK(e.map((function(e){return e.shape})),t);return IK(s,c,e[0].dtype)},e.prototype.neg=function(e){return this.assertNotComplex(e,"neg"),this.multiply(NK(-1),e)},e.prototype.add=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e+n,imag:t+r}})):this.broadcastedBinaryOp(e,t,$H(e.dtype,t.dtype),(function(e,t){return e+t}))},e.prototype.addN=function(e){var t=this;this.assertNotComplex(e,"addN");for(var n=e.map((function(e){return t.readSync(e.dataId)})),r=aY(e[0].shape,e[0].dtype),i=r.values,o=0;o<e.length;o++)for(var a=n[o],s=0;s<i.length;s++)i[s]+=a[s];return r.toTensor()},e.prototype.subtract=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e-n,imag:t-r}})):this.broadcastedBinaryOp(e,t,$H(e.dtype,t.dtype),(function(e,t){return e-t}))},e.prototype.pow=function(e,t){return this.assertNotComplex([e,t],"pow"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.pow(e,t)}))},e.prototype.batchMatMul=function(e,t,n,r){this.assertNotComplex([e,t],"matMul");for(var i=n?e.shape[1]:e.shape[2],o=n?e.shape[2]:e.shape[1],a=r?t.shape[1]:t.shape[2],s=e.shape[0],l=this.readSync(e.dataId),u=this.readSync(t.dataId),c=n?[e.strides[0],1,e.strides[1]]:[e.strides[0],e.strides[1],1],d=c[0],h=c[1],p=c[2],f=r?[1,t.strides[1],t.strides[0]]:[t.strides[1],1,t.strides[0]],m=f[0],g=f[1],v=f[2],y=o*a,b=aY([s,o,a],e.dtype),x=b.values,w=this.blockSize,k=0;k<s;k++)for(var _=0;_<o;_+=w)for(var E=0;E<a;E+=w)for(var C=0;C<i;C+=w)for(var I=Math.min(_+w,o),S=Math.min(E+w,a),N=Math.min(C+w,i),T=_;T<I;T++)for(var A=E;A<S;A++){for(var R=0,D=C;D<N;D++)R+=l[k*d+T*h+D*p]*u[D*m+A*g+k*v];x[k*y+(T*a+A)]+=R}return b.toTensor()},e.prototype.fusedBatchMatMul=function(e){var t=e.a,n=e.b,r=e.transposeA,i=e.transposeB,o=e.bias,a=e.activation,s=e.preluActivationWeights,l=this.batchMatMul(t,n,r,i);return o&&(l=this.add(l,o)),a&&(l=n4(this,l,a,s)),l},e.prototype.multiply=function(e,t){return"complex64"===e.dtype||"complex64"===t.dtype?this.broadcastedBinaryComplexOp(e.cast("complex64"),t.cast("complex64"),(function(e,t,n,r){return{real:e*n-t*r,imag:e*r+t*n}})):this.broadcastedBinaryOp(e,t,$H(e.dtype,t.dtype),(function(e,t){return e*t}))},e.prototype.realDivide=function(e,t){return this.assertNotComplex([e,t],"realDivide"),this.broadcastedBinaryOp(e,t,"float32",(function(e,t){return e/t}))},e.prototype.floorDiv=function(e,t){return this.assertNotComplex([e,t],"floorDiv"),this.broadcastedBinaryOp(e,t,"int32",(function(e,t){return Math.floor(e/t)}))},e.prototype.sum=function(e,t){this.assertNotComplex(e,"sum"),gK("sum",t,e.rank);for(var n=fK(e.shape,t),r=n[0],i=n[1],o=MK(r,$H(e.dtype,"int32")),a=qW(i),s=this.readSync(o.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*a,d=0,h=0;h<a;++h)d+=l[c+h];s[u]=d}return o},e.prototype.prod=function(e,t){this.assertNotComplex(e,"sum");for(var n=fK(e.shape,t),r=n[0],i=n[1],o=MK(r,$H(e.dtype,"int32")),a=qW(i),s=this.readSync(o.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*a,d=1,h=0;h<a;++h)d*=l[c+h];s[u]=d}return o},e.prototype.unsortedSegmentSum=function(e,t,n){this.assertNotComplex(e,"unsortedSegmentSum");for(var r=[],i=e.rank-t.rank,o=0;o<i;++o)t=t.expandDims(o+1);for(o=0;o<n;++o){var a=NK(o,"int32"),s=q0(a,t).asType("float32").mul(e).sum(0);r.push(s)}return TY(r)},e.prototype.argMin=function(e,t){this.assertNotComplex(e,"argMin");var n=[t];gK("argMin",n,e.rank);for(var r=fK(e.shape,n),i=r[0],o=r[1],a=MK(i,"int32"),s=qW(o),l=this.readSync(a.dataId),u=this.readSync(e.dataId),c=0;c<l.length;++c){for(var d=c*s,h=u[d],p=0,f=0;f<s;++f){var m=u[d+f];m<h&&(h=m,p=f)}l[c]=p}return a},e.prototype.argMax=function(e,t){this.assertNotComplex(e,"argMax");var n=[t];gK("argMax",n,e.rank);for(var r=fK(e.shape,n),i=r[0],o=r[1],a=MK(i,"int32"),s=qW(o),l=this.readSync(a.dataId),u=this.readSync(e.dataId),c=0;c<l.length;++c){for(var d=c*s,h=u[d],p=0,f=0;f<s;++f){var m=u[d+f];m>h&&(h=m,p=f)}l[c]=p}return a},e.prototype.cumsum=function(e,t,n,r){if(this.assertNotComplex(e,"cumsum"),t!==e.rank-1)throw new Error("backend.cumsum in CPU expects an inner-most axis="+(e.rank-1)+" but got axis="+t);for(var i=$H(e.dtype,"int32"),o=MK(e.shape,i),a=this.readSync(o.dataId),s=this.readSync(e.dataId),l=e.shape[e.rank-1],u=r?function(e,t){return e+l-t-1}:function(e,t){return e+t},c=0;c<s.length;c+=l)for(var d=0;d<l;d++){var h=u(c,d);if(0===d)a[h]=n?0:s[h];else{var p=u(c,d-1);a[h]=n?s[p]+a[p]:s[h]+a[p]}}return o},e.prototype.equal=function(e,t){return this.assertNotComplex([e,t],"equal"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e===t?1:0}))},e.prototype.notEqual=function(e,t){return this.assertNotComplex([e,t],"notEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e!==t?1:0}))},e.prototype.less=function(e,t){return this.assertNotComplex([e,t],"less"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<t?1:0}))},e.prototype.lessEqual=function(e,t){return this.assertNotComplex([e,t],"lessEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e<=t?1:0}))},e.prototype.greater=function(e,t){return this.assertNotComplex([e,t],"greater"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>t?1:0}))},e.prototype.greaterEqual=function(e,t){return this.assertNotComplex([e,t],"greaterEqual"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e>=t?1:0}))},e.prototype.logicalNot=function(e){this.assertNotComplex(e,"logicalNot");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)n[r]=t[r]?0:1;return PH.make(e.shape,{values:n},"bool")},e.prototype.logicalAnd=function(e,t){return this.assertNotComplex([e,t],"logicalAnd"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e&&t}))},e.prototype.logicalOr=function(e,t){return this.assertNotComplex([e,t],"logicalOr"),this.broadcastedBinaryOp(e,t,"bool",(function(e,t){return e||t}))},e.prototype.select=function(e,t,n){this.assertNotComplex([e,t,n],"select");for(var r=this.readSync(e.dataId),i=this.readSync(t.dataId),o=this.readSync(n.dataId),a=MK(t.shape,$H(t.dtype,n.dtype)),s=this.readSync(a.dataId),l=0,u=0===e.rank||e.rank>1||1===t.rank?1:qW(t.shape.slice(1)),c=0;c<r.length;c++)for(var d=0;d<u;d++)1===r[c]?s[l++]=i[c]:s[l++]=o[c];return a},e.prototype.where=function(e){this.assertNotComplex([e],"where");var t=this.readSync(e.dataId);return TX(e.shape,t)},e.prototype.topk=function(e,t,n){return this.assertNotComplex(e,"topk"),NX(this.readSync(e.dataId),e.shape,e.dtype,t)},e.prototype.min=function(e,t){this.assertNotComplex(e,"min"),gK("min",t,e.rank);for(var n=fK(e.shape,t),r=n[0],i=n[1],o=MK(r,e.dtype),a=qW(i),s=this.readSync(o.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*a,d=l[c],h=0;h<a;++h){var p=l[c+h];p<d&&(d=p)}s[u]=d}return o},e.prototype.minimum=function(e,t){return this.assertNotComplex([e,t],"minimum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.min(e,t)}))},e.prototype.mod=function(e,t){return this.assertNotComplex([e,t],"mod"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e%t;return e<0&&t<0||e>=0&&t>=0?n:(n+t)%t}))},e.prototype.max=function(e,t){this.assertNotComplex(e,"max"),gK("max",t,e.rank);for(var n=fK(e.shape,t),r=n[0],i=n[1],o=MK(r,e.dtype),a=qW(i),s=this.readSync(o.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*a,d=l[c],h=0;h<a;++h){var p=l[c+h];p>d&&(d=p)}s[u]=d}return o},e.prototype.maximum=function(e,t){return this.assertNotComplex([e,t],"maximum"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.max(e,t)}))},e.prototype.all=function(e,t){this.assertNotComplex(e,"all"),gK("all",t,e.rank);for(var n=fK(e.shape,t),r=n[0],i=n[1],o=MK(r,e.dtype),a=qW(i),s=this.readSync(o.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*a,d=l[c],h=0;h<a;++h){var p=l[c+h];d=d&&p}s[u]=d}return o},e.prototype.any=function(e,t){this.assertNotComplex(e,"any"),gK("any",t,e.rank);for(var n=fK(e.shape,t),r=n[0],i=n[1],o=MK(r,e.dtype),a=qW(i),s=this.readSync(o.dataId),l=this.readSync(e.dataId),u=0;u<s.length;++u){for(var c=u*a,d=l[c],h=0;h<a;++h){var p=l[c+h];d=d||p}s[u]=d}return o},e.prototype.squaredDifference=function(e,t){return this.assertNotComplex([e,t],"squaredDifference"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){var n=e-t;return n*n}))},e.prototype.ceil=function(e){this.assertNotComplex(e,"ceil");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.ceil(t[r]);return PH.make(e.shape,{values:n})},e.prototype.floor=function(e){this.assertNotComplex(e,"floor");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.floor(t[r]);return PH.make(e.shape,{values:n})},e.prototype.sign=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)t[r]<0?n[r]=-1:t[r]>0?n[r]=1:n[r]=0;return PH.make(e.shape,{values:n})},e.prototype.isNaN=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isNaN(t[r])&&(n[r]=1);return PH.make(e.shape,{values:n},"bool")},e.prototype.isInf=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Math.abs(t[r])===1/0&&(n[r]=1);return PH.make(e.shape,{values:n},"bool")},e.prototype.isFinite=function(e){this.assertNotComplex(e,"x");for(var t=this.readSync(e.dataId),n=new Uint8Array(t.length),r=0;r<t.length;++r)Number.isFinite(t[r])&&(n[r]=1);return PH.make(e.shape,{values:n},"bool")},e.prototype.round=function(e){this.assertNotComplex(e,"round");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=Math.floor(t[r]);t[r]-i<.5?n[r]=Math.floor(t[r]):t[r]-i>.5?n[r]=Math.ceil(t[r]):n[r]=i%2==0?i:i+1}return PH.make(e.shape,{values:n})},e.prototype.exp=function(e){this.assertNotComplex(e,"exp");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.exp(t[r]);return PH.make(e.shape,{values:n})},e.prototype.expm1=function(e){this.assertNotComplex(e,"expm1");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=Math.expm1(t[r]);return PH.make(e.shape,{values:n})},e.prototype.log=function(e){this.assertNotComplex(e,"log");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.log(i)}return PH.make(e.shape,{values:n})},e.prototype.log1p=function(e){this.assertNotComplex(e,"log1p");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.log1p(i)}return PH.make(e.shape,{values:n})},e.prototype.sqrt=function(e){this.assertNotComplex(e,"sqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=Math.sqrt(i)}return PH.make(e.shape,{values:n})},e.prototype.rsqrt=function(e){this.assertNotComplex(e,"rsqrt");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=1/Math.sqrt(i)}return PH.make(e.shape,{values:n})},e.prototype.square=function(e){this.assertNotComplex(e,"square");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r){var i=t[r];n[r]=i*i}return PH.make(e.shape,{values:n})},e.prototype.reciprocal=function(e){this.assertNotComplex(e,"reciprocal");for(var t=this.readSync(e.dataId),n=new Float32Array(t.length),r=0;r<t.length;++r)n[r]=1/t[r];return PH.make(e.shape,{values:n})},e.prototype.linear=function(e){return e},e.prototype.relu=function(e){this.assertNotComplex(e,"relu");for(var t=MK(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.max(0,r[i]);return t},e.prototype.relu6=function(e){this.assertNotComplex(e,"relu");for(var t=MK(e.shape,e.dtype),n=this.readSync(t.dataId),r=this.readSync(e.dataId),i=0;i<r.length;++i)n[i]=Math.min(Math.max(0,r[i]),6);return t},e.prototype.prelu=function(e,t){return this.assertNotComplex([e,t],"prelu"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return e<0?t*e:e}))},e.prototype.elu=function(e){this.assertNotComplex(e,"elu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r];t[r]=i>=0?i:Math.exp(i)-1}return PH.make(e.shape,{values:t})},e.prototype.eluDer=function(e,t){this.assertNotComplex([e,t],"eluDer");for(var n=new Float32Array(t.size),r=this.readSync(t.dataId),i=this.readSync(e.dataId),o=0;o<r.length;++o){var a=r[o];n[o]=a>=1?i[o]:i[o]*(a+1)}return PH.make(t.shape,{values:n})},e.prototype.selu=function(e){this.assertNotComplex(e,"selu");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=n[r];t[r]=i>=0?1.0507009873554805*i:1.7580993408473768*(Math.exp(i)-1)}return PH.make(e.shape,{values:t})},e.prototype.clip=function(e,t,n){this.assertNotComplex(e,"clip");for(var r=new Float32Array(e.size),i=this.readSync(e.dataId),o=0;o<i.length;++o){var a=i[o];r[o]=a>n?n:a<t?t:a}return PH.make(e.shape,{values:r})},e.prototype.abs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.abs(n[r]);return PH.make(e.shape,{values:t})},e.prototype.complexAbs=function(e){for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<e.size;++r){var i=n[2*r],o=n[2*r+1];t[r]=Math.hypot(i,o)}return PH.make(e.shape,{values:t})},e.prototype.int=function(e){this.assertNotComplex(e,"int");for(var t=new Int32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=n[r];return PH.make(e.shape,{values:t},"int32")},e.prototype.sigmoid=function(e){this.assertNotComplex(e,"sigmoid");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=1/(1+Math.exp(-n[r]));return PH.make(e.shape,{values:t})},e.prototype.softplus=function(e){this.assertNotComplex(e,"softplus");for(var t=Math.log(1.1920928955078125e-7)+2,n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var o,a=r[i]>-t,s=r[i]<t,l=Math.exp(r[i]);o=s?l:a?r[i]:Math.log(1+l),n[i]=o}return PH.make(e.shape,{values:n})},e.prototype.sin=function(e){this.assertNotComplex(e,"sin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sin(n[r]);return PH.make(e.shape,{values:t})},e.prototype.cos=function(e){this.assertNotComplex(e,"cos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cos(n[r]);return PH.make(e.shape,{values:t})},e.prototype.tan=function(e){this.assertNotComplex(e,"tan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.tan(n[r]);return PH.make(e.shape,{values:t})},e.prototype.asin=function(e){this.assertNotComplex(e,"asin");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asin(n[r]);return PH.make(e.shape,{values:t})},e.prototype.acos=function(e){this.assertNotComplex(e,"acos");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acos(n[r]);return PH.make(e.shape,{values:t})},e.prototype.atan=function(e){this.assertNotComplex(e,"atan");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atan(n[r]);return PH.make(e.shape,{values:t})},e.prototype.atan2=function(e,t){return this.assertNotComplex([e,t],"atan2"),this.broadcastedBinaryOp(e,t,e.dtype,(function(e,t){return Math.atan2(e,t)}))},e.prototype.sinh=function(e){this.assertNotComplex(e,"sinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.sinh(n[r]);return PH.make(e.shape,{values:t})},e.prototype.cosh=function(e){this.assertNotComplex(e,"cosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.cosh(n[r]);return PH.make(e.shape,{values:t})},e.prototype.tanh=function(e){this.assertNotComplex(e,"tanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=GW(n[r]);return PH.make(e.shape,{values:t})},e.prototype.asinh=function(e){this.assertNotComplex(e,"asinh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.asinh(n[r]);return PH.make(e.shape,{values:t})},e.prototype.acosh=function(e){this.assertNotComplex(e,"acosh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.acosh(n[r]);return PH.make(e.shape,{values:t})},e.prototype.atanh=function(e){this.assertNotComplex(e,"atanh");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r)t[r]=Math.atanh(n[r]);return PH.make(e.shape,{values:t})},e.prototype.erf=function(e){this.assertNotComplex(e,"erf");for(var t=new Float32Array(e.size),n=this.readSync(e.dataId),r=0;r<n.length;++r){var i=Math.sign(n[r]),o=Math.abs(n[r]),a=1/(1+.3275911*o);t[r]=i*(1-((((1.061405429*a-1.453152027)*a+1.421413741)*a-.284496736)*a+.254829592)*a*Math.exp(-o*o))}return PH.make(e.shape,{values:t})},e.prototype.step=function(e,t){void 0===t&&(t=0),this.assertNotComplex(e,"step");for(var n=new Float32Array(e.size),r=this.readSync(e.dataId),i=0;i<r.length;++i){var o=r[i];isNaN(o)?n[i]=NaN:n[i]=o>0?1:t}return PH.make(e.shape,{values:n})},e.prototype.fusedConv2d=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,o=e.activation,a=e.preluActivationWeights,s=this.conv2d(t,n,r);return i&&(s=this.add(s,i)),o&&(s=n4(this,s,o,a)),s},e.prototype.conv2d=function(e,t,n){this.assertNotComplex([e,t],"conv2d");for(var r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,l=n.padInfo.top,u="channelsLast"===n.dataFormat,c=aY(n.outShape,e.dtype),d=e.strides[0],h=u?e.strides[1]:e.strides[2],p=u?e.strides[2]:1,f=u?1:e.strides[1],m=c.strides[0],g=u?c.strides[1]:c.strides[2],v=u?c.strides[2]:1,y=u?1:c.strides[1],b=this.readSync(e.dataId),x=this.readSync(t.dataId),w=c.values,k=0;k<n.batchSize;++k)for(var _=k*d,E=k*m,C=0;C<n.outHeight;++C)for(var I=E+C*g,S=C*n.strideHeight-l,N=0;N<r;N++){var T=S+N*o;if(!(T<0||T>=n.inHeight))for(var A=N*t.strides[0],R=_+T*h,D=0;D<n.outWidth;++D)for(var O=I+D*v,P=D*n.strideWidth-s,L=0;L<i;L++){var M=P+L*a;if(!(M<0||M>=n.inWidth))for(var F=R+M*p,j=A+L*t.strides[1],B=0;B<n.inChannels;++B){for(var V=b[F+B*f],z=0;z<n.outChannels;++z)w[O+z*y]+=V*x[j+z];j+=n.outChannels}}}return c.toTensor()},e.prototype.conv3d=function(e,t,n){for(var r=n.filterDepth,i=n.filterHeight,o=n.filterWidth,a=n.dilationDepth,s=n.dilationHeight,l=n.dilationWidth,u=n.padInfo.front,c=n.padInfo.left,d=n.padInfo.top,h=aY(n.outShape,e.dtype),p=this.readSync(e.dataId),f=this.readSync(t.dataId),m=h.values,g=0;g<n.batchSize;++g)for(var v=g*e.strides[0],y=g*h.strides[0],b=0;b<n.outDepth;++b)for(var x=y+b*h.strides[1],w=b*n.strideDepth-u,k=0;k<r;k++){var _=w+k*a;if(!(_<0||_>=n.inDepth))for(var E=k*t.strides[0],C=v+_*e.strides[1],I=0;I<n.outHeight;++I)for(var S=x+I*h.strides[2],N=I*n.strideHeight-d,T=0;T<i;T++){var A=N+T*s;if(!(A<0||A>=n.inHeight))for(var R=E+T*t.strides[1],D=C+A*e.strides[2],O=0;O<n.outWidth;++O)for(var P=S+O*n.outChannels,L=O*n.strideWidth-c,M=0;M<o;M++){var F=L+M*l;if(!(F<0||F>=n.inWidth))for(var j=R+M*t.strides[2],B=D+F*n.inChannels,V=j,z=0;z<n.inChannels;++z){for(var U=p[B+z],$=0;$<n.outChannels;++$)m[P+$]+=U*f[V+$];V+=n.outChannels}}}}return h.toTensor()},e.prototype.conv2dDerInput=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerInput");for(var r=aY(n.inShape,"float32"),i=r.values,o=this.readSync(e.dataId),a=this.readSync(t.dataId),s=t.strides,l=s[0],u=s[1],c=s[2],d=n.batchSize,h=n.filterHeight,p=n.filterWidth,f=n.inChannels,m=n.inHeight,g=n.inWidth,v=n.outChannels,y=n.outHeight,b=n.outWidth,x=n.strideHeight,w=n.strideWidth,k=n.dataFormat,_=h-1-n.padInfo.top,E=p-1-n.padInfo.left,C="channelsLast"===k,I=r.strides[0],S=C?r.strides[1]:r.strides[2],N=C?r.strides[2]:1,T=C?1:r.strides[1],A=e.strides[0],R=C?e.strides[1]:e.strides[2],D=C?e.strides[2]:1,O=C?1:e.strides[1],P=0;P<d;++P)for(var L=0;L<f;++L)for(var M=0;M<m;++M)for(var F=M-_,j=Math.max(0,Math.ceil(F/x)),B=Math.min(y,(h+F)/x),V=0;V<g;++V){for(var z=V-E,U=Math.max(0,Math.ceil(z/w)),$=Math.min(b,(p+z)/w),q=0,W=j;W<B;++W)for(var H=W*x-F,G=U;G<$;++G)for(var K=A*P+R*W+D*G,Y=l*(h-1-H)+u*(p-1-(G*w-z))+c*L,X=0;X<v;++X)q+=o[K+O*X]*a[Y+X];i[I*P+S*M+N*V+T*L]=q}return r.toTensor()},e.prototype.conv3dDerInput=function(e,t,n){for(var r=aY(n.inShape,"float32"),i=r.values,o=r.strides,a=o[0],s=o[1],l=o[2],u=o[3],c=this.readSync(e.dataId),d=e.strides,h=d[0],p=d[1],f=d[2],m=d[3],g=this.readSync(t.dataId),v=t.strides,y=v[0],b=v[1],x=v[2],w=v[3],k=n.batchSize,_=n.filterDepth,E=n.filterHeight,C=n.filterWidth,I=n.inChannels,S=n.inDepth,N=n.inHeight,T=n.inWidth,A=n.outChannels,R=n.outDepth,D=n.outHeight,O=n.outWidth,P=n.strideDepth,L=n.strideHeight,M=n.strideWidth,F=_-1-n.padInfo.front,j=E-1-n.padInfo.top,B=C-1-n.padInfo.left,V=0;V<k;++V)for(var z=0;z<I;++z)for(var U=0;U<S;++U)for(var $=U-F,q=Math.max(0,Math.ceil($/P)),W=Math.min(R,(_+$)/P),H=0;H<N;++H)for(var G=H-j,K=Math.max(0,Math.ceil(G/L)),Y=Math.min(D,(E+G)/L),X=0;X<T;++X){for(var Q=X-B,J=Math.max(0,Math.ceil(Q/M)),Z=Math.min(O,(C+Q)/M),ee=0,te=q;te<W;++te)for(var ne=te*P-$,re=K;re<Y;++re)for(var ie=re*L-G,oe=J;oe<Z;++oe)for(var ae=h*V+p*te+f*re+m*oe,se=y*(_-1-ne)+b*(E-1-ie)+x*(C-1-(oe*M-Q))+w*z,le=0;le<A;++le)ee+=c[ae+le]*g[se+le];i[a*V+s*U+l*H+u*X+z]=ee}return r.toTensor()},e.prototype.conv2dDerFilter=function(e,t,n){this.assertNotComplex([e,t],"conv2dDerFilter");for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s="channelsLast"===n.dataFormat,l=aY(n.filterShape,"float32"),u=n.padInfo.left,c=n.padInfo.top,d=this.bufferSync(e),h=this.bufferSync(t),p=0;p<o;++p)for(var f=Math.max(0,Math.ceil((c-p)/r)),m=Math.min(n.outHeight,(n.inHeight+c-p)/r),g=0;g<a;++g)for(var v=Math.max(0,Math.ceil((u-g)/i)),y=Math.min(n.outWidth,(n.inWidth+u-g)/i),b=0;b<n.inChannels;++b)for(var x=0;x<n.outChannels;++x){for(var w=0,k=0;k<n.batchSize;++k)for(var _=f;_<m;++_)for(var E=p+_*r-c,C=v;C<y;++C){var I=g+C*i-u;w+=s?d.get(k,E,I,b)*h.get(k,_,C,x):d.get(k,b,E,I)*h.get(k,x,_,C)}l.set(w,p,g,b,x)}return l.toTensor()},e.prototype.conv3dDerFilter=function(e,t,n){for(var r=n.strideDepth,i=n.strideHeight,o=n.strideWidth,a=n.filterDepth,s=n.filterHeight,l=n.filterWidth,u=aY(n.filterShape,"float32"),c=u.values,d=u.strides,h=d[0],p=d[1],f=d[2],m=d[3],g=this.readSync(t.dataId),v=t.strides,y=v[0],b=v[1],x=v[2],w=v[3],k=this.readSync(e.dataId),_=e.strides,E=_[0],C=_[1],I=_[2],S=_[3],N=n.padInfo.front,T=n.padInfo.left,A=n.padInfo.top,R=0;R<a;++R)for(var D=Math.max(0,Math.ceil((N-R)/r)),O=Math.min(n.outDepth,(n.inDepth+N-R)/r),P=R*h,L=0;L<s;++L)for(var M=Math.max(0,Math.ceil((A-L)/i)),F=Math.min(n.outHeight,(n.inHeight+A-L)/i),j=L*p+P,B=0;B<l;++B)for(var V=Math.max(0,Math.ceil((T-B)/o)),z=Math.min(n.outWidth,(n.inWidth+T-B)/o),U=B*f+j,$=0;$<n.inChannels;++$)for(var q=$*m+U,W=0;W<n.outChannels;++W){for(var H=0,G=0;G<n.batchSize;++G)for(var K=G*E,Y=G*y,X=D;X<O;++X)for(var Q=(R+X*r-N)*C+K,J=X*b+Y,Z=M;Z<F;++Z)for(var ee=(L+Z*i-A)*I+Q,te=Z*x+J,ne=V;ne<z;++ne){var re=ne*w+te;H+=k[(B+ne*o-T)*S+ee+$]*g[re+W]}c[q+W]=H}return u.toTensor()},e.prototype.fusedDepthwiseConv2D=function(e){var t=e.input,n=e.filter,r=e.convInfo,i=e.bias,o=e.activation,a=e.preluActivationWeights,s=this.depthwiseConv2D(t,n,r);return i&&(s=this.add(s,i)),o&&(s=n4(this,s,o,a)),s},e.prototype.depthwiseConv2D=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2D");for(var r=n.filterHeight,i=n.filterWidth,o=n.dilationHeight,a=n.dilationWidth,s=n.padInfo.left,l=n.padInfo.top,u=n.outChannels/n.inChannels,c=aY(n.outShape,e.dtype),d=this.readSync(e.dataId),h=this.readSync(t.dataId),p=c.values,f=0;f<n.batchSize;++f)for(var m=f*e.strides[0],g=f*c.strides[0],v=0;v<n.outHeight;++v)for(var y=g+v*c.strides[1],b=v*n.strideHeight-s,x=0;x<r;++x){var w=b+x*o;if(!(w<0||w>=n.inHeight))for(var k=x*t.strides[0],_=m+w*e.strides[1],E=0;E<n.outWidth;++E)for(var C=y+E*c.strides[2],I=E*n.strideWidth-l,S=0;S<i;++S){var N=I+S*a;if(!(N<0||N>=n.inWidth))for(var T=k+S*t.strides[1],A=_+N*n.inChannels,R=C,D=T,O=0;O<n.inChannels;++O){for(var P=d[A+O],L=0;L<u;++L)p[R+L]+=P*h[D+L];R+=u,D+=u}}}return c.toTensor()},e.prototype.depthwiseConv2DDerInput=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerInput");for(var r=aY(n.inShape,"float32"),i=r.values,o=r.strides,a=o[0],s=o[1],l=o[2],u=this.readSync(e.dataId),c=e.strides,d=c[0],h=c[1],p=c[2],f=this.readSync(t.dataId),m=t.strides,g=m[0],v=m[1],y=m[2],b=n.batchSize,x=n.filterHeight,w=n.filterWidth,k=n.inChannels,_=n.inHeight,E=n.inWidth,C=n.outChannels,I=n.outHeight,S=n.outWidth,N=n.strideHeight,T=n.strideWidth,A=x-1-n.padInfo.top,R=w-1-n.padInfo.left,D=C/k,O=0;O<b;++O)for(var P=0;P<k;++P)for(var L=0;L<_;++L)for(var M=L-A,F=Math.max(0,Math.ceil(M/N)),j=Math.min(I,(x+M)/N),B=0;B<E;++B){for(var V=B-R,z=Math.max(0,Math.ceil(V/T)),U=Math.min(S,(w+V)/T),$=0,q=F;q<j;++q)for(var W=q*N-M,H=z;H<U;++H)for(var G=d*O+h*q+p*H,K=g*(x-1-W)+v*(w-1-(H*T-V))+y*P,Y=0;Y<D;++Y)$+=u[G+(P*D+Y)]*f[K+Y];i[a*O+s*L+l*B+P]=$}return r.toTensor()},e.prototype.depthwiseConv2DDerFilter=function(e,t,n){this.assertNotComplex([e,t],"depthwiseConv2DDerFilter");for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s=aY(n.filterShape,"float32"),l=n.padInfo.left,u=n.padInfo.top,c=n.outChannels/n.inChannels,d=this.bufferSync(e),h=this.bufferSync(t),p=0;p<o;++p)for(var f=Math.max(0,Math.ceil((u-p)/r)),m=Math.min(n.outHeight,(n.inHeight+u-p)/r),g=0;g<a;++g)for(var v=Math.max(0,Math.ceil((l-g)/i)),y=Math.min(n.outWidth,(n.inWidth+l-g)/i),b=0;b<n.outChannels;++b){for(var x=Math.trunc(b/c),w=b%c,k=0,_=0;_<n.batchSize;++_)for(var E=f;E<m;++E)for(var C=p+E*r-u,I=v;I<y;++I){var S=g+I*i-l;k+=d.get(_,C,S,x)*h.get(_,E,I,b)}s.set(k,p,g,x,w)}return s.toTensor()},e.prototype.tile=function(e,t){return this.assertNotComplex(e,"tile"),SX(this.bufferSync(e),t)},e.prototype.pad=function(e,t,n){this.assertNotComplex(e,"pad");var r=t.map((function(t,n){return t[0]+e.shape[n]+t[1]})),i=t.map((function(e){return e[0]})),o=this.bufferSync(e),a=aY(r,e.dtype);0!==n&&a.values.fill(n);for(var s=0;s<e.size;s++){var l=o.indexToLoc(s),u=l.map((function(e,t){return e+i[t]}));a.set.apply(a,[o.get.apply(o,l)].concat(u))}return a.toTensor()},e.prototype.transpose=function(e,t){this.assertNotComplex(e,"transpose");for(var n=new Array(e.rank),r=0;r<n.length;r++)n[r]=e.shape[t[r]];var i=this.readSync(e.dataId),o=aY(n,e.dtype),a=this.bufferSync(e);for(r=0;r<e.size;++r){for(var s=a.indexToLoc(r),l=new Array(s.length),u=0;u<l.length;u++)l[u]=s[t[u]];var c=o.locToIndex(l);o.values[c]=i[r]}return o.toTensor()},e.prototype.gather=function(e,t,n){this.assertNotComplex([e,t],"gather");var r=e.shape.slice(),i=this.readSync(t.dataId);r[n]=i.length;for(var o=aY(r,e.dtype),a=this.bufferSync(e),s=0;s<o.size;++s){var l=o.indexToLoc(s),u=l.slice();u[n]=i[l[n]];var c=a.locToIndex(u);o.values[s]=a.values[c]}return o.toTensor()},e.prototype.batchToSpaceND=function(e,t,n){this.assertNotComplex([e],"batchToSpaceND");var r=t.reduce((function(e,t){return e*t})),i=PY(e.shape,t,r),o=LY(i.length,t.length),a=MY(e.shape,t,r),s=FY(n,t.length),l=jY(a,n,t.length);return e.reshape(i).transpose(o).reshape(a).slice(s,l)},e.prototype.spaceToBatchND=function(e,t,n){this.assertNotComplex([e],"spaceToBatchND");var r=t.reduce((function(e,t){return e*t})),i=[[0,0]];i.push.apply(i,n);for(var o=1+t.length;o<e.shape.length;++o)i.push([0,0]);var a=e.pad(i),s=PY(a.shape,t,r,!1),l=LY(s.length,t.length,!1),u=MY(a.shape,t,r,!1);return a.reshape(s).transpose(l).reshape(u)},e.prototype.pool=function(e,t,n){this.assertNotComplex(e,"pool");for(var r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,l=t.effectiveFilterWidth,u=t.padInfo.top,c=t.padInfo.left,d="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,h=this.readSync(e.dataId),p=aY(t.outShape,e.dtype),f=p.values,m=t.outShape[1]*t.outShape[2]*t.outShape[3],g=t.outShape[2]*t.outShape[3],v=t.outShape[3],y=0;y<t.batchSize;++y)for(var b=y*m,x=y*e.strides[0],w=0;w<t.inChannels;++w)for(var k=0;k<t.outHeight;++k)for(var _=k*r-u,E=Math.max(0,_),C=Math.min(t.inHeight,s+_),I=b+k*g,S=0;S<t.outWidth;++S){for(var N=S*i-c,T=Math.max(0,N),A=Math.min(t.inWidth,l+N),R=d,D=0,O=0,P=E;P<C;P+=o){for(var L=x+P*e.strides[1],M=T;M<A;M+=a){var F=h[L+M*e.strides[2]+w];"max"===n&&F>R?R=F:"avg"===n&&(D+=F,O++)}if(isNaN(R))break}f[I+S*v+w]="avg"===n?D/O:R}return p.toTensor()},e.prototype.maxPool=function(e,t){return this.pool(e,t,"max")},e.prototype.maxPoolPositions=function(e,t){for(var n=aY(t.outShape,"int32"),r=t.strideHeight,i=t.strideWidth,o=t.dilationHeight,a=t.dilationWidth,s=t.effectiveFilterHeight,l=t.effectiveFilterWidth,u=t.padInfo.top,c=t.padInfo.left,d=this.bufferSync(e),h=0;h<t.batchSize;++h)for(var p=0;p<t.inChannels;++p)for(var f=0;f<t.outHeight;++f){for(var m=f*r-u,g=m;g<0;)g+=o;for(var v=Math.min(t.inHeight,s+m),y=0;y<t.outWidth;++y){for(var b=y*i-c,x=b;x<0;)x+=a;for(var w=Math.min(t.inWidth,l+b),k=Number.NEGATIVE_INFINITY,_=-1,E=g;E<v;E+=o)for(var C=E-m,I=x;I<w;I+=a){var S=I-b,N=d.get(h,E,I,p);N>k&&(k=N,_=C*l+S)}n.set(_,h,f,y,p)}}return n.toTensor()},e.prototype.maxPoolBackprop=function(e,t,n,r){this.assertNotComplex([t,n],"maxPoolBackprop");for(var i=this.maxPoolPositions(t,r),o=r.strideHeight,a=r.strideWidth,s=r.dilationHeight,l=r.dilationWidth,u=r.effectiveFilterHeight,c=r.effectiveFilterWidth,d=c-1-r.padInfo.left,h=u-1-r.padInfo.top,p=aY(t.shape,"float32"),f=this.bufferSync(i),m=this.bufferSync(e),g=0;g<r.batchSize;++g)for(var v=0;v<r.inChannels;++v)for(var y=0;y<r.inHeight;++y)for(var b=0;b<r.inWidth;++b){for(var x=y-h,w=b-d,k=0,_=0;_<u;_+=s){var E=(x+_)/o;if(!(E<0||E>=r.outHeight||Math.floor(E)!==E))for(var C=0;C<c;C+=l){var I=(w+C)/a;if(!(I<0||I>=r.outWidth||Math.floor(I)!==I)){var S=u*c-1-f.get(g,E,I,v)===_*c+C?1:0;0!==S&&(k+=m.get(g,E,I,v)*S)}}}p.set(k,g,y,b,v)}return p.toTensor()},e.prototype.avgPoolBackprop=function(e,t,n){this.assertNotComplex([e,t],"avgPoolBackprop");for(var r=n.strideHeight,i=n.strideWidth,o=n.filterHeight,a=n.filterWidth,s=n.dilationHeight,l=n.dilationWidth,u=n.effectiveFilterHeight,c=n.effectiveFilterWidth,d=c-1-n.padInfo.left,h=u-1-n.padInfo.top,p=aY(t.shape,"float32"),f=1/(o*a),m=this.bufferSync(e),g=0;g<n.batchSize;++g)for(var v=0;v<n.inChannels;++v)for(var y=0;y<n.inHeight;++y)for(var b=0;b<n.inWidth;++b){for(var x=y-h,w=b-d,k=0,_=0;_<u;_+=s){var E=(x+_)/r;if(!(E<0||E>=n.outHeight||Math.floor(E)!==E))for(var C=0;C<c;C+=l){var I=(w+C)/i;I<0||I>=n.outWidth||Math.floor(I)!==I||(k+=m.get(g,E,I,v))}}p.set(k*f,g,y,b,v)}return p.toTensor()},e.prototype.pool3d=function(e,t,n){this.assertNotComplex(e,"pool3d");for(var r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left,m="max"===n?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,g=this.readSync(e.dataId),v=aY(t.outShape,e.dtype),y=v.values,b=t.outShape[1]*t.outShape[2]*t.outShape[3]*t.outShape[4],x=t.outShape[2]*t.outShape[3]*t.outShape[4],w=t.outShape[3]*t.outShape[4],k=t.outShape[4],_=0;_<t.batchSize;++_)for(var E=_*b,C=_*e.strides[0],I=0;I<t.inChannels;++I)for(var S=0;S<t.outDepth;++S){for(var N=S*r-h,T=N;T<0;)T+=a;for(var A=Math.min(t.inDepth,u+N),R=E+S*x,D=0;D<t.outHeight;++D){for(var O=D*i-p,P=O;P<0;)P+=s;for(var L=Math.min(t.inHeight,c+O),M=R+D*w,F=0;F<t.outWidth;++F){for(var j=F*o-f,B=j;B<0;)B+=l;for(var V=Math.min(t.inWidth,d+j),z=M+F*k,U=m,$=0,q=0,W=T;W<A;W+=a){for(var H=C+W*e.strides[1],G=P;G<L;G+=s){for(var K=H+G*e.strides[2],Y=B;Y<V;Y+=l){var X=g[K+Y*e.strides[3]+I];if("max"===n&&X>U?U=X:"avg"===n&&($+=X,q++),isNaN(U))break}if(isNaN(U))break}if(isNaN(U))break}y[z+I]="avg"===n?$/q:U}}}return v.toTensor()},e.prototype.avgPool3d=function(e,t){return this.assertNotComplex(e,"avgPool3d"),this.pool3d(e,t,"avg").toFloat()},e.prototype.avgPool3dBackprop=function(e,t,n){this.assertNotComplex([e,t],"avgPool3dBackprop");for(var r=n.strideDepth,i=n.strideHeight,o=n.strideWidth,a=n.filterDepth,s=n.filterHeight,l=n.filterWidth,u=n.dilationDepth,c=n.dilationHeight,d=n.dilationWidth,h=n.effectiveFilterDepth,p=n.effectiveFilterHeight,f=n.effectiveFilterWidth,m=h-1-n.padInfo.front,g=f-1-n.padInfo.left,v=p-1-n.padInfo.top,y=aY(t.shape,"float32"),b=1/(a*s*l),x=this.bufferSync(e),w=0;w<n.batchSize;++w)for(var k=0;k<n.inChannels;++k)for(var _=0;_<n.inDepth;++_)for(var E=0;E<n.inHeight;++E)for(var C=0;C<n.inWidth;++C){for(var I=_-m,S=E-v,N=C-g,T=0,A=0;A<h;A+=u){var R=(I+A)/r;if(!(R<0||R>=n.outDepth||Math.floor(R)!==R))for(var D=0;D<p;D+=c){var O=(S+D)/i;if(!(O<0||O>=n.outHeight||Math.floor(O)!==O))for(var P=0;P<f;P+=d){var L=(N+P)/o;L<0||L>=n.outWidth||Math.floor(L)!==L||(T+=x.get(w,R,O,L,k))}}}y.set(T*b,w,_,E,C,k)}return y.toTensor()},e.prototype.maxPool3d=function(e,t){return this.assertNotComplex(e,"maxPool3d"),this.pool3d(e,t,"max").toFloat()},e.prototype.maxPool3dPositions=function(e,t){for(var n=aY(t.outShape,"int32"),r=t.strideDepth,i=t.strideHeight,o=t.strideWidth,a=t.dilationDepth,s=t.dilationHeight,l=t.dilationWidth,u=t.effectiveFilterDepth,c=t.effectiveFilterHeight,d=t.effectiveFilterWidth,h=t.padInfo.front,p=t.padInfo.top,f=t.padInfo.left,m=this.bufferSync(e),g=0;g<t.batchSize;++g)for(var v=0;v<t.inChannels;++v)for(var y=0;y<t.outDepth;++y){for(var b=y*r-h,x=b;x<0;)x+=a;for(var w=Math.min(t.inDepth,u+b),k=0;k<t.outHeight;++k){for(var _=k*i-p,E=_;E<0;)E+=s;for(var C=Math.min(t.inHeight,c+_),I=0;I<t.outWidth;++I){for(var S=I*o-f,N=S;N<0;)N+=l;for(var T=Math.min(t.inWidth,d+S),A=Number.NEGATIVE_INFINITY,R=-1,D=x;D<w;D+=a)for(var O=D-b,P=E;P<C;P+=s)for(var L=P-_,M=N;M<T;M+=l){var F=M-S,j=m.get(g,D,P,M,v);j>=A&&(A=j,R=O*c*d+L*c+F)}n.set(R,g,y,k,I,v)}}}return n.toTensor()},e.prototype.maxPool3dBackprop=function(e,t,n,r){this.assertNotComplex([t,n],"maxPool3dBackprop");for(var i=this.maxPool3dPositions(t,r),o=r.strideDepth,a=r.strideHeight,s=r.strideWidth,l=r.dilationDepth,u=r.dilationHeight,c=r.dilationWidth,d=r.effectiveFilterDepth,h=r.effectiveFilterHeight,p=r.effectiveFilterWidth,f=d-1-r.padInfo.front,m=p-1-r.padInfo.left,g=h-1-r.padInfo.top,v=aY(t.shape,"float32"),y=this.bufferSync(i),b=this.bufferSync(e),x=0;x<r.batchSize;++x)for(var w=0;w<r.inChannels;++w)for(var k=0;k<r.inDepth;++k)for(var _=0;_<r.inHeight;++_)for(var E=0;E<r.inWidth;++E){for(var C=k-f,I=_-g,S=E-m,N=0,T=0;T<d;T+=l){var A=(C+T)/o;if(!(A<0||A>=r.outDepth||Math.floor(A)!==A))for(var R=0;R<h;R+=u){var D=(I+R)/a;if(!(D<0||D>=r.outHeight||Math.floor(D)!==D))for(var O=0;O<p;O+=c){var P=(S+O)/s;if(!(P<0||P>=r.outWidth||Math.floor(P)!==P)){var L=d*h*p-1-y.get(x,A,D,P,w)===T*h*p+R*p+O?1:0;0!==L&&(N+=b.get(x,A,D,P,w)*L)}}}}v.set(N,x,k,_,E,w)}return v.toTensor()},e.prototype.cast=function(e,t){return gX(e,t,this)},e.prototype.reshape=function(e,t){return vX(e,t)},e.prototype.avgPool=function(e,t){return this.assertNotComplex(e,"avgPool"),this.pool(e,t,"avg").toFloat()},e.prototype.resizeBilinear=function(e,t,n,r){this.assertNotComplex(e,"resizeBilinear");for(var i=e.shape,o=i[0],a=i[1],s=i[2],l=i[3],u=this.readSync(e.dataId),c=new Float32Array(qW([o,t,n,l])),d=[r&&t>1?a-1:a,r&&n>1?s-1:s],h=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=0,f=d[0]/h[0],m=d[1]/h[1],g=0;g<o;g++)for(var v=0;v<t;v++)for(var y=f*v,b=Math.floor(y),x=y-b,w=Math.min(a-1,Math.ceil(y)),k=g*e.strides[0]+b*e.strides[1],_=g*e.strides[0]+w*e.strides[1],E=0;E<n;E++)for(var C=m*E,I=Math.floor(C),S=C-I,N=Math.min(s-1,Math.ceil(C)),T=k+I*e.strides[2],A=_+I*e.strides[2],R=k+ +N*e.strides[2],D=_+N*e.strides[2],O=0;O<l;O++){var P=u[T+O],L=u[A+O],M=P+(u[R+O]-P)*S,F=M+(L+(u[D+O]-L)*S-M)*x;c[p++]=F}return IK(c,[o,t,n,l])},e.prototype.resizeBilinearBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeBilinearBackprop");for(var r=t.shape,i=r[0],o=r[1],a=r[2],s=r[3],l=e.shape,u=l[1],c=l[2],d=new Float32Array(i*o*a*s),h=[n&&u>1?o-1:o,n&&c>1?a-1:a],p=[n&&u>1?u-1:u,n&&c>1?c-1:c],f=h[0]/p[0],m=h[1]/p[1],g=this.readSync(e.dataId),v=0,y=0;y<i;y++)for(var b=y*t.strides[0],x=0;x<u;x++)for(var w=x*f,k=Math.floor(w),_=Math.min(Math.ceil(w),o-1),E=b+k*t.strides[1],C=b+_*t.strides[1],I=w-k,S=1-I,N=0;N<c;N++)for(var T=N*m,A=Math.floor(T),R=Math.min(Math.ceil(T),a-1),D=T-A,O=1-D,P=E+A*t.strides[2],L=E+R*t.strides[2],M=C+A*t.strides[2],F=C+R*t.strides[2],j=S*O,B=S*D,V=I*O,z=I*D,U=0;U<s;U++){var $=g[v++];d[P+U]+=$*j,d[L+U]+=$*B,d[M+U]+=$*V,d[F+U]+=$*z}return DK(d,[i,a,o,s],t.dtype)},e.prototype.resizeNearestNeighbor=function(e,t,n,r){this.assertNotComplex(e,"resizeNearestNeighbor");for(var i=e.shape,o=i[0],a=i[1],s=i[2],l=i[3],u=this.readSync(e.dataId),c=new Float32Array(o*t*n*l),d=[r&&t>1?a-1:a,r&&n>1?s-1:s],h=[r&&t>1?t-1:t,r&&n>1?n-1:n],p=d[0]/h[0],f=d[1]/h[1],m=0,g=0;g<o;g++)for(var v=g*e.strides[0],y=0;y<t;y++)for(var b=p*y,x=v+Math.min(a-1,r?Math.round(b):Math.floor(b))*e.strides[1],w=0;w<n;w++)for(var k=f*w,_=x+Math.min(s-1,r?Math.round(k):Math.floor(k))*e.strides[2],E=0;E<l;E++){var C=u[_+E];c[m++]=C}return IK(c,[o,t,n,l],e.dtype)},e.prototype.resizeNearestNeighborBackprop=function(e,t,n){this.assertNotComplex([e,t],"resizeNearestNeighborBackprop");for(var r=t.shape,i=r[0],o=r[1],a=r[2],s=r[3],l=e.shape,u=l[1],c=l[2],d=new Float32Array(i*o*a*s),h=this.readSync(e.dataId),p=[n&&u>1?o-1:o,n&&c>1?a-1:a],f=[n&&u>1?u-1:u,n&&c>1?c-1:c],m=p[0]/f[0],g=p[1]/f[1],v=1/m,y=1/g,b=2*Math.ceil(v)+2,x=2*Math.ceil(y)+2,w=0;w<i;w++)for(var k=w*t.strides[0],_=0;_<o;_++)for(var E=k+_*t.strides[1],C=Math.floor(_*v),I=Math.floor(C-b/2),S=0;S<a;S++)for(var N=E+S*t.strides[2],T=Math.floor(S*y),A=Math.floor(T-x/2),R=0;R<s;R++){for(var D=0,O=0;O<b;O++){var P=O+I;if(!(P<0||P>=u)){var L=k+P*e.strides[1],M=P*m;if(_===Math.min(o-1,n?Math.round(M):Math.floor(M)))for(var F=0;F<x;F++){var j=F+A;if(!(j<0||j>=c)){var B=L+j*e.strides[2],V=j*g;S===Math.min(a-1,n?Math.round(V):Math.floor(V))&&(D+=h[B+R])}}}}d[N+R]=D}return DK(d,t.shape,t.dtype)},e.prototype.batchNormalization=function(e,t,n,r,i,o){this.assertNotComplex([e,t,n,i,o],"batchNorm");for(var a=this.readSync(e.dataId),s=this.readSync(t.dataId),l=this.readSync(n.dataId),u=i?this.readSync(i.dataId):new Float32Array([1]),c=o?this.readSync(o.dataId):new Float32Array([0]),d=new Float32Array(a.length),h=c.length,p=u.length,f=l.length,m=s.length,g=0,v=0,y=0,b=0,x=0;x<a.length;++x)d[x]=c[g++]+(a[x]-s[v++])*u[y++]/Math.sqrt(l[b++]+r),g>=h&&(g=0),v>=m&&(v=0),y>=p&&(y=0),b>=f&&(b=0);return DK(d,e.shape)},e.prototype.localResponseNormalization4D=function(e,t,n,r,i){this.assertNotComplex(e,"localResponseNormalization4D");var o=e.shape[3],a=o-1,s=this.readSync(e.dataId),l=e.size,u=new Float32Array(l);function c(e){for(var n=e%o,r=e-n+Math.max(0,n-t),i=e-n+Math.min(n+t,a),l=0;r<=i;r++){var u=s[r];l+=u*u}return l}for(var d=0;d<l;d++){var h=c(d),p=s[d]*Math.pow(n+r*h,-i);u[d]=p}return DK(u,e.shape)},e.prototype.LRNGrad=function(e,t,n,r,i,o,a){this.assertNotComplex(e,"LRNGrad");for(var s=e.shape[3],l=this.readSync(e.dataId),u=this.readSync(t.dataId),c=this.readSync(n.dataId),d=new Float32Array(e.size),h=e.size,p=0;p<h;p++){for(var f=p%s,m=p-f+Math.max(0,f-r),g=p-f+Math.min(s,f+r+1),v=0,y=m;y<g;y++)v+=Math.pow(u[y],2);for(v=o*v+i,y=m;y<g;y++){var b=-2*o*a*u[y]*c[p]/v;p===y&&(b+=Math.pow(v,-a)),b*=l[p],d[y]+=b}}return DK(d,e.shape)},e.prototype.multinomial=function(e,t,n,r){this.assertNotComplex(e,"multinomial");for(var i=t?e:QY(e),o=i.shape[0],a=i.shape[1],s=MK([o,n],"int32"),l=this.readSync(s.dataId),u=this.readSync(i.dataId),c=0;c<o;++c){var d=c*a,h=new Float32Array(a-1);h[0]=u[d];for(var p=1;p<h.length;++p)h[p]=h[p-1]+u[d+p];for(var f=nY(r.toString()),m=c*n,g=0;g<n;++g){var v=f();l[m+g]=h.length;for(var y=0;y<h.length;y++)if(v<h[y]){l[m+g]=y;break}}}return s},e.prototype.oneHot=function(e,t,n,r){this.assertNotComplex(e,"oneHot");var i=new Float32Array(e.size*t);i.fill(r);for(var o=this.readSync(e.dataId),a=0;a<e.size;++a)o[a]>=0&&o[a]<t&&(i[a*t+o[a]]=n);return AK(i,[e.size,t],"int32")},e.prototype.nonMaxSuppression=function(e,t,n,r,i){return this.assertNotComplex(e,"nonMaxSuppression"),EX(this.readSync(e.dataId),this.readSync(t.dataId),n,r,i)},e.prototype.fft=function(e){return this.fftBatch(e,!1)},e.prototype.ifft=function(e){return this.fftBatch(e,!0)},e.prototype.fftBatch=function(e,t){for(var n=e.shape[0],r=e.shape[1],i=aY(e.shape,"float32"),o=aY(e.shape,"float32"),a=EK(e).as2D(n,r),s=CK(e).as2D(n,r),l=0;l<n;l++)for(var u=a.slice([l,0],[1,r]),c=s.slice([l,0],[1,r]),d=_K(u,c),h=this.readSync(this.fftImpl(d,t).dataId),p=0;p<r;p++){var f=wX(h,p);i.values[l*r+p]=f.real,o.values[l*r+p]=f.imag}return _K(i.toTensor(),o.toTensor()).as2D(n,r)},e.prototype.fftImpl=function(e,t){var n=e.as1D(),r=n.size;if(this.isExponentOf2(r)){var i=this.fftRadix2(n,r,t).as2D(e.shape[0],e.shape[1]);return t&&(i=_K(EK(i).div(NK(r)),CK(i).div(NK(r)))),i}var o=this.readSync(e.dataId),a=function(e){for(var t=new Float32Array(e.length/2),n=new Float32Array(e.length/2),r=0;r<e.length;r+=2)t[r/2]=e[r],n[r/2]=e[r+1];return{real:t,imag:n}}(this.fourierTransformByMatmul(o,r,t));return _K(a.real,a.imag).as2D(e.shape[0],e.shape[1])},e.prototype.isExponentOf2=function(e){return!(e&e-1)},e.prototype.fftRadix2=function(e,t,n){if(1===t)return e;var r=this.readSync(e.dataId),i=t/2,o=function(e){for(var t=Math.ceil(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=0;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}(r),a=_K(o.real,o.imag).as1D(),s=function(e){for(var t=Math.floor(e.length/4),n=new Float32Array(t),r=new Float32Array(t),i=2;i<e.length;i+=4)n[Math.floor(i/4)]=e[i],r[Math.floor(i/4)]=e[i+1];return{real:n,imag:r}}(r),l=_K(s.real,s.imag).as1D();a=this.fftRadix2(a,i,n),l=this.fftRadix2(l,i,n);var u=function(e,t){for(var n=new Float32Array(e/2),r=new Float32Array(e/2),i=0;i<Math.ceil(e/2);i++){var o=(t?2:-2)*Math.PI*(i/e);n[i]=Math.cos(o),r[i]=Math.sin(o)}return{real:n,imag:r}}(t,n),c=_K(u.real,u.imag).mul(l),d=a.add(c),h=a.sub(c),p=EK(d).concat(EK(h)),f=CK(d).concat(CK(h));return _K(p,f).as1D()},e.prototype.fourierTransformByMatmul=function(e,t,n){for(var r=new Float32Array(2*t),i=0;i<t;i++){for(var o=0,a=0,s=0;s<t;s++){var l=_X(i*s,t,n),u=wX(e,s);o+=u.real*l.real-u.imag*l.imag,a+=u.real*l.imag+u.imag*l.real}n&&(o/=t,a/=t),kX(r,o,a,i)}return r},e.prototype.depthToSpace=function(e,t,n){VW("NHWC"===n,(function(){return"Only NHWC dataFormat supported on CPU for depthToSpace. Got "+n})),VW(t>1,(function(){return"blockSize should be > 1 for depthToSpace, but was: "+t}));for(var r=e.shape[0],i=e.shape[1],o=e.shape[2],a=e.shape[3],s=i*t,l=o*t,u=a/(t*t),c=this.readSync(e.dataId),d=new Float32Array(r*s*l*u),h=0,p=0;p<r;++p)for(var f=0;f<s;++f)for(var m=Math.floor(f/t),g=f%t,v=0;v<l;++v)for(var y=Math.floor(v/t),b=(g*t+v%t)*u,x=0;x<u;++x){var w=x+b+a*(y+o*(m+i*p));d[h++]=c[w]}return DK(d,[r,s,l,u])},e.prototype.broadcastedBinaryOp=function(e,t,n,r){var i=rX(e.shape,t.shape),o=aY(i,n),a=this.readSync(e.dataId),s=this.readSync(t.dataId),l=tX(e.shape,i),u=tX(t.shape,i),c=o.values;if(l.length+u.length===0)for(var d=0;d<c.length;++d)c[d]=r(a[d%a.length],s[d%s.length]);else{var h=this.bufferSync(e),p=this.bufferSync(t),f=function(n){var i=o.indexToLoc(n),d=i.slice(-e.rank);l.forEach((function(e){return d[e]=0}));var f=h.locToIndex(d),m=i.slice(-t.rank);u.forEach((function(e){return m[e]=0}));var g=p.locToIndex(m);c[n]=r(a[f],s[g])};for(d=0;d<c.length;++d)f(d)}return o.toTensor()},e.prototype.broadcastedBinaryComplexOp=function(e,t,n){var r=rX(e.shape,t.shape),i=aY(r,"float32"),o=aY(r,"float32"),a=this.readSync(e.dataId),s=this.readSync(t.dataId),l=tX(e.shape,r),u=tX(t.shape,r),c=i.values,d=o.values;if(l.length+u.length===0)for(var h=0;h<c.length;h++){var p=h%a.length,f=h%s.length,m=n(a[2*p],a[2*p+1],s[2*f],s[2*f+1]);c[h]=m.real,d[h]=m.imag}else{var g=this.bufferSync(this.data.get(e.dataId).complexTensors.real),v=this.bufferSync(this.data.get(t.dataId).complexTensors.real),y=function(r){var o=i.indexToLoc(r),h=o.slice(-e.rank);l.forEach((function(e){return h[e]=0}));var p=g.locToIndex(h),f=o.slice(-t.rank);u.forEach((function(e){return f[e]=0}));var m=v.locToIndex(f),y=n(a[2*p],a[2*p+1],s[2*m],s[2*m+1]);c[r]=y.real,d[r]=y.imag};for(h=0;h<c.length;h++)y(h)}return this.complex(i.toTensor(),o.toTensor())},e.prototype.split=function(e,t,n){return IX(e,t,n)},e.prototype.dispose=function(){},e.prototype.floatPrecision=function(){return 32},e.prototype.epsilon=function(){return 1e-7},e.prototype.cropAndResize=function(e,t,n,r,i,o){for(var a=e.shape,s=a[0],l=a[1],u=a[2],c=a[3],d=t.shape[0],h=r[0],p=r[1],f=aY([d,h,p,c],e.dtype),m=this.readSync(t.dataId),g=this.readSync(n.dataId),v=this.readSync(e.dataId),y=e.strides,b=f.strides,x=0;x<d;x++){var w=4*x,k=m[w],_=m[w+1],E=m[w+2],C=m[w+3],I=g[x];if(!(I>=s))for(var S=h>1?(E-k)*(l-1)/(h-1):0,N=p>1?(C-_)*(u-1)/(p-1):0,T=0;T<h;T++){var A=h>1?k*(l-1)+T*S:.5*(k+E)*(l-1);if(A<0||A>l-1)for(var R=0;R<p;R++)for(var D=0;D<c;D++){var O=D+R*b[2]+T*b[1]+x*b[0];f.values[O]=o}else if("bilinear"===i){var P=Math.floor(A),L=Math.ceil(A),M=A-P;for(R=0;R<p;R++)if((W=p>1?_*(u-1)+R*N:.5*(_+C)*(u-1))<0||W>u-1)for(D=0;D<c;D++)O=D+R*b[2]+T*b[1]+x*b[0],f.values[O]=o;else{var F=Math.floor(W),j=Math.ceil(W),B=W-F;for(D=0;D<c;D++){var V=v[O=D+F*y[2]+P*y[1]+I*y[0]],z=v[O=D+j*y[2]+P*y[1]+I*y[0]],U=v[O=D+F*y[2]+L*y[1]+I*y[0]],$=V+(z-V)*B,q=U+(v[O=D+j*y[2]+L*y[1]+I*y[0]]-U)*B;O=D+R*b[2]+T*b[1]+x*b[0],f.values[O]=$+(q-$)*M}}}else for(R=0;R<p;++R){var W;if((W=p>1?_*(u-1)+R*N:.5*(_+C)*(u-1))<0||W>u-1)for(D=0;D<c;D++)O=D+R*b[2]+T*b[1]+x*b[0],f.values[O]=o;else{var H=Math.round(W),G=Math.round(A);for(D=0;D<c;D++){var K=D+H*y[2]+G*y[1]+I*y[0],Y=D+R*b[2]+T*b[1]+x*b[0];f.values[Y]=v[K]}}}}}return f.toTensor()},e.prototype.sparseToDense=function(e,t,n,r){var i=zY(0,e,n),o=i.sliceRank,a=i.numUpdates,s=i.sliceSize,l=i.strides,u=i.outputSize;return this.scatter(e,t,n,u,s,a,o,l,r,!1)},e.prototype.gatherND=function(e,t){var n=t.shape,r=n[n.length-1],i=BY(e,t),o=i[0],a=i[1],s=i[2],l=i[3];if(0===a)return IK([],o,e.dtype);for(var u=new AH([a,s],e.dtype),c=this.readSync(t.dataId),d=this.readSync(e.dataId),h=0;h<a;h++){for(var p=[],f=0,m=0;m<r;m++){var g=c[h*r+m];f+=g*l[m],p.push(g)}if(f<0||f>=e.size/s)throw new Error("Invalid indices: "+p+" does not index into "+e.shape);for(var v=0;v<s;v++)u.values[h*s+v]=d[f*s+v]}return u.toTensor().reshape(o)},e.prototype.scatterND=function(e,t,n){var r=zY(0,e,n),i=r.sliceRank,o=r.numUpdates,a=r.sliceSize,s=r.strides,l=r.outputSize,u=NK(0);return this.scatter(e,t,n,l,a,o,i,s,u,!0)},e.prototype.fill=function(e,t,n){var r=tH(n=n||dH(t),qW(e));return r.fill(t),PH.make(e,{values:r},n)},e.prototype.onesLike=function(e){if("string"===e.dtype)throw new Error("onesLike is not supported for string tensors");return this.fill(e.shape,1,e.dtype)},e.prototype.zerosLike=function(e){var t=tH(e.dtype,qW(e.shape));return PH.make(e.shape,{values:t},e.dtype)},e.prototype.linspace=function(e,t,n){return yX(e,t,n)},e.prototype.scatter=function(e,t,n,r,i,o,a,s,l,u){var c=[r/i,i],d=this.readSync(e.dataId),h=this.readSync(t.dataId);if(0===r)return IK([],n,t.dtype);var p=new AH(c,t.dtype);p.values.fill(this.readSync(l.dataId)[0]);for(var f=0;f<o;f++){for(var m=[],g=0,v=0;v<a;v++){var y=d[f*a+v];m.push(y),g+=y*s[v]}if(g<0||g>=r/i)throw new Error("Invalid indices: "+m+" does not index into "+n);for(var b=0;b<i;b++)u?p.values[g*i+b]+=h[f*i+b]:p.values[g*i+b]=0===t.rank?h[0]:h[f*i+b]}return p.toTensor().reshape(n)},e}();JH.registerBackend("cpu",(function(){return new r4}),1);var i4=function(){function e(){}return e.prototype.fetch=function(e,t){return fetch(e,t)},e.prototype.now=function(){return performance.now()},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Browser's encoder only supports utf-8, but got "+t);return null==this.textEncoder&&(this.textEncoder=new TextEncoder),this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return new TextDecoder(t).decode(e)},e}();PW().get("IS_BROWSER")&&PW().setPlatform("browser",new i4);var o4,a4=function(){function e(){this.util=require("util"),this.textEncoder=new this.util.TextEncoder}return e.prototype.fetch=function(e,t){return null!=PW().global.fetch?PW().global.fetch(e,t):(null==o4&&(o4=require("node-fetch")),o4(e,t))},e.prototype.now=function(){var e=process.hrtime();return 1e3*e[0]+e[1]/1e6},e.prototype.encode=function(e,t){if("utf-8"!==t&&"utf8"!==t)throw new Error("Node built-in encoder only supports utf-8, but got "+t);return this.textEncoder.encode(e)},e.prototype.decode=function(e,t){return 0===e.length?"":new this.util.TextDecoder(t).decode(e)},e}();PW().get("IS_NODE")&&PW().setPlatform("node",new a4);var s4={float32:4,int32:4,uint16:2,uint8:1,bool:1},l4=4;function u4(e,t){for(var n={},r=0,i=function(t){var i=t.name,o=t.dtype,a=t.shape,s=qW(a),l=void 0;if("quantization"in t){var u=t.quantization;if("uint8"!==u.dtype&&"uint16"!==u.dtype)throw new Error("Weight "+t.name+" has unknown quantization dtype "+u.dtype+". Supported quantization dtypes are: 'uint8' and 'uint16'.");var c=s4[u.dtype],d=e.slice(r,r+s*c),h="uint8"===u.dtype?new Uint8Array(d):new Uint16Array(d);if("float32"===o)l=Float32Array.from(h,(function(e){return e*u.scale+u.min}));else{if("int32"!==o)throw new Error("Unsupported dtype in weight '"+i+"': "+o);l=Int32Array.from(h,(function(e){return Math.round(e*u.scale+u.min)}))}r+=s*c}else if("string"===o){var p=qW(t.shape);l=[];for(var f=0;f<p;f++){var m=new Uint32Array(e.slice(r,r+l4))[0];r+=l4;var g=new Uint8Array(e.slice(r,r+m));l.push(g),r+=m}}else{var v=s4[o];if(d=e.slice(r,r+s*v),"float32"===o)l=new Float32Array(d);else if("int32"===o)l=new Int32Array(d);else{if("bool"!==o)throw new Error("Unsupported dtype in weight '"+i+"': "+o);l=new Uint8Array(d)}r+=s*v}n[i]=IK(l,a,o)},o=0,a=t;o<a.length;o++)i(a[o]);return n}function c4(e){if(null===e)throw new Error("Invalid input value: "+JSON.stringify(e));var t=0,n=[];e.forEach((function(e){if(t+=e.byteLength,n.push(e.byteLength===e.buffer.byteLength?e:new e.constructor(e)),!(e instanceof Float32Array||e instanceof Int32Array||e instanceof Uint8Array))throw new Error("Unsupported TypedArray subtype: "+e.constructor.name)}));var r=new Uint8Array(t),i=0;return n.forEach((function(e){r.set(new Uint8Array(e.buffer),i),i+=e.byteLength})),r.buffer}var d4="undefined"!=typeof Buffer&&("undefined"==typeof Blob||"undefined"==typeof atob||"undefined"==typeof btoa);function h4(e){return d4?Buffer.byteLength(e):new Blob([e]).size}function p4(e){var t=0;e.forEach((function(e){t+=e.byteLength}));var n=new Uint8Array(t),r=0;return e.forEach((function(e){n.set(new Uint8Array(e),r),r+=e.byteLength})),n.buffer}function f4(e){for(e=e.trim();e.endsWith("/");)e=e.slice(0,e.length-1);var t=e.split("/");return t[t.length-1]}function m4(e){if(e.modelTopology instanceof ArrayBuffer)throw new Error("Expected JSON model topology, received ArrayBuffer.");return{dateSaved:new Date,modelTopologyType:"JSON",modelTopologyBytes:null==e.modelTopology?0:h4(JSON.stringify(e.modelTopology)),weightSpecsBytes:null==e.weightSpecs?0:h4(JSON.stringify(e.weightSpecs)),weightDataBytes:null==e.weightData?0:e.weightData.byteLength}}var g4=function(){function e(){this.saveRouters=[],this.loadRouters=[]}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerSaveRouter=function(t){e.getInstance().saveRouters.push(t)},e.registerLoadRouter=function(t){e.getInstance().loadRouters.push(t)},e.getSaveHandlers=function(t){return e.getHandlers(t,"save")},e.getLoadHandlers=function(t,n){return e.getHandlers(t,"load",n)},e.getHandlers=function(t,n,r){var i=[];return("load"===n?e.getInstance().loadRouters:e.getInstance().saveRouters).forEach((function(e){var n=e(t,r);null!==n&&i.push(n)})),i},e}(),v4="://",y4=function(){function e(){this.managers={}}return e.getInstance=function(){return null==e.instance&&(e.instance=new e),e.instance},e.registerManager=function(t,n){VW(null!=t,(function(){return"scheme must not be undefined or null."})),t.endsWith(v4)&&(t=t.slice(0,t.indexOf(v4))),VW(t.length>0,(function(){return"scheme must not be an empty string."}));var r=e.getInstance();VW(null==r.managers[t],(function(){return"A model store manager is already registered for scheme '"+t+"'."})),r.managers[t]=n},e.getManager=function(e){var t=this.getInstance().managers[e];if(null==t)throw new Error("Cannot find model manager for scheme '"+e+"'");return t},e.getSchemes=function(){return Object.keys(this.getInstance().managers)},e}();function b4(e){if(-1===e.indexOf(v4))throw new Error("The url string provided does not contain a scheme. Supported schemes are: "+y4.getSchemes().join(","));return{scheme:e.split(v4)[0],path:e.split(v4)[1]}}function x4(e,t,n){return void 0===n&&(n=!1),RW(this,void 0,void 0,(function(){var r,i,o,a,s,l,u,c,d;return DW(this,(function(h){switch(h.label){case 0:return VW(e!==t,(function(){return"Old path and new path are the same: '"+e+"'"})),VW((r=g4.getLoadHandlers(e)).length>0,(function(){return"Copying failed because no load handler is found for source URL "+e+"."})),VW(r.length<2,(function(){return"Copying failed because more than one ("+r.length+") load handlers for source URL "+e+"."})),i=r[0],VW((o=g4.getSaveHandlers(t)).length>0,(function(){return"Copying failed because no save handler is found for destination URL "+t+"."})),VW(o.length<2,(function(){return"Copying failed because more than one ("+r.length+") save handlers for destination URL "+t+"."})),a=o[0],s=b4(e).scheme,l=b4(e).path,u=s===b4(e).scheme,[4,i.load()];case 1:return c=h.sent(),n&&u?[4,y4.getManager(s).removeModel(l)]:[3,3];case 2:h.sent(),h.label=3;case 3:return[4,a.save(c)];case 4:return d=h.sent(),!n||u?[3,6]:[4,y4.getManager(s).removeModel(l)];case 5:h.sent(),h.label=6;case 6:return[2,d.modelArtifactsInfo]}}))}))}var w4="models_store",k4="model_info_store";function _4(){if(!PW().getBool("IS_BROWSER"))throw new Error("Failed to obtain IndexedDB factory because the current environmentis not a web browser.");var e=window,t=e.indexedDB||e.mozIndexedDB||e.webkitIndexedDB||e.msIndexedDB||e.shimIndexedDB;if(null==t)throw new Error("The current browser does not appear to support IndexedDB.");return t}function E4(e){var t=e.result;t.createObjectStore(w4,{keyPath:"modelPath"}),t.createObjectStore(k4,{keyPath:"modelPath"})}var C4=function(){function e(e){if(this.indexedDB=_4(),null==e||!e)throw new Error("For IndexedDB, modelPath must not be null, undefined or empty.");this.modelPath=e}return e.prototype.save=function(e){return RW(this,void 0,void 0,(function(){return DW(this,(function(t){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");return[2,this.databaseAction(this.modelPath,e)]}))}))},e.prototype.load=function(){return RW(this,void 0,void 0,(function(){return DW(this,(function(e){return[2,this.databaseAction(this.modelPath)]}))}))},e.prototype.databaseAction=function(e,t){var n=this;return new Promise((function(e,r){var i=n.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return E4(i)},i.onsuccess=function(){var o=i.result;if(null==t){var a=o.transaction(w4,"readonly"),s=a.objectStore(w4).get(n.modelPath);s.onsuccess=function(){if(null==s.result)return o.close(),r(new Error("Cannot find model with path '"+n.modelPath+"' in IndexedDB."));e(s.result.modelArtifacts)},s.onerror=function(e){return o.close(),r(s.error)},a.oncomplete=function(){return o.close()}}else{var l,u=m4(t),c=o.transaction(k4,"readwrite"),d=c.objectStore(k4),h=d.put({modelPath:n.modelPath,modelArtifactsInfo:u});h.onsuccess=function(){var i=(l=o.transaction(w4,"readwrite")).objectStore(w4).put({modelPath:n.modelPath,modelArtifacts:t,modelArtifactsInfo:u});i.onsuccess=function(){return e({modelArtifactsInfo:u})},i.onerror=function(e){var t=(d=c.objectStore(k4)).delete(n.modelPath);t.onsuccess=function(){return o.close(),r(i.error)},t.onerror=function(e){return o.close(),r(i.error)}}},h.onerror=function(e){return o.close(),r(h.error)},c.oncomplete=function(){null==l?o.close():l.oncomplete=function(){return o.close()}}}},i.onerror=function(e){return r(i.error)}}))},e.URL_SCHEME="indexeddb://",e}(),I4=function(e){return PW().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(C4.URL_SCHEME)?(t=e.slice(C4.URL_SCHEME.length),new C4(t)):null;var t};g4.registerSaveRouter(I4),g4.registerLoadRouter(I4);var S4=function(){function e(){this.indexedDB=_4()}return e.prototype.listModels=function(){return RW(this,void 0,void 0,(function(){var e=this;return DW(this,(function(t){return[2,new Promise((function(t,n){var r=e.indexedDB.open("tensorflowjs",1);r.onupgradeneeded=function(){return E4(r)},r.onsuccess=function(){var e=r.result,i=e.transaction(k4,"readonly"),o=i.objectStore(k4).getAll();o.onsuccess=function(){for(var e={},n=0,r=o.result;n<r.length;n++){var i=r[n];e[i.modelPath]=i.modelArtifactsInfo}t(e)},o.onerror=function(t){return e.close(),n(o.error)},i.oncomplete=function(){return e.close()}},r.onerror=function(e){return n(r.error)}}))]}))}))},e.prototype.removeModel=function(e){return RW(this,void 0,void 0,(function(){var t=this;return DW(this,(function(n){var r;return e=(r=e).startsWith(C4.URL_SCHEME)?r.slice(C4.URL_SCHEME.length):r,[2,new Promise((function(n,r){var i=t.indexedDB.open("tensorflowjs",1);i.onupgradeneeded=function(){return E4(i)},i.onsuccess=function(){var t,o=i.result,a=o.transaction(k4,"readwrite"),s=a.objectStore(k4),l=s.get(e);l.onsuccess=function(){if(null==l.result)return o.close(),r(new Error("Cannot find model with path '"+e+"' in IndexedDB."));var i=s.delete(e),a=function(){var i=(t=o.transaction(w4,"readwrite")).objectStore(w4).delete(e);i.onsuccess=function(){return n(l.result.modelArtifactsInfo)},i.onerror=function(e){return r(l.error)}};i.onsuccess=a,i.onerror=function(e){return a(),o.close(),r(l.error)}},l.onerror=function(e){return o.close(),r(l.error)},a.oncomplete=function(){null==t?o.close():t.oncomplete=function(){return o.close()}}},i.onerror=function(e){return r(i.error)}}))]}))}))},e}();if(PW().getBool("IS_BROWSER"))try{y4.registerManager(C4.URL_SCHEME,new S4)}catch(TW){}var N4="/",T4="tensorflowjs_models",A4="info",R4="model_topology",D4="weight_specs",O4="weight_data",P4="model_metadata";function L4(e){return{info:[T4,e,A4].join(N4),topology:[T4,e,R4].join(N4),weightSpecs:[T4,e,D4].join(N4),weightData:[T4,e,O4].join(N4),modelMetadata:[T4,e,P4].join(N4)}}function M4(e){var t=e.split(N4);if(t.length<3)throw new Error("Invalid key format: "+e);return t.slice(1,t.length-1).join(N4)}var F4=function(){function e(e){if(!PW().getBool("IS_BROWSER")||void 0===window.localStorage)throw new Error("The current environment does not support local storage.");if(this.LS=window.localStorage,null==e||!e)throw new Error("For local storage, modelPath must not be null, undefined or empty.");this.modelPath=e,this.keys=L4(this.modelPath)}return e.prototype.save=function(e){return RW(this,void 0,void 0,(function(){var t,n,r;return DW(this,(function(i){if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserLocalStorage.save() does not support saving model topology in binary formats yet.");t=JSON.stringify(e.modelTopology),n=JSON.stringify(e.weightSpecs),r=m4(e);try{return this.LS.setItem(this.keys.info,JSON.stringify(r)),this.LS.setItem(this.keys.topology,t),this.LS.setItem(this.keys.weightSpecs,n),this.LS.setItem(this.keys.weightData,(o=e.weightData,d4?Buffer.from(o).toString("base64"):btoa(String.fromCharCode.apply(null,new Uint8Array(o))))),this.LS.setItem(this.keys.modelMetadata,JSON.stringify({format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy})),[2,{modelArtifactsInfo:r}]}catch(e){throw this.LS.removeItem(this.keys.info),this.LS.removeItem(this.keys.topology),this.LS.removeItem(this.keys.weightSpecs),this.LS.removeItem(this.keys.weightData),this.LS.removeItem(this.keys.modelMetadata),new Error("Failed to save model '"+this.modelPath+"' to local storage: size quota being exceeded is a possible cause of this failure: modelTopologyBytes="+r.modelTopologyBytes+", weightSpecsBytes="+r.weightSpecsBytes+", weightDataBytes="+r.weightDataBytes+".")}var o;return[2]}))}))},e.prototype.load=function(){return RW(this,void 0,void 0,(function(){var e,t,n,r,i,o,a;return DW(this,(function(s){if(null==(e=JSON.parse(this.LS.getItem(this.keys.info))))throw new Error("In local storage, there is no model with name '"+this.modelPath+"'");if("JSON"!==e.modelTopologyType)throw new Error("BrowserLocalStorage does not support loading non-JSON model topology yet.");if(t={},null==(n=JSON.parse(this.LS.getItem(this.keys.topology))))throw new Error("In local storage, the topology of model '"+this.modelPath+"' is missing.");if(t.modelTopology=n,null==(r=JSON.parse(this.LS.getItem(this.keys.weightSpecs))))throw new Error("In local storage, the weight specs of model '"+this.modelPath+"' are missing.");if(t.weightSpecs=r,null!=(i=this.LS.getItem(this.keys.modelMetadata))&&(o=JSON.parse(i),t.format=o.format,t.generatedBy=o.generatedBy,t.convertedBy=o.convertedBy),null==(a=this.LS.getItem(this.keys.weightData)))throw new Error("In local storage, the binary weight values of model '"+this.modelPath+"' are missing.");return t.weightData=function(e){if(d4){var t=Buffer.from(e,"base64");return t.buffer.slice(t.byteOffset,t.byteOffset+t.byteLength)}for(var n=atob(e),r=new Uint8Array(n.length),i=0;i<n.length;++i)r.set([n.charCodeAt(i)],i);return r.buffer}(a),[2,t]}))}))},e.URL_SCHEME="localstorage://",e}(),j4=function(e){return PW().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(F4.URL_SCHEME)?(t=e.slice(F4.URL_SCHEME.length),new F4(t)):null;var t};g4.registerSaveRouter(j4),g4.registerLoadRouter(j4);var B4=function(){function e(){VW(PW().getBool("IS_BROWSER"),(function(){return"Current environment is not a web browser"})),VW(void 0!==window.localStorage,(function(){return"Current browser does not appear to support localStorage"})),this.LS=window.localStorage}return e.prototype.listModels=function(){return RW(this,void 0,void 0,(function(){var e,t,n,r,i,o;return DW(this,(function(a){for(e={},t=T4+N4,n=N4+A4,r=0;r<this.LS.length;++r)(i=this.LS.key(r)).startsWith(t)&&i.endsWith(n)&&(o=M4(i),e[o]=JSON.parse(this.LS.getItem(i)));return[2,e]}))}))},e.prototype.removeModel=function(e){return RW(this,void 0,void 0,(function(){var t,n;return DW(this,(function(r){var i;if(e=(i=e).startsWith(F4.URL_SCHEME)?i.slice(F4.URL_SCHEME.length):i,t=L4(e),null==this.LS.getItem(t.info))throw new Error("Cannot find model at path '"+e+"'");return n=JSON.parse(this.LS.getItem(t.info)),this.LS.removeItem(t.info),this.LS.removeItem(t.topology),this.LS.removeItem(t.weightSpecs),this.LS.removeItem(t.weightData),[2,n]}))}))},e}();if(PW().getBool("IS_BROWSER"))try{y4.registerManager(F4.URL_SCHEME,new B4)}catch(TW){}function V4(e){return new Promise((function(e){return setTimeout(e)})).then(e)}var z4=function(){function e(t){if(!PW().getBool("IS_BROWSER"))throw new Error("browserDownloads() cannot proceed because the current environment is not a browser.");t.startsWith(e.URL_SCHEME)&&(t=t.slice(e.URL_SCHEME.length)),null!=t&&0!==t.length||(t="model"),this.modelTopologyFileName=t+".json",this.weightDataFileName=t+".weights.bin"}return e.prototype.save=function(e){return RW(this,void 0,void 0,(function(){var t,n,r,i,o,a;return DW(this,(function(s){switch(s.label){case 0:if("undefined"==typeof document)throw new Error("Browser downloads are not supported in this environment since `document` is not present");if(t=window.URL.createObjectURL(new Blob([e.weightData],{type:"application/octet-stream"})),!(e.modelTopology instanceof ArrayBuffer))return[3,1];throw new Error("BrowserDownloads.save() does not support saving model topology in binary formats yet.");case 1:return n=[{paths:["./"+this.weightDataFileName],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,weightsManifest:n},i=window.URL.createObjectURL(new Blob([JSON.stringify(r)],{type:"application/json"})),(o=null==this.jsonAnchor?document.createElement("a"):this.jsonAnchor).download=this.modelTopologyFileName,o.href=i,[4,V4((function(){return o.dispatchEvent(new MouseEvent("click"))}))];case 2:return s.sent(),null==e.weightData?[3,4]:((a=null==this.weightDataAnchor?document.createElement("a"):this.weightDataAnchor).download=this.weightDataFileName,a.href=t,[4,V4((function(){return a.dispatchEvent(new MouseEvent("click"))}))]);case 3:s.sent(),s.label=4;case 4:return[2,{modelArtifactsInfo:m4(e)}]}}))}))},e.URL_SCHEME="downloads://",e}(),U4=function(){function e(e){if(null==e||e.length<1)throw new Error("When calling browserFiles, at least 1 file is required, but received "+e);this.files=e}return e.prototype.load=function(){return RW(this,void 0,void 0,(function(){var e,t,n=this;return DW(this,(function(r){return e=this.files[0],t=this.files.slice(1),[2,new Promise((function(r,i){var o=new FileReader;o.onload=function(o){var a=JSON.parse(o.target.result),s=a.modelTopology;if(null!=s){0===t.length&&r({modelTopology:s});var l=a.weightsManifest;if(null!=l){var u;try{u=n.checkManifestAndWeightFiles(l,t)}catch(e){return void i(e)}var c=[],d=[],h=[];l.forEach((function(e){e.paths.forEach((function(e){d.push(e),h.push(null)})),c.push.apply(c,e.weights)})),l.forEach((function(e){e.paths.forEach((function(e){var t=new FileReader;t.onload=function(t){var n=t.target.result,i=d.indexOf(e);h[i]=n,-1===h.indexOf(null)&&r({modelTopology:s,weightSpecs:c,weightData:p4(h)})},t.onerror=function(t){return i("Failed to weights data from file of path '"+e+"'.")},t.readAsArrayBuffer(u[e])}))}))}else i(new Error("weightManifest field is missing from file "+e.name))}else i(new Error("modelTopology field is missing from file "+e.name))},o.onerror=function(t){return i("Failed to read model topology and weights manifest JSON from file '"+e.name+"'. BrowserFiles supports loading Keras-style tf.Model artifacts only.")},o.readAsText(e)}))]}))}))},e.prototype.checkManifestAndWeightFiles=function(e,t){for(var n=[],r=t.map((function(e){return f4(e.name)})),i={},o=0,a=e;o<a.length;o++)a[o].paths.forEach((function(e){var o=f4(e);if(-1!==n.indexOf(o))throw new Error("Duplicate file basename found in weights manifest: '"+o+"'");if(n.push(o),-1===r.indexOf(o))throw new Error("Weight file with basename '"+o+"' is not provided.");i[e]=t[r.indexOf(o)]}));if(n.length!==t.length)throw new Error("Mismatch in the number of files in weights manifest ("+n.length+") and the number of weight files provided ("+t.length+").");return i},e}();function $4(e,t,n,r){!function(e){VW(null!=e&&Array.isArray(e)&&e.length>0,(function(){return"promises must be a none empty array"}))}(e),function(e,t){VW(e>=0&&e<=1,(function(){return"Progress fraction must be in range [0, 1], but got startFraction "+e})),VW(t>=0&&t<=1,(function(){return"Progress fraction must be in range [0, 1], but got endFraction "+t})),VW(t>=e,(function(){return"startFraction must be no more than endFraction, but got startFraction "+e+" and endFraction "+t}))}(n=null==n?0:n,r=null==r?1:r);var i=0;return Promise.all(e.map((function(o){return o.then((function(o){var a=n+ ++i/e.length*(r-n);return t(a),o})),o})))}function q4(e,t){return RW(this,void 0,void 0,(function(){var n,r,i,o,a,s,l,u,c;return DW(this,(function(d){switch(d.label){case 0:return null==t&&(t={}),n=null==t.fetchFunc?PW().platform.fetch:t.fetchFunc,r=e.map((function(e){return n(e,t.requestInit,{isBinary:!0})})),i=0,o=.5,null!=t.onProgress?[3,2]:[4,Promise.all(r)];case 1:return a=d.sent(),[3,4];case 2:return[4,$4(r,t.onProgress,i,o)];case 3:a=d.sent(),d.label=4;case 4:return s=a.map((function(e){return e.arrayBuffer()})),l=.5,u=1,null!=t.onProgress?[3,6]:[4,Promise.all(s)];case 5:return c=d.sent(),[3,8];case 6:return[4,$4(s,t.onProgress,l,u)];case 7:c=d.sent(),d.label=8;case 8:return[2,c]}}))}))}function W4(e){var t=this;return function(n,r,i){return void 0===r&&(r=""),RW(t,void 0,void 0,(function(){var t,o,a,s,l,u,c,d,h,p;return DW(this,(function(f){switch(f.label){case 0:if(t=n.map((function(){return!1})),o={},a=null!=i?i.map((function(){return!1})):[],s=[],n.forEach((function(e,n){var r=0;e.weights.forEach((function(e){var l="quantization"in e?e.quantization.dtype:e.dtype,u=s4[l]*qW(e.shape),c=function(){t[n]=!0,null==o[n]&&(o[n]=[]),o[n].push({manifestEntry:e,groupOffset:r,sizeBytes:u})};null!=i?i.forEach((function(t,n){t===e.name&&(c(),a[n]=!0)})):c(),s.push(e.name),r+=u}))})),!a.every((function(e){return e})))throw l=i.filter((function(e,t){return!a[t]})),new Error("Could not find weights in manifest with names: "+l.join(", ")+". \nManifest JSON has weights with names: "+s.join(", ")+".");return u=t.reduce((function(e,t,n){return t&&e.push(n),e}),[]),c=[],u.forEach((function(e){n[e].paths.forEach((function(e){var t=r+(r.endsWith("/")?"":"/")+e;c.push(t)}))})),[4,e(c)];case 1:return d=f.sent(),h={},p=0,u.forEach((function(e){for(var t=n[e].paths.length,r=0,i=0;i<t;i++)r+=d[p+i].byteLength;for(var a=new ArrayBuffer(r),s=new Uint8Array(a),l=0,u=0;u<t;u++){var c=new Uint8Array(d[p+u]);s.set(c,l),l+=c.byteLength}o[e].forEach((function(e){var t=u4(a.slice(e.groupOffset,e.groupOffset+e.sizeBytes),[e.manifestEntry]);for(var n in t)h[n]=t[n]})),p+=t})),[2,h]}}))}))}}g4.registerSaveRouter((function(e){return PW().getBool("IS_BROWSER")&&!Array.isArray(e)&&e.startsWith(z4.URL_SCHEME)?(void 0===(t=e.slice(z4.URL_SCHEME.length))&&(t="model"),new z4(t)):null;var t}));var H4=function(){function e(e,t){if(this.DEFAULT_METHOD="POST",null==t&&(t={}),this.weightPathPrefix=t.weightPathPrefix,this.onProgress=t.onProgress,null!=t.fetchFunc?(VW("function"==typeof t.fetchFunc,(function(){return"Must pass a function that matches the signature of `fetch` (see https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)"})),this.fetch=t.fetchFunc):this.fetch=PW().platform.fetch,VW(null!=e&&e.length>0,(function(){return"URL path for http must not be null, undefined or empty."})),Array.isArray(e)&&VW(2===e.length,(function(){return"URL paths for http must have a length of 2, (actual length is "+e.length+")."})),this.path=e,null!=t.requestInit&&null!=t.requestInit.body)throw new Error("requestInit is expected to have no pre-existing body, but has one.");this.requestInit=t.requestInit||{}}return e.prototype.save=function(e){return RW(this,void 0,void 0,(function(){var t,n,r,i;return DW(this,(function(o){switch(o.label){case 0:if(e.modelTopology instanceof ArrayBuffer)throw new Error("BrowserHTTPRequest.save() does not support saving model topology in binary formats yet.");return(t=Object.assign({method:this.DEFAULT_METHOD},this.requestInit)).body=new FormData,n=[{paths:["./model.weights.bin"],weights:e.weightSpecs}],r={modelTopology:e.modelTopology,format:e.format,generatedBy:e.generatedBy,convertedBy:e.convertedBy,userDefinedMetadata:e.userDefinedMetadata,weightsManifest:n},t.body.append("model.json",new Blob([JSON.stringify(r)],{type:"application/json"}),"model.json"),null!=e.weightData&&t.body.append("model.weights.bin",new Blob([e.weightData],{type:"application/octet-stream"}),"model.weights.bin"),[4,this.fetch(this.path,t)];case 1:if((i=o.sent()).ok)return[2,{modelArtifactsInfo:m4(e),responses:[i]}];throw new Error("BrowserHTTPRequest.save() failed due to HTTP response status "+i.status+".")}}))}))},e.prototype.load=function(){return RW(this,void 0,void 0,(function(){var e,t,n,r,i,o,a,s;return DW(this,(function(l){switch(l.label){case 0:return[4,this.fetch(this.path,this.requestInit)];case 1:if(!(e=l.sent()).ok)throw new Error("Request to "+this.path+" failed with status code "+e.status+". Please verify this URL points to the model JSON of the model to load.");l.label=2;case 2:return l.trys.push([2,4,,5]),[4,e.json()];case 3:return t=l.sent(),[3,5];case 4:throw l.sent(),n="Failed to parse model JSON of response from "+this.path+".",this.path.endsWith(".pb")?n+=" Your path contains a .pb file extension. Support for .pb models have been removed in TensorFlow.js 1.0 in favor of .json models. You can re-convert your Python TensorFlow model using the TensorFlow.js 1.0 conversion scripts or you can convert your.pb models with the 'pb2json'NPM script in the tensorflow/tfjs-converter repository.":n+=" Please make sure the server is serving valid JSON for this request.",new Error(n);case 5:if(r=t.modelTopology,i=t.weightsManifest,null==r&&null==i)throw new Error("The JSON from HTTP path "+this.path+" contains neither model topology or manifest for weights.");return null==i?[3,7]:[4,this.loadWeights(i)];case 6:s=l.sent(),o=s[0],a=s[1],l.label=7;case 7:return[2,{modelTopology:r,weightSpecs:o,weightData:a}]}}))}))},e.prototype.loadWeights=function(e){return RW(this,void 0,void 0,(function(){var t,n,r,i,o,a,s,l,u,c,d;return DW(this,(function(h){switch(h.label){case 0:for(t=Array.isArray(this.path)?this.path[1]:this.path,n=function(e){var t=e.lastIndexOf("/"),n=e.lastIndexOf("?");return[e.substring(0,t)+"/",n>t?e.substring(n):""]}(t),r=n[0],i=n[1],o=this.weightPathPrefix||r,a=[],s=0,l=e;s<l.length;s++)u=l[s],a.push.apply(a,u.weights);return c=[],e.forEach((function(e){e.paths.forEach((function(e){c.push(o+e+i)}))})),[4,q4(c,{requestInit:this.requestInit,fetchFunc:this.fetch,onProgress:this.onProgress})];case 1:return d=h.sent(),[2,[a,p4(d)]]}}))}))},e.URL_SCHEME_REGEX=/^https?:\/\//,e}();function G4(e){return null!=e.match(H4.URL_SCHEME_REGEX)}var K4=function(e,t){return"undefined"==typeof fetch?null:(Array.isArray(e)?e.every((function(e){return G4(e)})):G4(e))?Y4(e,{onProgress:t}):null};function Y4(e,t){return new H4(e,t)}g4.registerSaveRouter(K4),g4.registerLoadRouter(K4);var X4=function(){function e(e){this.modelArtifacts=e}return e.prototype.load=function(){return RW(this,void 0,void 0,(function(){return DW(this,(function(e){return[2,this.modelArtifacts]}))}))},e}(),Q4=function(){function e(e){this.saveHandler=e}return e.prototype.save=function(e){return RW(this,void 0,void 0,(function(){return DW(this,(function(t){return[2,this.saveHandler(e)]}))}))},e}(),J4=Object.freeze({browserFiles:function(e){return new U4(e)},browserHTTPRequest:function(e,t){return Y4(e,t)},concatenateArrayBuffers:p4,decodeWeights:u4,encodeWeights:function(e,t){return RW(this,void 0,void 0,(function(){var n,r,i,o,a,s=this;return DW(this,(function(l){switch(l.label){case 0:for(n=[],r=[],i=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e),o=function(o){var a=i[o],l=Array.isArray(e)?e[o].tensor:e[a];if("float32"!==l.dtype&&"int32"!==l.dtype&&"bool"!==l.dtype&&"string"!==l.dtype)throw new Error("Unsupported dtype in weight '"+a+"': "+l.dtype);var u={name:a,shape:l.shape,dtype:l.dtype};if("string"===l.dtype){var c=new Promise((function(e){return RW(s,void 0,void 0,(function(){var t,n,r,i,o,a,s;return DW(this,(function(u){switch(u.label){case 0:return[4,l.bytes()];case 1:for(t=u.sent(),n=t.reduce((function(e,t){return e+t.length}),0)+l4*t.length,r=new Uint8Array(n),i=0,o=0;o<t.length;o++)a=t[o],s=new Uint8Array(new Uint32Array([a.length]).buffer),r.set(s,i),i+=l4,r.set(a,i),i+=a.length;return e(r),[2]}}))}))}));r.push(c)}else r.push(l.data());null!=t&&(u.group=t),n.push(u)},a=0;a<i.length;++a)o(a);return[4,Promise.all(r)];case 1:return[2,{data:c4(l.sent()),specs:n}]}}))}))},fromMemory:function(e,t,n,r){return 1===arguments.length?null!=e.modelTopology||null!=e.weightSpecs?new X4(e):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new X4({modelTopology:e})):(console.warn("Please call tf.io.fromMemory() with only one argument. The argument should be of type ModelArtifacts. The multi-argument signature of tf.io.fromMemory() has been deprecated and will be removed in a future release."),new X4({modelTopology:e,weightSpecs:t,weightData:n,trainingConfig:r}))},getLoadHandlers:function(e,t){return g4.getLoadHandlers(e,t)},getModelArtifactsInfoForJSON:m4,getSaveHandlers:function(e){return g4.getSaveHandlers(e)},http:Y4,isHTTPScheme:G4,loadWeights:function(e,t,n,r){return void 0===t&&(t=""),RW(this,void 0,void 0,(function(){return DW(this,(function(i){return[2,W4((function(e){return q4(e,{requestInit:r})}))(e,t,n)]}))}))},registerLoadRouter:function(e){return g4.registerLoadRouter(e)},registerSaveRouter:function(e){return g4.registerSaveRouter(e)},weightsLoaderFactory:W4,withSaveHandler:function(e){return new Q4(e)},copyModel:function(e,t){return RW(this,void 0,void 0,(function(){return DW(this,(function(n){return[2,x4(e,t,!1)]}))}))},listModels:function(){return RW(this,void 0,void 0,(function(){var e,t,n,r,i,o,a;return DW(this,(function(s){switch(s.label){case 0:e=y4.getSchemes(),t={},n=0,r=e,s.label=1;case 1:return n<r.length?(i=r[n],[4,y4.getManager(i).listModels()]):[3,4];case 2:for(a in o=s.sent())t[i+v4+a]=o[a];s.label=3;case 3:return n++,[3,1];case 4:return[2,t]}}))}))},moveModel:function(e,t){return RW(this,void 0,void 0,(function(){return DW(this,(function(n){return[2,x4(e,t,!0)]}))}))},removeModel:function(e){return RW(this,void 0,void 0,(function(){var t;return DW(this,(function(n){return t=b4(e),[2,y4.getManager(t.scheme).removeModel(t.path)]}))}))}}),Z4=kK({confusionMatrix_:function(e,t,n){var r=cK(e,"labels","confusionMatrix"),i=cK(t,"predictions","confusionMatrix");VW(null==n||n>0&&Number.isInteger(n),(function(){return"If provided, numClasses must be a positive integer, but got "+n})),VW(1===r.rank,(function(){return"Expected the rank of labels to be 1, but got "+r.rank})),VW(1===i.rank,(function(){return"Expected the rank of predictions to be 1, but got "+i.rank})),VW(r.shape[0]===i.shape[0],(function(){return"Mismatch in the number of examples: "+r.shape[0]+" vs. "+i.shape[0]+". Labels and predictions should have the same number of elements."})),VW(n>0&&Number.isInteger(n),(function(){return"numClasses is required to be a positive integer, but got "+n}));var o=gY(r.asType("int32"),n),a=gY(i.asType("int32"),n);return o.transpose().matMul(a).asType("int32")}}),e3=Object.freeze({confusionMatrix:Z4}),t3=kK({fromPixels_:function(e,t){if(void 0===t&&(t=3),t>4)throw new Error("Cannot construct Tensor with more than 4 channels from pixels.");var n="undefined"!=typeof HTMLVideoElement&&e instanceof HTMLVideoElement;if(n&&n&&e.readyState<2)throw new Error("The video element has not loaded data yet. Please wait for `loadeddata` event on the <video> element.");return JH.fromPixels(e,t)}}),n3=Object.freeze({toPixels:function(e,t){return RW(this,void 0,void 0,(function(){var n,r,i,o,a,s,l,u,c,d,h,p,f,m,g,v,y,b,x,w,k,_,E;return DW(this,(function(C){switch(C.label){case 0:if(n=cK(e,"img","toPixels"),e instanceof PH||(n=n.toInt()),2!==n.rank&&3!==n.rank)throw new Error("toPixels only supports rank 2 or 3 tensors, got rank "+n.rank+".");if(r=n.shape.slice(0,2),i=r[0],o=r[1],(a=2===n.rank?1:n.shape[2])>4||2===a)throw new Error("toPixels only supports depth of size 1, 3 or 4 but got "+a);return[4,n.data()];case 1:return s=C.sent(),l=n.min(),u=n.max(),[4,Promise.all([l.data(),u.data()])];case 2:if(c=C.sent(),d=c[0],h=c[1],p=d[0],f=h[0],l.dispose(),u.dispose(),"float32"===n.dtype){if(p<0||f>1)throw new Error("Tensor values for a float32 Tensor must be in the range [0 - 1] but got range ["+p+" - "+f+"].")}else{if("int32"!==n.dtype)throw new Error("Unsupported type for toPixels: "+n.dtype+". Please use float32 or int32 tensors.");if(p<0||f>255)throw new Error("Tensor values for a int32 Tensor must be in the range [0 - 255] but got range ["+p+" - "+f+"].")}for(m="float32"===n.dtype?255:1,g=new Uint8ClampedArray(o*i*4),v=0;v<i*o;++v)y=void 0,b=void 0,x=void 0,w=void 0,1===a?(y=s[v]*m,b=s[v]*m,x=s[v]*m,w=255):3===a?(y=s[3*v]*m,b=s[3*v+1]*m,x=s[3*v+2]*m,w=255):4===a&&(y=s[4*v]*m,b=s[4*v+1]*m,x=s[4*v+2]*m,w=s[4*v+3]*m),g[0+(k=4*v)]=Math.round(y),g[k+1]=Math.round(b),g[k+2]=Math.round(x),g[k+3]=Math.round(w);return null!=t&&(t.width=o,t.height=i,_=t.getContext("2d"),E=new ImageData(g,o,i),_.putImageData(E,0,0)),n!==e&&n.dispose(),[2,g]}}))}))},fromPixels:t3}),r3=function(){function e(){}return e.prototype.getClassName=function(){return this.constructor.className},e.fromConfig=function(e,t){return new e(t)},e}(),i3=function(){function e(){this.classNameMap={}}return e.getMap=function(){return null==e.instance&&(e.instance=new e),e.instance},e.register=function(t){e.getMap().classNameMap[t.className]=[t,t.fromConfig]},e}();function o3(e){VW(null!=e.className,(function(){return"Class being registered does not have the static className property defined."})),VW("string"==typeof e.className,(function(){return"className is required to be a string, but got type "+typeof e.className})),VW(e.className.length>0,(function(){return"Class being registered has an empty-string as its className, which is disallowed."})),i3.register(e)}var a3=Object.freeze({Serializable:r3,SerializationMap:i3,registerClass:o3});function s3(){return 32===JH.backend.floatPrecision()?.001:.1}function l3(e,t,n){var r=!0;if((oH(e)||oH(t))&&(r=!1),oH(e)&&oH(t)&&(r=!0),r){var i=e.constructor.name,o=t.constructor.name;if(i!==o)throw new Error("Arrays are of different type. Actual: "+i+". Expected: "+o)}if(Array.isArray(e)&&Array.isArray(t)){var a=lK(e),s=lK(t);if(!WW(a,s))throw new Error("Arrays have different shapes. Actual: ["+a+"]. Expected: ["+s+"]")}var l=oH(e)?e:$W(e),u=oH(t)?t:$W(t);if(l.length!==u.length)throw new Error("Arrays have different lengths actual: "+l.length+" vs expected: "+u.length+".\nActual:   "+l+".\nExpected: "+u+".");for(var c=0;c<u.length;++c){var d=l[c],h=u[c];if(!n(d,h))throw new Error("Arrays differ: actual["+c+"] = "+d+", expected["+c+"] = "+h+".\nActual:   "+l+".\nExpected: "+u+".")}}function u3(e,t,n){return!isFinite(e)&&!isFinite(t)||!(isNaN(e)||isNaN(t)||Math.abs(e-t)>n)}var c3=Object.freeze({TEST_EPSILON_FLOAT16:.1,expectArraysClose:function(e,t,n){return null==n&&(n=s3()),l3(e,t,(function(e,t){return u3(e,t,n)}))},testEpsilon:s3,expectPromiseToFail:function(e,t){e().then((function(){return t.fail()}),(function(){return t()}))},expectArraysEqual:function(e,t){var n="string"==typeof t||"number"==typeof t||"boolean"==typeof t?[t]:t;return lH(e)||lH(e[0])||lH(t)||lH(t[0])?l3(e,n,(function(e,t){return e==t})):l3(e,t,(function(e,t){return u3(e,t,0)}))},expectNumbersClose:function(e,t,n){if(null==n&&(n=s3()),!u3(e,t,n))throw new Error("Numbers differ: actual === "+e+", expected === "+t)},expectValuesInRange:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r]<t||e[r]>n)throw new Error("Value out of range:"+e[r]+" low: "+t+", high: "+n)},expectArrayBuffersEqual:function(e,t){expect(new Float32Array(e)).toEqual(new Float32Array(t))}}),d3=Object.freeze({gpgpu_util:aJ,webgl_util:tK,forceHalfFloat:function(){PW().set("WEBGL_FORCE_F16_TEXTURES",!0)},MathBackendWebGL:wZ,setWebGLContext:oG,GPGPUContext:sJ}),h3=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return AW(t,e),t.prototype.minimize=function(e,t,n){void 0===t&&(t=!1);var r=this.computeGradients(e,n),i=r.value,o=r.grads;if(null!=n){var a=n.map((function(e){return{name:e.name,tensor:o[e.name]}}));this.applyGradients(a)}else this.applyGradients(o);return oK(o),t?i:(i.dispose(),null)},Object.defineProperty(t.prototype,"iterations",{get:function(){return null==this.iterations_&&(this.iterations_=0),this.iterations_},enumerable:!0,configurable:!0}),t.prototype.incrementIterations=function(){this.iterations_=this.iterations+1},t.prototype.computeGradients=function(e,t){return KY(e,t)},t.prototype.dispose=function(){null!=this.iterations_&&oK(this.iterations_)},t.prototype.saveIterations=function(){return RW(this,void 0,void 0,(function(){return DW(this,(function(e){return null==this.iterations_&&(this.iterations_=0),[2,{name:"iter",tensor:NK(this.iterations_,"int32")}]}))}))},t.prototype.getWeights=function(){return RW(this,void 0,void 0,(function(){return DW(this,(function(e){throw new Error("getWeights() is not implemented for this optimizer yet.")}))}))},t.prototype.setWeights=function(e){return RW(this,void 0,void 0,(function(){return DW(this,(function(e){throw new Error("setWeights() is not implemented for this optimizer class "+this.getClassName())}))}))},t.prototype.extractIterations=function(e){return RW(this,void 0,void 0,(function(){var t;return DW(this,(function(n){switch(n.label){case 0:return t=this,[4,e[0].tensor.data()];case 1:return t.iterations_=n.sent()[0],[2,e.slice(1)]}}))}))},t}(r3);Object.defineProperty(h3,Symbol.hasInstance,{value:function(e){return null!=e.minimize&&null!=e.computeGradients&&null!=e.applyGradients}});var p3=function(e){function t(t,n,r){void 0===r&&(r=null);var i=e.call(this)||this;return i.learningRate=t,i.rho=n,i.epsilon=r,i.accumulatedGrads=[],i.accumulatedUpdates=[],null==r&&(i.epsilon=JH.backend.epsilon()),i}return AW(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=JH.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accum_grad",variable:iK((function(){return zK(i).variable(!1)}))}),null==t.accumulatedUpdates[r]&&(t.accumulatedUpdates[r]={originalName:n+"/accum_var",variable:iK((function(){return zK(i).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var a=t.accumulatedGrads[r].variable,s=t.accumulatedUpdates[r].variable;iK((function(){var e=a.mul(t.rho).add(o.square().mul(1-t.rho)),n=s.add(t.epsilon).sqrt().div(a.add(t.epsilon).sqrt()).mul(o),r=s.mul(t.rho).add(n.square().mul(1-t.rho));a.assign(e),s.assign(r);var l=n.mul(-t.learningRate).add(i);i.assign(l)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedUpdates&&(oK(this.accumulatedGrads.map((function(e){return e.variable}))),oK(this.accumulatedUpdates.map((function(e){return e.variable}))))},t.prototype.getWeights=function(){return RW(this,void 0,void 0,(function(){var e;return DW(this,(function(t){switch(t.label){case 0:return e=this.accumulatedGrads.concat(this.accumulatedUpdates),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return RW(this,void 0,void 0,(function(){var t;return DW(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=e.length/2,this.accumulatedGrads=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedUpdates=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,rho:this.rho,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.rho,t.epsilon)},t.className="Adadelta",t}(h3);o3(p3);var f3=function(e){function t(t,n){void 0===n&&(n=.1);var r=e.call(this)||this;return r.learningRate=t,r.initialAccumulatorValue=n,r.accumulatedGrads=[],r}return AW(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=JH.registeredVariables[n];null==t.accumulatedGrads[r]&&(t.accumulatedGrads[r]={originalName:n+"/accumulator",variable:iK((function(){return FK(i.shape,t.initialAccumulatorValue).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var a=t.accumulatedGrads[r].variable;iK((function(){var e=a.add(o.square());a.assign(e);var n=o.div(e.add(JH.backend.epsilon()).sqrt()).mul(-t.learningRate).add(i);i.assign(n)}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedGrads&&oK(this.accumulatedGrads.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return RW(this,void 0,void 0,(function(){return DW(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulatedGrads.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return RW(this,void 0,void 0,(function(){return DW(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulatedGrads=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,initialAccumulatorValue:this.initialAccumulatorValue}},t.fromConfig=function(e,t){return new e(t.learningRate,t.initialAccumulatorValue)},t.className="Adagrad",t}(h3);o3(f3);var m3=function(e){function t(t,n,r,i){void 0===i&&(i=null);var o=e.call(this)||this;return o.learningRate=t,o.beta1=n,o.beta2=r,o.epsilon=i,o.accumulatedFirstMoment=[],o.accumulatedSecondMoment=[],iK((function(){o.accBeta1=NK(n).variable(),o.accBeta2=NK(r).variable()})),null==i&&(o.epsilon=JH.backend.epsilon()),o}return AW(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);iK((function(){var r=U0(1,t.accBeta1),i=U0(1,t.accBeta2);n.forEach((function(n,o){var a=JH.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:iK((function(){return zK(a).variable(!1)}))}),null==t.accumulatedSecondMoment[o]&&(t.accumulatedSecondMoment[o]={originalName:n+"/v",variable:iK((function(){return zK(a).variable(!1)}))});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var l=t.accumulatedFirstMoment[o].variable,u=t.accumulatedSecondMoment[o].variable,c=l.mul(t.beta1).add(s.mul(1-t.beta1)),d=u.mul(t.beta2).add(s.square().mul(1-t.beta2)),h=c.div(r),p=d.div(i);l.assign(c),u.assign(d);var f=h.div(p.sqrt().add(t.epsilon)).mul(-t.learningRate).add(a);a.assign(f)}})),t.accBeta1.assign(t.accBeta1.mul(t.beta1)),t.accBeta2.assign(t.accBeta2.mul(t.beta2))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.accBeta2.dispose(),null!=this.accumulatedFirstMoment&&oK(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedSecondMoment&&oK(this.accumulatedSecondMoment.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return RW(this,void 0,void 0,(function(){var e;return DW(this,(function(t){switch(t.label){case 0:return e=this.accumulatedFirstMoment.concat(this.accumulatedSecondMoment),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return RW(this,void 0,void 0,(function(){var t,n=this;return DW(this,(function(r){switch(r.label){case 0:return[4,this.extractIterations(e)];case 1:return e=r.sent(),iK((function(){n.accBeta1.assign(j0(n.beta1,n.iterations_+1)),n.accBeta2.assign(j0(n.beta2,n.iterations_+1))})),t=e.length/2,this.accumulatedFirstMoment=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedSecondMoment=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon)},t.className="Adam",t}(h3);o3(m3);var g3=function(e){function t(t,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=0);var a=e.call(this)||this;return a.learningRate=t,a.beta1=n,a.beta2=r,a.epsilon=i,a.decay=o,a.accumulatedFirstMoment=[],a.accumulatedWeightedInfNorm=[],iK((function(){a.iteration=NK(0).variable(),a.accBeta1=NK(n).variable()})),null==i&&(a.epsilon=JH.backend.epsilon()),a}return AW(t,e),t.prototype.applyGradients=function(e){var t=this,n=Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e);iK((function(){var r=U0(1,t.accBeta1),i=S0(-t.learningRate,t.iteration.mul(t.decay).add(1));n.forEach((function(n,o){var a=JH.registeredVariables[n];null==t.accumulatedFirstMoment[o]&&(t.accumulatedFirstMoment[o]={originalName:n+"/m",variable:zK(a).variable(!1)}),null==t.accumulatedWeightedInfNorm[o]&&(t.accumulatedWeightedInfNorm[o]={originalName:n+"/v",variable:zK(a).variable(!1)});var s=Array.isArray(e)?e[o].tensor:e[n];if(null!=s){var l=t.accumulatedFirstMoment[o].variable,u=t.accumulatedWeightedInfNorm[o].variable,c=l.mul(t.beta1).add(s.mul(1-t.beta1)),d=u.mul(t.beta2),h=s.abs(),p=d.maximum(h);l.assign(c),u.assign(p);var f=i.div(r).mul(c.div(p.add(t.epsilon))).add(a);a.assign(f)}})),t.iteration.assign(t.iteration.add(1)),t.accBeta1.assign(t.accBeta1.mul(t.beta1))})),this.incrementIterations()},t.prototype.dispose=function(){this.accBeta1.dispose(),this.iteration.dispose(),null!=this.accumulatedFirstMoment&&oK(this.accumulatedFirstMoment.map((function(e){return e.variable}))),null!=this.accumulatedWeightedInfNorm&&oK(this.accumulatedWeightedInfNorm.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return RW(this,void 0,void 0,(function(){return DW(this,(function(e){throw new Error("getWeights() is not implemented for Adamax yet.")}))}))},t.prototype.setWeights=function(e){return RW(this,void 0,void 0,(function(){return DW(this,(function(e){throw new Error("setWeights() is not implemented for Adamax yet.")}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,beta1:this.beta1,beta2:this.beta2,epsilon:this.epsilon,decay:this.decay}},t.fromConfig=function(e,t){return new e(t.learningRate,t.beta1,t.beta2,t.epsilon,t.decay)},t.className="Adamax",t}(h3);o3(g3);var v3=function(e){function t(t){var n=e.call(this)||this;return n.learningRate=t,n.setLearningRate(t),n}return AW(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=Array.isArray(e)?e[r].tensor:e[n];if(null!=i){var o=JH.registeredVariables[n];iK((function(){var e=t.c.mul(i).add(o);o.assign(e)}))}})),this.incrementIterations()},t.prototype.setLearningRate=function(e){this.learningRate=e,null!=this.c&&this.c.dispose(),this.c=aK(NK(-e))},t.prototype.dispose=function(){this.c.dispose()},t.prototype.getWeights=function(){return RW(this,void 0,void 0,(function(){return DW(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()]]}}))}))},t.prototype.setWeights=function(e){return RW(this,void 0,void 0,(function(){return DW(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:if(0!==(e=t.sent()).length)throw new Error("SGD optimizer does not have settable weights.");return[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate}},t.fromConfig=function(e,t){return new e(t.learningRate)},t.className="SGD",t}(h3);o3(v3);var y3=function(e){function t(t,n,r){void 0===r&&(r=!1);var i=e.call(this,t)||this;return i.learningRate=t,i.momentum=n,i.useNesterov=r,i.accumulations=[],i.m=NK(i.momentum),i}return AW(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=JH.registeredVariables[n];null==t.accumulations[r]&&(t.accumulations[r]={originalName:n+"/momentum",variable:iK((function(){return zK(i).variable(!1)}))});var o=t.accumulations[r].variable,a=Array.isArray(e)?e[r].tensor:e[n];null!=a&&iK((function(){var e,n=t.m.mul(o).add(a);e=t.useNesterov?t.c.mul(a.add(n.mul(t.m))).add(i):t.c.mul(n).add(i),o.assign(n),i.assign(e)}))})),this.incrementIterations()},t.prototype.dispose=function(){this.m.dispose(),null!=this.accumulations&&oK(this.accumulations.map((function(e){return e.variable})))},t.prototype.setMomentum=function(e){this.momentum=e},t.prototype.getWeights=function(){return RW(this,void 0,void 0,(function(){return DW(this,(function(e){switch(e.label){case 0:return[4,this.saveIterations()];case 1:return[2,[e.sent()].concat(this.accumulations.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return RW(this,void 0,void 0,(function(){return DW(this,(function(t){switch(t.label){case 0:return[4,this.extractIterations(e)];case 1:return e=t.sent(),this.accumulations=e.map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,momentum:this.momentum,useNesterov:this.useNesterov}},t.fromConfig=function(e,t){return new e(t.learningRate,t.momentum,t.useNesterov)},t.className="Momentum",t}(v3);o3(y3);var b3=function(e){function t(t,n,r,i,o){void 0===n&&(n=.9),void 0===r&&(r=0),void 0===i&&(i=null),void 0===o&&(o=!1);var a=e.call(this)||this;return a.learningRate=t,a.decay=n,a.momentum=r,a.epsilon=i,a.accumulatedMeanSquares=[],a.accumulatedMoments=[],a.accumulatedMeanGrads=[],a.centered=o,null==i&&(a.epsilon=JH.backend.epsilon()),a}return AW(t,e),t.prototype.applyGradients=function(e){var t=this;(Array.isArray(e)?e.map((function(e){return e.name})):Object.keys(e)).forEach((function(n,r){var i=JH.registeredVariables[n];null==t.accumulatedMeanSquares[r]&&(t.accumulatedMeanSquares[r]={originalName:n+"/rms",variable:iK((function(){return zK(i).variable(!1)}))}),null==t.accumulatedMoments[r]&&(t.accumulatedMoments[r]={originalName:n+"/momentum",variable:iK((function(){return zK(i).variable(!1)}))}),null==t.accumulatedMeanGrads[r]&&t.centered&&(t.accumulatedMeanGrads[r]={originalName:n+"/mg",variable:iK((function(){return zK(i).variable(!1)}))});var o=Array.isArray(e)?e[r].tensor:e[n];if(null!=o){var a=t.accumulatedMeanSquares[r].variable,s=t.accumulatedMoments[r].variable;iK((function(){var e=a.mul(t.decay).add(o.square().mul(1-t.decay));if(t.centered){var n=t.accumulatedMeanGrads[r].variable,l=n.mul(t.decay).add(o.mul(1-t.decay)),u=s.mul(t.momentum).add(o.mul(t.learningRate).div(e.sub(l.square().add(t.epsilon)).sqrt()));a.assign(e),n.assign(l),s.assign(u);var c=i.sub(u);i.assign(c)}else{var d=a.mul(t.decay).add(o.square().mul(1-t.decay));u=s.mul(t.momentum).add(o.mul(t.learningRate).div(d.add(t.epsilon).sqrt())),a.assign(d),s.assign(u),c=i.sub(u),i.assign(c)}}))}})),this.incrementIterations()},t.prototype.dispose=function(){null!=this.accumulatedMeanSquares&&oK(this.accumulatedMeanSquares.map((function(e){return e.variable}))),null!=this.accumulatedMeanGrads&&this.centered&&oK(this.accumulatedMeanGrads.map((function(e){return e.variable}))),null!=this.accumulatedMoments&&oK(this.accumulatedMoments.map((function(e){return e.variable})))},t.prototype.getWeights=function(){return RW(this,void 0,void 0,(function(){var e;return DW(this,(function(t){switch(t.label){case 0:return e=this.accumulatedMeanSquares.concat(this.accumulatedMoments),this.centered&&e.push.apply(e,this.accumulatedMeanGrads),[4,this.saveIterations()];case 1:return[2,[t.sent()].concat(e.map((function(e){return{name:e.originalName,tensor:e.variable}})))]}}))}))},t.prototype.setWeights=function(e){return RW(this,void 0,void 0,(function(){var t;return DW(this,(function(n){switch(n.label){case 0:return[4,this.extractIterations(e)];case 1:return e=n.sent(),t=this.centered?e.length/3:e.length/2,this.accumulatedMeanSquares=e.slice(0,t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.accumulatedMoments=e.slice(t,2*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}})),this.centered&&(this.accumulatedMeanGrads=e.slice(2*t,3*t).map((function(e){return{originalName:e.name,variable:e.tensor.variable(!1)}}))),[2]}}))}))},t.prototype.getConfig=function(){return{learningRate:this.learningRate,decay:this.decay,momentum:this.momentum,epsilon:this.epsilon,centered:this.centered}},t.fromConfig=function(e,t){return new e(t.learningRate,t.decay,t.momentum,t.epsilon,t.centered)},t.className="RMSProp",t}(h3);o3(b3);var x3=function(){function e(){}return e.sgd=function(e){return new v3(e)},e.momentum=function(e,t,n){return void 0===n&&(n=!1),new y3(e,t,n)},e.rmsprop=function(e,t,n,r,i){return void 0===t&&(t=.9),void 0===n&&(n=0),void 0===r&&(r=null),void 0===i&&(i=!1),new b3(e,t,n,r,i)},e.adam=function(e,t,n,r){return void 0===e&&(e=.001),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),new m3(e,t,n,r)},e.adadelta=function(e,t,n){return void 0===e&&(e=.001),void 0===t&&(t=.95),void 0===n&&(n=null),new p3(e,t,n)},e.adamax=function(e,t,n,r,i){return void 0===e&&(e=.002),void 0===t&&(t=.9),void 0===n&&(n=.999),void 0===r&&(r=null),void 0===i&&(i=0),new g3(e,t,n,r,i)},e.adagrad=function(e,t){return void 0===t&&(t=.1),new f3(e,t)},e}(),w3={sgd:x3.sgd,momentum:x3.momentum,adadelta:x3.adadelta,adagrad:x3.adagrad,rmsprop:x3.rmsprop,adamax:x3.adamax,adam:x3.adam},k3="undefined"!=typeof requestAnimationFrame?requestAnimationFrame:"undefined"!=typeof setImmediate?setImmediate:function(e){return e()};DH=t4;const _3=Object.freeze(Object.defineProperty({__proto__:null,AdadeltaOptimizer:p3,AdagradOptimizer:f3,AdamOptimizer:m3,AdamaxOptimizer:g3,DataStorage:ZY,get ENV(){return LW},Environment:OW,KernelBackend:eX,MomentumOptimizer:y3,Optimizer:h3,RMSPropOptimizer:b3,get Rank(){return MH},get Reduction(){return E2},SGDOptimizer:v3,Tensor:PH,TensorBuffer:AH,Variable:LH,abs:kZ,acos:_Z,acosh:EZ,add:_0,addN:E0,addStrict:C0,all:U1,any:$1,argMax:q1,argMin:W1,asin:CZ,asinh:IZ,atan:SZ,atan2:I0,atanh:NZ,avgPool:D1,avgPool3d:L1,backend:function(){return JH.backend},backend_util:bX,basicLSTMCell:l2,batchNorm:p0,batchNorm2d:f0,batchNorm3d:m0,batchNorm4d:g0,batchNormalization:h0,batchNormalization2d:u0,batchNormalization3d:c0,batchNormalization4d:d0,batchToSpaceND:lY,booleanMaskAsync:a1,browser:n3,buffer:aY,cast:uY,ceil:TZ,clipByValue:AZ,clone:cY,complex:_K,concat:UK,concat1d:$K,concat2d:qK,concat3d:WK,concat4d:HK,conv1d:c1,conv2d:d1,conv2dTranspose:b1,conv3d:h1,conv3dTranspose:x1,cos:RZ,cosh:DZ,cumsum:dY,customGrad:YY,deprecationWarn:rK,depthToSpace:hY,depthwiseConv2d:m1,diag:w2,disableDeprecationWarnings:function(){PW().set("DEPRECATION_WARNINGS_ENABLED",!1),console.warn("TensorFlow.js deprecation warnings have been disabled.")},dispose:oK,disposeVariables:function(){JH.disposeVariables()},div:S0,divStrict:N0,dot:k1,dropout:k2,elu:Z1,enableDebugMode:function(){PW().set("DEBUG",!0)},enableProdMode:function(){PW().set("PROD",!0)},engine:function(){return JH},env:PW,equal:q0,equalStrict:W0,erf:OZ,exp:PZ,expandDims:pY,expm1:LZ,eye:fY,fft:f2,fill:FK,findBackend:function(e){return JH.findBackend(e)},findBackendFactory:function(e){return JH.findBackendFactory(e)},floor:MZ,floorDiv:T0,frame:S2,fused:e4,gather:i1,gatherND:x2,getBackend:function(){return JH.backendName},grad:function(e){return VW(hH(e),(function(){return"The f passed in grad(f) must be a function"})),function(t,n){var r=cK(t,"x","tf.grad",null),i=null!=n?cK(n,"dy","tf.grad"):null;return JH.tidy((function(){var t=JH.gradients((function(){return e(r)}),[r],i),n=t.value,o=t.grads;return null!=i&&zW(n.shape,i.shape,"The shape of dy passed in grad(f)(x, dy) must match the shape returned by f(x)"),XY(o),o[0]}))}},grads:function(e){return VW(hH(e),(function(){return"The f passed in grads(f) must be a function"})),function(t,n){VW(Array.isArray(t),(function(){return"The args passed in grads(f)(args) must be an array of `Tensor`s or `TensorLike`s"}));var r=dK(t,"args","tf.grads",null),i=null!=n?cK(n,"dy","tf.grads"):null;return JH.tidy((function(){var t=JH.gradients((function(){return e.apply(void 0,r)}),r,i),n=t.value,o=t.grads;return null!=i&&zW(n.shape,i.shape,"The shape of dy passed in grads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),XY(o),o}))}},greater:H0,greaterEqual:G0,greaterEqualStrict:K0,greaterStrict:Y0,hammingWindow:I2,hannWindow:C2,ifft:m2,imag:CK,image:X2,inTopKAsync:A2,io:J4,irfft:v2,isFinite:KZ,isInf:GZ,isNaN:HZ,keep:aK,leakyRelu:e2,less:X0,lessEqual:Q0,lessEqualStrict:J0,lessStrict:Z0,linalg:q2,linspace:jK,localResponseNormalization:a2,log:FZ,log1p:jZ,logSigmoid:BZ,logSoftmax:JY,logSumExp:H1,logicalAnd:v0,logicalNot:y0,logicalOr:b0,logicalXor:x0,losses:V2,matMul:w1,math:e3,max:G1,maxPool:R1,maxPool3d:P1,maximum:A0,maximumStrict:R0,mean:K1,memory:function(){return JH.memory()},min:Y1,minimum:D0,minimumStrict:O0,mod:P0,modStrict:L0,moments:X1,movingAverage:c2,mul:M0,mulStrict:F0,multiRNNCell:u2,multinomial:mY,neg:VZ,nextFrame:function(){return new Promise((function(e){return k3((function(){return e()}))}))},norm:s2,notEqual:e1,notEqualStrict:t1,oneHot:gY,ones:LK,onesLike:VK,op:kK,outerProduct:_1,pad:vY,pad1d:yY,pad2d:bY,pad3d:xY,pad4d:wY,pool:O1,pow:j0,powStrict:B0,prelu:t2,print:sY,prod:J1,profile:function(e){return JH.profile(e)},rand:kY,randomGamma:EY,randomNormal:_Y,randomUniform:CY,range:BK,ready:function(){return JH.ready()},real:EK,reciprocal:zZ,registerBackend:function(e,t,n){return void 0===n&&(n=1),JH.registerBackend(e,t,n)},relu:n2,relu6:r2,removeBackend:function(e){JH.removeBackend(e)},reshape:IY,reverse:E1,reverse1d:C1,reverse2d:I1,reverse3d:S1,reverse4d:N1,rfft:g2,round:UZ,rsqrt:$Z,scalar:NK,scatterND:p2,selu:i2,separableConv2d:y1,serialization:a3,setBackend:function(e){return JH.setBackend(e)},setPlatform:function(e,t){PW().setPlatform(e,t)},setdiff1dAsync:OY,sigmoid:qZ,sign:WZ,signal:T2,sin:YZ,sinh:XZ,slice:M1,slice1d:F1,slice2d:j1,slice3d:B1,slice4d:V1,softmax:QY,softplus:QZ,spaceToBatchND:SY,sparseToDense:b2,spectral:y2,split:GK,sqrt:JZ,square:ZZ,squaredDifference:V0,squaredDifferenceStrict:z0,squeeze:NY,stack:TY,step:e0,stft:N2,stridedSlice:d2,sub:U0,subStrict:$0,sum:Q1,tan:t0,tanh:n0,tensor:IK,tensor1d:TK,tensor2d:AK,tensor3d:RK,tensor4d:DK,tensor5d:OK,tensor6d:PK,tensor_util:YH,test_util:c3,tidy:iK,tile:AY,time:function(e){return JH.time(e)},topk:h2,train:w3,transpose:o2,truncatedNormal:RY,unsortedSegmentSum:o1,unstack:DY,util:_H,valueAndGrad:function(e){return VW(hH(e),(function(){return"The f passed in valueAndGrad(f) must be a function"})),function(t,n){VW(t instanceof PH,(function(){return"The x passed in valueAndGrad(f)(x) must be a tensor"})),VW(null==n||n instanceof PH,(function(){return"The dy passed in valueAndGrad(f)(x, dy) must be a tensor"}));var r=JH.gradients((function(){return e(t)}),[t],n),i=r.grads,o=r.value;return XY(i),{grad:i[0],value:o}}},valueAndGrads:function(e){return VW(hH(e),(function(){return"The f passed in valueAndGrads(f) must be a function"})),function(t,n){VW(Array.isArray(t)&&t.every((function(e){return e instanceof PH})),(function(){return"The args passed in valueAndGrads(f)(args) must be array of tensors"})),VW(null==n||n instanceof PH,(function(){return"The dy passed in valueAndGrads(f)(args, dy) must be a tensor"}));var r=JH.gradients((function(){return e.apply(void 0,t)}),t,n);return null!=n&&zW(r.value.shape,n.shape,"The shape of dy passed in valueAndGrads(f)([x1,...], dy) must match the shape returned by f([x1,...])"),XY(r.grads),r}},variable:zH,variableGrads:KY,version_core:"1.2.11",webgl:d3,where:w0,whereAsync:k0,zeros:MK,zerosLike:zK},Symbol.toStringTag,{value:"Module"}));
/**
             * @license
             * Copyright 2019 Google LLC. All Rights Reserved.
             * Licensed under the Apache License, Version 2.0 (the "License");
             * you may not use this file except in compliance with the License.
             * You may obtain a copy of the License at
             *
             * http://www.apache.org/licenses/LICENSE-2.0
             *
             * Unless required by applicable law or agreed to in writing, software
             * distributed under the License is distributed on an "AS IS" BASIS,
             * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
             * See the License for the specific language governing permissions and
             * limitations under the License.
             * =============================================================================
             */var E3,C3,I3=function(){return(I3=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function S3(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function N3(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}!function(e){e[e.DT_INVALID=0]="DT_INVALID",e[e.DT_FLOAT=1]="DT_FLOAT",e[e.DT_DOUBLE=2]="DT_DOUBLE",e[e.DT_INT32=3]="DT_INT32",e[e.DT_UINT8=4]="DT_UINT8",e[e.DT_INT16=5]="DT_INT16",e[e.DT_INT8=6]="DT_INT8",e[e.DT_STRING=7]="DT_STRING",e[e.DT_COMPLEX64=8]="DT_COMPLEX64",e[e.DT_INT64=9]="DT_INT64",e[e.DT_BOOL=10]="DT_BOOL",e[e.DT_QINT8=11]="DT_QINT8",e[e.DT_QUINT8=12]="DT_QUINT8",e[e.DT_QINT32=13]="DT_QINT32",e[e.DT_BFLOAT16=14]="DT_BFLOAT16",e[e.DT_FLOAT_REF=101]="DT_FLOAT_REF",e[e.DT_DOUBLE_REF=102]="DT_DOUBLE_REF",e[e.DT_INT32_REF=103]="DT_INT32_REF",e[e.DT_UINT8_REF=104]="DT_UINT8_REF",e[e.DT_INT16_REF=105]="DT_INT16_REF",e[e.DT_INT8_REF=106]="DT_INT8_REF",e[e.DT_STRING_REF=107]="DT_STRING_REF",e[e.DT_COMPLEX64_REF=108]="DT_COMPLEX64_REF",e[e.DT_INT64_REF=109]="DT_INT64_REF",e[e.DT_BOOL_REF=110]="DT_BOOL_REF",e[e.DT_QINT8_REF=111]="DT_QINT8_REF",e[e.DT_QUINT8_REF=112]="DT_QUINT8_REF",e[e.DT_QINT32_REF=113]="DT_QINT32_REF",e[e.DT_BFLOAT16_REF=114]="DT_BFLOAT16_REF"}(E3||(E3={})),function(e){!function(e){e[e.LEGACY=0]="LEGACY",e[e.V1=1]="V1",e[e.V2=2]="V2"}(e.CheckpointFormatVersion||(e.CheckpointFormatVersion={}))}(C3||(C3={}));var T3={};function A3(e){return T3[e]}function R3(e,t,n,r){var i=t.inputParams[e];if(i&&void 0!==i.inputIndexStart){var o=i.inputIndexStart,a=0===i.inputIndexEnd?void 0:void 0===i.inputIndexEnd?o+1:i.inputIndexEnd;if("tensor"===i.type)return D3(t.inputNames[i.inputIndexStart],n,r);if("tensors"===i.type)return t.inputNames.slice(o,a).map((function(e){return D3(e,n,r)}));var s=Array.prototype.slice.call(D3(t.inputNames.slice(o)[0],n,r).dataSync());return"number"===i.type?s[0]:s}var l=t.attrParams[e];return l&&l.value}function D3(e,t,n){var r=L3(e),i=r[0],o=r[1],a=n.currentContextIds.find((function(e){return!!t[P3(i,e)]}));return void 0!==a?t[P3(i,a)][o]:void 0}function O3(e,t){var n=L3(e),r=n[0],i=n[1];return[P3(r,t&&t.currentContextId),i]}function P3(e,t){return t?e+"-"+t:e}function L3(e){var t=e.lastIndexOf(":");return-1===t?[e,0]:[e.substring(0,t),Number(e.substring(t+1))]}function M3(e,t){for(var n=[],r=0;r<e.length;r+=t)n.push(e.slice(r,r+t));return n}var F3=Object.freeze({json:[{tfOpName:"Add",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddV2",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AddN",category:"arithmetic",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"BiasAdd",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sub",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"RealDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Div",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorDiv",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mul",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Maximum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Minimum",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}]},{tfOpName:"Pow",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"SquaredDifference",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Mod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"FloorMod",category:"arithmetic",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),j3=Object.freeze({json:[{tfOpName:"Abs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atan2",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ceil",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ClipByValue",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"clip_value_min",name:"clipValueMin",type:"number"},{tfName:"clip_value_max",name:"clipValueMax",type:"number"}]},{tfOpName:"Complex",category:"basic_math",inputs:[{start:0,name:"real",type:"tensor"},{start:1,name:"imag",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ComplexAbs",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cos",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Cosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Elu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Exp",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Floor",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Imag",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Neg",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Real",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"Tout",name:"outputType",type:"dtype",notSupported:!0}]},{tfOpName:"Prelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"alpha",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Relu6",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"clipValueMin",name:"clipValueMin",type:"number",defaultValue:0},{tfName:"clipValueMax",name:"clipValueMax",type:"number",defaultValue:6}]},{tfOpName:"Selu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sigmoid",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sin",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Rsqrt",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Square",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tan",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Tanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Sign",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Round",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Expm1",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Log1p",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Reciprocal",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Softplus",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Asinh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Acosh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Atanh",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Erf",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Prod",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axes",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LeakyRelu",category:"basic_math",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"alpha",name:"alpha",type:"number",defaultValue:.2},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),B3=Object.freeze({json:[{tfOpName:"LoopCond",category:"control",inputs:[{start:0,name:"pred",type:"tensor"}]},{tfOpName:"Switch",category:"control",inputs:[{start:0,name:"data",type:"tensor"},{start:1,name:"pred",type:"tensor"}]},{tfOpName:"Merge",category:"control",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}]},{tfOpName:"Enter",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"frame_name",name:"frameName",type:"string"},{tfName:"is_constant",name:"isConstant",type:"bool"}]},{tfOpName:"Exit",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NextIteration",category:"control",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayV3",category:"control",inputs:[{start:0,name:"size",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"},{tfName:"dynamic_size",name:"dynamicSize",type:"bool"},{tfName:"clear_after_read",name:"clearAfterRead",type:"bool"},{tfName:"identical_element_shapes",name:"identicalElementShapes",type:"bool"},{tfName:"tensor_array_name",name:"name",type:"string"}]},{tfOpName:"TensorArrayWriteV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayReadV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"index",type:"number"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"TensorArrayGatherV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape",name:"elementShape",type:"shape"}]},{tfOpName:"TensorArrayScatterV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"indices",type:"number[]"},{start:2,name:"tensor",type:"tensor"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArrayConcatV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"element_shape_except0",name:"elementShapeExcept0",type:"shape",notSupported:!0}]},{tfOpName:"TensorArraySplitV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"tensor",type:"tensor"},{start:2,name:"lengths",type:"number[]"},{start:3,name:"flowIn",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"TensorArraySizeV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"},{start:1,name:"flowIn",type:"number"}]},{tfOpName:"TensorArrayCloseV3",category:"control",inputs:[{start:0,name:"tensorArrayId",type:"number"}]}]}),V3=Object.freeze({json:[{tfOpName:"AvgPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"AvgPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"MaxPool3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0},{tfName:"ksize",name:"kernelSize",type:"number[]"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Conv1D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"stride",name:"stride",type:"number"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NWC"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"dilation",name:"dilation",type:"number",defaultValue:1}]},{tfOpName:"Conv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"useCudnnOnGpu",name:"useCudnnOnGpu",type:"bool"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"_FusedConv2D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:2,end:0,name:"args",type:"tensors"}],attrs:[{tfName:"num_args",name:"numArgs",type:"number"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0},{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"explicit_paddings",name:"explicitPaddings",type:"number[]",defaultValue:[]},{tfName:"use_cudnn_on_gpu",name:"useCudnnOnGpu",type:"bool",defaultValue:!0},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]",defaultValue:[1,1,1,1]},{tfName:"fused_ops",name:"fusedOps",type:"string[]",defaultValue:[]},{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:1e-4}]},{tfOpName:"Conv2DBackpropInput",category:"convolution",inputs:[{start:2,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"},{start:0,name:"outputShape",type:"number[]"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"DepthwiseConv2d",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"DepthwiseConv2dNative",category:"convolution",inputs:[{start:0,name:"input",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]},{tfOpName:"Conv3D",category:"convolution",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"filter",type:"tensor"}],attrs:[{tfName:"strides",name:"strides",type:"number[]"},{tfName:"padding",name:"pad",type:"string"},{tfName:"data_format",name:"dataFormat",type:"string",defaultValue:"NHWC"},{tfName:"dilations",name:"dilations",type:"number[]"}]}]}),z3=Object.freeze({json:[{tfOpName:"Fill",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"},{start:1,name:"value",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"LinSpace",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"num",type:"number"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"OneHot",category:"creation",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"depth",type:"number"},{start:2,name:"onValue",type:"number",defaultValue:1},{start:3,name:"offValue",type:"number",defaultValue:0}],attrs:[{tfName:"axis",name:"axis",type:"number",notSupported:!0},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Ones",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"OnesLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"RandomUniform",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"minval",name:"minval",type:"number",defaultValue:0},{tfName:"maxval",name:"maxval",type:"number",defaultValue:1},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"seed",name:"seed",type:"number",defaultValue:0},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Range",category:"creation",inputs:[{start:0,name:"start",type:"number"},{start:1,name:"stop",type:"number"},{start:2,name:"step",type:"number",defaultValue:0}],attrs:[{tfName:"Tidx",name:"dtype",type:"dtype"}]},{tfOpName:"TruncatedNormal",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"means",name:"mean",type:"number",defaultValue:0},{tfName:"stddev",name:"stdDev",type:"number",defaultValue:1},{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number",defaultValue:0,notSupported:!0},{tfName:"dtype",name:"dtype",type:"dtype"},{tfName:"T",name:"T",type:"number",notSupported:!0}]},{tfOpName:"Zeros",category:"creation",inputs:[{start:0,name:"shape",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"ZerosLike",category:"creation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype"}]},{tfOpName:"Multinomial",category:"creation",inputs:[{start:0,name:"logits",type:"tensor"},{start:1,name:"numSamples",type:"number"}],attrs:[{tfName:"seed",name:"seed",type:"number"},{tfName:"seed2",name:"seed2",type:"number"},{tfName:"T",name:"dtype",type:"dtype"},{tfName:"output_dtype",name:"output_dtype",type:"dtype"}]}]}),U3=Object.freeze({json:[{tfOpName:"NonMaxSuppressionV2",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"}]},{tfOpName:"NonMaxSuppressionV3",category:"dynamic",inputs:[{start:0,name:"boxes",type:"tensor"},{start:1,name:"scores",type:"tensor"},{start:2,name:"maxOutputSize",type:"number"},{start:3,name:"iouThreshold",type:"number"},{start:4,name:"scoreThreshold",type:"number"}]},{tfOpName:"Where",category:"dynamic",inputs:[{start:0,name:"condition",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ListDiff",category:"dynamic",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"y",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),$3=Object.freeze({json:[{tfOpName:"TopKV2",category:"evaluation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"k",type:"number"}],attrs:[{tfName:"sorted",name:"sorted",type:"bool"}]}]}),q3=Object.freeze({json:[{tfOpName:"PlaceholderWithDefault",category:"graph",inputs:[{start:0,name:"default",type:"tensor"}],attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Placeholder",category:"graph",attrs:[{tfName:"shape",name:"shape",type:"shape"},{tfName:"dtype",name:"dtype",type:"dtype"}]},{tfOpName:"Const",category:"graph"},{tfOpName:"Identity",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IdentityN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Snapshot",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Rank",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Size",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"Shape",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"ShapeN",category:"graph",inputs:[{start:0,end:0,name:"x",type:"tensors"}]},{tfOpName:"Print",category:"graph",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"data",type:"tensors"}],attrs:[{tfName:"message",name:"message",type:"string"},{tfName:"first_n",name:"firstN",type:"number",notSupported:!0},{tfName:"summarize",name:"summarize",type:"number",defaultValue:3}]},{tfOpName:"NoOp",category:"graph",inputs:[]},{tfOpName:"StopGradient",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"FakeQuantWithMinMaxVars",category:"graph",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"min",name:"min",type:"number"},{tfName:"max",name:"max",type:"number"}]}]}),W3=Object.freeze({json:[{tfOpName:"ResizeBilinear",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"ResizeNearestNeighbor",category:"image",inputs:[{start:0,name:"images",type:"tensor"},{start:1,name:"size",type:"number[]"}],attrs:[{tfName:"align_corners",name:"alignCorners",type:"bool"},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"CropAndResize",category:"image",inputs:[{start:0,name:"image",type:"tensor"},{start:1,name:"boxes",type:"tensor"},{start:2,name:"boxInd",type:"tensor"},{start:3,name:"cropSize",type:"number[]"}],attrs:[{tfName:"method",name:"method",type:"string"},{tfName:"extrapolation_value",name:"extrapolationValue",type:"number"}]}]}),H3=Object.freeze({json:[{tfOpName:"Equal",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"NotEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Greater",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"GreaterEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Less",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LessEqual",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalAnd",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalNot",category:"logical",inputs:[{start:0,name:"a",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"LogicalOr",category:"logical",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Select",category:"logical",inputs:[{start:0,name:"condition",type:"tensor"},{start:1,name:"a",type:"tensor"},{start:2,name:"b",type:"tensor"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),G3=Object.freeze({json:[{tfOpName:"MatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"transpose_a",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"transpose_b",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMul",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"BatchMatMulV2",category:"matrices",inputs:[{start:0,name:"a",type:"tensor"},{start:1,name:"b",type:"tensor"}],attrs:[{tfName:"adj_x",name:"transposeA",type:"bool",defaultValue:!1},{tfName:"adj_y",name:"transposeB",type:"bool",defaultValue:!1},{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]},{tfOpName:"Transpose",category:"matrices",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"perm",type:"number[]"}],attrs:[{tfName:"T",name:"dtype",type:"dtype",notSupported:!0}]}]}),K3=Object.freeze({json:[{tfOpName:"FusedBatchNorm",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV2",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"FusedBatchNormV3",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"scale",type:"tensor"},{start:2,name:"offset",type:"tensor"},{start:3,name:"mean",type:"tensor"},{start:4,name:"variance",type:"tensor"}],attrs:[{tfName:"epsilon",name:"epsilon",type:"number",defaultValue:.001},{tfName:"data_format",name:"dataFormat",type:"string",notSupported:!0}]},{tfOpName:"LRN",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"depth_radius",name:"radius",type:"number",defaultValue:5},{tfName:"bias",name:"bias",type:"number",defaultValue:1},{tfName:"alpha",name:"alpha",type:"number",defaultValue:1},{tfName:"beta",name:"beta",type:"number",defaultValue:.5}]},{tfOpName:"Softmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"LogSoftmax",category:"normalization",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"SparseToDense",category:"normalization",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!0,notSupported:!0}]}]}),Y3=Object.freeze({json:[{tfOpName:"Max",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Mean",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Min",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Sum",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"All",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"Any",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]},{tfOpName:"ArgMax",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"ArgMin",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Prod",category:"reduction",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}],attrs:[{tfName:"keep_dims",name:"keepDims",type:"bool"}]}]}),X3=Object.freeze({json:[{tfOpName:"ConcatV2",category:"slice_join",inputs:[{start:0,end:-1,name:"tensors",type:"tensors"},{start:-1,name:"axis",type:"number"}]},{tfOpName:"Concat",category:"slice_join",inputs:[{start:1,end:0,name:"tensors",type:"tensors"},{start:0,name:"axis",type:"number"}]},{tfOpName:"GatherV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Gather",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"validate_indices",name:"validateIndices",type:"bool",notSupported:!0}]},{tfOpName:"Reverse",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"dims",type:"bool",notSupported:!0}]},{tfOpName:"ReverseV2",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number[]"}]},{tfOpName:"Slice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"size",type:"number[]"}]},{tfOpName:"StridedSlice",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"begin",type:"number[]"},{start:2,name:"end",type:"number[]"},{start:3,name:"strides",type:"number[]"}],attrs:[{tfName:"begin_mask",name:"beginMask",type:"number",defaultValue:0},{tfName:"end_mask",name:"endMask",type:"number",defaultValue:0},{tfName:"new_axis_mask",name:"newAxisMask",type:"number",defaultValue:0},{tfName:"ellipsis_mask",name:"ellipsisMask",type:"number",defaultValue:0},{tfName:"shrink_axis_mask",name:"shrinkAxisMask",type:"number",defaultValue:0}]},{tfOpName:"Pack",category:"slice_join",inputs:[{start:0,end:0,name:"tensors",type:"tensors"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0}]},{tfOpName:"Unpack",category:"slice_join",inputs:[{start:0,name:"tensor",type:"tensor"}],attrs:[{tfName:"axis",name:"axis",type:"number",defaultValue:0},{tfName:"num",name:"num",type:"number",defaultValue:0,notSupported:!0}]},{tfOpName:"Tile",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"reps",type:"number[]"}]},{tfOpName:"Split",category:"slice_join",inputs:[{start:0,name:"axis",type:"number",defaultValue:0},{start:1,name:"x",type:"tensor"}],attrs:[{tfName:"num_split",name:"numOrSizeSplits",type:"number",defaultValue:1}]},{tfOpName:"SplitV",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"numOrSizeSplits",type:"number[]"},{start:2,name:"axis",type:"number",defaultValue:0}]},{tfOpName:"ScatterNd",category:"slice_join",inputs:[{start:0,name:"indices",type:"tensor"},{start:1,name:"values",type:"tensor"},{start:2,name:"shape",type:"number[]"}]},{tfOpName:"GatherNd",category:"slice_join",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"indices",type:"tensor"}]},{tfOpName:"SparseToDense",category:"slice_join",inputs:[{start:0,name:"sparseIndices",type:"tensor"},{start:1,name:"outputShape",type:"number[]"},{start:2,name:"sparseValues",type:"tensor"},{start:3,name:"defaultValue",type:"tensor"}],attrs:[{tfName:"validate_indices",name:"validateIndices",type:"bool",defaultValue:!1,notSupported:!0}]}]}),Q3=Object.freeze({json:[{tfOpName:"FFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"IFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"}]},{tfOpName:"RFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]},{tfOpName:"IRFFT",category:"spectral",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"fft_length",type:"number",notSupported:!0}]}]}),J3=Object.freeze({json:[{tfOpName:"Cast",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"SrcT",name:"sdtype",type:"dtype",notSupported:!0},{tfName:"DstT",name:"dtype",type:"dtype"}]},{tfOpName:"ExpandDims",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"axis",type:"number"}]},{tfOpName:"Pad",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"}],attrs:[{tfName:"constant_value",name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"PadV2",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"padding",type:"number[]"},{start:2,name:"constantValue",type:"number",defaultValue:0}]},{tfOpName:"Reshape",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"shape",type:"number[]"}]},{tfOpName:"Squeeze",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"axis",tfDeprecatedName:"squeeze_dims",name:"axis",type:"number[]"}]},{tfOpName:"SpaceToBatchND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"paddings",type:"number[]"}]},{tfOpName:"BatchToSpaceND",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"},{start:1,name:"blockShape",type:"number[]"},{start:2,name:"crops",type:"number[]"}]},{tfOpName:"DepthToSpace",category:"transformation",inputs:[{start:0,name:"x",type:"tensor"}],attrs:[{tfName:"block_size",name:"blockSize",type:"number"},{tfName:"data_format",name:"dataFormat",type:"string"}]}]}),Z3=function(){function e(){var e=[F3,j3,B3,V3,z3,U3,$3,H3,W3,q3,G3,K3,Y3,X3,Q3,J3],t=[].concat.apply([],e.map((function(e){return e.json})));this.opMappers=t.reduce((function(e,t){return e[t.tfOpName]=t,e}),{})}return Object.defineProperty(e,"Instance",{get:function(){return this._instance||(this._instance=new this)},enumerable:!0,configurable:!0}),e.prototype.transformGraph=function(e){var t=this,n=[],r=[],i=e.node.reduce((function(e,i){return e[i.name]=t.mapNode(i),"Placeholder"===i.op&&n.push(e[i.name]),"Const"===i.op&&r.push(e[i.name]),e}),{}),o=[],a=[],s=Object.keys(i);return s.forEach((function(e){var t=i[e];t.inputNames.forEach((function(e){var n=O3(e)[0];t.inputs.push(i[n]),i[n].children.push(t)})),0===t.inputs.length&&o.push(t)})),s.forEach((function(e){var t=i[e];0===t.children.length&&a.push(t)})),{nodes:i,inputs:o,outputs:a,weights:r,placeholders:n}},e.prototype.mapNode=function(e){var t=A3(e.op)||this.opMappers[e.op]||{};null==e.attr&&(e.attr={});var n={name:e.name,op:e.op,category:t.category,inputNames:(e.input||[]).map((function(e){return e.startsWith("^")?e.substr(1):e})),inputs:[],children:[],inputParams:{},attrParams:{},rawAttrs:e.attr};return null!=t.inputs&&(n.inputParams=t.inputs.reduce((function(e,t){return e[t.name]={type:t.type,inputIndexStart:t.start,inputIndexEnd:t.end},e}),{})),null!=t.attrs&&(n.attrParams=t.attrs.reduce((function(t,n){var r=n.type,i=void 0;switch(n.type){case"string":void 0===(i=t5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=t5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"string[]":void 0===(i=c5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=c5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number":void 0===(i=r5(e.attr,n.tfName,n.defaultValue||0))&&n.tfDeprecatedName&&(i=r5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"number[]":void 0===(i=u5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=u5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool":void 0===(i=n5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=n5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"bool[]":void 0===(i=h5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=h5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape":void 0===(i=l5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=l5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"shape[]":void 0===(i=d5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=d5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype":void 0===(i=o5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=o5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"dtype[]":void 0===(i=a5(e.attr,n.tfName,n.defaultValue))&&n.tfDeprecatedName&&(i=a5(e.attr,n.tfDeprecatedName,n.defaultValue));break;case"tensor":case"tensors":break;default:throw new Error("Unsupported param type: "+n.type+" for op: "+e.op)}return t[n.name]={value:i,type:r},t}),{})),n},e}();function e5(e,t){var n=Array.isArray(e)?String.fromCharCode.apply(null,e):function(e){var t=LW.global;if(void 0!==t.atob)return t.atob(e);if("undefined"!=typeof Buffer)return new Buffer(e,"base64").toString();throw new Error("Unable to decode base64 in this environment. Missing built-in atob() or Buffer()")}(e);return t?n:n.toLowerCase()}function t5(e,t,n,r){void 0===r&&(r=!1);var i=e[t];return null!=i?e5(i.s,r):n}function n5(e,t,n){var r=e[t];return r?r.b:n}function r5(e,t,n){var r=e[t]||{},i=null!=r.i?r.i:null!=r.f?r.f:n;return"number"==typeof i?i:parseInt(i,10)}function i5(e){switch("string"==typeof e&&(e=E3[e]),e){case E3.DT_FLOAT:return"float32";case E3.DT_INT32:return"int32";case E3.DT_BOOL:return"bool";case E3.DT_DOUBLE:return"float32";case E3.DT_STRING:return"string";default:return null}}function o5(e,t,n){var r=e[t];return r&&r.type?i5(r.type):n}function a5(e,t,n){var r=e[t];return r&&r.list&&r.list.type?r.list.type.map((function(e){return i5(e)})):n}function s5(e){if(!e.unknownRank)return null!=e.dim?e.dim.map((function(e){return"number"==typeof e.size?e.size:parseInt(e.size,10)})):[]}function l5(e,t,n){var r=e[t];return r&&r.shape?s5(r.shape):n}function u5(e,t,n){var r=e[t];return r?((r.list.f&&r.list.f.length?r.list.f:r.list.i)||[]).map((function(e){return"number"==typeof e?e:parseInt(e,10)})):n}function c5(e,t,n,r){void 0===r&&(r=!1);var i=e[t];return i&&i.list&&i.list.s?i.list.s.map((function(e){return e5(e,r)})):n}function d5(e,t,n){var r=e[t];return r&&r.list&&r.list.shape?r.list.shape.map((function(e){return s5(e)})):n}function h5(e,t,n){var r=e[t];return r&&r.list&&r.list.b?r.list.b:n}var p5=function(){function e(e,t,n){var r=this;this.node=e,this.tensorMap=t,this.context=n,this.inputs=[],this.attrs={},this.inputs=e.inputNames.map((function(e){return r.getInput(e)})),null!=e.rawAttrs&&(this.attrs=Object.keys(e.rawAttrs).reduce((function(e,t){return e[t]=r.getAttr(t),e}),{}))}return e.prototype.getInput=function(e){return D3(e,this.tensorMap,this.context)},e.prototype.getAttr=function(e,t){var n=this.node.rawAttrs[e];if(null!=n.tensor)return D3(e,this.tensorMap,this.context);if(null!=n.i||null!=n.f)return r5(this.node.rawAttrs,e,t);if(null!=n.s)return t5(this.node.rawAttrs,e,t);if(null!=n.b)return n5(this.node.rawAttrs,e,t);if(null!=n.shape)return l5(this.node.rawAttrs,e,t);if(null!=n.type)return o5(this.node.rawAttrs,e,t);if(null!=n.list){if(null!=n.list.i||null!=n.list.f)return u5(this.node.rawAttrs,e,t);if(null!=n.list.s)return c5(this.node.rawAttrs,e,t);if(null!=n.list.shape)return d5(this.node.rawAttrs,e,t);if(null!=n.list.b)return h5(this.node.rawAttrs,e,t);if(null!=n.list.type)return a5(this.node.rawAttrs,e,t)}return t},e}(),f5=function(){function e(t,n,r,i,o,a,s){this.name=t,this.dtype=n,this.maxSize=r,this.elementShape=i,this.identicalElementShapes=o,this.dynamicSize=a,this.clearAfterRead=s,this.tensors=[],this.closed_=!1,this.id=e.nextId++}return Object.defineProperty(e.prototype,"closed",{get:function(){return this.closed_},enumerable:!0,configurable:!0}),e.prototype.clearAndClose=function(){this.tensors.forEach((function(e){return e.tensor.dispose()})),this.tensors=[],this.closed_=!0},e.prototype.size=function(){return this.tensors.length},e.prototype.read=function(e){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||e>=this.tensors.length)throw new Error("Tried to read from index "+e+", but array size is: "+this.tensors.length);var t=this.tensors[e];if(t.cleared)throw new Error("TensorArray "+this.name+": Could not read index "+e+" twice because it was cleared after a previous read (perhaps try setting clear_after_read = false?).");return this.clearAfterRead&&(t.cleared=!0),t.read=!0,t.tensor},e.prototype.readMany=function(e){var t=this;return e.map((function(e){return t.read(e)}))},e.prototype.write=function(e,t){if(this.closed_)throw new Error("TensorArray "+this.name+" has already been closed.");if(e<0||!this.dynamicSize&&e>=this.maxSize)throw new Error("Tried to write to index "+e+", but array is not resizeable and size is: "+this.maxSize);var n=this.tensors[e]||{};if(t.dtype!==this.dtype)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+",\n          because the value dtype is "+t.dtype+", but TensorArray dtype is "+this.dtype+".");if(0!==this.size()||null!=this.elementShape&&0!==this.elementShape.length||(this.elementShape=t.shape),this.assertShapesMatchAllowUndefinedSize(this.elementShape,t.shape,"TensorArray "+this.name+": Could not write to TensorArray index "+e+"."),n&&n.read)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been read.");if(n&&n.written)throw new Error("TensorArray "+this.name+": Could not write to TensorArray index "+e+", because it has already been written.");n.tensor=t,n.written=!0,this.tensors[e]=n},e.prototype.writeMany=function(e,t){var n=this;if(e.length!==t.length)throw new Error("TensorArray "+this.name+": could not write multiple tensors,because the index size: "+e.length+" is not the same as tensors size: "+t.length+".");e.forEach((function(e,r){return n.write(e,t[r])}))},e.prototype.gather=function(e,t){if(t&&t!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but gather requested dtype "+t);if(!e){e=[];for(var n=0;n<this.size();n++)e.push(n)}if(0===e.length)return IK([],[0].concat(this.elementShape));var r=this.readMany(e);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,r[0].shape,"TensorArray shape mismatch: "),TY(r,0)},e.prototype.concat=function(e){if(e&&e!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but concat requested dtype "+e);if(0===this.size())return IK([],[0].concat(this.elementShape));for(var t=[],n=0;n<this.size();n++)t.push(n);var r=this.readMany(t);return this.assertShapesMatchAllowUndefinedSize(this.elementShape,r[0].shape,"TensorArray shape mismatch: tensor array shape ("+this.elementShape+") vs first tensor shape ("+r[0].shape+")"),UK(r,0)},e.prototype.scatter=function(e,t){if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);if(e.length!==t.shape[0])throw new Error("Expected len(indices) == tensor.shape[0], but saw: "+e.length+" vs. "+t.shape[0]);var n=Math.max.apply(Math,e);if(!this.dynamicSize&&n>=this.maxSize)throw new Error("Max index must be < array size ("+n+"  vs. "+this.maxSize+")");this.writeMany(e,DY(t,0))},e.prototype.split=function(e,t){var n=this;if(t.dtype!==this.dtype)throw new Error("TensorArray dtype is "+this.dtype+" but tensor has dtype "+t.dtype);var r=0,i=e.map((function(e){return r+=e}));if(r!==t.shape[0])throw new Error("Expected sum of lengths to be equal to\n          tensor.shape[0], but sum of lengths is\n        "+r+", and tensor's shape is: "+t.shape);if(!this.dynamicSize&&e.length!==this.maxSize)throw new Error("TensorArray's size is not equal to the size of lengths ("+this.maxSize+" vs. "+e.length+"), and the TensorArray is not marked as dynamically resizeable");var o=0===r?0:t.size/r,a=[];iK((function(){t=t.reshape([1,r,o]);for(var s=0;s<e.length;++s){var l=[0,0===s?0:i[s-1],0],u=[1,e[s],o];a[s]=M1(t,l,u).reshape(n.elementShape)}return a}));for(var s=[],l=0;l<e.length;l++)s[l]=l;this.writeMany(s,a)},e.prototype.assertShapesMatchAllowUndefinedSize=function(e,t,n){void 0===n&&(n=""),_H.assert(this.shapesEqualAllowUndefinedSize(e,t),(function(){return n+" Shapes "+e+" and "+t+" must match"}))},e.prototype.shapesEqualAllowUndefinedSize=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(-1!==e[n]&&-1!==t[n]&&e[n]!==t[n])return!1;return!0},e.nextId=0,e}();function m5(e,t,n){var r=function(e,t,n){switch(e.category){case"arithmetic":return function(e,t,n){switch(e.op){case"BiasAdd":case"AddV2":case"Add":return[_0(R3("a",e,t,n),R3("b",e,t,n))];case"AddN":return[E0(R3("tensors",e,t,n))];case"FloorMod":case"Mod":return[P0(R3("a",e,t,n),R3("b",e,t,n))];case"Mul":return[M0(R3("a",e,t,n),R3("b",e,t,n))];case"RealDiv":case"Div":return[S0(R3("a",e,t,n),R3("b",e,t,n))];case"FloorDiv":return[T0(R3("a",e,t,n),R3("b",e,t,n))];case"Sub":return[U0(R3("a",e,t,n),R3("b",e,t,n))];case"Minimum":return[D0(R3("a",e,t,n),R3("b",e,t,n))];case"Maximum":return[A0(R3("a",e,t,n),R3("b",e,t,n))];case"Pow":return[j0(R3("a",e,t,n),R3("b",e,t,n))];case"SquaredDifference":return[V0(R3("a",e,t,n),R3("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"basic_math":return function(e,t,n){switch(e.op){case"Abs":case"ComplexAbs":return[kZ(R3("x",e,t,n))];case"Acos":return[_Z(R3("x",e,t,n))];case"Acosh":return[EZ(R3("x",e,t,n))];case"Asin":return[CZ(R3("x",e,t,n))];case"Asinh":return[IZ(R3("x",e,t,n))];case"Atan":return[SZ(R3("x",e,t,n))];case"Atan2":return[I0(R3("x",e,t,n),R3("y",e,t,n))];case"Atanh":return[NZ(R3("x",e,t,n))];case"Ceil":return[TZ(R3("x",e,t,n))];case"Complex":return[_K(R3("real",e,t,n),R3("imag",e,t,n))];case"Cos":return[RZ(R3("x",e,t,n))];case"Cosh":return[DZ(R3("x",e,t,n))];case"Elu":return[Z1(R3("x",e,t,n))];case"Erf":return[OZ(R3("x",e,t,n))];case"Exp":return[PZ(R3("x",e,t,n))];case"Expm1":return[LZ(R3("x",e,t,n))];case"Floor":return[MZ(R3("x",e,t,n))];case"Log":return[FZ(R3("x",e,t,n))];case"Log1p":return[jZ(R3("x",e,t,n))];case"Imag":return[CK(R3("x",e,t,n))];case"Neg":return[VZ(R3("x",e,t,n))];case"Reciprocal":return[zZ(R3("x",e,t,n))];case"Real":return[EK(R3("x",e,t,n))];case"Relu":return[n2(R3("x",e,t,n))];case"Round":return[UZ(R3("x",e,t,n))];case"Selu":return[i2(R3("x",e,t,n))];case"Sigmoid":return[qZ(R3("x",e,t,n))];case"Sin":return[YZ(R3("x",e,t,n))];case"Sign":return[WZ(R3("x",e,t,n))];case"Sinh":return[XZ(R3("x",e,t,n))];case"Softplus":return[QZ(R3("x",e,t,n))];case"Sqrt":return[JZ(R3("x",e,t,n))];case"Square":return[ZZ(R3("x",e,t,n))];case"Tanh":return[n0(R3("x",e,t,n))];case"Tan":return[t0(R3("x",e,t,n))];case"Relu6":case"ClipByValue":return[AZ(R3("x",e,t,n),R3("clipValueMin",e,t,n),R3("clipValueMax",e,t,n))];case"Rsqrt":return[$Z(D3(e.inputNames[0],t,n))];case"Prod":return[J1(R3("x",e,t,n),R3("axes",e,t,n))];case"LeakyRelu":return[e2(R3("x",e,t,n),R3("alpha",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"control":return function(e,t,n){return S3(this,void 0,void 0,(function(){var r,i,o,a,s,l,u,c,d,h,p,f,m,g,v,y,b,x,w,k,_,E,C,I,S,N,T,A,R,D,O,P,L,M;return N3(this,(function(F){switch(F.label){case 0:switch(e.op){case"LoopCond":return[3,1];case"Switch":return[3,2];case"Merge":return[3,4];case"Enter":return[3,5];case"Exit":return[3,6];case"NextIteration":return[3,7];case"TensorArrayV3":return[3,8];case"TensorArrayWriteV3":return[3,9];case"TensorArrayReadV3":return[3,10];case"TensorArrayGatherV3":return[3,11];case"TensorArrayScatterV3":return[3,12];case"TensorArrayConcatV3":return[3,13];case"TensorArraySplitV3":return[3,14];case"TensorArraySizeV3":return[3,15];case"TensorArrayCloseV3":return[3,16]}return[3,17];case 1:return[2,[R3("pred",e,t,n).clone()]];case 2:return r=R3("pred",e,t,n),i=R3("data",e,t,n),[4,r.data()];case 3:return[2,F.sent()[0]?[void 0,i.clone()]:[i.clone(),void 0]];case 4:return[2,(o=e.inputNames.find((function(e){return void 0!==D3(e,t,n)})))?[D3(o,t,n).clone()]:void 0];case 5:return a=R3("frameName",e,t,n),s=R3("tensor",e,t,n),n.enterFrame(a),[2,[s.clone()]];case 6:return l=R3("tensor",e,t,n),n.exitFrame(),[2,[l.clone()]];case 7:return u=R3("tensor",e,t,n),n.nextIteration(),[2,[u.clone()]];case 8:return c=R3("size",e,t,n),d=R3("dtype",e,t,n),h=R3("elementShape",e,t,n),p=R3("dynamicSize",e,t,n),f=R3("clearAfterRead",e,t,n),m=R3("identicalElementShapes",e,t,n),g=R3("name",e,t,n),v=new f5(g,d,c,h,m,p,f),n.addTensorArray(v),[2,[NK(v.id),NK(1)]];case 9:return y=R3("tensorArrayId",e,t,n),b=R3("index",e,t,n),x=R3("tensor",e,t,n),n.getTensorArray(y).write(b,x),[2,[NK(1)]];case 10:return w=R3("tensorArrayId",e,t,n),k=R3("index",e,t,n),[2,[n.getTensorArray(w).read(k)]];case 11:return _=R3("tensorArrayId",e,t,n),E=R3("indices",e,t,n),C=R3("dtype",e,t,n),[2,[n.getTensorArray(_).gather(E,C)]];case 12:return I=R3("tensorArrayId",e,t,n),S=R3("indices",e,t,n),N=R3("tensor",e,t,n),n.getTensorArray(I).scatter(S,N),[2,[NK(1)]];case 13:return T=R3("tensorArrayId",e,t,n),A=n.getTensorArray(T),R=R3("dtype",e,t,n),[2,[A.concat(R)]];case 14:return D=R3("tensorArrayId",e,t,n),O=R3("tensor",e,t,n),P=R3("lengths",e,t,n),n.getTensorArray(D).split(P,O),[2,[NK(1)]];case 15:return L=R3("tensorArrayId",e,t,n),[2,[NK(n.getTensorArray(L).size(),"int32")]];case 16:return M=R3("tensorArrayId",e,t,n),n.getTensorArray(M).clearAndClose(),[2,[]];case 17:throw TypeError("Node type "+e.op+" is not implemented")}}))}))}(e,t,n);case"convolution":return function(e,t,n){var r,i;switch(e.op){case"Conv1D":var o=R3("stride",e,t,n),a=R3("pad",e,t,n),s=R3("dataFormat",e,t,n).toUpperCase(),l=R3("dilation",e,t,n);return[c1(R3("x",e,t,n),R3("filter",e,t,n),o,a,s,l)];case"Conv2D":o=R3("strides",e,t,n),a=R3("pad",e,t,n),s=R3("dataFormat",e,t,n).toUpperCase();var u=R3("dilations",e,t,n);return[d1(R3("x",e,t,n),R3("filter",e,t,n),[o[1],o[2]],a,s,[u[1],u[2]])];case"_FusedConv2D":var c=(r=R3("fusedOps",e,t,n))[0],d=r[1],h="biasadd"===c,p="prelu"===d,f="fusedbatchnorm"===c,m=R3("numArgs",e,t,n);if(h){if(p&&2!==m)throw new Error("Fused Conv2d with BiasAdd and Prelu must have two extra arguments: bias and alpha.");if(!p&&1!==m)throw new Error("Fused Conv2d with BiasAdd must have one extra argument: bias.")}if(f)throw new Error("Fused Conv2d with FusedBatchNorm is not supported.");o=R3("strides",e,t,n),a=R3("pad",e,t,n),s=R3("dataFormat",e,t,n).toUpperCase(),u=R3("dilations",e,t,n);var g=(i=R3("args",e,t,n))[0],v=i[1];return[e4.conv2d({x:R3("x",e,t,n),filter:R3("filter",e,t,n),strides:[o[1],o[2]],pad:a,dataFormat:s,dilations:[u[1],u[2]],bias:g,activation:d,preluActivationWeights:v})];case"Conv2DBackpropInput":case"Conv2dTranspose":var y=R3("outputShape",e,t,n);return o=R3("strides",e,t,n),a=R3("pad",e,t,n),[b1(R3("x",e,t,n),R3("filter",e,t,n),y,[o[1],o[2]],a)];case"DepthwiseConv2dNative":case"DepthwiseConv2d":return o=R3("strides",e,t,n),a=R3("pad",e,t,n),u=R3("dilations",e,t,n),s=R3("dataFormat",e,t,n).toUpperCase(),[m1(R3("input",e,t,n),R3("filter",e,t,n),[o[1],o[2]],a,s,[u[1],u[2]])];case"Conv3D":return o=R3("strides",e,t,n),a=R3("pad",e,t,n),s=R3("dataFormat",e,t,n).toUpperCase(),u=R3("dilations",e,t,n),[h1(R3("x",e,t,n),R3("filter",e,t,n),[o[1],o[2],o[3]],a,s,[u[1],u[2],u[3]])];case"AvgPool":o=R3("strides",e,t,n),a=R3("pad",e,t,n);var b=R3("kernelSize",e,t,n);return[D1(R3("x",e,t,n),[b[1],b[2]],[o[1],o[2]],a)];case"MaxPool":return o=R3("strides",e,t,n),a=R3("pad",e,t,n),b=R3("kernelSize",e,t,n),[R1(R3("x",e,t,n),[b[1],b[2]],[o[1],o[2]],a)];case"AvgPool3D":return o=R3("strides",e,t,n),a=R3("pad",e,t,n),b=R3("kernelSize",e,t,n),[L1(R3("x",e,t,n),[b[1],b[2],b[3]],[o[1],o[2],o[3]],a)];case"MaxPool3D":return o=R3("strides",e,t,n),a=R3("pad",e,t,n),b=R3("kernelSize",e,t,n),[P1(R3("x",e,t,n),[b[1],b[2],b[3]],[o[1],o[2],o[3]],a)];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"creation":return function(e,t,n){switch(e.op){case"Fill":var r=R3("shape",e,t,n),i=R3("dtype",e,t,n);return[FK(r,R3("value",e,t,n),i)];case"LinSpace":var o=R3("start",e,t,n);return[jK(o,R3("stop",e,t,n),R3("num",e,t,n))];case"Multinomial":var a=R3("logits",e,t,n),s=R3("numSamples",e,t,n),l=R3("seed",e,t,n);return[mY(a,s,l)];case"OneHot":var u=R3("indices",e,t,n),c=R3("depth",e,t,n),d=R3("onValue",e,t,n),h=R3("offValue",e,t,n);return[gY(u,c,d,h)];case"Ones":return[LK(R3("shape",e,t,n),R3("dtype",e,t,n))];case"OnesLike":return[VK(R3("x",e,t,n))];case"RandomUniform":return[CY(R3("shape",e,t,n),R3("minval",e,t,n),R3("maxval",e,t,n),R3("dtype",e,t,n))];case"Range":return[BK(o=R3("start",e,t,n),R3("stop",e,t,n),R3("step",e,t,n),R3("dtype",e,t,n))];case"TruncatedNormal":r=R3("shape",e,t,n);var p=R3("mean",e,t,n),f=R3("stdDev",e,t,n);return l=R3("seed",e,t,n),[RY(r,p,f,R3("dtype",e,t,n),l)];case"Zeros":return[MK(R3("shape",e,t,n),R3("dtype",e,t,n))];case"ZerosLike":return[zK(R3("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"dynamic":return function(e,t,n){return S3(this,void 0,void 0,(function(){var r,i,o,a,s;return N3(this,(function(l){switch(l.label){case 0:switch(e.op){case"NonMaxSuppressionV3":case"NonMaxSuppressionV2":return[3,1];case"Where":return[3,3];case"ListDiff":return[3,5]}return[3,6];case 1:return r=R3("boxes",e,t,n),i=R3("scores",e,t,n),o=R3("maxOutputSize",e,t,n),a=R3("iouThreshold",e,t,n),s=R3("scoreThreshold",e,t,n),[4,X2.nonMaxSuppressionAsync(r,i,o,a,s)];case 2:case 4:return[2,[l.sent()]];case 3:return[4,k0(R3("condition",e,t,n))];case 5:return[2,OY(R3("x",e,t,n),R3("y",e,t,n))];case 6:throw TypeError("Node type "+e.op+" is not implemented")}}))}))}(e,t,n);case"evaluation":return function(e,t,n){if("TopKV2"===e.op){var r=R3("x",e,t,n),i=R3("k",e,t,n),o=R3("sorted",e,t,n),a=h2(r,i,o);return[a.values,a.indices]}throw TypeError("Node type "+e.op+" is not implemented")}(e,t,n);case"image":return function(e,t,n){switch(e.op){case"ResizeBilinear":var r=R3("images",e,t,n),i=R3("size",e,t,n),o=R3("alignCorners",e,t,n);return[X2.resizeBilinear(r,[i[0],i[1]],o)];case"ResizeNearestNeighbor":return r=R3("images",e,t,n),i=R3("size",e,t,n),o=R3("alignCorners",e,t,n),[X2.resizeNearestNeighbor(r,[i[0],i[1]],o)];case"CropAndResize":var a=R3("image",e,t,n),s=R3("boxes",e,t,n),l=R3("boxInd",e,t,n),u=R3("cropSize",e,t,n),c=R3("method",e,t,n),d=R3("extrapolationValue",e,t,n);return[X2.cropAndResize(a,s,l,u,c,d)];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"graph":return function(e,t,n){switch(e.op){case"Const":return t[e.name];case"PlaceholderWithDefault":var r=R3("default",e,t,n);return[D3(e.name,t,n)||r];case"Placeholder":return[D3(e.name,t,n)];case"Identity":case"StopGradient":case"FakeQuantWithMinMaxVars":case"Snapshot":return[R3("x",e,t,n).clone()];case"IdentityN":return R3("x",e,t,n).map((function(e){return e.clone()}));case"Shape":return[TK(R3("x",e,t,n).shape,"int32")];case"ShapeN":return R3("x",e,t,n).map((function(e){return TK(e.shape)}));case"Size":return[NK(R3("x",e,t,n).size,"int32")];case"Rank":return[NK(R3("x",e,t,n).rank,"int32")];case"NoOp":return[];case"Print":var i=R3("x",e,t,n),o=R3("data",e,t,n),a=R3("message",e,t,n),s=R3("summarize",e,t,n);console.warn("The graph has a tf.print() operation,usually used for debugging, which slows down performance."),console.log(a);for(var l=0;l<o.length;l++)console.log(Array.prototype.slice.call(o[l].dataSync()).slice(0,s));return[i];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"logical":return function(e,t,n){switch(e.op){case"Equal":return[q0(R3("a",e,t,n),R3("b",e,t,n))];case"NotEqual":return[e1(R3("a",e,t,n),R3("b",e,t,n))];case"Greater":return[H0(R3("a",e,t,n),R3("b",e,t,n))];case"GreaterEqual":return[G0(R3("a",e,t,n),R3("b",e,t,n))];case"Less":return[X0(R3("a",e,t,n),R3("b",e,t,n))];case"LessEqual":return[Q0(R3("a",e,t,n),R3("b",e,t,n))];case"LogicalAnd":return[v0(R3("a",e,t,n),R3("b",e,t,n))];case"LogicalNot":return[y0(R3("a",e,t,n))];case"LogicalOr":return[b0(R3("a",e,t,n),R3("b",e,t,n))];case"Select":return[w0(R3("condition",e,t,n),R3("a",e,t,n),R3("b",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"matrices":return function(e,t,n){switch(e.op){case"BatchMatMul":case"BatchMatMulV2":case"MatMul":return[w1(R3("a",e,t,n),R3("b",e,t,n),R3("transposeA",e,t,n),R3("transposeB",e,t,n))];case"Transpose":return[o2(R3("x",e,t,n),R3("perm",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"normalization":return function(e,t,n){switch(e.op){case"FusedBatchNorm":case"FusedBatchNormV2":case"FusedBatchNormV3":return[p0(R3("x",e,t,n),R3("mean",e,t,n),R3("variance",e,t,n),R3("offset",e,t,n),R3("scale",e,t,n),R3("epsilon",e,t,n))];case"LRN":return[a2(R3("x",e,t,n),R3("radius",e,t,n),R3("bias",e,t,n),R3("alpha",e,t,n),R3("beta",e,t,n))];case"Softmax":return[QY(R3("x",e,t,n))];case"LogSoftmax":return[JY(R3("x",e,t,n))];case"SparseToDense":return[b2(R3("sparseIndices",e,t,n),R3("outputShape",e,t,n),R3("sparseValues",e,t,n),R3("defaultValue",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"reduction":return function(e,t,n){switch(e.op){case"Max":var r=R3("axis",e,t,n),i=R3("keepDims",e,t,n);return[G1(R3("x",e,t,n),r,i)];case"Mean":return r=R3("axis",e,t,n),i=R3("keepDims",e,t,n),[K1(R3("x",e,t,n),r,i)];case"Min":return r=R3("axis",e,t,n),i=R3("keepDims",e,t,n),[Y1(R3("x",e,t,n),r,i)];case"Sum":return r=R3("axis",e,t,n),i=R3("keepDims",e,t,n),[Q1(R3("x",e,t,n),r,i)];case"All":return r=R3("axis",e,t,n),i=R3("keepDims",e,t,n),[U1(R3("x",e,t,n),r,i)];case"Any":return r=R3("axis",e,t,n),i=R3("keepDims",e,t,n),[$1(R3("x",e,t,n),r,i)];case"ArgMax":return r=R3("axis",e,t,n),[q1(R3("x",e,t,n),r)];case"ArgMin":return r=R3("axis",e,t,n),[W1(R3("x",e,t,n),r)];case"Prod":return r=R3("axis",e,t,n),i=R3("keepDims",e,t,n),[J1(R3("x",e,t,n),r,i)];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"slice_join":return function(e,t,n){switch(e.op){case"ConcatV2":case"Concat":var r=R3("axis",e,t,n),i=R3("tensors",e,t,n);return[UK(i,r)];case"GatherV2":case"Gather":r=R3("axis",e,t,n);var o=R3("x",e,t,n),a=R3("indices",e,t,n);return[i1(o,a.asType("int32"),r)];case"ReverseV2":case"Reverse":return r=R3("axis",e,t,n),o=R3("x",e,t,n),[E1(o,r)];case"Slice":var s=R3("begin",e,t,n),l=R3("size",e,t,n);return[M1(R3("x",e,t,n),s,l)];case"StridedSlice":s=R3("begin",e,t,n);var u=R3("end",e,t,n),c=R3("strides",e,t,n),d=R3("beginMask",e,t,n),h=R3("endMask",e,t,n),p=R3("ellipsisMask",e,t,n),f=R3("newAxisMask",e,t,n),m=R3("shrinkAxisMask",e,t,n),g=R3("x",e,t,n);if(1===s.length&&g.shape.length>1)for(var v=1;v<g.shape.length;v++)s.push(0),u.push(g.shape[v]),c.push(c[0]);return[d2(g,s,u,c,d,h,p,f,m)];case"Pack":return iK((function(){var r=R3("axis",e,t,n),i=R3("tensors",e,t,n),o=i[0].shape,a=i[0].squeeze().shape,s=i.map((function(e){var t=_H.arraysEqual(e.shape,o);if(!t&&!_H.arraysEqual(e.squeeze().shape,a))throw new Error("the input tensors shape does not match");return t?e:e.reshape(o)}));return[TY(s,r)]}));case"Unpack":return iK((function(){var r=R3("axis",e,t,n),i=R3("tensor",e,t,n);return DY(i,r)}));case"Tile":var y=R3("reps",e,t,n);return[AY(R3("x",e,t,n),y)];case"Split":case"SplitV":r=R3("axis",e,t,n);var b=R3("numOrSizeSplits",e,t,n);return GK(R3("x",e,t,n),b,r);case"ScatterNd":a=R3("indices",e,t,n);var x=R3("values",e,t,n),w=R3("shape",e,t,n);return[p2(a,x,w)];case"GatherNd":var k=R3("x",e,t,n);return a=R3("indices",e,t,n),[x2(k,a)];case"SparseToDense":a=R3("sparseIndices",e,t,n),w=R3("outputShape",e,t,n);var _=R3("sparseValues",e,t,n),E=R3("defaultValue",e,t,n);return[b2(a,_,w,_.dtype===E.dtype?E:E.asType(_.dtype))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"spectral":return function(e,t,n){switch(e.op){case"FFT":return[f2(R3("x",e,t,n))];case"IFFT":return[m2(R3("x",e,t,n))];case"RFFT":return[g2(R3("x",e,t,n))];case"IRFFT":return[v2(R3("x",e,t,n))];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"transformation":return function(e,t,n){switch(e.op){case"Cast":return[uY(R3("x",e,t,n),R3("dtype",e,t,n))];case"ExpandDims":var r=R3("axis",e,t,n);return[pY(R3("x",e,t,n),r)];case"Squeeze":return r=R3("axis",e,t,n),[NY(R3("x",e,t,n),r)];case"Reshape":return[IY(R3("x",e,t,n),R3("shape",e,t,n))];case"PadV2":case"Pad":return[vY(R3("x",e,t,n),M3(R3("padding",e,t,n),2),R3("constantValue",e,t,n))];case"SpaceToBatchND":var i=R3("blockShape",e,t,n),o=M3(R3("paddings",e,t,n),2);return[SY(R3("x",e,t,n),i,o)];case"BatchToSpaceND":i=R3("blockShape",e,t,n);var a=M3(R3("crops",e,t,n),2);return[lY(R3("x",e,t,n),i,a)];case"DepthToSpace":var s=R3("blockSize",e,t,n),l=R3("dataFormat",e,t,n).toUpperCase();return[hY(R3("x",e,t,n),s,l)];default:throw TypeError("Node type "+e.op+" is not implemented")}}(e,t,n);case"custom":var r=A3(e.op);if(r&&r.customExecutor)return r.customExecutor(new p5(e,t,n));throw TypeError("Custom op "+e.op+" is not registered.");default:throw TypeError("Unknown op '"+e.op+"'. File an issue at https://github.com/tensorflow/tfjs/issues so we can add it, or register a custom execution with tf.registerOp()")}}(e,t,n);return r instanceof Promise?r.then((function(e){return[].concat(e)})):[].concat(r)}var g5=function(){function e(e,t){this.weightMap=e,this.tensorArrayMap=t,this.rootContext={id:0,frameName:"",iterationId:0},this.contexts=[this.rootContext],this.lastId=0,this.generateCurrentContextIds()}return e.prototype.newFrame=function(e,t){return{id:e,frameName:t,iterationId:0}},Object.defineProperty(e.prototype,"currentContext",{get:function(){return this.contexts},set:function(e){this.contexts!==e&&(this.contexts=e,this.generateCurrentContextIds())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextId",{get:function(){return this._currentContextIds[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentContextIds",{get:function(){return this._currentContextIds},enumerable:!0,configurable:!0}),e.prototype.generateCurrentContextIds=function(){for(var e=[],t=0;t<this.contexts.length-1;t++){var n=this.contexts.slice(0,this.contexts.length-t);e.push(this.contextIdforContexts(n))}e.push(""),this._currentContextIds=e},e.prototype.contextIdforContexts=function(e){return e?e.map((function(e){return 0===e.id&&0===e.iterationId?"":e.frameName+"-"+e.iterationId})).join("/"):""},e.prototype.enterFrame=function(e){this.contexts&&(this.lastId++,this.contexts=this.contexts.slice(),this.contexts.push(this.newFrame(this.lastId,e)),this._currentContextIds.unshift(this.contextIdforContexts(this.contexts)))},e.prototype.exitFrame=function(){if(!(this.contexts&&this.contexts.length>1))throw new Error("Cannot exit frame, the context is empty");this.contexts=this.contexts.slice(),this.contexts.splice(-1),this.currentContextIds.shift()},e.prototype.nextIteration=function(){if(!(this.contexts&&this.contexts.length>0))throw new Error("Cannot increase frame iteration, the context is empty");this.contexts=this.contexts.slice(),this.lastId++;var e=Object.assign({},this.contexts[this.contexts.length-1]);e.iterationId+=1,e.id=this.lastId,this.contexts.splice(-1,1,e),this._currentContextIds.splice(0,1,this.contextIdforContexts(this.contexts))},e.prototype.getWeight=function(e){return this.weightMap[e]},e.prototype.addTensorArray=function(e){this.tensorArrayMap[e.id]=e},e.prototype.getTensorArray=function(e){return this.tensorArrayMap[e]},e}();function v5(e,t,n){for(var r=new Set,i=[],o=null,a=null,s=new Set,l=t.slice();l.length>0;){var u=l.pop();(x5(u)||w5(u))&&null==o&&(a=(o=u).children.map((function(e){return e.name})).filter((function(e){return r.has(e)}))),r.add(u.name),null==n[u.name]&&null==e[u.name]&&(0!==u.inputs.length?u.inputs.forEach((function(e){s.has(e.name)||(s.add(e.name),l.push(e))})):i.push(u.name))}return{inputs:e,outputs:t,usedNodes:r,missingInputs:i,dynamicNode:o,syncInputs:a}}var y5=["Switch","Merge","Enter","Exit","NextIteration"],b5=["NonMaxSuppressionV2","NonMaxSuppressionV3","Where"];function x5(e){return y5.indexOf(e.op)>=0}function w5(e){return b5.indexOf(e.op)>=0}var k5=function(){function e(e){this.graph=e,this.compiledMap=new Map,this._weightMap={},this.SEPERATOR=",",this.placeholders=e.placeholders,this._outputs=e.outputs}return Object.defineProperty(e.prototype,"weightMap",{get:function(){return this._weightMap},set:function(e){var t=Object.keys(e).map((function(t){return e[t].map((function(e){return e.id}))}));this.weightIds=[].concat.apply([],t),this._weightMap=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.placeholders.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this._outputs.map((function(e){return{name:e.name,shape:e.attrParams.shape?e.attrParams.shape.value:void 0,dtype:e.attrParams.dtype?e.attrParams.dtype.value:void 0}}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.placeholders.map((function(e){return e.name}))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.outputs.map((function(e){return e.name}))},enumerable:!0,configurable:!0}),e.prototype.getCompilationKey=function(e,t){var n=e.map((function(e){return e.name})).sort(),r=t.map((function(e){return e.name})).sort();return n.join(this.SEPERATOR)+"--"+r.join(this.SEPERATOR)},e.prototype.compile=function(e,t){var n=v5(e,t,this.weightMap),r=n.missingInputs,i=n.dynamicNode,o=n.syncInputs;if(null!=i)throw new Error("This execution contains the node '"+i.name+"', which has the dynamic op '"+i.op+"'. Please use model.executeAsync() instead. Alternatively, to avoid the dynamic ops, specify the inputs ["+o+"]");if(r.length>0){var a=t.map((function(e){return e.name})),s=Object.keys(e);throw new Error("Cannot compute the outputs ["+a+"] from the provided inputs ["+s+"]. Missing the following inputs: ["+r+"]")}return function(e,t,n){var r=n.usedNodes,i=n.inputs,o=[];Object.keys(i).map((function(t){return e.nodes[t]})).forEach((function(e){r.has(e.name)&&o.push(e)})),e.weights.forEach((function(e){r.has(e.name)&&o.push(e)}));for(var a=new Set,s=[];o.length>0;){var l=o.pop();a.add(l.name),t[l.name]||s.push(l),l.children.forEach((function(e){!a.has(e.name)&&r.has(e.name)&&e.inputs.every((function(e){return a.has(e.name)}))&&o.push(e)}))}return s}(this.graph,this.weightMap,n)},e.prototype.execute=function(e,t){var n=this,r=Object.keys(e).sort();this.checkInputs(e),this.checkInputShapeAndType(e),this.checkOutputs(t);var i=r.map((function(e){return n.graph.nodes[e]})),o=t.map((function(e){return n.graph.nodes[L3(e)[0]]})),a=this.getCompilationKey(i,o),s=this.compiledMap.get(a);null==s&&(s=this.compile(e,o),this.compiledMap.set(a,s));var l={};return iK((function(){var r=new g5(n._weightMap,l),i=I3({},n.weightMap);Object.keys(e).forEach((function(t){i[t]=[e[t]]}));for(var o=n.getFrozenTensorIds(i),a={},u=0;u<s.length;u++){var c=s[u];if(!i[c.name]){var d=m5(c,i,r);if(d instanceof Promise)throw new Error("The execution of the op '"+c.op+"' returned a promise. Please use model.executeAsync() instead.");i[c.name]=d,n.checkTensorForDisposal(c.name,c,i,r,o,t,a)}}return t.map((function(e){return D3(e,i,r)}))}))},e.prototype.getFrozenTensorIds=function(e){var t=[].concat.apply([],Object.keys(e).map((function(t){return e[t]})).map((function(e){return e.map((function(e){return e.id}))})));return new Set(t)},e.prototype.checkTensorForDisposal=function(e,t,n,r,i,o,a){"control"!==t.category&&-1===o.indexOf(e)&&(n[e].forEach((function(e){null!=e&&(a[e.id]=(a[e.id]||0)+t.children.length)})),t.inputs.forEach((function(e){if("control"!==e.category){var t=function(e,t,n){return t[P3(e,n.currentContextId)]}(e.name,n,r);null!=t&&t.forEach((function(e){if(e&&!i.has(e.id)){var t=a[e.id];1===t?(e.dispose(),delete a[e.id]):null!=t&&a[e.id]--}}))}})))},e.prototype.executeAsync=function(e,t){return S3(this,void 0,void 0,(function(){var n,r,i,o,a,s,l=this;return N3(this,(function(u){switch(u.label){case 0:return this.checkInputs(e),this.checkInputShapeAndType(e),this.checkOutputs(t),n={},r=new g5(this._weightMap,n),[4,this.executeWithControlFlow(e,r,t)];case 1:return i=u.sent(),o=t.map((function(e){return D3(e,i,r)})),a=new Set(o.map((function(e){return e.id}))),s=new Set(Object.keys(e).map((function(t){return e[t].id}))),Object.keys(i).forEach((function(e){i[e].forEach((function(e){!e||e.isDisposed||a.has(e.id)||s.has(e.id)||-1!==l.weightIds.indexOf(e.id)||e.dispose()}))})),[2,o]}}))}))},e.prototype.executeWithControlFlow=function(e,t,n){return S3(this,void 0,void 0,(function(){var r,i,o,a,s,l,u,c,d,h,p,f,m,g,v,y,b=this;return N3(this,(function(x){switch(x.label){case 0:r=Object.keys(e),i=r.map((function(e){return b.graph.nodes[e]})),o=n.map((function(e){return b.graph.nodes[L3(e)[0]]})),a=v5(e,o,this.weightMap),s=a.usedNodes,l=a.missingInputs,u=a.dynamicNode,c=a.syncInputs,d=i.concat(this.graph.weights).map((function(e){return{node:e,contexts:t.currentContext}})),h=I3({},this.weightMap),Object.keys(e).forEach((function(t){h[t]=[e[t]]})),p={},f=this.getFrozenTensorIds(h),m={},x.label=1;case 1:return d.length>0?(g=this.processStack(i,d,t,h,m,f,n,p,s),[4,Promise.all(g)]):[3,3];case 2:return x.sent(),[3,1];case 3:if(null==u&&console.warn("This model execution did not contain any nodes with control flow or dynamic output shapes. You can use model.execute() instead."),(v=o.filter((function(e){return!x5(e)&&!D3(e.name,h,t)})).map((function(e){return e.name}))).length>0)throw y="",null!=u&&(y="Alternatively, to avoid the dynamic ops, use model.execute() and specify the inputs ["+c+"]"),new Error("Cannot compute the outputs ["+v+"] from the provided inputs ["+r+"]. Consider providing the following inputs: ["+l+"]. "+y);return[2,h]}}))}))},e.prototype.processStack=function(e,t,n,r,i,o,a,s,l){for(var u=this,c=[],d=function(){var d=t.pop();n.currentContext=d.contexts;var p="";if("Enter"===d.node.op&&R3("isConstant",d.node,r,n)&&(p=O3(d.node.name,n)[0]),-1===e.indexOf(d.node)){var f=m5(d.node,r,n);p||(p=O3(d.node.name,n)[0]);var m=n.currentContext;f instanceof Promise?c.push(f.then((function(e){return r[p]=e,n.currentContext=m,u.checkTensorForDisposal(p,d.node,r,n,o,a,s),u.processChildNodes(d.node,t,n,r,i,l),e}))):(r[p]=f,h.checkTensorForDisposal(p,d.node,r,n,o,a,s),h.processChildNodes(d.node,t,n,r,i,l))}else h.processChildNodes(d.node,t,n,r,i,l)},h=this;t.length>0;)d();return c},e.prototype.processChildNodes=function(e,t,n,r,i,o){e.children.forEach((function(e){var a=O3(e.name,n)[0];!i[a]&&o.has(e.name)&&("Merge"===e.op?e.inputNames.some((function(e){return!!D3(e,r,n)}))&&(i[a]=!0,t.push({contexts:n.currentContext,node:e})):e.inputNames.every((function(e){return!!D3(e,r,n)}))&&(i[a]=!0,t.push({contexts:n.currentContext,node:e})))}))},e.prototype.dispose=function(){var e=this;Object.keys(this.weightMap).forEach((function(t){return e.weightMap[t].forEach((function(e){return e.dispose()}))}))},e.prototype.checkInputShapeAndType=function(e){var t=this;Object.keys(e).forEach((function(n){var r=e[n],i=t.graph.nodes[n];if(i.attrParams.shape&&i.attrParams.shape.value){var o=i.attrParams.shape.value,a=o.length===r.shape.length&&r.shape.every((function(e,t){return-1===o[t]||o[t]===e}));_H.assert(a,(function(){return"The shape of dict['"+i.name+"'] provided in model.execute(dict) must be ["+o+"], but was ["+r.shape+"]"}))}i.attrParams.dtype&&i.attrParams.dtype.value&&_H.assert(r.dtype===i.attrParams.dtype.value,(function(){return"The dtype of dict['"+i.name+"'] provided in model.execute(dict) must be "+i.attrParams.dtype.value+", but was "+r.dtype}))}))},e.prototype.checkInputs=function(e){var t=this,n=Object.keys(e).filter((function(e){return!t.graph.nodes[e]}));if(n.length>0)throw new Error("The dict provided in model.execute(dict) has keys: ["+n+"] that are not part of graph")},e.prototype.checkOutputs=function(e){var t=this;e.forEach((function(e){var n=L3(e)[0];if(!t.graph.nodes[n])throw new Error("The output '"+e+"' is not found in the graph")}))},e}(),_5=function(){function e(e,t){void 0===t&&(t={}),this.modelUrl=e,this.loadOptions=t,this.version="n/a",null==t&&(this.loadOptions={})}return Object.defineProperty(e.prototype,"modelVersion",{get:function(){return this.version},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputNodes",{get:function(){return this.executor.inputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputNodes",{get:function(){return this.executor.outputNodes},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"inputs",{get:function(){return this.executor.inputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputs",{get:function(){return this.executor.outputs},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"weights",{get:function(){return this.executor.weightMap},enumerable:!0,configurable:!0}),e.prototype.findIOHandler=function(){var e=this.modelUrl;if(null!=e.load)this.handler=e;else if(null!=this.loadOptions.requestInit)this.handler=J4.browserHTTPRequest(e,this.loadOptions);else{var t=J4.getLoadHandlers(e,this.loadOptions.onProgress);if(0===t.length)t.push(J4.browserHTTPRequest(e,this.loadOptions));else if(t.length>1)throw new Error("Found more than one ("+t.length+") load handlers for URL '"+[e]+"'");this.handler=t[0]}},e.prototype.load=function(){return S3(this,void 0,void 0,(function(){var e,t,n;return N3(this,(function(r){switch(r.label){case 0:if(this.findIOHandler(),null==this.handler.load)throw new Error("Cannot proceed with model loading because the IOHandler provided does not have the `load` method implemented.");return[4,this.handler.load()];case 1:return e=r.sent(),t=e.modelTopology,this.version=t.versions.producer+"."+t.versions.minConsumer,n=J4.decodeWeights(e.weightData,e.weightSpecs),this.executor=new k5(Z3.Instance.transformGraph(t)),this.executor.weightMap=this.convertTensorMapToTensorsMap(n),[2,!0]}}))}))},e.prototype.predict=function(e,t){return this.execute(e,this.outputNodes)},e.prototype.normalizeInputs=function(e){if(!(e instanceof PH||Array.isArray(e)))return e;if((e=Array.isArray(e)?e:[e]).length!==this.inputNodes.length)throw new Error("Input tensor count mismatch,the graph model has "+this.inputNodes.length+" placeholders, while there are "+e.length+" input tensors.");return this.inputNodes.reduce((function(t,n,r){return t[n]=e[r],t}),{})},e.prototype.normalizeOutputs=function(e){return e=e||this.outputNodes,Array.isArray(e)?e:[e]},e.prototype.execute=function(e,t){e=this.normalizeInputs(e),t=this.normalizeOutputs(t);var n=this.executor.execute(e,t);return n.length>1?n:n[0]},e.prototype.executeAsync=function(e,t){return S3(this,void 0,void 0,(function(){var n;return N3(this,(function(r){switch(r.label){case 0:return e=this.normalizeInputs(e),t=this.normalizeOutputs(t),[4,this.executor.executeAsync(e,t)];case 1:return[2,(n=r.sent()).length>1?n:n[0]]}}))}))},e.prototype.convertTensorMapToTensorsMap=function(e){return Object.keys(e).reduce((function(t,n){return t[n]=[e[n]],t}),{})},e.prototype.dispose=function(){this.executor.dispose()},e}();function E5(e,t){return void 0===t&&(t={}),S3(this,void 0,void 0,(function(){var n;return N3(this,(function(r){switch(r.label){case 0:if(null==e)throw new Error("modelUrl in loadGraphModel() cannot be null. Please provide a url or an IOHandler that loads the model");return null==t&&(t={}),t.fromTFHub&&null==e.load&&(e.endsWith("/")||(e+="/"),e+="model.json?tfjs-format=file"),[4,(n=new _5(e,t)).load()];case 1:return r.sent(),[2,n]}}))}))
/**
                * @license
                * Copyright 2019 Google LLC. All Rights Reserved.
                * Licensed under the Apache License, Version 2.0 (the "License");
                * you may not use this file except in compliance with the License.
                * You may obtain a copy of the License at
                *
                * http://www.apache.org/licenses/LICENSE-2.0
                *
                * Unless required by applicable law or agreed to in writing, software
                * distributed under the License is distributed on an "AS IS" BASIS,
                * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
                * See the License for the specific language governing permissions and
                * limitations under the License.
                * =============================================================================
                */}function C5(e,t,n,r){return new(n||(n=Promise))((function(i,o){function a(e){try{l(r.next(e))}catch(e){o(e)}}function s(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?i(e.value):new n((function(t){t(e.value)})).then(a,s)}l((r=r.apply(e,t||[])).next())}))}function I5(e,t){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(o){return function(s){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(e){o=[6,e],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,s])}}}var S5={0:"tench, Tinca tinca",1:"goldfish, Carassius auratus",2:"great white shark, white shark, man-eater, man-eating shark, Carcharodon carcharias",3:"tiger shark, Galeocerdo cuvieri",4:"hammerhead, hammerhead shark",5:"electric ray, crampfish, numbfish, torpedo",6:"stingray",7:"cock",8:"hen",9:"ostrich, Struthio camelus",10:"brambling, Fringilla montifringilla",11:"goldfinch, Carduelis carduelis",12:"house finch, linnet, Carpodacus mexicanus",13:"junco, snowbird",14:"indigo bunting, indigo finch, indigo bird, Passerina cyanea",15:"robin, American robin, Turdus migratorius",16:"bulbul",17:"jay",18:"magpie",19:"chickadee",20:"water ouzel, dipper",21:"kite",22:"bald eagle, American eagle, Haliaeetus leucocephalus",23:"vulture",24:"great grey owl, great gray owl, Strix nebulosa",25:"European fire salamander, Salamandra salamandra",26:"common newt, Triturus vulgaris",27:"eft",28:"spotted salamander, Ambystoma maculatum",29:"axolotl, mud puppy, Ambystoma mexicanum",30:"bullfrog, Rana catesbeiana",31:"tree frog, tree-frog",32:"tailed frog, bell toad, ribbed toad, tailed toad, Ascaphus trui",33:"loggerhead, loggerhead turtle, Caretta caretta",34:"leatherback turtle, leatherback, leathery turtle, Dermochelys coriacea",35:"mud turtle",36:"terrapin",37:"box turtle, box tortoise",38:"banded gecko",39:"common iguana, iguana, Iguana iguana",40:"American chameleon, anole, Anolis carolinensis",41:"whiptail, whiptail lizard",42:"agama",43:"frilled lizard, Chlamydosaurus kingi",44:"alligator lizard",45:"Gila monster, Heloderma suspectum",46:"green lizard, Lacerta viridis",47:"African chameleon, Chamaeleo chamaeleon",48:"Komodo dragon, Komodo lizard, dragon lizard, giant lizard, Varanus komodoensis",49:"African crocodile, Nile crocodile, Crocodylus niloticus",50:"American alligator, Alligator mississipiensis",51:"triceratops",52:"thunder snake, worm snake, Carphophis amoenus",53:"ringneck snake, ring-necked snake, ring snake",54:"hognose snake, puff adder, sand viper",55:"green snake, grass snake",56:"king snake, kingsnake",57:"garter snake, grass snake",58:"water snake",59:"vine snake",60:"night snake, Hypsiglena torquata",61:"boa constrictor, Constrictor constrictor",62:"rock python, rock snake, Python sebae",63:"Indian cobra, Naja naja",64:"green mamba",65:"sea snake",66:"horned viper, cerastes, sand viper, horned asp, Cerastes cornutus",67:"diamondback, diamondback rattlesnake, Crotalus adamanteus",68:"sidewinder, horned rattlesnake, Crotalus cerastes",69:"trilobite",70:"harvestman, daddy longlegs, Phalangium opilio",71:"scorpion",72:"black and gold garden spider, Argiope aurantia",73:"barn spider, Araneus cavaticus",74:"garden spider, Aranea diademata",75:"black widow, Latrodectus mactans",76:"tarantula",77:"wolf spider, hunting spider",78:"tick",79:"centipede",80:"black grouse",81:"ptarmigan",82:"ruffed grouse, partridge, Bonasa umbellus",83:"prairie chicken, prairie grouse, prairie fowl",84:"peacock",85:"quail",86:"partridge",87:"African grey, African gray, Psittacus erithacus",88:"macaw",89:"sulphur-crested cockatoo, Kakatoe galerita, Cacatua galerita",90:"lorikeet",91:"coucal",92:"bee eater",93:"hornbill",94:"hummingbird",95:"jacamar",96:"toucan",97:"drake",98:"red-breasted merganser, Mergus serrator",99:"goose",100:"black swan, Cygnus atratus",101:"tusker",102:"echidna, spiny anteater, anteater",103:"platypus, duckbill, duckbilled platypus, duck-billed platypus, Ornithorhynchus anatinus",104:"wallaby, brush kangaroo",105:"koala, koala bear, kangaroo bear, native bear, Phascolarctos cinereus",106:"wombat",107:"jelly fish",108:"sea anemone, anemone",109:"brain coral",110:"flatworm, platyhelminth",111:"nematode, nematode worm, roundworm",112:"conch",113:"snail",114:"slug",115:"sea slug, nudibranch",116:"chiton, coat-of-mail shell, sea cradle, polyplacophore",117:"chambered nautilus, pearly nautilus, nautilus",118:"Dungeness crab, Cancer magister",119:"rock crab, Cancer irroratus",120:"fiddler crab",121:"king crab, Alaska crab, Alaskan king crab, Alaska king crab, Paralithodes camtschatica",122:"American lobster, Northern lobster, Maine lobster, Homarus americanus",123:"spiny lobster, langouste, rock lobster, crawfish, crayfish, sea crawfish",124:"crayfish, crawfish, crawdad, crawdaddy",125:"hermit crab",126:"isopod",127:"white stork, Ciconia ciconia",128:"black stork, Ciconia nigra",129:"spoonbill",130:"flamingo",131:"little blue heron, Egretta caerulea",132:"American egret, great white heron, Egretta albus",133:"bittern",134:"crane",135:"limpkin, Aramus pictus",136:"European gallinule, Porphyrio porphyrio",137:"American coot, marsh hen, mud hen, water hen, Fulica americana",138:"bustard",139:"ruddy turnstone, Arenaria interpres",140:"red-backed sandpiper, dunlin, Erolia alpina",141:"redshank, Tringa totanus",142:"dowitcher",143:"oystercatcher, oyster catcher",144:"pelican",145:"king penguin, Aptenodytes patagonica",146:"albatross, mollymawk",147:"grey whale, gray whale, devilfish, Eschrichtius gibbosus, Eschrichtius robustus",148:"killer whale, killer, orca, grampus, sea wolf, Orcinus orca",149:"dugong, Dugong dugon",150:"sea lion",151:"Chihuahua",152:"Japanese spaniel",153:"Maltese dog, Maltese terrier, Maltese",154:"Pekinese, Pekingese, Peke",155:"Shih-Tzu",156:"Blenheim spaniel",157:"papillon",158:"toy terrier",159:"Rhodesian ridgeback",160:"Afghan hound, Afghan",161:"basset, basset hound",162:"beagle",163:"bloodhound, sleuthhound",164:"bluetick",165:"black-and-tan coonhound",166:"Walker hound, Walker foxhound",167:"English foxhound",168:"redbone",169:"borzoi, Russian wolfhound",170:"Irish wolfhound",171:"Italian greyhound",172:"whippet",173:"Ibizan hound, Ibizan Podenco",174:"Norwegian elkhound, elkhound",175:"otterhound, otter hound",176:"Saluki, gazelle hound",177:"Scottish deerhound, deerhound",178:"Weimaraner",179:"Staffordshire bullterrier, Staffordshire bull terrier",180:"American Staffordshire terrier, Staffordshire terrier, American pit bull terrier, pit bull terrier",181:"Bedlington terrier",182:"Border terrier",183:"Kerry blue terrier",184:"Irish terrier",185:"Norfolk terrier",186:"Norwich terrier",187:"Yorkshire terrier",188:"wire-haired fox terrier",189:"Lakeland terrier",190:"Sealyham terrier, Sealyham",191:"Airedale, Airedale terrier",192:"cairn, cairn terrier",193:"Australian terrier",194:"Dandie Dinmont, Dandie Dinmont terrier",195:"Boston bull, Boston terrier",196:"miniature schnauzer",197:"giant schnauzer",198:"standard schnauzer",199:"Scotch terrier, Scottish terrier, Scottie",200:"Tibetan terrier, chrysanthemum dog",201:"silky terrier, Sydney silky",202:"soft-coated wheaten terrier",203:"West Highland white terrier",204:"Lhasa, Lhasa apso",205:"flat-coated retriever",206:"curly-coated retriever",207:"golden retriever",208:"Labrador retriever",209:"Chesapeake Bay retriever",210:"German short-haired pointer",211:"vizsla, Hungarian pointer",212:"English setter",213:"Irish setter, red setter",214:"Gordon setter",215:"Brittany spaniel",216:"clumber, clumber spaniel",217:"English springer, English springer spaniel",218:"Welsh springer spaniel",219:"cocker spaniel, English cocker spaniel, cocker",220:"Sussex spaniel",221:"Irish water spaniel",222:"kuvasz",223:"schipperke",224:"groenendael",225:"malinois",226:"briard",227:"kelpie",228:"komondor",229:"Old English sheepdog, bobtail",230:"Shetland sheepdog, Shetland sheep dog, Shetland",231:"collie",232:"Border collie",233:"Bouvier des Flandres, Bouviers des Flandres",234:"Rottweiler",235:"German shepherd, German shepherd dog, German police dog, alsatian",236:"Doberman, Doberman pinscher",237:"miniature pinscher",238:"Greater Swiss Mountain dog",239:"Bernese mountain dog",240:"Appenzeller",241:"EntleBucher",242:"boxer",243:"bull mastiff",244:"Tibetan mastiff",245:"French bulldog",246:"Great Dane",247:"Saint Bernard, St Bernard",248:"Eskimo dog, husky",249:"malamute, malemute, Alaskan malamute",250:"Siberian husky",251:"dalmatian, coach dog, carriage dog",252:"affenpinscher, monkey pinscher, monkey dog",253:"basenji",254:"pug, pug-dog",255:"Leonberg",256:"Newfoundland, Newfoundland dog",257:"Great Pyrenees",258:"Samoyed, Samoyede",259:"Pomeranian",260:"chow, chow chow",261:"keeshond",262:"Brabancon griffon",263:"Pembroke, Pembroke Welsh corgi",264:"Cardigan, Cardigan Welsh corgi",265:"toy poodle",266:"miniature poodle",267:"standard poodle",268:"Mexican hairless",269:"timber wolf, grey wolf, gray wolf, Canis lupus",270:"white wolf, Arctic wolf, Canis lupus tundrarum",271:"red wolf, maned wolf, Canis rufus, Canis niger",272:"coyote, prairie wolf, brush wolf, Canis latrans",273:"dingo, warrigal, warragal, Canis dingo",274:"dhole, Cuon alpinus",275:"African hunting dog, hyena dog, Cape hunting dog, Lycaon pictus",276:"hyena, hyaena",277:"red fox, Vulpes vulpes",278:"kit fox, Vulpes macrotis",279:"Arctic fox, white fox, Alopex lagopus",280:"grey fox, gray fox, Urocyon cinereoargenteus",281:"tabby, tabby cat",282:"tiger cat",283:"Persian cat",284:"Siamese cat, Siamese",285:"Egyptian cat",286:"cougar, puma, catamount, mountain lion, painter, panther, Felis concolor",287:"lynx, catamount",288:"leopard, Panthera pardus",289:"snow leopard, ounce, Panthera uncia",290:"jaguar, panther, Panthera onca, Felis onca",291:"lion, king of beasts, Panthera leo",292:"tiger, Panthera tigris",293:"cheetah, chetah, Acinonyx jubatus",294:"brown bear, bruin, Ursus arctos",295:"American black bear, black bear, Ursus americanus, Euarctos americanus",296:"ice bear, polar bear, Ursus Maritimus, Thalarctos maritimus",297:"sloth bear, Melursus ursinus, Ursus ursinus",298:"mongoose",299:"meerkat, mierkat",300:"tiger beetle",301:"ladybug, ladybeetle, lady beetle, ladybird, ladybird beetle",302:"ground beetle, carabid beetle",303:"long-horned beetle, longicorn, longicorn beetle",304:"leaf beetle, chrysomelid",305:"dung beetle",306:"rhinoceros beetle",307:"weevil",308:"fly",309:"bee",310:"ant, emmet, pismire",311:"grasshopper, hopper",312:"cricket",313:"walking stick, walkingstick, stick insect",314:"cockroach, roach",315:"mantis, mantid",316:"cicada, cicala",317:"leafhopper",318:"lacewing, lacewing fly",319:"dragonfly, darning needle, devil's darning needle, sewing needle, snake feeder, snake doctor, mosquito hawk, skeeter hawk",320:"damselfly",321:"admiral",322:"ringlet, ringlet butterfly",323:"monarch, monarch butterfly, milkweed butterfly, Danaus plexippus",324:"cabbage butterfly",325:"sulphur butterfly, sulfur butterfly",326:"lycaenid, lycaenid butterfly",327:"starfish, sea star",328:"sea urchin",329:"sea cucumber, holothurian",330:"wood rabbit, cottontail, cottontail rabbit",331:"hare",332:"Angora, Angora rabbit",333:"hamster",334:"porcupine, hedgehog",335:"fox squirrel, eastern fox squirrel, Sciurus niger",336:"marmot",337:"beaver",338:"guinea pig, Cavia cobaya",339:"sorrel",340:"zebra",341:"hog, pig, grunter, squealer, Sus scrofa",342:"wild boar, boar, Sus scrofa",343:"warthog",344:"hippopotamus, hippo, river horse, Hippopotamus amphibius",345:"ox",346:"water buffalo, water ox, Asiatic buffalo, Bubalus bubalis",347:"bison",348:"ram, tup",349:"bighorn, bighorn sheep, cimarron, Rocky Mountain bighorn, Rocky Mountain sheep, Ovis canadensis",350:"ibex, Capra ibex",351:"hartebeest",352:"impala, Aepyceros melampus",353:"gazelle",354:"Arabian camel, dromedary, Camelus dromedarius",355:"llama",356:"weasel",357:"mink",358:"polecat, fitch, foulmart, foumart, Mustela putorius",359:"black-footed ferret, ferret, Mustela nigripes",360:"otter",361:"skunk, polecat, wood pussy",362:"badger",363:"armadillo",364:"three-toed sloth, ai, Bradypus tridactylus",365:"orangutan, orang, orangutang, Pongo pygmaeus",366:"gorilla, Gorilla gorilla",367:"chimpanzee, chimp, Pan troglodytes",368:"gibbon, Hylobates lar",369:"siamang, Hylobates syndactylus, Symphalangus syndactylus",370:"guenon, guenon monkey",371:"patas, hussar monkey, Erythrocebus patas",372:"baboon",373:"macaque",374:"langur",375:"colobus, colobus monkey",376:"proboscis monkey, Nasalis larvatus",377:"marmoset",378:"capuchin, ringtail, Cebus capucinus",379:"howler monkey, howler",380:"titi, titi monkey",381:"spider monkey, Ateles geoffroyi",382:"squirrel monkey, Saimiri sciureus",383:"Madagascar cat, ring-tailed lemur, Lemur catta",384:"indri, indris, Indri indri, Indri brevicaudatus",385:"Indian elephant, Elephas maximus",386:"African elephant, Loxodonta africana",387:"lesser panda, red panda, panda, bear cat, cat bear, Ailurus fulgens",388:"giant panda, panda, panda bear, coon bear, Ailuropoda melanoleuca",389:"barracouta, snoek",390:"eel",391:"coho, cohoe, coho salmon, blue jack, silver salmon, Oncorhynchus kisutch",392:"rock beauty, Holocanthus tricolor",393:"anemone fish",394:"sturgeon",395:"gar, garfish, garpike, billfish, Lepisosteus osseus",396:"lionfish",397:"puffer, pufferfish, blowfish, globefish",398:"abacus",399:"abaya",400:"academic gown, academic robe, judge's robe",401:"accordion, piano accordion, squeeze box",402:"acoustic guitar",403:"aircraft carrier, carrier, flattop, attack aircraft carrier",404:"airliner",405:"airship, dirigible",406:"altar",407:"ambulance",408:"amphibian, amphibious vehicle",409:"analog clock",410:"apiary, bee house",411:"apron",412:"ashcan, trash can, garbage can, wastebin, ash bin, ash-bin, ashbin, dustbin, trash barrel, trash bin",413:"assault rifle, assault gun",414:"backpack, back pack, knapsack, packsack, rucksack, haversack",415:"bakery, bakeshop, bakehouse",416:"balance beam, beam",417:"balloon",418:"ballpoint, ballpoint pen, ballpen, Biro",419:"Band Aid",420:"banjo",421:"bannister, banister, balustrade, balusters, handrail",422:"barbell",423:"barber chair",424:"barbershop",425:"barn",426:"barometer",427:"barrel, cask",428:"barrow, garden cart, lawn cart, wheelbarrow",429:"baseball",430:"basketball",431:"bassinet",432:"bassoon",433:"bathing cap, swimming cap",434:"bath towel",435:"bathtub, bathing tub, bath, tub",436:"beach wagon, station wagon, wagon, estate car, beach waggon, station waggon, waggon",437:"beacon, lighthouse, beacon light, pharos",438:"beaker",439:"bearskin, busby, shako",440:"beer bottle",441:"beer glass",442:"bell cote, bell cot",443:"bib",444:"bicycle-built-for-two, tandem bicycle, tandem",445:"bikini, two-piece",446:"binder, ring-binder",447:"binoculars, field glasses, opera glasses",448:"birdhouse",449:"boathouse",450:"bobsled, bobsleigh, bob",451:"bolo tie, bolo, bola tie, bola",452:"bonnet, poke bonnet",453:"bookcase",454:"bookshop, bookstore, bookstall",455:"bottlecap",456:"bow",457:"bow tie, bow-tie, bowtie",458:"brass, memorial tablet, plaque",459:"brassiere, bra, bandeau",460:"breakwater, groin, groyne, mole, bulwark, seawall, jetty",461:"breastplate, aegis, egis",462:"broom",463:"bucket, pail",464:"buckle",465:"bulletproof vest",466:"bullet train, bullet",467:"butcher shop, meat market",468:"cab, hack, taxi, taxicab",469:"caldron, cauldron",470:"candle, taper, wax light",471:"cannon",472:"canoe",473:"can opener, tin opener",474:"cardigan",475:"car mirror",476:"carousel, carrousel, merry-go-round, roundabout, whirligig",477:"carpenter's kit, tool kit",478:"carton",479:"car wheel",480:"cash machine, cash dispenser, automated teller machine, automatic teller machine, automated teller, automatic teller, ATM",481:"cassette",482:"cassette player",483:"castle",484:"catamaran",485:"CD player",486:"cello, violoncello",487:"cellular telephone, cellular phone, cellphone, cell, mobile phone",488:"chain",489:"chainlink fence",490:"chain mail, ring mail, mail, chain armor, chain armour, ring armor, ring armour",491:"chain saw, chainsaw",492:"chest",493:"chiffonier, commode",494:"chime, bell, gong",495:"china cabinet, china closet",496:"Christmas stocking",497:"church, church building",498:"cinema, movie theater, movie theatre, movie house, picture palace",499:"cleaver, meat cleaver, chopper",500:"cliff dwelling",501:"cloak",502:"clog, geta, patten, sabot",503:"cocktail shaker",504:"coffee mug",505:"coffeepot",506:"coil, spiral, volute, whorl, helix",507:"combination lock",508:"computer keyboard, keypad",509:"confectionery, confectionary, candy store",510:"container ship, containership, container vessel",511:"convertible",512:"corkscrew, bottle screw",513:"cornet, horn, trumpet, trump",514:"cowboy boot",515:"cowboy hat, ten-gallon hat",516:"cradle",517:"crane",518:"crash helmet",519:"crate",520:"crib, cot",521:"Crock Pot",522:"croquet ball",523:"crutch",524:"cuirass",525:"dam, dike, dyke",526:"desk",527:"desktop computer",528:"dial telephone, dial phone",529:"diaper, nappy, napkin",530:"digital clock",531:"digital watch",532:"dining table, board",533:"dishrag, dishcloth",534:"dishwasher, dish washer, dishwashing machine",535:"disk brake, disc brake",536:"dock, dockage, docking facility",537:"dogsled, dog sled, dog sleigh",538:"dome",539:"doormat, welcome mat",540:"drilling platform, offshore rig",541:"drum, membranophone, tympan",542:"drumstick",543:"dumbbell",544:"Dutch oven",545:"electric fan, blower",546:"electric guitar",547:"electric locomotive",548:"entertainment center",549:"envelope",550:"espresso maker",551:"face powder",552:"feather boa, boa",553:"file, file cabinet, filing cabinet",554:"fireboat",555:"fire engine, fire truck",556:"fire screen, fireguard",557:"flagpole, flagstaff",558:"flute, transverse flute",559:"folding chair",560:"football helmet",561:"forklift",562:"fountain",563:"fountain pen",564:"four-poster",565:"freight car",566:"French horn, horn",567:"frying pan, frypan, skillet",568:"fur coat",569:"garbage truck, dustcart",570:"gasmask, respirator, gas helmet",571:"gas pump, gasoline pump, petrol pump, island dispenser",572:"goblet",573:"go-kart",574:"golf ball",575:"golfcart, golf cart",576:"gondola",577:"gong, tam-tam",578:"gown",579:"grand piano, grand",580:"greenhouse, nursery, glasshouse",581:"grille, radiator grille",582:"grocery store, grocery, food market, market",583:"guillotine",584:"hair slide",585:"hair spray",586:"half track",587:"hammer",588:"hamper",589:"hand blower, blow dryer, blow drier, hair dryer, hair drier",590:"hand-held computer, hand-held microcomputer",591:"handkerchief, hankie, hanky, hankey",592:"hard disc, hard disk, fixed disk",593:"harmonica, mouth organ, harp, mouth harp",594:"harp",595:"harvester, reaper",596:"hatchet",597:"holster",598:"home theater, home theatre",599:"honeycomb",600:"hook, claw",601:"hoopskirt, crinoline",602:"horizontal bar, high bar",603:"horse cart, horse-cart",604:"hourglass",605:"iPod",606:"iron, smoothing iron",607:"jack-o'-lantern",608:"jean, blue jean, denim",609:"jeep, landrover",610:"jersey, T-shirt, tee shirt",611:"jigsaw puzzle",612:"jinrikisha, ricksha, rickshaw",613:"joystick",614:"kimono",615:"knee pad",616:"knot",617:"lab coat, laboratory coat",618:"ladle",619:"lampshade, lamp shade",620:"laptop, laptop computer",621:"lawn mower, mower",622:"lens cap, lens cover",623:"letter opener, paper knife, paperknife",624:"library",625:"lifeboat",626:"lighter, light, igniter, ignitor",627:"limousine, limo",628:"liner, ocean liner",629:"lipstick, lip rouge",630:"Loafer",631:"lotion",632:"loudspeaker, speaker, speaker unit, loudspeaker system, speaker system",633:"loupe, jeweler's loupe",634:"lumbermill, sawmill",635:"magnetic compass",636:"mailbag, postbag",637:"mailbox, letter box",638:"maillot",639:"maillot, tank suit",640:"manhole cover",641:"maraca",642:"marimba, xylophone",643:"mask",644:"matchstick",645:"maypole",646:"maze, labyrinth",647:"measuring cup",648:"medicine chest, medicine cabinet",649:"megalith, megalithic structure",650:"microphone, mike",651:"microwave, microwave oven",652:"military uniform",653:"milk can",654:"minibus",655:"miniskirt, mini",656:"minivan",657:"missile",658:"mitten",659:"mixing bowl",660:"mobile home, manufactured home",661:"Model T",662:"modem",663:"monastery",664:"monitor",665:"moped",666:"mortar",667:"mortarboard",668:"mosque",669:"mosquito net",670:"motor scooter, scooter",671:"mountain bike, all-terrain bike, off-roader",672:"mountain tent",673:"mouse, computer mouse",674:"mousetrap",675:"moving van",676:"muzzle",677:"nail",678:"neck brace",679:"necklace",680:"nipple",681:"notebook, notebook computer",682:"obelisk",683:"oboe, hautboy, hautbois",684:"ocarina, sweet potato",685:"odometer, hodometer, mileometer, milometer",686:"oil filter",687:"organ, pipe organ",688:"oscilloscope, scope, cathode-ray oscilloscope, CRO",689:"overskirt",690:"oxcart",691:"oxygen mask",692:"packet",693:"paddle, boat paddle",694:"paddlewheel, paddle wheel",695:"padlock",696:"paintbrush",697:"pajama, pyjama, pj's, jammies",698:"palace",699:"panpipe, pandean pipe, syrinx",700:"paper towel",701:"parachute, chute",702:"parallel bars, bars",703:"park bench",704:"parking meter",705:"passenger car, coach, carriage",706:"patio, terrace",707:"pay-phone, pay-station",708:"pedestal, plinth, footstall",709:"pencil box, pencil case",710:"pencil sharpener",711:"perfume, essence",712:"Petri dish",713:"photocopier",714:"pick, plectrum, plectron",715:"pickelhaube",716:"picket fence, paling",717:"pickup, pickup truck",718:"pier",719:"piggy bank, penny bank",720:"pill bottle",721:"pillow",722:"ping-pong ball",723:"pinwheel",724:"pirate, pirate ship",725:"pitcher, ewer",726:"plane, carpenter's plane, woodworking plane",727:"planetarium",728:"plastic bag",729:"plate rack",730:"plow, plough",731:"plunger, plumber's helper",732:"Polaroid camera, Polaroid Land camera",733:"pole",734:"police van, police wagon, paddy wagon, patrol wagon, wagon, black Maria",735:"poncho",736:"pool table, billiard table, snooker table",737:"pop bottle, soda bottle",738:"pot, flowerpot",739:"potter's wheel",740:"power drill",741:"prayer rug, prayer mat",742:"printer",743:"prison, prison house",744:"projectile, missile",745:"projector",746:"puck, hockey puck",747:"punching bag, punch bag, punching ball, punchball",748:"purse",749:"quill, quill pen",750:"quilt, comforter, comfort, puff",751:"racer, race car, racing car",752:"racket, racquet",753:"radiator",754:"radio, wireless",755:"radio telescope, radio reflector",756:"rain barrel",757:"recreational vehicle, RV, R.V.",758:"reel",759:"reflex camera",760:"refrigerator, icebox",761:"remote control, remote",762:"restaurant, eating house, eating place, eatery",763:"revolver, six-gun, six-shooter",764:"rifle",765:"rocking chair, rocker",766:"rotisserie",767:"rubber eraser, rubber, pencil eraser",768:"rugby ball",769:"rule, ruler",770:"running shoe",771:"safe",772:"safety pin",773:"saltshaker, salt shaker",774:"sandal",775:"sarong",776:"sax, saxophone",777:"scabbard",778:"scale, weighing machine",779:"school bus",780:"schooner",781:"scoreboard",782:"screen, CRT screen",783:"screw",784:"screwdriver",785:"seat belt, seatbelt",786:"sewing machine",787:"shield, buckler",788:"shoe shop, shoe-shop, shoe store",789:"shoji",790:"shopping basket",791:"shopping cart",792:"shovel",793:"shower cap",794:"shower curtain",795:"ski",796:"ski mask",797:"sleeping bag",798:"slide rule, slipstick",799:"sliding door",800:"slot, one-armed bandit",801:"snorkel",802:"snowmobile",803:"snowplow, snowplough",804:"soap dispenser",805:"soccer ball",806:"sock",807:"solar dish, solar collector, solar furnace",808:"sombrero",809:"soup bowl",810:"space bar",811:"space heater",812:"space shuttle",813:"spatula",814:"speedboat",815:"spider web, spider's web",816:"spindle",817:"sports car, sport car",818:"spotlight, spot",819:"stage",820:"steam locomotive",821:"steel arch bridge",822:"steel drum",823:"stethoscope",824:"stole",825:"stone wall",826:"stopwatch, stop watch",827:"stove",828:"strainer",829:"streetcar, tram, tramcar, trolley, trolley car",830:"stretcher",831:"studio couch, day bed",832:"stupa, tope",833:"submarine, pigboat, sub, U-boat",834:"suit, suit of clothes",835:"sundial",836:"sunglass",837:"sunglasses, dark glasses, shades",838:"sunscreen, sunblock, sun blocker",839:"suspension bridge",840:"swab, swob, mop",841:"sweatshirt",842:"swimming trunks, bathing trunks",843:"swing",844:"switch, electric switch, electrical switch",845:"syringe",846:"table lamp",847:"tank, army tank, armored combat vehicle, armoured combat vehicle",848:"tape player",849:"teapot",850:"teddy, teddy bear",851:"television, television system",852:"tennis ball",853:"thatch, thatched roof",854:"theater curtain, theatre curtain",855:"thimble",856:"thresher, thrasher, threshing machine",857:"throne",858:"tile roof",859:"toaster",860:"tobacco shop, tobacconist shop, tobacconist",861:"toilet seat",862:"torch",863:"totem pole",864:"tow truck, tow car, wrecker",865:"toyshop",866:"tractor",867:"trailer truck, tractor trailer, trucking rig, rig, articulated lorry, semi",868:"tray",869:"trench coat",870:"tricycle, trike, velocipede",871:"trimaran",872:"tripod",873:"triumphal arch",874:"trolleybus, trolley coach, trackless trolley",875:"trombone",876:"tub, vat",877:"turnstile",878:"typewriter keyboard",879:"umbrella",880:"unicycle, monocycle",881:"upright, upright piano",882:"vacuum, vacuum cleaner",883:"vase",884:"vault",885:"velvet",886:"vending machine",887:"vestment",888:"viaduct",889:"violin, fiddle",890:"volleyball",891:"waffle iron",892:"wall clock",893:"wallet, billfold, notecase, pocketbook",894:"wardrobe, closet, press",895:"warplane, military plane",896:"washbasin, handbasin, washbowl, lavabo, wash-hand basin",897:"washer, automatic washer, washing machine",898:"water bottle",899:"water jug",900:"water tower",901:"whiskey jug",902:"whistle",903:"wig",904:"window screen",905:"window shade",906:"Windsor tie",907:"wine bottle",908:"wing",909:"wok",910:"wooden spoon",911:"wool, woolen, woollen",912:"worm fence, snake fence, snake-rail fence, Virginia fence",913:"wreck",914:"yawl",915:"yurt",916:"web site, website, internet site, site",917:"comic book",918:"crossword puzzle, crossword",919:"street sign",920:"traffic light, traffic signal, stoplight",921:"book jacket, dust cover, dust jacket, dust wrapper",922:"menu",923:"plate",924:"guacamole",925:"consomme",926:"hot pot, hotpot",927:"trifle",928:"ice cream, icecream",929:"ice lolly, lolly, lollipop, popsicle",930:"French loaf",931:"bagel, beigel",932:"pretzel",933:"cheeseburger",934:"hotdog, hot dog, red hot",935:"mashed potato",936:"head cabbage",937:"broccoli",938:"cauliflower",939:"zucchini, courgette",940:"spaghetti squash",941:"acorn squash",942:"butternut squash",943:"cucumber, cuke",944:"artichoke, globe artichoke",945:"bell pepper",946:"cardoon",947:"mushroom",948:"Granny Smith",949:"strawberry",950:"orange",951:"lemon",952:"fig",953:"pineapple, ananas",954:"banana",955:"jackfruit, jak, jack",956:"custard apple",957:"pomegranate",958:"hay",959:"carbonara",960:"chocolate sauce, chocolate syrup",961:"dough",962:"meat loaf, meatloaf",963:"pizza, pizza pie",964:"potpie",965:"burrito",966:"red wine",967:"espresso",968:"cup",969:"eggnog",970:"alp",971:"bubble",972:"cliff, drop, drop-off",973:"coral reef",974:"geyser",975:"lakeside, lakeshore",976:"promontory, headland, head, foreland",977:"sandbar, sand bar",978:"seashore, coast, seacoast, sea-coast",979:"valley, vale",980:"volcano",981:"ballplayer, baseball player",982:"groom, bridegroom",983:"scuba diver",984:"rapeseed",985:"daisy",986:"yellow lady's slipper, yellow lady-slipper, Cypripedium calceolus, Cypripedium parviflorum",987:"corn",988:"acorn",989:"hip, rose hip, rosehip",990:"buckeye, horse chestnut, conker",991:"coral fungus",992:"agaric",993:"gyromitra",994:"stinkhorn, carrion fungus",995:"earthstar",996:"hen-of-the-woods, hen of the woods, Polyporus frondosus, Grifola frondosa",997:"bolete",998:"ear, spike, capitulum",999:"toilet tissue, toilet paper, bathroom tissue"},N5=224,T5={"1.00":"module_apply_default/MobilenetV1/Logits/global_pool","2.00":"module_apply_default/MobilenetV2/Logits/AvgPool"},A5={"1.00":{.25:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_025_224/classification/1",inputRange:[0,1]},"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_050_224/classification/1",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_075_224/classification/1",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v1_100_224/classification/1",inputRange:[0,1]}},"2.00":{"0.50":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_050_224/classification/2",inputRange:[0,1]},.75:{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_075_224/classification/2",inputRange:[0,1]},"1.00":{url:"https://tfhub.dev/google/imagenet/mobilenet_v2_100_224/classification/2",inputRange:[0,1]}}};function R5(e){return void 0===e&&(e={version:1,alpha:1}),C5(this,void 0,void 0,(function(){var t,n,r,i,o,a,s;return I5(this,(function(l){switch(l.label){case 0:if(null==_3)throw new Error("Cannot find TensorFlow.js. If you are using a <script> tag, please also include @tensorflow/tfjs on the page before using this model.");if(r=e.version.toFixed(2),i=e.alpha?e.alpha.toFixed(2):"",o=-1,a=1,null==e.modelUrl){if(!(r in A5))throw new Error("Invalid version of MobileNet. Valid versions are: "+Object.keys(A5));if(!(i in A5[r]))throw new Error("MobileNet constructed with invalid alpha "+e.alpha+". Valid multipliers for this version are: "+Object.keys(A5[r])+".");t=A5[r][i].inputRange,o=t[0],a=t[1]}return null!=e.inputRange&&(n=e.inputRange,o=n[0],a=n[1]),[4,(s=new D5(r,i,e.modelUrl,o,a)).load()];case 1:return l.sent(),[2,s]}}))}))}var D5=function(){function e(e,t,n,r,i){void 0===r&&(r=-1),void 0===i&&(i=1),this.version=e,this.alpha=t,this.modelUrl=n,this.inputMin=r,this.inputMax=i,this.normalizationConstant=(i-r)/255}return e.prototype.load=function(){return C5(this,void 0,void 0,(function(){var e,t,n,r,i=this;return I5(this,(function(o){switch(o.label){case 0:return this.modelUrl?(e=this,[4,E5(this.modelUrl)]):[3,2];case 1:return e.model=o.sent(),[3,4];case 2:return t=A5[this.version][this.alpha].url,n=this,[4,E5(t,{fromTFHub:!0})];case 3:n.model=o.sent(),o.label=4;case 4:return[4,(r=iK((function(){return i.model.predict(MK([1,N5,N5,3]))}))).data()];case 5:return o.sent(),r.dispose(),[2]}}))}))},e.prototype.infer=function(e,t){var n=this;return void 0===t&&(t=!1),iK((function(){e instanceof PH||(e=n3.fromPixels(e));var r=e.toFloat().mul(n.normalizationConstant).add(n.inputMin),i=r;e.shape[0]===N5&&e.shape[1]===N5||(i=X2.resizeBilinear(r,[N5,N5],!0));var o,a=i.reshape([-1,N5,N5,3]);if(t){var s=T5[n.version];o=n.model.execute(a,s).squeeze([1,2])}else o=n.model.predict(a).slice([0,1],[-1,1e3]);return o}))},e.prototype.classify=function(e,t){return void 0===t&&(t=3),C5(this,void 0,void 0,(function(){var n,r;return I5(this,(function(i){switch(i.label){case 0:return[4,O5(n=this.infer(e),t)];case 1:return r=i.sent(),n.dispose(),[2,r]}}))}))},e}();function O5(e,t){return C5(this,void 0,void 0,(function(){var n,r,i,o,a,s,l;return I5(this,(function(u){switch(u.label){case 0:return[4,(n=e.softmax()).data()];case 1:for(r=u.sent(),n.dispose(),i=[],l=0;l<r.length;l++)i.push({value:r[l],index:l});for(i.sort((function(e,t){return t.value-e.value})),o=new Float32Array(t),a=new Int32Array(t),l=0;l<t;l++)o[l]=i[l].value,a[l]=i[l].index;for(s=[],l=0;l<a.length;l++)s.push({className:S5[a[l]],probability:o[l]});return[2,s]}}))}))}const P5={initial:"initial",states:{initial:{on:{next:"loadingModel"}},loadingModel:{on:{next:"modelReady"}},modelReady:{on:{next:"imageReady"}},imageReady:{on:{next:"identifying"},showImage:!0},identifying:{on:{next:"complete"}},complete:{on:{next:"modelReady"},showImage:!0,showResults:!0}}},L5=()=>{const[e,t]=z.useState([]),[n,r]=z.useState(null),[i,o]=z.useState(null),a=z.useRef(null),s=z.useRef(null),[l,u]=z.useReducer(((e,t)=>P5.states[e].on[t]||P5.initial),P5.initial),c=()=>u("next"),d={initial:{action:async()=>{c();const e=await R5();o(e),c()},text:"Load Model"},loadingModel:{action:()=>{},text:"Loading Model..."},modelReady:{action:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()},text:"Upload Image"},imageReady:{action:async()=>{if(c(),a.current){const e=await i.classify(a.current);t(e)}c()},text:"Identify Breed"},identifying:{action:()=>{},text:"Identifying..."},complete:{action:async()=>{t([]),c()},text:"Reset"}},{showImage:h,showResults:p}=P5.states[l];return X.jsx("div",{className:"adminHome",children:X.jsxs("div",{className:"grid-container",children:[X.jsx("div",{className:"menu-icon",children:X.jsx("strong",{children:" ☰"})}),X.jsxs("header",{className:"header",children:[X.jsx("div",{className:"header_title",children:X.jsx("h2",{children:"Identify Breeds"})}),X.jsx("div",{className:"header_avatar",children:X.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),X.jsxs("aside",{className:"aside",children:[X.jsx("div",{className:"aside_close-icon",children:X.jsx("strong",{children:"×"})}),X.jsxs("h2",{className:"menu_title",children:[X.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),X.jsxs("ul",{className:"aside_list",children:[X.jsx("a",{href:"/adminHome",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-users fw"})," Users"]})}),X.jsx("a",{href:"/adminPetList",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),X.jsx("a",{href:"/adminAppointments",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),X.jsx("a",{href:"/petIdentifier",children:X.jsxs("li",{className:"aside_list-item active-list",children:[X.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),X.jsx("ul",{className:"aside_footer",children:X.jsx("li",{className:"aside_list-item",children:X.jsx("a",{href:"/login",children:"Logout"})})})]}),X.jsx("main",{className:"main",children:X.jsx("div",{className:"petIdentifierBody2",children:X.jsxs("div",{className:"petIdentifierDiv",children:[h&&X.jsx("img",{className:"petIdentifierImg",src:n||void 0,alt:"upload-preview",ref:a}),X.jsx("input",{className:"petIdentifierInput",type:"file",accept:"image/*",capture:"environment",onChange:e=>{const{files:t}=e.target;if(t&&t.length>0){const e=URL.createObjectURL(t[0]);r(e),c()}},ref:s}),p&&X.jsx("ul",{className:"petIdentifierUl",children:e.map((({className:e,probability:t})=>X.jsx("li",{className:"petIdentifierLi",children:`${e}: %${(100*t).toFixed(2)}`},e)))}),X.jsx("button",{className:"petIdentifierButton",onClick:d[l].action||(()=>{}),children:d[l].text})]})})})]})})},M5=()=>{const[e,t]=z.useState(!1),[n,r]=z.useState([]);return z.useEffect((()=>{(async()=>{const e=Vw.firestore(),t=await e.collection("users").get();r(t.docs.map((e=>({...e.data(),id:e.id}))))})()}),[]),X.jsx(xb,{children:X.jsx(nb,{children:X.jsx("div",{className:"adminHome",children:X.jsxs("div",{className:"grid-container",children:[X.jsx("div",{className:"menu-icon",onClick:()=>{t(!e)},children:X.jsx("strong",{children:" ☰"})}),X.jsxs("header",{className:"header",children:[X.jsx("div",{className:"header_title",children:X.jsx("h2",{children:"Users"})}),X.jsx("div",{className:"header_avatar",children:X.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),X.jsxs("aside",{className:"aside "+(e?"active":""),children:[X.jsx("div",{className:"aside_close-icon",children:X.jsx("strong",{children:"×"})}),X.jsxs("h2",{className:"menu_title",children:[X.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),X.jsxs("ul",{className:"aside_list",children:[X.jsx("a",{href:"/adminHome",children:X.jsxs("li",{className:"aside_list-item active-list",children:[X.jsx("i",{className:"fas fa-users fw"})," Users"]})}),X.jsx("a",{href:"/adminPetList",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),X.jsx("a",{href:"/adminAppointments",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),X.jsx("a",{href:"/petIdentifier",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),X.jsx("ul",{className:"aside_footer",children:X.jsx("li",{className:"aside_list-item",children:X.jsx("a",{href:"/login",children:"Logout"})})})]}),X.jsx("main",{className:"main",children:n.map((e=>X.jsx(lb,{className:"card",children:X.jsxs(tb,{children:["Email: ",e.email,X.jsx("br",{}),"Role: ",e.role,X.jsx("br",{}),X.jsx(sb,{color:"danger",onClick:()=>(async(e,t,i)=>{const o=Vw.firestore().collection("users").doc(e);window.confirm("Are you sure you want to delete this user?")&&(await o.delete(),r(n.filter((t=>t.id!==e))))})(e.id,e.email,e.role),children:"Delete"})]})},e.id)))})]})})})})},F5=()=>{const[e,t]=z.useState(!1),[n,r]=z.useState([]),i=Vw.storage().ref(),[o,a]=z.useState(0),[s,l]=z.useState(0);z.useEffect((()=>{(async()=>{const e=await(async()=>{const e=(await i.child("images").listAll()).items.map((e=>e.getDownloadURL()));return Promise.all(e)})();r(e)})()}),[]);const[u,c]=z.useState([]);return z.useEffect((()=>{(async()=>{const e=Vw.firestore().collection("pets").orderBy("index"),t=(await e.get()).docs.map((e=>({...e.data(),id:e.id})));c(t)})();const e=u.filter((e=>"Available"===e.status)),t=u.filter((e=>"Adopted"===e.status));a(e.length),l(t.length)}),[u]),X.jsx(xb,{children:X.jsx(nb,{children:X.jsx("div",{className:"adminHome",children:X.jsxs("div",{className:"grid-container",children:[X.jsx("div",{className:"menu-icon",onClick:()=>{t(!e)},children:X.jsx("strong",{children:" ☰"})}),X.jsxs("header",{className:"header",children:[X.jsx("div",{className:"header_title",children:X.jsx("h2",{children:"Pets"})}),X.jsx("div",{className:"header_avatar",children:X.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),X.jsxs("aside",{className:"aside "+(e?"active":""),children:[X.jsx("div",{className:"aside_close-icon",children:X.jsx("strong",{children:"×"})}),X.jsxs("h2",{className:"menu_title",children:[X.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),X.jsxs("ul",{className:"aside_list",children:[X.jsx("a",{href:"/adminHome",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-users fw"})," Users"]})}),X.jsx("a",{href:"/adminPetList",children:X.jsxs("li",{className:"aside_list-item active-list",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),X.jsx("a",{href:"/adminAppointments",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),X.jsx("a",{href:"/petIdentifier",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),X.jsx("ul",{className:"aside_footer",children:X.jsx("li",{className:"aside_list-item",children:X.jsx("a",{href:"/login",children:"Logout"})})})]}),X.jsxs("main",{className:"main",children:[X.jsxs(lb,{className:"countbox",children:[X.jsx("strong",{children:"Available:"})," ",o]}),X.jsxs(lb,{className:"countbox1",children:[X.jsx("strong",{children:"Adopted:"})," ",s]}),u.map(((e,t)=>X.jsx(lb,{className:"card3",children:X.jsxs(tb,{children:[X.jsx("img",{className:"document_img2",src:n[t],alt:e.name},t),X.jsx("br",{}),"Pet Name: ",e.name,X.jsx("br",{}),"Owner Information: ",e.caretakerInfo,X.jsx("br",{}),"Address: ",e.location,X.jsx("br",{}),"Neutered: ",e.neutered,X.jsx("br",{}),"Pet Status: ",e.status,X.jsx("br",{}),X.jsx(sb,{color:"light",children:X.jsx(Ep,{to:`/adminUpdatePet/${e.id}`,children:"Select Status"})}),X.jsx(sb,{color:"danger",onClick:()=>(async(e,t)=>{const n=Vw.firestore().collection("pets").doc(e),r=Vw.storage().ref().child(`images/${t}`);window.confirm("Are you sure you want to delete this pet?")&&(r.delete().then((()=>{console.log("Image deleted from Firebase Storage.")})).catch((e=>{console.error("Error deleting image from Firebase Storage:",e)})),await n.delete(),c(u.filter((t=>t.id!==e))))})(e.id,e.index),children:" Delete "})]})})))]})]})})})})},j5=()=>{const e=vp(),[t,n]=z.useState(!1),{id:r}=yp(),[i,o]=z.useState({index:Date.now(),name:"",age:"",breed:"",location:"",about:"",caretakerInfo:"",caretakerNumber:"",weight:"",gender:"male",neutered:"yes",type:"cat",status:"available",address:""});return z.useEffect((()=>{(async()=>{const e=Vw.firestore(),t=await e.collection("pets").doc(r).get();o(t.data())})()}),[r]),i?X.jsx(xb,{children:X.jsx(nb,{children:X.jsx("div",{className:"adminHome",children:X.jsxs("div",{className:"grid-container",children:[X.jsx("div",{className:"menu-icon",onClick:()=>{n(!t)},children:X.jsx("strong",{children:" ☰"})}),X.jsxs("header",{className:"header",children:[X.jsx("div",{className:"header_title",children:X.jsx("h2",{children:"Edit Appointment"})}),X.jsx("div",{className:"header_avatar",children:X.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),X.jsxs("aside",{className:"aside "+(t?"active":""),children:[X.jsx("div",{className:"aside_close-icon",children:X.jsx("strong",{children:"×"})}),X.jsxs("h2",{className:"menu_title",children:[X.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),X.jsxs("ul",{className:"aside_list",children:[X.jsx("a",{href:"/adminHome",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-users fw"})," Users"]})}),X.jsx("a",{href:"/adminPetList",children:X.jsxs("li",{className:"aside_list-item active-list",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),X.jsx("a",{href:"/adminAppointments",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),X.jsx("a",{href:"/petIdentifier",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),X.jsx("ul",{className:"aside_footer",children:X.jsx("li",{className:"aside_list-item",children:X.jsx("a",{href:"/login",children:"Logout"})})})]}),X.jsx("main",{className:"main",children:X.jsx(lb,{children:X.jsx(tb,{className:"card",children:X.jsxs("form",{onSubmit:t=>(async(t,n)=>{t.preventDefault();const i=Vw.firestore();await i.collection("pets").doc(r).set(n),e.push("/adminPetList")})(t,i),children:["Pet Name: ",i.name,X.jsx("br",{}),"Age: ",i.age,X.jsx("br",{}),"Gender: ",i.gender,X.jsx("br",{}),"Neutered: ",i.neutered,X.jsx("br",{}),"Type: ",i.type,X.jsx("br",{}),"Breed: ",i.breed,X.jsx("br",{}),"Weight: ",i.weight,X.jsx("br",{}),"Address: ",i.address,X.jsx("br",{}),"About: ",i.about,X.jsx("br",{}),"Breed: ",i.breed,X.jsx("br",{}),"Caretaker Name: ",i.caretakerInfo,X.jsx("br",{}),"Caretaker Contact Number: ",i.caretakerNumber,X.jsx("br",{}),"Caretaker Location: ",i.location,X.jsx("br",{}),X.jsxs("label",{children:["Status:",X.jsxs("select",{name:"status",value:i.status,onChange:e=>{o({...i,[e.target.name]:e.target.value})},children:[X.jsx("option",{value:"Available",children:"Available"}),X.jsx("option",{value:"Adopted",children:"Adopted"})]})]}),X.jsx("br",{}),X.jsx(sb,{type:"submit",children:"Update Pet"}),X.jsx("br",{}),X.jsx("br",{})]})})})})]})})})}):X.jsx("div",{children:"Loading..."})},B5=()=>{const[e,t]=z.useState(!1),[n,r]=z.useState([]),i=Vw.storage().ref(),[o,a]=z.useState([]),[s,l]=z.useState(0),[u,c]=z.useState(0),[d,h]=z.useState(0);return z.useEffect((()=>{(async()=>{const e=await(async()=>{const e=(await i.child("documents").listAll()).items.map((e=>e.getDownloadURL()));return Promise.all(e)})();r(e)})()}),[]),z.useEffect((()=>{(async()=>{const e=Vw.firestore().collection("appointment").orderBy("index"),t=await e.get(),n=await Promise.all(t.docs.map((async e=>{var t;const n=e.data(),r=await i.child(`documents/${n.index}`).getDownloadURL();return{...n,id:e.id,imageUrl:r,index:null!==(t=n.index)&&void 0!==t?t:""}})));a(n)})();const e=o.filter((e=>"Pending"===e.status)),t=o.filter((e=>"Confirmed"===e.status)),n=o.filter((e=>"Deny"===e.status));l(e.length),c(t.length),h(n.length)}),[o]),X.jsx(xb,{children:X.jsx(nb,{children:X.jsx("div",{className:"adminHome",children:X.jsxs("div",{className:"grid-container",children:[X.jsx("div",{className:"menu-icon",onClick:()=>{t(!e)},children:X.jsx("strong",{children:" ☰"})}),X.jsxs("header",{className:"header",children:[X.jsx("div",{className:"header_title",children:X.jsx("h2",{children:"Appointments"})}),X.jsx("div",{className:"header_avatar",children:X.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),X.jsxs("aside",{className:"aside "+(e?"active":""),children:[X.jsx("div",{className:"aside_close-icon",children:X.jsx("strong",{children:"×"})}),X.jsxs("h2",{className:"menu_title",children:[X.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),X.jsxs("ul",{className:"aside_list",children:[X.jsx("a",{href:"/adminHome",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-users fw"})," Users"]})}),X.jsx("a",{href:"/adminPetList",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),X.jsx("a",{href:"/adminAppointments",children:X.jsxs("li",{className:"aside_list-item active-list",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),X.jsx("a",{href:"/petIdentifier",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),X.jsx("ul",{className:"aside_footer",children:X.jsx("li",{className:"aside_list-item",children:X.jsx("a",{href:"/login",children:"Logout"})})})]}),X.jsxs("main",{className:"main",children:[X.jsxs(lb,{className:"countbox",children:[X.jsx("strong",{children:"Pending Appointments:"})," ",s]}),X.jsxs(lb,{className:"countbox1",children:[X.jsx("strong",{children:"Confirmed Appointments:"})," ",u]}),X.jsxs(lb,{className:"countbox2",children:[X.jsx("strong",{children:"Denied Appointments:"})," ",d]}),o.map(((e,t)=>X.jsx(lb,{className:"card2",children:X.jsxs(tb,{children:[X.jsx("img",{className:"document_img2   ",src:e.imageUrl,alt:e.index},t),X.jsx("br",{}),"Pet Name: ",e.pet_name,X.jsx("br",{}),"Owner Information: ",e.pet_name,X.jsx("br",{}),"Owner Number: ",e.pet_number,X.jsx("br",{}),"Address: ",e.pet_location,X.jsx("br",{}),"Your Name: ",e.appoint_name,X.jsx("br",{}),"Your Number: ",e.appoint_number,X.jsx("br",{}),"Your Email: ",e.appoint_email,X.jsx("br",{}),"Status: ",e.status,X.jsx("br",{}),X.jsx(sb,{color:"light",children:X.jsx(Ep,{to:`/selectStatus/${e.id}`,children:"View and Select Status"})}),X.jsx(sb,{color:"danger",onClick:()=>(async(e,t)=>{const n=Vw.firestore().collection("appointment").doc(e),r=Vw.storage().ref().child(`documents/${t}`);window.confirm("Are you sure you want to delete this appointment?")&&(r.delete().then((()=>{console.log("Image deleted from Firebase Storage.")})).catch((e=>{console.error("Error deleting image from Firebase Storage:",e)})),await n.delete(),a(o.filter((t=>t.id!==e))))})(e.id,e.index),children:" Delete "})]})})))]})]})})})})},V5=()=>{const e=vp(),[t,n]=z.useState(!1),{id:r}=yp(),[i,o]=z.useState({id:"",appoint_name:"",appoint_number:"",appoint_email:"",appoint_address:"",appoint_date:"",pet_name:"",pet_caretaker:"",pet_location:"",pet_index:"",status:"Pending",q1:"",q2:"",q3:"",q4:"",q5:"",q6:"",q7:"",q8:"",q9:"",q10:"",q11:"",q12:"",q13:"",q14:"",q15:"",q16:"",q17:"",q18:"",q19:""});return z.useEffect((()=>{(async()=>{const e=Vw.firestore(),t=await e.collection("appointment").doc(r).get();o(t.data())})()}),[r]),i?X.jsx(xb,{children:X.jsx(nb,{children:X.jsx("div",{className:"adminHome",children:X.jsxs("div",{className:"grid-container",children:[X.jsx("div",{className:"menu-icon",onClick:()=>{n(!t)},children:X.jsx("strong",{children:" ☰"})}),X.jsxs("header",{className:"header",children:[X.jsx("div",{className:"header_title",children:X.jsx("h2",{children:"Edit Appointment"})}),X.jsx("div",{className:"header_avatar",children:X.jsx("i",{className:"fas fa-user-circle fw fa-xl"})})]}),X.jsxs("aside",{className:"aside "+(t?"active":""),children:[X.jsx("div",{className:"aside_close-icon",children:X.jsx("strong",{children:"×"})}),X.jsxs("h2",{className:"menu_title",children:[X.jsx("i",{className:"fas fa-paw fw"})," FurPet"]}),X.jsxs("ul",{className:"aside_list",children:[X.jsx("a",{href:"/adminHome",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-users fw"})," Users"]})}),X.jsx("a",{href:"/adminPetList",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Pet List"]})}),X.jsx("a",{href:"/adminAppointments",children:X.jsxs("li",{className:"aside_list-item active-list",children:[X.jsx("i",{className:"fas fa-clipboard fw"})," Appointments"]})}),X.jsx("a",{href:"/petIdentifier",children:X.jsxs("li",{className:"aside_list-item",children:[X.jsx("i",{className:"fas fa-search fw"})," Identify Breeds"]})})]}),X.jsx("ul",{className:"aside_footer",children:X.jsx("li",{className:"aside_list-item",children:X.jsx("a",{href:"/login",children:"Logout"})})})]}),X.jsx("main",{className:"main",children:X.jsx(lb,{children:X.jsx(tb,{className:"card",children:X.jsxs("form",{onSubmit:t=>(async(t,n)=>{t.preventDefault();const i=Vw.firestore();await i.collection("appointment").doc(r).set(n),e.push("/adminAppointments")})(t,i),children:["Pet Name: ",i.pet_name,X.jsx("br",{}),"Owner Information: ",i.appoint_name,X.jsx("br",{}),"Address: ",i.appoint_address,X.jsx("br",{}),"Your Name: ",i.appoint_name,X.jsx("br",{}),"Your Number: ",i.appoint_number,X.jsx("br",{}),"Your Email: ",i.appoint_email,X.jsx("br",{}),X.jsxs("label",{children:["Status:",X.jsxs("select",{name:"status",value:i.status,onChange:e=>{o({...i,[e.target.name]:e.target.value})},children:[X.jsx("option",{value:"Pending",children:"Pending"}),X.jsx("option",{value:"Confirmed",children:"Confirmed"}),X.jsx("option",{value:"Deny",children:"Deny"})]})]}),X.jsx("br",{}),X.jsx(sb,{type:"submit",children:"Update Appointment"}),X.jsx("br",{}),X.jsx("br",{}),X.jsx("strong",{children:"Question and Answer"}),X.jsx("br",{}),"1. Do you own your home? ",X.jsx("p",{style:{color:"blue"},children:i.q1}),X.jsx("br",{}),"2. If renting, do you have permission from your landlord to have pets? ",X.jsx("p",{style:{color:"blue"},children:i.q2}),X.jsx("br",{}),"3. Are there children in your household? ",X.jsx("p",{style:{color:"blue"},children:i.q3}),X.jsx("br",{}),"4. Do you have other pets at home? ",X.jsx("p",{style:{color:"blue"},children:i.q4}),X.jsx("br",{}),"5. Do you have other pets at home? ",X.jsx("p",{style:{color:"blue"},children:i.q5}),X.jsx("br",{}),"6. Are you familiar with the specific needs of the chosen pet type/breed? ",X.jsx("p",{style:{color:"blue"},children:i.q6}),X.jsx("br",{}),"7. Do you have a stable daily routine? ",X.jsx("p",{style:{color:"blue"},children:i.q7}),X.jsx("br",{}),"8. Are you away from home for long periods during the day? ",X.jsx("p",{style:{color:"blue"},children:i.q8}),X.jsx("br",{}),"9. Can you afford the costs associated with pet ownership, including food, veterinary care, and unexpected expenses? ",X.jsx("p",{style:{color:"blue"},children:i.q9}),X.jsx("br",{}),"10. Do you have a regular veterinarian? ",X.jsx("p",{style:{color:"blue"},children:i.q10}),X.jsx("br",{}),"11. Are you willing to provide regular veterinary care, including vaccinations and routine check-ups? ",X.jsx("p",{style:{color:"blue"},children:i.q11}),X.jsx("br",{}),"12. Are you willing to attend training classes if necessary? ",X.jsx("p",{style:{color:"blue"},children:i.q12}),X.jsx("br",{}),"13. Do you have experience in training pets? ",X.jsx("p",{style:{color:"blue"},children:i.q13}),X.jsx("br",{}),"14. Will the pet primarily be kept indoors? ",X.jsx("p",{style:{color:"blue"},children:i.q14}),X.jsx("br",{}),"15. Do you have a secure, fenced yard? ",X.jsx("p",{style:{color:"blue"},children:i.q15}),X.jsx("br",{}),"16. Do you have a plan for emergencies or unforeseen circumstances? ",X.jsx("p",{style:{color:"blue"},children:i.q16}),X.jsx("br",{}),"17. Are you willing to spay/neuter your pet if it is not already done? ",X.jsx("p",{style:{color:"blue"},children:i.q17}),X.jsx("br",{}),"18. Can you provide personal or veterinarian references? ",X.jsx("p",{style:{color:"blue"},children:i.q18}),X.jsx("br",{}),"19. Are you willing to allow a representative from the pet owner to conduct a home visit? ",X.jsx("p",{style:{color:"blue"},children:i.q19}),X.jsx("br",{})]})})})})]})})})}):X.jsx("div",{children:"Loading..."})},z5={initial:"initial",states:{initial:{on:{next:"loadingModel"}},loadingModel:{on:{next:"modelReady"}},modelReady:{on:{next:"imageReady"}},imageReady:{on:{next:"identifying"},showImage:!0},identifying:{on:{next:"complete"}},complete:{on:{next:"modelReady"},showImage:!0,showResults:!0}}},U5=()=>{const[e,t]=z.useState([]),[n,r]=z.useState(null),[i,o]=z.useState(null),a=z.useRef(null),s=z.useRef(null),[l,u]=z.useReducer(((e,t)=>z5.states[e].on[t]||z5.initial),z5.initial),c=()=>u("next"),d={initial:{action:async()=>{c();const e=await R5();o(e),c()},text:"Load Model"},loadingModel:{action:()=>{},text:"Loading Model..."},modelReady:{action:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()},text:"Upload Image"},imageReady:{action:async()=>{if(c(),a.current){const e=await i.classify(a.current);t(e)}c()},text:"Identify Breed"},identifying:{action:()=>{},text:"Identifying..."},complete:{action:async()=>{t([]),c()},text:"Reset"}},{showImage:h,showResults:p}=z5.states[l];return X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/petOwnerHome",children:"Home"}),X.jsx("a",{href:"/petOwnerAdopt",children:"Adopt"}),X.jsx("a",{href:"/rehome",children:"Rehome"}),X.jsx("a",{href:"/petOwnerPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsx("main",{className:"main",children:X.jsx("div",{className:"petIdentifierBody",children:X.jsxs("div",{className:"petIdentifierDiv",children:[h&&X.jsx("img",{className:"petIdentifierImg",src:n||void 0,alt:"upload-preview",ref:a}),X.jsx("input",{className:"petIdentifierInput",type:"file",accept:"image/*",capture:"environment",onChange:e=>{const{files:t}=e.target;if(t&&t.length>0){const e=URL.createObjectURL(t[0]);r(e),c()}},ref:s}),p&&X.jsx("ul",{className:"petIdentifierUl",children:e.map((({className:e,probability:t})=>X.jsx("li",{className:"petIdentifierLi",children:`${e}: %${(100*t).toFixed(2)}`},e)))}),X.jsx("button",{className:"petIdentifierButton",onClick:d[l].action||(()=>{}),children:d[l].text})]})})})]})})},$5={initial:"initial",states:{initial:{on:{next:"loadingModel"}},loadingModel:{on:{next:"modelReady"}},modelReady:{on:{next:"imageReady"}},imageReady:{on:{next:"identifying"},showImage:!0},identifying:{on:{next:"complete"}},complete:{on:{next:"modelReady"},showImage:!0,showResults:!0}}},q5=()=>{const[e,t]=z.useState([]),[n,r]=z.useState(null),[i,o]=z.useState(null),a=z.useRef(null),s=z.useRef(null),[l,u]=z.useReducer(((e,t)=>$5.states[e].on[t]||$5.initial),$5.initial),c=()=>u("next"),d={initial:{action:async()=>{c();const e=await R5();o(e),c()},text:"Load Model"},loadingModel:{action:()=>{},text:"Loading Model..."},modelReady:{action:()=>{var e;return null===(e=s.current)||void 0===e?void 0:e.click()},text:"Upload Image"},imageReady:{action:async()=>{if(c(),a.current){const e=await i.classify(a.current);t(e)}c()},text:"Identify Breed"},identifying:{action:()=>{},text:"Identifying..."},complete:{action:async()=>{t([]),c()},text:"Reset"}},{showImage:h,showResults:p}=$5.states[l];return X.jsx(xb,{children:X.jsxs(nb,{children:[X.jsxs("nav",{children:[X.jsxs("div",{className:"logo1",children:[X.jsx("img",{className:"navLogo1",src:oW,alt:""}),X.jsx("h1",{className:"h1_logo1",children:"FurPet"})]}),X.jsxs("div",{className:"nav-links1",children:[X.jsx("a",{href:"/adopterHome",children:"Home"}),X.jsx("a",{href:"/adopterAdopt",children:"Adopt"}),X.jsx("a",{href:"/appointmentlist",children:"Appointments"}),X.jsx("a",{href:"/adopterPetIdentifier",children:"Identify"}),X.jsx("a",{href:"/login",children:"Log Out"})]})]}),X.jsx("main",{className:"main",children:X.jsx("div",{className:"petIdentifierBody",children:X.jsxs("div",{className:"petIdentifierDiv",children:[h&&X.jsx("img",{className:"petIdentifierImg",src:n||void 0,alt:"upload-preview",ref:a}),X.jsx("input",{className:"petIdentifierInput",type:"file",accept:"image/*",capture:"environment",onChange:e=>{const{files:t}=e.target;if(t&&t.length>0){const e=URL.createObjectURL(t[0]);r(e),c()}},ref:s}),p&&X.jsx("ul",{className:"petIdentifierUl",children:e.map((({className:e,probability:t})=>X.jsx("li",{className:"petIdentifierLi",children:`${e}: %${(100*t).toFixed(2)}`},e)))}),X.jsx("button",{className:"petIdentifierButton",onClick:d[l].action||(()=>{}),children:d[l].text})]})})})]})})};((e={})=>{"undefined"!=typeof document&&document.documentElement.classList.add("ion-ce"),Ig(Object.assign({},e))})();const W5=document.createElement("link");W5.href="https://fonts.googleapis.com/css2?family=Aclonica&display=swap",W5.href="https://fonts.googleapis.com/css2?family=Odor+Mean+Chey&display=swap",W5.href="https://fonts.googleapis.com/css2?family=Forum&display=swap",W5.href="https://fonts.googleapis.com/css2?family=Lexend+Deca:wght@700&display=swap",W5.href="https://fonts.googleapis.com/css2?family=Acme&display=swap",W5.href="https://fonts.googleapis.com/css2?family=Roboto:wght@700&display=swap",W5.rel="stylesheet",document.head.appendChild(W5);const H5=()=>X.jsx(gb,{children:X.jsx(Yb,{children:X.jsxs(Sb,{children:[X.jsx(mp,{exact:!0,path:"/petIdentifier",children:X.jsx(L5,{})}),X.jsx(mp,{exact:!0,path:"/petOwnerPetIdentifier",children:X.jsx(U5,{})}),X.jsx(mp,{exact:!0,path:"/adopterPetIdentifier",children:X.jsx(q5,{})}),X.jsx(mp,{exact:!0,path:"/signup",children:X.jsx(iW,{})}),X.jsx(mp,{exact:!0,path:"/login",children:X.jsx(aW,{})}),X.jsx(mp,{exact:!0,path:"/adopterHome",children:X.jsx(hW,{})}),X.jsx(mp,{exact:!0,path:"/petOwnerHome",children:X.jsx(pW,{})}),X.jsx(mp,{exact:!0,path:"/adopterAdopt",children:X.jsx(fW,{})}),X.jsx(mp,{exact:!0,path:"/petOwnerAdopt",children:X.jsx(mW,{})}),X.jsx(mp,{exact:!0,path:"/adopterAdoptme/:id",children:X.jsx(gW,{})}),X.jsx(mp,{exact:!0,path:"/petOwnerAdoptme/:id",children:X.jsx(vW,{})}),X.jsx(mp,{exact:!0,path:"/appointmentlist",children:X.jsx(NW,{})}),X.jsx(mp,{exact:!0,path:"/appointment/:id",children:X.jsx(wW,{})}),X.jsx(mp,{exact:!0,path:"/rehome",children:X.jsx(_W,{})}),X.jsx(mp,{exact:!0,path:"/addpet",children:X.jsx(IW,{})}),X.jsx(mp,{exact:!0,path:"/updatepet/:id",children:X.jsx(SW,{})}),X.jsx(mp,{exact:!0,path:"/adminHome",children:X.jsx(M5,{})}),X.jsx(mp,{exact:!0,path:"/adminAppointments",children:X.jsx(B5,{})}),X.jsx(mp,{exact:!0,path:"/selectStatus/:id",children:X.jsx(V5,{})}),X.jsx(mp,{exact:!0,path:"/adminPetList",children:X.jsx(F5,{})}),X.jsx(mp,{exact:!0,path:"/adminUpdatePet/:id",children:X.jsx(j5,{})}),X.jsx(mp,{exact:!0,path:"/",children:X.jsx(cp,{to:"/login"})})]})})});od(document.getElementById("root")).render(X.jsx(U.StrictMode,{children:X.jsx(H5,{})}))}}}));
